(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.core",["jquery"],function(){return function(e,t,i){function n(){}function r(e,t){if(t)return"'"+e.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'";var i=e.charAt(0),n=e.substring(1);return"="===i?"+("+n+")+":":"===i?"+$kendoHtmlEncode("+n+")+":";"+e+";$kendoOutput+="}function s(e,t,i){return e+="",t=t||2,(i=t-e.length)?ee[t].substring(0,i)+e:e}function o(e){var t=e.css(w.support.transitions.css+"box-shadow")||e.css("box-shadow"),i=t?t.match(I)||[0,0,0,0,0]:[0,0,0,0,0],n=D.max(+i[3],+(i[4]||0));return{left:-i[1]+n,right:+i[1]+n,bottom:+i[2]+n}}function a(e){var t=1,i=arguments.length;for(t=1;t<i;t++)l(e,arguments[t]);return e}function l(e,t){var i,n,r,s,o,a=w.data.ObservableArray,d=w.data.LazyObservableArray,c=w.data.DataSource,u=w.data.HierarchicalDataSource;for(i in t)(s=(r=typeof(n=t[i]))===P&&null!==n?n.constructor:null)&&s!==Array&&s!==a&&s!==d&&s!==c&&s!==u?n instanceof Date?e[i]=new Date(n.getTime()):q(n.clone)?e[i]=n.clone():(o=e[i],e[i]=typeof o===P?o||{}:{},l(e[i],n)):r!==O&&(e[i]=n);return e}function d(e,t,n){for(var r in t)if(t.hasOwnProperty(r)&&t[r].test(e))return r;return n!==i?n:e}function c(e){return e.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()})}function u(t,i){var n,r={};return document.defaultView&&document.defaultView.getComputedStyle?(n=document.defaultView.getComputedStyle(t,""),i&&e.each(i,function(e,t){r[t]=n.getPropertyValue(t)})):(n=t.currentStyle,i&&e.each(i,function(e,t){r[t]=n[c(t)]})),w.size(r)||(r=n),r}function h(e,t,i,n){return typeof e===z&&(q(t)&&(n=t,t=400,i=!1),q(i)&&(n=i,i=!1),typeof t===B&&(i=t,t=400),e={effects:e,duration:t,reverse:i,complete:n}),y({effects:{},duration:400,reverse:!1,init:T,teardown:T,hide:!1},e,{completeCallback:e.complete,complete:T})}function f(t,i,n,r,s){for(var o,a=0,l=t.length;a<l;a++)(o=e(t[a])).queue(function(){te.promise(o,h(i,n,r,s))});return t}function p(e,t){var n;return 0===t.indexOf("data")&&(t=(t=t.substring(4)).charAt(0).toLowerCase()+t.substring(1)),t=t.replace(pe,"-$1"),null===(n=e.getAttribute("data-"+w.ns+t))?n=i:"null"===n?n=null:"true"===n?n=!0:"false"===n?n=!1:M.test(n)?n=parseFloat(n):he.test(n)&&!fe.test(n)&&(n=new Function("return ("+n+")")()),n}function m(t,n){var r,s,o={};for(r in n)(s=p(t,r))!==i&&(ue.test(r)&&(s=w.template(e("#"+s).html())),o[r]=s);return o}function g(t,i){return e.contains(t,i)?-1:1}function v(){var t=e(this);return e.inArray(t.attr("data-"+w.ns+"role"),["slider","rangeslider"])>-1||t.is(":visible")}function _(t,i){var n=t.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(n)?!t.disabled:"a"===n?t.href||i:i)&&function(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}(t)}function b(e,t){return new b.fn.init(e,t)}var k,w=t.kendo=t.kendo||{cultures:{}},y=e.extend,x=e.each,C=e.isArray,S=e.proxy,T=e.noop,D=Math,F=t.JSON||{},E={},R=/%/,A=/\{(\d+)(:[^\}]+)?\}/g,I=/(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+)?/i,M=/^(\+|-?)\d+(\.?)\d*$/,H="function",z="string",N="number",P="object",L="null",B="boolean",O="undefined",V={},W={},U=[].slice;w.version="2016.2.504".replace(/^\s+|\s+$/g,""),n.extend=function(e){var t,i,n=function(){},r=this,s=e&&e.init?e.init:function(){r.apply(this,arguments)};n.prototype=r.prototype,i=s.fn=s.prototype=new n;for(t in e)null!=e[t]&&e[t].constructor===Object?i[t]=y(!0,{},n.prototype[t],e[t]):i[t]=e[t];return i.constructor=s,s.extend=r.extend,s},n.prototype._initOptions=function(e){this.options=a({},this.options,e)};var q=w.isFunction=function(e){return"function"==typeof e},$=function(){this._defaultPrevented=!0},j=function(){return!0===this._defaultPrevented},G=n.extend({init:function(){this._events={}},bind:function(e,t,n){var r,s,o,a,l=this,d=typeof e===z?[e]:e,c=typeof t===H;if(t===i){for(r in e)l.bind(r,e[r]);return l}for(r=0,s=d.length;r<s;r++)e=d[r],(a=c?t:t[e])&&(n&&(o=a,(a=function(){l.unbind(e,a),o.apply(l,arguments)}).original=o),(l._events[e]=l._events[e]||[]).push(a));return l},one:function(e,t){return this.bind(e,t,!0)},first:function(e,t){var i,n,r,s=typeof e===z?[e]:e,o=typeof t===H;for(i=0,n=s.length;i<n;i++)e=s[i],(r=o?t:t[e])&&(this._events[e]=this._events[e]||[]).unshift(r);return this},trigger:function(e,t){var i,n,r=this._events[e];if(r){for((t=t||{}).sender=this,t._defaultPrevented=!1,t.preventDefault=$,t.isDefaultPrevented=j,i=0,n=(r=r.slice()).length;i<n;i++)r[i].call(this,t);return!0===t._defaultPrevented}return!1},unbind:function(e,t){var n,r=this._events[e];if(e===i)this._events={};else if(r)if(t)for(n=r.length-1;n>=0;n--)r[n]!==t&&r[n].original!==t||r.splice(n,1);else this._events[e]=[];return this}}),Y=/^\w+/,K=/\$\{([^}]*)\}/g,Q=/\\\}/g,J=/__CURLY__/g,X=/\\#/g,Z=/__SHARP__/g,ee=["","0","00","000","0000"];k={paramName:"data",useWithBlock:!0,render:function(e,t){var i,n,r="";for(i=0,n=t.length;i<n;i++)r+=e(t[i]);return r},compile:function(e,t){var i,n,s,o=y({},this,t),a=o.paramName,l=a.match(Y)[0],d=o.useWithBlock,c="var $kendoOutput, $kendoHtmlEncode = kendo.htmlEncode;";if(q(e))return e;for(c+=d?"with("+a+"){":"",c+="$kendoOutput=",n=e.replace(Q,"__CURLY__").replace(K,"#=$kendoHtmlEncode($1)#").replace(J,"}").replace(X,"__SHARP__").split("#"),s=0;s<n.length;s++)c+=r(n[s],s%2==0);c+=d?";}":";",c=(c+="return $kendoOutput;").replace(Z,"#");try{return i=new Function(l,c),i._slotCount=Math.floor(n.length/2),i}catch(t){throw new Error(w.format("Invalid template:'{0}' Generated code:'{1}'",e,c))}}},function(){function e(e){return o.lastIndex=0,o.test(e)?'"'+e.replace(o,function(e){var t=a[e];return typeof t===z?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function t(s,o){var a,d,c,u,h,f,p=i,m=o[s];if(m&&typeof m===P&&typeof m.toJSON===H&&(m=m.toJSON(s)),typeof r===H&&(m=r.call(o,s,m)),(f=typeof m)===z)return e(m);if(f===N)return isFinite(m)?String(m):L;if(f===B||f===L)return String(m);if(f===P){if(!m)return L;if(i+=n,h=[],"[object Array]"===l.apply(m)){for(u=m.length,a=0;a<u;a++)h[a]=t(a,m)||L;return c=0===h.length?"[]":i?"[\n"+i+h.join(",\n"+i)+"\n"+p+"]":"["+h.join(",")+"]",i=p,c}if(r&&typeof r===P)for(u=r.length,a=0;a<u;a++)typeof r[a]===z&&(c=t(d=r[a],m))&&h.push(e(d)+(i?": ":":")+c);else for(d in m)Object.hasOwnProperty.call(m,d)&&(c=t(d,m))&&h.push(e(d)+(i?": ":":")+c);return c=0===h.length?"{}":i?"{\n"+i+h.join(",\n"+i)+"\n"+p+"}":"{"+h.join(",")+"}",i=p,c}}var i,n,r,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l={}.toString;typeof Date.prototype.toJSON!==H&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?s(this.getUTCFullYear(),4)+"-"+s(this.getUTCMonth()+1)+"-"+s(this.getUTCDate())+"T"+s(this.getUTCHours())+":"+s(this.getUTCMinutes())+":"+s(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),typeof F.stringify!==H&&(F.stringify=function(e,s,o){var a;if(i="",n="",typeof o===N)for(a=0;a<o;a+=1)n+=" ";else typeof o===z&&(n=o);if(r=s,s&&typeof s!==H&&(typeof s!==P||typeof s.length!==N))throw new Error("JSON.stringify");return t("",{"":e})})}(),function(){function e(e){if(e){if(e.numberFormat)return e;if(typeof e===z){var t=w.cultures;return t[e]||t[e.split("-")[0]]||null}return null}return null}function t(t){return t&&(t=e(t)),t||w.cultures.current}var n=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|"[^"]*"|'[^']*'/g,r=/^(n|c|p|e)(\d*)$/i,o=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g,a=/\,/g,l="",d=".",c=",",u="#",h="0",f="??",p={}.toString;w.cultures["en-US"]={name:"en-US",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSize:[3],percent:{pattern:["-n %","n %"],decimals:2,",":",",".":".",groupSize:[3],symbol:"%"},currency:{name:"US Dollar",abbr:"USD",pattern:["($n)","$n"],decimals:2,",":",",".":".",groupSize:[3],symbol:"$"}},calendars:{standard:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December"],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},AM:["AM","am","AM"],PM:["PM","pm","PM"],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",m:"MMMM dd",M:"MMMM dd",s:"yyyy'-'MM'-'ddTHH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},"/":"/",":":":",firstDay:0,twoDigitYearMax:2029}}},w.culture=function(t){var n,r=w.cultures;if(t===i)return r.current;(n=e(t)||r["en-US"]).calendar=n.calendars.standard,r.current=n},w.findCulture=e,w.getCulture=t,w.culture("en-US");var m=function(e,t,n,r){var s,o,a,l,u,h,f=e.indexOf(r[d]),p=r.groupSize.slice(),m=p.shift();if(n=-1!==f?f:n+1,s=e.substring(t,n),(o=s.length)>=m){for(a=o,l=[];a>-1;)if((u=s.substring(a-m,a))&&l.push(u),a-=m,h=p.shift(),0===(m=h!==i?h:m)){l.push(s.substring(0,a));break}s=l.reverse().join(r[c]),e=e.substring(0,t)+s+e.substring(n)}return e},g=function(e,t){return t=t||0,e=e.toString().split("e"),e=Math.round(+(e[0]+"e"+(e[1]?+e[1]+t:t))),e=e.toString().split("e"),(e=+(e[0]+"e"+(e[1]?+e[1]-t:-t))).toFixed(t)},v=function(e,v,_){if(v){if("[object Date]"===p.call(e)||e instanceof JalaliDate)return function(e,r,o){var a=(o=t(o)).calendars.standard,l=a.days,d=a.months;return(r=a.patterns[r]||r).replace(n,function(t){var n,r,o;return"d"===t?r=e.getDate():"dd"===t?r=s(e.getDate()):"ddd"===t?r=l.namesAbbr[e.getDay()]:"dddd"===t?r=l.names[e.getDay()]:"M"===t?r=e.getMonth()+1:"MM"===t?r=s(e.getMonth()+1):"MMM"===t?r=d.namesAbbr[e.getMonth()]:"MMMM"===t?r=d.names[e.getMonth()]:"yy"===t?r=s(e.getFullYear()%100):"yyyy"===t?r=s(e.getFullYear(),4):"h"===t?r=e.getHours()%12||12:"hh"===t?r=s(e.getHours()%12||12):"H"===t?r=e.getHours():"HH"===t?r=s(e.getHours()):"m"===t?r=e.getMinutes():"mm"===t?r=s(e.getMinutes()):"s"===t?r=e.getSeconds():"ss"===t?r=s(e.getSeconds()):"f"===t?r=D.floor(e.getMilliseconds()/100):"ff"===t?((r=e.getMilliseconds())>99&&(r=D.floor(r/10)),r=s(r)):"fff"===t?r=s(e.getMilliseconds(),3):"tt"===t?r=e.getHours()<12?a.AM[0]:a.PM[0]:"zzz"===t?(o=(n=e.getTimezoneOffset())<0,r=D.abs(n/60).toString().split(".")[0],n=D.abs(n)-60*r,r=(o?"+":"-")+s(r),r+=":"+s(n)):"zz"!==t&&"z"!==t||(o=(r=e.getTimezoneOffset()/60)<0,r=D.abs(r).toString().split(".")[0],r=(o?"+":"-")+("zz"===t?s(r):r)),r!==i?r:t.slice(1,t.length-1)})}(e,v,_);if(typeof e===N)return function(e,n,s){var p,v,_,b,k,w,y,x,C,S,T,D,F,E,R,A,I,M,H,z,N,P=(s=t(s)).numberFormat,L=P[d],B=P.decimals,O=P.pattern[0],V=[],W=e<0,U=l,q=l,$=-1;if(e===i)return l;if(!isFinite(e))return e;if(!n)return s.name.length?e.toLocaleString():e.toString();if(k=r.exec(n)){if(n=k[1].toLowerCase(),v="c"===n,_="p"===n,(v||_)&&(L=(P=v?P.currency:P.percent)[d],B=P.decimals,p=P.symbol,O=P.pattern[W?0:1]),(b=k[2])&&(B=+b),"e"===n)return b?e.toExponential(B):e.toExponential();if(_&&(e*=100),e=g(e,B),W=e<0,e=e.split(d),w=e[0],y=e[1],W&&(w=w.substring(1)),q=m(w,0,w.length,P),y&&(q+=L+y),"n"===n&&!W)return q;for(e=l,C=0,S=O.length;C<S;C++)e+="n"===(T=O.charAt(C))?q:"$"===T||"%"===T?p:T;return e}if(W&&(e=-e),(n.indexOf("'")>-1||n.indexOf('"')>-1||n.indexOf("\\")>-1)&&(n=n.replace(o,function(e){var t=e.charAt(0).replace("\\",""),i=e.slice(1).replace(t,"");return V.push(i),f})),n=n.split(";"),W&&n[1])n=n[1],F=!0;else if(0===e){if(-1==(n=n[2]||n[0]).indexOf(u)&&-1==n.indexOf(h))return n}else n=n[0];if(H=n.indexOf("%"),z=n.indexOf("$"),_=-1!=H,v=-1!=z,_&&(e*=100),v&&"\\"===n[z-1]&&(n=n.split("\\").join(""),v=!1),(v||_)&&(L=(P=v?P.currency:P.percent)[d],B=P.decimals,p=P.symbol),(D=n.indexOf(c)>-1)&&(n=n.replace(a,l)),E=n.indexOf(d),S=n.length,-1!=E?(y=(y=(y=e.toString().split("e"))[1]?g(e,Math.abs(y[1])):y[0]).split(d)[1]||l,I=(A=n.lastIndexOf(h)-E)>-1,M=(R=n.lastIndexOf(u)-E)>-1,C=y.length,I||M||(S=(n=n.substring(0,E)+n.substring(E+1)).length,E=-1,C=0),I&&A>R?C=A:R>A&&(M&&C>R?C=R:I&&C<A&&(C=A)),C>-1&&(e=g(e,C))):e=g(e),R=n.indexOf(u),A=n.indexOf(h),$=-1==R&&-1!=A?A:-1!=R&&-1==A?R:R>A?A:R,R=n.lastIndexOf(u),A=n.lastIndexOf(h),N=-1==R&&-1!=A?A:-1!=R&&-1==A?R:R>A?R:A,$==S&&(N=$),-1!=$){for(w=(q=e.toString().split(d))[0],y=q[1]||l,x=w.length,y.length,W&&-1*e>=0&&(W=!1),e=n.substring(0,$),W&&!F&&(e+="-"),C=$;C<S;C++){if(T=n.charAt(C),-1==E){if(N-C<x){e+=w;break}}else if(-1!=A&&A<C&&(U=l),E-C<=x&&E-C>-1&&(e+=w,C=E),E===C){e+=(y?L:l)+y,C+=N-E+1;continue}T===h?(e+=T,U=T):T===u&&(e+=U)}if(D&&(e=m(e,$,Math.max(N,x+$-1),P)),N>=$&&(e+=n.substring(N+1)),v||_){for(q=l,C=0,S=e.length;C<S;C++)q+="$"===(T=e.charAt(C))||"%"===T?p:T;e=q}if(S=V.length)for(C=0;C<S;C++)e=e.replace(f,V[C])}return e}(e,v,_)}return e!==i?e:""};w.format=function(e){var t=arguments;return e.replace(A,function(e,i,n){var r=t[parseInt(i,10)+1];return v(r,n?n.substring(1):"")})},w._extractFormat=function(e){return"{0:"===e.slice(0,3)&&(e=e.slice(3,e.length-1)),e},w._activeElement=function(){try{return document.activeElement}catch(e){return document.documentElement.activeElement}},w._round=g,w.toString=v}(),function(){function t(e,t,i){return!(e>=t&&e<=i)}function n(e){return e.charAt(0)}function r(t){return e.map(t,n)}function s(e){for(var t=0,i=e.length,n=[];t<i;t++)n[t]=(e[t]+"").toLowerCase();return n}function o(e){var t,i={};for(t in e)i[t]=s(e[t]);return i}function a(e,n,s){if(!e)return null;var a,l,d,h,f,p,g,v,_,b,k,y,x,C=function(e){for(var t=0;n[N]===e;)t++,N++;return t>0&&(N-=1),t},S=function(t){var i=m[t]||new RegExp("^\\d{1,"+t+"}"),n=e.substr(P,t).match(i);return n?(n=n[0],P+=n.length,parseInt(n,10)):null},T=function(t,i){for(var n,r,s,o=0,a=t.length,l=0,d=0;o<a;o++)r=(n=t[o]).length,s=e.substr(P,r),i&&(s=s.toLowerCase()),s==n&&r>l&&(l=r,d=o);return l?(P+=l,d+1):null},D=function(){var t=!1;return e.charAt(P)===n[N]&&(P++,t=!0),t},F=s.calendars.standard,E=null,R=null,A=null,I=null,M=null,H=null,z=null,N=0,P=0,L=!1,B=new Date,O=F.twoDigitYearMax||2029,V=B.getFullYear();for(n||(n="d"),(h=F.patterns[n])&&(n=h),d=(n=n.split("")).length;N<d;N++)if(a=n[N],L)"'"===a?L=!1:D();else if("d"===a){if(l=C("d"),F._lowerDays||(F._lowerDays=o(F.days)),null!==A&&l>2)continue;if(null===(A=l<3?S(2):T(F._lowerDays[3==l?"namesAbbr":"names"],!0))||t(A,1,31))return null}else if("M"===a){if(l=C("M"),F._lowerMonths||(F._lowerMonths=o(F.months)),null===(R=l<3?S(2):T(F._lowerMonths[3==l?"namesAbbr":"names"],!0))||t(R,1,12))return null;R-=1}else if("y"===a){if(l=C("y"),null===(E=S(l)))return null;2==l&&("string"==typeof O&&(O=V+parseInt(O,10)),(E=V-V%100+E)>O&&(E-=100))}else if("h"===a){if(C("h"),12==(I=S(2))&&(I=0),null===I||t(I,0,11))return null}else if("H"===a){if(C("H"),null===(I=S(2))||t(I,0,23))return null}else if("m"===a){if(C("m"),null===(M=S(2))||t(M,0,59))return null}else if("s"===a){if(C("s"),null===(H=S(2))||t(H,0,59))return null}else if("f"===a){if(l=C("f"),x=e.substr(P,l).match(m[3]),null!==(z=S(l))&&(z=parseFloat("0."+x[0],10),z=w._round(z,3),z*=1e3),null===z||t(z,0,999))return null}else if("t"===a){if(l=C("t"),v=F.AM,_=F.PM,1===l&&(v=r(v),_=r(_)),!(f=T(_))&&!T(v))return null}else if("z"===a){if(p=!0,l=C("z"),"Z"===e.substr(P,1)){D();continue}if(!(g=e.substr(P,6).match(l>2?u:c)))return null;if(g=g[0].split(":"),b=g[0],!(k=g[1])&&b.length>3&&(P=b.length-2,k=b.substring(P),b=b.substring(0,P)),b=parseInt(b,10),t(b,-12,13))return null;if(l>2&&(k=parseInt(k,10),isNaN(k)||t(k,0,59)))return null}else if("'"===a)L=!0,D();else if(!D())return null;return y=null!==I||null!==M||H||null,null===E&&null===R&&null===A&&y?(E=V,R=B.getMonth(),A=B.getDate()):(null===E&&(E=V),null===A&&(A=1)),f&&I<12&&(I+=12),p?(b&&(I+=-b),k&&(M+=-k),e=new Date(Date.UTC(E,R,A,I,M,H,z))):function(e,t){t||23!==e.getHours()||e.setHours(e.getHours()+2)}(e=new Date(E,R,A,I,M,H,z),I),E<100&&e.setFullYear(E),e.getDate()!==A&&p===i?null:e}var l=/\u00A0/g,d=/[eE][\-+]?[0-9]+/,c=/[+|\-]\d{1,2}/,u=/[+|\-]\d{1,2}:?\d{2}/,h=/^\/Date\((.*?)\)\/$/,f=/[+-]\d*/,p=["G","g","d","F","D","y","m","T","t"],m={2:/^\d{1,2}/,3:/^\d{1,3}/,4:/^\d{4}/},g={}.toString;w.parseDate=function(e,t,n){if(e instanceof JalaliDate)return e;if("[object Date]"===g.call(e)){var r=new JalaliDate;return r.gregoriandate=e,r.setJalali(),r}if(null!==e&&""!==e&&e!=i&&"yyyy/MM/dd"==t)return JalaliDate.parse(e);var s,o,l,d=0,c=null;if(e&&0===e.indexOf("/D")&&(c=h.exec(e)))return c=c[1],l=f.exec(c.substring(1)),c=new Date(parseInt(c,10)),l&&(l=function(e){var t="-"===e.substr(0,1)?-1:1;return e=e.substring(1),e=60*parseInt(e.substr(0,2),10)+parseInt(e.substring(2),10),t*e}(l[0]),c=w.timezone.apply(c,0),c=w.timezone.convert(c,0,-1*l)),c;if(n=w.getCulture(n),!t){for(t=[],o=n.calendar.patterns,s=p.length;d<s;d++)t[d]=o[p[d]];d=0,t=["yyyy/MM/dd HH:mm:ss","yyyy/MM/dd HH:mm","yyyy/MM/dd","ddd MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:ss.fffffffzzz","yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mm:ss.fffffff","yyyy-MM-ddTHH:mm:ss.fff","yyyy-MM-ddTHH:mmzzz","yyyy-MM-ddTHH:mmzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm:ss","yyyy-MM-dd HH:mm","yyyy-MM-dd","HH:mm:ss","HH:mm"].concat(t)}for(s=(t=C(t)?t:[t]).length;d<s;d++){if(!e)return null;if(-1!=e.indexOf("/")){var u=e.split("/"),m=(new JalaliDate).jalaliToGregorian(u[0],parseInt(u[1])+1,u[2]);return moment(new Date(m[0],m[1]-1,m[2])).format("YYYY-MM-DD")}if(c=a(e,t[d],n))return c}return c},w.parseInt=function(e,t){var i=w.parseFloat(e,t);return i&&(i|=0),i},w.parseFloat=function(e,t,i){if(!e&&0!==e)return null;if(typeof e===N)return e;e=e.toString();var n,r,s=(t=w.getCulture(t)).numberFormat,o=s.percent,a=s.currency,c=a.symbol,u=o.symbol,h=e.indexOf("-");return d.test(e)?(e=parseFloat(e.replace(s["."],".")),isNaN(e)&&(e=null),e):h>0?null:(h=h>-1,e.indexOf(c)>-1||i&&i.toLowerCase().indexOf("c")>-1?(n=(s=a).pattern[0].replace("$",c).split("n"),e.indexOf(n[0])>-1&&e.indexOf(n[1])>-1&&(e=e.replace(n[0],"").replace(n[1],""),h=!0)):e.indexOf(u)>-1&&(r=!0,s=o,c=u),e=e.replace("-","").replace(c,"").replace(l," ").split(s[","].replace(l," ")).join("").replace(s["."],"."),e=parseFloat(e),isNaN(e)?e=null:h&&(e*=-1),e&&r&&(e/=100),e)}}(),function(){E._scrollbar=i,E.scrollbar=function(e){if(isNaN(E._scrollbar)||e){var t,i=document.createElement("div");return i.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",i.innerHTML="&nbsp;",document.body.appendChild(i),E._scrollbar=t=i.offsetWidth-i.scrollWidth,document.body.removeChild(i),t}return E._scrollbar},E.isRtl=function(t){return e(t).closest(".k-rtl").length>0};var n=document.createElement("table");try{n.innerHTML="<tr><td></td></tr>",E.tbodyInnerHtml=!0}catch(e){E.tbodyInnerHtml=!1}E.touch="ontouchstart"in t,E.msPointers=t.MSPointerEvent,E.pointers=t.PointerEvent;var r=E.transitions=!1,s=E.transforms=!1,o="HTMLElement"in t?HTMLElement.prototype:[];E.hasHW3D="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix||"MozPerspective"in document.documentElement.style||"msPerspective"in document.documentElement.style,x(["Moz","webkit","O","ms"],function(){var e=this.toString(),t=typeof n.style[e+"Transition"]===z;if(t||typeof n.style[e+"Transform"]===z){var i=e.toLowerCase();return s={css:"ms"!=i?"-"+i+"-":"",prefix:e,event:"o"===i||"webkit"===i?i:""},t&&((r=s).event=r.event?r.event+"TransitionEnd":"transitionend"),!1}}),n=null,E.transforms=s,E.transitions=r,E.devicePixelRatio=t.devicePixelRatio===i?1:t.devicePixelRatio;try{E.screenWidth=t.outerWidth||t.screen?t.screen.availWidth:t.innerWidth,E.screenHeight=t.outerHeight||t.screen?t.screen.availHeight:t.innerHeight}catch(e){E.screenWidth=t.screen.availWidth,E.screenHeight=t.screen.availHeight}E.detectOS=function(e){var i,n=!1,r=[],s=!/mobile safari/i.test(e),o={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.(\d+(\.\d+)?)/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},a={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},l={tablet:/playbook|ipad|fire/i},c={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i};for(var u in o)if(o.hasOwnProperty(u)&&(r=e.match(o[u]))){if("windows"==u&&"plugins"in navigator)return!1;(n={}).device=u,n.tablet=d(u,l,!1),n.browser=d(e,c,"default"),n.name=d(u,a),n[n.name]=!0,n.majorVersion=r[2],n.minorVersion=r[3].replace("_","."),i=n.minorVersion.replace(".","").substr(0,2),n.flatVersion=n.majorVersion+i+new Array(3-(i.length<3?i.length:2)).join("0"),n.cordova=typeof t.PhoneGap!==O||typeof t.cordova!==O,n.appMode=t.navigator.standalone||/file|local|wmapp/.test(t.location.protocol)||n.cordova,n.android&&(E.devicePixelRatio<1.5&&n.flatVersion<400||s)&&(E.screenWidth>800||E.screenHeight>800)&&(n.tablet=u);break}return n};var a=E.mobileOS=E.detectOS(navigator.userAgent);E.wpDevicePixelRatio=a.wp?screen.width/320:0,E.kineticScrollNeeded=a&&(E.touch||E.msPointers||E.pointers),E.hasNativeScrolling=!1,(a.ios||a.android&&a.majorVersion>2||a.wp)&&(E.hasNativeScrolling=a),E.delayedClick=function(){if(E.touch){if(a.ios)return!0;if(a.android)return!E.browser.chrome||!(E.browser.version<32)&&!(e("meta[name=viewport]").attr("content")||"").match(/user-scalable=no/i)}return!1},E.mouseAndTouchPresent=E.touch&&!(E.mobileOS.ios||E.mobileOS.android),E.detectBrowser=function(e){var t=!1,i=[],n={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(var r in n)if(n.hasOwnProperty(r)&&(i=e.match(n[r]))){(t={})[r]=!0,t[i[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,t.version=parseInt(document.documentMode||i[2],10);break}return t},E.browser=E.detectBrowser(navigator.userAgent),E.detectClipboardAccess=function(){var e={copy:!!document.queryCommandSupported&&document.queryCommandSupported("copy"),cut:!!document.queryCommandSupported&&document.queryCommandSupported("cut"),paste:!!document.queryCommandSupported&&document.queryCommandSupported("paste")};return E.browser.chrome&&(e.paste=!1,E.browser.version>=43&&(e.copy=!0,e.cut=!0)),e},E.clipboard=E.detectClipboardAccess(),E.zoomLevel=function(){try{var e=E.browser,i=0,n=document.documentElement;return e.msie&&11==e.version&&n.scrollHeight>n.clientHeight&&!E.touch&&(i=E.scrollbar()),E.touch?n.clientWidth/t.innerWidth:e.msie&&e.version>=10?((top||t).document.documentElement.offsetWidth+i)/(top||t).innerWidth:1}catch(e){return 1}},E.cssBorderSpacing=void 0!==document.documentElement.style.borderSpacing&&!(E.browser.msie&&E.browser.version<8),function(t){var i="",n=e(document.documentElement),r=parseInt(t.version,10);t.msie?i="ie":t.mozilla?i="ff":t.safari?i="safari":t.webkit?i="webkit":t.opera?i="opera":t.edge&&(i="edge"),i&&(i="k-"+i+" k-"+i+r),E.mobileOS&&(i+=" k-mobile"),n.addClass(i)}(E.browser),E.eventCapture=document.documentElement.addEventListener;var l=document.createElement("input");E.placeholder="placeholder"in l,E.propertyChangeEvent="onpropertychange"in l,E.input=function(){for(var e,t=["number","date","time","month","week","datetime","datetime-local"],i=t.length,n={},r=0;r<i;r++)e=t[r],l.setAttribute("type",e),l.value="test",n[e.replace("-","")]="text"!==l.type&&"test"!==l.value;return n}(),l.style.cssText="float:left;",E.cssFloat=!!l.style.cssFloat,l=null,E.stableSort=function(){for(var e=[{index:0,field:"b"}],t=1;t<513;t++)e.push({index:t,field:"a"});return e.sort(function(e,t){return e.field>t.field?1:e.field<t.field?-1:0}),1===e[0].index}(),E.matchesSelector=o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector||o.matchesSelector||o.matches||function(t){for(var i=document.querySelectorAll?(this.parentNode||document).querySelectorAll(t)||[]:e(t),n=i.length;n--;)if(i[n]==this)return!0;return!1},E.pushState=t.history&&t.history.pushState;var c=document.documentMode;E.hashChange="onhashchange"in t&&!(E.browser.msie&&(!c||c<=8)),E.customElements="registerElement"in t.document}();var te={};e.extend(te,{enabled:!0,Element:function(t){this.element=e(t)},promise:function(e,t){e.is(":visible")||e.css({display:e.data("olddisplay")||"block"}).css("display"),t.hide&&e.data("olddisplay",e.css("display")).hide(),t.init&&t.init(),t.completeCallback&&t.completeCallback(e),e.dequeue()},disable:function(){this.enabled=!1,this.promise=this.promiseShim},enable:function(){this.enabled=!0,this.promise=this.animatedPromise}}),te.promiseShim=te.promise,"kendoAnimate"in e.fn||y(e.fn,{kendoStop:function(e,t){return this.stop(e,t)},kendoAnimate:function(e,t,i,n){return f(this,e,t,i,n)},kendoAddClass:function(e,t){return w.toggleClass(this,e,t,!0)},kendoRemoveClass:function(e,t){return w.toggleClass(this,e,t,!1)},kendoToggleClass:function(e,t,i){return w.toggleClass(this,e,t,i)}});var ie=/&/g,ne=/</g,re=/"/g,se=/'/g,oe=/>/g,ae=function(e){return e.target};E.touch&&(ae=function(e){var t="originalEvent"in e?e.originalEvent.changedTouches:"changedTouches"in e?e.changedTouches:null;return t?document.elementFromPoint(t[0].clientX,t[0].clientY):e.target},x(["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap"],function(t,i){e.fn[i]=function(e){return this.bind(i,e)}})),E.touch?E.mobileOS?(E.mousedown="touchstart",E.mouseup="touchend",E.mousemove="touchmove",E.mousecancel="touchcancel",E.click="touchend",E.resize="orientationchange"):(E.mousedown="mousedown touchstart",E.mouseup="mouseup touchend",E.mousemove="mousemove touchmove",E.mousecancel="mouseleave touchcancel",E.click="click",E.resize="resize"):E.pointers?(E.mousemove="pointermove",E.mousedown="pointerdown",E.mouseup="pointerup",E.mousecancel="pointercancel",E.click="pointerup",E.resize="orientationchange resize"):E.msPointers?(E.mousemove="MSPointerMove",E.mousedown="MSPointerDown",E.mouseup="MSPointerUp",E.mousecancel="MSPointerCancel",E.click="MSPointerUp",E.resize="orientationchange resize"):(E.mousemove="mousemove",E.mousedown="mousedown",E.mouseup="mouseup",E.mousecancel="mouseleave",E.click="click",E.resize="resize");var le=/^([a-z]+:)?\/\//i;y(w,{widgets:[],_widgetRegisteredCallbacks:[],ui:w.ui||{},fx:w.fx||function(e){return new w.effects.Element(e)},effects:w.effects||te,mobile:w.mobile||{},data:w.data||{},dataviz:w.dataviz||{},drawing:w.drawing||{},spreadsheet:{messages:{}},keys:{INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110},support:w.support||E,animate:w.animate||f,ns:"",attr:function(e){return"data-"+w.ns+e},getShadows:o,wrap:function(t,i){var n,r=E.browser,s="rtl"==t.css("direction");if(t.parent().hasClass("k-animation-container")){var a=t.parent(".k-animation-container"),l=a[0].style;a.is(":hidden")&&a.show(),(n=R.test(l.width)||R.test(l.height))||a.css({width:t.outerWidth(),height:t.outerHeight(),boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"})}else{var d=o(t),c=t[0].style.width,u=t[0].style.height,h=R.test(c),f=R.test(u);r.opera&&(d.left=d.right=d.bottom=5),n=h||f,!h&&(!i||i&&c)&&(c=t.outerWidth()),!f&&(!i||i&&u)&&(u=t.outerHeight()),t.wrap(e("<div/>").addClass("k-animation-container").css({width:c,height:u,marginLeft:d.left*(s?1:-1),paddingLeft:d.left,paddingRight:d.right,paddingBottom:d.bottom})),n&&t.css({width:"100%",height:"100%",boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"})}return r.msie&&D.floor(r.version)<=7&&(t.css({zoom:1}),t.children(".k-menu").width(t.width())),t.parent()},deepExtend:a,getComputedStyles:u,webComponents:w.webComponents||[],isScrollable:function(e){if(e&&e.className&&"string"==typeof e.className&&e.className.indexOf("k-auto-scrollable")>-1)return!0;var t=u(e,["overflow"]).overflow;return"auto"==t||"scroll"==t},scrollLeft:function(t,n){var r,s=E.browser.webkit,o=E.browser.mozilla,a=t instanceof e?t[0]:t;if(t){if(r=E.isRtl(t),n===i)return r&&s?a.scrollWidth-a.clientWidth-a.scrollLeft:Math.abs(a.scrollLeft);a.scrollLeft=r&&s?a.scrollWidth-a.clientWidth-n:r&&o?-n:n}},size:function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&"toJSON"!=t&&i++;return i},toCamelCase:c,toHyphens:function(e){return e.replace(/([a-z][A-Z])/g,function(e){return e.charAt(0)+"-"+e.charAt(1).toLowerCase()})},getOffset:w.getOffset||function(e,i,n){i||(i="offset");var r=e[i]();return E.browser.msie&&(E.pointers||E.msPointers)&&!n&&(r.top-=t.pageYOffset-document.documentElement.scrollTop,r.left-=t.pageXOffset-document.documentElement.scrollLeft),r},parseEffects:w.parseEffects||function(e){var t={};return x("string"==typeof e?e.split(" "):e,function(e){t[e]=this}),t},toggleClass:w.toggleClass||function(e,t,i,n){return t&&(t=t.split(" "),x(t,function(t,i){e.toggleClass(i,n)})),e},directions:w.directions||{left:{reverse:"right"},right:{reverse:"left"},down:{reverse:"up"},up:{reverse:"down"},top:{reverse:"bottom"},bottom:{reverse:"top"},in:{reverse:"out"},out:{reverse:"in"}},Observable:G,Class:n,Template:k,template:S(k.compile,k),render:S(k.render,k),stringify:S(F.stringify,F),eventTarget:ae,htmlEncode:function(e){return(""+e).replace(ie,"&amp;").replace(ne,"&lt;").replace(oe,"&gt;").replace(re,"&quot;").replace(se,"&#39;")},isLocalUrl:function(e){return e&&!le.test(e)},expr:function(e,t,i){return e=e||"",typeof t==z&&(i=t,t=!1),i=i||"d",e&&"["!==e.charAt(0)&&(e="."+e),e=t?(e=function(e,t){var i,n,r,s,o=t||"d",a=1;for(n=0,r=e.length;n<r;n++)""!==(s=e[n])&&(0!==(i=s.indexOf("["))&&(-1==i?s="."+s:(a++,s="."+s.substring(0,i)+" || {})"+s.substring(i))),a++,o+=s+(n<r-1?" || {})":")"));return new Array(a).join("(")+o}((e=(e=e.replace(/"([^.]*)\.([^"]*)"/g,'"$1_$DOT$_$2"')).replace(/'([^.]*)\.([^']*)'/g,"'$1_$DOT$_$2'")).split("."),i)).replace(/_\$DOT\$_/g,"."):i+e},getter:function(e,t){var i=e+t;return V[i]=V[i]||new Function("d","return "+w.expr(e,t))},setter:function(e){return W[e]=W[e]||new Function("d,value",w.expr(e)+"=value")},accessor:function(e){return{get:w.getter(e),set:w.setter(e)}},guid:function(){var e,t,i="";for(e=0;e<32;e++)t=16*D.random()|0,8!=e&&12!=e&&16!=e&&20!=e||(i+="-"),i+=(12==e?4:16==e?3&t|8:t).toString(16);return i},roleSelector:function(e){return e.replace(/(\S+)/g,"["+w.attr("role")+"=$1],").slice(0,-1)},directiveSelector:function(e){var t=e.split(" ");if(t)for(var i=0;i<t.length;i++)"view"!=t[i]&&(t[i]=t[i].replace(/(\w*)(view|bar|strip|over)$/,"$1-$2"));return t.join(" ").replace(/(\S+)/g,"kendo-mobile-$1,").slice(0,-1)},triggeredByInput:function(e){return/^(label|input|textarea|select)$/i.test(e.target.tagName)},onWidgetRegistered:function(e){for(var t=0,i=w.widgets.length;t<i;t++)e(w.widgets[t]);w._widgetRegisteredCallbacks.push(e)},logToConsole:function(e,i){var n=t.console;!w.suppressLog&&void 0!==n&&n.log&&n[i||"log"](e)}});var de=G.extend({init:function(e,t){this.element=w.jQuery(e).handler(this),this.angular("init",t),G.fn.init.call(this);var i=t?t.dataSource:null;i&&(t=y({},t,{dataSource:{}})),t=this.options=y(!0,{},this.options,t),i&&(t.dataSource=i),this.element.attr(w.attr("role"))||this.element.attr(w.attr("role"),(t.name||"").toLowerCase()),this.element.data("kendo"+t.prefix+t.name,this),this.bind(this.events,t)},events:[],options:{prefix:""},_hasBindingTarget:function(){return!!this.element[0].kendoBindingTarget},_tabindex:function(e){e=e||this.wrapper;var t=this.element,i="tabindex",n=e.attr(i)||t.attr(i);t.removeAttr(i),e.attr(i,isNaN(n)?0:n)},setOptions:function(t){this._setEvents(t),e.extend(this.options,t)},_setEvents:function(e){for(var t,i=0,n=this.events.length;i<n;i++)t=this.events[i],this.options[t]&&e[t]&&this.unbind(t,this.options[t]);this.bind(this.events,e)},resize:function(e){var t=this.getSize(),i=this._size;(e||(t.width>0||t.height>0)&&(!i||t.width!==i.width||t.height!==i.height))&&(this._size=t,this._resize(t,e),this.trigger("resize",t))},getSize:function(){return w.dimensions(this.element)},size:function(e){if(!e)return this.getSize();this.setSize(e)},setSize:e.noop,_resize:e.noop,destroy:function(){this.element.removeData("kendo"+this.options.prefix+this.options.name),this.element.removeData("handler"),this.unbind()},_destroy:function(){this.destroy()},angular:function(){},_muteAngularRebind:function(e){this._muteRebind=!0,e.call(this),this._muteRebind=!1}}),ce=de.extend({dataItems:function(){return this.dataSource.flatView()},_angularItems:function(t){var i=this;i.angular(t,function(){return{elements:i.items(),data:e.map(i.dataItems(),function(e){return{dataItem:e}})}})}});w.dimensions=function(e,t){var i=e[0];return t&&e.css(t),{width:i.offsetWidth,height:i.offsetHeight}},w.notify=T;var ue=/template$/i,he=/^\s*(?:\{(?:.|\r\n|\n)*\}|\[(?:.|\r\n|\n)*\])\s*$/,fe=/^\{(\d+)(:[^\}]+)?\}|^\[[A-Za-z_]*\]$/,pe=/([A-Z])/g;w.initWidget=function(n,r,s){var o,a,l,d,c,u,h,f,g,v;if(s?s.roles&&(s=s.roles):s=w.ui.roles,n=n.nodeType?n:n[0],u=n.getAttribute("data-"+w.ns+"role")){l=(g=-1===u.indexOf("."))?s[u]:w.getter(u)(t);var _=e(n).data(),b=l?"kendo"+l.fn.options.prefix+l.fn.options.name:"";v=g?new RegExp("^kendo.*"+u+"$","i"):new RegExp("^"+b+"$","i");for(var k in _)if(k.match(v)){if(k!==b)return _[k];o=_[k]}if(l){for(f=p(n,"dataSource"),r=e.extend({},m(n,l.fn.options),r),f&&(r.dataSource=typeof f===z?w.getter(f)(t):f),d=0,c=l.fn.events.length;d<c;d++)(h=p(n,a=l.fn.events[d]))!==i&&(r[a]=w.getter(h)(t));return o?e.isEmptyObject(r)||o.setOptions(r):o=new l(n,r),o}}},w.rolesFromNamespaces=function(e){var t,i,n=[];for(e[0]||(e=[w.ui,w.dataviz.ui]),t=0,i=e.length;t<i;t++)n[t]=e[t].roles;return y.apply(null,[{}].concat(n.reverse()))},w.init=function(t){var i=w.rolesFromNamespaces(U.call(arguments,1));e(t).find("[data-"+w.ns+"role]").addBack().each(function(){w.initWidget(this,{},i)})},w.destroy=function(t){e(t).find("[data-"+w.ns+"role]").addBack().each(function(){var t=e(this).data();for(var i in t)0===i.indexOf("kendo")&&typeof t[i].destroy===H&&t[i].destroy()})},w.resize=function(t,i){var n=e(t).find("[data-"+w.ns+"role]").addBack().filter(v);if(n.length){var r=e.makeArray(n);r.sort(g),e.each(r,function(){var t=w.widgetInstance(e(this));t&&t.resize(i)})}},w.parseOptions=m,y(w.ui,{Widget:de,DataBoundWidget:ce,roles:{},progress:function(t,i){var n,r,s,o,a=t.find(".k-loading-mask"),l=w.support,d=l.browser;i?a.length||(r=(n=l.isRtl(t))?"right":"left",o=t.scrollLeft(),s=d.webkit&&n?t[0].scrollWidth-t.width()-2*o:0,a=e("<div class='k-loading-mask'><span class='k-loading-text'>Loading...</span><div class='k-loading-image'/><div class='k-loading-color'/></div>").width("100%").height("100%").css("top",t.scrollTop()).css(r,Math.abs(o)+s).prependTo(t)):a&&a.remove()},plugin:function(t,n,r){var s,o=t.fn.options.name;n=n||w.ui,r=r||"",n[o]=t,n.roles[o.toLowerCase()]=t,s="getKendo"+r+o;var a={name:o="kendo"+r+o,widget:t,prefix:r||""};w.widgets.push(a);for(var l=0,d=w._widgetRegisteredCallbacks.length;l<d;l++)w._widgetRegisteredCallbacks[l](a);e.fn[o]=function(n){var r,s=this;return typeof n===z?(r=U.call(arguments,1),this.each(function(){var t,a,l=e.data(this,o);if(!l)throw new Error(w.format("Cannot call method '{0}' of {1} before it is initialized",n,o));if(typeof(t=l[n])!==H)throw new Error(w.format("Cannot find method '{0}' of {1}",n,o));if((a=t.apply(l,r))!==i)return s=a,!1})):this.each(function(){return new t(this,n)}),s},e.fn[o].widget=t,e.fn[s]=function(){return this.data(o)}}});var me={bind:function(){return this},nullObject:!0,options:{}},ge=de.extend({init:function(e,t){de.fn.init.call(this,e,t),this.element.autoApplyNS(),this.wrapper=this.element,this.element.addClass("km-widget")},destroy:function(){de.fn.destroy.call(this),this.element.kendoDestroy()},options:{prefix:"Mobile"},events:[],view:function(){var e=this.element.closest(w.roleSelector("view splitview modalview drawer"));return w.widgetInstance(e,w.mobile.ui)||me},viewHasNativeScrolling:function(){var e=this.view();return e&&e.options.useNativeScrolling},container:function(){var e=this.element.closest(w.roleSelector("view layout modalview drawer splitview"));return w.widgetInstance(e.eq(0),w.mobile.ui)||me}});y(w.mobile,{init:function(e){w.init(e,w.mobile.ui,w.ui,w.dataviz.ui)},appLevelNativeScrolling:function(){return w.mobile.application&&w.mobile.application.options&&w.mobile.application.options.useNativeScrolling},roles:{},ui:{Widget:ge,DataBoundWidget:ce.extend(ge.prototype),roles:{},plugin:function(e){w.ui.plugin(e,w.mobile.ui,"Mobile")}}}),a(w.dataviz,{init:function(e){w.init(e,w.dataviz.ui)},ui:{roles:{},themes:{},views:[],plugin:function(e){w.ui.plugin(e,w.dataviz.ui)}},roles:{}}),w.touchScroller=function(t,i){return i||(i={}),i.useNative=!0,e(t).map(function(t,n){return n=e(n),!(!E.kineticScrollNeeded||!w.mobile.ui.Scroller||n.data("kendoMobileScroller"))&&(n.kendoMobileScroller(i),n.data("kendoMobileScroller"))})[0]},w.preventDefault=function(e){e.preventDefault()},w.widgetInstance=function(e,i){var n,r,s=e.data(w.ns+"role"),o=[];if(s){if("content"===s&&(s="scroller"),i)if(i[0])for(n=0,r=i.length;n<r;n++)o.push(i[n].roles[s]);else o.push(i.roles[s]);else o=[w.ui.roles[s],w.dataviz.ui.roles[s],w.mobile.ui.roles[s]];for(s.indexOf(".")>=0&&(o=[w.getter(s)(t)]),n=0,r=o.length;n<r;n++){var a=o[n];if(a){var l=e.data("kendo"+a.fn.options.prefix+a.fn.options.name);if(l)return l}}}},w.onResize=function(i){var n=i;return E.mobileOS.android&&(n=function(){setTimeout(i,600)}),e(t).on(E.resize,n),n},w.unbindResize=function(i){e(t).off(E.resize,i)},w.attrValue=function(e,t){return e.data(w.ns+t)},w.days={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},e.extend(e.expr[":"],{kendoFocusable:function(t){var i=e.attr(t,"tabindex");return _(t,!isNaN(i)&&i>-1)}});var ve=["mousedown","mousemove","mouseenter","mouseleave","mouseover","mouseout","mouseup","click"],_e={setupMouseMute:function(){var t=0,i=ve.length,n=document.documentElement;if(!_e.mouseTrap&&E.eventCapture){_e.mouseTrap=!0,_e.bustClick=!1,_e.captureMouse=!1;for(var r=function(t){_e.captureMouse&&("click"===t.type?_e.bustClick&&!e(t.target).is("label, input, [data-rel=external]")&&(t.preventDefault(),t.stopPropagation()):t.stopPropagation())};t<i;t++)n.addEventListener(ve[t],r,!0)}},muteMouse:function(e){_e.captureMouse=!0,e.data.bustClick&&(_e.bustClick=!0),clearTimeout(_e.mouseTrapTimeoutID)},unMuteMouse:function(){clearTimeout(_e.mouseTrapTimeoutID),_e.mouseTrapTimeoutID=setTimeout(function(){_e.captureMouse=!1,_e.bustClick=!1},400)}},be={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"};E.touch&&(E.mobileOS.ios||E.mobileOS.android)?be={down:"touchstart",move:"touchmove",up:"touchend touchcancel",cancel:"touchcancel"}:E.pointers?be={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"}:E.msPointers&&(be={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel MSPointerLeave"}),!E.msPointers||"onmspointerenter"in t||e.each({MSPointerEnter:"MSPointerOver",MSPointerLeave:"MSPointerOut"},function(t,i){e.event.special[t]={delegateType:i,bindType:i,handle:function(t){var n,r=t.relatedTarget,s=t.handleObj;return r&&(r===this||e.contains(this,r))||(t.type=s.origType,n=s.handler.apply(this,arguments),t.type=i),n}}});var ke=function(e){return be[e]||e},we=/([^ ]+)/g;w.applyEventMap=function(e,t){return e=e.replace(we,ke),t&&(e=e.replace(we,"$1."+t)),e};var ye=e.fn.on;y(!0,b,e),(b.fn=b.prototype=new e).constructor=b,b.fn.init=function(t,i){return i&&i instanceof e&&!(i instanceof b)&&(i=b(i)),e.fn.init.call(this,t,i,xe)},b.fn.init.prototype=b.fn;var xe=b(document);y(b.fn,{handler:function(e){return this.data("handler",e),this},autoApplyNS:function(e){return this.data("kendoNS",e||w.guid()),this},on:function(){var e=this.data("kendoNS");if(1===arguments.length)return ye.call(this,arguments[0]);var t=this,i=U.call(arguments);typeof i[i.length-1]===O&&i.pop();var n=i[i.length-1],r=w.applyEventMap(i[0],e);if(E.mouseAndTouchPresent&&r.search(/mouse|click/)>-1&&this[0]!==document.documentElement){_e.setupMouseMute();var s=2===i.length?null:i[1],o=r.indexOf("click")>-1&&r.indexOf("touchend")>-1;ye.call(this,{touchstart:_e.muteMouse,touchend:_e.unMuteMouse},s,{bustClick:o})}return typeof n===z&&(t=this.data("handler"),n=t[n],i[i.length-1]=function(e){n.call(t,e)}),i[0]=r,ye.apply(this,i),this},kendoDestroy:function(e){return(e=e||this.data("kendoNS"))&&this.off("."+e),this}}),w.jQuery=b,w.eventMap=be,w.timezone=function(){function e(e,t){var r,s,o,a=t[3],l=t[4],d=t[5],c=t[8];return c||(t[8]=c={}),c[e]?c[e]:(isNaN(l)?0===l.indexOf("last")?(r=new Date(Date.UTC(e,i[a]+1,1,d[0]-24,d[1],d[2],0)),s=n[l.substr(4,3)],o=r.getUTCDay(),r.setUTCDate(r.getUTCDate()+s-o-(s>o?7:0))):l.indexOf(">=")>=0&&(r=new Date(Date.UTC(e,i[a],l.substr(5),d[0],d[1],d[2],0)),s=n[l.substr(0,3)],o=r.getUTCDay(),r.setUTCDate(r.getUTCDate()+s-o+(s<o?7:0))):r=new Date(Date.UTC(e,i[a],l,d[0],d[1],d[2],0)),c[e]=r)}function t(t,i,n,r){typeof t!=N&&(t=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));var s=function(e,t,i){var n=t[i];if("string"==typeof n&&(n=t[n]),!n)throw new Error('Timezone "'+i+'" is either incorrect, or kendo.timezones.min.js is not included.');for(var r=n.length-1;r>=0;r--){var s=n[r][3];if(s&&e>s)break}var o=n[r+1];if(!o)throw new Error('Timezone "'+i+'" not found on '+e+".");return o}(t,i,r);return{zone:s,rule:function(t,i,n){if(!(i=i[n])){var r=n.split(":"),s=0;return r.length>1&&(s=60*r[0]+Number(r[1])),[-1e6,"max","-","Jan",1,[0,0,0],s,"-"]}var o=new Date(t).getUTCFullYear();(i=jQuery.grep(i,function(e){var t=e[0],i=e[1];return t<=o&&(i>=o||t==o&&"only"==i||"max"==i)})).push(t),i.sort(function(t,i){return"number"!=typeof t&&(t=Number(e(o,t))),"number"!=typeof i&&(i=Number(e(o,i))),t-i});var a=i[jQuery.inArray(t,i)-1]||i[i.length-1];return isNaN(a)?a:null}(t,n,s[1])}}var i={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},n={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6};return{zones:{},rules:{},offset:function(e,i){if("Etc/UTC"==i||"Etc/GMT"==i)return 0;var n=t(e,this.zones,this.rules,i),r=n.zone,s=n.rule;return w.parseFloat(s?r[0]-s[6]:r[0])},convert:function(e,t,i){typeof t==z&&(t=this.offset(e,t)),typeof i==z&&(i=this.offset(e,i));var n=e.getTimezoneOffset(),r=(e=new Date(e.getTime()+6e4*(t-i))).getTimezoneOffset();return new Date(e.getTime()+6e4*(r-n))},apply:function(e,t){return this.convert(e,e.getTimezoneOffset(),t)},remove:function(e,t){return this.convert(e,t,e.getTimezoneOffset())},abbr:function(e,i){var n=t(e,this.zones,this.rules,i),r=n.zone,s=n.rule,o=r[2];return o.indexOf("/")>=0?o.split("/")[s&&+s[6]?1:0]:o.indexOf("%s")>=0?o.replace("%s",s&&"-"!=s[7]?s[7]:""):o},toLocalDate:function(e){return this.apply(new Date(e),"Etc/UTC")}}}(),w.date=function(){function e(e,t){return 0===t&&23===e.getHours()&&(e.setHours(e.getHours()+2),!0)}function t(t,i,n){var r=t.getHours();n=n||1,i=(i-t.getDay()+7*n)%7,t.setDate(t.getDate()+i),e(t,r)}function i(e){return new Date(e.getFullYear(),e.getMonth(),1)}function n(t){return t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),e(t,0),t}function r(e){return e.getTime()-n(e)}function s(t,i){var n=t.getHours();return t=new Date(t),o(t,i*d),e(t,n),t}function o(e,t,i){var n,r=e.getTimezoneOffset();e.setTime(e.getTime()+t),i||(n=e.getTimezoneOffset()-r,e.setTime(e.getTime()+n*l))}function a(){return n(new Date)}var l=6e4,d=864e5;return{adjustDST:e,dayOfWeek:function(e,i,n){return e=new Date(e),t(e,i,n),e},setDayOfWeek:t,getDate:n,isInDateRange:function(e,t,i){var n,r=t.getTime(),s=i.getTime();return r>=s&&(s+=d),(n=e.getTime())>=r&&n<=s},isInTimeRange:function(e,t,i){var n,s=r(t),o=r(i);return!e||s==o||(t>=i&&(i+=d),n=r(e),s>n&&(n+=d),o<s&&(o+=d),n>=s&&n<=o)},isToday:function(e){return n(e).getTime()==a().getTime()},nextDay:function(e){return s(e,1)},previousDay:function(e){return s(e,-1)},toUtcTime:function(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())},MS_PER_DAY:d,MS_PER_HOUR:60*l,MS_PER_MINUTE:l,setTime:o,setHours:function(t,i){return t=new Date(w.date.getDate(t).getTime()+w.date.getMilliseconds(i)),e(t,i.getHours()),t},addDays:s,today:a,toInvariantTime:function(e){var t=new Date(1980,1,1,0,0,0);return e&&t.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),t},firstDayOfMonth:i,lastDayOfMonth:function(e){var t=new Date(e.getFullYear(),e.getMonth()+1,0),n=i(e),r=Math.abs(t.getTimezoneOffset()-n.getTimezoneOffset());return r&&t.setHours(n.getHours()+r/60),t},getMilliseconds:r}}(),w.stripWhitespace=function(e){if(document.createNodeIterator)for(var t=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,function(t){return t.parentNode==e?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},!1);t.nextNode();)t.referenceNode&&!t.referenceNode.textContent.trim()&&t.referenceNode.parentNode.removeChild(t.referenceNode);else for(var i=0;i<e.childNodes.length;i++){var n=e.childNodes[i];3!=n.nodeType||/\S/.test(n.nodeValue)||(e.removeChild(n),i--),1==n.nodeType&&w.stripWhitespace(n)}};var Ce=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)};w.animationFrame=function(e){Ce.call(t,e)};var Se=[];w.queueAnimation=function(e){Se[Se.length]=e,1===Se.length&&w.runNextAnimation()},w.runNextAnimation=function(){w.animationFrame(function(){Se[0]&&(Se.shift()(),Se[0]&&w.runNextAnimation())})},w.parseQueryStringParams=function(e){for(var t={},i=(e.split("?")[1]||"").split(/&|=/),n=i.length,r=0;r<n;r+=2)""!==i[r]&&(t[decodeURIComponent(i[r])]=decodeURIComponent(i[r+1]));return t},w.elementUnderCursor=function(e){if(void 0!==e.x.client)return document.elementFromPoint(e.x.client,e.y.client)},w.wheelDeltaY=function(e){var t,n=e.originalEvent,r=n.wheelDeltaY;return n.wheelDelta?(r===i||r)&&(t=n.wheelDelta):n.detail&&n.axis===n.VERTICAL_AXIS&&(t=10*-n.detail),t},w.throttle=function(e,t){var i,n=0;if(!t||t<=0)return e;var r=function(){function r(){e.apply(s,a),n=+new Date}var s=this,o=+new Date-n,a=arguments;if(!n)return r();i&&clearTimeout(i),o>t?r():i=setTimeout(r,t-o)};return r.cancel=function(){clearTimeout(i)},r},w.caret=function(t,n,r){var s,o=n!==i;if(r===i&&(r=n),t[0]&&(t=t[0]),!o||!t.disabled){try{if(t.selectionStart!==i)o?(t.focus(),t.setSelectionRange(n,r)):n=[t.selectionStart,t.selectionEnd];else if(document.selection)if(e(t).is(":visible")&&t.focus(),s=t.createTextRange(),o)s.collapse(!0),s.moveStart("character",n),s.moveEnd("character",r-n),s.select();else{var a,l,d=s.duplicate();s.moveToBookmark(document.selection.createRange().getBookmark()),d.setEndPoint("EndToStart",s),l=(a=d.text.length)+s.text.length,n=[a,l]}}catch(e){n=[]}return n}},w.compileMobileDirective=function(e,i){var n=t.angular;return e.attr("data-"+w.ns+"role",e[0].tagName.toLowerCase().replace("kendo-mobile-","").replace("-","")),n.element(e).injector().invoke(["$compile",function(t){t(e)(i),/^\$(digest|apply)$/.test(i.$$phase)||i.$digest()}]),w.widgetInstance(e,w.mobile.ui)},w.antiForgeryTokens=function(){var t={},n=e("meta[name=csrf-token],meta[name=_csrf]").attr("content"),r=e("meta[name=csrf-param],meta[name=_csrf_header]").attr("content");return e("input[name^='__RequestVerificationToken']").each(function(){t[this.name]=this.value}),r!==i&&n!==i&&(t[r]=n),t},w.cycleForm=function(e){function t(e){var t=w.widgetInstance(e);t&&t.focus?t.focus():e.focus()}var i=e.find("input, .k-widget").first(),n=e.find("button, .k-button").last();n.on("keydown",function(e){e.keyCode!=w.keys.TAB||e.shiftKey||(e.preventDefault(),t(i))}),i.on("keydown",function(e){e.keyCode==w.keys.TAB&&e.shiftKey&&(e.preventDefault(),t(n))})},function(){function i(t,i,n,r){var s=e("<form>").attr({action:n,method:"POST",target:r}),o=w.antiForgeryTokens();o.fileName=i;var a=t.split(";base64,");o.contentType=a[0].replace("data:",""),o.base64=a[1];for(var l in o)o.hasOwnProperty(l)&&e("<input>").attr({value:o[l],name:l,type:"hidden"}).appendTo(s);s.appendTo("body").submit().remove()}function n(e,t){var i=e;if("string"==typeof e){for(var n=e.split(";base64,"),r=n[0],s=atob(n[1]),o=new Uint8Array(s.length),a=0;a<s.length;a++)o[a]=s.charCodeAt(a);i=new Blob([o.buffer],{type:r})}navigator.msSaveBlob(i,t)}function r(e,i){t.Blob&&e instanceof Blob&&(e=URL.createObjectURL(e)),s.download=i,s.href=e;var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),s.dispatchEvent(n),URL.revokeObjectURL(e)}var s=document.createElement("a"),o="download"in s&&!w.support.browser.edge;w.saveAs=function(e){var t=i;e.forceProxy||(o?t=r:navigator.msSaveBlob&&(t=n)),t(e.dataURI,e.fileName,e.proxyURL,e.proxyTarget)}}(),w.proxyModelSetters=function(e){var t={};return Object.keys(e||{}).forEach(function(i){Object.defineProperty(t,i,{get:function(){return e[i]},set:function(t){e[i]=t,e.dirty=!0}})}),t}}(jQuery,window),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.router",["kendo.core"],function(){return function(e,t){function i(e,t){return t?(e+"/"===t&&(e=t),new RegExp("^"+t,"i").test(e)||(e=t+"/"+e),c.protocol+"//"+(c.host+"/"+e).replace(/\/\/+/g,"/")):e}function n(e){return e?"#!":"#"}function r(e){var t=c.href;return"#!"===e&&t.indexOf("#")>-1&&t.indexOf("#!")<0?null:t.split(e)[1]||""}function s(e,t){return 0===t.indexOf(e)?t.substr(e.length).replace(/\/\//g,"/"):t}function o(e){return e.replace(/^(#)?/,"#")}function a(e){return e.replace(/^(#(!)?)?/,"#!")}var l=window.kendo,d=l.support,c=window.location,u=window.history,h=l.support.browser.msie,f=/^#*/,p=window.document,m=l.Class.extend({back:function(){h?setTimeout(function(){u.back()}):u.back()},forward:function(){h?setTimeout(function(){u.forward()}):u.forward()},length:function(){return u.length},replaceLocation:function(e){c.replace(e)}}),g=m.extend({init:function(e){this.root=e},navigate:function(e){u.pushState({},p.title,i(e,this.root))},replace:function(e){u.replaceState({},p.title,i(e,this.root))},normalize:function(e){return s(this.root,e)},current:function(){var e=c.pathname;return c.search&&(e+=c.search),s(this.root,e)},change:function(t){e(window).bind("popstate.kendo",t)},stop:function(){e(window).unbind("popstate.kendo")},normalizeCurrent:function(e){var t,s=e.root,o=c.pathname,a=r(n(e.hashBang));s===o+"/"&&(t=s),s===o&&a&&(t=i(a.replace(f,""),s)),t&&u.pushState({},p.title,t)}}),v=m.extend({init:function(e){this._id=l.guid(),this.prefix=n(e),this.fix=e?a:o},navigate:function(e){c.hash=this.fix(e)},replace:function(e){this.replaceLocation(this.fix(e))},normalize:function(e){return e.indexOf(this.prefix)<0?e:e.split(this.prefix)[1]},change:function(t){d.hashChange?e(window).on("hashchange."+this._id,t):this._interval=setInterval(t,50)},stop:function(){e(window).off("hashchange."+this._id),clearInterval(this._interval)},current:function(){return r(this.prefix)},normalizeCurrent:function(e){var t=c.pathname,i=e.root;return!(!e.pushState||i===t||(this.replaceLocation(i+this.prefix+s(i,t)),0))}}),_=l.Observable.extend({start:function(t){if(t=t||{},this.bind(["change","back","same"],t),!this._started){this._started=!0,t.root=t.root||"/";var i,n=this.createAdapter(t);n.normalizeCurrent(t)||(i=n.current(),e.extend(this,{adapter:n,root:t.root,historyLength:n.length(),current:i,locations:[i]}),n.change(e.proxy(this,"_checkUrl")))}},createAdapter:function(e){return d.pushState&&e.pushState?new g(e.root):new v(e.hashBang)},stop:function(){this._started&&(this.adapter.stop(),this.unbind("change"),this._started=!1)},change:function(e){this.bind("change",e)},replace:function(e,t){this._navigate(e,t,function(t){t.replace(e),this.locations[this.locations.length-1]=this.current})},navigate:function(e,t){if("#:back"===e)return this.backCalled=!0,void this.adapter.back();this._navigate(e,t,function(t){t.navigate(e),this.locations.push(this.current)})},_navigate:function(e,t,i){var n=this.adapter;e=n.normalize(e),this.current!==e&&this.current!==decodeURIComponent(e)?!t&&this.trigger("change",{url:e})||(this.current=e,i.call(this,n),this.historyLength=n.length()):this.trigger("same")},_checkUrl:function(){var e=this.adapter,t=e.current(),i=e.length(),n=this.historyLength===i,r=t===this.locations[this.locations.length-2]&&n,s=this.backCalled,o=this.current;return null===t||this.current===t||this.current===decodeURIComponent(t)||(this.historyLength=i,this.backCalled=!1,this.current=t,r&&this.trigger("back",{url:o,to:t})?(e.forward(),void(this.current=o)):this.trigger("change",{url:t,backButtonPressed:!s})?(r?e.forward():(e.back(),this.historyLength--),void(this.current=o)):void(r?this.locations.pop():this.locations.push(t)))}});l.History=_,l.History.HistoryAdapter=m,l.History.HashAdapter=v,l.History.PushStateAdapter=g,l.absoluteURL=i,l.history=new _}(window.kendo.jQuery),function(){function e(e,t){return t?e:"([^/]+)"}function t(e){return e.replace(/(\?.*)|(#.*)/g,"")}var i=window.kendo,n=i.history,r=i.Observable,s=/\((.*?)\)/g,o=/(\(\?)?:\w+/g,a=/\*\w+/g,l=/[\-{}\[\]+?.,\\\^$|#\s]/g,d=i.Class.extend({init:function(t,i,n){t instanceof RegExp||(t=function(t,i){return new RegExp("^"+t.replace(l,"\\$&").replace(s,"(?:$1)?").replace(o,e).replace(a,"(.*?)")+"$",i?"i":"")}(t,n)),this.route=t,this._callback=i},callback:function(e,n){var r,s,o=0,a=i.parseQueryStringParams(e);for(a._back=n,e=t(e),s=(r=this.route.exec(e).slice(1)).length;o<s;o++)void 0!==r[o]&&(r[o]=decodeURIComponent(r[o]));r.push(a),this._callback.apply(null,r)},worksWith:function(e,i){return!!this.route.test(t(e))&&(this.callback(e,i),!0)}}),c=r.extend({init:function(e){e||(e={}),r.fn.init.call(this),this.routes=[],this.pushState=e.pushState,this.hashBang=e.hashBang,this.root=e.root,this.ignoreCase=!1!==e.ignoreCase,this.bind(["init","routeMissing","change","same"],e)},destroy:function(){n.unbind("change",this._urlChangedProxy),n.unbind("same",this._sameProxy),n.unbind("back",this._backProxy),this.unbind()},start:function(){var e=this,t=function(t){e._back(t)},i=function(t){e._urlChanged(t)};n.start({same:function(){e._same()},change:i,back:t,pushState:e.pushState,hashBang:e.hashBang,root:e.root});var r={url:n.current||"/",preventDefault:$.noop};e.trigger("init",r)||e._urlChanged(r),this._urlChangedProxy=i,this._backProxy=t},route:function(e,t){this.routes.push(new d(e,t,this.ignoreCase))},navigate:function(e,t){i.history.navigate(e,t)},replace:function(e,t){i.history.replace(e,t)},_back:function(e){this.trigger("back",{url:e.url,to:e.to})&&e.preventDefault()},_same:function(){this.trigger("same")},_urlChanged:function(e){var t=e.url,n=e.backButtonPressed;if(t||(t="/"),this.trigger("change",{url:e.url,params:i.parseQueryStringParams(e.url),backButtonPressed:n}))e.preventDefault();else{for(var r=0,s=this.routes,o=s.length;r<o;r++)if(s[r].worksWith(t,n))return;this.trigger("routeMissing",{url:t,params:i.parseQueryStringParams(t),backButtonPressed:n})&&e.preventDefault()}}});i.Router=c}(),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.data.odata",["kendo.core"],function(){return function(e,t){function i(r,a){var l,d,c,u,h,f,p,m,g=[],v=r.logic||"and",_=r.filters;for(l=0,d=_.length;l<d;l++)c=(r=_[l]).field,p=r.value,f=r.operator,r.filters?r=i(r,a):(m=r.ignoreCase,c=c.replace(/\./g,"/"),r=s[f],a&&(r=o[f]),"isnull"===f||"isnotnull"===f?r=n.format("{0} {1} null",c,r):"isempty"===f||"isnotempty"===f?r=n.format("{0} {1} ''",c,r):r&&p!==t&&("string"===(u=e.type(p))?(h="'{1}'",p=p.replace(/'/g,"''"),!0===m&&(c="tolower("+c+")")):h="date"===u?a?"{1:yyyy-MM-ddTHH:mm:ss+00:00}":"datetime'{1:yyyy-MM-ddTHH:mm:ss}'":"{1}",r.length>3?"substringof"!==r?h="{0}({2},"+h+")":(h="{0}("+h+",{2})","doesnotcontain"===f&&(a?(h="{0}({2},'{1}') eq -1",r="indexof"):h+=" eq false")):h="{2} {0} "+h,r=n.format(h,r,p,c))),g.push(r);return r=g.join(" "+v+" "),g.length>1&&(r="("+r+")"),r}var n=window.kendo,r=e.extend,s={eq:"eq",neq:"ne",gt:"gt",gte:"ge",lt:"lt",lte:"le",contains:"substringof",doesnotcontain:"substringof",endswith:"endswith",startswith:"startswith",isnull:"eq",isnotnull:"ne",isempty:"eq",isnotempty:"ne"},o=r({},s,{contains:"contains"}),a={pageSize:e.noop,page:e.noop,filter:function(e,t,n){t&&(t=i(t,n))&&(e.$filter=t)},sort:function(t,i){var n=e.map(i,function(e){var t=e.field.replace(/\./g,"/");return"desc"===e.dir&&(t+=" desc"),t}).join(",");n&&(t.$orderby=n)},skip:function(e,t){t&&(e.$skip=t)},take:function(e,t){t&&(e.$top=t)}},l={read:{dataType:"jsonp"}};r(!0,n.data,{schemas:{odata:{type:"json",data:function(e){return e.d.results||[e.d]},total:"d.__count"}},transports:{odata:{read:{cache:!0,dataType:"jsonp",jsonp:"$callback"},update:{cache:!0,dataType:"json",contentType:"application/json",type:"PUT"},create:{cache:!0,dataType:"json",contentType:"application/json",type:"POST"},destroy:{cache:!0,dataType:"json",type:"DELETE"},parameterMap:function(e,t,i){var r,s,o,d;if(e=e||{},t=t||"read",d=(this.options||l)[t],d=d?d.dataType:"json","read"===t){r={$inlinecount:"allpages"},"json"!=d&&(r.$format="json");for(o in e)a[o]?a[o](r,e[o],i):r[o]=e[o]}else{if("json"!==d)throw new Error("Only json dataType can be used for "+t+" operation.");if("destroy"!==t){for(o in e)"number"==typeof(s=e[o])&&(e[o]=s+"");r=n.stringify(e)}}return r}}}}),r(!0,n.data,{schemas:{"odata-v4":{type:"json",data:function(t){return t=e.extend({},t),function(e){for(var t in e)0===t.indexOf("@odata")&&delete e[t]}(t),t.value?t.value:[t]},total:function(e){return e["@odata.count"]}}},transports:{"odata-v4":{read:{cache:!0,dataType:"json"},update:{cache:!0,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"PUT"},create:{cache:!0,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"POST"},destroy:{cache:!0,dataType:"json",type:"DELETE"},parameterMap:function(e,t){var i=n.data.transports.odata.parameterMap(e,t,!0);return"read"==t&&(i.$count=!0,delete i.$inlinecount),i}}}})}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.data.xml",["kendo.core"],function(){return function(e,t){var i=window.kendo,n=e.isArray,r=e.isPlainObject,s=e.map,o=e.each,a=e.extend,l=i.getter,d=i.Class.extend({init:function(t){var l=this,d=t.total,c=t.model,u=t.parse,h=t.errors,f=t.serialize,p=t.data;if(c){if(r(c)){var m=t.modelBase||i.data.Model;c.fields&&o(c.fields,function(t,i){r(i)&&i.field?e.isFunction(i.field)||(i=a(i,{field:l.getter(i.field)})):i={field:l.getter(i)},c.fields[t]=i});var g=c.id;if(g){var v={};v[l.xpathToMember(g,!0)]={field:l.getter(g)},c.fields=a(v,c.fields),c.id=l.xpathToMember(g)}c=m.define(c)}l.model=c}if(d&&("string"==typeof d?(d=l.getter(d),l.total=function(e){return parseInt(d(e),10)}):"function"==typeof d&&(l.total=d)),h&&("string"==typeof h?(h=l.getter(h),l.errors=function(e){return h(e)||null}):"function"==typeof h&&(l.errors=h)),p&&("string"==typeof p?(p=l.xpathToMember(p),l.data=function(e){var t,i=l.evaluate(e,p);return i=n(i)?i:[i],l.model&&c.fields?(t=new l.model,s(i,function(e){if(e){var i,n={};for(i in c.fields)n[i]=t._parse(i,c.fields[i].field(e));return n}})):i}):"function"==typeof p&&(l.data=p)),"function"==typeof u){var _=l.parse;l.parse=function(e){var t=u.call(l,e);return _.call(l,t)}}"function"==typeof f&&(l.serialize=f)},total:function(e){return this.data(e).length},errors:function(e){return e?e.errors:null},serialize:function(e){return e},parseDOM:function(e){var t,i,r,s,o,a,l,d={},c=e.attributes,u=c.length;for(l=0;l<u;l++)d["@"+(a=c[l]).nodeName]=a.nodeValue;for(i=e.firstChild;i;i=i.nextSibling)3===(r=i.nodeType)||4===r?d["#text"]=i.nodeValue:1===r&&(t=this.parseDOM(i),o=d[s=i.nodeName],n(o)?o.push(t):o=void 0!==o?[o,t]:t,d[s]=o);return d},evaluate:function(e,t){for(var i,r,s,o,a,l=t.split(".");i=l.shift();)if(e=e[i],n(e)){for(r=[],t=l.join("."),a=0,s=e.length;a<s;a++)o=this.evaluate(e[a],t),o=n(o)?o:[o],r.push.apply(r,o);return r}return e},parse:function(t){var i,n,r={};return i=t.documentElement||e.parseXML(t).documentElement,n=this.parseDOM(i),r[i.nodeName]=n,r},xpathToMember:function(e,t){return e?(e=e.replace(/^\//,"").replace(/\//g,".")).indexOf("@")>=0?e.replace(/\.?(@.*)/,t?"$1":'["$1"]'):e.indexOf("text()")>=0?e.replace(/(\.?text\(\))/,t?"#text":'["#text"]'):e:""},getter:function(e){return l(this.xpathToMember(e),!0)}});e.extend(!0,i.data,{XmlDataReader:d,readers:{xml:d}})}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.data",["kendo.core","kendo.data.odata","kendo.data.xml"],function(){return function(e,t){function i(e,t,i,n){return function(r){var s,o={};for(s in r)o[s]=r[s];o.field=n?i+"."+r.field:i,t==J&&e._notifyChange&&e._notifyChange(o),e.trigger(t,o)}}function n(t,i){if(t===i)return!0;var r,s=e.type(t);if(s!==e.type(i))return!1;if("date"===s)return t.getTime()===i.getTime();if("object"!==s&&"array"!==s)return!1;for(r in t)if(!n(t[r],i[r]))return!1;return!0}function r(e){this.data=e||[]}function s(e,i){if(e){var n=typeof e===Q?{field:e,dir:i}:e,r=V(n)?n:n!==t?[n]:[];return W(r,function(e){return!!e.dir})}}function o(e){var t,i,n,r,s=e.filters;if(s)for(t=0,i=s.length;t<i;t++)(r=(n=s[t]).operator)&&typeof r===Q&&(n.operator=Te[r.toLowerCase()]||r),o(n)}function a(e){if(e&&!O(e))return!V(e)&&e.filters||(e={logic:"and",filters:V(e)?e:[e]}),o(e),e}function l(e,t){return!e.logic&&!t.logic&&e.field===t.field&&e.value===t.value&&e.operator===t.operator}function d(e){return e=e||{},O(e)?{logic:"and",filters:[]}:a(e)}function c(e,t){return t.logic||e.field>t.field?1:e.field<t.field?-1:0}function u(e,t){if(e=d(e),t=d(t),e.logic!==t.logic)return!1;var i,n,r=(e.filters||[]).slice(),s=(t.filters||[]).slice();if(r.length!==s.length)return!1;r=r.sort(c),s=s.sort(c);for(var o=0;o<r.length;o++)if(i=r[o],n=s[o],i.logic&&n.logic){if(!u(i,n))return!1}else if(!l(i,n))return!1;return!0}function h(e,i){var n=typeof e===Q?{field:e,dir:i}:e,r=V(n)?n:n!==t?[n]:[];return N(r,function(e){return{field:e.field,dir:e.dir||"asc",aggregates:e.aggregates}})}function f(e){return"number"==typeof e&&!isNaN(e)}function p(e){return e&&e.getTime}function m(e){var t,i=e.length,n=new Array(i);for(t=0;t<i;t++)n[t]=e[t].toJSON();return n}function g(e,t,i,n,r){var s,o,a,l,d,c={};for(l=0,d=e.length;l<d;l++){s=e[l];for(o in t)(a=r[o])&&a!==o&&(c[a]||(c[a]=j.setter(a)),c[a](s,t[o](s)),delete s[o])}}function v(e,t,i,n,r){var s,o,a,l,d;for(l=0,d=e.length;l<d;l++){s=e[l];for(o in t)s[o]=i._parse(o,t[o](s)),(a=r[o])&&a!==o&&delete s[a]}}function _(e,t,i,n,r){var s,o,a,l;for(o=0,l=e.length;o<l;o++)(a=n[(s=e[o]).field])&&a!=s.field&&(s.field=a),s.value=i._parse(s.field,s.value),s.hasSubgroups?_(s.items,t,i,n,r):v(s.items,t,i,0,r)}function b(e,t,i,n,r,s){return function(o){return(o=e(o))&&!O(n)&&("[object Array]"===he.call(o)||o instanceof ve||(o=[o]),i(o,n,new t,r,s)),o||[]}}function k(e,t,i,n){for(var r,s,o=0;t.length&&n;){var a=(s=(r=t[o]).items).length;if(e&&e.field===r.field&&e.value===r.value?(e.hasSubgroups&&e.items.length?k(e.items[e.items.length-1],r.items,i,n):(s=s.slice(i,i+n),e.items=e.items.concat(s)),t.splice(o--,1)):r.hasSubgroups&&s.length?(k(r,s,i,n),r.items.length||t.splice(o--,1)):(s=s.slice(i,i+n),r.items=s,r.items.length||t.splice(o--,1)),0===s.length?i-=a:(i=0,n-=s.length),++o>=t.length)break}o<t.length&&t.splice(o,t.length-o)}function w(e){var t,i,n,r,s=[];for(t=0,i=e.length;t<i;t++){var o=e.at(t);if(o.hasSubgroups)s=s.concat(w(o.items));else for(n=o.items,r=0;r<n.length;r++)s.push(n.at(r))}return s}function y(e,t){var i,n,r;if(t)for(i=0,n=e.length;i<n;i++)(r=e.at(i)).hasSubgroups?y(r.items,t):r.items=new _e(r.items,t)}function x(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i].hasSubgroups){if(x(e[i].items,t))return!0}else if(t(e[i].items,e[i]))return!0}function C(e,t,i,n){for(var r=0;r<e.length&&e[r].data!==t&&!S(e[r].data,i,n);r++);}function S(e,t,i){for(var n=0,r=e.length;n<r;n++){if(e[n]&&e[n].hasSubgroups)return S(e[n].items,t,i);if(e[n]===t||e[n]===i)return e[n]=i,!0}}function T(e,i,n,r,s){for(var o=0,a=e.length;o<a;o++){var l=e[o];if(l&&!(l instanceof r))if(l.hasSubgroups===t||s){for(var d=0;d<i.length;d++)if(i[d]===l){e[o]=i.at(d),C(n,i,l,e[o]);break}}else T(l.items,i,n,r,s)}}function D(e,t){var i,n;for(i=0,n=e.length;i<n;i++){var r=e.at(i);if(r.uid==t.uid)return e.splice(i,1),r}}function F(e,t){return t?R(e,function(e){return e.uid&&e.uid==t.uid||e[t.idField]===t.id&&t.id!==t._defaultId}):-1}function E(e,t){return t?R(e,function(e){return e.uid==t.uid}):-1}function R(e,t){var i,n;for(i=0,n=e.length;i<n;i++)if(t(e[i]))return i;return-1}function A(e,t){if(e&&!O(e)){var i,n=e[t];return i=B(n)?n.from||n.field||t:e[t]||t,G(i)?t:i}return t}function I(e,t){var i,n,r={};for(var s in e)"filters"!==s&&(r[s]=e[s]);if(e.filters)for(r.filters=[],i=0,n=e.filters.length;i<n;i++)r.filters[i]=I(e.filters[i],t);else r.field=A(t.fields,r.field);return r}function M(e,t){var i,n,r,s,o=[];for(i=0,n=e.length;i<n;i++){r={},s=e[i];for(var a in s)r[a]=s[a];r.field=A(t.fields,r.field),r.aggregates&&V(r.aggregates)&&(r.aggregates=M(r.aggregates,t)),o.push(r)}return o}function H(e){return function(){var t=this._data,i=Ie.fn[e].apply(this,ce.call(arguments));return this._data!=t&&this._attachBubbleHandlers(),i}}function z(t,i){function n(e,t){return e.filter(t).add(e.find(t))}var r,s,o,a,l,d,c,u,h=e(t).children(),f=[],p=i[0].field,m=i[1]&&i[1].field,g=i[2]&&i[2].field,v=i[3]&&i[3].field;for(r=0,s=h.length;r<s;r++)o={_loaded:!0},d=(a=h.eq(r))[0].firstChild,t=(u=a.children()).filter("ul"),u=u.filter(":not(ul)"),(l=a.attr("data-id"))&&(o.id=l),d&&(o[p]=3==d.nodeType?d.nodeValue:u.text()),m&&(o[m]=n(u,"a").attr("href")),v&&(o[v]=n(u,"img").attr("src")),g&&(c=n(u,".k-sprite").prop("className"),o[g]=c&&e.trim(c.replace("k-sprite",""))),t.length&&(o.items=z(t.eq(0),i)),"true"==a.attr("data-hasChildren")&&(o.hasChildren=!0),f.push(o);return f}var N,P=e.extend,L=e.proxy,B=e.isPlainObject,O=e.isEmptyObject,V=e.isArray,W=e.grep,U=e.ajax,q=e.each,$=e.noop,j=window.kendo,G=j.isFunction,Y=j.Observable,K=j.Class,Q="string",J="change",X="requestStart",Z="requestEnd",ee=["create","read","update","destroy"],te=function(e){return e},ie=j.getter,ne=j.stringify,re=Math,se=[].push,oe=[].join,ae=[].pop,le=[].splice,de=[].shift,ce=[].slice,ue=[].unshift,he={}.toString,fe=j.support.stableSort,pe=/^\/Date\((.*?)\)\/$/,me=/(\r+|\n+)/g,ge=/(?=['\\])/g,ve=Y.extend({init:function(e,t){this.type=t||be,Y.fn.init.call(this),this.length=e?e.length:0,e&&this.wrapAll(e,this)},at:function(e){return this[e]},toJSON:function(){var e,t,i=this.length,n=new Array(i);for(e=0;e<i;e++)(t=this[e])instanceof be&&(t=t.toJSON()),n[e]=t;return n},parent:$,wrapAll:function(e,t){var i,n,r=this,s=function(){return r};for(t=t||[],i=0,n=e.length;i<n;i++)t[i]=r.wrap(e[i],s);return t},wrap:function(e,t){var i=this;return null!==e&&"[object Object]"===he.call(e)&&(e instanceof i.type||e instanceof ye||(e=e instanceof be?e.toJSON():e,e=new i.type(e)),e.parent=t,e.bind(J,function(e){i.trigger(J,{field:e.field,node:e.node,index:e.index,items:e.items||[this],action:e.node?e.action||"itemloaded":"itemchange"})})),e},push:function(){var e,t=this.length,i=this.wrapAll(arguments);return e=se.apply(this,i),this.trigger(J,{action:"add",index:t,items:i}),e},slice:ce,sort:[].sort,join:oe,pop:function(){var e=this.length,t=ae.apply(this);return e&&this.trigger(J,{action:"remove",index:e-1,items:[t]}),t},splice:function(e,t,i){var n,r,s,o=this.wrapAll(ce.call(arguments,2));if((n=le.apply(this,[e,t].concat(o))).length)for(this.trigger(J,{action:"remove",index:e,items:n}),r=0,s=n.length;r<s;r++)n[r]&&n[r].children&&n[r].unbind(J);return i&&this.trigger(J,{action:"add",index:e,items:o}),n},shift:function(){var e=this.length,t=de.apply(this);return e&&this.trigger(J,{action:"remove",index:0,items:[t]}),t},unshift:function(){var e,t=this.wrapAll(arguments);return e=ue.apply(this,t),this.trigger(J,{action:"add",index:0,items:t}),e},indexOf:function(e){var t,i;for(t=0,i=this.length;t<i;t++)if(this[t]===e)return t;return-1},forEach:function(e){for(var t=0,i=this.length;t<i;t++)e(this[t],t,this)},map:function(e){for(var t=0,i=[],n=this.length;t<n;t++)i[t]=e(this[t],t,this);return i},reduce:function(e){var t,i=0,n=this.length;for(2==arguments.length?t=arguments[1]:i<n&&(t=this[i++]);i<n;i++)t=e(t,this[i],i,this);return t},reduceRight:function(e){var t,i=this.length-1;for(2==arguments.length?t=arguments[1]:i>0&&(t=this[i--]);i>=0;i--)t=e(t,this[i],i,this);return t},filter:function(e){for(var t,i=0,n=[],r=this.length;i<r;i++)e(t=this[i],i,this)&&(n[n.length]=t);return n},find:function(e){for(var t,i=0,n=this.length;i<n;i++)if(t=this[i],e(t,i,this))return t},every:function(e){for(var t,i=0,n=this.length;i<n;i++)if(t=this[i],!e(t,i,this))return!1;return!0},some:function(e){for(var t,i=0,n=this.length;i<n;i++)if(t=this[i],e(t,i,this))return!0;return!1},remove:function(e){var t=this.indexOf(e);-1!==t&&this.splice(t,1)},empty:function(){this.splice(0,this.length)}}),_e=ve.extend({init:function(e,t){Y.fn.init.call(this),this.type=t||be;for(var i=0;i<e.length;i++)this[i]=e[i];this.length=i,this._parent=L(function(){return this},this)},at:function(e){var t=this[e];return t instanceof this.type?t.parent=this._parent:t=this[e]=this.wrap(t,this._parent),t}}),be=Y.extend({init:function(e){var t,i,n=this,r=function(){return n};Y.fn.init.call(this),this._handlers={};for(i in e)"object"==typeof(t=e[i])&&t&&!t.getTime&&"_"!=i.charAt(0)&&(t=n.wrap(t,i,r)),n[i]=t;n.uid=j.guid()},shouldSerialize:function(e){return this.hasOwnProperty(e)&&"_handlers"!==e&&"_events"!==e&&"function"!=typeof this[e]&&"uid"!==e},forEach:function(e){for(var t in this)this.shouldSerialize(t)&&e(this[t],t)},toJSON:function(){var e,t,i={};for(t in this)this.shouldSerialize(t)&&((e=this[t])instanceof be||e instanceof ve?e=e.toJSON():e&&e.gregoriandate?e=moment(e.gregoriandate).format("YYYY-MM-DD"):e instanceof Date&&(e=moment(e).format("YYYY-MM-DD")),i[t]=e);return i},get:function(e){return this.trigger("get",{field:e}),"this"===e?this:j.getter(e,!0)(this)},_set:function(e,t){var i=e.indexOf(".")>=0;if(i)for(var n=e.split("."),r="";n.length>1;){r+=n.shift();var s=j.getter(r,!0)(this);if(s instanceof be)return s.set(n.join("."),t),i;r+="."}return j.setter(e)(this,t),i},set:function(e,t){var i=this,n=!1,r=e.indexOf(".")>=0,s=j.getter(e,!0)(i);return s!==t&&(s instanceof Y&&this._handlers[e]&&(this._handlers[e].get&&s.unbind("get",this._handlers[e].get),s.unbind(J,this._handlers[e].change)),(n=i.trigger("set",{field:e,value:t}))||(r||(t=i.wrap(t,e,function(){return i})),(!i._set(e,t)||e.indexOf("(")>=0||e.indexOf("[")>=0)&&i.trigger(J,{field:e}))),n},parent:$,wrap:function(e,t,n){var r,s,o=he.call(e);if(null!=e&&("[object Object]"===o||"[object Array]"===o)){var a=e instanceof ve,l=e instanceof Ie;"[object Object]"!==o||l||a?("[object Array]"===o||a||l)&&(a||l||(e=new ve(e)),s=i(this,J,t,!1),e.bind(J,s),this._handlers[t]={change:s}):(e instanceof be||(e=new be(e)),r=i(this,"get",t,!0),e.bind("get",r),s=i(this,J,t,!0),e.bind(J,s),this._handlers[t]={get:r,change:s}),e.parent=n}return e}}),ke={number:function(e){return j.parseFloat(e)},date:function(e){return j.parseDate(e)},boolean:function(e){return typeof e===Q?"true"===e.toLowerCase():null!=e?!!e:e},string:function(e){return null!=e?e+"":e},default:function(e){return e}},we={string:"",number:0,date:new Date,boolean:!1,default:""},ye=be.extend({init:function(i){if((!i||e.isEmptyObject(i))&&(i=e.extend({},this.defaults,i),this._initializers))for(var n=0;n<this._initializers.length;n++){var r=this._initializers[n];i[r]=this.defaults[r]()}be.fn.init.call(this,i),this.dirty=!1,this.idField&&(this.id=this.get(this.idField),this.id===t&&(this.id=this._defaultId))},shouldSerialize:function(e){return be.fn.shouldSerialize.call(this,e)&&"uid"!==e&&!("id"!==this.idField&&"id"===e)&&"dirty"!==e&&"_accessors"!==e},_parse:function(e,t){var i,n=e,r=this.fields||{};return(e=r[e])||(e=function(e,t){var i,n;for(n in e){if(i=e[n],B(i)&&i.field&&i.field===t)return i;if(i===t)return i}return null}(r,n)),e&&!(i=e.parse)&&e.type&&(i=ke[e.type.toLowerCase()]),i?i(t):t},_notifyChange:function(e){var t=e.action;"add"!=t&&"remove"!=t||(this.dirty=!0)},editable:function(e){return!(e=(this.fields||{})[e])||!1!==e.editable},set:function(e,t,i){this.editable(e)&&(n(t=this._parse(e,t),this.get(e))||(this.dirty=!0,t&&t.gregoriandate?be.fn.set.call(this,e,moment(t.gregoriandate).format("YYYY-MM-DD"),i):be.fn.set.call(this,e,t,i)))},accept:function(e){var t,i=this,n=function(){return i};for(t in e){var r=e[t];"_"!=t.charAt(0)&&(r=i.wrap(e[t],t,n)),i._set(t,r)}i.idField&&(i.id=i.get(i.idField)),i.dirty=!1},isNew:function(){return this.id===this._defaultId}});ye.define=function(e,i){i===t&&(i=e,e=ye);var n,r,s,o,a,l,d,c,u=P({defaults:{}},i),h={},f=u.id,p=[];if(f&&(u.idField=f),u.id&&delete u.id,f&&(u.defaults[f]=u._defaultId=""),"[object Array]"===he.call(u.fields)){for(l=0,d=u.fields.length;l<d;l++)typeof(s=u.fields[l])===Q?h[s]={}:s.field&&(h[s.field]=s);u.fields=h}for(r in u.fields)o=(s=u.fields[r]).type||"default",a=null,c=r,r=typeof s.field===Q?s.field:r,s.nullable||"function"==typeof(a=u.defaults[c!==r?c:r]=s.defaultValue!==t?s.defaultValue:we[o.toLowerCase()])&&p.push(r),i.id===r&&(u._defaultId=a),u.defaults[c!==r?c:r]=a,s.parse=s.parse||ke[o];return p.length>0&&(u._initializers=p),n=e.extend(u),n.define=function(e){return ye.define(n,e)},u.fields&&(n.fields=u.fields,n.idField=u.idField),n};var xe={selector:function(e){return G(e)?e:ie(e)},compare:function(e){var t=this.selector(e);return function(e,i){return e=t(e),i=t(i),null==e&&null==i?0:null==e?-1:null==i?1:e.localeCompare?e.localeCompare(i):e>i?1:e<i?-1:0}},create:function(e){var t=e.compare||this.compare(e.field);return"desc"==e.dir?function(e,i){return t(i,e,!0)}:t},combine:function(e){return function(t,i){var n,r,s=e[0](t,i);for(n=1,r=e.length;n<r;n++)s=s||e[n](t,i);return s}}},Ce=P({},xe,{asc:function(e){var t=this.selector(e);return function(e,i){var n=t(e),r=t(i);return n&&n.getTime&&r&&r.getTime&&(n=n.getTime(),r=r.getTime()),n===r?e.__position-i.__position:null==n?-1:null==r?1:n.localeCompare?n.localeCompare(r):n>r?1:-1}},desc:function(e){var t=this.selector(e);return function(e,i){var n=t(e),r=t(i);return n&&n.getTime&&r&&r.getTime&&(n=n.getTime(),r=r.getTime()),n===r?e.__position-i.__position:null==n?1:null==r?-1:r.localeCompare?r.localeCompare(n):n<r?1:-1}},create:function(e){return this[e.dir](e.field)}});N=function(e,t){var i,n=e.length,r=new Array(n);for(i=0;i<n;i++)r[i]=t(e[i],i,e);return r};var Se=function(){function e(e){return e.replace(ge,"\\").replace(me,"")}function t(t,i,n,r){var s;return null!=n&&(typeof n===Q&&(n=e(n),(s=pe.exec(n))?n=new Date(+s[1]):r?(n="'"+n.toLowerCase()+"'",i="(("+i+" || '')+'').toLowerCase()"):n="'"+n+"'"),n.getTime&&(i="("+i+"&&"+i+".getTime?"+i+".getTime():"+i+")",n=n.getTime())),i+" "+t+" "+n}return{quote:function(t){return t&&t.getTime?"new Date("+t.getTime()+")":"string"==typeof t?"'"+e(t)+"'":""+t},eq:function(e,i,n){return t("==",e,i,n)},neq:function(e,i,n){return t("!=",e,i,n)},gt:function(e,i,n){return t(">",e,i,n)},gte:function(e,i,n){return t(">=",e,i,n)},lt:function(e,i,n){return t("<",e,i,n)},lte:function(e,i,n){return t("<=",e,i,n)},startswith:function(t,i,n){return n&&(t="("+t+" || '').toLowerCase()",i&&(i=i.toLowerCase())),i&&(i=e(i)),t+".lastIndexOf('"+i+"', 0) == 0"},doesnotstartwith:function(t,i,n){return n&&(t="("+t+" || '').toLowerCase()",i&&(i=i.toLowerCase())),i&&(i=e(i)),t+".lastIndexOf('"+i+"', 0) == -1"},endswith:function(t,i,n){return n&&(t="("+t+" || '').toLowerCase()",i&&(i=i.toLowerCase())),i&&(i=e(i)),t+".indexOf('"+i+"', "+t+".length - "+(i||"").length+") >= 0"},doesnotendwith:function(t,i,n){return n&&(t="("+t+" || '').toLowerCase()",i&&(i=i.toLowerCase())),i&&(i=e(i)),t+".indexOf('"+i+"', "+t+".length - "+(i||"").length+") < 0"},contains:function(t,i,n){return n&&(t="("+t+" || '').toLowerCase()",i&&(i=i.toLowerCase())),i&&(i=e(i)),t+".indexOf('"+i+"') >= 0"},doesnotcontain:function(t,i,n){return n&&(t="("+t+" || '').toLowerCase()",i&&(i=i.toLowerCase())),i&&(i=e(i)),t+".indexOf('"+i+"') == -1"},isempty:function(e){return e+" === ''"},isnotempty:function(e){return e+" !== ''"},isnull:function(e){return"("+e+" === null || "+e+" === undefined)"},isnotnull:function(e){return"("+e+" !== null && "+e+" !== undefined)"}}}();r.filterExpr=function(e){var i,n,s,o,a,l,d=[],c=[],u=[],h=e.filters;for(i=0,n=h.length;i<n;i++)a=(s=h[i]).field,l=s.operator,s.filters?(s=(o=r.filterExpr(s)).expression.replace(/__o\[(\d+)\]/g,function(e,t){return t=+t,"__o["+(u.length+t)+"]"}).replace(/__f\[(\d+)\]/g,function(e,t){return t=+t,"__f["+(c.length+t)+"]"}),u.push.apply(u,o.operators),c.push.apply(c,o.fields)):("function"==typeof a?(o="__f["+c.length+"](d)",c.push(a)):o=j.expr(a),"function"==typeof l?(s="__o["+u.length+"]("+o+", "+Se.quote(s.value)+")",u.push(l)):s=Se[(l||"eq").toLowerCase()](o,s.value,s.ignoreCase===t||s.ignoreCase)),d.push(s);return{expression:"("+d.join({and:" && ",or:" || "}[e.logic])+")",fields:c,operators:u}};var Te={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain",isnull:"isnull",isempty:"isempty",isnotempty:"isnotempty"};r.normalizeFilter=a,r.compareFilters=u,r.prototype={toArray:function(){return this.data},range:function(e,t){return new r(this.data.slice(e,e+t))},skip:function(e){return new r(this.data.slice(e))},take:function(e){return new r(this.data.slice(0,e))},select:function(e){return new r(N(this.data,e))},order:function(e,t){var i={dir:t};return e&&(e.compare?i.compare=e.compare:i.field=e),new r(this.data.slice(0).sort(xe.create(i)))},orderBy:function(e){return this.order(e,"asc")},orderByDescending:function(e){return this.order(e,"desc")},sort:function(e,t,i){var n,r,o=s(e,t),a=[];if(i=i||xe,o.length){for(n=0,r=o.length;n<r;n++)a.push(i.create(o[n]));return this.orderBy({compare:i.combine(a)})}return this},filter:function(e){var t,i,n,s,o,l,d,c,u=this.data,h=[];if(!(e=a(e))||0===e.filters.length)return this;for(s=r.filterExpr(e),l=s.fields,d=s.operators,o=c=new Function("d, __f, __o","return "+s.expression),(l.length||d.length)&&(c=function(e){return o(e,l,d)}),t=0,n=u.length;t<n;t++)c(i=u[t])&&h.push(i);return new r(h)},group:function(e,t){e=h(e||[]),t=t||this.data;var i,n=new r(this.data);return e.length>0&&(i=e[0],n=n.groupBy(i).select(function(n){var s=new r(t).filter([{field:n.field,operator:"eq",value:n.value,ignoreCase:!1}]);return{field:n.field,value:n.value,items:e.length>1?new r(n.items).group(e.slice(1),s.toArray()).toArray():n.items,hasSubgroups:e.length>1,aggregates:s.aggregate(i.aggregates)}})),n},groupBy:function(e){if(O(e)||!this.data.length)return new r([]);var t,i,n,s,o=e.field,a=this._sortForGrouping(o,e.dir||"asc"),l=j.accessor(o),d=l.get(a[0],o),c={field:o,value:d,items:[]},u=[c];for(n=0,s=a.length;n<s;n++)t=a[n],function(e,t){return e&&e.getTime&&t&&t.getTime?e.getTime()===t.getTime():e===t}(d,i=l.get(t,o))||(c={field:o,value:d=i,items:[]},u.push(c)),c.items.push(t);return new r(u)},_sortForGrouping:function(e,t){var i,n,s=this.data;if(!fe){for(i=0,n=s.length;i<n;i++)s[i].__position=i;for(i=0,n=(s=new r(s).sort(e,t,Ce).toArray()).length;i<n;i++)delete s[i].__position;return s}return this.sort(e,t).toArray()},aggregate:function(e){var t,i,n={},r={};if(e&&e.length)for(t=0,i=this.data.length;t<i;t++)!function(e,t,i,n,r,s){var o,a,l,d=(t=t||[]).length;for(o=0;o<d;o++){l=(a=t[o]).aggregate;var c=a.field;e[c]=e[c]||{},s[c]=s[c]||{},s[c][l]=s[c][l]||{},e[c][l]=De[l.toLowerCase()](e[c][l],i,j.accessor(c),n,r,s[c][l])}}(n,e,this.data[t],t,i,r);return n}};var De={sum:function(e,t,i){var n=i.get(t);return f(e)?f(n)&&(e+=n):e=n,e},count:function(e){return(e||0)+1},average:function(e,i,n,r,s,o){var a=n.get(i);return o.count===t&&(o.count=0),f(e)?f(a)&&(e+=a):e=a,f(a)&&o.count++,r==s-1&&f(e)&&(e/=o.count),e},max:function(e,t,i){var n=i.get(t);return f(e)||p(e)||(e=n),e<n&&(f(n)||p(n))&&(e=n),e},min:function(e,t,i){var n=i.get(t);return f(e)||p(e)||(e=n),e>n&&(f(n)||p(n))&&(e=n),e}};r.process=function(e,i){i=i||{};var n,o=new r(e),a=i.group,l=h(a||[]).concat(s(i.sort||[])),d=i.filterCallback,c=i.filter,u=i.skip,f=i.take;return c&&(o=o.filter(c),d&&(o=d(o)),n=o.toArray().length),l&&(o=o.sort(l),a&&(e=o.toArray())),u!==t&&f!==t&&(o=o.range(u,f)),a&&(o=o.group(a,e)),{total:n,data:o.toArray()}};var Fe=K.extend({init:function(e){this.data=e.data},read:function(e){e.success(this.data)},update:function(e){e.success(e.data)},create:function(e){e.success(e.data)},destroy:function(e){e.success(e.data)}}),Ee=K.extend({init:function(e){var t;e=this.options=P({},this.options,e),q(ee,function(t,i){typeof e[i]===Q&&(e[i]={url:e[i]})}),this.cache=e.cache?Re.create(e.cache):{find:$,add:$},t=e.parameterMap,G(e.push)&&(this.push=e.push),this.push||(this.push=te),this.parameterMap=G(t)?t:function(e){var i={};return q(e,function(e,n){e in t&&(e=t[e],B(e)&&(n=e.value(n),e=e.key)),i[e]=n}),i}},options:{parameterMap:te},create:function(e){return U(this.setup(e,"create"))},read:function(i){var n,r,s=this.cache;i=this.setup(i,"read"),n=i.success||$,i.error,(r=s.find(i.data))!==t?n(r):(i.success=function(e){s.add(i.data,e),n(e)},e.ajax(i))},update:function(e){return U(this.setup(e,"update"))},destroy:function(e){return U(this.setup(e,"destroy"))},setup:function(e,t){e=e||{};var i,n=this.options[t],r=G(n.data)?n.data(e.data):n.data;return e=P(!0,{},n,e),i=P(!0,{},r,e.data),e.data=this.parameterMap(i,t),G(e.url)&&(e.url=e.url(i)),e}}),Re=K.extend({init:function(){this._store={}},add:function(e,i){e!==t&&(this._store[ne(e)]=i)},find:function(e){return this._store[ne(e)]},clear:function(){this._store={}},remove:function(e){delete this._store[ne(e)]}});Re.create=function(e){var t={inmemory:function(){return new Re}};return B(e)&&G(e.find)?e:!0===e?new Re:t[e]()};var Ae=K.extend({init:function(e){var t,i,n,r;e=e||{};for(t in e)i=e[t],this[t]=typeof i===Q?ie(i):i;r=e.modelBase||ye,B(this.model)&&(this.model=n=r.define(this.model));var s=L(this.data,this);if(this._dataAccessFunction=s,this.model){var o,a=L(this.groups,this),l=L(this.serialize,this),d={},c={},u={},h={},f=!1;(n=this.model).fields&&(q(n.fields,function(e,t){var i;o=e,B(t)&&t.field?o=t.field:typeof t===Q&&(o=t),B(t)&&t.from&&(i=t.from),f=f||i&&i!==e||o!==e,c[e]=ie(i||o),u[e]=ie(e),d[i||o]=e,h[e]=i||o}),!e.serialize&&f&&(this.serialize=b(l,n,g,u,d,h))),this._dataAccessFunction=s,this.data=b(s,n,v,c,d,h),this.groups=b(a,n,_,c,d,h)}},errors:function(e){return e?e.errors:null},parse:te,data:te,total:function(e){return e.length},groups:te,aggregates:function(){return{}},serialize:function(e){return e}}),Ie=Y.extend({init:function(e){var i,n=this;if(e&&(i=e.data),e=n.options=P({},n.options,e),n._map={},n._prefetch={},n._data=[],n._pristineData=[],n._ranges=[],n._view=[],n._pristineTotal=0,n._destroyed=[],n._pageSize=e.pageSize,n._page=e.page||(e.pageSize?1:t),n._sort=s(e.sort),n._filter=a(e.filter),n._group=h(e.group),n._aggregate=e.aggregate,n._total=e.total,n._shouldDetachObservableParents=!0,Y.fn.init.call(n),n.transport=Me.create(e,i,n),G(n.transport.push)&&n.transport.push({pushCreate:L(n._pushCreate,n),pushUpdate:L(n._pushUpdate,n),pushDestroy:L(n._pushDestroy,n)}),null!=e.offlineStorage)if("string"==typeof e.offlineStorage){var r=e.offlineStorage;n._storage={getItem:function(){return JSON.parse(localStorage.getItem(r))},setItem:function(e){localStorage.setItem(r,ne(n.reader.serialize(e)))}}}else n._storage=e.offlineStorage;n.reader=new j.data.readers[e.schema.type||"json"](e.schema),n.reader.model,n._detachObservableParents(),n._data=n._observe(n._data),n._online=!0,n.bind(["push","error",J,X,"sync",Z,"progress"],e)},options:{data:null,schema:{modelBase:ye},offlineStorage:null,serverSorting:!1,serverPaging:!1,serverFiltering:!1,serverGrouping:!1,serverAggregates:!1,batch:!1},clone:function(){return this},online:function(i){return i!==t?this._online!=i&&(this._online=i,i)?this.sync():e.Deferred().resolve().promise():this._online},offlineData:function(e){return null==this.options.offlineStorage?null:e!==t?this._storage.setItem(e):this._storage.getItem()||[]},_isServerGrouped:function(){var e=this.group()||[];return this.options.serverGrouping&&e.length},_pushCreate:function(e){this._push(e,"pushCreate")},_pushUpdate:function(e){this._push(e,"pushUpdate")},_pushDestroy:function(e){this._push(e,"pushDestroy")},_push:function(e,t){var i=this._readData(e);i||(i=e),this[t](i)},_flatData:function(e,t){if(e){if(this._isServerGrouped())return w(e);if(!t)for(var i=0;i<e.length;i++)e.at(i)}return e},parent:$,get:function(e){var t,i,n=this._flatData(this._data);for(t=0,i=n.length;t<i;t++)if(n[t].id==e)return n[t]},getByUid:function(e){var t,i,n=this._flatData(this._data);if(n)for(t=0,i=n.length;t<i;t++)if(n[t].uid==e)return n[t]},indexOf:function(e){return E(this._data,e)},at:function(e){return this._data.at(e)},data:function(e){if(e===t){if(this._data)for(var i=0;i<this._data.length;i++)this._data.at(i);return this._data}this._detachObservableParents(),this._data=this._observe(e),this._pristineData=e.slice(0),this._storeData(),this._ranges=[],this.trigger("reset"),this._addRange(this._data),this._total=this._data.length,this._pristineTotal=this._total,this._process(this._data)},view:function(e){if(e===t)return this._view;this._view=this._observeView(e)},_observeView:function(e){var t=this;T(e,t._data,t._ranges,t.reader.model||be,t._isServerGrouped());var i=new _e(e,t.reader.model);return i.parent=function(){return t.parent()},i},flatView:function(){return(this.group()||[]).length?w(this._view):this._view},add:function(e){return this.insert(this._data.length,e)},_createNewModel:function(e){return this.reader.model?new this.reader.model(e):e instanceof be?e:new be(e)},insert:function(e,t){return t||(t=e,e=0),t instanceof ye||(t=this._createNewModel(t)),this._isServerGrouped()?this._data.splice(e,0,this._wrapInEmptyGroup(t)):this._data.splice(e,0,t),t},pushCreate:function(e){V(e)||(e=[e]);var t=[],i=this.options.autoSync;this.options.autoSync=!1;try{for(var n=0;n<e.length;n++){var r=e[n],s=this.add(r);t.push(s);var o=s.toJSON();this._isServerGrouped()&&(o=this._wrapInEmptyGroup(o)),this._pristineData.push(o)}}finally{this.options.autoSync=i}t.length&&this.trigger("push",{type:"create",items:t})},pushUpdate:function(e){V(e)||(e=[e]);for(var t=[],i=0;i<e.length;i++){var n=e[i],r=this._createNewModel(n),s=this.get(r.id);s?(t.push(s),s.accept(n),s.trigger(J),this._updatePristineForModel(s,n)):this.pushCreate(n)}t.length&&this.trigger("push",{type:"update",items:t})},pushDestroy:function(e){var t=this._removeItems(e);t.length&&this.trigger("push",{type:"destroy",items:t})},_removeItems:function(e){V(e)||(e=[e]);var t=[],i=this.options.autoSync;this.options.autoSync=!1;try{for(var n=0;n<e.length;n++){var r=e[n],s=this._createNewModel(r),o=!1;this._eachItem(this._data,function(e){for(var i=0;i<e.length;i++){var n=e.at(i);if(n.id===s.id){t.push(n),e.splice(i,1),o=!0;break}}}),o&&(this._removePristineForModel(s),this._destroyed.pop())}}finally{this.options.autoSync=i}return t},remove:function(e){var t,i=this,n=i._isServerGrouped();return this._eachItem(i._data,function(r){if((t=D(r,e))&&n)return t.isNew&&t.isNew()||i._destroyed.push(t),!0}),this._removeModelFromRanges(e),this._updateRangesLength(),e},destroyed:function(){return this._destroyed},created:function(){var e,t,i=[],n=this._flatData(this._data);for(e=0,t=n.length;e<t;e++)n[e].isNew&&n[e].isNew()&&i.push(n[e]);return i},updated:function(){var e,t,i=[],n=this._flatData(this._data);for(e=0,t=n.length;e<t;e++)n[e].isNew&&!n[e].isNew()&&n[e].dirty&&i.push(n[e]);return i},sync:function(){var t=this,i=[],n=[],r=t._destroyed,s=e.Deferred().resolve().promise();if(t.online()){if(!t.reader.model)return s;i=t.created(),n=t.updated();var o=[];t.options.batch&&t.transport.submit?o=t._sendSubmit(i,n,r):(o.push.apply(o,t._send("create",i)),o.push.apply(o,t._send("update",n)),o.push.apply(o,t._send("destroy",r))),s=e.when.apply(null,o).then(function(){var e,i;for(e=0,i=arguments.length;e<i;e++)t._accept(arguments[e]);t._storeData(!0),t._change({action:"sync"}),t.trigger("sync")})}else t._storeData(!0),t._change({action:"sync"});return s},cancelChanges:function(e){e instanceof j.data.Model?this._cancelModel(e):(this._destroyed=[],this._detachObservableParents(),this._data=this._observe(this._pristineData),this.options.serverPaging&&(this._total=this._pristineTotal),this._ranges=[],this._addRange(this._data),this._change(),this._markOfflineUpdatesAsDirty())},_markOfflineUpdatesAsDirty:function(){null!=this.options.offlineStorage&&this._eachItem(this._data,function(e){for(var t=0;t<e.length;t++){var i=e.at(t);"update"==i.__state__&&(i.dirty=!0)}})},hasChanges:function(){var e,t,i=this._flatData(this._data);if(this._destroyed.length)return!0;for(e=0,t=i.length;e<t;e++)if(i[e].isNew&&i[e].isNew()||i[e].dirty)return!0;return!1},_accept:function(t){var i,n=t.models,r=t.response,s=0,o=this._isServerGrouped(),a=this._pristineData,l=t.type;if(this.trigger(Z,{response:r,type:l}),r&&!O(r)){if(r=this.reader.parse(r),this._handleCustomErrors(r))return;r=this.reader.data(r),V(r)||(r=[r])}else r=e.map(n,function(e){return e.toJSON()});for("destroy"===l&&(this._destroyed=[]),s=0,i=n.length;s<i;s++)"destroy"!==l?(n[s].accept(r[s]),"create"===l?a.push(o?this._wrapInEmptyGroup(n[s]):r[s]):"update"===l&&this._updatePristineForModel(n[s],r[s])):this._removePristineForModel(n[s])},_updatePristineForModel:function(e,t){this._executeOnPristineForModel(e,function(e,i){j.deepExtend(i[e],t)})},_executeOnPristineForModel:function(e,t){this._eachPristineItem(function(i){var n=F(i,e);if(n>-1)return t(n,i),!0})},_removePristineForModel:function(e){this._executeOnPristineForModel(e,function(e,t){t.splice(e,1)})},_readData:function(e){return(this._isServerGrouped()?this.reader.groups:this.reader.data).call(this.reader,e)},_eachPristineItem:function(e){this._eachItem(this._pristineData,e)},_eachItem:function(e,t){e&&e.length&&(this._isServerGrouped()?x(e,t):t(e))},_pristineForModel:function(e){var t,i;return this._eachPristineItem(function(n){if((i=F(n,e))>-1)return t=n[i],!0}),t},_cancelModel:function(e){var t=this._pristineForModel(e);this._eachItem(this._data,function(i){var n=E(i,e);n>=0&&(!t||e.isNew()&&!t.__state__?i.splice(n,1):(i[n].accept(t),"update"==t.__state__&&(i[n].dirty=!0)))})},_submit:function(t,i){var n=this;n.trigger(X,{type:"submit"}),n.transport.submit(P({success:function(i,n){var r=e.grep(t,function(e){return e.type==n})[0];r&&r.resolve({response:i,models:r.models,type:n})},error:function(e,i,r){for(var s=0;s<t.length;s++)t[s].reject(e);n.error(e,i,r)}},i))},_sendSubmit:function(t,i,n){var r=[];return this.options.batch&&(t.length&&r.push(e.Deferred(function(e){e.type="create",e.models=t})),i.length&&r.push(e.Deferred(function(e){e.type="update",e.models=i})),n.length&&r.push(e.Deferred(function(e){e.type="destroy",e.models=n})),this._submit(r,{data:{created:this.reader.serialize(m(t)),updated:this.reader.serialize(m(i)),destroyed:this.reader.serialize(m(n))}})),r},_promise:function(t,i,n){var r=this;return e.Deferred(function(e){r.trigger(X,{type:n}),r.transport[n].call(r.transport,P({success:function(t){e.resolve({response:t,models:i,type:n})},error:function(t,i,n){e.reject(t),r.error(t,i,n)}},t))}).promise()},_send:function(e,t){var i,n,r=[],s=this.reader.serialize(m(t));if(this.options.batch)t.length&&r.push(this._promise({data:{models:s}},t,e));else for(i=0,n=t.length;i<n;i++)r.push(this._promise({data:s[i]},[t[i]],e));return r},read:function(t){var i=this,n=i._params(t),r=e.Deferred();return i._queueRequest(n,function(){var e=i.trigger(X,{type:"read"});e?(i._dequeueRequest(),r.resolve(e)):(i.trigger("progress"),i._ranges=[],i.trigger("reset"),i.online()?i.transport.read({data:n,success:function(e){i.success(e,n),r.resolve()},error:function(){var e=ce.call(arguments);i.error.apply(i,e),r.reject.apply(r,e)}}):null!=i.options.offlineStorage&&(i.success(i.offlineData(),n),r.resolve()))}),r.promise()},_readAggregates:function(e){return this.reader.aggregates(e)},success:function(e){var t=this.options;if(this.trigger(Z,{response:e,type:"read"}),this.online()){if(e=this.reader.parse(e),this._handleCustomErrors(e))return void this._dequeueRequest();this._total=this.reader.total(e),this._aggregate&&t.serverAggregates&&(this._aggregateResult=this._readAggregates(e)),e=this._readData(e)}else{e=this._readData(e);var i,n=[],r={},s=this.reader.model,o=s?s.idField:"id";for(i=0;i<this._destroyed.length;i++){var a=this._destroyed[i][o];r[a]=a}for(i=0;i<e.length;i++){var l=e[i];"destroy"==l.__state__?r[l[o]]||this._destroyed.push(this._createNewModel(l)):n.push(l)}e=n,this._total=e.length}this._pristineTotal=this._total,this._pristineData=e?e.slice(0):e,this._detachObservableParents(),this._data=this._observe(e),this._markOfflineUpdatesAsDirty(),this._storeData(),this._addRange(this._data),this._process(this._data),this._dequeueRequest()},_detachObservableParents:function(){if(this._data&&this._shouldDetachObservableParents)for(var e=0;e<this._data.length;e++)this._data[e].parent&&(this._data[e].parent=$)},_storeData:function(e){function t(e){for(var r=[],s=0;s<e.length;s++){var o=e.at(s),a=o.toJSON();i&&o.items?a.items=t(o.items):(a.uid=o.uid,n&&(o.isNew()?a.__state__="create":o.dirty&&(a.__state__="update"))),r.push(a)}return r}var i=this._isServerGrouped(),n=this.reader.model;if(null!=this.options.offlineStorage){for(var r=t(this._data),s=[],o=0;o<this._destroyed.length;o++){var a=this._destroyed[o].toJSON();a.__state__="destroy",s.push(a)}this.offlineData(r.concat(s)),e&&(this._pristineData=this._readData(r))}},_addRange:function(e){var t=this._skip||0,i=t+this._flatData(e,!0).length;this._ranges.push({start:t,end:i,data:e,timestamp:(new Date).getTime()}),this._ranges.sort(function(e,t){return e.start-t.start})},error:function(e,t,i){this._dequeueRequest(),this.trigger(Z,{}),this.trigger("error",{xhr:e,status:t,errorThrown:i})},_params:function(e){var t=P({take:this.take(),skip:this.skip(),page:this.page(),pageSize:this.pageSize(),sort:this._sort,filter:this._filter,group:this._group,aggregate:this._aggregate},e);return this.options.serverPaging||(delete t.take,delete t.skip,delete t.page,delete t.pageSize),this.options.serverGrouping?this.reader.model&&t.group&&(t.group=M(t.group,this.reader.model)):delete t.group,this.options.serverFiltering?this.reader.model&&t.filter&&(t.filter=I(t.filter,this.reader.model)):delete t.filter,this.options.serverSorting?this.reader.model&&t.sort&&(t.sort=M(t.sort,this.reader.model)):delete t.sort,this.options.serverAggregates?this.reader.model&&t.aggregate&&(t.aggregate=M(t.aggregate,this.reader.model)):delete t.aggregate,t},_queueRequest:function(e,i){this._requestInProgress?this._pending={callback:L(i,this),options:e}:(this._requestInProgress=!0,this._pending=t,i())},_dequeueRequest:function(){this._requestInProgress=!1,this._pending&&this._queueRequest(this._pending.options,this._pending.callback)},_handleCustomErrors:function(e){if(this.reader.errors){var t=this.reader.errors(e);if(t)return this.trigger("error",{xhr:null,status:"customerror",errorThrown:"custom error",errors:t}),!0}return!1},_shouldWrap:function(e){var t=this.reader.model;return!(!t||!e.length||e[0]instanceof t)},_observe:function(e){var t=this,i=t.reader.model;return t._shouldDetachObservableParents=!0,e instanceof ve?(t._shouldDetachObservableParents=!1,t._shouldWrap(e)&&(e.type=t.reader.model,e.wrapAll(e,e))):(e=new(t.pageSize()&&!t.options.serverPaging?_e:ve)(e,t.reader.model)).parent=function(){return t.parent()},t._isServerGrouped()&&y(e,i),t._changeHandler&&t._data&&t._data instanceof ve?t._data.unbind(J,t._changeHandler):t._changeHandler=L(t._change,t),e.bind(J,t._changeHandler)},_updateTotalForAction:function(e,t){var i=parseInt(this._total,10);f(this._total)||(i=parseInt(this._pristineTotal,10)),"add"===e?i+=t.length:"remove"===e?i-=t.length:"itemchange"===e||"sync"===e||this.options.serverPaging?"sync"===e&&(i=this._pristineTotal=parseInt(this._total,10)):i=this._pristineTotal,this._total=i},_change:function(e){var t,i,n=this,r=e?e.action:"";if("remove"===r)for(t=0,i=e.items.length;t<i;t++)e.items[t].isNew&&e.items[t].isNew()||n._destroyed.push(e.items[t]);if(!n.options.autoSync||"add"!==r&&"remove"!==r&&"itemchange"!==r)n._updateTotalForAction(r,e?e.items:[]),n._process(n._data,e);else{var s=function(t){"sync"===t.action&&(n.unbind("change",s),n._updateTotalForAction(r,e.items))};n.first("change",s),n.sync()}},_calculateAggregates:function(e,t){t=t||{};var i=new r(e),n=t.aggregate,s=t.filter;return s&&(i=i.filter(s)),i.aggregate(n)},_process:function(e,i){var n,r={};!0!==this.options.serverPaging&&(r.skip=this._skip,r.take=this._take||this._pageSize,r.skip===t&&this._page!==t&&this._pageSize!==t&&(r.skip=(this._page-1)*this._pageSize)),!0!==this.options.serverSorting&&(r.sort=this._sort),!0!==this.options.serverFiltering&&(r.filter=this._filter),!0!==this.options.serverGrouping&&(r.group=this._group),!0!==this.options.serverAggregates&&(r.aggregate=this._aggregate,this._aggregateResult=this._calculateAggregates(e,r)),n=this._queryProcess(e,r),this.view(n.data),n.total===t||this.options.serverFiltering||(this._total=n.total),(i=i||{}).items=i.items||this._view,this.trigger(J,i)},_queryProcess:function(e,t){return r.process(e,t)},_mergeState:function(e){return e!==t&&(this._pageSize=e.pageSize,this._page=e.page,this._sort=e.sort,this._filter=e.filter,this._group=e.group,this._aggregate=e.aggregate,this._skip=this._currentRangeStart=e.skip,this._take=e.take,this._skip===t&&(this._skip=this._currentRangeStart=this.skip(),e.skip=this.skip()),this._take===t&&this._pageSize!==t&&(this._take=this._pageSize,e.take=this._take),e.sort&&(this._sort=e.sort=s(e.sort)),e.filter&&(this._filter=e.filter=a(e.filter)),e.group&&(this._group=e.group=h(e.group)),e.aggregate&&(this._aggregate=e.aggregate=function(e){return V(e)?e:[e]}(e.aggregate))),e},query:function(i){var n;if(this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates||(this._data===t||0===this._data.length)&&!this._destroyed.length)return this.read(this._mergeState(i));var r=this.trigger(X,{type:"read"});return r||(this.trigger("progress"),n=this._queryProcess(this._data,this._mergeState(i)),this.options.serverFiltering||(n.total!==t?this._total=n.total:this._total=this._data.length),this._aggregateResult=this._calculateAggregates(this._data,i),this.view(n.data),this.trigger(Z,{type:"read"}),this.trigger(J,{items:n.data})),e.Deferred().resolve(r).promise()},fetch:function(e){var t=this;return this._query().then(function(i){!0!==i&&G(e)&&e.call(t)})},_query:function(e){return this.query(P({},{page:this.page(),pageSize:this.pageSize(),sort:this.sort(),filter:this.filter(),group:this.group(),aggregate:this.aggregate()},e))},next:function(e){var t=this.page(),i=this.total();if(e=e||{},t&&!(i&&t+1>this.totalPages()))return this._skip=this._currentRangeStart=t*this.take(),t+=1,e.page=t,this._query(e),t},prev:function(e){var t=this.page();if(e=e||{},t&&1!==t)return this._skip=this._currentRangeStart=this._skip-this.take(),t-=1,e.page=t,this._query(e),t},page:function(e){var i;return e!==t?(e=re.max(re.min(re.max(e,1),this.totalPages()),1),void this._query({page:e})):(i=this.skip())!==t?re.round((i||0)/(this.take()||1))+1:t},pageSize:function(e){if(e===t)return this.take();this._query({pageSize:e,page:1})},sort:function(e){if(e===t)return this._sort;this._query({sort:e})},filter:function(e){if(e===t)return this._filter;this.trigger("reset"),this._query({filter:e,page:1})},group:function(e){if(e===t)return this._group;this._query({group:e})},total:function(){return parseInt(this._total||0,10)},aggregate:function(e){if(e===t)return this._aggregate;this._query({aggregate:e})},aggregates:function(){var e=this._aggregateResult;return O(e)&&(e=this._emptyAggregates(this.aggregate())),e},_emptyAggregates:function(e){var t={};if(!O(e)){var i={};V(e)||(e=[e]);for(var n=0;n<e.length;n++)i[e[n].aggregate]=0,t[e[n].field]=i}return t},_wrapInEmptyGroup:function(e){var t,i,n,r=this.group();for(n=r.length-1;n>=0;n--)i=r[n],t={value:e.get(i.field),field:i.field,items:t?[t]:[e],hasSubgroups:!!t,aggregates:this._emptyAggregates(i.aggregates)};return t},totalPages:function(){var e=this.pageSize()||this.total();return re.ceil((this.total()||0)/e)},inRange:function(e,t){var i=re.min(e+t,this.total());return!this.options.serverPaging&&this._data.length>0||this._findRange(e,i).length>0},lastRange:function(){var e=this._ranges;return e[e.length-1]||{start:0,end:0,data:[]}},firstItemUid:function(){var e=this._ranges;return e.length&&e[0].data.length&&e[0].data[0].uid},enableRequestsInProgress:function(){this._skipRequestsInProgress=!1},_timeStamp:function(){return(new Date).getTime()},range:function(e,i){this._currentRequestTimeStamp=this._timeStamp(),this._skipRequestsInProgress=!0,e=re.min(e||0,this.total());var n,r=this,s=re.max(re.floor(e/i),0)*i,o=re.min(s+i,r.total());if((n=r._findRange(e,re.min(e+i,r.total()))).length){r._pending=t,r._skip=e>r.skip()?re.min(o,(r.totalPages()-1)*r.take()):s,r._currentRangeStart=e,r._take=i;var a=r.options.serverPaging,l=r.options.serverSorting,d=r.options.serverFiltering,c=r.options.serverAggregates;try{r.options.serverPaging=!0,r._isServerGrouped()||r.group()&&r.group().length||(r.options.serverSorting=!0),r.options.serverFiltering=!0,r.options.serverPaging=!0,r.options.serverAggregates=!0,a&&(r._detachObservableParents(),r._data=n=r._observe(n)),r._process(n)}finally{r.options.serverPaging=a,r.options.serverSorting=l,r.options.serverFiltering=d,r.options.serverAggregates=c}}else i!==t&&(r._rangeExists(s,o)?s<e&&r.prefetch(o,i,function(){r.range(e,i)}):r.prefetch(s,i,function(){e>s&&o<r.total()&&!r._rangeExists(o,re.min(o+i,r.total()))?r.prefetch(o,i,function(){r.range(e,i)}):r.range(e,i)}))},_findRange:function(e,i){var n,r,o,a,l,d,c,u,f,p,m,g=this._ranges,v=[],_=this.options,b=_.serverSorting||_.serverPaging||_.serverFiltering||_.serverGrouping||_.serverAggregates;for(r=0,m=g.length;r<m;r++)if(n=g[r],e>=n.start&&e<=n.end){for(p=0,o=r;o<m;o++)if(n=g[o],(f=this._flatData(n.data,!0)).length&&e+p>=n.start){if(d=n.data,c=n.end,!b){var k=h(this.group()||[]).concat(s(this.sort()||[]));f=d=(u=this._queryProcess(n.data,{sort:k,filter:this.filter()})).data,u.total!==t&&(c=u.total)}if(a=0,e+p>n.start&&(a=e+p-n.start),l=f.length,c>i&&(l-=c-i),p+=l-a,v=this._mergeGroups(v,d,a,l),i<=n.end&&p==i-e)return v}break}return[]},_mergeGroups:function(e,t,i,n){if(this._isServerGrouped()){var r,s=t.toJSON();return e.length&&(r=e[e.length-1]),k(r,s,i,n),e.concat(s)}return e.concat(t.slice(i,n))},skip:function(){return this._skip===t?this._page!==t?(this._page-1)*(this.take()||1):t:this._skip},currentRangeStart:function(){return this._currentRangeStart||0},take:function(){return this._take||this._pageSize},_prefetchSuccessHandler:function(e,t,i,n){var r=this,s=r._timeStamp();return function(o){var a,l,d,c=!1,u={start:e,end:t,data:[],timestamp:r._timeStamp()};if(r._dequeueRequest(),r.trigger(Z,{response:o,type:"read"}),o=r.reader.parse(o),(d=r._readData(o)).length){for(a=0,l=r._ranges.length;a<l;a++)if(r._ranges[a].start===e){c=!0,u=r._ranges[a];break}c||r._ranges.push(u)}u.data=r._observe(d),u.end=u.start+r._flatData(u.data,!0).length,r._ranges.sort(function(e,t){return e.start-t.start}),r._total=r.reader.total(o),(n||s>=r._currentRequestTimeStamp||!r._skipRequestsInProgress)&&(i&&d.length?i():r.trigger(J,{}))}},prefetch:function(e,t,i){var n=this,r=re.min(e+t,n.total()),s={take:t,skip:e,page:e/t+1,pageSize:t,sort:n._sort,filter:n._filter,group:n._group,aggregate:n._aggregate};n._rangeExists(e,r)?i&&i():(clearTimeout(n._timeout),n._timeout=setTimeout(function(){n._queueRequest(s,function(){n.trigger(X,{type:"read"})?n._dequeueRequest():n.transport.read({data:n._params(s),success:n._prefetchSuccessHandler(e,r,i),error:function(){var e=ce.call(arguments);n.error.apply(n,e)}})})},100))},_multiplePrefetch:function(e,t,i){var n=re.min(e+t,this.total()),r={take:t,skip:e,page:e/t+1,pageSize:t,sort:this._sort,filter:this._filter,group:this._group,aggregate:this._aggregate};this._rangeExists(e,n)?i&&i():this.trigger(X,{type:"read"})||this.transport.read({data:this._params(r),success:this._prefetchSuccessHandler(e,n,i,!0)})},_rangeExists:function(e,t){var i,n,r=this._ranges;for(i=0,n=r.length;i<n;i++)if(r[i].start<=e&&r[i].end>=t)return!0;return!1},_removeModelFromRanges:function(e){for(var t,i,n=0,r=this._ranges.length;n<r&&(i=this._ranges[n],this._eachItem(i.data,function(i){D(i,e)&&(t=!0)}),!t);n++);},_updateRangesLength:function(){for(var e,t,i=0,n=0,r=this._ranges.length;n<r;n++)(e=this._ranges[n]).start=e.start-i,t=this._flatData(e.data,!0).length,i=e.end-t,e.end=e.start+t}}),Me={};Me.create=function(t,i,n){var r,s=t.transport?e.extend({},t.transport):null;return s?(s.read=typeof s.read===Q?{url:s.read}:s.read,"jsdo"===t.type&&(s.dataSource=n),t.type&&(j.data.transports=j.data.transports||{},j.data.schemas=j.data.schemas||{},j.data.transports[t.type]?B(j.data.transports[t.type])?s=P(!0,{},j.data.transports[t.type],s):r=new j.data.transports[t.type](P(s,{data:i})):j.logToConsole("Unknown DataSource transport type '"+t.type+"'.\nVerify that registration scripts for this type are included after Kendo UI on the page.","warn"),t.schema=P(!0,{},j.data.schemas[t.type],t.schema)),r||(r=G(s.read)?s:new Ee(s))):r=new Fe({data:t.data||[]}),r},Ie.create=function(i){(V(i)||i instanceof ve)&&(i={data:i});var n,r,s,o=i||{},a=o.data,l=o.fields,d=o.table,c=o.select,u={};if(a||!l||o.transport||(d?a=function(t,i){var n,r,s,o,a,l,d,c=e(t)[0].tBodies[0],u=c?c.rows:[],h=i.length,f=[];for(n=0,r=u.length;n<r;n++){for(a={},d=!0,o=u[n].cells,s=0;s<h;s++)"th"!==(l=o[s]).nodeName.toLowerCase()&&(d=!1,a[i[s].field]=l.innerHTML);d||f.push(a)}return f}(d,l):c&&(a=function(t,i){var n,r,s,o,a,l,d=(t=e(t)[0]).options,c=i[0],u=i[1],h=[];for(n=0,r=d.length;n<r;n++)a={},(s=(o=d[n]).parentNode)===t&&(s=null),o.disabled||s&&s.disabled||(s&&(a.optgroup=s.label),a[c.field]=o.text,l=(l=o.attributes.value)&&l.specified?o.value:o.text,a[u.field]=l,h.push(a));return h}(c,l),o.group===t&&a[0]&&a[0].optgroup!==t&&(o.group="optgroup"))),j.data.Model&&l&&(!o.schema||!o.schema.model)){for(n=0,r=l.length;n<r;n++)(s=l[n]).type&&(u[s.field]=s);O(u)||(o.schema=P(!0,o.schema,{model:{fields:u}}))}return o.data=a,c=null,o.select=null,d=null,o.table=null,o instanceof Ie?o:new Ie(o)};var He=ye.define({idField:"id",init:function(e){var t=this.hasChildren||e&&e.hasChildren,i="items",n={};j.data.Model.fn.init.call(this,e),typeof this.children===Q&&(i=this.children),n={schema:{data:i,model:{hasChildren:t,id:this.idField,fields:this.fields}}},typeof this.children!==Q&&P(n,this.children),n.data=e,t||(t=n.schema.data),typeof t===Q&&(t=j.getter(t)),G(t)&&(this.hasChildren=!!t.call(this,this)),this._childrenOptions=n,this.hasChildren&&this._initChildren(),this._loaded=!(!e||!e._loaded)},_initChildren:function(){var e,t,i,n=this;n.children instanceof ze||(t=(e=n.children=new ze(n._childrenOptions)).transport,i=t.parameterMap,t.parameterMap=function(e,t){return e[n.idField||"id"]=n.id,i&&(e=i(e,t)),e},e.parent=function(){return n},e.bind(J,function(e){e.node=e.node||n,n.trigger(J,e)}),e.bind("error",function(e){var t=n.parent();t&&(e.node=e.node||n,t.trigger("error",e))}),n._updateChildrenField())},append:function(e){this._initChildren(),this.loaded(!0),this.children.add(e)},hasChildren:!1,level:function(){for(var e=this.parentNode(),t=0;e&&e.parentNode;)t++,e=e.parentNode?e.parentNode():null;return t},_updateChildrenField:function(){this[this._childrenOptions.schema.data||"items"]=this.children.data()},_childrenLoaded:function(){this._loaded=!0,this._updateChildrenField()},load:function(){var i,n,r={},s="_query";return this.hasChildren?(this._initChildren(),i=this.children,r[this.idField||"id"]=this.id,this._loaded||(i._data=t,s="read"),i.one(J,L(this._childrenLoaded,this)),n=i[s](r)):this.loaded(!0),n||e.Deferred().resolve().promise()},parentNode:function(){return this.parent().parent()},loaded:function(e){if(e===t)return this._loaded;this._loaded=e},shouldSerialize:function(e){return ye.fn.shouldSerialize.call(this,e)&&"children"!==e&&"_loaded"!==e&&"hasChildren"!==e&&"_childrenOptions"!==e}}),ze=Ie.extend({init:function(e){var t=He.define({children:e});Ie.fn.init.call(this,P(!0,{},{schema:{modelBase:t,model:t}},e)),this._attachBubbleHandlers()},_attachBubbleHandlers:function(){var e=this;e._data.bind("error",function(t){e.trigger("error",t)})},remove:function(e){var t,i=e.parentNode(),n=this;return i&&i._initChildren&&(n=i.children),t=Ie.fn.remove.call(n,e),i&&!n.data().length&&(i.hasChildren=!1),t},success:H("success"),data:H("data"),insert:function(e,t){var i=this.parent();return i&&i._initChildren&&(i.hasChildren=!0,i._initChildren()),Ie.fn.insert.call(this,e,t)},_find:function(e,t){var i,n,r,s,o=this._data;if(o){if(r=Ie.fn[e].call(this,t))return r;for(i=0,n=(o=this._flatData(this._data)).length;i<n;i++)if((s=o[i].children)instanceof ze&&(r=s[e](t)))return r}},get:function(e){return this._find("get",e)},getByUid:function(e){return this._find("getByUid",e)}});ze.create=function(e){var t=(e=e&&e.push?{data:e}:e)||{},i=t.data,n=t.fields,r=t.list;return i&&i._dataSource?i._dataSource:(i||!n||t.transport||r&&(i=z(r,n)),t.data=i,t instanceof ze?t:new ze(t))};var Ne=j.Observable.extend({init:function(e,t,i){j.Observable.fn.init.call(this),this._prefetching=!1,this.dataSource=e,this.prefetch=!i;var n=this;e.bind("change",function(){n._change()}),e.bind("reset",function(){n._reset()}),this._syncWithDataSource(),this.setViewSize(t)},setViewSize:function(e){this.viewSize=e,this._recalculate()},at:function(e){var t=this.pageSize,i=!0;return e>=this.total()?(this.trigger("endreached",{index:e}),null):this.useRanges?this.useRanges?((e<this.dataOffset||e>=this.skip+t)&&(i=this.range(Math.floor(e/t)*t)),e===this.prefetchThreshold&&this._prefetch(),e===this.midPageThreshold?this.range(this.nextMidRange,!0):e===this.nextPageThreshold?this.range(this.nextFullRange):e===this.pullBackThreshold&&(this.offset===this.skip?this.range(this.previousMidRange):this.range(this.previousFullRange)),i?this.dataSource.at(e-this.dataOffset):(this.trigger("endreached",{index:e}),null)):void 0:this.dataSource.view()[e]},indexOf:function(e){return this.dataSource.data().indexOf(e)+this.dataOffset},total:function(){return parseInt(this.dataSource.total(),10)},next:function(){var e=this,t=e.pageSize,i=e.skip-e.viewSize+t,n=re.max(re.floor(i/t),0)*t;this.offset=i,this.dataSource.prefetch(n,t,function(){e._goToRange(i,!0)})},range:function(e,t){if(this.offset===e)return!0;var i=this,n=this.pageSize,r=re.max(re.floor(e/n),0)*n,s=this.dataSource;return t&&(r+=n),s.inRange(e,n)?(this.offset=e,this._recalculate(),this._goToRange(e),!0):!this.prefetch||(s.prefetch(r,n,function(){i.offset=e,i._recalculate(),i._goToRange(e,!0)}),!1)},syncDataSource:function(){var e=this.offset;this.offset=null,this.range(e)},destroy:function(){this.unbind()},_prefetch:function(){var e=this,t=this.pageSize,i=this.skip+t,n=this.dataSource;n.inRange(i,t)||this._prefetching||!this.prefetch||(this._prefetching=!0,this.trigger("prefetching",{skip:i,take:t}),n.prefetch(i,t,function(){e._prefetching=!1,e.trigger("prefetched",{skip:i,take:t})}))},_goToRange:function(e,t){this.offset===e&&(this.dataOffset=e,this._expanding=t,this.dataSource.range(e,this.pageSize),this.dataSource.enableRequestsInProgress())},_reset:function(){this._syncPending=!0},_change:function(){var e=this.dataSource;this.length=this.useRanges?e.lastRange().end:e.view().length,this._syncPending&&(this._syncWithDataSource(),this._recalculate(),this._syncPending=!1,this.trigger("reset",{offset:this.offset})),this.trigger("resize"),this._expanding&&this.trigger("expand"),delete this._expanding},_syncWithDataSource:function(){var e=this.dataSource;this._firstItemUid=e.firstItemUid(),this.dataOffset=this.offset=e.skip()||0,this.pageSize=e.pageSize(),this.useRanges=e.options.serverPaging},_recalculate:function(){var e=this.pageSize,t=this.offset,i=this.viewSize,n=Math.ceil(t/e)*e;this.skip=n,this.midPageThreshold=n+e-1,this.nextPageThreshold=n+i-1,this.prefetchThreshold=n+Math.floor(e/3*2),this.pullBackThreshold=this.offset-1,this.nextMidRange=n+e-i,this.nextFullRange=n,this.previousMidRange=t-i,this.previousFullRange=n-e}}),Pe=j.Observable.extend({init:function(e,t){var i=this;j.Observable.fn.init.call(i),this.dataSource=e,this.batchSize=t,this._total=0,this.buffer=new Ne(e,3*t),this.buffer.bind({endreached:function(e){i.trigger("endreached",{index:e.index})},prefetching:function(e){i.trigger("prefetching",{skip:e.skip,take:e.take})},prefetched:function(e){i.trigger("prefetched",{skip:e.skip,take:e.take})},reset:function(){i._total=0,i.trigger("reset")},resize:function(){i._total=Math.ceil(this.length/i.batchSize),i.trigger("resize",{total:i.total(),offset:this.offset})}})},syncDataSource:function(){this.buffer.syncDataSource()},at:function(e){var t,i=this.buffer,n=e*this.batchSize,r=this.batchSize,s=[];i.offset>n&&i.at(i.offset-1);for(var o=0;o<r&&null!==(t=i.at(n+o));o++)s.push(t);return s},total:function(){return this._total},destroy:function(){this.buffer.destroy(),this.unbind()}});P(!0,j.data,{readers:{json:Ae},Query:r,DataSource:Ie,HierarchicalDataSource:ze,Node:He,ObservableObject:be,ObservableArray:ve,LazyObservableArray:_e,LocalTransport:Fe,RemoteTransport:Ee,Cache:Re,DataReader:Ae,Model:ye,Buffer:Ne,BatchBuffer:Pe})}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.binder",["kendo.core","kendo.data"],function(){return function(e,t){function i(t,i,n){return D.extend({init:function(e,t,i){D.fn.init.call(this,e.element[0],t,i),this.widget=e,this._dataBinding=_(this.dataBinding,this),this._dataBound=_(this.dataBound,this),this._itemChange=_(this.itemChange,this)},itemChange:function(e){s(e.item[0],e.data,this._ns(e.ns),[e.data].concat(this.bindings[t]._parents()))},dataBinding:function(e){var t,i,n=this.widget,r=e.removedItems||n.items();for(t=0,i=r.length;t<i;t++)l(r[t],!1)},_ns:function(t){t=t||u.ui;var i=[u.ui,u.dataviz.ui,u.mobile.ui];return i.splice(e.inArray(t,i),1),i.unshift(t),u.rolesFromNamespaces(i)},dataBound:function(e){var n,r,o,a,l=this.widget,d=e.addedItems||l.items(),c=l[i],h=u.data.HierarchicalDataSource;if(!(h&&c instanceof h)&&d.length)for(o=e.addedDataItems||c.flatView(),a=this.bindings[t]._parents(),n=0,r=o.length;n<r;n++)s(d[n],o[n],this._ns(e.ns),[o[n]].concat(a))},refresh:function(e){var r,s,o,a=this.widget;(e=e||{}).action||(this.destroy(),a.bind("dataBinding",this._dataBinding),a.bind("dataBound",this._dataBound),a.bind("itemChange",this._itemChange),r=this.bindings[t].get(),a[i]instanceof u.data.DataSource&&a[i]!=r&&(r instanceof u.data.DataSource?a[n](r):r&&r._dataSource?a[n](r._dataSource):(a[i].data(r),s=u.ui.Select&&a instanceof u.ui.Select,o=u.ui.MultiSelect&&a instanceof u.ui.MultiSelect,this.bindings.value&&(s||o)&&a.value(c(this.bindings.value.get(),a.options.dataValueField)))))},destroy:function(){var e=this.widget;e.unbind("dataBinding",this._dataBinding),e.unbind("dataBound",this._dataBound),e.unbind("itemChange",this._itemChange)}})}function n(e){var t,i,r,s,o,a,l,d={};for(t=0,i=(l=e.match(I)).length;t<i;t++)s=(r=l[t]).indexOf(":"),o=r.substring(0,s),"{"==(a=r.substring(s+1)).charAt(0)&&(a=n(a)),d[o]=a;return d}function r(e,t,i){var n,r={};for(n in e)r[n]=new i(t,e[n]);return r}function s(e,t,i,o){var l,d,c,h=e.getAttribute("data-"+u.ns+"role"),f=e.getAttribute("data-"+u.ns+"bind"),p=e.children,m=[],g=!0,v={};if(o=o||[t],(h||f)&&a(e,!1),h&&(c=function(e,t){var i=u.initWidget(e,{},t);if(i)return new A(i)}(e,i)),f&&(f=n(f.replace(M,"")),c||((v=u.parseOptions(e,{textField:"",valueField:"",template:"",valueUpdate:x,valuePrimitive:!1,autoBind:!0})).roles=i,c=new R(e,v)),c.source=t,d=r(f,o,C),v.template&&(d.template=new T(o,"",v.template)),d.click&&(f.events=f.events||{},f.events.click=f.click,d.click.destroy(),delete d.click),d.source&&(g=!1),f.attr&&(d.attr=r(f.attr,o,C)),f.style&&(d.style=r(f.style,o,C)),f.events&&(d.events=r(f.events,o,S)),f.css&&(d.css=r(f.css,o,C)),c.bind(d)),c&&(e.kendoBindingTarget=c),g&&p){for(l=0;l<p.length;l++)m[l]=p[l];for(l=0;l<m.length;l++)s(m[l],t,i,o)}}function o(t,i){var n,r,o,a=u.rolesFromNamespaces([].slice.call(arguments,2));for(i=u.observable(i),n=0,r=(t=e(t)).length;n<r;n++)1===(o=t[n]).nodeType&&s(o,i,a)}function a(t,i){var n=t.kendoBindingTarget;if(n&&(n.destroy(),w?delete t.kendoBindingTarget:t.removeAttribute?t.removeAttribute("kendoBindingTarget"):t.kendoBindingTarget=null),i){var r=u.widgetInstance(e(t));r&&typeof r.destroy===y&&r.destroy()}}function l(e,t){a(e,t),d(e,t)}function d(e,t){var i=e.children;if(i)for(var n=0,r=i.length;n<r;n++)l(i[n],t)}function c(e,t){var i,n,r=[],s=0;if(!t)return e;if(e instanceof p){for(i=e.length;s<i;s++)n=e[s],r[s]=n.get?n.get(t):n[t];e=r}else e instanceof f&&(e=e.get(t));return e}var u=window.kendo,h=u.Observable,f=u.data.ObservableObject,p=u.data.ObservableArray,m={}.toString,g={},v=u.Class,_=e.proxy,b="value",k="checked",w=!0,y="function",x="change";!function(){var e=document.createElement("a");try{delete e.test}catch(e){w=!1}}();var C=h.extend({init:function(e,t){var i=this;h.fn.init.call(i),i.source=e[0],i.parents=e,i.path=t,i.dependencies={},i.dependencies[t]=!0,i.observable=i.source instanceof h,i._access=function(e){i.dependencies[e.field]=!0},i.observable&&(i._change=function(e){i.change(e)},i.source.bind(x,i._change))},_parents:function(){var t=this.parents,i=this.get();if(i&&"function"==typeof i.parent){var n=i.parent();e.inArray(n,t)<0&&(t=[n].concat(t))}return t},change:function(e){var t,i,n=e.field;if("this"===this.path)this.trigger(x,e);else for(t in this.dependencies)if(0===t.indexOf(n)&&(!(i=t.charAt(n.length))||"."===i||"["===i)){this.trigger(x,e);break}},start:function(e){e.bind("get",this._access)},stop:function(e){e.unbind("get",this._access)},get:function(){var e=this.source,t=0,i=this.path,n=e;if(!this.observable)return n;for(this.start(this.source),n=e.get(i);void 0===n&&e;)(e=this.parents[++t])instanceof f&&(n=e.get(i));if(void 0===n)for(e=this.source;void 0===n&&e;)(e=e.parent())instanceof f&&(n=e.get(i));return"function"==typeof n&&((t=i.lastIndexOf("."))>0&&(e=e.get(i.substring(0,t))),this.start(e),n=e!==this.source?n.call(e,this.source):n.call(e),this.stop(e)),e&&e!==this.source&&(this.currentSource=e,e.unbind(x,this._change).bind(x,this._change)),this.stop(this.source),n},set:function(e){var t=this.currentSource||this.source,i=u.getter(this.path)(t);"function"==typeof i?t!==this.source?i.call(t,this.source,e):i.call(t,e):t.set(this.path,e)},destroy:function(){this.observable&&(this.source.unbind(x,this._change),this.currentSource&&this.currentSource.unbind(x,this._change)),this.unbind()}}),S=C.extend({get:function(){var e,t=this.source,i=this.path,n=0;for(e=t.get(i);!e&&t;)(t=this.parents[++n])instanceof f&&(e=t.get(i));return _(e,t)}}),T=C.extend({init:function(e,t,i){C.fn.init.call(this,e,t),this.template=i},render:function(e){var t;return this.start(this.source),t=u.render(this.template,e),this.stop(this.source),t}}),D=v.extend({init:function(e,t,i){this.element=e,this.bindings=t,this.options=i},bind:function(e,t){var i=this;(e=t?e[t]:e).bind(x,function(e){i.refresh(t||e)}),i.refresh(t)},destroy:function(){}}),F=D.extend({dataType:function(){return(this.element.getAttribute("data-type")||this.element.type||"text").toLowerCase()},parsedValue:function(){return this._parseValue(this.element.value,this.dataType())},_parseValue:function(e,t){return"date"==t?e=u.parseDate(e,"yyyy-MM-dd"):"datetime-local"==t?e=u.parseDate(e,["yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm"]):"number"==t?e=u.parseFloat(e):"boolean"==t&&(e=e.toLowerCase(),e=null!==u.parseFloat(e)?Boolean(u.parseFloat(e)):"true"===e.toLowerCase()),e}});g.attr=D.extend({refresh:function(e){this.element.setAttribute(e,this.bindings.attr[e].get())}}),g.css=D.extend({init:function(e,t,i){D.fn.init.call(this,e,t,i),this.classes={}},refresh:function(t){var i=e(this.element),n=this.bindings.css[t];(this.classes[t]=n.get())?i.addClass(t):i.removeClass(t)}}),g.style=D.extend({refresh:function(e){this.element.style[e]=this.bindings.style[e].get()||""}}),g.enabled=D.extend({refresh:function(){this.bindings.enabled.get()?this.element.removeAttribute("disabled"):this.element.setAttribute("disabled","disabled")}}),g.readonly=D.extend({refresh:function(){this.bindings.readonly.get()?this.element.setAttribute("readonly","readonly"):this.element.removeAttribute("readonly")}}),g.disabled=D.extend({refresh:function(){this.bindings.disabled.get()?this.element.setAttribute("disabled","disabled"):this.element.removeAttribute("disabled")}}),g.events=D.extend({init:function(e,t,i){D.fn.init.call(this,e,t,i),this.handlers={}},refresh:function(t){var i=e(this.element),n=this.bindings.events[t],r=this.handlers[t];r&&i.off(t,r),r=this.handlers[t]=n.get(),i.on(t,n.source,r)},destroy:function(){var t,i=e(this.element);for(t in this.handlers)i.off(t,this.handlers[t])}}),g.text=D.extend({refresh:function(){var t=this.bindings.text.get(),i=this.element.getAttribute("data-format")||"";null==t&&(t=""),e(this.element).text(u.toString(t,i))}}),g.visible=D.extend({refresh:function(){this.bindings.visible.get()?this.element.style.display="":this.element.style.display="none"}}),g.invisible=D.extend({refresh:function(){this.bindings.invisible.get()?this.element.style.display="none":this.element.style.display=""}}),g.html=D.extend({refresh:function(){this.element.innerHTML=this.bindings.html.get()}}),g.value=F.extend({init:function(t,i,n){F.fn.init.call(this,t,i,n),this._change=_(this.change,this),this.eventName=n.valueUpdate||x,e(this.element).on(this.eventName,this._change),this._initChange=!1},change:function(){this._initChange=this.eventName!=x,this.bindings.value.set(this.parsedValue()),this._initChange=!1},refresh:function(){if(!this._initChange){var e=this.bindings.value.get();null==e&&(e="");var t=this.dataType();"date"==t?e=u.toString(e,"yyyy-MM-dd"):"datetime-local"==t&&(e=u.toString(e,"yyyy-MM-ddTHH:mm:ss")),this.element.value=e}this._initChange=!1},destroy:function(){e(this.element).off(this.eventName,this._change)}}),g.source=D.extend({init:function(e,t,i){D.fn.init.call(this,e,t,i);var n=this.bindings.source.get();n instanceof u.data.DataSource&&!1!==i.autoBind&&n.fetch()},refresh:function(e){var t=this.bindings.source.get();t instanceof p||t instanceof u.data.DataSource?"add"==(e=e||{}).action?this.add(e.index,e.items):"remove"==e.action?this.remove(e.index,e.items):"itemchange"!=e.action&&this.render():this.render()},container:function(){var e=this.element;return"table"==e.nodeName.toLowerCase()&&(e.tBodies[0]||e.appendChild(document.createElement("tbody")),e=e.tBodies[0]),e},template:function(){var e=this.options,t=e.template,i=this.container().nodeName.toLowerCase();return t||(t="select"==i?e.valueField||e.textField?u.format('<option value="#:{0}#">#:{1}#</option>',e.valueField||e.textField,e.textField||e.valueField):"<option>#:data#</option>":"tbody"==i?"<tr><td>#:data#</td></tr>":"ul"==i||"ol"==i?"<li>#:data#</li>":"#:data#",t=u.template(t)),t},add:function(t,i){var n,r,o,a,l=this.container(),d=l.cloneNode(!1),c=l.children[t];if(e(d).html(u.render(this.template(),i)),d.children.length)for(n=this.bindings.source._parents(),r=0,o=i.length;r<o;r++)a=d.children[0],l.insertBefore(a,c||null),s(a,i[r],this.options.roles,[i[r]].concat(n))},remove:function(e,t){var i,n=this.container();for(i=0;i<t.length;i++){var r=n.children[e];l(r,!0),n.removeChild(r)}},render:function(){var t,i,n,r=this.bindings.source.get(),o=this.container(),a=this.template();if(null!=r)if(r instanceof u.data.DataSource&&(r=r.view()),r instanceof p||"[object Array]"===m.call(r)||(r=[r]),this.bindings.template){if(d(o,!0),e(o).html(this.bindings.template.render(r)),o.children.length)for(t=this.bindings.source._parents(),i=0,n=r.length;i<n;i++)s(o.children[i],r[i],this.options.roles,[r[i]].concat(t))}else e(o).html(u.render(a,r))}}),g.input={checked:F.extend({init:function(t,i,n){F.fn.init.call(this,t,i,n),this._change=_(this.change,this),e(this.element).change(this._change)},change:function(){var e=this.element,t=this.value();if("radio"==e.type)t=this.parsedValue(),this.bindings[k].set(t);else if("checkbox"==e.type){var i,n=this.bindings[k].get();if(n instanceof p){if((t=this.parsedValue())instanceof Date){for(var r=0;r<n.length;r++)if(n[r]instanceof Date&&+n[r]==+t){i=r;break}}else i=n.indexOf(t);i>-1?n.splice(i,1):n.push(t)}else this.bindings[k].set(t)}},refresh:function(){var e=this.bindings[k].get(),t=e,i=this.dataType(),n=this.element;if("checkbox"==n.type)if(t instanceof p){var r=-1;if((e=this.parsedValue())instanceof Date){for(var s=0;s<t.length;s++)if(t[s]instanceof Date&&+t[s]==+e){r=s;break}}else r=t.indexOf(e);n.checked=r>=0}else n.checked=t;else"radio"==n.type&&null!=e&&("date"==i?e=u.toString(e,"yyyy-MM-dd"):"datetime-local"==i&&(e=u.toString(e,"yyyy-MM-ddTHH:mm:ss")),n.value===e.toString()?n.checked=!0:n.checked=!1)},value:function(){var e=this.element,t=e.value;return"checkbox"==e.type&&(t=e.checked),t},destroy:function(){e(this.element).off(x,this._change)}})},g.select={source:g.source.extend({refresh:function(t){var i=this.bindings.source.get();if(i instanceof p||i instanceof u.data.DataSource){if("add"==(t=t||{}).action)this.add(t.index,t.items);else if("remove"==t.action)this.remove(t.index,t.items);else if(("itemchange"==t.action||void 0===t.action)&&(this.render(),this.bindings.value&&this.bindings.value)){var n=c(this.bindings.value.get(),e(this.element).data("valueField"));null===n?this.element.selectedIndex=-1:this.element.value=n}}else this.render()}}),value:F.extend({init:function(t,i,n){F.fn.init.call(this,t,i,n),this._change=_(this.change,this),e(this.element).change(this._change)},parsedValue:function(){var e,t,i,n,r=this.dataType(),s=[];for(i=0,n=this.element.options.length;i<n;i++)(t=this.element.options[i]).selected&&(e=(e=t.attributes.value)&&e.specified?t.value:t.text,s.push(this._parseValue(e,r)));return s},change:function(){var e,t,i,n,r,s,o=[],a=this.element,l=this.options.valueField||this.options.textField,d=this.options.valuePrimitive;for(r=0,s=a.options.length;r<s;r++)(t=a.options[r]).selected&&(n=(n=t.attributes.value)&&n.specified?t.value:t.text,o.push(this._parseValue(n,this.dataType())));if(l)for((e=this.bindings.source.get())instanceof u.data.DataSource&&(e=e.view()),i=0;i<o.length;i++)for(r=0,s=e.length;r<s;r++){var c=this._parseValue(e[r].get(l),this.dataType());if(String(c)===o[i]){o[i]=e[r];break}}(n=this.bindings.value.get())instanceof p?n.splice.apply(n,[0,n.length].concat(o)):d||!(n instanceof f||null===n||void 0===n)&&l?this.bindings.value.set(o[0].get(l)):this.bindings.value.set(o[0])},refresh:function(){var e,t,i=this.element,n=i.options,r=this.bindings.value.get(),s=r,o=this.options.valueField||this.options.textField,a=this.dataType();s instanceof p||(s=new p([r])),i.selectedIndex=-1;for(var l=0;l<s.length;l++)for(r=s[l],o&&r instanceof f&&(r=r.get(o)),"date"==a?r=u.toString(s[l],"yyyy-MM-dd"):"datetime-local"==a&&(r=u.toString(s[l],"yyyy-MM-ddTHH:mm:ss")),e=0;e<n.length;e++)""===(t=n[e].value)&&""!==r&&(t=n[e].text),null!=r&&t==r.toString()&&(n[e].selected=!0)},destroy:function(){e(this.element).off(x,this._change)}})},g.widget={events:D.extend({init:function(e,t,i){D.fn.init.call(this,e.element[0],t,i),this.widget=e,this.handlers={}},refresh:function(e){var t=this.bindings.events[e],i=this.handlers[e];i&&this.widget.unbind(e,i),i=t.get(),this.handlers[e]=function(e){e.data=t.source,i(e),e.data===t.source&&delete e.data},this.widget.bind(e,this.handlers[e])},destroy:function(){var e;for(e in this.handlers)this.widget.unbind(e,this.handlers[e])}}),checked:D.extend({init:function(e,t,i){D.fn.init.call(this,e.element[0],t,i),this.widget=e,this._change=_(this.change,this),this.widget.bind(x,this._change)},change:function(){this.bindings[k].set(this.value())},refresh:function(){this.widget.check(!0===this.bindings[k].get())},value:function(){var e=this.element,t=e.value;return"on"!=t&&"off"!=t||(t=e.checked),t},destroy:function(){this.widget.unbind(x,this._change)}}),visible:D.extend({init:function(e,t,i){D.fn.init.call(this,e.element[0],t,i),this.widget=e},refresh:function(){var e=this.bindings.visible.get();this.widget.wrapper[0].style.display=e?"":"none"}}),invisible:D.extend({init:function(e,t,i){D.fn.init.call(this,e.element[0],t,i),this.widget=e},refresh:function(){var e=this.bindings.invisible.get();this.widget.wrapper[0].style.display=e?"none":""}}),enabled:D.extend({init:function(e,t,i){D.fn.init.call(this,e.element[0],t,i),this.widget=e},refresh:function(){this.widget.enable&&this.widget.enable(this.bindings.enabled.get())}}),disabled:D.extend({init:function(e,t,i){D.fn.init.call(this,e.element[0],t,i),this.widget=e},refresh:function(){this.widget.enable&&this.widget.enable(!this.bindings.disabled.get())}}),source:i("source","dataSource","setDataSource"),value:D.extend({init:function(t,i,n){D.fn.init.call(this,t.element[0],i,n),this.widget=t,this._change=e.proxy(this.change,this),this.widget.first(x,this._change);var r=this.bindings.value.get();this._valueIsObservableObject=!n.valuePrimitive&&(null==r||r instanceof f),this._valueIsObservableArray=r instanceof p,this._initChange=!1},_source:function(){var e;return this.widget.dataItem&&(e=this.widget.dataItem())&&e instanceof f?[e]:(this.bindings.source&&(e=this.bindings.source.get()),(!e||e instanceof u.data.DataSource)&&(e=this.widget.dataSource.flatView()),e)},change:function(){var e,t,i,n,r,s,o,a=this.widget.value(),l=this.options.dataValueField||this.options.dataTextField,d="[object Array]"===m.call(a),c=this._valueIsObservableObject,u=[];if(this._initChange=!0,l)if(""===a&&(c||this.options.valuePrimitive))a=null;else{for(o=this._source(),d&&(t=a.length,u=a.slice(0)),r=0,s=o.length;r<s;r++)if(i=o[r],n=i.get(l),d){for(e=0;e<t;e++)if(n==u[e]){u[e]=i;break}}else if(n==a){a=c?i:n;break}u[0]&&(a=this._valueIsObservableArray?u:c||!l?u[0]:u[0].get(l))}this.bindings.value.set(a),this._initChange=!1},refresh:function(){if(!this._initChange){var e,t=this.widget,i=t.options,n=i.dataTextField,r=i.dataValueField||n,s=this.bindings.value.get(),o=i.text||"",a=0,l=[];if(void 0===s&&(s=null),r)if(s instanceof p){for(e=s.length;a<e;a++)l[a]=s[a].get(r);s=l}else s instanceof f&&(o=s.get(n),s=s.get(r));!1!==i.autoBind||i.cascadeFrom||!t.listView||t.listView.bound()?t.value(s):(n!==r||o||(o=s),o||!s&&0!==s||!i.valuePrimitive?t._preselect(s,o):t.value(s))}this._initChange=!1},destroy:function(){this.widget.unbind(x,this._change)}}),gantt:{dependencies:i("dependencies","dependencies","setDependenciesDataSource")},multiselect:{value:D.extend({init:function(t,i,n){D.fn.init.call(this,t.element[0],i,n),this.widget=t,this._change=e.proxy(this.change,this),this.widget.first(x,this._change),this._initChange=!1},change:function(){var e=this.bindings.value.get(),t=this.options.valuePrimitive,i=t?this.widget.value():this.widget.dataItems(),n=this.options.dataValueField||this.options.dataTextField;if(i=i.slice(0),this._initChange=!0,e instanceof p){for(var r,s,o,a=[],l=i.length,d=0,c=0,u=e[d];void 0!==u;){for(o=!1,c=0;c<l;c++)if(t?i[c]==u:(s=(s=i[c]).get?s.get(n):s)==(u.get?u.get(n):u)){i.splice(c,1),l-=1,o=!0;break}o?d+=1:(a.push(u),E(e,d,1),r=d),u=e[d]}E(e,e.length,0,i),a.length&&e.trigger("change",{action:"remove",items:a,index:r}),i.length&&e.trigger("change",{action:"add",items:i,index:e.length-1})}else this.bindings.value.set(i);this._initChange=!1},refresh:function(){if(!this._initChange){var e,t,i=this.options,n=this.widget,r=i.dataValueField||i.dataTextField,s=this.bindings.value.get(),o=s,a=0,l=[];if(void 0===s&&(s=null),r)if(s instanceof p){for(e=s.length;a<e;a++)t=s[a],l[a]=t.get?t.get(r):t;s=l}else s instanceof f&&(s=s.get(r));!1!==i.autoBind||!0===i.valuePrimitive||n._isBound()?n.value(s):n._preselect(o,s)}},destroy:function(){this.widget.unbind(x,this._change)}})},scheduler:{source:i("source","dataSource","setDataSource").extend({dataBound:function(e){var t,i,n,r,o=this.widget,a=e.addedItems||o.items();if(a.length)for(n=e.addedDataItems||o.dataItems(),r=this.bindings.source._parents(),t=0,i=n.length;t<i;t++)s(a[t],n[t],this._ns(e.ns),[n[t]].concat(r))}})}};var E=function(e,t,i,n){n=n||[],i=i||0;var r,s=n.length,o=e.length,a=[].slice.call(e,t+i),l=a.length;if(s){for(s=t+s,r=0;t<s;t++)e[t]=n[r],r++;e.length=s}else if(i)for(e.length=t,i+=t;t<i;)delete e[--i];if(l){for(l=t+l,r=0;t<l;t++)e[t]=a[r],r++;e.length=l}for(t=e.length;t<o;)delete e[t],t++},R=v.extend({init:function(e,t){this.target=e,this.options=t,this.toDestroy=[]},bind:function(e){var t,i,n,r,s,o,a=this instanceof A,l=this.binders();for(t in e)t==b?i=!0:"source"==t?n=!0:"events"!=t||a?t==k?s=!0:"css"==t?o=!0:this.applyBinding(t,e,l):r=!0;n&&this.applyBinding("source",e,l),i&&this.applyBinding(b,e,l),s&&this.applyBinding(k,e,l),r&&!a&&this.applyBinding("events",e,l),o&&!a&&this.applyBinding("css",e,l)},binders:function(){return g[this.target.nodeName.toLowerCase()]||{}},applyBinding:function(e,t,i){var n,r=i[e]||g[e],s=this.toDestroy,o=t[e];if(r)if(r=new r(this.target,t,this.options),s.push(r),o instanceof C)r.bind(o),s.push(o);else for(n in o)r.bind(o,n),s.push(o[n]);else if("template"!==e)throw new Error("The "+e+" binding is not supported by the "+this.target.nodeName.toLowerCase()+" element")},destroy:function(){var e,t,i=this.toDestroy;for(e=0,t=i.length;e<t;e++)i[e].destroy()}}),A=R.extend({binders:function(){return g.widget[this.target.options.name.toLowerCase()]||{}},applyBinding:function(e,t,i){var n,r=i[e]||g.widget[e],s=this.toDestroy,o=t[e];if(!r)throw new Error("The "+e+" binding is not supported by the "+this.target.options.name+" widget");if(r=new r(this.target,t,this.target.options),s.push(r),o instanceof C)r.bind(o),s.push(o);else for(n in o)r.bind(o,n),s.push(o[n])}}),I=/[A-Za-z0-9_\-]+:(\{([^}]*)\}|[^,}]+)/g,M=/\s/g;u.unbind=function(t){var i,n;for(i=0,n=(t=e(t)).length;i<n;i++)l(t[i],!1)},u.bind=o,u.data.binders=g,u.data.Binder=D,u.notify=function(e,t){var i=e.element,n=i[0].kendoBindingTarget;n&&o(i,n.source,t)},u.observable=function(e){return e instanceof f||(e=new f(e)),e},u.observableHierarchy=function(e){function t(e){var i,n;for(i=0;i<e.length;i++)e[i]._initChildren(),(n=e[i].children).fetch(),e[i].items=n.data(),t(e[i].items)}var i=u.data.HierarchicalDataSource.create(e);return i.fetch(),t(i.data()),i._data._dataSource=i,i._data}}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.fx",["kendo.core"],function(){return function(e,t){function i(e){return parseInt(e,10)}function n(e,t){return i(e.css(t))}function r(e){for(var t in e)-1!=E.indexOf(t)&&-1==R.indexOf(t)&&delete e[t];return e}function s(e,t){var i,n,r,s,o=[],a={};for(n in t)i=n.toLowerCase(),s=_&&-1!=E.indexOf(i),!g.hasHW3D&&s&&-1==R.indexOf(i)?delete t[n]:(r=t[n],s?o.push(n+"("+r+")"):a[n]=r);return o.length&&(a[W]=o.join(" ")),a}function o(e,t){if(_){var n=e.css(W);if(n==H)return"scale"==t?1:0;var r=n.match(new RegExp(t+"\\s*\\(([\\d\\w\\.]+)")),s=0;return r?s=i(r[1]):(r=n.match(x)||[0,0,0,0,0],t=t.toLowerCase(),S.test(t)?s=parseFloat(r[3]/r[2]):"translatey"==t?s=parseFloat(r[4]/r[2]):"scale"==t?s=parseFloat(r[2]):"rotate"==t&&(s=parseFloat(Math.atan2(r[2],r[1])))),s}return parseFloat(e.css(t))}function a(e){return e.charAt(0).toUpperCase()+e.substring(1)}function l(e,t){var i=K.extend(t),n=i.prototype.directions;h[a(e)]=i,h.Element.prototype[e]=function(e,t,n,r){return new i(this.element,e,t,n,r)},f(n,function(t,n){h.Element.prototype[e+a(n)]=function(e,t,r){return new i(this.element,n,e,t,r)}})}function d(e,t,i,n){l(e,{directions:J,startValue:function(e){return this._startValue=e,this},endValue:function(e){return this._endValue=e,this},shouldHide:function(){return this._shouldHide},prepare:function(e,r){var s,o,a="out"===this._direction,l=this.element.data(t);s=isNaN(l)||l==i?void 0!==this._startValue?this._startValue:a?i:n:l,o=void 0!==this._endValue?this._endValue:a?n:i,this._reverse?(e[t]=o,r[t]=s):(e[t]=s,r[t]=o),this._shouldHide=r[t]===n}})}function c(e,t){var i=e[u.directions[t].vertical?N:z]()/2+"px";return Z[t].replace("$size",i)}var u=window.kendo,h=u.effects,f=e.each,p=e.extend,m=e.proxy,g=u.support,v=g.browser,_=g.transforms,b=g.transitions,k={scale:0,scalex:0,scaley:0,scale3d:0},w={translate:0,translatex:0,translatey:0,translate3d:0},y=void 0!==document.documentElement.style.zoom&&!_,x=/matrix3?d?\s*\(.*,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?/i,C=/^(-?[\d\.\-]+)?[\w\s]*,?\s*(-?[\d\.\-]+)?[\w\s]*/i,S=/translatex?$/i,T=/(zoom|fade|expand)(\w+)/,D=/(zoom|fade|expand)/,F=/[xy]$/i,E=["perspective","rotate","rotatex","rotatey","rotatez","rotate3d","scale","scalex","scaley","scalez","scale3d","skew","skewx","skewy","translate","translatex","translatey","translatez","translate3d","matrix","matrix3d"],R=["rotate","scale","scalex","scaley","skew","skewx","skewy","translate","translatex","translatey","matrix"],A={rotate:"deg",scale:"",skew:"px",translate:"px"},I=_.css,M=Math.round,H="none",z="width",N="height",P="overflow",L="translate",B="position",O="completeCallback",V=I+"transition",W=I+"transform",U=I+"backface-visibility",q=I+"perspective",$="perspective(1500px)",j={left:{reverse:"right",property:"left",transition:"translatex",vertical:!1,modifier:-1},right:{reverse:"left",property:"left",transition:"translatex",vertical:!1,modifier:1},down:{reverse:"up",property:"top",transition:"translatey",vertical:!0,modifier:1},up:{reverse:"down",property:"top",transition:"translatey",vertical:!0,modifier:-1},top:{reverse:"bottom"},bottom:{reverse:"top"},in:{reverse:"out",modifier:-1},out:{reverse:"in",modifier:1},vertical:{reverse:"vertical"},horizontal:{reverse:"horizontal"}};if(u.directions=j,p(e.fn,{kendoStop:function(e,t){return b?h.stopQueue(this,e||!1,t||!1):this.stop(e,t)}}),_&&!b){f(R,function(t,i){e.fn[i]=function(t){if(void 0===t)return o(this,i);var n=e(this)[0],r=i+"("+t+A[i.replace(F,"")]+")";return-1==n.style.cssText.indexOf(W)?e(this).css(W,r):n.style.cssText=n.style.cssText.replace(new RegExp(i+"\\(.*?\\)","i"),r),this},e.fx.step[i]=function(t){e(t.elem)[i](t.now)}});var G=e.fx.prototype.cur;e.fx.prototype.cur=function(){return-1!=R.indexOf(this.prop)?parseFloat(e(this.elem)[this.prop]()):G.apply(this,arguments)}}u.toggleClass=function(e,t,i,n){return t&&(t=t.split(" "),b&&(i=p({exclusive:"all",duration:400,ease:"ease-out"},i),e.css(V,i.exclusive+" "+i.duration+"ms "+i.ease),setTimeout(function(){e.css(V,"").css(N)},i.duration)),f(t,function(t,i){e.toggleClass(i,n)})),e},u.parseEffects=function(e,t){var i={};return"string"==typeof e?f(e.split(" "),function(e,n){var r=!D.test(n),s=n.replace(T,function(e,t,i){return t+":"+i.toLowerCase()}).split(":"),o=s[1],a={};s.length>1&&(a.direction=t&&r?j[o].reverse:o),i[s[0]]=a}):f(e,function(e){var n=this.direction;n&&t&&!D.test(e)&&(this.direction=j[n].reverse),i[e]=this}),i},b&&p(h,{transition:function(t,i,n){var r,o,a=0,l=t.data("keys")||[],d=!1,c=function(){d||(d=!0,o&&(clearTimeout(o),o=null),t.removeData("abortId").dequeue().css(V,"").css(V),n.complete.call(t))};(n=p({duration:200,ease:"ease-out",complete:null,exclusive:"all"},n)).duration=e.fx?e.fx.speeds[n.duration]||n.duration:n.duration,r=s(0,i),e.merge(l,function(e){var t=[];for(var i in e)t.push(i);return t}(r)),t.data("keys",e.unique(l)).height(),t.css(V,n.exclusive+" "+n.duration+"ms "+n.ease).css(V),t.css(r).css(W),b.event&&(t.one(b.event,c),0!==n.duration&&(a=500)),o=setTimeout(c,n.duration+a),t.data("abortId",o),t.data(O,c)},stopQueue:function(e,t,i){var n,r=e.data("keys"),s=!i&&r,o=e.data(O);return s&&(n=u.getComputedStyles(e[0],r)),o&&o(),s&&e.css(n),e.removeData("keys").stop(t)}});var Y=u.Class.extend({init:function(e,t){this.element=e,this.effects=[],this.options=t,this.restore=[]},run:function(t){var i,n,o,a,l,d,c=t.length,u=this.element,f=this.options,m=e.Deferred(),g={},v={};for(this.effects=t,m.then(e.proxy(this,"complete")),u.data("animating",!0),n=0;n<c;n++)for((i=t[n]).setReverse(f.reverse),i.setOptions(f),this.addRestoreProperties(i.restore),i.prepare(g,v),o=0,d=(l=i.children()).length;o<d;o++)l[o].duration(f.duration).run();for(var k in f.effects)p(v,f.effects[k].properties);for(u.is(":visible")||p(g,{display:u.data("olddisplay")||"block"}),_&&!f.reset&&(a=u.data("targetTransform"))&&(g=p(a,g)),g=s(0,g),_&&!b&&(g=r(g)),u.css(g).css(W),n=0;n<c;n++)t[n].setup();return f.init&&f.init(),u.data("targetTransform",v),h.animate(u,v,p({},f,{complete:m.resolve})),m.promise()},stop:function(){e(this.element).kendoStop(!0,!0)},addRestoreProperties:function(e){for(var t,i=this.element,n=0,r=e.length;n<r;n++)t=e[n],this.restore.push(t),i.data(t)||i.data(t,i.css(t))},restoreCallback:function(){for(var e=this.element,t=0,i=this.restore.length;t<i;t++){var n=this.restore[t];e.css(n,e.data(n))}},complete:function(){var t=0,i=this.element,n=this.options,r=this.effects,s=r.length;for(i.removeData("animating").dequeue(),n.hide&&i.data("olddisplay",i.css("display")).hide(),this.restoreCallback(),y&&!_&&setTimeout(e.proxy(this,"restoreCallback"),0);t<s;t++)r[t].teardown();n.completeCallback&&n.completeCallback(i)}});h.promise=function(e,t){var i,n,r=[],s=new Y(e,t),o=u.parseEffects(t.effects);t.effects=o;for(var l in o)(i=h[a(l)])&&(n=new i(e,o[l].direction),r.push(n));r[0]?s.run(r):(e.is(":visible")||e.css({display:e.data("olddisplay")||"block"}).css("display"),t.init&&t.init(),e.dequeue(),s.complete())},p(h,{animate:function(t,i,s){var o=!1!==s.transition;delete s.transition,b&&"transition"in h&&o?h.transition(t,i,s):_?t.animate(r(i),{queue:!1,show:!1,hide:!1,duration:s.duration,complete:s.complete}):t.each(function(){var t=e(this),r={};f(E,function(e,s){var o,a=i?i[s]+" ":null;if(a){var l=i;if(s in k&&void 0!==i[s])o=a.match(C),_&&p(l,{scale:+o[0]});else if(s in w&&void 0!==i[s]){var d=t.css(B),c="absolute"==d||"fixed"==d;t.data(L)||(c?t.data(L,{top:n(t,"top")||0,left:n(t,"left")||0,bottom:n(t,"bottom"),right:n(t,"right")}):t.data(L,{top:n(t,"marginTop")||0,left:n(t,"marginLeft")||0}));var u=t.data(L);if(o=a.match(C)){var h=s==L+"y"?0:+o[1],f=s==L+"y"?+o[1]:+o[2];c?(isNaN(u.right)?isNaN(h)||p(l,{left:u.left+h}):isNaN(h)||p(l,{right:u.right-h}),isNaN(u.bottom)?isNaN(f)||p(l,{top:u.top+f}):isNaN(f)||p(l,{bottom:u.bottom-f})):(isNaN(h)||p(l,{marginLeft:u.left+h}),isNaN(f)||p(l,{marginTop:u.top+f}))}}!_&&"scale"!=s&&s in l&&delete l[s],l&&p(r,l)}}),v.msie&&delete r.scale,t.animate(r,{queue:!1,show:!1,hide:!1,duration:s.duration,complete:s.complete})})}}),h.animatedPromise=h.promise;var K=u.Class.extend({init:function(e,t){this.element=e,this._direction=t,this.options={},this._additionalEffects=[],this.restore||(this.restore=[])},reverse:function(){return this._reverse=!0,this.run()},play:function(){return this._reverse=!1,this.run()},add:function(e){return this._additionalEffects.push(e),this},direction:function(e){return this._direction=e,this},duration:function(e){return this._duration=e,this},compositeRun:function(){var e=new Y(this.element,{reverse:this._reverse,duration:this._duration}),t=this._additionalEffects.concat([this]);return e.run(t)},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var t,i,n=this.element,o=0,a=this.restore,l=a.length,d=e.Deferred(),c={},u={},f=this.children(),m=f.length;for(d.then(e.proxy(this,"_complete")),n.data("animating",!0),o=0;o<l;o++)t=a[o],n.data(t)||n.data(t,n.css(t));for(o=0;o<m;o++)f[o].duration(this._duration).run();return this.prepare(c,u),n.is(":visible")||p(c,{display:n.data("olddisplay")||"block"}),_&&(i=n.data("targetTransform"))&&(c=p(i,c)),c=s(0,c),_&&!b&&(c=r(c)),n.css(c).css(W),this.setup(),n.data("targetTransform",u),h.animate(n,u,{duration:this._duration,complete:d.resolve}),d.promise()},stop:function(){var t=0,i=this.children(),n=i.length;for(t=0;t<n;t++)i[t].stop();return e(this.element).kendoStop(!0,!0),this},restoreCallback:function(){for(var e=this.element,t=0,i=this.restore.length;t<i;t++){var n=this.restore[t];e.css(n,e.data(n))}},_complete:function(){var t=this.element;t.removeData("animating").dequeue(),this.restoreCallback(),this.shouldHide()&&t.data("olddisplay",t.css("display")).hide(),y&&!_&&setTimeout(e.proxy(this,"restoreCallback"),0),this.teardown()},setOptions:function(e){p(!0,this.options,e)},children:function(){return[]},shouldHide:e.noop,setup:e.noop,prepare:e.noop,teardown:e.noop,directions:[],setReverse:function(e){return this._reverse=e,this}}),Q=["left","right","up","down"],J=["in","out"];l("slideIn",{directions:Q,divisor:function(e){return this.options.divisor=e,this},prepare:function(e,t){var i,n=this.element,r=j[this._direction],s=-r.modifier*(r.vertical?n.outerHeight():n.outerWidth())/(this.options&&this.options.divisor||1)+"px";this._reverse&&(i=e,e=t,t=i),_?(e[r.transition]=s,t[r.transition]="0px"):(e[r.property]=s,t[r.property]="0px")}}),l("tile",{directions:Q,init:function(e,t,i){K.prototype.init.call(this,e,t),this.options={previous:i}},previousDivisor:function(e){return this.options.previousDivisor=e,this},children:function(){var e=this._reverse,t=this.options.previous,i=this.options.previousDivisor||1,n=this._direction,r=[u.fx(this.element).slideIn(n).setReverse(e)];return t&&r.push(u.fx(t).slideIn(j[n].reverse).divisor(i).setReverse(!e)),r}}),d("fade","opacity",1,0),d("zoom","scale",1,.01),l("slideMargin",{prepare:function(e,t){var i,n=this.element,r=this.options,s=n.data("origin"),o=r.offset,a=this._reverse;a||null!==s||n.data("origin",parseFloat(n.css("margin-"+r.axis))),i=n.data("origin")||0,t["margin-"+r.axis]=a?i:i+o}}),l("slideTo",{prepare:function(e,t){var i=this.element,n=this.options.offset.split(","),r=this._reverse;_?(t.translatex=r?0:n[0],t.translatey=r?0:n[1]):(t.left=r?0:n[0],t.top=r?0:n[1]),i.css("left")}}),l("expand",{directions:["horizontal","vertical"],restore:[P],prepare:function(e,t){var i=this.element,n=this.options,r=this._reverse,s="vertical"===this._direction?N:z,o=i[0].style[s],a=i.data(s),l=parseFloat(a||o),d=M(i.css(s,"auto")[s]());e.overflow="hidden",l=n&&n.reset?d||l:l||d,t[s]=(r?0:l)+"px",e[s]=(r?l:0)+"px",void 0===a&&i.data(s,o)},shouldHide:function(){return this._reverse},teardown:function(){var e=this.element,t="vertical"===this._direction?N:z,i=e.data(t);"auto"!=i&&""!==i||setTimeout(function(){e.css(t,"auto").css(t)},0)}});var X={position:"absolute",marginLeft:0,marginTop:0,scale:1};l("transfer",{init:function(e,t){this.element=e,this.options={target:t},this.restore=[]},setup:function(){this.element.appendTo(document.body)},prepare:function(e,t){var i=this.element,n=h.box(i),r=h.box(this.options.target),s=o(i,"scale"),a=h.fillScale(r,n),l=h.transformOrigin(r,n);p(e,X),t.scale=1,i.css(W,"scale(1)").css(W),i.css(W,"scale("+s+")"),e.top=n.top,e.left=n.left,e.transformOrigin=l.x+"px "+l.y+"px",this._reverse?e.scale=a:t.scale=a}});var Z={top:"rect(auto auto $size auto)",bottom:"rect($size auto auto auto)",left:"rect(auto $size auto auto)",right:"rect(auto auto auto $size)"},ee={top:{start:"rotatex(0deg)",end:"rotatex(180deg)"},bottom:{start:"rotatex(-180deg)",end:"rotatex(0deg)"},left:{start:"rotatey(0deg)",end:"rotatey(-180deg)"},right:{start:"rotatey(180deg)",end:"rotatey(0deg)"}};l("turningPage",{directions:Q,init:function(e,t,i){K.prototype.init.call(this,e,t),this._container=i},prepare:function(e,t){var i=this._reverse,n=i?j[this._direction].reverse:this._direction,r=ee[n];e.zIndex=1,this._clipInHalf&&(e.clip=c(this._container,u.directions[n].reverse)),e[U]="hidden",t[W]=$+(i?r.start:r.end),e[W]=$+(i?r.end:r.start)},setup:function(){this._container.append(this.element)},face:function(e){return this._face=e,this},shouldHide:function(){var e=this._reverse,t=this._face;return e&&!t||!e&&t},clipInHalf:function(e){return this._clipInHalf=e,this},temporary:function(){return this.element.addClass("temp-page"),this}}),l("staticPage",{directions:Q,init:function(e,t,i){K.prototype.init.call(this,e,t),this._container=i},restore:["clip"],prepare:function(e,t){var i=this._reverse?j[this._direction].reverse:this._direction;e.clip=c(this._container,i),e.opacity=.999,t.opacity=1},shouldHide:function(){var e=this._reverse,t=this._face;return e&&!t||!e&&t},face:function(e){return this._face=e,this}}),l("pageturn",{directions:["horizontal","vertical"],init:function(e,t,i,n){K.prototype.init.call(this,e,t),this.options={},this.options.face=i,this.options.back=n},children:function(){var e,t=this.options,i="horizontal"===this._direction?"left":"top",n=u.directions[i].reverse,r=this._reverse,s=t.face.clone(!0).removeAttr("id"),o=t.back.clone(!0).removeAttr("id"),a=this.element;return r&&(e=i,i=n,n=e),[u.fx(t.face).staticPage(i,a).face(!0).setReverse(r),u.fx(t.back).staticPage(n,a).setReverse(r),u.fx(s).turningPage(i,a).face(!0).clipInHalf(!0).temporary().setReverse(r),u.fx(o).turningPage(n,a).clipInHalf(!0).temporary().setReverse(r)]},prepare:function(e,t){e[q]="1500px",e.transformStyle="preserve-3d",e.opacity=.999,t.opacity=1},teardown:function(){this.element.find(".temp-page").remove()}}),l("flip",{directions:["horizontal","vertical"],init:function(e,t,i,n){K.prototype.init.call(this,e,t),this.options={},this.options.face=i,this.options.back=n},children:function(){var e,t=this.options,i="horizontal"===this._direction?"left":"top",n=u.directions[i].reverse,r=this._reverse,s=this.element;return r&&(e=i,i=n,n=e),[u.fx(t.face).turningPage(i,s).face(!0).setReverse(r),u.fx(t.back).turningPage(n,s).setReverse(r)]},prepare:function(e){e[q]="1500px",e.transformStyle="preserve-3d"}});var te=!g.mobileOS.android;l("replace",{_before:e.noop,_after:e.noop,init:function(t,i,n){K.prototype.init.call(this,t),this._previous=e(i),this._transitionClass=n},duration:function(){throw new Error("The replace effect does not support duration setting; the effect duration may be customized through the transition class rule")},beforeTransition:function(e){return this._before=e,this},afterTransition:function(e){return this._after=e,this},_both:function(){return e().add(this._element).add(this._previous)},_containerClass:function(){var e=this._direction,t="k-fx k-fx-start k-fx-"+this._transitionClass;return e&&(t+=" k-fx-"+e),this._reverse&&(t+=" k-fx-reverse"),t},complete:function(t){if(!(!this.deferred||t&&e(t.target).is(".km-touch-scrollbar, .km-actionsheet-wrapper"))){var i=this.container;i.removeClass("k-fx-end").removeClass(this._containerClass()).off(b.event,this.completeProxy),this._previous.hide().removeClass("k-fx-current"),this.element.removeClass("k-fx-next"),te&&i.css(P,""),this.isAbsolute||this._both().css(B,""),this.deferred.resolve(),delete this.deferred}},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var t=this,i=t.element,n=t._previous,r=i.parents().filter(n.parents()).first(),s=t._both(),o=e.Deferred(),a=i.css(B);return r.length||(r=i.parent()),this.container=r,this.deferred=o,this.isAbsolute="absolute"==a,this.isAbsolute||s.css(B,"absolute"),te&&(r.css(P),r.css(P,"hidden")),b?(i.addClass("k-fx-hidden"),r.addClass(this._containerClass()),this.completeProxy=e.proxy(this,"complete"),r.on(b.event,this.completeProxy),u.animationFrame(function(){i.removeClass("k-fx-hidden").addClass("k-fx-next"),n.css("display","").addClass("k-fx-current"),t._before(n,i),u.animationFrame(function(){r.removeClass("k-fx-start").addClass("k-fx-end"),t._after(n,i)})})):this.complete(),o.promise()},stop:function(){this.complete()}});var ie=u.Class.extend({init:function(){this._tickProxy=m(this._tick,this),this._started=!1},tick:e.noop,done:e.noop,onEnd:e.noop,onCancel:e.noop,start:function(){this.enabled()&&(this.done()?this.onEnd():(this._started=!0,u.animationFrame(this._tickProxy)))},enabled:function(){return!0},cancel:function(){this._started=!1,this.onCancel()},_tick:function(){this._started&&(this.tick(),this.done()?(this._started=!1,this.onEnd()):u.animationFrame(this._tickProxy))}}),ne=ie.extend({init:function(e){p(this,e),ie.fn.init.call(this)},done:function(){return this.timePassed()>=this.duration},timePassed:function(){return Math.min(this.duration,new Date-this.startDate)},moveTo:function(e){var t=this.movable;this.initial=t[this.axis],this.delta=e.location-this.initial,this.duration="number"==typeof e.duration?e.duration:300,this.tick=this._easeProxy(e.ease),this.startDate=new Date,this.start()},_easeProxy:function(e){var t=this;return function(){t.movable.moveAxis(t.axis,e(t.timePassed(),t.initial,t.delta,t.duration))}}});p(ne,{easeOutExpo:function(e,t,i,n){return e==n?t+i:i*(1-Math.pow(2,-10*e/n))+t},easeOutBack:function(e,t,i,n,r){return r=1.70158,i*((e=e/n-1)*e*((r+1)*e+r)+1)+t}}),h.Animation=ie,h.Transition=ne,h.createEffect=l,h.box=function(t){var i=(t=e(t)).offset();return i.width=t.outerWidth(),i.height=t.outerHeight(),i},h.transformOrigin=function(e,t){var i=(e.left-t.left)*t.width/(t.width-e.width),n=(e.top-t.top)*t.height/(t.height-e.height);return{x:isNaN(i)?0:i,y:isNaN(n)?0:n}},h.fillScale=function(e,t){return Math.min(e.width/t.width,e.height/t.height)},h.fitScale=function(e,t){return Math.max(e.width/t.width,e.height/t.height)}}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.view",["kendo.core","kendo.binder","kendo.fx"],function(){return function(e,t){var i=window.kendo,n=i.Observable,r=/unrecognized expression/,s=n.extend({init:function(e,t){t=t||{},n.fn.init.call(this),this.content=e,this.id=i.guid(),this.tagName=t.tagName||"div",this.model=t.model,this._wrap=!1!==t.wrap,this._evalTemplate=t.evalTemplate||!1,this._fragments={},this.bind(["init","show","hide","transitionStart","transitionEnd"],t)},render:function(t){var n=!this.element;return n&&(this.element=this._createElement()),t&&e(t).append(this.element),n&&(i.bind(this.element,this.model),this.trigger("init")),t&&(this._eachFragment("attach"),this.trigger("show")),this.element},clone:function(){return new o(this)},triggerBeforeShow:function(){return!0},triggerBeforeHide:function(){return!0},showStart:function(){this.element.css("display","")},showEnd:function(){},hideEnd:function(){this.hide()},beforeTransition:function(e){this.trigger("transitionStart",{type:e})},afterTransition:function(e){this.trigger("transitionEnd",{type:e})},hide:function(){this._eachFragment("detach"),this.element.detach(),this.trigger("hide")},destroy:function(){var e=this.element;e&&(i.unbind(e),i.destroy(e),e.remove())},fragments:function(t){e.extend(this._fragments,t)},_eachFragment:function(e){for(var t in this._fragments)this._fragments[t][e](this,t)},_createElement:function(){var t,n,s=this,o="<"+s.tagName+" />";try{"SCRIPT"===(n=e(document.getElementById(s.content)||s.content))[0].tagName&&(n=n.html())}catch(e){r.test(e.message)&&(n=s.content)}if("string"==typeof n)n=n.replace(/^\s+|\s+$/g,""),s._evalTemplate&&(n=i.template(n)(s.model||{})),t=e(o).append(n),s._wrap||(t=t.contents());else{if(t=n,s._evalTemplate){var a=e(i.template(e("<div />").append(t.clone(!0)).html())(s.model||{}));e.contains(document,t[0])&&t.replaceWith(a),t=a}s._wrap&&(t=t.wrapAll(o).parent())}return t}}),o=i.Class.extend({init:function(t){e.extend(this,{element:t.element.clone(!0),transition:t.transition,id:t.id}),t.element.parent().append(this.element)},hideEnd:function(){this.element.remove()},beforeTransition:e.noop,afterTransition:e.noop}),a=s.extend({init:function(e,t){s.fn.init.call(this,e,t),this.containers={}},container:function(e){var t=this.containers[e];return t||(t=this._createContainer(e),this.containers[e]=t),t},showIn:function(e,t,i){this.container(e).show(t,i)},_createContainer:function(e){var t,i=this.render(),n=i.find(e);if(!n.length&&i.is(e)){if(!i.is(e))throw new Error("can't find a container with the specified "+e+" selector");n=i}return(t=new c(n)).bind("accepted",function(e){e.view.render(n)}),t}}),l=s.extend({attach:function(e,t){e.element.find(t).replaceWith(this.render())},detach:function(){}}),d=/^(\w+)(:(\w+))?( (\w+))?$/,c=n.extend({init:function(e){n.fn.init.call(this),this.container=e,this.history=[],this.view=null,this.running=!1},after:function(){this.running=!1,this.trigger("complete",{view:this.view}),this.trigger("after")},end:function(){this.view.showEnd(),this.previous.hideEnd(),this.after()},show:function(e,t,n){if(!e.triggerBeforeShow()||this.view&&!this.view.triggerBeforeHide())return this.trigger("after"),!1;n=n||e.id;var r=this,s=e===r.view?e.clone():r.view,o=r.history,a=(o[o.length-2]||{}).id===n,l=t||(a?o[o.length-1].transition:e.transition),c=function(e){if(!e)return{};var t=e.match(d)||[];return{type:t[1],direction:t[3],reverse:"reverse"===t[5]}}(l);return r.running&&r.effect.stop(),"none"===l&&(l=null),r.trigger("accepted",{view:e}),r.view=e,r.previous=s,r.running=!0,a?o.pop():o.push({id:n,transition:l}),s?(l&&i.effects.enabled?(e.element.addClass("k-fx-hidden"),e.showStart(),a&&!t&&(c.reverse=!c.reverse),r.effect=i.fx(e.element).replace(s.element,c.type).beforeTransition(function(){e.beforeTransition("show"),s.beforeTransition("hide")}).afterTransition(function(){e.afterTransition("show"),s.afterTransition("hide")}).direction(c.direction).setReverse(c.reverse),r.effect.run().then(function(){r.end()})):(e.showStart(),r.end()),!0):(e.showStart(),e.showEnd(),r.after(),!0)}});i.ViewContainer=c,i.Fragment=l,i.Layout=a,i.View=s,i.ViewClone=o}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.dom",["kendo.core"],function(){return function(e){function t(){this.node=null}function i(){}function n(e,t,i){this.nodeName=e,this.attr=t||{},this.children=i||[]}function r(e){this.nodeValue=e}function s(e){this.html=e}function o(e){return new s(e)}function a(e,t,i){return new n(e,t,i)}function l(e){return new r(e)}function d(e){this.root=e,this.children=[]}t.prototype={remove:function(){this.node.parentNode.removeChild(this.node),this.attr={}},attr:{},text:function(){return""}},i.prototype={nodeName:"#null",attr:{style:{}},children:[],remove:function(){}};var c=new i;(n.prototype=new t).appendTo=function(e){for(var t=document.createElement(this.nodeName),i=this.children,n=0;n<i.length;n++)i[n].render(t,c);return e.appendChild(t),t},n.prototype.render=function(e,t){var i;if(t.nodeName!==this.nodeName)t.remove(),i=this.appendTo(e);else{i=t.node;var n,r=this.children,s=r.length,o=t.children,a=o.length;if(Math.abs(a-s)>2)return void this.render({appendChild:function(i){e.replaceChild(i,t.node)}},c);for(n=0;n<s;n++)r[n].render(i,o[n]||c);for(n=s;n<a;n++)o[n].remove()}this.node=i,this.syncAttributes(t.attr),this.removeAttributes(t.attr)},n.prototype.syncAttributes=function(e){var t=this.attr;for(var i in t){var n=t[i],r=e[i];"style"===i?this.setStyle(n,r):n!==r&&this.setAttribute(i,n,r)}},n.prototype.setStyle=function(e,t){var i,n=this.node;if(t)for(i in e)e[i]!==t[i]&&(n.style[i]=e[i]);else for(i in e)n.style[i]=e[i]},n.prototype.removeStyle=function(e){var t=this.attr.style||{},i=this.node;for(var n in e)void 0===t[n]&&(i.style[n]="")},n.prototype.removeAttributes=function(e){var t=this.attr;for(var i in e)"style"===i?this.removeStyle(e.style):void 0===t[i]&&this.removeAttribute(i)},n.prototype.removeAttribute=function(e){var t=this.node;"style"===e?t.style.cssText="":"className"===e?t.className="":t.removeAttribute(e)},n.prototype.setAttribute=function(e,t){var i=this.node;void 0!==i[e]?i[e]=t:i.setAttribute(e,t)},n.prototype.text=function(){for(var e="",t=0;t<this.children.length;++t)e+=this.children[t].text();return e},(r.prototype=new t).nodeName="#text",r.prototype.render=function(e,t){var i;t.nodeName!==this.nodeName?(t.remove(),i=document.createTextNode(this.nodeValue),e.appendChild(i)):(i=t.node,this.nodeValue!==t.nodeValue&&(i.nodeValue=this.nodeValue)),this.node=i},r.prototype.text=function(){return this.nodeValue},s.prototype={nodeName:"#html",attr:{},remove:function(){for(var e=0;e<this.nodes.length;e++)this.nodes[e].parentNode.removeChild(this.nodes[e])},render:function(e,t){if(t.nodeName!==this.nodeName||t.html!==this.html){t.remove();var i=e.lastChild;!function(e,t){for(u.innerHTML=t;u.firstChild;)e.appendChild(u.firstChild)}(e,this.html),this.nodes=[];for(var n=i?i.nextSibling:e.firstChild;n;n=n.nextSibling)this.nodes.push(n)}else this.nodes=t.nodes.slice(0)}};var u=document.createElement("div");d.prototype={html:o,element:a,text:l,render:function(e){var t,i,n=this.children;for(t=0,i=e.length;t<i;t++)e[t].render(this.root,n[t]||c);for(t=i;t<n.length;t++)n[t].remove();this.children=e}},e.dom={html:o,text:l,element:a,Tree:d,Node:t}}(window.kendo),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.ooxml",["kendo.core"],function(){return function(e,t){function i(e){var t=Math.floor(e/26)-1;return(t>=0?i(t):"")+String.fromCharCode(65+e%26)}function n(e,t){return i(t)+(e+1)}function r(e,t){return i(t)+"$"+(e+1)}function s(e){return(e.frozenRows||(e.freezePane||{}).rowSplit||1)-1}function o(e){return e.length<6&&(e=e.replace(/(\w)/g,function(e,t){return t+t})),(e=e.substring(1).toUpperCase()).length<8&&(e="FF"+e),e}function a(e,t){var i="";return t&&t.size&&(i+="<"+e+' style="'+function(e){var t="thin";return 2===e?t="medium":3===e&&(t="thick"),t}(t.size)+'">',t.color&&(i+='<color rgb="'+o(t.color)+'"/>'),i+="</"+e+">"),i}var l=t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dc:creator>${creator}</dc:creator><cp:lastModifiedBy>${lastModifiedBy}</cp:lastModifiedBy><dcterms:created xsi:type="dcterms:W3CDTF">${created}</dcterms:created><dcterms:modified xsi:type="dcterms:W3CDTF">${modified}</dcterms:modified></cp:coreProperties>'),d=t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"><Application>Microsoft Excel</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size="2" baseType="variant"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>${sheets.length}</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size="${sheets.length}" baseType="lpstr"># for (var idx = 0; idx < sheets.length; idx++) { ## if (sheets[idx].options.title) { #<vt:lpstr>${sheets[idx].options.title}</vt:lpstr># } else { #<vt:lpstr>Sheet${idx+1}</vt:lpstr># } ## } #</vt:vector></TitlesOfParts><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>14.0300</AppVersion></Properties>'),c=t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="xml" ContentType="application/xml" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/># for (var idx = 1; idx <= count; idx++) { #<Override PartName="/xl/worksheets/sheet${idx}.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /># } #<Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml" /><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml" /></Types>'),u=t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="9303" /><workbookPr defaultThemeVersion="124226" /><bookViews><workbookView xWindow="240" yWindow="45" windowWidth="18195" windowHeight="7995" /></bookViews><sheets># for (var idx = 0; idx < sheets.length; idx++) { ## var options = sheets[idx].options; ## var name = options.name || options.title ## if (name) { #<sheet name="${name}" sheetId="${idx+1}" r:id="rId${idx+1}" /># } else { #<sheet name="Sheet${idx+1}" sheetId="${idx+1}" r:id="rId${idx+1}" /># } ## } #</sheets># if (definedNames.length) { #<definedNames> # for (var di = 0; di < definedNames.length; di++) { #<definedName name="_xlnm._FilterDatabase" hidden="1" localSheetId="${definedNames[di].localSheetId}">${definedNames[di].name}!$${definedNames[di].from}:$${definedNames[di].to}</definedName> # } #</definedNames># } #<calcPr calcId="145621" /></workbook>'),h=t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" mc:Ignorable="x14ac"><dimension ref="A1" /><sheetViews><sheetView #if(index==0) {# tabSelected="1" #}# workbookViewId="0" #if (!showGridLines) {# showGridLines="0" #}#># if (frozenRows || frozenColumns) { #<pane state="frozen"# if (frozenColumns) { # xSplit="${frozenColumns}"# } ## if (frozenRows) { # ySplit="${frozenRows}"# } # topLeftCell="${String.fromCharCode(65 + (frozenColumns || 0))}${(frozenRows || 0)+1}"/># } #</sheetView></sheetViews><sheetFormatPr x14ac:dyDescent="0.25" defaultRowHeight="#= defaults.rowHeight ? defaults.rowHeight * 0.75 : 15 #" # if (defaults.columnWidth) { # defaultColWidth="#= kendo.ooxml.toWidth(defaults.columnWidth) #" # } # /># if (columns && columns.length > 0) { #<cols># for (var ci = 0; ci < columns.length; ci++) { ## var column = columns[ci]; ## var columnIndex = typeof column.index === "number" ? column.index + 1 : (ci + 1); ## if (column.width === 0) { #<col min="${columnIndex}" max="${columnIndex}" hidden="1" customWidth="1" /># } else if (column.width) { #<col min="${columnIndex}" max="${columnIndex}" customWidth="1"# if (column.autoWidth) { # width="${((column.width*7+5)/7*256)/256}" bestFit="1"# } else { # width="#= kendo.ooxml.toWidth(column.width) #" # } #/># } ## } #</cols># } #<sheetData># for (var ri = 0; ri < data.length; ri++) { ## var row = data[ri]; ## var rowIndex = typeof row.index === "number" ? row.index + 1 : (ri + 1); #<row r="${rowIndex}" x14ac:dyDescent="0.25" # if (row.height) { # ht="#= kendo.ooxml.toHeight(row.height) #" customHeight="1" # } # ># for (var ci = 0; ci < row.data.length; ci++) { ## var cell = row.data[ci];#<c r="#=cell.ref#"# if (cell.style) { # s="#=cell.style#" # } ## if (cell.type) { # t="#=cell.type#"# } #># if (cell.formula != null) { #<f>${cell.formula}</f># } ## if (cell.value != null) { #<v>${cell.value}</v># } #</c># } #</row># } #</sheetData># if (hyperlinks.length) { #<hyperlinks># for (var hi = 0; hi < hyperlinks.length; hi++) { #<hyperlink ref="${hyperlinks[hi].ref}" r:id="rId${hi}"/># } #</hyperlinks># } ## if (filter) { #<autoFilter ref="${filter.from}:${filter.to}"/># } ## if (mergeCells.length) { #<mergeCells count="${mergeCells.length}"># for (var ci = 0; ci < mergeCells.length; ci++) { #<mergeCell ref="${mergeCells[ci]}"/># } #</mergeCells># } #<pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" /></worksheet>'),f=t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"># for (var idx = 1; idx <= count; idx++) { #<Relationship Id="rId${idx}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet${idx}.xml" /># } #<Relationship Id="rId${count+1}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml" /><Relationship Id="rId${count+2}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml" /></Relationships>'),p=t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"># for (var i = 0; i < hyperlinks.length; i++) { #<Relationship Id="rId${i}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink" Target="${hyperlinks[i].target}" TargetMode="External" /># } #</Relationships>'),m=t.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="${count}" uniqueCount="${uniqueCount}"># for (var index in indexes) { #<si><t>${index.substring(1)}</t></si># } #</sst>'),g=t.template('<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="${formats.length}"># for (var fi = 0; fi < formats.length; fi++) { ## var format = formats[fi]; #<numFmt formatCode="${format.format}" numFmtId="${165+fi}" /># } #</numFmts><fonts count="${fonts.length+1}" x14ac:knownFonts="1"><font><sz val="11" /><color theme="1" /><name val="Calibri" /><family val="2" /><scheme val="minor" /></font># for (var fi = 0; fi < fonts.length; fi++) { ## var font = fonts[fi]; #<font># if (font.fontSize) { #<sz val="${font.fontSize}" /># } else { #<sz val="11" /># } ## if (font.bold) { #<b/># } ## if (font.italic) { #<i/># } ## if (font.underline) { #<u/># } ## if (font.color) { #<color rgb="${font.color}" /># } else { #<color theme="1" /># } ## if (font.fontFamily) { #<name val="${font.fontFamily}" /><family val="2" /># } else { #<name val="Calibri" /><family val="2" /><scheme val="minor" /># } #</font># } #</fonts><fills count="${fills.length+2}"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill># for (var fi = 0; fi < fills.length; fi++) { ## var fill = fills[fi]; ## if (fill.background) { #<fill><patternFill patternType="solid"><fgColor rgb="${fill.background}"/></patternFill></fill># } ## } #</fills><borders count="${borders.length+1}"><border><left/><right/><top/><bottom/><diagonal/></border># for (var bi = 0; bi < borders.length; bi++) { ##= kendo.ooxml.borderTemplate(borders[bi]) ## } #</borders><cellStyleXfs count="1"><xf borderId="0" fillId="0" fontId="0" /></cellStyleXfs><cellXfs count="${styles.length+1}"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/># for (var si = 0; si < styles.length; si++) { ## var style = styles[si]; #<xf xfId="0"# if (style.fontId) { # fontId="${style.fontId}" applyFont="1"# } ## if (style.fillId) { # fillId="${style.fillId}" applyFill="1"# } ## if (style.numFmtId) { # numFmtId="${style.numFmtId}" applyNumberFormat="1"# } ## if (style.textAlign || style.verticalAlign || style.wrap) { # applyAlignment="1"# } ## if (style.borderId) { # borderId="${style.borderId}" applyBorder="1"# } #># if (style.textAlign || style.verticalAlign || style.wrap) { #<alignment# if (style.textAlign) { # horizontal="${style.textAlign}"# } ## if (style.verticalAlign) { # vertical="${style.verticalAlign}"# } ## if (style.wrap) { # wrapText="1"# } #/># } #</xf># } #</cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleMedium9" /></styleSheet>'),v=new Date(1900,0,0),_=t.Class.extend({init:function(e,t,i,n){this.options=e,this._strings=t,this._styles=i,this._borders=n},relsToXML:function(){var e=this.options.hyperlinks||[];return e.length?p({hyperlinks:e}):""},toXML:function(e){this._mergeCells=this.options.mergedCells||[],this._hyperlinks=this.options.hyperlinks||[],this._rowsByIndex=[];for(var t=this.options.rows||[],i=0;i<t.length;i++){var r=t[i].index;"number"!=typeof r&&(r=i),t[i].index=r,this._rowsByIndex[r]=t[i]}var o=[];for(i=0;i<t.length;i++)o.push(this._row(t[i],i));o.sort(function(e,t){return e.index-t.index});var a=this.options.filter;a&&"number"==typeof a.from&&"number"==typeof a.to&&(a={from:n(s(this.options),a.from),to:n(s(this.options),a.to)});var l=this.options.freezePane||{};return h({frozenColumns:this.options.frozenColumns||l.colSplit,frozenRows:this.options.frozenRows||l.rowSplit,columns:this.options.columns,defaults:this.options.defaults||{},data:o,index:e,mergeCells:this._mergeCells,filter:a,showGridLines:this.options.showGridLines,hyperlinks:this._hyperlinks})},_row:function(t){var i=[],n=0,r=this,s={};return e.each(t.cells,function(o,a){if(a){var l;"number"==typeof a.index?(l=a.index,n=l-o):l=o+n,a.colSpan&&(n+=a.colSpan-1);var d=r._cell(a,t.index,l);e.each(d,function(e,t){s[t.ref]||(s[t.ref]=!0,i.push(t))})}}),{data:i,height:t.height,index:t.index}},_lookupString:function(e){var t="$"+e,i=this._strings.indexes[t];return void 0!==i?e=i:(e=this._strings.indexes[t]=this._strings.uniqueCount,this._strings.uniqueCount++),this._strings.count++,e},_lookupStyle:function(i){var n=t.stringify(i);if("{}"==n)return 0;var r=e.inArray(n,this._styles);return r<0&&(r=this._styles.push(n)-1),r+1},_lookupBorder:function(i){var n=t.stringify(i);if("{}"!=n){var r=e.inArray(n,this._borders);return r<0&&(r=this._borders.push(n)-1),r+1}},_cell:function(e,i,r){if(!e)return[];var s=e.value,o={};e.borderLeft&&(o.left=e.borderLeft),e.borderRight&&(o.right=e.borderRight),e.borderTop&&(o.top=e.borderTop),e.borderBottom&&(o.bottom=e.borderBottom),o=this._lookupBorder(o);var a={bold:e.bold,color:e.color,background:e.background,italic:e.italic,underline:e.underline,fontFamily:e.fontFamily||e.fontName,fontSize:e.fontSize,format:e.format,textAlign:e.textAlign||e.hAlign,verticalAlign:e.verticalAlign||e.vAlign,wrap:e.wrap,borderId:o},l=(this.options.columns||[])[r],d=typeof s;if(l&&l.autoWidth){var c=s;"number"===d&&(c=t.toString(s,e.format)),l.width=Math.max(l.width||0,(c+"").length)}if("string"===d)s=this._lookupString(s),d="s";else if("number"===d)d="n";else if("boolean"===d)d="b",s=+s;else if(s&&s.getTime){d=null;var u=(s.getTimezoneOffset()-v.getTimezoneOffset())*t.date.MS_PER_MINUTE;s=(s-v-u)/t.date.MS_PER_DAY+1,a.format||(a.format="mm-dd-yy")}else d=null,s=null;a=this._lookupStyle(a);var h=[],f=n(i,r);h.push({value:s,formula:e.formula,type:d,style:a,ref:f});var p,m=e.colSpan||1,g=e.rowSpan||1;if(m>1||g>1){this._mergeCells.push(f+":"+n(i+g-1,r+m-1));for(var _=i+1;_<i+g;_++)for(this._rowsByIndex[_]||(this._rowsByIndex[_]={index:_,cells:[]}),p=r;p<r+m;p++)this._rowsByIndex[_].cells.splice(p,0,{});for(p=r+1;p<r+m;p++)h.push({ref:n(i,p)})}return h}}),b={General:0,0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49,"[$-404]e/m/d":27,"m/d/yy":30,t0:59,"t0.00":60,"t#,##0":61,"t#,##0.00":62,"t0%":67,"t0.00%":68,"t# ?/?":69,"t# ??/??":70},k=t.Class.extend({init:function(t){this.options=t||{},this._strings={indexes:{},count:0,uniqueCount:0},this._styles=[],this._borders=[],this._sheets=e.map(this.options.sheets||[],e.proxy(function(e){return e.defaults=this.options,new _(e,this._strings,this._styles,this._borders)},this))},toDataURL:function(){if("undefined"==typeof JSZip)throw new Error("JSZip not found. Check http://docs.telerik.com/kendo-ui/framework/excel/introduction#requirements for more details.");var i=new JSZip,n=i.folder("docProps");n.file("core.xml",l({creator:this.options.creator||"Kendo UI",lastModifiedBy:this.options.creator||"Kendo UI",created:this.options.date||(new Date).toJSON(),modified:this.options.date||(new Date).toJSON()}));var a=this._sheets.length;n.file("app.xml",d({sheets:this._sheets})),i.folder("_rels").file(".rels",'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>');var h=i.folder("xl");h.folder("_rels").file("workbook.xml.rels",f({count:a})),h.file("workbook.xml",u({sheets:this._sheets,definedNames:e.map(this._sheets,function(e,t){var i=e.options,n=i.filter;if(n&&void 0!==n.from&&void 0!==n.to)return{localSheetId:t,name:i.name||i.title||"Sheet"+(t+1),from:r(s(i),n.from),to:r(s(i),n.to)}})}));for(var p=h.folder("worksheets"),v=p.folder("_rels"),_=0;_<a;_++){var k=this._sheets[_],w=t.format("sheet{0}.xml",_+1),y=k.relsToXML();y&&v.file(w+".rels",y),p.file(w,k.toXML(_))}var x=e.map(this._borders,e.parseJSON),C=e.map(this._styles,e.parseJSON),S=function(e){return e.underline||e.bold||e.italic||e.color||e.fontFamily||e.fontSize},T=e.map(C,function(e){if(e.color&&(e.color=o(e.color)),S(e))return e}),D=e.map(C,function(e){if(e.format&&void 0===b[e.format])return e}),F=e.map(C,function(e){if(e.background)return e.background=o(e.background),e});return h.file("styles.xml",g({fonts:T,fills:F,formats:D,borders:x,styles:e.map(C,function(t){var i={};return S(t)&&(i.fontId=e.inArray(t,T)+1),t.background&&(i.fillId=e.inArray(t,F)+2),i.textAlign=t.textAlign,i.verticalAlign=t.verticalAlign,i.wrap=t.wrap,i.borderId=t.borderId,t.format&&(void 0!==b[t.format]?i.numFmtId=b[t.format]:i.numFmtId=165+e.inArray(t,D)),i})})),h.file("sharedStrings.xml",m(this._strings)),i.file("[Content_Types].xml",c({count:a})),"data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,"+i.generate({compression:"DEFLATE"})}});t.ooxml={Workbook:k,Worksheet:_,toWidth:function(e){return(e/7*100+.5)/100},toHeight:function(e){return.75*e},borderTemplate:function(e){return"<border>"+a("left",e.left)+a("right",e.right)+a("top",e.top)+a("bottom",e.bottom)+"</border>"}}}(kendo.jQuery,kendo),kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.excel",["kendo.core","kendo.data","kendo.ooxml"],function(){return function(e,t){t.ExcelExporter=t.Class.extend({init:function(i){i.columns=this._trimColumns(i.columns||[]),this.allColumns=e.map(this._leafColumns(i.columns||[]),this._prepareColumn),this.columns=e.grep(this.allColumns,function(e){return!e.hidden}),this.options=i;var n=i.dataSource;if(n instanceof t.data.DataSource){this.dataSource=new n.constructor(e.extend({},n.options,{page:i.allPages?0:n.page(),filter:n.filter(),pageSize:i.allPages?n.total():n.pageSize(),sort:n.sort(),group:n.group(),aggregate:n.aggregate()}));var r=n.data();if(r.length>0){this.dataSource._data=r;var s=this.dataSource.transport;n._isServerGrouped()&&s.options&&s.options.data&&(s.options.data=null)}}else this.dataSource=t.data.DataSource.create(n)},_trimColumns:function(t){var i=this;return e.grep(t,function(e){var t=!!e.field;return!t&&e.columns&&(t=i._trimColumns(e.columns).length>0),t})},_leafColumns:function(e){for(var t=[],i=0;i<e.length;i++)e[i].columns?t=t.concat(this._leafColumns(e[i].columns)):t.push(e[i]);return t},workbook:function(){return e.Deferred(e.proxy(function(t){this.dataSource.fetch().then(e.proxy(function(){var e={sheets:[{columns:this._columns(),rows:this._rows(),freezePane:this._freezePane(),filter:this._filter()}]};t.resolve(e,this.dataSource.view())},this))},this)).promise()},_prepareColumn:function(i){if(i.field){var n=function(e){return e.get(i.field)},r=null;return i.values&&(r={},e.each(i.values,function(){r[this.value]=this.text}),n=function(e){return r[e.get(i.field)]}),e.extend({},i,{value:n,values:r,groupHeaderTemplate:t.template(i.groupHeaderTemplate||"#= title #: #= value #"),groupFooterTemplate:i.groupFooterTemplate?t.template(i.groupFooterTemplate):null,footerTemplate:i.footerTemplate?t.template(i.footerTemplate):null})}},_filter:function(){if(!this.options.filterable)return null;var e=this._depth();return{from:e,to:e+this.columns.length-1}},_dataRow:function(t,i,n){this._hierarchical()&&(i=this.dataSource.level(t)+1);for(var r=[],s=0;s<i;s++)r[s]={background:"#dfdfdf",color:"#333"};if(n&&t.items){var o=e.grep(this.allColumns,function(e){return e.field==t.field})[0],a=o&&o.title?o.title:t.field,l=o?o.groupHeaderTemplate:null,d=a+": "+t.value,c=e.extend({title:a,field:t.field,value:o&&o.values?o.values[t.value]:t.value,aggregates:t.aggregates},t.aggregates[t.field]);l&&(d=l(c)),r.push({value:d,background:"#dfdfdf",color:"#333",colSpan:this.columns.length+n-i});var u=this._dataRows(t.items,i+1);return u.unshift({type:"group-header",cells:r}),u.concat(this._footer(t))}for(var h=[],f=0;f<this.columns.length;f++)h[f]=this._cell(t,this.columns[f]);return this._hierarchical()&&(h[0].colSpan=n-i+1),[{type:"data",cells:r.concat(h)}]},_dataRows:function(e,t){for(var i=this._depth(),n=[],r=0;r<e.length;r++)n.push.apply(n,this._dataRow(e[r],t,i));return n},_footer:function(t){var i=[],n=!1,r=e.map(this.columns,e.proxy(function(i){return i.groupFooterTemplate?(n=!0,{background:"#dfdfdf",color:"#333",value:i.groupFooterTemplate(e.extend({},this.dataSource.aggregates(),t.aggregates,t.aggregates[i.field]))}):{background:"#dfdfdf",color:"#333"}},this));return n&&i.push({type:"group-footer",cells:e.map(new Array(this.dataSource.group().length),function(){return{background:"#dfdfdf",color:"#333"}}).concat(r)}),i},_isColumnVisible:function(e){return this._visibleColumns([e]).length>0&&(e.field||e.columns)},_visibleColumns:function(t){var i=this;return e.grep(t,function(e){var t=!e.hidden;return t&&e.columns&&(t=i._visibleColumns(e.columns).length>0),t})},_headerRow:function(t,i){var n=e.map(t.cells,function(e){return{background:"#7a7a7a",color:"#fff",value:e.title,colSpan:e.colSpan>1?e.colSpan:1,rowSpan:t.rowSpan>1&&!e.colSpan?t.rowSpan:1}});return this._hierarchical()&&(n[0].colSpan=this._depth()+1),{type:"header",cells:e.map(new Array(i.length),function(){return{background:"#7a7a7a",color:"#fff"}}).concat(n)}},_prependHeaderRows:function(e){var t=this.dataSource.group(),i=[{rowSpan:1,cells:[],index:0}];this._prepareHeaderRows(i,this.options.columns);for(var n=i.length-1;n>=0;n--)e.unshift(this._headerRow(i[n],t))},_prepareHeaderRows:function(e,t,i,n){for(var r,s,o=n||e[e.length-1],a=e[o.index+1],l=0,d=0;d<t.length;d++)r=t[d],this._isColumnVisible(r)&&(s={title:r.title||r.field,colSpan:0},o.cells.push(s),r.columns&&r.columns.length&&(a||(a={rowSpan:0,cells:[],index:e.length},e.push(a)),s.colSpan=this._trimColumns(this._visibleColumns(r.columns)).length,this._prepareHeaderRows(e,r.columns,s,a),l+=s.colSpan-1,o.rowSpan=e.length-o.index));i&&(i.colSpan+=l)},_rows:function(){var t=this.dataSource.group(),i=this._dataRows(this.dataSource.view(),0);if(this.columns.length){this._prependHeaderRows(i);var n=!1,r=e.map(this.columns,e.proxy(function(t){if(t.footerTemplate){n=!0;var i=this.dataSource.aggregates();return{background:"#dfdfdf",color:"#333",value:t.footerTemplate(e.extend({},i,i[t.field]))}}return{background:"#dfdfdf",color:"#333"}},this));n&&i.push({type:"footer",cells:e.map(new Array(t.length),function(){return{background:"#dfdfdf",color:"#333"}}).concat(r)})}return i},_headerDepth:function(e){for(var t=0,i=0;i<e.length;i++)if(e[i].columns){var n=this._headerDepth(e[i].columns);n>t&&(t=n)}return 1+t},_freezePane:function(){var t=this._visibleColumns(this.options.columns||[]),i=this._visibleColumns(this._trimColumns(this._leafColumns(e.grep(t,function(e){return e.locked})))).length;return{rowSplit:this._headerDepth(t),colSplit:i?i+this.dataSource.group().length:0}},_cell:function(e,t){return{value:t.value(e)}},_hierarchical:function(){return this.options.hierarchy&&this.dataSource.level},_depth:function(){var e,t,i,n=this.dataSource,r=0;if(this._hierarchical()){for(e=n.view(),t=0;t<e.length;t++)(i=n.level(e[t]))>r&&(r=i);r++}else r=n.group().length;return r},_columns:function(){var t=this._depth();return e.map(new Array(t),function(){return{width:20}}).concat(e.map(this.columns,function(e){return{width:parseInt(e.width,10),autoWidth:!e.width}}))}}),t.ExcelMixin={extend:function(t){t.events.push("excelExport"),t.options.excel=e.extend(t.options.excel,this.options),t.saveAsExcel=this.saveAsExcel},options:{proxyURL:"",allPages:!1,filterable:!1,fileName:"Export.xlsx"},saveAsExcel:function(){var i=this.options.excel||{};new t.ExcelExporter({columns:this.columns,dataSource:this.dataSource,allPages:i.allPages,filterable:i.filterable,hierarchy:i.hierarchy}).workbook().then(e.proxy(function(e,n){if(!this.trigger("excelExport",{workbook:e,data:n})){var r=new t.ooxml.Workbook(e);t.saveAs({dataURI:r.toDataURL(),fileName:e.fileName||i.fileName,proxyURL:i.proxyURL,forceProxy:i.forceProxy})}},this))}}}(kendo.jQuery,kendo),kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.data.signalr",["kendo.data"],function(){return function(e){var t=kendo.data.RemoteTransport.extend({init:function(e){var t=e&&e.signalr?e.signalr:{},i=t.promise;if(!i)throw new Error('The "promise" option must be set.');if("function"!=typeof i.done||"function"!=typeof i.fail)throw new Error('The "promise" option must be a Promise.');this.promise=i;var n=t.hub;if(!n)throw new Error('The "hub" option must be set.');if("function"!=typeof n.on||"function"!=typeof n.invoke)throw new Error('The "hub" option is not a valid SignalR hub proxy.');this.hub=n,kendo.data.RemoteTransport.fn.init.call(this,e)},push:function(e){var t=this.options.signalr.client||{};t.create&&this.hub.on(t.create,e.pushCreate),t.update&&this.hub.on(t.update,e.pushUpdate),t.destroy&&this.hub.on(t.destroy,e.pushDestroy)},_crud:function(t,i){var n=this.hub,r=this.options.signalr.server;if(!r||!r[i])throw new Error(kendo.format('The "server.{0}" option must be set.',i));var s=[r[i]],o=this.parameterMap(t.data,i);e.isEmptyObject(o)||s.push(o),this.promise.done(function(){n.invoke.apply(n,s).done(t.success).fail(t.error)})},read:function(e){this._crud(e,"read")},create:function(e){this._crud(e,"create")},update:function(e){this._crud(e,"update")},destroy:function(e){this._crud(e,"destroy")}});e.extend(!0,kendo.data,{transports:{signalr:t}})}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.color",["kendo.core"],function(){!function(e,t,i){function n(e,r){var s,l;if(null==e||"none"==e)return null;if(e instanceof d)return e;if(e=e.toLowerCase(),s=a.exec(e))return e="transparent"==s[1]?new c(1,1,1,0):n(o.namedColors[s[1]],r),e.match=[s[1]],e;if((s=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\b/i.exec(e))?l=new u(i(s[1],16),i(s[2],16),i(s[3],16),1):(s=/^#?([0-9a-f])([0-9a-f])([0-9a-f])\b/i.exec(e))?l=new u(i(s[1]+s[1],16),i(s[2]+s[2],16),i(s[3]+s[3],16),1):(s=/^rgb\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/.exec(e))?l=new u(i(s[1],10),i(s[2],10),i(s[3],10),1):(s=/^rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9.]+)\s*\)/.exec(e))?l=new u(i(s[1],10),i(s[2],10),i(s[3],10),t(s[4])):(s=/^rgb\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*\)/.exec(e))?l=new c(t(s[1])/100,t(s[2])/100,t(s[3])/100,1):(s=/^rgba\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9.]+)\s*\)/.exec(e))&&(l=new c(t(s[1])/100,t(s[2])/100,t(s[3])/100,t(s[4]))),l)l.match=s;else if(!r)throw new Error("Cannot parse color: "+e);return l}function r(e,t,i){for(i||(i="0"),e=e.toString(16);t>e.length;)e="0"+e;return e}function s(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}var o=function(e){var t,i,n,r,s,a=o.formats;if(1===arguments.length)for(e=this.resolveColor(e),r=0;r<a.length;r++)t=a[r].re,i=a[r].process,(n=t.exec(e))&&(s=i(n),this.r=s[0],this.g=s[1],this.b=s[2]);else this.r=arguments[0],this.g=arguments[1],this.b=arguments[2];this.r=this.normalizeByte(this.r),this.g=this.normalizeByte(this.g),this.b=this.normalizeByte(this.b)};o.prototype={toHex:function(){var e=this.padDigit,t=this.r.toString(16),i=this.g.toString(16),n=this.b.toString(16);return"#"+e(t)+e(i)+e(n)},resolveColor:function(e){return"#"==(e=e||"black").charAt(0)&&(e=e.substr(1,6)),e=e.replace(/ /g,""),e=e.toLowerCase(),e=o.namedColors[e]||e},normalizeByte:function(e){return e<0||isNaN(e)?0:e>255?255:e},padDigit:function(e){return 1===e.length?"0"+e:e},brightness:function(e){var t=Math.round;return this.r=t(this.normalizeByte(this.r*e)),this.g=t(this.normalizeByte(this.g*e)),this.b=t(this.normalizeByte(this.b*e)),this},percBrightness:function(){return Math.sqrt(.241*this.r*this.r+.691*this.g*this.g+.068*this.b*this.b)}},o.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){return[i(e[1],10),i(e[2],10),i(e[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(e){return[i(e[1],16),i(e[2],16),i(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(e){return[i(e[1]+e[1],16),i(e[2]+e[2],16),i(e[3]+e[3],16)]}}],o.namedColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};var a=["transparent"];for(var l in o.namedColors)o.namedColors.hasOwnProperty(l)&&a.push(l);a=new RegExp("^("+a.join("|")+")(\\W|$)","i");var d=kendo.Class.extend({toHSV:function(){return this},toRGB:function(){return this},toHex:function(){return this.toBytes().toHex()},toBytes:function(){return this},toCss:function(){return"#"+this.toHex()},toCssRgba:function(){var e=this.toBytes();return"rgba("+e.r+", "+e.g+", "+e.b+", "+t((+this.a).toFixed(3))+")"},toDisplay:function(){return kendo.support.browser.msie&&kendo.support.browser.version<9?this.toCss():this.toCssRgba()},equals:function(e){return e===this||null!==e&&this.toCssRgba()==n(e).toCssRgba()},diff:function(e){if(null==e)return NaN;var t=this.toBytes();return e=e.toBytes(),Math.sqrt(Math.pow(.3*(t.r-e.r),2)+Math.pow(.59*(t.g-e.g),2)+Math.pow(.11*(t.b-e.b),2))},clone:function(){var e=this.toBytes();return e===this&&(e=new u(e.r,e.g,e.b,e.a)),e}}),c=d.extend({init:function(e,t,i,n){this.r=e,this.g=t,this.b=i,this.a=n},toHSV:function(){var e,t,i,n,r,s,o=this.r,a=this.g,l=this.b;return e=Math.min(o,a,l),t=Math.max(o,a,l),s=t,0==(i=t-e)?new h(0,0,s,this.a):(0!==t?(r=i/t,n=o==t?(a-l)/i:a==t?2+(l-o)/i:4+(o-a)/i,(n*=60)<0&&(n+=360)):(r=0,n=-1),new h(n,r,s,this.a))},toHSL:function(){var e,t,i=this.r,n=this.g,r=this.b,s=Math.max(i,n,r),o=Math.min(i,n,r),a=(s+o)/2;if(s==o)e=t=0;else{var l=s-o;switch(t=a>.5?l/(2-s-o):l/(s+o),s){case i:e=(n-r)/l+(n<r?6:0);break;case n:e=(r-i)/l+2;break;case r:e=(i-n)/l+4}e*=60,t*=100,a*=100}return new f(e,t,a,this.a)},toBytes:function(){return new u(255*this.r,255*this.g,255*this.b,this.a)}}),u=c.extend({init:function(e,t,i,n){this.r=Math.round(e),this.g=Math.round(t),this.b=Math.round(i),this.a=n},toRGB:function(){return new c(this.r/255,this.g/255,this.b/255,this.a)},toHSV:function(){return this.toRGB().toHSV()},toHSL:function(){return this.toRGB().toHSL()},toHex:function(){return r(this.r,2)+r(this.g,2)+r(this.b,2)},toBytes:function(){return this}}),h=d.extend({init:function(e,t,i,n){this.h=e,this.s=t,this.v=i,this.a=n},toRGB:function(){var e,t,i,n,r,s,o,a,l=this.h,d=this.s,u=this.v;if(0===d)t=i=n=u;else switch(l/=60,e=Math.floor(l),r=l-e,s=u*(1-d),o=u*(1-d*r),a=u*(1-d*(1-r)),e){case 0:t=u,i=a,n=s;break;case 1:t=o,i=u,n=s;break;case 2:t=s,i=u,n=a;break;case 3:t=s,i=o,n=u;break;case 4:t=a,i=s,n=u;break;default:t=u,i=s,n=o}return new c(t,i,n,this.a)},toHSL:function(){return this.toRGB().toHSL()},toBytes:function(){return this.toRGB().toBytes()}}),f=d.extend({init:function(e,t,i,n){this.h=e,this.s=t,this.l=i,this.a=n},toRGB:function(){var e,t,i,n=this.h,r=this.s,o=this.l;if(0===r)e=t=i=o;else{n/=360,r/=100;var a=(o/=100)<.5?o*(1+r):o+r-o*r,l=2*o-a;e=s(l,a,n+1/3),t=s(l,a,n),i=s(l,a,n-1/3)}return new c(e,t,i,this.a)},toHSV:function(){return this.toRGB().toHSV()},toBytes:function(){return this.toRGB().toBytes()}});o.fromBytes=function(e,t,i,n){return new u(e,t,i,null!=n?n:1)},o.fromRGB=function(e,t,i,n){return new c(e,t,i,null!=n?n:1)},o.fromHSV=function(e,t,i,n){return new h(e,t,i,null!=n?n:1)},o.fromHSL=function(e,t,i,n){return new f(e,t,i,null!=n?n:1)},kendo.Color=o,kendo.parseColor=n}(window.kendo.jQuery,parseFloat,parseInt)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("util/main",["kendo.core"],function(){return function(){function e(e){return typeof e!==h}function t(e){var t=[];for(var i in e)t.push(i+e[i]);return t.sort().join("")}function i(e){for(var t=2166136261,i=0;i<e.length;++i)t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24),t^=e.charCodeAt(i);return t>>>0}function n(e){var t,i=e.length,n=c,r=u;for(t=0;t<i;t++)r=o.max(r,e[t]),n=o.min(n,e[t]);return{min:n,max:r}}function r(e){for(var t=c,i=u,n=0,r=e.length;n<r;n++){var s=e[n];null!==s&&isFinite(s)&&(t=o.min(t,s),i=o.max(i,s))}return{min:t===c?void 0:t,max:i===u?void 0:i}}function s(t,i){return e(i)&&null!==i?" "+t+"='"+i+"' ":""}var o=Math,a=window.kendo,l=a.deepExtend,d=o.PI/180,c=Number.MAX_VALUE,u=-Number.MAX_VALUE,h="undefined",f=Date.now;f||(f=function(){return(new Date).getTime()}),l(a,{util:{MAX_NUM:c,MIN_NUM:u,append:function(e,t){return e.push.apply(e,t),e},arrayLimits:n,arrayMin:function(e){return n(e).min},arrayMax:function(e){return n(e).max},defined:e,deg:function(e){return e/d},hashKey:i,hashObject:function(e){return i(t(e))},isNumber:function(e){return"number"==typeof e&&!isNaN(e)},isTransparent:function(t){return""===t||null===t||"none"===t||"transparent"===t||!e(t)},last:function(e){if(e)return e[e.length-1]},limitValue:function(e,t,i){return o.max(o.min(e,i),t)},now:f,objectKey:t,round:function(e,t){var i=function(e){return e?o.pow(10,e):1}(t);return o.round(e*i)/i},rad:function(e){return e*d},renderAttr:s,renderAllAttr:function(e){for(var t="",i=0;i<e.length;i++)t+=s(e[i][0],e[i][1]);return t},renderPos:function(e){var t=[];if(e)for(var i=a.toHyphens(e).split("-"),n=0;n<i.length;n++)t.push("k-pos-"+i[n]);return t.join(" ")},renderSize:function(e){return"string"!=typeof e&&(e+="px"),e},renderStyle:function(t){for(var i="",n=0;n<t.length;n++){var r=t[n][1];e(r)&&(i+=t[n][0]+":"+r+";")}if(""!==i)return i},renderTemplate:function(e){return a.template(e,{useWithBlock:!1,paramName:"d"})},sparseArrayLimits:r,sparseArrayMin:function(e){return r(e).min},sparseArrayMax:function(e){return r(e).max},sqr:function(e){return e*e},valueOrDefault:function(t,i){return e(t)?t:i},romanToArabic:function(e){e=e.toLowerCase();for(var t={i:1,v:5,x:10,l:50,c:100,d:500,m:1e3},i=0,n=0,r=0;r<e.length;++r){var s=t[e.charAt(r)];if(!s)return null;i+=s,s>n&&(i-=2*n),n=s}return i},arabicToRoman:function(e){for(var t={1:"i",10:"x",100:"c",2:"ii",20:"xx",200:"cc",3:"iii",30:"xxx",300:"ccc",4:"iv",40:"xl",400:"cd",5:"v",50:"l",500:"d",6:"vi",60:"lx",600:"dc",7:"vii",70:"lxx",700:"dcc",8:"viii",80:"lxxx",800:"dccc",9:"ix",90:"xc",900:"cm",1e3:"m"},i=[1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],n="";e>0;)e<i[0]?i.shift():(n+=t[i[0]],e-=i[0]);return n},memoize:function(e){var t=Object.create(null);return function(){for(var i="",n=arguments.length;--n>=0;)i+=":"+arguments[n];return i in t?t[i]:e.apply(this,arguments)}},ucs2encode:function(e){return e.map(function(e){var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e)}).join("")},ucs2decode:function(e){for(var t,i,n=[],r=0,s=e.length;r<s;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<s?56320==(64512&(i=e.charCodeAt(r++)))?n.push(((1023&t)<<10)+(1023&i)+65536):(n.push(t),r--):n.push(t);return n}}}),a.drawing.util=a.util,a.dataviz.util=a.util}(),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("util/text-metrics",["kendo.core","util/main"],function(){!function(e){var t=document,i=window.kendo,n=i.Class,r=i.util,s=r.defined,o=n.extend({init:function(e){this._size=e,this._length=0,this._map={}},put:function(e,t){var i=this._map,n={key:e,value:t};i[e]=n,this._head?(this._tail.newer=n,n.older=this._tail,this._tail=n):this._head=this._tail=n,this._length>=this._size?(i[this._head.key]=null,this._head=this._head.newer,this._head.older=null):this._length++},get:function(e){var t=this._map[e];if(t)return t===this._head&&t!==this._tail&&(this._head=t.newer,this._head.older=null),t!==this._tail&&(t.older&&(t.older.newer=t.newer,t.newer.older=t.older),t.older=this._tail,t.newer=null,this._tail.newer=t,this._tail=t),t.value}}),a=e("<div style='position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space: nowrap!important;' />")[0],l=n.extend({init:function(e){this._cache=new o(1e3),this._initOptions(e)},options:{baselineMarkerSize:1},measure:function(i,n,o){if(!i)return{width:0,height:0,baseline:0};var l=r.objectKey(n),d=r.hashKey(i+l),c=this._cache.get(d);if(c)return c;var u={width:0,height:0,baseline:0},h=o||a,f=this._baselineMarker().cloneNode(!1);for(var p in n){var m=n[p];s(m)&&(h.style[p]=m)}return e(h).text(i),h.appendChild(f),t.body.appendChild(h),(i+"").length&&(u.width=h.offsetWidth-this.options.baselineMarkerSize,u.height=h.offsetHeight,u.baseline=f.offsetTop+this.options.baselineMarkerSize),u.width>0&&u.height>0&&this._cache.put(d,u),h.parentNode.removeChild(h),u},_baselineMarker:function(){return e("<div class='k-baseline-marker' style='display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;' />")[0]}});l.current=new l,i.util.TextMetrics=l,i.util.LRUCache=o,i.util.loadFonts=function(e,t){var n=[];if(e.length>0&&document.fonts){try{n=e.map(function(e){return document.fonts.load(e)})}catch(e){i.logToConsole(e)}Promise.all(n).then(t,t)}else t()},i.util.measureText=function(e,t,i){return l.current.measure(e,t,i)}}(window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("util/base64",["util/main"],function(){return function(){function e(e){for(var t="",i=0;i<e.length;i++){var r=e.charCodeAt(i);r<128?t+=n(r):r<2048?(t+=n(192|r>>>6),t+=n(128|63&r)):r<65536&&(t+=n(224|r>>>12),t+=n(128|r>>>6&63),t+=n(128|63&r))}return t}var t=window.kendo,i=t.deepExtend,n=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i(t.util,{encodeBase64:function(t){var i,n,s,o,a,l,d,c="",u=0;for(t=e(t);u<t.length;)o=(i=t.charCodeAt(u++))>>2,a=(3&i)<<4|(n=t.charCodeAt(u++))>>4,l=(15&n)<<2|(s=t.charCodeAt(u++))>>6,d=63&s,isNaN(n)?l=d=64:isNaN(s)&&(d=64),c=c+r.charAt(o)+r.charAt(a)+r.charAt(l)+r.charAt(d);return c},encodeUTF8:e})}(),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("mixins/observers",["kendo.core"],function(){return function(e){var t=Math,i=window.kendo,n=i.deepExtend,r=e.inArray;n(i,{mixins:{ObserversMixin:{observers:function(){return this._observers=this._observers||[],this._observers},addObserver:function(e){return this._observers?this._observers.push(e):this._observers=[e],this},removeObserver:function(e){var t=this.observers(),i=r(e,t);return-1!=i&&t.splice(i,1),this},trigger:function(e,t){var i,n,r=this._observers;if(r&&!this._suspended)for(n=0;n<r.length;n++)(i=r[n])[e]&&i[e](t);return this},optionsChange:function(e){(e=e||{}).element=this,this.trigger("optionsChange",e)},geometryChange:function(){this.trigger("geometryChange",{element:this})},suspend:function(){return this._suspended=(this._suspended||0)+1,this},resume:function(){return this._suspended=t.max((this._suspended||0)-1,0),this},_observerField:function(e,t){this[e]&&this[e].removeObserver(this),this[e]=t,t.addObserver(this)}}}})}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("drawing/geometry",["util/main","mixins/observers"],function(){return function(){function e(e){return null===e?null:e instanceof H?e:new H(e)}function t(e){return e&&m.isFunction(e.matrix)?e.matrix():e}function i(e,t,i,n){var r=0,s=0;return n&&(r=f.atan2(n.c*i,n.a*t),0!==n.b&&(s=f.atan2(n.d*i,n.b*t))),{x:r,y:s}}function n(e,t){for(;e<t;)e+=90;return e}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i],r=n.charAt(0).toUpperCase()+n.substring(1,n.length);e["set"+r]=function(e){return function(t){return this[e]!==t&&(this[e]=t,this.geometryChange()),this}}(n),e["get"+r]=function(e){return function(){return this[e]}}(n)}}function s(e,t,i,n,r,s){var o=x((r-e)/i,3),a=x((s-t)/n,3);return x(y(f.atan2(a,o)))}function o(e,t,i,n,r,o,a,l){var d,c,u,h,m,g,v,_;if(t!==n){var b=i-e,k=n-t,w=p(r,2),y=p(o,2),x=(y*b*(e+i)+w*k*(t+n))/(2*w*k),C=x-n,S=-b*y/(w*k);m=1/w+p(S,2)/y,g=2*(S*C/y-i/w),v=p(i,2)/w+p(C,2)/y-1,c=x+S*(d=(-g-(_=f.sqrt(p(g,2)-4*m*v)))/(2*m)),h=x+S*(u=(-g+_)/(2*m))}else{if(e===i)return!1;g=-2*n,v=p((i-e)*o/(2*r),2)+p(n,2)-p(o,2),d=u=(e+i)/2,c=(-g-(_=f.sqrt(p(g,2)-4*v)))/2,h=(-g+_)/2}var T=s(d,c,r,o,e,t),D=s(d,c,r,o,i,n),E=function(e,t,i){e>t&&(t+=360);var n=f.abs(t-e);return i||(n=360-n),n}(T,D,l);return(a&&E<=180||!a&&E>180)&&(T=s(d=u,c=h,r,o,e,t),D=s(d,c,r,o,i,n)),{center:new F(d,c),startAngle:T,endAngle:D}}function a(e,t,i,n){if(0===e)return function(e,t,i){var n=f.sqrt(f.pow(t,2)-4*e*i);return[(-t+n)/(2*e),(-t-n)/(2*e)]}(t,i,n);var r,s,o,a,l,d,c,u=(3*e*i-f.pow(t,2))/(3*f.pow(e,2)),p=(2*f.pow(t,3)-9*e*t*i+27*f.pow(e,2)*n)/(27*f.pow(e,3)),m=f.pow(u/3,3)+f.pow(p/2,2),g=new z(0,1),v=-t/(3*e),_=[];return m<0?(r=new z(-p/2,f.sqrt(-m)).nthRoot(3),s=new z(-p/2,-f.sqrt(-m)).nthRoot(3)):(r=-p/2+f.sqrt(m),r=new z(h(r)*f.pow(f.abs(r),1/3)),s=-p/2-f.sqrt(m),s=new z(h(s)*f.pow(f.abs(s),1/3))),o=r.add(s),d=r.add(s).multiplyConstant(-.5),c=r.add(s.negate()).multiplyConstant(f.sqrt(3)/2),a=d.add(g.multiply(c)),l=d.add(g.negate().multiply(c)),o.isReal()&&_.push(x(o.real+v,D)),a.isReal()&&_.push(x(a.real+v,D)),l.isReal()&&_.push(x(l.real+v,D)),_}function l(e,t){return[-e[0][t]+3*e[1][t]-3*e[2][t]+e[3][t],3*(e[0][t]-2*e[1][t]+e[2][t]),3*(-e[0][t]+e[1][t]),e[0][t]]}function d(e,t,i){var n=1-e;return f.pow(n,3)*i[0][t]+3*f.pow(n,2)*e*i[1][t]+3*f.pow(e,2)*n*i[2][t]+f.pow(e,3)*i[3][t]}function c(e,t,i){return 0===x(f.abs(e-t),i||D)}function u(e,t,i){return e<t||c(e,t,i)}function h(e){return e<0?-1:1}var f=Math,p=f.pow,m=window.kendo,g=m.Class,v=m.deepExtend,_=m.mixins.ObserversMixin,b=m.util,k=b.defined,w=b.rad,y=b.deg,x=b.round,C=f.PI/2,S=b.MIN_NUM,T=b.MAX_NUM,D=10,F=g.extend({init:function(e,t){this.x=e||0,this.y=t||0},equals:function(e){return e&&e.x===this.x&&e.y===this.y},clone:function(){return new F(this.x,this.y)},rotate:function(t,i){return this.transform(e().rotate(t,i))},translate:function(e,t){return this.x+=e,this.y+=t,this.geometryChange(),this},translateWith:function(e){return this.translate(e.x,e.y)},move:function(e,t){return this.x=this.y=0,this.translate(e,t)},scale:function(e,t){return k(t)||(t=e),this.x*=e,this.y*=t,this.geometryChange(),this},scaleCopy:function(e,t){return this.clone().scale(e,t)},transform:function(e){var i=t(e),n=this.x,r=this.y;return this.x=i.a*n+i.c*r+i.e,this.y=i.b*n+i.d*r+i.f,this.geometryChange(),this},transformCopy:function(e){var t=this.clone();return e&&t.transform(e),t},distanceTo:function(e){var t=this.x-e.x,i=this.y-e.y;return f.sqrt(t*t+i*i)},round:function(e){return this.x=x(this.x,e),this.y=x(this.y,e),this.geometryChange(),this},toArray:function(e){var t=k(e);return[t?x(this.x,e):this.x,t?x(this.y,e):this.y]}});r(F.fn,["x","y"]),v(F.fn,_),F.fn.toString=function(e,t){var i=this.x,n=this.y;return k(e)&&(i=x(i,e),n=x(n,e)),t=t||" ",i+t+n},F.create=function(e,t){if(k(e))return e instanceof F?e:1===arguments.length&&2===e.length?new F(e[0],e[1]):new F(e,t)},F.min=function(){for(var e=b.MAX_NUM,t=b.MAX_NUM,i=0;i<arguments.length;i++){var n=arguments[i];e=f.min(n.x,e),t=f.min(n.y,t)}return new F(e,t)},F.max=function(){for(var e=b.MIN_NUM,t=b.MIN_NUM,i=0;i<arguments.length;i++){var n=arguments[i];e=f.max(n.x,e),t=f.max(n.y,t)}return new F(e,t)},F.minPoint=function(){return new F(S,S)},F.maxPoint=function(){return new F(T,T)},F.ZERO=new F(0,0);var E=g.extend({init:function(e,t){this.width=e||0,this.height=t||0},equals:function(e){return e&&e.width===this.width&&e.height===this.height},clone:function(){return new E(this.width,this.height)},toArray:function(e){var t=k(e);return[t?x(this.width,e):this.width,t?x(this.height,e):this.height]}});r(E.fn,["width","height"]),v(E.fn,_),E.create=function(e,t){if(k(e))return e instanceof E?e:1===arguments.length&&2===e.length?new E(e[0],e[1]):new E(e,t)},E.ZERO=new E(0,0);var R=g.extend({init:function(e,t){this.setOrigin(e||new F),this.setSize(t||new E)},clone:function(){return new R(this.origin.clone(),this.size.clone())},equals:function(e){return e&&e.origin.equals(this.origin)&&e.size.equals(this.size)},setOrigin:function(e){return this._observerField("origin",F.create(e)),this.geometryChange(),this},getOrigin:function(){return this.origin},setSize:function(e){return this._observerField("size",E.create(e)),this.geometryChange(),this},getSize:function(){return this.size},width:function(){return this.size.width},height:function(){return this.size.height},topLeft:function(){return this.origin.clone()},bottomRight:function(){return this.origin.clone().translate(this.width(),this.height())},topRight:function(){return this.origin.clone().translate(this.width(),0)},bottomLeft:function(){return this.origin.clone().translate(0,this.height())},center:function(){return this.origin.clone().translate(this.width()/2,this.height()/2)},bbox:function(e){var t=this.topLeft().transformCopy(e),i=this.topRight().transformCopy(e),n=this.bottomRight().transformCopy(e),r=this.bottomLeft().transformCopy(e);return R.fromPoints(t,i,n,r)},transformCopy:function(e){return R.fromPoints(this.topLeft().transform(e),this.bottomRight().transform(e))},expand:function(e,t){return k(t)||(t=e),this.size.width+=2*e,this.size.height+=2*t,this.origin.translate(-e,-t),this},expandCopy:function(e,t){return this.clone().expand(e,t)},containsPoint:function(e){var t=this.origin,i=this.bottomRight();return!(e.x<t.x||e.y<t.y||i.x<e.x||i.y<e.y)},_isOnPath:function(e,t){var i=this.expandCopy(t,t),n=this.expandCopy(-t,-t);return i.containsPoint(e)&&!n.containsPoint(e)}});v(R.fn,_),R.fromPoints=function(){var e=F.min.apply(this,arguments),t=F.max.apply(this,arguments),i=new E(t.x-e.x,t.y-e.y);return new R(e,i)},R.union=function(e,t){return R.fromPoints(F.min(e.topLeft(),t.topLeft()),F.max(e.bottomRight(),t.bottomRight()))},R.intersect=function(e,t){if(e={left:e.topLeft().x,top:e.topLeft().y,right:e.bottomRight().x,bottom:e.bottomRight().y},t={left:t.topLeft().x,top:t.topLeft().y,right:t.bottomRight().x,bottom:t.bottomRight().y},e.left<=t.right&&t.left<=e.right&&e.top<=t.bottom&&t.top<=e.bottom)return R.fromPoints(new F(f.max(e.left,t.left),f.max(e.top,t.top)),new F(f.min(e.right,t.right),f.min(e.bottom,t.bottom)))};var A=g.extend({init:function(e,t){this.setCenter(e||new F),this.setRadius(t||0)},setCenter:function(e){return this._observerField("center",F.create(e)),this.geometryChange(),this},getCenter:function(){return this.center},equals:function(e){return e&&e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return new A(this.center.clone(),this.radius)},pointAt:function(e){return this._pointAt(w(e))},bbox:function(e){for(var t=F.maxPoint(),n=F.minPoint(),r=i(this.center,this.radius,this.radius,e),s=0;s<4;s++){var o=this._pointAt(r.x+s*C).transformCopy(e),a=this._pointAt(r.y+s*C).transformCopy(e),l=new F(o.x,a.y);t=F.min(t,l),n=F.max(n,l)}return R.fromPoints(t,n)},_pointAt:function(e){var t=this.center,i=this.radius;return new F(t.x-i*f.cos(e),t.y-i*f.sin(e))},containsPoint:function(e){var t=this.center;return f.pow(e.x-t.x,2)+f.pow(e.y-t.y,2)<=f.pow(this.radius,2)},_isOnPath:function(e,t){var i=this.center,n=this.radius,r=i.distanceTo(e);return n-t<=r&&r<=n+t}});r(A.fn,["radius"]),v(A.fn,_);var I=g.extend({init:function(e,t){this.setCenter(e||new F),t=t||{},this.radiusX=t.radiusX,this.radiusY=t.radiusY||t.radiusX,this.startAngle=t.startAngle,this.endAngle=t.endAngle,this.anticlockwise=t.anticlockwise||!1},clone:function(){return new I(this.center,{radiusX:this.radiusX,radiusY:this.radiusY,startAngle:this.startAngle,endAngle:this.endAngle,anticlockwise:this.anticlockwise})},setCenter:function(e){return this._observerField("center",F.create(e)),this.geometryChange(),this},getCenter:function(){return this.center},MAX_INTERVAL:45,pointAt:function(e){var t=this.center,i=w(e);return new F(t.x+this.radiusX*f.cos(i),t.y+this.radiusY*f.sin(i))},curvePoints:function(){for(var e=this.startAngle,t=this.anticlockwise?-1:1,i=[this.pointAt(e)],n=e,r=this._arcInterval(),s=r.endAngle-r.startAngle,o=f.ceil(s/this.MAX_INTERVAL),a=s/o,l=1;l<=o;l++){var d=n+t*a,c=this._intervalCurvePoints(n,d);i.push(c.cp1,c.cp2,c.p2),n=d}return i},bbox:function(e){for(var t=this._arcInterval(),r=t.startAngle,s=t.endAngle,o=i(this.center,this.radiusX,this.radiusY,e),a=y(o.x),l=y(o.y),d=this.pointAt(r).transformCopy(e),c=this.pointAt(s).transformCopy(e),u=F.min(d,c),h=F.max(d,c),f=n(a,r),p=n(l,r);f<s||p<s;){var m;f<s&&(m=this.pointAt(f).transformCopy(e),f+=90);var g;p<s&&(g=this.pointAt(p).transformCopy(e),p+=90),d=new F(m.x,g.y),u=F.min(u,d),h=F.max(h,d)}return R.fromPoints(u,h)},_arcInterval:function(){var e=this.startAngle,t=this.endAngle,i=this.anticlockwise;if(i){var n=e;e=t,t=n}return(e>t||i&&e===t)&&(t+=360),{startAngle:e,endAngle:t}},_intervalCurvePoints:function(e,t){var i=this.pointAt(e),n=this.pointAt(t),r=this._derivativeAt(e),s=this._derivativeAt(t),o=(w(t)-w(e))/3;return{p1:i,cp1:new F(i.x+o*r.x,i.y+o*r.y),cp2:new F(n.x-o*s.x,n.y-o*s.y),p2:n}},_derivativeAt:function(e){var t=w(e);return new F(-this.radiusX*f.sin(t),this.radiusY*f.cos(t))},containsPoint:function(e){var t,i=this._arcInterval(),n=i.endAngle-i.startAngle,r=this.center,o=r.distanceTo(e),a=f.atan2(e.y-r.y,e.x-r.x),l=this.radiusX*this.radiusY/f.sqrt(f.pow(this.radiusX,2)*f.pow(f.sin(a),2)+f.pow(this.radiusY,2)*f.pow(f.cos(a),2)),d=this.pointAt(this.startAngle).round(D),c=this.pointAt(this.endAngle).round(D),h=function(e,t,i,n){var r=t.x-e.x,s=n.x-i.x,o=t.y-e.y,a=n.y-i.y,l=e.x-i.x,d=e.y-i.y,c=r*a-s*o,u=(r*d-o*l)/c,h=(s*d-a*l)/c;if(u>=0&&u<=1&&h>=0&&h<=1)return new F(e.x+h*r,e.y+h*o)}(r,e.round(D),d,c);if(n<180)t=h&&u(r.distanceTo(h),o)&&u(o,l);else{var p=s(r.x,r.y,this.radiusX,this.radiusY,e.x,e.y);360!=p&&(p=(360+p)%360);var m=i.startAngle<=p&&p<=i.endAngle;t=m&&u(o,l)||!m&&(!h||h.equals(e))}return t},_isOnPath:function(e,t){var i=this._arcInterval(),n=this.center,r=s(n.x,n.y,this.radiusX,this.radiusY,e.x,e.y);return 360!=r&&(r=(360+r)%360),i.startAngle<=r&&r<=i.endAngle&&this.pointAt(r).distanceTo(e)<=t}});r(I.fn,["radiusX","radiusY","startAngle","endAngle","anticlockwise"]),v(I.fn,_),I.fromPoints=function(e,t,i,n,r,s){var a=o(e.x,e.y,t.x,t.y,i,n,r,s);return new I(a.center,{startAngle:a.startAngle,endAngle:a.endAngle,radiusX:i,radiusY:n,anticlockwise:0===s})};var M=g.extend({init:function(e,t,i,n,r,s){this.a=e||0,this.b=t||0,this.c=i||0,this.d=n||0,this.e=r||0,this.f=s||0},multiplyCopy:function(e){return new M(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.e+this.c*e.f+this.e,this.b*e.e+this.d*e.f+this.f)},invert:function(){var e=this.a,t=this.b,i=this.c,n=this.d,r=this.e,s=this.f,o=e*n-t*i;return 0===o?null:new M(n/o,-t/o,-i/o,e/o,(i*s-n*r)/o,(t*r-e*s)/o)},clone:function(){return new M(this.a,this.b,this.c,this.d,this.e,this.f)},equals:function(e){return!!e&&this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f},round:function(e){return this.a=x(this.a,e),this.b=x(this.b,e),this.c=x(this.c,e),this.d=x(this.d,e),this.e=x(this.e,e),this.f=x(this.f,e),this},toArray:function(e){var t=[this.a,this.b,this.c,this.d,this.e,this.f];if(k(e))for(var i=0;i<t.length;i++)t[i]=x(t[i],e);return t}});M.fn.toString=function(e,t){return this.toArray(e).join(t||",")},M.translate=function(e,t){return new M(1,0,0,1,e,t)},M.unit=function(){return new M(1,0,0,1,0,0)},M.rotate=function(e,t,i){var n=new M;return n.a=f.cos(w(e)),n.b=f.sin(w(e)),n.c=-n.b,n.d=n.a,n.e=t-t*n.a+i*n.b||0,n.f=i-i*n.a-t*n.b||0,n},M.scale=function(e,t){return new M(e,0,0,t,0,0)},M.IDENTITY=M.unit();var H=g.extend({init:function(e){this._matrix=e||M.unit()},clone:function(){return new H(this._matrix.clone())},equals:function(e){return e&&e._matrix.equals(this._matrix)},_optionsChange:function(){this.optionsChange({field:"transform",value:this})},translate:function(e,t){return this._matrix=this._matrix.multiplyCopy(M.translate(e,t)),this._optionsChange(),this},scale:function(e,t,i){return k(t)||(t=e),i&&(i=F.create(i),this._matrix=this._matrix.multiplyCopy(M.translate(i.x,i.y))),this._matrix=this._matrix.multiplyCopy(M.scale(e,t)),i&&(this._matrix=this._matrix.multiplyCopy(M.translate(-i.x,-i.y))),this._optionsChange(),this},rotate:function(e,t){return t=F.create(t)||F.ZERO,this._matrix=this._matrix.multiplyCopy(M.rotate(e,t.x,t.y)),this._optionsChange(),this},multiply:function(e){var i=t(e);return this._matrix=this._matrix.multiplyCopy(i),this._optionsChange(),this},matrix:function(e){return e?(this._matrix=e,this._optionsChange(),this):this._matrix}});v(H.fn,_);var z=function(e,t){this.real=e||0,this.img=t||0};z.fn=z.prototype={add:function(e){return new z(x(this.real+e.real,D),x(this.img+e.img,D))},addConstant:function(e){return new z(this.real+e,this.img)},negate:function(){return new z(-this.real,-this.img)},multiply:function(e){return new z(this.real*e.real-this.img*e.img,this.real*e.img+this.img*e.real)},multiplyConstant:function(e){return new z(this.real*e,this.img*e)},nthRoot:function(e){var t=f.atan2(this.img,this.real),i=f.sqrt(f.pow(this.img,2)+f.pow(this.real,2)),n=f.pow(i,1/e);return new z(n*f.cos(t/e),n*f.sin(t/e))},equals:function(e){return this.real===e.real&&this.img===e.img},isReal:function(){return 0===this.img}},v(m,{geometry:{Arc:I,Circle:A,curveIntersectionsCount:function(e,t,i){for(var n,r=l(e,"x"),s=a(r[0],r[1],r[2],r[3]-t.x),o=0,u=0;u<s.length;u++)(c(n=d(s[u],"y",e),t.y)||n>t.y)&&((0===s[u]||1===s[u])&&i.bottomRight().x>t.x||0<s[u]&&s[u]<1)&&o++;return o},lineIntersectionsCount:function(e,t,i){var n;if(e.x!=t.x){var r=f.min(e.x,t.x),s=f.max(e.x,t.x),o=f.min(e.y,t.y),a=f.max(e.y,t.y),l=r<=i.x&&i.x<s;n=o==a?i.y<=o&&l:l&&(a-o)*((e.x-t.x)*(e.y-t.y)>0?i.x-r:s-i.x)/(s-r)+o-i.y>=0}return n?1:0},Matrix:M,Point:F,Rect:R,Size:E,Transformation:H,transform:e,toMatrix:t,isOutOfEndPoint:function(t,i,n){var r=b.deg(f.atan2(i.y-t.y,i.x-t.x));return n.transformCopy(e().rotate(-r,t)).x<t.x},hasRootsInRange:function(e,t,i,n,r){for(var s,o=l(e,n),c=a(o[0],o[1],o[2],o[3]-t[n]),u=0;u<c.length;u++)if(0<=c[u]&&c[u]<=1&&(s=d(c[u],i,e),f.abs(s-t[i])<=r))return!0}}}),m.dataviz.geometry=m.geometry}(),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.popup",["kendo.core"],function(){return function(e,t){function i(t,i){return t===i||e.contains(t,i)}var n=window.kendo,r=n.ui,s=r.Widget,o=n.support,a=n.getOffset,l="center",d="position",c="k-state-border",u=/k-state-border-(\w+)/,h=".k-picker-wrap, .k-dropdown-wrap, .k-link",f=e(document.documentElement),p=e(window),m=o.transitions.css+"transform",g=e.extend,v=".kendoPopup",_=["font-size","font-family","font-stretch","font-style","font-weight","line-height"],b=s.extend({init:function(t,i){var r,a=this;(i=i||{}).isRtl&&(i.origin=i.origin||"bottom right",i.position=i.position||"top right"),s.fn.init.call(a,t,i),t=a.element,i=a.options,a.collisions=i.collision?i.collision.split(" "):[],a.downEvent=n.applyEventMap("down",n.guid()),1===a.collisions.length&&a.collisions.push(a.collisions[0]),r=e(a.options.anchor).closest(".k-popup,.k-group").filter(":not([class^=km-])"),i.appendTo=e(e(i.appendTo)[0]||r[0]||"body"),a.element.hide().addClass("k-popup k-group k-reset").toggleClass("k-rtl",!!i.isRtl).css({position:"absolute"}).appendTo(i.appendTo).on("mouseenter"+v,function(){a._hovered=!0}).on("mouseleave"+v,function(){a._hovered=!1}),a.wrapper=e(),!1===i.animation&&(i.animation={open:{effects:{}},close:{hide:!0,effects:{}}}),g(i.animation.open,{complete:function(){a.wrapper.css({overflow:"visible"}),a._activated=!0,a._trigger("activate")}}),g(i.animation.close,{complete:function(){a._animationClose()}}),a._mousedownProxy=function(e){a._mousedown(e)},o.mobileOS.android?a._resizeProxy=function(e){setTimeout(function(){a._resize(e)},600)}:a._resizeProxy=function(e){a._resize(e)},i.toggleTarget&&e(i.toggleTarget).on(i.toggleEvent+v,e.proxy(a.toggle,a))},events:["open","activate","close","deactivate"],options:{name:"Popup",toggleEvent:"click",origin:"bottom left",position:"top left",anchor:"body",appendTo:null,collision:"flip fit",viewport:window,copyAnchorStyles:!0,autosize:!1,modal:!1,adjustSize:{width:0,height:0},animation:{open:{effects:"slideIn:down",transition:!0,duration:200},close:{duration:100,hide:!0}}},_animationClose:function(){var e=this.wrapper.data("location");this.wrapper.hide(),e&&this.wrapper.css(e),"body"!=this.options.anchor&&this._hideDirClass(),this._closing=!1,this._trigger("deactivate")},destroy:function(){var t,i=this.options,r=this.element.off(v);s.fn.destroy.call(this),i.toggleTarget&&e(i.toggleTarget).off(v),i.modal||(f.unbind(this.downEvent,this._mousedownProxy),this._toggleResize(!1)),n.destroy(this.element.children()),r.removeData(),i.appendTo[0]===document.body&&((t=r.parent(".k-animation-container"))[0]?t.remove():r.remove())},open:function(t,i){var r,s,a={isFixed:!isNaN(parseInt(i,10)),x:t,y:i},l=this.element,c=this.options,u=e(c.anchor),h=l[0]&&l.hasClass("km-widget");if(!this.visible()){if(c.copyAnchorStyles&&(h&&"font-size"==_[0]&&_.shift(),l.css(n.getComputedStyles(u[0],_))),l.data("animating")||this._trigger("open"))return;this._activated=!1,c.modal||(f.unbind(this.downEvent,this._mousedownProxy).bind(this.downEvent,this._mousedownProxy),this._toggleResize(!1),this._toggleResize(!0)),this.wrapper=s=n.wrap(l,c.autosize).css({overflow:"hidden",display:"block",position:"absolute"}),o.mobileOS.android&&s.css(m,"translatez(0)"),s.css(d),e(c.appendTo)[0]==document.body&&s.css("top","-10000px"),this.flipped=this._position(a),r=this._openAnimation(),"body"!=c.anchor&&this._showDirClass(r),l.data("effects",r.effects).kendoStop(!0).kendoAnimate(r)}},_openAnimation:function(){var e=g(!0,{},this.options.animation.open);return e.effects=n.parseEffects(e.effects,this.flipped),e},_hideDirClass:function(){var t=e(this.options.anchor),i=((t.attr("class")||"").match(u)||["","down"])[1],r=c+"-"+i;t.removeClass(r).children(h).removeClass("k-state-active").removeClass(r),this.element.removeClass(c+"-"+n.directions[i].reverse)},_showDirClass:function(t){var i=t.effects.slideIn?t.effects.slideIn.direction:"down",r=c+"-"+i;e(this.options.anchor).addClass(r).children(h).addClass("k-state-active").addClass(r),this.element.addClass(c+"-"+n.directions[i].reverse)},position:function(){this.visible()&&(this.flipped=this._position())},toggle:function(){this[this.visible()?"close":"open"]()},visible:function(){return this.element.is(":visible")},close:function(t){var i,r,s,o,a=this.options;if(this.visible()){if(i=this.wrapper[0]?this.wrapper:n.wrap(this.element).hide(),this._toggleResize(!1),this._closing||this._trigger("close"))return void this._toggleResize(!0);this.element.find(".k-popup").each(function(){var i=e(this).data("kendoPopup");i&&i.close(t)}),f.unbind(this.downEvent,this._mousedownProxy),t?r={hide:!0,effects:{}}:(r=g(!0,{},a.animation.close),s=this.element.data("effects"),!(o=r.effects)&&!n.size(o)&&s&&n.size(s)&&(r.effects=s,r.reverse=!0),this._closing=!0),this.element.kendoStop(!0),i.css({overflow:"hidden"}),this.element.kendoAnimate(r)}},_trigger:function(e){return this.trigger(e,{type:e})},_resize:function(e){var t=this;-1!==o.resize.indexOf(e.type)?(clearTimeout(t._resizeTimeout),t._resizeTimeout=setTimeout(function(){t._position(),t._resizeTimeout=null},50)):(!t._hovered||t._activated&&t.element.hasClass("k-list-container"))&&t.close()},_toggleResize:function(e){var t=e?"on":"off",i=o.resize;o.mobileOS.ios||o.mobileOS.android||(i+=" scroll"),this._scrollableParents()[t]("scroll",this._resizeProxy),p[t](i,this._resizeProxy)},_mousedown:function(t){var r=this.element[0],s=this.options,o=e(s.anchor)[0],a=s.toggleTarget,l=n.eventTarget(t),d=e(l).closest(".k-popup"),c=d.parent().parent(".km-shim").length;d=d[0],!c&&d&&d!==this.element[0]||"popover"!==e(t.target).closest("a").data("rel")&&(i(r,l)||i(o,l)||a&&i(e(a)[0],l)||this.close())},_fit:function(e,t,i){var n=0;return e+t>i&&(n=i-(e+t)),e<0&&(n=-e),n},_flip:function(e,t,i,n,r,s,o){var a=0;return o=o||t,s!==r&&s!==l&&r!==l&&(e+o>n&&(a+=-(i+t)),e+a<0&&(a+=i+t)),a},_scrollableParents:function(){return e(this.options.anchor).parentsUntil("body").filter(function(e,t){return n.isScrollable(t)})},_position:function(t){var i,r,s,l,c,u,h=this.element,f=this.wrapper,p=this.options,m=e(p.viewport),v=m.offset(),_=e(p.anchor),b=p.origin.toLowerCase().split(" "),k=p.position.toLowerCase().split(" "),w=this.collisions,y=o.zoomLevel(),x=10002,C=!!(m[0]==window&&window.innerWidth&&y<=1.02),S=0,T=document.documentElement;if(c=C?window.innerWidth:m.width(),u=C?window.innerHeight:m.height(),C&&T.scrollHeight-T.clientHeight>0&&(c-=n.support.scrollbar()),(i=_.parents().filter(f.siblings()))[0])if(s=Math.max(Number(i.css("zIndex")),0))x=s+10;else for(l=(r=_.parentsUntil(i)).length;S<l;S++)(s=Number(e(r[S]).css("zIndex")))&&x<s&&(x=s+10);f.css("zIndex",x),t&&t.isFixed?f.css({left:t.x,top:t.y}):f.css(this._align(b,k));var D=a(f,d,_[0]===f.offsetParent()[0]),F=a(f);_.offsetParent().parent(".k-animation-container,.k-popup,.k-group").length&&(D=a(f,d,!0),F=a(f)),m[0]===window?(F.top-=window.pageYOffset||document.documentElement.scrollTop||0,F.left-=window.pageXOffset||document.documentElement.scrollLeft||0):(F.top-=v.top,F.left-=v.left),this.wrapper.data("location")||f.data("location",g({},D));var E=g({},F),R=g({},D),A=p.adjustSize;"fit"===w[0]&&(R.top+=this._fit(E.top,f.outerHeight()+A.height,u/y)),"fit"===w[1]&&(R.left+=this._fit(E.left,f.outerWidth()+A.width,c/y));var I=g({},R),M=h.outerHeight(),H=f.outerHeight();return!f.height()&&M&&(H+=M),"flip"===w[0]&&(R.top+=this._flip(E.top,M,_.outerHeight(),u/y,b[0],k[0],H)),"flip"===w[1]&&(R.left+=this._flip(E.left,h.outerWidth(),_.outerWidth(),c/y,b[1],k[1],f.outerWidth())),h.css(d,"absolute"),f.css(R),R.left!=I.left||R.top!=I.top},_align:function(t,i){var n,r=this.wrapper,s=e(this.options.anchor),o=t[0],d=t[1],c=i[0],u=i[1],h=a(s),f=e(this.options.appendTo),p=r.outerWidth(),m=r.outerHeight(),g=s.outerWidth(),v=s.outerHeight(),_=h.top,b=h.left,k=Math.round;return f[0]!=document.body&&(_-=(n=a(f)).top,b-=n.left),"bottom"===o&&(_+=v),o===l&&(_+=k(v/2)),"bottom"===c&&(_-=m),c===l&&(_-=k(m/2)),"right"===d&&(b+=g),d===l&&(b+=k(g/2)),"right"===u&&(b-=p),u===l&&(b-=k(p/2)),{top:_,left:b}}});r.plugin(b)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("drawing/core",["drawing/geometry","kendo.popup"],function(){!function(e){function t(e){var t,i;return e.touch?(t=e.x.location,i=e.y.location):(t=e.pageX||e.clientX||0,i=e.pageY||e.clientY||0),{x:t,y:i}}var i=e.noop,n=Object.prototype.toString,r=window.kendo,s=r.Class,o=r.ui.Widget,a=r.deepExtend,l=r.util,d=l.defined,c=l.limitValue,u=r.geometry,h=e.proxy,f=o.extend({init:function(e,t){this.options=a({},this.options,t),o.fn.init.call(this,e,this.options),this._click=this._handler("click"),this._mouseenter=this._handler("mouseenter"),this._mouseleave=this._handler("mouseleave"),this._mousemove=this._handler("mousemove"),this._visual=new r.drawing.Group,this.options.width&&this.element.css("width",this.options.width),this.options.height&&this.element.css("height",this.options.height),this._enableTracking()},options:{name:"Surface",tooltip:{}},events:["click","mouseenter","mouseleave","mousemove","resize","tooltipOpen","tooltipClose"],draw:function(e){this._visual.children.push(e)},clear:function(){this._visual.children=[],this.hideTooltip()},destroy:function(){this._visual=null,this._tooltip&&(this._tooltip.destroy(),delete this._tooltip),o.fn.destroy.call(this)},exportVisual:function(){return this._visual},getSize:function(){return{width:this.element.width(),height:this.element.height()}},setSize:function(e){this.element.css({width:e.width,height:e.height}),this._size=e,this._resize()},eventTarget:function(t){for(var i,n=e(t.touch?t.touch.initialTouch:t.target);!i&&n.length>0&&(i=n[0]._kendoNode,!n.is(this.element)&&0!==n.length);)n=n.parent();if(i)return i.srcElement},showTooltip:function(e,t){this._tooltip&&this._tooltip.show(e,t)},hideTooltip:function(){this._tooltip&&this._tooltip.hide()},suspendTracking:function(){this._suspendedTracking=!0,this.hideTooltip()},resumeTracking:function(){this._suspendedTracking=!1},_resize:i,_handler:function(e){var t=this;return function(i){var n=t.eventTarget(i);n&&!t._suspendedTracking&&t.trigger(e,{element:n,originalEvent:i,type:e})}},_enableTracking:function(){this._tooltip=new v(this,this.options.tooltip||{})},_elementOffset:function(){var e=this.element,t=e.offset(),i=parseInt(e.css("paddingLeft"),10),n=parseInt(e.css("paddingTop"),10);return{left:t.left+i,top:t.top+n}},_surfacePoint:function(e){var i=this._elementOffset(),n=t(e),r=n.x-i.left,s=n.y-i.top;return new u.Point(r,s)}});r.ui.plugin(f),f.create=function(e,t){return g.current.create(e,t)};var p=s.extend({init:function(e){this.childNodes=[],this.parent=null,e&&(this.srcElement=e,this.observe())},destroy:function(){this.srcElement&&this.srcElement.removeObserver(this);for(var e=this.childNodes,t=0;t<e.length;t++)this.childNodes[t].destroy();this.parent=null},load:i,observe:function(){this.srcElement&&this.srcElement.addObserver(this)},append:function(e){this.childNodes.push(e),e.parent=this},insertAt:function(e,t){this.childNodes.splice(t,0,e),e.parent=this},remove:function(e,t){for(var i=e+t,n=e;n<i;n++)this.childNodes[n].removeSelf();this.childNodes.splice(e,t)},removeSelf:function(){this.clear(),this.destroy()},clear:function(){this.remove(0,this.childNodes.length)},invalidate:function(){this.parent&&this.parent.invalidate()},geometryChange:function(){this.invalidate()},optionsChange:function(){this.invalidate()},childrenChange:function(e){"add"===e.action?this.load(e.items,e.index):"remove"===e.action&&this.remove(e.index,e.items.length),this.invalidate()}}),m=s.extend({init:function(e,t){var i,n;this.prefix=t||"";for(i in e)n=e[i],n=this._wrap(n,i),this[i]=n},get:function(e){return r.getter(e,!0)(this)},set:function(e,t){var i=r.getter(e,!0)(this);if(i!==t){var n=this._set(e,this._wrap(t,e));n||this.optionsChange({field:this.prefix+e,value:t})}},_set:function(e,t){var i=e.indexOf(".")>=0;if(i)for(var n,s=e.split("."),o="";s.length>1;){if(o+=s.shift(),(n=r.getter(o,!0)(this))||((n=new m({},o+".")).addObserver(this),this[o]=n),n instanceof m)return n.set(s.join("."),t),i;o+="."}return this._clear(e),r.setter(e)(this,t),i},_clear:function(e){var t=r.getter(e,!0)(this);t&&t.removeObserver&&t.removeObserver(this)},_wrap:function(e,t){var i=n.call(e);return null!==e&&d(e)&&"[object Object]"===i&&(e instanceof m||e instanceof s||(e=new m(e,this.prefix+t+".")),e.addObserver(this)),e}});a(m.fn,r.mixins.ObserversMixin);var g=function(){this._items=[]};g.prototype={register:function(e,t,i){var n=this._items,r=n[0],s={name:e,type:t,order:i};!r||i<r.order?n.unshift(s):n.push(s)},create:function(e,t){var i=this._items,n=i[0];if(t&&t.type)for(var s=t.type.toLowerCase(),o=0;o<i.length;o++)if(i[o].name===s){n=i[o];break}if(n)return new n.type(e,t);r.logToConsole("Warning: Unable to create Kendo UI Drawing Surface. Possible causes:\n- The browser does not support SVG, VML and Canvas. User agent: "+navigator.userAgent+"\n- The Kendo UI scripts are not fully loaded")}},g.current=new g;var v=s.extend({init:function(t,i){this.element=e('<div class="k-tooltip"><div class="k-tooltip-content"></div></div>'),this.content=this.element.children(".k-tooltip-content"),i=i||{},this.options=a({},this.options,this._tooltipOptions(i)),this.popup=new r.ui.Popup(this.element,{appendTo:i.appendTo,animation:i.animation,copyAnchorStyles:!1,collision:"fit fit"}),this._openPopupHandler=e.proxy(this._openPopup,this),this.surface=t,this._bindEvents()},options:{position:"top",showOn:"mouseenter",offset:7,autoHide:!0,hideDelay:0,showAfter:100},_bindEvents:function(){this._showHandler=h(this._showEvent,this),this._surfaceLeaveHandler=h(this._surfaceLeave,this),this._mouseleaveHandler=h(this._mouseleave,this),this._mousemoveHandler=h(this._mousemove,this),this.surface.bind("click",this._showHandler),this.surface.bind("mouseenter",this._showHandler),this.surface.bind("mouseleave",this._mouseleaveHandler),this.surface.bind("mousemove",this._mousemoveHandler),this.surface.element.on("mouseleave.kendo",this._surfaceLeaveHandler),this.element.on("click.kendo",".k-tooltip-button",h(this._hideClick,this))},destroy:function(){var e=this.popup;this.surface.unbind("click",this._showHandler),this.surface.unbind("mouseenter",this._showHandler),this.surface.unbind("mouseleave",this._mouseleaveHandler),this.surface.unbind("mousemove",this._mousemoveHandler),this.surface.element.off("mouseleave.kendo",this._surfaceLeaveHandler),this.element.off("click.kendo"),e&&(e.destroy(),delete this.popup),clearTimeout(this._timeout),delete this.popup,delete this.element,delete this.content,delete this.surface},_tooltipOptions:function(e){return e=e||{},{position:e.position,showOn:e.showOn,offset:e.offset,autoHide:e.autoHide,width:e.width,height:e.height,content:e.content,shared:e.shared,hideDelay:e.hideDelay,showAfter:e.showAfter}},_tooltipShape:function(e){for(;e&&!e.options.tooltip;)e=e.parent;return e},_updateContent:function(e,t,i){var n=i.content;if(r.isFunction(n)&&(n=n({element:t,target:e})),n)return this.content.html(n),!0},_position:function(e,i,n,r){var s=i.position,o=i.offset||0,a=this.surface,l=a._elementOffset(),d=a.getSize(),u=a._offset,h=e.bbox(),f=n.width,p=n.height,m=0,g=0;if(h.origin.translate(l.left,l.top),u&&h.origin.translate(-u.x,-u.y),"cursor"==s&&r){var v=t(r);m=v.x-f/2,g=v.y-p-o}else"left"==s?(m=h.origin.x-f-o,g=h.center().y-p/2):"right"==s?(m=h.bottomRight().x+o,g=h.center().y-p/2):"bottom"==s?(m=h.center().x-f/2,g=h.bottomRight().y+o):(m=h.center().x-f/2,g=h.origin.y-p-o);return{left:c(m,l.left,l.left+d.width),top:c(g,l.top,l.top+d.height)}},show:function(e,t){this._show(e,e,a({},this.options,this._tooltipOptions(e.options.tooltip),t))},hide:function(){var e=this._current;delete this._current,clearTimeout(this._showTimeout),this.popup.visible()&&e&&!this.surface.trigger("tooltipClose",{element:e.shape,target:e.target,popup:this.popup})&&this.popup.close()},_hideClick:function(e){e.preventDefault(),this.hide()},_show:function(e,t,i,n,r){var s=this._current;if(clearTimeout(this._timeout),(!s||!(s.shape===t&&i.shared||s.target===e))&&(clearTimeout(this._showTimeout),!this.surface.trigger("tooltipOpen",{element:t,target:e,popup:this.popup})&&this._updateContent(e,t,i))){this._autoHide(i);var o=this._measure(i),a=this.popup;a.visible()&&a.close(!0),this._current={options:i,elementSize:o,shape:t,target:e,position:this._position(i.shared?t:e,i,o,n)},r?this._showTimeout=setTimeout(this._openPopupHandler,i.showAfter||0):this._openPopup()}},_openPopup:function(){var e=this._current,t=e.position;this.popup.open(t.left,t.top)},_autoHide:function(t){t.autoHide&&this._closeButton&&(this.element.removeClass("k-tooltip-closable"),this._closeButton.remove(),delete this._closeButton),t.autoHide||this._closeButton||(this.element.addClass("k-tooltip-closable"),this._closeButton=e('<div class="k-tooltip-button"><a href="\\#" class="k-icon k-i-close">close</a></div>').prependTo(this.element))},_showEvent:function(e){var t=this._tooltipShape(e.element);if(t){var i=a({},this.options,this._tooltipOptions(t.options.tooltip));i&&i.showOn==e.type&&this._show(e.element,t,i,e.originalEvent,!0)}},_measure:function(e){var t,i;this.element.css({width:"auto",height:"auto"});var n=this.popup.visible();return n||this.popup.wrapper.show(),this.element.css({width:d(e.width)?e.width:"auto",height:d(e.height)?e.height:"auto"}),t=this.element.outerWidth(),i=this.element.outerHeight(),n||this.popup.wrapper.hide(),{width:t,height:i}},_mouseleave:function(e){if(!this._popupRelatedTarget(e.originalEvent)){var t=this,i=t._current;i&&i.options.autoHide&&(t._timeout=setTimeout(function(){clearTimeout(t._showTimeout),t.hide()},i.options.hideDelay||0))}},_mousemove:function(e){var t=this._current;if(t&&e.element){var i=t.options;if("cursor"==i.position){var n=this._position(e.element,i,t.elementSize,e.originalEvent);t.position=n,this.popup.wrapper.css({left:n.left,top:n.top})}}},_surfaceLeave:function(e){this._popupRelatedTarget(e)||(clearTimeout(this._showTimeout),this.hide())},_popupRelatedTarget:function(t){return t.relatedTarget&&e(t.relatedTarget).closest(this.popup.wrapper).length}});a(r,{drawing:{DASH_ARRAYS:{dot:[1.5,3.5],dash:[4,3.5],longdash:[8,3.5],dashdot:[3.5,3.5,1.5,3.5],longdashdot:[8,3.5,1.5,3.5],longdashdotdot:[8,3.5,1.5,3.5,1.5,3.5]},Color:r.Color,BaseNode:p,OptionsStore:m,Surface:f,SurfaceFactory:g,SurfaceTooltip:v}}),r.dataviz.drawing=r.drawing}(window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("drawing/mixins",["drawing/core"],function(){!function(){var e=window.kendo,t=e.deepExtend,i=e.util.defined,n=e.geometry,r=n.Matrix.IDENTITY.toString(),s={extend:function(e){e.fill=this.fill,e.stroke=this.stroke},fill:function(e,t){var n=this.options;if(i(e)){if(e&&"gradient"!=e.nodeType){var r={color:e};i(t)&&(r.opacity=t),n.set("fill",r)}else n.set("fill",e);return this}return n.get("fill")},stroke:function(e,t,n){return i(e)?(this.options.set("stroke.color",e),i(t)&&this.options.set("stroke.width",t),i(n)&&this.options.set("stroke.opacity",n),this):this.options.get("stroke")}},o={extend:function(e){e.bbox=this.bbox,e.geometryChange=this.geometryChange},bbox:function(e){var t,i=n.toMatrix(this.currentTransform(e)),s=i?i.toString():r;this._bboxCache&&this._matrixHash==s?t=this._bboxCache.clone():(t=this._bbox(i),this._bboxCache=t?t.clone():null,this._matrixHash=s);var o=this.options.get("stroke.width");return o&&t&&t.expand(o/2),t},geometryChange:function(){delete this._bboxCache,this.trigger("geometryChange",{element:this})}};t(e.drawing,{mixins:{Paintable:s,Traversable:{extend:function(e,t){e.traverse=function(e){for(var i=this[t],n=0;n<i.length;n++){var r=i[n];r.traverse?r.traverse(e):e(r)}return this}}},Measurable:o}})}()}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("drawing/shapes",["drawing/core","drawing/mixins","util/text-metrics","mixins/observers"],function(){!function(e){function t(e,t,i){for(var n,r=0;r<e.length;r++){var s=e[r];if(s.visible()){var o=t?s.bbox(i):s.rawBBox();o&&(n=n?m.Rect.union(n,o):o)}}return n}function i(e,t){for(var i,n=0;n<e.length;n++){var r=e[n];if(r.visible()){var s=r.clippedBBox(t);s&&(i=i?m.Rect.union(i,s):s)}}return i}function n(e,t){for(var i=0;i<t.length;i++)e[t[i]]=function(e){var t="_"+e;return function(e){return D(e)?(this._observerField(t,e),this.geometryChange(),this):this[t]}}(t[i])}function r(e,t){for(var i=0;i<t.length;i++)e[t[i]]=function(e){var t="_"+e;return function(e){return D(e)?(this._observerField(t,g.create(e)),this.geometryChange(),this):this[t]}}(t[i])}function s(){return"kdef"+L++}function o(e,t,i,n,r){var s,o,a,d,c=[],h=function(e,t,i){for(var n,r,s,o=t.size[i],a=0,l=[],d=[],c=function(){d.push({element:n,bbox:s})},u=0;u<e.length;u++)n=e[u],(s=n.clippedBBox())&&(r=s.size[i],a+r>o?d.length?(l.push(d),d=[],c(),a=r):(c(),l.push(d),d=[],a=0):(c(),a+=r));d.length&&l.push(d);return l}(e,t,r),f=t.origin.clone();for(d=0;d<h.length;d++)for(a=h[d],s=a[0],f[n]=s.bbox.origin[n],u(f,s.bbox,s.element),s.bbox.origin[i]=f[i],l(a,i,n,r),c.push([]),o=0;o<a.length;o++)c[d].push(a[o].element);return c}function a(e){for(var t,i,n=[],r=0;r<e.length;r++)t=e[r],(i=t.clippedBBox())&&n.push({element:t,bbox:i});return n}function l(e,t,i,n){if(e.length>1)for(var r,s,o=e[0].bbox,a=new g,l=1;l<e.length;l++)r=e[l].element,s=e[l].bbox,a[t]=o.origin[t]+o.size[n],a[i]=s.origin[i],u(a,s,r),s.origin[t]=a[t],o=s}function d(e,t,i,n,r){var s,o;i=i||"start";for(var a=0;a<e.length;a++)(s=e[a].clippedBBox())&&((o=s.origin.clone())[n]=c(s.size[r],t,i,n,r),u(o,s,e[a]))}function c(e,t,i,n,r){return i==B?t.origin[n]:i==O?t.origin[n]+t.size[r]-e:t.origin[n]+(t.size[r]-e)/2}function u(e,t,i){!function(e,t,i){var n=i.transform()||m.transform(),r=n.matrix();r.e+=e,r.f+=t,n.matrix(r),i.transform(n)}(e.x-t.origin.x,e.y-t.origin.y,i)}var h=window.kendo,f=h.Class,p=h.deepExtend,m=h.geometry,g=m.Point,v=m.Size,_=m.Matrix,b=m.toMatrix,k=h.drawing,w=k.OptionsStore,y=Math,x=y.pow,C=h.util,S=C.append,T=C.arrayLimits,D=C.defined,F=C.last,E=C.valueOrDefault,R=h.mixins.ObserversMixin,A=e.inArray,I=[].push,M=[].pop,H=[].splice,z=[].shift,N=[].slice,P=[].unshift,L=1,B="start",O="end",V=f.extend({nodeType:"Element",init:function(e){this._initOptions(e)},_initOptions:function(e){var t=(e=e||{}).transform,i=e.clip;t&&(e.transform=m.transform(t)),i&&!i.id&&(i.id=s()),this.options=new w(e),this.options.addObserver(this)},transform:function(e){if(!D(e))return this.options.get("transform");this.options.set("transform",m.transform(e))},parentTransform:function(){for(var e,t,i=this;i.parent;)i=i.parent,(e=i.transform())&&(t=e.matrix().multiplyCopy(t||_.unit()));if(t)return m.transform(t)},currentTransform:function(e){var t,i,n=this.transform(),r=b(n);if(D(e)||(e=this.parentTransform()),t=b(e),i=r&&t?t.multiplyCopy(r):r||t)return m.transform(i)},visible:function(e){return D(e)?(this.options.set("visible",e),this):!1!==this.options.get("visible")},clip:function(e){var t=this.options;return D(e)?(e&&!e.id&&(e.id=s()),t.set("clip",e),this):t.get("clip")},opacity:function(e){return D(e)?(this.options.set("opacity",e),this):E(this.options.get("opacity"),1)},clippedBBox:function(e){var t=this._clippedBBox(e);if(t){var i=this.clip();return i?m.Rect.intersect(t,i.bbox(e)):t}},containsPoint:function(e,t){if(this.visible()){var i=this.currentTransform(t);return i&&(e=e.transformCopy(i.matrix().invert())),this._hasFill()&&this._containsPoint(e)||this._isOnPath&&this._hasStroke()&&this._isOnPath(e)}return!1},_hasFill:function(){var e=this.options.fill;return e&&!C.isTransparent(e.color)},_hasStroke:function(){var e=this.options.stroke;return e&&e.width>0&&!C.isTransparent(e.color)},_clippedBBox:function(e){return this.bbox(e)}});p(V.fn,R);var W=f.extend({init:function(e){e=e||[],this.length=0,this._splice(0,e.length,e)},elements:function(e){return e?(this._splice(0,this.length,e),this._change(),this):this.slice(0)},push:function(){var e=arguments,t=I.apply(this,e);return this._add(e),t},slice:N,pop:function(){var e=this.length,t=M.apply(this);return e&&this._remove([t]),t},splice:function(e,t){var i=N.call(arguments,2),n=this._splice(e,t,i);return this._change(),n},shift:function(){var e=this.length,t=z.apply(this);return e&&this._remove([t]),t},unshift:function(){var e=arguments,t=P.apply(this,e);return this._add(e),t},indexOf:function(e){var t,i;for(t=0,i=this.length;t<i;t++)if(this[t]===e)return t;return-1},_splice:function(e,t,i){var n=H.apply(this,[e,t].concat(i));return this._clearObserver(n),this._setObserver(i),n},_add:function(e){this._setObserver(e),this._change()},_remove:function(e){this._clearObserver(e),this._change()},_setObserver:function(e){for(var t=0;t<e.length;t++)e[t].addObserver(this)},_clearObserver:function(e){for(var t=0;t<e.length;t++)e[t].removeObserver(this)},_change:function(){}});p(W.fn,R);var U=V.extend({nodeType:"Group",init:function(e){V.fn.init.call(this,e),this.children=[]},childrenChange:function(e,t,i){this.trigger("childrenChange",{action:e,items:t,index:i})},append:function(){return S(this.children,arguments),this._reparent(arguments,this),this.childrenChange("add",arguments),this},insert:function(e,t){return this.children.splice(e,0,t),t.parent=this,this.childrenChange("add",[t],e),this},insertAt:function(e,t){return this.insert(t,e)},remove:function(e){var t=A(e,this.children);return t>=0&&(this.children.splice(t,1),e.parent=null,this.childrenChange("remove",[e],t)),this},removeAt:function(e){if(0<=e&&e<this.children.length){var t=this.children[e];this.children.splice(e,1),t.parent=null,this.childrenChange("remove",[t],e)}return this},clear:function(){var e=this.children;return this.children=[],this._reparent(e,null),this.childrenChange("remove",e,0),this},bbox:function(e){return t(this.children,!0,this.currentTransform(e))},rawBBox:function(){return t(this.children,!1)},_clippedBBox:function(e){return i(this.children,this.currentTransform(e))},currentTransform:function(e){return V.fn.currentTransform.call(this,e)||null},containsPoint:function(e,t){if(this.visible())for(var i=this.children,n=this.currentTransform(t),r=0;r<i.length;r++)if(i[r].containsPoint(e,n))return!0;return!1},_reparent:function(e,t){for(var i=0;i<e.length;i++){var n=e[i],r=n.parent;r&&r!=this&&r.remove&&r.remove(n),n.parent=t}}});k.mixins.Traversable.extend(U.fn,"children");var q=V.extend({nodeType:"Text",init:function(e,t,i){V.fn.init.call(this,i),this.content(e),this.position(t||new m.Point),this.options.font||(this.options.font="12px sans-serif"),D(this.options.fill)||this.fill("#000")},content:function(e){return D(e)?(this.options.set("content",e),this):this.options.get("content")},measure:function(){var e=C.measureText(this.content(),{font:this.options.get("font")});return e},rect:function(){var e=this.measure(),t=this.position().clone();return new m.Rect(t,[e.width,e.height])},bbox:function(e){var t=b(this.currentTransform(e));return this.rect().bbox(t)},rawBBox:function(){return this.rect().bbox()},_containsPoint:function(e){return this.rect().containsPoint(e)}});k.mixins.Paintable.extend(q.fn),r(q.fn,["position"]);var $=V.extend({nodeType:"Circle",init:function(e,t){V.fn.init.call(this,t),this.geometry(e||new m.Circle),D(this.options.stroke)||this.stroke("#000")},_bbox:function(e){return this._geometry.bbox(e)},rawBBox:function(){return this._geometry.bbox()},_containsPoint:function(e){return this.geometry().containsPoint(e)},_isOnPath:function(e){return this.geometry()._isOnPath(e,this.options.stroke.width/2)}});k.mixins.Paintable.extend($.fn),k.mixins.Measurable.extend($.fn),n($.fn,["geometry"]);var j=V.extend({nodeType:"Arc",init:function(e,t){V.fn.init.call(this,t),this.geometry(e||new m.Arc),D(this.options.stroke)||this.stroke("#000")},_bbox:function(e){return this._geometry.bbox(e)},rawBBox:function(){return this.geometry().bbox()},toPath:function(){var e=new K,t=this.geometry().curvePoints();if(t.length>0){e.moveTo(t[0].x,t[0].y);for(var i=1;i<t.length;i+=3)e.curveTo(t[i],t[i+1],t[i+2])}return e},_containsPoint:function(e){return this.geometry().containsPoint(e)},_isOnPath:function(e){return this.geometry()._isOnPath(e,this.options.stroke.width/2)}});k.mixins.Paintable.extend(j.fn),k.mixins.Measurable.extend(j.fn),n(j.fn,["geometry"]);var G=W.extend({_change:function(){this.geometryChange()}}),Y=f.extend({init:function(e,t,i){this.anchor(e||new g),this.controlIn(t),this.controlOut(i)},bboxTo:function(e,t){var i=this.anchor().transformCopy(t),n=e.anchor().transformCopy(t);return this.controlOut()&&e.controlIn()?this._curveBoundingBox(i,this.controlOut().transformCopy(t),e.controlIn().transformCopy(t),n):this._lineBoundingBox(i,n)},_lineBoundingBox:function(e,t){return m.Rect.fromPoints(e,t)},_curveBoundingBox:function(e,t,i,n){var r=[e,t,i,n],s=this._curveExtremesFor(r,"x"),o=this._curveExtremesFor(r,"y"),a=T([s.min,s.max,e.x,n.x]),l=T([o.min,o.max,e.y,n.y]);return m.Rect.fromPoints(new g(a.min,l.min),new g(a.max,l.max))},_curveExtremesFor:function(e,t){var i=this._curveExtremes(e[0][t],e[1][t],e[2][t],e[3][t]);return{min:this._calculateCurveAt(i.min,t,e),max:this._calculateCurveAt(i.max,t,e)}},_calculateCurveAt:function(e,t,i){var n=1-e;return x(n,3)*i[0][t]+3*x(n,2)*e*i[1][t]+3*x(e,2)*n*i[2][t]+x(e,3)*i[3][t]},_curveExtremes:function(e,t,i,n){var r=e-3*t+3*i-n,s=-2*(e-2*t+i),o=e-t,a=y.sqrt(s*s-4*r*o),l=0,d=1;0===r?0!==s&&(l=d=-o/s):isNaN(a)||(l=(-s+a)/(2*r),d=(-s-a)/(2*r));var c=y.max(y.min(l,d),0);(c<0||c>1)&&(c=0);var u=y.min(y.max(l,d),1);return(u>1||u<0)&&(u=1),{min:c,max:u}},_intersectionsTo:function(e,t){return this.controlOut()&&e.controlIn()?m.curveIntersectionsCount([this.anchor(),this.controlOut(),e.controlIn(),e.anchor()],t,this.bboxTo(e)):m.lineIntersectionsCount(this.anchor(),e.anchor(),t)},_isOnCurveTo:function(e,t,i,n){var r=this.bboxTo(e).expand(i,i);if(r.containsPoint(t)){var s=this.anchor(),o=this.controlOut(),a=e.controlIn(),l=e.anchor();if("start"==n&&s.distanceTo(t)<=i)return!m.isOutOfEndPoint(s,o,t);if("end"==n&&l.distanceTo(t)<=i)return!m.isOutOfEndPoint(l,a,t);var d=m.hasRootsInRange,c=[s,o,a,l];if(d(c,t,"x","y",i)||d(c,t,"y","x",i))return!0;var u=m.transform().rotate(45,t),h=[s.transformCopy(u),o.transformCopy(u),a.transformCopy(u),l.transformCopy(u)];return d(h,t,"x","y",i)||d(h,t,"y","x",i)}},_isOnLineTo:function(e,t,i){var n=this.anchor(),r=e.anchor(),s=C.deg(y.atan2(r.y-n.y,r.x-n.x)),o=new m.Rect([n.x,n.y-i/2],[n.distanceTo(r),i]);return o.containsPoint(t.transformCopy(m.transform().rotate(-s,n)))},_isOnPathTo:function(e,t,i,n){return this.controlOut()&&e.controlIn()?this._isOnCurveTo(e,t,i/2,n):this._isOnLineTo(e,t,i)}});r(Y.fn,["anchor","controlIn","controlOut"]),p(Y.fn,R);var K=V.extend({nodeType:"Path",init:function(e){V.fn.init.call(this,e),this.segments=new G,this.segments.addObserver(this),D(this.options.stroke)||(this.stroke("#000"),D(this.options.stroke.lineJoin)||this.options.set("stroke.lineJoin","miter"))},moveTo:function(e,t){return this.suspend(),this.segments.elements([]),this.resume(),this.lineTo(e,t),this},lineTo:function(e,t){var i=D(t)?new g(e,t):e,n=new Y(i);return this.segments.push(n),this},curveTo:function(e,t,i){if(this.segments.length>0){var n=F(this.segments),r=new Y(i,t);this.suspend(),n.controlOut(e),this.resume(),this.segments.push(r)}return this},arc:function(e,t,i,n,r){if(this.segments.length>0){var s=F(this.segments),o=s.anchor(),a=C.rad(e),l=new g(o.x-i*y.cos(a),o.y-n*y.sin(a)),d=new m.Arc(l,{startAngle:e,endAngle:t,radiusX:i,radiusY:n,anticlockwise:r});this._addArcSegments(d)}return this},arcTo:function(e,t,i,n,r){if(this.segments.length>0){var s=F(this.segments),o=s.anchor(),a=m.Arc.fromPoints(o,e,t,i,n,r);this._addArcSegments(a)}return this},_addArcSegments:function(e){this.suspend();for(var t=e.curvePoints(),i=1;i<t.length;i+=3)this.curveTo(t[i],t[i+1],t[i+2]);this.resume(),this.geometryChange()},close:function(){return this.options.closed=!0,this.geometryChange(),this},rawBBox:function(){return this._bbox()},_containsPoint:function(e){for(var t,i,n=this.segments,r=n.length,s=0,o=1;o<r;o++)t=n[o-1],i=n[o],s+=t._intersectionsTo(i,e);return!this.options.closed&&n[0].anchor().equals(n[r-1].anchor())||(s+=m.lineIntersectionsCount(n[0].anchor(),n[r-1].anchor(),e)),s%2!=0},_isOnPath:function(e,t){var i=this.segments,n=i.length;if(t=t||this.options.stroke.width,n>1){if(i[0]._isOnPathTo(i[1],e,t,"start"))return!0;for(var r=2;r<=n-2;r++)if(i[r-1]._isOnPathTo(i[r],e,t))return!0;if(i[n-2]._isOnPathTo(i[n-1],e,t,"end"))return!0}return!1},_bbox:function(e){var t,i=this.segments,n=i.length;if(1===n){var r=i[0].anchor().transformCopy(e);t=new m.Rect(r,v.ZERO)}else if(n>0)for(var s=1;s<n;s++){var o=i[s-1].bboxTo(i[s],e);t=t?m.Rect.union(t,o):o}return t}});k.mixins.Paintable.extend(K.fn),k.mixins.Measurable.extend(K.fn),K.fromRect=function(e,t){return new K(t).moveTo(e.topLeft()).lineTo(e.topRight()).lineTo(e.bottomRight()).lineTo(e.bottomLeft()).close()},K.fromPoints=function(e,t){if(e){for(var i=new K(t),n=0;n<e.length;n++){var r=g.create(e[n]);r&&(0===n?i.moveTo(r):i.lineTo(r))}return i}},K.fromArc=function(e,t){var i=new K(t),n=e.startAngle,r=e.pointAt(n);return i.moveTo(r.x,r.y),i.arc(n,e.endAngle,e.radiusX,e.radiusY,e.anticlockwise),i};var Q=V.extend({nodeType:"MultiPath",init:function(e){V.fn.init.call(this,e),this.paths=new G,this.paths.addObserver(this),D(this.options.stroke)||this.stroke("#000")},moveTo:function(e,t){var i=new K;return i.moveTo(e,t),this.paths.push(i),this},lineTo:function(e,t){return this.paths.length>0&&F(this.paths).lineTo(e,t),this},curveTo:function(e,t,i){return this.paths.length>0&&F(this.paths).curveTo(e,t,i),this},arc:function(e,t,i,n,r){return this.paths.length>0&&F(this.paths).arc(e,t,i,n,r),this},arcTo:function(e,t,i,n,r){return this.paths.length>0&&F(this.paths).arcTo(e,t,i,n,r),this},close:function(){return this.paths.length>0&&F(this.paths).close(),this},_bbox:function(e){return t(this.paths,!0,e)},rawBBox:function(){return t(this.paths,!1)},_containsPoint:function(e){for(var t=this.paths,i=0;i<t.length;i++)if(t[i]._containsPoint(e))return!0;return!1},_isOnPath:function(e){for(var t=this.paths,i=this.options.stroke.width,n=0;n<t.length;n++)if(t[n]._isOnPath(e,i))return!0;return!1},_clippedBBox:function(e){return i(this.paths,this.currentTransform(e))}});k.mixins.Paintable.extend(Q.fn),k.mixins.Measurable.extend(Q.fn);var J=V.extend({nodeType:"Image",init:function(e,t,i){V.fn.init.call(this,i),this.src(e),this.rect(t||new m.Rect)},src:function(e){return D(e)?(this.options.set("src",e),this):this.options.get("src")},bbox:function(e){var t=b(this.currentTransform(e));return this._rect.bbox(t)},rawBBox:function(){return this._rect.bbox()},_containsPoint:function(e){return this._rect.containsPoint(e)},_hasFill:function(){return this.src()}});n(J.fn,["rect"]);var X=f.extend({init:function(e,t,i){this.options=new w({offset:e,color:t,opacity:D(i)?i:1}),this.options.addObserver(this)}});!function(e,t){for(var i=0;i<t.length;i++)e[t[i]]=function(e){return function(t){return D(t)?(this.options.set(e,t),this):this.options.get(e)}}(t[i])}(X.fn,["offset","color","opacity"]),p(X.fn,R),X.create=function(e){if(D(e)){return e instanceof X?e:e.length>1?new X(e[0],e[1],e[2]):new X(e.offset,e.color,e.opacity)}};var Z=W.extend({_change:function(){this.optionsChange({field:"stops"})}}),ee=f.extend({nodeType:"gradient",init:function(e){this.stops=new Z(this._createStops(e.stops)),this.stops.addObserver(this),this._userSpace=e.userSpace,this.id=s()},userSpace:function(e){return D(e)?(this._userSpace=e,this.optionsChange(),this):this._userSpace},_createStops:function(e){var t,i=[];for(e=e||[],t=0;t<e.length;t++)i.push(X.create(e[t]));return i},addStop:function(e,t,i){this.stops.push(new X(e,t,i))},removeStop:function(e){var t=this.stops.indexOf(e);t>=0&&this.stops.splice(t,1)}});p(ee.fn,R,{optionsChange:function(e){this.trigger("optionsChange",{field:"gradient"+(e?"."+e.field:""),value:this})},geometryChange:function(){this.optionsChange()}});var te=ee.extend({init:function(e){e=e||{},ee.fn.init.call(this,e),this.start(e.start||new g),this.end(e.end||new g(1,0))}});r(te.fn,["start","end"]);var ie=ee.extend({init:function(e){e=e||{},ee.fn.init.call(this,e),this.center(e.center||new g),this._radius=D(e.radius)?e.radius:1,this._fallbackFill=e.fallbackFill},radius:function(e){return D(e)?(this._radius=e,this.geometryChange(),this):this._radius},fallbackFill:function(e){return D(e)?(this._fallbackFill=e,this.optionsChange(),this):this._fallbackFill}});r(ie.fn,["center"]);var ne=V.extend({nodeType:"Rect",init:function(e,t){V.fn.init.call(this,t),this.geometry(e||new m.Rect),D(this.options.stroke)||this.stroke("#000")},_bbox:function(e){return this._geometry.bbox(e)},rawBBox:function(){return this._geometry.bbox()},_containsPoint:function(e){return this._geometry.containsPoint(e)},_isOnPath:function(e){return this.geometry()._isOnPath(e,this.options.stroke.width/2)}});k.mixins.Paintable.extend(ne.fn),k.mixins.Measurable.extend(ne.fn),n(ne.fn,["geometry"]);var re=U.extend({init:function(e,t){U.fn.init.call(this,h.deepExtend({},this._defaults,t)),this._rect=e,this._fieldMap={}},_defaults:{alignContent:B,justifyContent:B,alignItems:B,spacing:0,orientation:"horizontal",lineSpacing:0,wrap:!0},rect:function(e){return e?(this._rect=e,this):this._rect},_initMap:function(){var e=this.options,t=this._fieldMap;"horizontal"==e.orientation?(t.sizeField="width",t.groupsSizeField="height",t.groupAxis="x",t.groupsAxis="y"):(t.sizeField="height",t.groupsSizeField="width",t.groupAxis="y",t.groupsAxis="x")},reflow:function(){if(this._rect&&0!==this.children.length){this._initMap(),this.options.transform&&this.transform(null);for(var e,t,i,n,r,s=this.options,o=this._fieldMap,a=this._rect,l=this._initGroups(),d=l.groups,h=l.groupsSize,f=o.sizeField,p=o.groupsSizeField,v=o.groupAxis,_=o.groupsAxis,b=c(h,a,s.alignContent,_,p),k=new g,w=new g,y=new m.Size,x=0;x<d.length;x++){n=d[x],k[v]=e=c(n.size,a,s.justifyContent,v,f),k[_]=b,y[f]=n.size,y[p]=n.lineSize,r=new m.Rect(k,y);for(var C=0;C<n.bboxes.length;C++)i=n.elements[C],t=n.bboxes[C],w[v]=e,w[_]=c(t.size[p],r,s.alignItems,_,p),u(w,t,i),e+=t.size[f]+s.spacing;b+=n.lineSize+s.lineSpacing}if(!s.wrap&&n.size>a.size[f]){var S=a.size[f]/r.size[f],T=r.topLeft().scale(S,S),D=r.size[p]*S,F=c(D,a,s.alignContent,_,p),E=m.transform();"x"===v?E.translate(a.origin.x-T.x,F-T.y):E.translate(F-T.x,a.origin.y-T.y),E.scale(S,S),this.transform(E)}}},_initGroups:function(){for(var e,t,i=this.options,n=this.children,r=i.lineSpacing,s=this._fieldMap.sizeField,o=-r,a=[],l=this._newGroup(),d=function(){a.push(l),o+=l.lineSize+r},c=0;c<n.length;c++)t=n[c],e=n[c].clippedBBox(),t.visible()&&e&&(i.wrap&&l.size+e.size[s]+i.spacing>this._rect.size[s]?0===l.bboxes.length?(this._addToGroup(l,e,t),d(),l=this._newGroup()):(d(),l=this._newGroup(),this._addToGroup(l,e,t)):this._addToGroup(l,e,t));return l.bboxes.length&&d(),{groups:a,groupsSize:o}},_addToGroup:function(e,t,i){e.size+=t.size[this._fieldMap.sizeField]+this.options.spacing,e.lineSize=Math.max(t.size[this._fieldMap.groupsSizeField],e.lineSize),e.bboxes.push(t),e.elements.push(i)},_newGroup:function(){return{lineSize:0,size:-this.options.spacing,bboxes:[],elements:[]}}});p(k,{align:function(e,t,i){d(e,t,i,"x","width")},Arc:j,Circle:$,Element:V,ElementsArray:W,fit:function(e,t){var i=e.clippedBBox().size,n=t.size;if(n.width<i.width||n.height<i.height){var r=y.min(n.width/i.width,n.height/i.height),s=e.transform()||m.transform();s.scale(r,r),e.transform(s)}},Gradient:ee,GradientStop:X,Group:U,Image:J,Layout:re,LinearGradient:te,MultiPath:Q,Path:K,RadialGradient:ie,Rect:ne,Segment:Y,stack:function(e){l(a(e),"x","y","width")},Text:q,vAlign:function(e,t,i){d(e,t,i,"y","height")},vStack:function(e){l(a(e),"y","x","height")},vWrap:function(e,t){return o(e,t,"y","x","height")},wrap:function(e,t){return o(e,t,"x","y","width")}})}(window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("drawing/parser",["drawing/shapes"],function(){!function(e){function t(e,t,i){for(var n=t?0:1,r=0;r<e.length;r+=2)e.splice(r+n,0,i)}function i(e,t){if(e&&t)return t.scaleCopy(2).translate(-e.x,-e.y)}function n(e,t,i){return t=t.clone().scale(2/3),{controlOut:t.clone().translateWith(e.scaleCopy(1/3)),controlIn:t.translateWith(i.scaleCopy(1/3))}}var r=window.kendo,s=r.drawing,o=r.geometry,a=r.Class,l=o.Point,d=r.deepExtend,c=e.trim,u=r.util,h=u.last,f=/([a-df-z]{1})([^a-df-z]*)(z)?/gi,p=/[,\s]?([+\-]?(?:\d*\.\d+|\d+)(?:[eE][+\-]?\d+)?)/g,m=a.extend({parse:function(e,t){var i,n=new s.MultiPath(t),r=new l;return e.replace(f,function(e,t,s,o){var a=t.toLowerCase(),l=a===t,d=function(e){var t=[];return e.replace(p,function(e,i){t.push(parseFloat(i))}),t}(c(s));if("m"===a&&(l?(r.x+=d[0],r.y+=d[1]):(r.x=d[0],r.y=d[1]),n.moveTo(r.x,r.y),d.length>2&&(a="l",d.splice(0,2))),g[a])g[a](n,{parameters:d,position:r,isRelative:l,previousCommand:i}),o&&"z"===o.toLowerCase()&&n.close();else if("m"!==a)throw new Error("Error while parsing SVG path. Unsupported command: "+a);i=a}),n}}),g={l:function(e,t){for(var i=t.parameters,n=t.position,r=0;r<i.length;r+=2){var s=new l(i[r],i[r+1]);t.isRelative&&s.translateWith(n),e.lineTo(s.x,s.y),n.x=s.x,n.y=s.y}},c:function(e,t){for(var i,n,r,s=t.parameters,o=t.position,a=0;a<s.length;a+=6)i=new l(s[a],s[a+1]),n=new l(s[a+2],s[a+3]),r=new l(s[a+4],s[a+5]),t.isRelative&&(n.translateWith(o),i.translateWith(o),r.translateWith(o)),e.curveTo(i,n,r),o.x=r.x,o.y=r.y},v:function(e,i){var n=i.isRelative?0:i.position.x;t(i.parameters,!0,n),this.l(e,i)},h:function(e,i){var n=i.isRelative?0:i.position.y;t(i.parameters,!1,n),this.l(e,i)},a:function(e,t){for(var i=t.parameters,n=t.position,r=0;r<i.length;r+=7){var s=i[r],o=i[r+1],a=i[r+3],d=i[r+4],c=new l(i[r+5],i[r+6]);t.isRelative&&c.translateWith(n),e.arcTo(c,s,o,a,d),n.x=c.x,n.y=c.y}},s:function(e,t){var n,r,s,o,a=t.parameters,d=t.position,c=t.previousCommand;"s"!=c&&"c"!=c||(o=h(h(e.paths).segments).controlIn());for(var u=0;u<a.length;u+=4)s=new l(a[u],a[u+1]),r=new l(a[u+2],a[u+3]),t.isRelative&&(s.translateWith(d),r.translateWith(d)),n=o?i(o,d):d.clone(),o=s,e.curveTo(n,s,r),d.x=r.x,d.y=r.y},q:function(e,t){for(var i,r,s,o=t.parameters,a=t.position,d=0;d<o.length;d+=4)s=new l(o[d],o[d+1]),r=new l(o[d+2],o[d+3]),t.isRelative&&(s.translateWith(a),r.translateWith(a)),i=n(a,s,r),e.curveTo(i.controlOut,i.controlIn,r),a.x=r.x,a.y=r.y},t:function(e,t){var r,s,o,a=t.parameters,d=t.position,c=t.previousCommand;if("q"==c||"t"==c){var u=h(h(e.paths).segments);s=u.controlIn().clone().translateWith(d.scaleCopy(-1/3)).scale(1.5)}for(var f=0;f<a.length;f+=2)o=new l(a[f],a[f+1]),t.isRelative&&o.translateWith(d),s=s?i(s,d):d.clone(),r=n(d,s,o),e.curveTo(r.controlOut,r.controlIn,o),d.x=o.x,d.y=o.y}};m.current=new m,s.Path.parse=function(e,t){return m.current.parse(e,t)},d(s,{PathParser:m})}(window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("drawing/search",["drawing/shapes"],function(){!function(e){function t(e,t){return e._zIndex<t._zIndex?1:e._zIndex>t._zIndex?-1:0}var i=window.kendo,n=i.drawing,r=i.geometry,s=i.Class,o=r.Rect,a=i.deepExtend,l=e.isArray,d=e.inArray,c=Math,u=s.extend({init:function(){this.shapes=[]},_add:function(e,t){this.shapes.push({bbox:t,shape:e}),e._quadNode=this},pointShapes:function(e){for(var t=this.shapes,i=t.length,n=[],r=0;r<i;r++)t[r].bbox.containsPoint(e)&&n.push(t[r].shape);return n},insert:function(e,t){this._add(e,t)},remove:function(e){for(var t=this.shapes,i=t.length,n=0;n<i;n++)if(t[n].shape===e){t.splice(n,1);break}}}),h=u.extend({init:function(e){u.fn.init.call(this),this.children=[],this.rect=e},inBounds:function(e){var t=this.rect,i=t.bottomRight(),n=e.bottomRight(),r=t.origin.x<=e.origin.x&&t.origin.y<=e.origin.y&&n.x<=i.x&&n.y<=i.y;return r},pointShapes:function(e){for(var t=this.children,i=t.length,n=u.fn.pointShapes.call(this,e),r=0;r<i;r++)n=n.concat(t[r].pointShapes(e));return n},insert:function(e,t){var i=!1,n=this.children,r=n.length;if(this.inBounds(t)){if(!r&&this.shapes.length<4)this._add(e,t);else{r||this._initChildren();for(var s=0;s<n.length;s++)if(n[s].insert(e,t)){i=!0;break}i||this._add(e,t)}i=!0}return i},_initChildren:function(){var e,t,i=this.rect,n=this.children,r=this.shapes,s=i.center(),a=i.width()/2,l=i.height()/2;for(n.push(new h(new o(i.origin.x,i.origin.y,a,l)),new h(new o(s.x,i.origin.y,a,l)),new h(new o(i.origin.x,s.y,a,l)),new h(new o(s.x,s.y,a,l))),t=r.length-1;t>=0;t--)for(e=0;e<n.length;e++)if(n[e].insert(r[t].shape,r[t].bbox)){r.splice(t,1);break}}}),f=s.extend({ROOT_SIZE:1e3,init:function(){this.initRoots()},initRoots:function(){this.rootMap={},this.root=new u,this.rootElements=[]},clear:function(){for(var e=this.rootElements,t=0;t<e.length;t++)this.remove(e[t]);this.initRoots()},pointShape:function(e){var i=this.ROOT_SIZE,n=this.root.pointShapes(e),r=(this.rootMap[c.floor(e.x/i)]||{})[c.floor(e.y/i)];r&&(n=n.concat(r.pointShapes(e))),this.assignZindex(n),n.sort(t);for(var s=0;s<n.length;s++)if(n[s].containsPoint(e))return n[s]},assignZindex:function(e){for(var t,i,n,r,s=0;s<e.length;s++){for(t=e[s],n=0,i=c.pow(1e4,75),r=[];t;)r.push(t),t=t.parent;for(;r.length;)t=r.pop(),n+=(d(t,t.parent?t.parent.children:this.rootElements)+1)*i,i/=1e4;e[s]._zIndex=n}},optionsChange:function(e){"transform"!=e.field&&"stroke.width"!=e.field||this.bboxChange(e.element)},geometryChange:function(e){this.bboxChange(e.element)},bboxChange:function(e){if("Group"===e.nodeType)for(var t=0;t<e.children.length;t++)this.bboxChange(e.children[t]);else e._quadNode&&(e._quadNode.remove(e),this._insertShape(e))},add:function(e){var t=l(e)?e.slice(0):[e];this.rootElements.push.apply(this.rootElements,t),this._insert(t)},childrenChange:function(e){if("remove"==e.action)for(var t=0;t<e.items.length;t++)this.remove(e.items[t]);else this._insert(Array.prototype.slice.call(e.items,0))},_insert:function(e){for(var t;e.length>0;)(t=e.pop()).addObserver(this),"Group"==t.nodeType?e.push.apply(e,t.children):this._insertShape(t)},_insertShape:function(e){var t=e.bbox(),i=this.ROOT_SIZE,n=this.getSectors(t),r=n[0][0],s=n[1][0];this.inRoot(n)?this.root.insert(e,t):(this.rootMap[r]||(this.rootMap[r]={}),this.rootMap[r][s]||(this.rootMap[r][s]=new h(new o([r*i,s*i],[i,i]))),this.rootMap[r][s].insert(e,t))},remove:function(e){if(e.removeObserver(this),"Group"==e.nodeType)for(var t=e.children,i=0;i<t.length;i++)this.remove(t[i]);else e._quadNode&&(e._quadNode.remove(e),delete e._quadNode)},inRoot:function(e){return e[0].length>1||e[1].length>1},getSectors:function(e){for(var t=this.ROOT_SIZE,i=e.bottomRight(),n=c.floor(i.x/t),r=c.floor(i.y/t),s=[[],[]],o=c.floor(e.origin.x/t);o<=n;o++)s[0].push(o);for(var a=c.floor(e.origin.y/t);a<=r;a++)s[1].push(a);return s}});a(n,{ShapesQuadTree:f})}(window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("drawing/svg",["drawing/shapes","util/main"],function(){!function(e){function t(e){return"url("+function(){var e=document.getElementsByTagName("base")[0],t="",i=document.location.href,n=i.indexOf("#");e&&!o.support.browser.msie&&(-1!==n&&(i=i.substring(0,n)),t=i);return t}()+"#"+e+")"}function i(e){var t=new C,i=e.clippedBBox();if(i){var n=i.getOrigin(),r=new d.Group;r.transform(l.transform().translate(-n.x,-n.y)),r.children.push(e),e=r}t.load([e]);var s="<?xml version='1.0' ?><svg xmlns='"+k+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>"+t.render()+"</svg>";return t.destroy(),s}function n(e,t){return"clip"==e||"fill"==e&&(!t||t.nodeType==b)}function r(e){if(!e||!e.indexOf||e.indexOf("&")<0)return e;var t=r._element;return t.innerHTML=e,t.textContent||t.innerText}var s=document,o=window.kendo,a=o.deepExtend,l=o.geometry,d=o.drawing,c=d.BaseNode,u=o.util,h=u.defined,f=u.isTransparent,p=u.renderAttr,m=u.renderAllAttr,g=u.renderTemplate,v=e.inArray,_=d.DASH_ARRAYS,b="gradient",k="http://www.w3.org/2000/svg",w="transform",y=d.Surface.extend({init:function(e,t){d.Surface.fn.init.call(this,e,t),this._root=new C(this.options),O(this.element[0],this._template(this)),this._rootElement=this.element[0].firstElementChild,function(e){var t;try{t=e.getScreenCTM?e.getScreenCTM():null}catch(e){}if(t){var i=-t.e%1,n=-t.f%1,r=e.style;0===i&&0===n||(r.left=i+"px",r.top=n+"px")}}(this._rootElement),this._root.attachTo(this._rootElement),this.element.on("click.kendo",this._click),this.element.on("mouseover.kendo",this._mouseenter),this.element.on("mouseout.kendo",this._mouseleave),this.element.on("mousemove.kendo",this._mousemove),this.resize()},type:"svg",destroy:function(){this._root&&(this._root.destroy(),this._root=null,this._rootElement=null,this.element.off(".kendo")),d.Surface.fn.destroy.call(this)},translate:function(e){var t=o.format("{0} {1} {2} {3}",Math.round(e.x),Math.round(e.y),this._size.width,this._size.height);this._offset=e,this._rootElement.setAttribute("viewBox",t)},draw:function(e){d.Surface.fn.draw.call(this,e),this._root.load([e])},clear:function(){d.Surface.fn.clear.call(this),this._root.clear()},svg:function(){return"<?xml version='1.0' ?>"+this._template(this)},exportVisual:function(){var e=this._visual,t=this._offset;if(t){var i=new d.Group;i.children.push(e),i.transform(l.transform().translate(-t.x,-t.y)),e=i}return e},_resize:function(){this._offset&&this.translate(this._offset)},_template:g("<svg style='width: 100%; height: 100%; overflow: hidden;' xmlns='"+k+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>#= d._root.render() #</svg>")}),x=c.extend({init:function(e){c.fn.init.call(this,e),this.definitions={}},destroy:function(){this.element&&(this.element._kendoNode=null,this.element=null),this.clearDefinitions(),c.fn.destroy.call(this)},load:function(e,t){var i,n,r,s,o=this.element;for(s=0;s<e.length;s++)n=e[s],r=n.children,i=new B[n.nodeType](n),h(t)?this.insertAt(i,t):this.append(i),i.createDefinitions(),r&&r.length>0&&i.load(r),o&&i.attachTo(o,t)},root:function(){for(var e=this;e.parent;)e=e.parent;return e},attachTo:function(e,t){var i=s.createElement("div");O(i,"<svg xmlns='"+k+"' version='1.1'>"+this.render()+"</svg>");var n=i.firstChild.firstChild;n&&(h(t)?e.insertBefore(n,e.childNodes[t]||null):e.appendChild(n),this.setElement(n))},setElement:function(e){var t,i,n=this.childNodes;for(this.element&&(this.element._kendoNode=null),this.element=e,this.element._kendoNode=this,i=0;i<n.length;i++)t=e.childNodes[i],n[i].setElement(t)},clear:function(){this.clearDefinitions(),this.element&&(this.element.innerHTML="");for(var e=this.childNodes,t=0;t<e.length;t++)e[t].destroy();this.childNodes=[]},removeSelf:function(){if(this.element){var e=this.element.parentNode;e&&e.removeChild(this.element),this.element=null}c.fn.removeSelf.call(this)},template:g("#= d.renderChildren() #"),render:function(){return this.template(this)},renderChildren:function(){var e,t=this.childNodes,i="";for(e=0;e<t.length;e++)i+=t[e].render();return i},optionsChange:function(e){var t=e.field,i=e.value;"visible"===t?this.css("display",i?"":"none"):V[t]&&n(t,i)?this.updateDefinition(t,i):"opacity"===t&&this.attr("opacity",i),c.fn.optionsChange.call(this,e)},attr:function(e,t){this.element&&this.element.setAttribute(e,t)},allAttr:function(e){for(var t=0;t<e.length;t++)this.attr(e[t][0],e[t][1])},css:function(e,t){this.element&&(this.element.style[e]=t)},allCss:function(e){for(var t=0;t<e.length;t++)this.css(e[t][0],e[t][1])},removeAttr:function(e){this.element&&this.element.removeAttribute(e)},mapTransform:function(e){var t=[];return e&&t.push([w,"matrix("+e.matrix().toString(6)+")"]),t},renderTransform:function(){return m(this.mapTransform(this.srcElement.transform()))},transformChange:function(e){e?this.allAttr(this.mapTransform(e)):this.removeAttr(w)},mapStyle:function(){var e=this.srcElement.options,t=[["cursor",e.cursor]];return!1===e.visible&&t.push(["display","none"]),t},renderStyle:function(){return p("style",u.renderStyle(this.mapStyle(!0)))},renderOpacity:function(){return p("opacity",this.srcElement.options.opacity)},createDefinitions:function(){var e,t,i,r,s=this.srcElement,o=this.definitions;if(s){i=s.options;for(t in V)(e=i.get(t))&&n(t,e)&&(o[t]=e,r=!0);r&&this.definitionChange({action:"add",definitions:o})}},definitionChange:function(e){this.parent&&this.parent.definitionChange(e)},updateDefinition:function(e,i){var n=this.definitions,r=n[e],s=V[e],o={};r&&(o[e]=r,this.definitionChange({action:"remove",definitions:o}),delete n[e]),i?(o[e]=i,this.definitionChange({action:"add",definitions:o}),n[e]=i,this.attr(s,t(i.id))):r&&this.removeAttr(s)},clearDefinitions:function(){var e,t=this.definitions;for(e in t){this.definitionChange({action:"remove",definitions:t}),this.definitions={};break}},renderDefinitions:function(){return m(this.mapDefinitions())},mapDefinitions:function(){var e,i=this.definitions,n=[];for(e in i)n.push([V[e],t(i[e].id)]);return n}}),C=x.extend({init:function(e){x.fn.init.call(this),this.options=e,this.defs=new S},attachTo:function(e){this.element=e,this.defs.attachTo(e.firstElementChild)},clear:function(){c.fn.clear.call(this)},template:g("#=d.defs.render()##= d.renderChildren() #"),definitionChange:function(e){this.defs.definitionChange(e)}}),S=x.extend({init:function(){x.fn.init.call(this),this.definitionMap={}},attachTo:function(e){this.element=e},template:g("<defs>#= d.renderChildren()#</defs>"),definitionChange:function(e){var t=e.definitions,i=e.action;"add"==i?this.addDefinitions(t):"remove"==i&&this.removeDefinitions(t)},createDefinition:function(e,t){var i;return"clip"==e?i=T:"fill"==e&&(t instanceof d.LinearGradient?i=N:t instanceof d.RadialGradient&&(i=P)),new i(t)},addDefinitions:function(e){for(var t in e)this.addDefinition(t,e[t])},addDefinition:function(e,t){var i,n,r=this.definitionMap,s=t.id,o=this.element;(n=r[s])?n.count++:(i=this.createDefinition(e,t),r[s]={element:i,count:1},this.append(i),o&&i.attachTo(this.element))},removeDefinitions:function(e){for(var t in e)this.removeDefinition(e[t])},removeDefinition:function(e){var t,i=this.definitionMap,n=e.id;(t=i[n])&&(t.count--,0===t.count&&(this.remove(v(t.element,this.childNodes),1),delete i[n]))}}),T=x.extend({init:function(e){x.fn.init.call(this),this.srcElement=e,this.id=e.id,this.load([e])},template:g("<clipPath id='#=d.id#'>#= d.renderChildren()#</clipPath>")}),D=x.extend({template:g("<g#= d.renderTransform() + d.renderStyle() + d.renderOpacity() + d.renderDefinitions()#>#= d.renderChildren() #</g>"),optionsChange:function(e){e.field==w&&this.transformChange(e.value),x.fn.optionsChange.call(this,e)}}),F=x.extend({geometryChange:function(){this.attr("d",this.renderData()),this.invalidate()},optionsChange:function(e){switch(e.field){case"fill":e.value?this.allAttr(this.mapFill(e.value)):this.removeAttr("fill");break;case"fill.color":this.allAttr(this.mapFill({color:e.value}));break;case"stroke":e.value?this.allAttr(this.mapStroke(e.value)):this.removeAttr("stroke");break;case w:this.transformChange(e.value);break;default:var t=this.attributeMap[e.field];t&&this.attr(t,e.value)}x.fn.optionsChange.call(this,e)},attributeMap:{"fill.opacity":"fill-opacity","stroke.color":"stroke","stroke.width":"stroke-width","stroke.opacity":"stroke-opacity"},content:function(){this.element&&(this.element.textContent=this.srcElement.content())},renderData:function(){return this.printPath(this.srcElement)},printPath:function(e){var t=e.segments,i=t.length;if(i>0){var n,r,s,o,a=[];for(o=1;o<i;o++)(r=this.segmentType(t[o-1],t[o]))!==s&&(s=r,a.push(r)),"L"===r?a.push(this.printPoints(t[o].anchor())):a.push(this.printPoints(t[o-1].controlOut(),t[o].controlIn(),t[o].anchor()));return n="M"+this.printPoints(t[0].anchor())+" "+a.join(" "),e.options.closed&&(n+="Z"),n}},printPoints:function(){var e,t=arguments,i=t.length,n=[];for(e=0;e<i;e++)n.push(t[e].toString(3));return n.join(" ")},segmentType:function(e,t){return e.controlOut()&&t.controlIn()?"C":"L"},mapStroke:function(e){var t=[];return e&&!f(e.color)?(t.push(["stroke",e.color]),t.push(["stroke-width",e.width]),t.push(["stroke-linecap",this.renderLinecap(e)]),t.push(["stroke-linejoin",e.lineJoin]),h(e.opacity)&&t.push(["stroke-opacity",e.opacity]),h(e.dashType)&&t.push(["stroke-dasharray",this.renderDashType(e)])):t.push(["stroke","none"]),t},renderStroke:function(){return m(this.mapStroke(this.srcElement.options.stroke))},renderDashType:function(e){var t=e.width||1,i=e.dashType;if(i&&"solid"!=i){var n,r=_[i.toLowerCase()],s=[];for(n=0;n<r.length;n++)s.push(r[n]*t);return s.join(" ")}},renderLinecap:function(e){var t=e.dashType,i=e.lineCap;return t&&"solid"!=t?"butt":i},mapFill:function(e){var t=[];return e&&e.nodeType==b||(e&&!f(e.color)?(t.push(["fill",e.color]),h(e.opacity)&&t.push(["fill-opacity",e.opacity])):t.push(["fill","none"])),t},renderFill:function(){return m(this.mapFill(this.srcElement.options.fill))},template:g("<path #= d.renderStyle() # #= d.renderOpacity() # #= kendo.util.renderAttr('d', d.renderData()) # #= d.renderStroke() # #= d.renderFill() # #= d.renderDefinitions() # #= d.renderTransform() #></path>")}),E=F.extend({renderData:function(){return this.printPath(this.srcElement.toPath())}}),R=F.extend({renderData:function(){var e=this.srcElement.paths;if(e.length>0){var t,i=[];for(t=0;t<e.length;t++)i.push(this.printPath(e[t]));return i.join(" ")}}}),A=F.extend({geometryChange:function(){var e=this.center();this.attr("cx",e.x),this.attr("cy",e.y),this.attr("r",this.radius()),this.invalidate()},center:function(){return this.srcElement.geometry().center},radius:function(){return this.srcElement.geometry().radius},template:g("<circle #= d.renderStyle() # #= d.renderOpacity() # cx='#= d.center().x #' cy='#= d.center().y #' r='#= d.radius() #' #= d.renderStroke() # #= d.renderFill() # #= d.renderDefinitions() # #= d.renderTransform() # ></circle>")}),I=F.extend({geometryChange:function(){var e=this.pos();this.attr("x",e.x),this.attr("y",e.y),this.invalidate()},optionsChange:function(e){"font"===e.field?(this.attr("style",u.renderStyle(this.mapStyle())),this.geometryChange()):"content"===e.field&&F.fn.content.call(this,this.srcElement.content()),F.fn.optionsChange.call(this,e)},mapStyle:function(e){var t=F.fn.mapStyle.call(this,e),i=this.srcElement.options.font;return e&&(i=o.htmlEncode(i)),t.push(["font",i]),t},pos:function(){var e=this.srcElement.position(),t=this.srcElement.measure();return e.clone().setY(e.y+t.baseline)},renderContent:function(){var e=this.srcElement.content();return e=r(e),e=o.htmlEncode(e)},template:g("<text #= d.renderStyle() # #= d.renderOpacity() # x='#= this.pos().x #' y='#= this.pos().y #' #= d.renderStroke() # #= d.renderTransform() # #= d.renderDefinitions() # #= d.renderFill() #>#= d.renderContent() #</text>")}),M=F.extend({geometryChange:function(){this.allAttr(this.mapPosition()),this.invalidate()},optionsChange:function(e){"src"===e.field&&this.allAttr(this.mapSource()),F.fn.optionsChange.call(this,e)},mapPosition:function(){var e=this.srcElement.rect(),t=e.topLeft();return[["x",t.x],["y",t.y],["width",e.width()+"px"],["height",e.height()+"px"]]},renderPosition:function(){return m(this.mapPosition())},mapSource:function(e){var t=this.srcElement.src();return e&&(t=o.htmlEncode(t)),[["xlink:href",t]]},renderSource:function(){return m(this.mapSource(!0))},template:g("<image preserveAspectRatio='none' #= d.renderStyle() # #= d.renderTransform()# #= d.renderOpacity() # #= d.renderPosition() # #= d.renderSource() # #= d.renderDefinitions()#></image>")}),H=x.extend({template:g("<stop #=d.renderOffset()# #=d.renderStyle()# />"),renderOffset:function(){return p("offset",this.srcElement.offset())},mapStyle:function(){var e=this.srcElement;return[["stop-color",e.color()],["stop-opacity",e.opacity()]]},optionsChange:function(e){"offset"==e.field?this.attr(e.field,e.value):"color"!=e.field&&"opacity"!=e.field||this.css("stop-"+e.field,e.value)}}),z=x.extend({init:function(e){x.fn.init.call(this,e),this.id=e.id,this.loadStops()},loadStops:function(){var e,t,i=this.srcElement,n=i.stops,r=this.element;for(t=0;t<n.length;t++)e=new H(n[t]),this.append(e),r&&e.attachTo(r)},optionsChange:function(e){"gradient.stops"==e.field?(c.fn.clear.call(this),this.loadStops()):e.field==b&&this.allAttr(this.mapCoordinates())},renderCoordinates:function(){return m(this.mapCoordinates())},mapSpace:function(){return["gradientUnits",this.srcElement.userSpace()?"userSpaceOnUse":"objectBoundingBox"]}}),N=z.extend({template:g("<linearGradient id='#=d.id#' #=d.renderCoordinates()#>#= d.renderChildren()#</linearGradient>"),mapCoordinates:function(){var e=this.srcElement,t=e.start(),i=e.end(),n=[["x1",t.x],["y1",t.y],["x2",i.x],["y2",i.y],this.mapSpace()];return n}}),P=z.extend({template:g("<radialGradient id='#=d.id#' #=d.renderCoordinates()#>#= d.renderChildren()#</radialGradient>"),mapCoordinates:function(){var e=this.srcElement,t=e.center(),i=e.radius(),n=[["cx",t.x],["cy",t.y],["r",i],this.mapSpace()];return n}}),L=F.extend({geometryChange:function(){var e=this.srcElement.geometry();this.attr("x",e.origin.x),this.attr("y",e.origin.y),this.attr("width",e.size.width),this.attr("height",e.size.height),this.invalidate()},size:function(){return this.srcElement.geometry().size},origin:function(){return this.srcElement.geometry().origin},template:g("<rect #= d.renderStyle() # #= d.renderOpacity() # x='#= d.origin().x #' y='#= d.origin().y #' width='#= d.size().width #' height='#= d.size().height #'#= d.renderStroke() # #= d.renderFill() # #= d.renderDefinitions() # #= d.renderTransform() # />")}),B={Group:D,Text:I,Path:F,MultiPath:R,Circle:A,Arc:E,Image:M,Rect:L},O=function(e,t){e.innerHTML=t};!function(){var e="<svg xmlns='"+k+"'></svg>",t=s.createElement("div"),i="undefined"!=typeof DOMParser;t.innerHTML=e,i&&t.firstChild.namespaceURI!=k&&(O=function(e,t){var i=new DOMParser,n=i.parseFromString(t,"text/xml"),r=s.adoptNode(n.documentElement);e.innerHTML="",e.appendChild(r)})}(),r._element=document.createElement("span");var V={clip:"clip-path",fill:"fill"};o.support.svg=s.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),o.support.svg&&d.SurfaceFactory.current.register("svg",y,10),a(d,{exportSVG:function(t,n){var r=i(t);n&&n.raw||(r="data:image/svg+xml;base64,"+u.encodeBase64(r));return e.Deferred().resolve(r).promise()},svg:{ArcNode:E,CircleNode:A,ClipNode:T,DefinitionNode:S,GradientStopNode:H,GroupNode:D,ImageNode:M,LinearGradientNode:N,MultiPathNode:R,Node:x,PathNode:F,RadialGradientNode:P,RectNode:L,RootNode:C,Surface:y,TextNode:I,_exportGroup:i}})}(window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("drawing/canvas",["drawing/search","kendo.color"],function(){!function(e){var t=document,i=window.kendo,n=i.deepExtend,r=i.util,s=r.defined,o=r.isTransparent,a=r.renderTemplate,l=r.valueOrDefault,d=i.geometry,c=i.drawing,u=c.BaseNode,h=e.proxy,f=c.DASH_ARRAYS,p=c.Surface.extend({init:function(t,i){c.Surface.fn.init.call(this,t,i),this.element[0].innerHTML=this._template(this);var n=this.element[0].firstElementChild;n.width=e(t).width(),n.height=e(t).height(),this._rootElement=n,this._root=new v(n)},destroy:function(){c.Surface.fn.destroy.call(this),this._root&&(this._root.destroy(),this._root=null),this._searchTree&&(this._searchTree.clear(),delete this._searchTree),this.element.off(".kendo")},type:"canvas",draw:function(e){c.Surface.fn.draw.call(this,e),this._root.load([e],void 0,this.options.cors),this._searchTree&&this._searchTree.add([e])},clear:function(){c.Surface.fn.clear.call(this),this._root.clear(),this._searchTree&&this._searchTree.clear()},eventTarget:function(e){if(this._searchTree){var t=this._surfacePoint(e),i=this._searchTree.pointShape(t);return i}},image:function(){var t=this._root,i=this._rootElement,n=[];t.traverse(function(e){e.loading&&n.push(e.loading)});var r=e.Deferred();return e.when.apply(e,n).done(function(){t._invalidate();try{var e=i.toDataURL();r.resolve(e)}catch(e){r.reject(e)}}).fail(function(e){r.reject(e)}),r.promise()},suspendTracking:function(){c.Surface.fn.suspendTracking.call(this),this._searchTree&&(this._searchTree.clear(),delete this._searchTree)},resumeTracking:function(){if(c.Surface.fn.resumeTracking.call(this),!this._searchTree){this._searchTree=new c.ShapesQuadTree;for(var e=this._root.childNodes,t=[],i=0;i<e.length;i++)t.push(e[i].srcElement);this._searchTree.add(t)}},_resize:function(){this._rootElement.width=this._size.width,this._rootElement.height=this._size.height,this._root.invalidate()},_template:a("<canvas style='width: 100%; height: 100%;'></canvas>"),_enableTracking:function(){this._searchTree=new c.ShapesQuadTree,this._mouseTrackHandler=h(this._trackMouse,this),this.element.on("click.kendo",this._mouseTrackHandler),this.element.on("mousemove.kendo",this._mouseTrackHandler),c.Surface.fn._enableTracking.call(this)},_trackMouse:function(e){if(!this._suspendedTracking){var t=this.eventTarget(e);if("click"!=e.type){var i=this._currentShape;i&&i!==t&&this.trigger("mouseleave",{element:i,originalEvent:e,type:"mouseleave"}),t&&i!==t&&this.trigger("mouseenter",{element:t,originalEvent:e,type:"mouseenter"}),this.trigger("mousemove",{element:t,originalEvent:e,type:"mousemove"}),this._currentShape=t}else t&&this.trigger("click",{element:t,originalEvent:e,type:"click"})}}}),m=u.extend({init:function(e){u.fn.init.call(this,e),e&&this.initClip()},initClip:function(){var e=this.srcElement.clip();e&&(this.clip=e,e.addObserver(this))},clear:function(){this.srcElement&&this.srcElement.removeObserver(this),this.clearClip(),u.fn.clear.call(this)},clearClip:function(){this.clip&&(this.clip.removeObserver(this),delete this.clip)},setClip:function(e){this.clip&&(e.beginPath(),_.fn.renderPoints(e,this.clip),e.clip())},optionsChange:function(e){"clip"==e.field&&(this.clearClip(),this.initClip()),u.fn.optionsChange.call(this,e)},setTransform:function(e){if(this.srcElement){var t=this.srcElement.transform();t&&e.transform.apply(e,t.matrix().toArray(6))}},loadElements:function(e,t,i){var n,r,o,a;for(a=0;a<e.length;a++)r=e[a],o=r.children,n=new S[r.nodeType](r,i),o&&o.length>0&&n.load(o,t,i),s(t)?this.insertAt(n,t):this.append(n)},load:function(e,t,i){this.loadElements(e,t,i),this.invalidate()},setOpacity:function(e){if(this.srcElement){var t=this.srcElement.opacity();s(t)&&this.globalAlpha(e,t)}},globalAlpha:function(e,t){t&&e.globalAlpha&&(t*=e.globalAlpha),e.globalAlpha=t},visible:function(){var e=this.srcElement;return!e||e&&!1!==e.options.visible}}),g=m.extend({renderTo:function(e){if(this.visible()){e.save(),this.setTransform(e),this.setClip(e),this.setOpacity(e);for(var t=this.childNodes,i=0;i<t.length;i++){var n=t[i];n.visible()&&n.renderTo(e)}e.restore()}}});c.mixins.Traversable.extend(g.fn,"childNodes");var v=g.extend({init:function(e){g.fn.init.call(this),this.canvas=e,this.ctx=e.getContext("2d");var t=h(this._invalidate,this);this.invalidate=i.throttle(function(){i.animationFrame(t)},1e3/60)},destroy:function(){g.fn.destroy.call(this),this.canvas=null,this.ctx=null},load:function(e,t,i){this.loadElements(e,t,i),this._invalidate()},_invalidate:function(){this.ctx&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderTo(this.ctx))}});c.mixins.Traversable.extend(v.fn,"childNodes");var _=m.extend({renderTo:function(e){e.save(),this.setTransform(e),this.setClip(e),this.setOpacity(e),e.beginPath(),this.renderPoints(e,this.srcElement),this.setLineDash(e),this.setLineCap(e),this.setLineJoin(e),this.setFill(e),this.setStroke(e),e.restore()},setFill:function(e){var t=this.srcElement.options.fill,i=!1;return t&&("gradient"==t.nodeType?(this.setGradientFill(e,t),i=!0):o(t.color)||(e.fillStyle=t.color,e.save(),this.globalAlpha(e,t.opacity),e.fill(),e.restore(),i=!0)),i},setGradientFill:function(e,t){var n,r=this.srcElement.rawBBox();if(t instanceof c.LinearGradient){var s=t.start(),o=t.end();n=e.createLinearGradient(s.x,s.y,o.x,o.y)}else if(t instanceof c.RadialGradient){var a=t.center();n=e.createRadialGradient(a.x,a.y,0,a.x,a.y,t.radius())}!function(e,t){var n,r,s;for(s=0;s<t.length;s++)r=t[s],(n=i.parseColor(r.color())).a*=r.opacity(),e.addColorStop(r.offset(),n.toCssRgba())}(n,t.stops),e.save(),t.userSpace()||e.transform(r.width(),0,0,r.height(),r.origin.x,r.origin.y),e.fillStyle=n,e.fill(),e.restore()},setStroke:function(e){var t=this.srcElement.options.stroke;if(t&&!o(t.color)&&t.width>0)return e.strokeStyle=t.color,e.lineWidth=l(t.width,1),e.save(),this.globalAlpha(e,t.opacity),e.stroke(),e.restore(),!0},dashType:function(){var e=this.srcElement.options.stroke;if(e&&e.dashType)return e.dashType.toLowerCase()},setLineDash:function(e){var t=this.dashType();if(t&&"solid"!=t){var i=f[t];e.setLineDash?e.setLineDash(i):(e.mozDash=i,e.webkitLineDash=i)}},setLineCap:function(e){var t=this.dashType(),i=this.srcElement.options.stroke;t&&"solid"!==t?e.lineCap="butt":i&&i.lineCap&&(e.lineCap=i.lineCap)},setLineJoin:function(e){var t=this.srcElement.options.stroke;t&&t.lineJoin&&(e.lineJoin=t.lineJoin)},renderPoints:function(e,t){var i=t.segments;if(0!==i.length){var n=i[0],r=n.anchor();e.moveTo(r.x,r.y);for(var s=1;s<i.length;s++){n=i[s],r=n.anchor();var o=i[s-1],a=o.controlOut(),l=n.controlIn();a&&l?e.bezierCurveTo(a.x,a.y,l.x,l.y,r.x,r.y):e.lineTo(r.x,r.y)}t.options.closed&&e.closePath()}}}),b=_.extend({renderPoints:function(e){for(var t=this.srcElement.paths,i=0;i<t.length;i++)_.fn.renderPoints(e,t[i])}}),k=_.extend({renderPoints:function(e){var t=this.srcElement.geometry(),i=t.center,n=t.radius;e.arc(i.x,i.y,n,0,2*Math.PI)}}),w=_.extend({renderPoints:function(e){var t=this.srcElement.toPath();_.fn.renderPoints.call(this,e,t)}}),y=_.extend({renderTo:function(e){var t=this.srcElement,i=t.position(),n=t.measure();e.save(),this.setTransform(e),this.setClip(e),this.setOpacity(e),e.beginPath(),e.font=t.options.font,this.setFill(e)&&e.fillText(t.content(),i.x,i.y+n.baseline),this.setStroke(e)&&(this.setLineDash(e),e.strokeText(t.content(),i.x,i.y+n.baseline)),e.restore()}}),x=_.extend({init:function(t,i){_.fn.init.call(this,t),this.onLoad=h(this.onLoad,this),this.onError=h(this.onError,this),this.loading=e.Deferred();var n=this.img=new Image;i&&!/^data:/i.test(t.src())&&(n.crossOrigin=i),n.src=t.src(),n.complete?this.onLoad():(n.onload=this.onLoad,n.onerror=this.onError)},renderTo:function(e){"resolved"===this.loading.state()&&(e.save(),this.setTransform(e),this.setClip(e),this.drawImage(e),e.restore())},optionsChange:function(t){"src"===t.field?(this.loading=e.Deferred(),this.img.src=this.srcElement.src()):_.fn.optionsChange.call(this,t)},onLoad:function(){this.loading.resolve(),this.invalidate()},onError:function(){this.loading.reject(new Error("Unable to load image '"+this.img.src+"'. Check for connectivity and verify CORS headers."))},drawImage:function(e){var t=this.srcElement.rect(),i=t.topLeft();e.drawImage(this.img,i.x,i.y,t.width(),t.height())}}),C=_.extend({renderPoints:function(e){var t=this.srcElement.geometry(),i=t.origin,n=t.size;e.rect(i.x,i.y,n.width,n.height)}}),S={Group:g,Text:y,Path:_,MultiPath:b,Circle:k,Arc:w,Image:x,Rect:C};i.support.canvas=!!t.createElement("canvas").getContext,i.support.canvas&&c.SurfaceFactory.current.register("canvas",p,20),n(i.drawing,{exportImage:function(t,i){var r={width:"800px",height:"600px",cors:"Anonymous"},s=t.clippedBBox();if(s){var o=s.getOrigin(),a=new c.Group;a.transform(d.transform().translate(-o.x,-o.y)),a.children.push(t),t=a;var l=s.getSize();r.width=l.width+"px",r.height=l.height+"px"}i=n(r,i);var u=e("<div />").css({display:"none",width:i.width,height:i.height}).appendTo(document.body),h=new p(u,i);h.draw(t);var f=h.image();return f.always(function(){h.destroy(),u.remove()}),f},canvas:{ArcNode:w,CircleNode:k,GroupNode:g,ImageNode:x,MultiPathNode:b,Node:m,PathNode:_,RectNode:C,RootNode:v,Surface:p,TextNode:y}})}(window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("drawing/vml",["drawing/shapes","kendo.color"],function(){!function(e){function t(e){var t=l.createElement("kvml:"+e);return t.className="kvml",t}function i(e){for(var t=e.length,i=[],n=0;n<t;n++)i.push(e[n].scaleCopy(D).toString(0,","));return i.join(" ")}function n(e,t){var n=e.segments,r=n.length;if(r>0){var s,o,a,l,d=[];for(l=1;l<r;l++)(o=function(e,t){return e.controlOut()&&t.controlIn()?"c":"l"}(n[l-1],n[l]))!==a&&(a=o,d.push(o)),"l"===o?d.push(i([n[l].anchor()])):d.push(i([n[l-1].controlOut(),n[l].controlIn(),n[l].anchor()]));return s="m "+i([n[0].anchor()])+" "+d.join(" "),e.options.closed&&(s+=" x"),!0!==t&&(s+=" e"),s}}function r(e){return 0===e.indexOf("fill")||0===e.indexOf(E)}function s(e,t,i){var n=i*T(t.opacity(),1);return e?o(e,t.color(),n):o(t.color(),"#fff",1-n)}function o(e,t,i){var n=new k(e),r=new k(t),s=a(n.r,r.r,i),o=a(n.g,r.g,i),l=a(n.b,r.b,i);return new k(s,o,l).toHex()}function a(e,t,i){return d.round(i*t+(1-i)*e)}var l=document,d=Math,c=d.atan2,u=d.ceil,h=d.sqrt,f=window.kendo,p=f.deepExtend,m=e.noop,g=f.drawing,v=g.BaseNode,_=f.geometry,b=_.toMatrix,k=f.Color,w=f.util,y=w.isTransparent,x=w.defined,C=w.deg,S=w.round,T=w.valueOrDefault,D=100,F=D*D,E="gradient",R=g.Surface.extend({init:function(e,t){g.Surface.fn.init.call(this,e,t),function(){if(l.namespaces&&!l.namespaces.kvml){l.namespaces.add("kvml","urn:schemas-microsoft-com:vml");var e=l.styleSheets.length>30?l.styleSheets[0]:l.createStyleSheet();e.addRule(".kvml","behavior:url(#default#VML)")}}(),this.element.empty(),this._root=new I,this._root.attachTo(this.element[0]),this.element.on("click.kendo",this._click),this.element.on("mouseover.kendo",this._mouseenter),this.element.on("mouseout.kendo",this._mouseleave),this.element.on("mousemove.kendo",this._mousemove)},type:"vml",destroy:function(){this._root&&(this._root.destroy(),this._root=null,this.element.off(".kendo")),g.Surface.fn.destroy.call(this)},draw:function(e){g.Surface.fn.draw.call(this,e),this._root.load([e],void 0,null)},clear:function(){g.Surface.fn.clear.call(this),this._root.clear()}}),A=v.extend({init:function(e){v.fn.init.call(this,e),this.createElement(),this.attachReference()},observe:m,destroy:function(){this.element&&(this.element._kendoNode=null,this.element=null),v.fn.destroy.call(this)},clear:function(){this.element&&(this.element.innerHTML="");for(var e=this.childNodes,t=0;t<e.length;t++)e[t].destroy();this.childNodes=[]},removeSelf:function(){this.element&&(this.element.parentNode.removeChild(this.element),this.element=null),v.fn.removeSelf.call(this)},createElement:function(){this.element=l.createElement("div")},attachReference:function(){this.element._kendoNode=this},load:function(e,t,i,n){n=T(n,1),this.srcElement&&(n*=T(this.srcElement.options.opacity,1));for(var r=0;r<e.length;r++){var s=e[r],o=s.children,a=s.currentTransform(i),l=n*T(s.options.opacity,1),d=new ie[s.nodeType](s,a,l);o&&o.length>0&&d.load(o,t,a,n),x(t)?this.insertAt(d,t):this.append(d),d.attachTo(this.element,t)}},attachTo:function(e,t){x(t)?e.insertBefore(this.element,e.children[t]||null):e.appendChild(this.element)},optionsChange:function(e){"visible"==e.field&&this.css("display",!1!==e.value?"":"none")},setStyle:function(){this.allCss(this.mapStyle())},mapStyle:function(){var e=[];return this.srcElement&&!1===this.srcElement.options.visible&&e.push(["display","none"]),e},mapOpacityTo:function(e,t){var i=T(this.opacity,1);i*=T(t,1),e.push(["opacity",i])},attr:function(e,t){this.element&&(this.element[e]=t)},allAttr:function(e){for(var t=0;t<e.length;t++)this.attr(e[t][0],e[t][1])},css:function(e,t){this.element&&(this.element.style[e]=t)},allCss:function(e){for(var t=0;t<e.length;t++)this.css(e[t][0],e[t][1])}}),I=A.extend({createElement:function(){A.fn.createElement.call(this),this.allCss([["width","100%"],["height","100%"],["position","relative"],["visibility","visible"]])},attachReference:m}),M=f.Class.extend({init:function(e,t){this.srcElement=e,this.observer=t,e.addObserver(this)},geometryChange:function(){this.observer.optionsChange({field:"clip",value:this.srcElement})},clear:function(){this.srcElement.removeObserver(this)}}),H=A.extend({init:function(e){A.fn.init.call(this,e),e&&this.initClip()},observe:function(){v.fn.observe.call(this)},mapStyle:function(){var e=A.fn.mapStyle.call(this);return this.srcElement&&this.srcElement.clip()&&e.push(["clip",this.clipRect()]),e},optionsChange:function(e){"clip"==e.field&&(this.clearClip(),this.initClip(),this.setClip()),A.fn.optionsChange.call(this,e)},clear:function(){this.clearClip(),A.fn.clear.call(this)},initClip:function(){this.srcElement.clip()&&(this.clip=new M(this.srcElement.clip(),this),this.clip.observer=this)},clearClip:function(){this.clip&&(this.clip.clear(),this.clip=null,this.css("clip",this.clipRect()))},setClip:function(){this.clip&&this.css("clip",this.clipRect())},clipRect:function(){var e=ne,t=this.srcElement.clip();if(t){var i=this.clipBBox(t),n=i.topLeft(),r=i.bottomRight();e=f.format("rect({0}px {1}px {2}px {3}px)",n.y,r.x,r.y,n.x)}return e},clipBBox:function(e){var t=this.srcElement.rawBBox().topLeft(),i=e.rawBBox();return i.origin.translate(-t.x,-t.y),i}}),z=H.extend({createElement:function(){A.fn.createElement.call(this),this.setStyle()},attachTo:function(e,t){this.css("display","none"),A.fn.attachTo.call(this,e,t),!1!==this.srcElement.options.visible&&this.css("display","")},_attachTo:function(e){var t=document.createDocumentFragment();t.appendChild(this.element),e.appendChild(t)},mapStyle:function(){var e=H.fn.mapStyle.call(this);return e.push(["position","absolute"]),e.push(["white-space","nowrap"]),e},optionsChange:function(e){"transform"===e.field&&this.refreshTransform(),"opacity"===e.field&&this.refreshOpacity(),H.fn.optionsChange.call(this,e)},refreshTransform:function(e){var t,i=this.srcElement.currentTransform(e),n=this.childNodes,r=n.length;for(this.setClip(),t=0;t<r;t++)n[t].refreshTransform(i)},currentOpacity:function(){var e=T(this.srcElement.options.opacity,1);return this.parent&&this.parent.currentOpacity&&(e*=this.parent.currentOpacity()),e},refreshOpacity:function(){var e,t=this.childNodes,i=t.length,n=this.currentOpacity();for(e=0;e<i;e++)t[e].refreshOpacity(n)},initClip:function(){if(H.fn.initClip.call(this),this.clip){var e=this.clip.srcElement.bbox(this.srcElement.currentTransform());e&&(this.css("width",e.width()+e.origin.x),this.css("height",e.height()+e.origin.y))}},clipBBox:function(e){return e.bbox(this.srcElement.currentTransform())},clearClip:function(){H.fn.clearClip.call(this)}}),N=A.extend({init:function(e,t){this.opacity=t,A.fn.init.call(this,e)},createElement:function(){this.element=t("stroke"),this.setOpacity()},optionsChange:function(e){0===e.field.indexOf("stroke")&&this.setStroke()},refreshOpacity:function(e){this.opacity=e,this.setStroke()},setStroke:function(){this.allAttr(this.mapStroke())},setOpacity:function(){this.setStroke()},mapStroke:function(){var e=this.srcElement.options.stroke,t=[];if(e&&!y(e.color)&&0!==e.width){if(t.push(["on","true"]),t.push(["color",e.color]),t.push(["weight",(e.width||1)+"px"]),this.mapOpacityTo(t,e.opacity),x(e.dashType)&&t.push(["dashstyle",e.dashType]),x(e.lineJoin)&&t.push(["joinstyle",e.lineJoin]),x(e.lineCap)){var i=e.lineCap.toLowerCase();"butt"===i&&(i="butt"===i?"flat":i),t.push(["endcap",i])}}else t.push(["on","false"]);return t}}),P=A.extend({init:function(e,t,i){this.opacity=i,A.fn.init.call(this,e)},createElement:function(){this.element=t("fill"),this.setFill()},optionsChange:function(e){r(e.field)&&this.setFill()},refreshOpacity:function(e){this.opacity=e,this.setOpacity()},setFill:function(){this.allAttr(this.mapFill())},setOpacity:function(){this.setFill()},attr:function(e,t){var i=this.element;if(i){for(var n=e.split(".");n.length>1;)i=i[n.shift()];i[n[0]]=t}},mapFill:function(){var e=this.srcElement.fill(),t=[["on","false"]];return e&&(e.nodeType==E?t=this.mapGradient(e):y(e.color)||(t=this.mapFillColor(e))),t},mapFillColor:function(e){var t=[["on","true"],["color",e.color]];return this.mapOpacityTo(t,e.opacity),t},mapGradient:function(e){var t=this.srcElement.options,i=t.fallbackFill||e.fallbackFill&&e.fallbackFill();return e instanceof g.LinearGradient?this.mapLinearGradient(e):e instanceof g.RadialGradient&&e.supportVML?this.mapRadialGradient(e):i?this.mapFillColor(i):[["on","false"]]},mapLinearGradient:function(e){var t=e.start(),i=e.end(),n=w.deg(c(i.y-t.y,i.x-t.x)),r=[["on","true"],["type",E],["focus",0],["method","none"],["angle",270-n]];return this.addColors(r),r},mapRadialGradient:function(e){var t=this.srcElement.rawBBox(),i=e.center(),n=(i.x-t.origin.x)/t.width(),r=(i.y-t.origin.y)/t.height(),s=[["on","true"],["type","gradienttitle"],["focus","100%"],["focusposition",n+" "+r],["method","none"]];return this.addColors(s),s},addColors:function(e){for(var t,i=this.srcElement.options,n=T(this.opacity,1),r=[],o=i.fill.stops,a=i.baseColor,l=this.element.colors?"colors.value":"colors",c=s(a,o[0],n),u=s(a,o[o.length-1],n),h=0;h<o.length;h++)t=o[h],r.push(d.round(100*t.offset())+"% "+s(a,t,n));e.push([l,r.join(",")],["color",c],["color2",u])}}),L=A.extend({init:function(e,t){this.transform=t,A.fn.init.call(this,e)},createElement:function(){this.element=t("skew"),this.setTransform()},optionsChange:function(e){"transform"===e.field&&this.refresh(this.srcElement.currentTransform())},refresh:function(e){this.transform=e,this.setTransform()},transformOrigin:function(){return"-0.5,-0.5"},setTransform:function(){this.allAttr(this.mapTransform())},mapTransform:function(){var e=this.transform,t=[],i=b(e);return i?(i.round(4),t.push(["on","true"],["matrix",[i.a,i.c,i.b,i.d,0,0].join(",")],["offset",i.e+"px,"+i.f+"px"],["origin",this.transformOrigin()])):t.push(["on","false"]),t}}),B=H.extend({init:function(e,t,i){this.fill=this.createFillNode(e,t,i),this.stroke=new N(e,i),this.transform=this.createTransformNode(e,t),H.fn.init.call(this,e)},attachTo:function(e,t){this.fill.attachTo(this.element),this.stroke.attachTo(this.element),this.transform.attachTo(this.element),A.fn.attachTo.call(this,e,t)},createFillNode:function(e,t,i){return new P(e,t,i)},createTransformNode:function(e,t){return new L(e,t)},createElement:function(){this.element=t("shape"),this.setCoordsize(),this.setStyle()},optionsChange:function(e){r(e.field)?this.fill.optionsChange(e):0===e.field.indexOf("stroke")?this.stroke.optionsChange(e):"transform"===e.field?this.transform.optionsChange(e):"opacity"===e.field&&(this.fill.setOpacity(),this.stroke.setOpacity()),H.fn.optionsChange.call(this,e)},refreshTransform:function(e){this.transform.refresh(this.srcElement.currentTransform(e))},refreshOpacity:function(e){e*=T(this.srcElement.options.opacity,1),this.fill.refreshOpacity(e),this.stroke.refreshOpacity(e)},mapStyle:function(e,t){var i=H.fn.mapStyle.call(this);e&&t||(e=t=D),i.push(["position","absolute"],["width",e+"px"],["height",t+"px"]);var n=this.srcElement.options.cursor;return n&&i.push(["cursor",n]),i},setCoordsize:function(){this.allAttr([["coordorigin","0 0"],["coordsize",F+" "+F]])}}),O=A.extend({createElement:function(){this.element=t("path"),this.setPathData()},geometryChange:function(){this.setPathData()},setPathData:function(){this.attr("v",this.renderData())},renderData:function(){return n(this.srcElement)}}),V=B.extend({init:function(e,t,i){this.pathData=this.createDataNode(e),B.fn.init.call(this,e,t,i)},attachTo:function(e,t){this.pathData.attachTo(this.element),B.fn.attachTo.call(this,e,t)},createDataNode:function(e){return new O(e)},geometryChange:function(){this.pathData.geometryChange(),B.fn.geometryChange.call(this)}}),W=O.extend({renderData:function(){var e=this.srcElement.paths;if(e.length>0){var t,i,r=[];for(t=0;t<e.length;t++)i=t<e.length-1,r.push(n(e[t],i));return r.join(" ")}}}),U=V.extend({createDataNode:function(e){return new W(e)}}),q=L.extend({transformOrigin:function(){var e=this.srcElement.geometry().bbox(),t=e.center(),i=-u(t.x)/u(e.width()),n=-u(t.y)/u(e.height());return i+","+n}}),$=B.extend({createElement:function(){this.element=t("oval"),this.setStyle()},createTransformNode:function(e,t){return new q(e,t)},geometryChange:function(){B.fn.geometryChange.call(this),this.setStyle(),this.refreshTransform()},mapStyle:function(){var e=this.srcElement.geometry(),t=e.radius,i=e.center,n=u(2*t),r=B.fn.mapStyle.call(this,n,n);return r.push(["left",u(i.x-t)+"px"],["top",u(i.y-t)+"px"]),r}}),j=O.extend({renderData:function(){return n(this.srcElement.toPath())}}),G=V.extend({createDataNode:function(e){return new j(e)}}),Y=O.extend({createElement:function(){O.fn.createElement.call(this),this.attr("textpathok",!0)},renderData:function(){var e=this.srcElement.rect(),t=e.center();return"m "+i([new _.Point(e.topLeft().x,t.y)])+" l "+i([new _.Point(e.bottomRight().x,t.y)])}}),K=A.extend({createElement:function(){this.element=t("textpath"),this.attr("on",!0),this.attr("fitpath",!1),this.setStyle(),this.setString()},optionsChange:function(e){"content"===e.field?this.setString():this.setStyle(),A.fn.optionsChange.call(this,e)},mapStyle:function(){return[["font",this.srcElement.options.font]]},setString:function(){this.attr("string",this.srcElement.content())}}),Q=V.extend({init:function(e,t,i){this.path=new K(e),V.fn.init.call(this,e,t,i)},createDataNode:function(e){return new Y(e)},attachTo:function(e,t){this.path.attachTo(this.element),V.fn.attachTo.call(this,e,t)},optionsChange:function(e){"font"!==e.field&&"content"!==e.field||(this.path.optionsChange(e),this.pathData.geometryChange(e)),V.fn.optionsChange.call(this,e)}}),J=O.extend({renderData:function(){var e=this.srcElement.rect(),t=(new g.Path).moveTo(e.topLeft()).lineTo(e.topRight()).lineTo(e.bottomRight()).lineTo(e.bottomLeft()).close();return n(t)}}),X=L.extend({init:function(e,t,i){this.opacity=i,L.fn.init.call(this,e,t)},createElement:function(){this.element=t("fill"),this.attr("type","frame"),this.attr("rotate",!0),this.setOpacity(),this.setSrc(),this.setTransform()},optionsChange:function(e){"src"===e.field&&this.setSrc(),L.fn.optionsChange.call(this,e)},geometryChange:function(){this.refresh()},refreshOpacity:function(e){this.opacity=e,this.setOpacity()},setOpacity:function(){var e=[];this.mapOpacityTo(e,this.srcElement.options.opacity),this.allAttr(e)},setSrc:function(){this.attr("src",this.srcElement.src())},mapTransform:function(){var e,t,i=this.srcElement,n=i.rawBBox(),r=n.center(),s=D/2,o=D,a=n.width()/o,l=n.height()/o,d=0,u=this.transform;if(u){var f=b(u),p=h(f.a*f.a+f.b*f.b),m=h(f.c*f.c+f.d*f.d);a*=p,l*=m;var g=C(c(f.b,f.d)),v=C(c(-f.c,f.a));if(0!=(d=(g+v)/2)){var _=i.bbox().center();e=(_.x-s)/o,t=(_.y-s)/o}else e=(r.x*p+f.e-s)/o,t=(r.y*m+f.f-s)/o}else e=(r.x-s)/o,t=(r.y-s)/o;return a=S(a,4),l=S(l,4),e=S(e,4),t=S(t,4),d=S(d,4),[["size",a+","+l],["position",e+","+t],["angle",d]]}}),Z=V.extend({createFillNode:function(e,t,i){return new X(e,t,i)},createDataNode:function(e){return new J(e)},optionsChange:function(e){"src"!==e.field&&"transform"!==e.field||this.fill.optionsChange(e),V.fn.optionsChange.call(this,e)},geometryChange:function(){this.fill.geometryChange(),V.fn.geometryChange.call(this)},refreshTransform:function(e){V.fn.refreshTransform.call(this,e),this.fill.refresh(this.srcElement.currentTransform(e))}}),ee=O.extend({renderData:function(){var e=this.srcElement.geometry(),t=["m",i([e.topLeft()]),"l",i([e.topRight(),e.bottomRight(),e.bottomLeft()]),"x e"];return t.join(" ")}}),te=V.extend({createDataNode:function(e){return new ee(e)}}),ie={Group:z,Text:Q,Path:V,MultiPath:U,Circle:$,Arc:G,Image:Z,Rect:te};f.support.vml=function(){var e=f.support.browser;return e.msie&&e.version<9}();var ne="inherit";f.support.browser.msie&&f.support.browser.version<8&&(ne="rect(auto auto auto auto)"),f.support.vml&&g.SurfaceFactory.current.register("vml",R,30),p(g,{vml:{ArcDataNode:j,ArcNode:G,CircleTransformNode:q,CircleNode:$,FillNode:P,GroupNode:z,ImageNode:Z,ImageFillNode:X,ImagePathDataNode:J,MultiPathDataNode:W,MultiPathNode:U,Node:A,PathDataNode:O,PathNode:V,RectDataNode:ee,RectNode:te,RootNode:I,StrokeNode:N,Surface:R,TextNode:Q,TextPathNode:K,TextPathDataNode:Y,TransformNode:L}})}(window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("drawing/html",["kendo.color","drawing/shapes","util/main","util/text-metrics"],function(){!function(e,t,i){"use strict";function n(i,n){function s(t){var i=new V.Group,r=t.getBoundingClientRect();return x(i,[d.x,0,0,d.y,-r.left*d.x,-r.top*d.y]),Y._clipbox=!1,Y._matrix=W.Matrix.unit(),Y._stackingContext={element:t,group:i},!0===n.avoidLinks?Y._avoidLinks="a":Y._avoidLinks=n.avoidLinks,e(t).addClass("k-pdf-export"),B(t,i),e(t).removeClass("k-pdf-export"),i}function o(t){var i=t.cloneNode(!1);if(1==t.nodeType){var n,r=e(t),s=e(i),a=r.data();for(n in a)s.data(n,a[n]);if(/^canvas$/i.test(t.tagName))i.getContext("2d").drawImage(t,0,0);else if(/^input$/i.test(t.tagName))t.removeAttribute("name");else for(n=t.firstChild;n;n=n.nextSibling)i.appendChild(o(n))}return i}function a(i,n,r,s,a,l,d){function u(){function e(){!function(e,t){function i(){--n<=0&&t()}var n=0;e.forEach(function(e){for(var t=e.querySelectorAll("img"),r=0;r<t.length;++r){var s=t[r];s.complete||(n++,s.onload=s.onerror=i)}}),n||i()}(y,function(){i({pages:y,container:C})})}("-"!=r||a)&&f(x);var t=v();if(x.parentNode.insertBefore(t,x),t.appendChild(x),k){var n=y.length;y.forEach(function(t,i){var r=k({element:t,pageNum:i+1,totalPages:y.length});r&&(t.appendChild(r),c(r,function(){0==--n&&e()}))})}else e()}function h(e){return!!(d.keepTogether&&e.is(d.keepTogether)&&e.height()<=a-S)||(e.data("kendoChart")||/^(?:img|tr|thead|th|tfoot|iframe|svg|object|canvas|input|textarea|select|video|h[1-6])/i.test(e[0].tagName))}function f(i){var n=p(i),s=t(m(n,"padding-bottom")),o=t(m(n,"border-bottom-width")),l=S;S+=s+o;for(var d=!0,c=i.firstChild;c;c=c.nextSibling)if(1==c.nodeType){d=!1;var u=e(c);if(u.is(r)){g(c);continue}if(!a){f(c);continue}if(!/^(?:static|relative)$/.test(m(p(c),"position")))continue;var v=_(c);1==v?g(c):v&&h(u)?g(c):f(c)}else 3==c.nodeType&&a&&(b(c,d),d=!1);S=l}function g(t){if(1==t.nodeType&&t!==x&&function(e){var t=e.parentNode,i=t.firstChild;if(e===i)return!0;if(e===t.children[0]){if(7==i.nodeType||8==i.nodeType)return!0;if(3==i.nodeType)return!/\S/.test(i.data)}return!1}(t))return g(t.parentNode);var i,n,r,s,o;i=e(t).closest("table"),n=i.find("colgroup:first"),d.repeatHeaders&&(r=i.find("thead:first"),s=e(t).closest('.k-grid[data-role="grid"]'),o=s.find(".k-grid-header:first"));var a=v(),l=w.createRange();l.setStartBefore(x),l.setEndBefore(t),a.appendChild(l.extractContents()),x.parentNode.insertBefore(a,x),i[0]&&(i=e(t).closest("table"),d.repeatHeaders&&r[0]&&r.clone().prependTo(i),n[0]&&n.clone().prependTo(i)),d.repeatHeaders&&s[0]&&(s=e(t).closest('.k-grid[data-role="grid"]'),o[0]&&o.clone().prependTo(s))}function v(){var t=w.createElement("KENDO-PDF-PAGE");return e(t).css({display:"block",boxSizing:"content-box",width:s||"auto",padding:l.top+"px "+l.right+"px "+l.bottom+"px "+l.left+"px",position:"relative",height:a||"auto",overflow:a||s?"hidden":"visible",clear:"both"}),d&&d.pageClassName&&(t.className=d.pageClassName),y.push(t),t}function _(e){var t=e.getBoundingClientRect();if(0===t.width||0===t.height)return 0;var i=x.getBoundingClientRect().top,n=a-S;return t.height>n?3:t.top-i>n?1:t.bottom-i>n?2:0}function b(e,t){if(/\S/.test(e.data)){var i=e.data.length,n=w.createRange();n.selectNodeContents(e);var r=_(n);if(r){var s=e;if(1==r)g(t?e.parentNode:e);else if(function t(i,r,s){return n.setEnd(e,r),i==r||r==s?r:_(n)?t(i,i+r>>1,r):t(r,r+s>>1,s)}(0,i>>1,i),!/\S/.test(n.toString())&&t)g(e.parentNode);else{s=e.splitText(n.endOffset);var o=v();n.setStartBefore(x),o.appendChild(n.extractContents()),x.parentNode.insertBefore(o,x)}b(s)}}}var k=function(t){if(null!=t)return"string"==typeof t&&(t=kendo.template(t.replace(/^\s+|\s+$/g,""))),"function"==typeof t?function(i){var n=t(i);if(n)return"string"==typeof n&&(n=n.replace(/^\s+|\s+$/g,"")),e(n)[0]}:function(){return e(t).clone()[0]}}(d.template),w=n.ownerDocument,y=[],x=d._destructive?n:o(n),C=w.createElement("KENDO-PDF-DOCUMENT"),S=0;e(x).find("tfoot").each(function(){this.parentNode.appendChild(this)}),e(x).find("ol").each(function(){e(this).children().each(function(e){this.setAttribute("kendo-split-index",e)})}),e(C).css({display:"block",position:"absolute",boxSizing:"content-box",left:"-10000px",top:"-10000px"}),s&&(e(C).css({width:s,paddingLeft:l.left,paddingRight:l.right}),e(x).css({overflow:"hidden"})),n.parentNode.insertBefore(C,n),C.appendChild(x),d.beforePageBreak?setTimeout(function(){d.beforePageBreak(C,u)},15):setTimeout(u,15)}n||(n={});var l=e.Deferred();if(!(i=e(i)[0]))return l.reject("No element to export");if("function"!=typeof window.getComputedStyle)throw new Error("window.getComputedStyle is missing.  You are using an unsupported browser, or running in IE8 compatibility mode.  Drawing HTML is supported in Chrome, Firefox, Safari and IE9+.");kendo.pdf&&kendo.pdf.defineFont(r(i.ownerDocument));var d=function(e){if("number"==typeof e)return{x:e,y:e};if(Array.isArray(e))return{x:e[0],y:e[1]};return{x:e.x,y:e.y}}(n.scale||1);return c(i,function(){var e=n&&n.forcePageBreak,t=n&&n.paperSize&&"auto"!=n.paperSize,r=t&&kendo.pdf.getPaperOptions(function(e,t){return e in n?n[e]:t}),o=t&&r.paperSize[0],c=t&&r.paperSize[1],u=n.margin&&r.margin;if(e||c){u||(u={left:0,top:0,right:0,bottom:0}),o&&(o/=d.x),c&&(c/=d.y),u.left/=d.x,u.right/=d.x,u.top/=d.y,u.bottom/=d.y;var h=new V.Group({pdf:{multiPage:!0,paperSize:t?r.paperSize:"auto",_ignoreMargin:!0}});a(function(e){if(n.progress){var t=!1,i=0;!function r(){i<e.pages.length?(h.append(s(e.pages[i])),n.progress({pageNum:++i,totalPages:e.pages.length,cancel:function(){t=!0}}),t?e.container.parentNode.removeChild(e.container):setTimeout(r)):(e.container.parentNode.removeChild(e.container),l.resolve(h))}()}else e.pages.forEach(function(e){h.append(s(e))}),e.container.parentNode.removeChild(e.container),l.resolve(h)},i,e,o?o-u.left-u.right:null,c?c-u.top-u.bottom:null,u,n)}else l.resolve(s(i))}),l.promise()}function r(e){function t(e){if(e){var r=null;try{r=e.cssRules}catch(e){}r&&function(e,r){for(var s=0;s<r.length;++s){var o=r[s];switch(o.type){case 3:t(o.styleSheet);break;case 5:var a=o.style,l=J(m(a,"font-family")),d=/^([56789]00|bold)$/i.test(m(a,"font-weight")),c="italic"==m(a,"font-style"),u=i(o);u.length>0&&function(e,t,i,r,s){/^data:/i.test(s)||/^[^\/:]+:\/\//.test(s)||/^\//.test(s)||(s=String(e.href).replace(/[^\/]*$/,"")+s);t.forEach(function(e){e=e.replace(/^(['"]?)(.*?)\1$/,"$2"),i&&(e+="|bold"),r&&(e+="|italic"),n[e]=s})}(e,l,d,c,u[0])}}}(e,r)}}function i(e){var t=m(e.style,"src");if(t)return J(t).reduce(function(e,t){var i=X(t);return i&&e.push(i),e},[]);var i=X(e.cssText);return i?[i]:[]}null==e&&(e=document);for(var n={},r=0;r<e.styleSheets.length;++r)t(e.styleSheets[r]);return n}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function o(e,t){var i=Y;for(e="_counter_"+e;i&&!s(i,e);)i=Object.getPrototypeOf(i);i||(i=Y._root),i[e]=(i[e]||0)+(null==t?1:t)}function a(e,t){Y[e="_counter_"+e]=null==t?0:t}function l(e,i,n){for(var r=0;r<e.length;){var s=e[r++],o=t(e[r]);isNaN(o)?i(s,n):(i(s,o),++r)}}function d(e,t){var i=kendo.parseColor(e);return i&&(i=i.toRGB(),t?i=i.toCssRgba():0===i.a&&(i=null)),i}function c(e,t){function i(e){G[e]||(G[e]=!0,r.push(e))}function n(){--s<=0&&t()}var r=[];!function e(t){/^img$/i.test(t.tagName)&&i(t.src),Q(m(p(t),"background-image")).forEach(function(e){"url"==e.type&&i(e.url)}),t.children&&U.call(t.children).forEach(e)}(e);var s=r.length;0===s&&n(),r.forEach(function(e){var t=G[e]=new Image;/^data:/i.test(e)||(t.crossOrigin="Anonymous"),t.src=e,t.complete?n():(t.onload=n,t.onerror=function(){G[e]=null,n()})})}function u(e){var t="";do{var n=e%26;t=String.fromCharCode(97+n)+t,e=i.floor(e/26)}while(e>0);return t}function h(e,t,i){(Y=Object.create(Y))[e.tagName.toLowerCase()]={element:e,style:t};var n=m(t,"text-decoration");if(n&&"none"!=n){var r=m(t,"color");n.split(/\s+/g).forEach(function(e){Y[e]||(Y[e]=r)})}(function(e){function t(t){return m(e,t)}if("none"!=t("transform")||"static"!=t("position")&&"auto"!=t("z-index")||t("opacity")<1)return!0})(t)&&(Y._stackingContext={element:e,group:i})}function f(e){if(null!=Y._clipbox){var t=e.bbox(Y._matrix);Y._clipbox?Y._clipbox=W.Rect.intersect(Y._clipbox,t):Y._clipbox=t}}function p(e,t){return window.getComputedStyle(e,t||null)}function m(e,t){return e.getPropertyValue(t)||q.webkit&&e.getPropertyValue("-webkit-"+t)||q.mozilla&&e.getPropertyValue("-moz-"+t)||q.opera&&e.getPropertyValue("-o-"+t)||q.msie&&e.getPropertyValue("-ms-"+t)}function g(e,t,i,n){e.setProperty(t,i,n),q.webkit?e.setProperty("-webkit-"+t,i,n):q.mozilla?e.setProperty("-moz-"+t,i,n):q.opera?e.setProperty("-o-"+t,i,n):q.msie&&(e.setProperty("-ms-"+t,i,n),t="ms"+t.replace(/(^|-)([a-z])/g,function(e,t,i){return t+i.toUpperCase()}),e[t]=i)}function v(e){if(q.msie||q.chrome){var t,i=e.getClientRects(),n=0;if(i.length<=3){for(var r=0;r<i.length;++r)i[r].width<=1?n++:t=i[r];if(n==i.length-1)return t}}return e.getBoundingClientRect()}function _(e,i){return i="border-"+i,{width:t(m(e,i+"-width")),style:m(e,i+"-style"),color:d(m(e,i+"-color"),!0)}}function b(e,t){var i=e.style.cssText,n=t();return e.style.cssText=i,n}function k(e,i){var n=m(e,"border-"+i+"-radius").split(/\s+/g).map(t);return 1==n.length&&n.push(n[0]),T({x:n[0],y:n[1]})}function w(e,i,n){var r,s,o,a,l;return"string"==typeof i?(r=p(n),s=t(m(r,i.replace("*","top"))),o=t(m(r,i.replace("*","right"))),a=t(m(r,i.replace("*","bottom"))),l=t(m(r,i.replace("*","left")))):"number"==typeof i&&(s=o=a=l=i),{top:e.top+s,right:e.right-o,bottom:e.bottom-a,left:e.left+l,width:e.right-e.left-o-l,height:e.bottom-e.top-a-s}}function y(e){return 180*e/i.PI%360}function x(e,t){return t=new W.Matrix(t[0],t[1],t[2],t[3],t[4],t[5]),e.transform(t),t}function C(e,t){e.clip(t)}function S(e,t,i,n){for(var r=new W.Arc([t,i],n).curvePoints(),s=1;s<r.length;)e.curveTo(r[s++],r[s++],r[s++])}function T(e){return(e.x<=0||e.y<=0)&&(e.x=e.y=0),e}function D(e,t,n,r,s){var o=i.max(0,t.x),a=i.max(0,t.y),l=i.max(0,n.x),d=i.max(0,n.y),c=i.max(0,r.x),u=i.max(0,r.y),h=i.max(0,s.x),f=i.max(0,s.y),p=i.min(e.width/(o+l),e.height/(d+u),e.width/(c+h),e.height/(f+a));return p<1&&(o*=p,a*=p,l*=p,d*=p,c*=p,u*=p,h*=p,f*=p),{tl:{x:o,y:a},tr:{x:l,y:d},br:{x:c,y:u},bl:{x:h,y:f}}}function F(e,i,n){var r=p(e),s=k(r,"top-left"),o=k(r,"top-right"),a=k(r,"bottom-left"),l=k(r,"bottom-right");if("padding"==n||"content"==n){var d=_(r,"top"),c=_(r,"right"),u=_(r,"bottom"),h=_(r,"left");if(s.x-=h.width,s.y-=d.width,o.x-=c.width,o.y-=d.width,l.x-=c.width,l.y-=u.width,a.x-=h.width,a.y-=u.width,"content"==n){var f=t(m(r,"padding-top")),g=t(m(r,"padding-right")),v=t(m(r,"padding-bottom")),b=t(m(r,"padding-left"));s.x-=b,s.y-=f,o.x-=g,o.y-=f,l.x-=g,l.y-=v,a.x-=b,a.y-=v}}return"number"==typeof n&&(s.x-=n,s.y-=n,o.x-=n,o.y-=n,l.x-=n,l.y-=n,a.x-=n,a.y-=n),E(i,s,o,l,a)}function E(e,t,i,n,r){var s=D(e,t,i,n,r),o=s.tl,a=s.tr,l=s.br,d=s.bl,c=new V.Path({fill:null,stroke:null});return c.moveTo(e.left,e.top+o.y),o.x&&S(c,e.left+o.x,e.top+o.y,{startAngle:-180,endAngle:-90,radiusX:o.x,radiusY:o.y}),c.lineTo(e.right-a.x,e.top),a.x&&S(c,e.right-a.x,e.top+a.y,{startAngle:-90,endAngle:0,radiusX:a.x,radiusY:a.y}),c.lineTo(e.right,e.bottom-l.y),l.x&&S(c,e.right-l.x,e.bottom-l.y,{startAngle:0,endAngle:90,radiusX:l.x,radiusY:l.y}),c.lineTo(e.left+d.x,e.bottom),d.x&&S(c,e.left+d.x,e.bottom-d.y,{startAngle:90,endAngle:180,radiusX:d.x,radiusY:d.y}),c.close()}function R(e,i){var n=t(e)+"";switch(i){case"decimal-leading-zero":return n.length<2&&(n="0"+n),n;case"lower-roman":return $(e).toLowerCase();case"upper-roman":return $(e).toUpperCase();case"lower-latin":case"lower-alpha":return u(e-1);case"upper-latin":case"upper-alpha":return u(e-1).toUpperCase();default:return n}}function A(e,t){function i(e,t,i){return i?(i=i.replace(/^\s*(["'])(.*)\1\s*$/,"$2"),function(e){var t=[],i=Y;e="_counter_"+e;for(;i;)s(i,e)&&t.push(i[e]),i=Object.getPrototypeOf(i);return t.reverse()}(e).map(function(e){return R(e,t)}).join(i)):R(function(e){return e="_counter_"+e,Y[e]}(e)||0,t)}var n,r=J(t,/^\s+/),o=[];return r.forEach(function(t){var r;(n=/^\s*(["'])(.*)\1\s*$/.exec(t))?o.push(n[2].replace(/\\([0-9a-f]{4})/gi,function(e,t){return String.fromCharCode(parseInt(t,16))})):(n=/^\s*counter\((.*?)\)\s*$/.exec(t))?(r=J(n[1]),o.push(i(r[0],r[1]))):(n=/^\s*counters\((.*?)\)\s*$/.exec(t))?(r=J(n[1]),o.push(i(r[0],r[2],r[1]))):(n=/^\s*attr\((.*?)\)\s*$/.exec(t))?o.push(e.getAttribute(n[1])||""):o.push(t)}),o.join("")}function I(e){if(e.cssText)return e.cssText;for(var t=[],i=0;i<e.length;++i)t.push(e[i]+": "+m(e,e[i]));return t.join(";\n")}function M(e,t){function i(t,i){var r=p(e,t);if(r.content&&"normal"!=r.content&&"none"!=r.content&&"0px"!=r.width){var s=e.ownerDocument.createElement(j);s.style.cssText=I(r),s.textContent=A(e,r.content),e.insertBefore(s,i),n.push(s)}}if(e.tagName!=j){var n=[];i(":before",e.firstChild),i(":after",null);var r=e.className;e.className+=" kendo-pdf-hide-pseudo-elements",H(e,t),e.className=r,n.forEach(function(t){e.removeChild(t)})}else H(e,t)}function H(n,r){function s(e,t,n,s,o,a,l,d){function c(t,r,s){var o=i.PI/2*t/(t+n),a={x:r.x-t,y:r.y-n},l=new V.Path({fill:{color:e},stroke:null}).moveTo(0,0);x(l,s),S(l,0,r.y,{startAngle:-90,endAngle:-y(o),radiusX:r.x,radiusY:r.y}),a.x>0&&a.y>0?(l.lineTo(a.x*i.cos(o),r.y-a.y*i.sin(o)),S(l,0,r.y,{startAngle:-y(o),endAngle:-90,radiusX:a.x,radiusY:a.y,anticlockwise:!0})):a.x>0?l.lineTo(a.x,n).lineTo(0,n):l.lineTo(a.x,n).lineTo(a.x,0),h.append(l.close())}if(!(n<=0)){var u,h=new V.Group;x(h,d),r.append(h),T(a),T(l),u=new V.Path({fill:{color:e},stroke:null}),h.append(u),u.moveTo(a.x?i.max(a.x,s):0,0).lineTo(t-(l.x?i.max(l.x,o):0),0).lineTo(t-i.max(l.x,o),n).lineTo(i.max(a.x,s),n).close(),a.x&&c(s,a,[-1,0,0,1,a.x,0]),l.x&&c(o,l,[1,0,0,1,t-l.x,0])}}function o(s){var o=new V.Group;if(C(o,E(s,v,R,I,A)),r.append(o),"A"==n.tagName&&n.href&&!/^#?$/.test(e(n).attr("href"))&&(Y._avoidLinks&&e(n).is(Y._avoidLinks)||(o._pdfLink={url:n.href,top:s.top,right:s.right,bottom:s.bottom,left:s.left})),H){var a=new V.Path({fill:{color:H.toCssRgba()},stroke:null});a.moveTo(s.left,s.top).lineTo(s.right,s.top).lineTo(s.right,s.bottom).lineTo(s.left,s.bottom).close(),o.append(a)}for(var l=z.length;--l>=0;)!function(e,r,s,o,a,l,d){function c(e,r,s,c,u){function h(){for(;k.origin.x>r.left;)k.origin.x-=s}function f(){for(;k.origin.y>r.top;)k.origin.y-=c}function p(){for(;k.origin.x<r.right;)u(e,k.clone()),k.origin.x+=s}var m,g=s/c,v=r;if("content-box"==l?v=w(v=w(v,"border-*-width",n),"padding-*",n):"padding-box"==l&&(v=w(v,"border-*-width",n)),!/^\s*auto(\s+auto)?\s*$/.test(d))if("contain"==d)m=i.min(v.width/s,v.height/c),s*=m,c*=m;else if("cover"==d)m=i.max(v.width/s,v.height/c),s*=m,c*=m;else{var _=d.split(/\s+/g);s=/%$/.test(_[0])?v.width*t(_[0])/100:t(_[0]),c=1==_.length||"auto"==_[1]?s/g:/%$/.test(_[1])?v.height*t(_[1])/100:t(_[1])}var b=(a+"").split(/\s+/);1==b.length&&(b[1]="50%"),/%$/.test(b[0])?b[0]=t(b[0])/100*(v.width-s):b[0]=t(b[0]),/%$/.test(b[1])?b[1]=t(b[1])/100*(v.height-c):b[1]=t(b[1]);var k=new W.Rect([v.left+b[0],v.top+b[1]],[s,c]);if("no-repeat"==o)u(e,k);else if("repeat-x"==o)h(),p();else if("repeat-y"==o)for(f();k.origin.y<r.bottom;)u(e,k.clone()),k.origin.y+=c;else if("repeat"==o){h(),f();for(var y=k.origin.clone();k.origin.y<r.bottom;)k.origin.x=y.x,p(),k.origin.y+=c}}if(!s||"none"==s)return;if("url"==s.type){if(/^url\(\"data:image\/svg/i.test(s.url))return;var u=G[s.url];u&&u.width>0&&u.height>0&&c(e,r,u.width,u.height,function(e,t){e.append(new V.Image(s.url,t))})}else{if("linear"!=s.type)return;c(e,r,r.width,r.height,function(e){return function(n,r){var s=r.width(),o=r.height();switch(e.type){case"linear":var a=null!=e.angle?e.angle:i.PI;switch(e.to){case"top":a=0;break;case"left":a=-i.PI/2;break;case"bottom":a=i.PI;break;case"right":a=i.PI/2;break;case"top left":case"left top":a=-i.atan2(o,s);break;case"top right":case"right top":a=i.atan2(o,s);break;case"bottom left":case"left bottom":a=i.PI+i.atan2(o,s);break;case"bottom right":case"right bottom":a=i.PI-i.atan2(o,s)}e.reverse&&(a-=i.PI),(a%=2*i.PI)<0&&(a+=2*i.PI);var l=i.abs(s*i.sin(a))+i.abs(o*i.cos(a)),d=i.atan(s*i.tan(a)/o),c=i.sin(d),u=i.cos(d),h=i.abs(c)+i.abs(u),f=h/2*c,p=h/2*u;a>i.PI/2&&a<=3*i.PI/2&&(f=-f,p=-p);var m=[],g=0,v=e.stops.map(function(i,n){var r=i.percent;r?r=t(r)/100:i.length?r=t(i.length)/l:0===n?r=0:n==e.stops.length-1&&(r=1);var s={color:i.color.toCssRgba(),offset:r};return null!=r?(g=r,m.forEach(function(e,t){var i=e.stop;i.offset=e.left+(g-e.left)*(t+1)/(m.length+1)}),m=[]):m.push({left:g,stop:s}),s}),_=[.5-f,.5+p],b=[.5+f,.5-p];n.append(V.Path.fromRect(r).stroke(null).fill(new V.LinearGradient({start:_,end:b,stops:v,userSpace:!1})));break;case"radial":window.console&&window.console.log&&window.console.log("Radial gradients are not yet supported in HTML renderer")}}}(s))}}(o,s,z[l],N[l%N.length],P[l%P.length],O[l%O.length],K[l%K.length])}var a=p(n),l=_(a,"top"),c=_(a,"right"),h=_(a,"bottom"),g=_(a,"left"),v=k(a,"top-left"),R=k(a,"top-right"),A=k(a,"bottom-left"),I=k(a,"bottom-right"),M=m(a,"direction"),H=m(a,"background-color");H=d(H);var z=Q(m(a,"background-image")),N=J(m(a,"background-repeat")),P=J(m(a,"background-position")),O=J(m(a,"background-origin")),K=J(m(a,"background-size"));q.msie&&q.version<10&&(P=J(n.currentStyle.backgroundPosition));var X=w(n.getBoundingClientRect(),"border-*-width",n);!function(){var e=m(a,"clip"),i=/^\s*rect\((.*)\)\s*$/.exec(e);if(i){var n=i[1].split(/[ ,]+/g),s="auto"==n[0]?X.top:t(n[0])+X.top,o="auto"==n[1]?X.right:t(n[1])+X.left,l="auto"==n[2]?X.bottom:t(n[2])+X.top,d="auto"==n[3]?X.left:t(n[3])+X.left,c=new V.Group,u=(new V.Path).moveTo(d,s).lineTo(o,s).lineTo(o,l).lineTo(d,l).close();C(c,u),r.append(c),r=c,f(u)}}();var Z,ee,te,ie=m(a,"display");if("table-row"==ie)for(Z=[],ee=0,te=n.children;ee<te.length;++ee)Z.push(te[ee].getBoundingClientRect());else 1==(Z=n.getClientRects()).length&&(Z=[n.getBoundingClientRect()]);for(Z=function(e){if(/^td$/i.test(n.tagName)){var t=Y.table;if(t&&"collapse"==m(t.style,"border-collapse")){var i=_(t.style,"left").width,r=_(t.style,"top").width;if(0===i&&0===r)return e;var s=t.element.getBoundingClientRect(),o=t.element.rows[0].cells[0],a=o.getBoundingClientRect();if(a.top==s.top||a.left==s.left)return U.call(e).map(function(e){return{left:e.left+i,top:e.top+r,right:e.right+i,bottom:e.bottom+r,height:e.height,width:e.width}})}}return e}(Z),ee=0;ee<Z.length;++ee)!function(e,t,i){function a(e){return{x:e.y,y:e.x}}if(0===e.width||0===e.height)return;o(e);var d=g.width>0&&(t&&"ltr"==M||i&&"rtl"==M),u=c.width>0&&(i&&"ltr"==M||t&&"rtl"==M);if(0===l.width&&0===g.width&&0===c.width&&0===h.width)return;{if(l.color==c.color&&l.color==h.color&&l.color==g.color&&l.width==c.width&&l.width==h.width&&l.width==g.width&&d&&u){e=w(e,l.width/2);var f=F(n,e,l.width/2);return f.options.stroke={color:l.color,width:l.width},void r.append(f)}if(0===v.x&&0===R.x&&0===I.x&&0===A.x&&l.width<2&&g.width<2&&c.width<2&&h.width<2)return l.width>0&&r.append(new V.Path({stroke:{width:l.width,color:l.color}}).moveTo(e.left,e.top+l.width/2).lineTo(e.right,e.top+l.width/2)),h.width>0&&r.append(new V.Path({stroke:{width:h.width,color:h.color}}).moveTo(e.left,e.bottom-h.width/2).lineTo(e.right,e.bottom-h.width/2)),d&&r.append(new V.Path({stroke:{width:g.width,color:g.color}}).moveTo(e.left+g.width/2,e.top).lineTo(e.left+g.width/2,e.bottom)),void(u&&r.append(new V.Path({stroke:{width:c.width,color:c.color}}).moveTo(e.right-c.width/2,e.top).lineTo(e.right-c.width/2,e.bottom)))}var p=D(e,v,R,I,A),m=p.tl,_=p.tr,b=p.br,k=p.bl;s(l.color,e.width,l.width,g.width,c.width,m,_,[1,0,0,1,e.left,e.top]),s(h.color,e.width,h.width,c.width,g.width,b,k,[-1,0,0,-1,e.right,e.bottom]);s(g.color,e.height,g.width,h.width,l.width,a(k),a(m),[0,-1,1,0,e.left,e.bottom]),s(c.color,e.height,c.width,l.width,h.width,a(_),a(b),[0,1,-1,0,e.right,e.top])}(Z[ee],0===ee,ee==Z.length-1);return Z.length>0&&"list-item"==ie&&function(){function e(e){b(n,function(){n.style.position="relative";var t=n.ownerDocument.createElement(j);t.style.position="absolute",t.style.boxSizing="border-box","outside"==s?(t.style.width="6em",t.style.left="-6.8em",t.style.textAlign="right"):t.style.left="0px",e(t),n.insertBefore(t,n.firstChild),B(t,r),n.removeChild(t)})}function t(e){var t=n.parentNode.children,i=n.getAttribute("kendo-split-index");if(null!=i)return e(0|i,t.length);for(var r=0;r<t.length;++r)if(t[r]===n)return e(r,t.length)}var i=m(a,"list-style-type");if("none"==i)return;var s=m(a,"list-style-position");switch(i){case"circle":case"disc":case"square":e(function(e){e.style.fontSize="60%",e.style.lineHeight="200%",e.style.paddingRight="0.5em",e.style.fontFamily="DejaVu Serif",e.innerHTML={disc:"",circle:"",square:""}[i]});break;case"decimal":case"decimal-leading-zero":e(function(e){t(function(t){++t,"decimal-leading-zero"==i&&(t+"").length<2&&(t="0"+t),e.innerHTML=t+"."})});break;case"lower-roman":case"upper-roman":e(function(e){t(function(t){t=$(t+1),"upper-roman"==i&&(t=t.toUpperCase()),e.innerHTML=t+"."})});break;case"lower-latin":case"lower-alpha":case"upper-latin":case"upper-alpha":e(function(e){t(function(t){t=u(t),/^upper/i.test(i)&&(t=t.toUpperCase()),e.innerHTML=t+"."})})}}(Z[0]),function(){function e(){var e=F(n,X,"padding"),t=new V.Group;C(t,e),r.append(t),r=t,f(e)}!function(e){return/^(?:textarea|select|input)$/i.test(e.tagName)}(n)?/^(hidden|auto|scroll)/.test(m(a,"overflow"))?e():/^(hidden|auto|scroll)/.test(m(a,"overflow-x"))?e():/^(hidden|auto|scroll)/.test(m(a,"overflow-y"))&&e():e()}(),function(t,i){if(t.getAttribute(kendo.attr("role"))){var n=kendo.widgetInstance(e(t));if(n&&(n.exportDOMVisual||n.exportVisual)){var r;if(!(r=n.exportDOMVisual?n.exportDOMVisual():n.exportVisual()))return!1;var s=new V.Group;s.children.push(r);var o=t.getBoundingClientRect();return s.transform(W.transform().translate(o.left,o.top)),i.append(s),!0}}}(n,r)||L(n,r),r}function z(e,t,i){var n=function(e){var t=e.getBoundingClientRect();return t=w(t,"border-*-width",e),t=w(t,"padding-*",e)}(e),r=new W.Rect([n.left,n.top],[n.width,n.height]),s=new V.Image(t,r);C(s,F(e,n,"content")),i.append(s)}function N(e,i){var n=p(e),r=p(i),s=t(m(n,"z-index")),o=t(m(r,"z-index")),a=m(n,"position"),l=m(r,"position");return isNaN(s)&&isNaN(o)?/static|absolute/.test(a)&&/static|absolute/.test(l)?0:"static"==a?-1:"static"==l?1:0:isNaN(s)?0===o?0:o>0?-1:1:isNaN(o)?0===s?0:s>0?1:-1:t(s)-t(o)}function P(e,t){var n=e.tagName.toLowerCase();if("input"==n&&("checkbox"==e.type||"radio"==e.type))return function(e,t){var n=m(p(e),"color"),r=e.getBoundingClientRect();"checkbox"==e.type?(t.append(V.Path.fromRect(new W.Rect([r.left+1,r.top+1],[r.width-2,r.height-2])).stroke(n,1)),e.checked&&t.append((new V.Path).stroke(n,1.2).moveTo(r.left+.22*r.width,r.top+.55*r.height).lineTo(r.left+.45*r.width,r.top+.75*r.height).lineTo(r.left+.78*r.width,r.top+.22*r.width))):(t.append(new V.Circle(new W.Circle([(r.left+r.right)/2,(r.top+r.bottom)/2],i.min(r.width-2,r.height-2)/2)).stroke(n,1)),e.checked&&t.append(new V.Circle(new W.Circle([(r.left+r.right)/2,(r.top+r.bottom)/2],i.min(r.width-8,r.height-8)/2)).fill(n).stroke(null)))}(e,t);var r,s=e.parentNode,o=e.ownerDocument,a=o.createElement(j);if(a.style.cssText=I(p(e)),"input"==n&&(a.style.whiteSpace="pre"),"select"!=n&&"textarea"!=n||(a.style.overflow="auto"),"select"==n)if(e.multiple)for(var l=0;l<e.options.length;++l)(r=o.createElement(j)).style.cssText=I(p(e.options[l])),r.style.display="block",r.textContent=e.options[l].textContent,a.appendChild(r);else(r=function(e){if(e.selectedOptions&&e.selectedOptions.length>0)return e.selectedOptions[0];return e.options[e.selectedIndex]}(e))&&(a.textContent=r.textContent);else a.textContent=e.value;s.insertBefore(a,e),a.scrollLeft=e.scrollLeft,a.scrollTop=e.scrollTop,e.style.display="none",L(a,t),e.style.display="",s.removeChild(a)}function L(e,n){switch(Y._stackingContext.element===e&&(Y._stackingContext.group=n),e.tagName.toLowerCase()){case"img":z(e,e.src,n);break;case"canvas":try{z(e,e.toDataURL("image/png"),n)}catch(e){}break;case"textarea":case"input":case"select":P(e,n);break;default:for(var r=[],s=[],o=[],a=[],l=e.firstChild;l;l=l.nextSibling)switch(l.nodeType){case 3:/\S/.test(l.data)&&function(e,n,r){if(function(){var e=Y._clipbox;if(null==e)return!0;if(e)return 0===e.width()||0===e.height()}())return;var s=p(e);if(t(m(s,"text-indent"))<-500)return;var o=n.data,a=0,l=o.search(/\S\s*$/)+1;if(!l)return;var d=m(s,"font-size"),c=m(s,"line-height"),u=[m(s,"font-style"),m(s,"font-variant"),m(s,"font-weight"),d,m(s,"font-family")].join(" ");if(d=t(d),c=t(c),0===d)return;var h,f,g=m(s,"color"),_=e.ownerDocument.createRange(),b="justify"==m(s,"text-align"),k=m(s,"white-space");q.msie&&"ellipsis"==(h=s.textOverflow)&&(f=e.style.textOverflow,e.style.textOverflow="clip");var w=e.getBoundingClientRect().width/d*5;0===w&&(w=500);for(;!function(){var e,t=a,s=o.substr(a).search(/\S/);if(a+=s,s<0||a>=l)return!0;_.setStart(n,a),_.setEnd(n,a+1),e=v(_);var h=!1;if(b&&(s=o.substr(a).search(/\s/))>=0){_.setEnd(n,a+s);var f=_.getBoundingClientRect();f.bottom==e.bottom&&(e=f,h=!0,a+=s)}if(!h){if((s=function t(i,r,s){_.setEnd(n,r);var o=v(_);return o.bottom!=e.bottom&&i<r?t(i,i+r>>1,r):o.right!=e.right?(e=o,r<s?t(r,r+s>>1,s):r):r}(a,i.min(l,a+w),l))==a)return!0;if(a=s,0===(s=_.toString().search(/\s+$/)))return;s>0&&(_.setEnd(n,_.startOffset+s),e=_.getBoundingClientRect())}q.msie&&(e=_.getClientRects()[0]);var p=_.toString();if(/^(?:pre|pre-wrap)$/i.test(k)){if(/\t/.test(p)){var m=0;for(s=t;s<_.startOffset;++s){var y=o.charCodeAt(s);9==y?m+=8-m%8:10==y||13==y?m=0:m++}for(;(s=p.search("\t"))>=0;){var x="        ".substr(0,8-(m+s)%8);p=p.substr(0,s)+x+p.substr(s+1)}}}else p=p.replace(/\s+/g," ");!function(e,t){if(q.msie&&!isNaN(c)){var i=kendo.util.measureText(e,{font:u}),n=(t.top+t.bottom-i.height)/2;t={top:n,right:t.right,bottom:n+i.height,left:t.left,height:i.height,width:t.right-t.left}}var s=new K(e,new W.Rect([t.left,t.top],[t.width,t.height]),{font:u,fill:{color:g}});r.append(s),function(e){function t(t,i){if(t){var n=d/12,s=new V.Path({stroke:{width:n,color:t}});i-=n,s.moveTo(e.left,i).lineTo(e.right,i),r.append(s)}}t(Y.underline,e.bottom),t(Y["line-through"],e.bottom-e.height/2.7),t(Y.overline,e.top)}(t)}(p,e)}(););q.msie&&"ellipsis"==h&&(e.style.textOverflow=f);return}(e,l,n);break;case 1:var d=p(l),c=m(d,"display"),u=m(d,"float"),h=m(d,"position");"static"!=h?a.push(l):"inline"!=c?"none"!=u?s.push(l):r.push(l):o.push(l)}r.sort(N).forEach(function(e){B(e,n)}),s.sort(N).forEach(function(e){B(e,n)}),o.sort(N).forEach(function(e){B(e,n)}),a.sort(N).forEach(function(e){B(e,n)})}}function B(e,i){var n=p(e),r=m(n,"counter-reset");r&&l(J(r,/^\s+/),a,0);var s=m(n,"counter-increment");if(s&&l(J(s,/^\s+/),o,1),!/^(style|script|link|meta|iframe|svg|col|colgroup)$/i.test(e.tagName)&&null!=Y._clipbox){var d=t(m(n,"opacity")),c=m(n,"visibility"),u=m(n,"display");if(0!==d&&"hidden"!=c&&"none"!=u){var f,v=function(e){var i=m(e,"transform");if("none"==i)return null;var n=/^\s*matrix\(\s*(.*?)\s*\)\s*$/.exec(i);if(n){var r=m(e,"transform-origin");return n=n[1].split(/\s*,\s*/g).map(t),r=r.split(/\s+/g).map(t),{matrix:n,origin:r}}}(n),_=m(n,"z-index");(v||d<1)&&"auto"==_&&(_=0),f=function(e,i,n){var r;"auto"!=n?(r=Y._stackingContext.group,n=t(n)):(r=i,n=0);for(var s=r.children,o=0;o<s.length&&!(null!=s[o]._dom_zIndex&&s[o]._dom_zIndex>n);++o);var a=new V.Group;if(r.insertAt(a,o),a._dom_zIndex=n,r!==i&&Y._clipbox){var l=Y._matrix.invert(),d=Y._clipbox.transformCopy(l);C(a,V.Path.fromRect(d))}return a}(0,i,_),d<1&&f.opacity(d*f.opacity()),h(e,n,f),v?b(e,function(){g(e.style,"transform","none","important"),g(e.style,"transition","none","important"),"static"==m(n,"position")&&g(e.style,"position","relative","important");var t=e.getBoundingClientRect(),i=t.left+v.origin[0],r=t.top+v.origin[1],s=[1,0,0,1,-i,-r];s=O(s=O(s,v.matrix),[1,0,0,1,i,r]),s=x(f,s),Y._matrix=Y._matrix.multiplyCopy(s),M(e,f)}):M(e,f),Y=Object.getPrototypeOf(Y)}}}function O(e,t){var i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=t[0],d=t[1],c=t[2],u=t[3],h=t[4],f=t[5];return[i*l+n*c,i*d+n*u,r*l+s*c,r*d+s*u,o*l+a*c+h,o*d+a*u+f]}var V=kendo.drawing,W=kendo.geometry,U=Array.prototype.slice,q=kendo.support.browser,$=kendo.util.arabicToRoman,j="KENDO-PSEUDO-ELEMENT",G={},Y={};Y._root=Y;var K=V.Text.extend({nodeType:"Text",init:function(e,t,i){V.Text.fn.init.call(this,e,t.getOrigin(),i),this._pdfRect=t},rect:function(){return this._pdfRect},rawBBox:function(){return this._pdfRect}});V.drawDOM=n,n.getFontFaces=r;var Q=function(){function e(e){function g(t){!function(){var t=d.exec(e);t&&(e=e.substr(t[1].length))}();var i=t.exec(e);if(i)return e=e.substr(i[1].length),i[1]}function v(){var t,i,n=kendo.parseColor(e,!0);if(n)return e=e.substr(n.match[0].length),n=n.toRGB(),(t=g(o))||(i=g(r)),{color:n,length:t,percent:i}}var _=e;if(s(m,_))return m[_];var b;return(b=g(n))?b=function(n){var s,o,d,f=[],p=!1;if(g(c)){if((s=g(l))?(s=function(e){var n=t(e);{if(/grad$/.test(e))return i.PI*n/200;if(/rad$/.test(e))return n;if(/turn$/.test(e))return i.PI*n*2;if(/deg$/.test(e))return i.PI*n/180}}(s),g(h)):("to"==(o=g(a))?o=g(a):o&&/^-/.test(n)&&(p=!0),d=g(a),g(h)),/-moz-/.test(n)&&null==s&&null==o){var m=g(r),_=g(r);p=!0,"0%"==m?o="left":"100%"==m&&(o="right"),"0%"==_?d="top":"100%"==_&&(d="bottom"),g(h)}for(;e&&!g(u);){var b=v();if(!b)break;f.push(b),g(h)}return{type:"linear",angle:s,to:o&&d?o+" "+d:o||(d||null),stops:f,reverse:p}}}(b):(b=g(f))&&(b=function(){if(g(c)){var e=g(p);return e=e.replace(/^['"]+|["']+$/g,""),g(u),{type:"url",url:e}}}()),m[_]=b||{type:"none"}}var n=/^((-webkit-|-moz-|-o-|-ms-)?linear-gradient\s*)\(/,r=/^([-0-9.]+%)/,o=/^([-0-9.]+px)/,a=/^(left|right|top|bottom|to|center)\W/,l=/^([-0-9.]+(deg|grad|rad|turn))/,d=/^(\s+)/,c=/^(\()/,u=/^(\))/,h=/^(,)/,f=/^(url)\(/,p=/^(.*?)\)/,m={},g={};return function(t){return s(g,t)?g[t]:g[t]=J(t).map(e)}}(),J=function(){var e={};return function(t,i){function n(e){return a=e.exec(t.substr(c))}function r(e){return e.replace(/^\s+|\s+$/g,"")}i||(i=/^\s*,\s*/);var o=t+i;if(s(e,o))return e[o];for(var a,l=[],d=0,c=0,u=0,h=!1;c<t.length;)!h&&n(/^[\(\[\{]/)?(u++,c++):!h&&n(/^[\)\]\}]/)?(u--,c++):!h&&n(/^[\"\']/)?(h=a[0],c++):"'"==h&&n(/^\\\'/)?c+=2:'"'==h&&n(/^\\\"/)?c+=2:"'"==h&&n(/^\'/)?(h=!1,c++):'"'==h&&n(/^\"/)?(h=!1,c++):n(i)?(!h&&!u&&c>d&&(l.push(r(t.substring(d,c))),d=c+a[0].length),c+=a[0].length):c++;return d<c&&l.push(r(t.substring(d,c))),e[o]=l}}(),X=function(){var e={};return function(t){var i=e[t];if(!i){var n;(n=/url\((['"]?)([^'")]*?)\1\)\s+format\((['"]?)truetype\3\)/.exec(t))?i=e[t]=n[2]:(n=/url\((['"]?)([^'")]*?\.ttf)\1\)/.exec(t))&&(i=e[t]=n[2])}return i}}()}(window.kendo.jQuery,parseFloat,Math)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("drawing/animation",["drawing/geometry","drawing/core"],function(){!function(e){var t=e.noop,i=window.kendo,n=i.Class,r=i.util,s=i.animationFrame,o=i.deepExtend,a=n.extend({init:function(e,t){this.options=o({},this.options,t),this.element=e},options:{duration:500,easing:"swing"},setup:t,step:t,play:function(){var t=this,i=t.options,n=e.easing[i.easing],o=i.duration,a=i.delay||0,l=r.now()+a,d=l+o;0===o?(t.step(1),t.abort()):setTimeout(function(){var e=function(){if(!t._stopped){var i=r.now(),a=r.limitValue(i-l,0,o),c=a/o,u=n(c,a,0,1,o);t.step(u),i<d?s(e):t.abort()}};e()},a)},abort:function(){this._stopped=!0},destroy:function(){this.abort()}}),l=function(){this._items=[]};l.prototype={register:function(e,t){this._items.push({name:e,type:t})},create:function(e,t){var i,n=this._items;if(t&&t.type)for(var r=t.type.toLowerCase(),s=0;s<n.length;s++)if(n[s].name.toLowerCase()===r){i=n[s];break}if(i)return new i.type(e,t)}},l.current=new l,a.create=function(e,t,i){return l.current.create(e,t,i)},o(i.drawing,{Animation:a,AnimationFactory:l})}(window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.drawing",["kendo.color","util/main","util/text-metrics","util/base64","mixins/observers","drawing/geometry","drawing/core","drawing/mixins","drawing/shapes","drawing/parser","drawing/search","drawing/svg","drawing/canvas","drawing/vml","drawing/html","drawing/animation"],function(){}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.validator",["kendo.core"],function(){return function(e,t){function i(t,i){for(var r,s=e(),o=0,l=t.length;o<l;o++)r=t[o],a.test(r.className)&&r.getAttribute(n.attr("for"))===i&&(s=s.add(r));return s}var n=window.kendo,r=n.ui.Widget,s=".kendoValidator",o="k-invalid-msg",a=new RegExp(o,"i"),l=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,d=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,c=":input:not(:button,[type=submit],[type=reset],[disabled],[readonly])",u=":checkbox:not([disabled],[readonly])",h="[type=number],[type=range]",f=e.proxy,p=function(e,t){return"string"==typeof t&&(t=new RegExp("^(?:"+t+")$")),t.test(e)},m=function(e,t,i){var n=e.val();return!e.filter(t).length||""===n||p(n,i)};n.ui.validator||(n.ui.validator={rules:{},messages:{}});var g=r.extend({init:function(t,i){var s=function(t){var i,r=n.ui.validator.ruleResolvers||{},s={};for(i in r)e.extend(!0,s,r[i].resolve(t));return s}(t),o="["+n.attr("validate")+"!=false]";(i=i||{}).rules=e.extend({},n.ui.validator.rules,s.rules,i.rules),i.messages=e.extend({},n.ui.validator.messages,s.messages,i.messages),r.fn.init.call(this,t,i),this._errorTemplate=n.template(this.options.errorTemplate),this.element.is("form")&&this.element.attr("novalidate","novalidate"),this._inputSelector=c+o,this._checkboxSelector=u+o,this._errors={},this._attachEvents(),this._isValidated=!1},events:["validate","change"],options:{name:"Validator",errorTemplate:'<span class="k-widget k-tooltip k-tooltip-validation"><span class="k-icon k-warning"> </span> #=message#</span>',messages:{required:"{0} is required",pattern:"{0} is not valid",min:"{0} should be greater than or equal to {1}",max:"{0} should be smaller than or equal to {1}",step:"{0} is not valid",email:"{0} is not valid email",url:"{0} is not valid URL",date:"{0} is not valid date",dateCompare:"End date should be greater than or equal to the start date"},rules:{required:function(e){var t=e.filter("[type=checkbox]").length&&!e.is(":checked"),i=e.val();return!(function(e,t){return!!e.length&&null!=e[0].attributes[t]}(e,"required")&&(""===i||!i||t))},pattern:function(e){return!e.filter("[type=text],[type=email],[type=url],[type=tel],[type=search],[type=password]").filter("[pattern]").length||""===e.val()||p(e.val(),e.attr("pattern"))},min:function(e){return!e.filter(h+",["+n.attr("type")+"=number]").filter("[min]").length||""===e.val()||(parseFloat(e.attr("min"))||0)<=n.parseFloat(e.val())},max:function(e){return!e.filter(h+",["+n.attr("type")+"=number]").filter("[max]").length||""===e.val()||(parseFloat(e.attr("max"))||0)>=n.parseFloat(e.val())},step:function(e){if(e.filter(h+",["+n.attr("type")+"=number]").filter("[step]").length&&""!==e.val()){var t,i=parseFloat(e.attr("min"))||0,r=parseFloat(e.attr("step"))||1,s=parseFloat(e.val()),o=function(e){return(e=(e+"").split(".")).length>1?e[1].length:0}(r);return o?(t=Math.pow(10,o),Math.floor((s-i)*t)%(r*t)/Math.pow(100,o)==0):(s-i)%r==0}return!0},email:function(e){return m(e,"[type=email],["+n.attr("type")+"=email]",l)},url:function(e){return m(e,"[type=url],["+n.attr("type")+"=url]",d)},date:function(e){return!e.filter("[type^=date],["+n.attr("type")+"=date]").length||""===e.val()||null!==n.parseDate(e.val(),e.attr(n.attr("format")))}},validateOnBlur:!0},destroy:function(){r.fn.destroy.call(this),this.element.off(s)},value:function(){return!!this._isValidated&&0===this.errors().length},_submit:function(e){return!!this.validate()||(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),!1)},_checkElement:function(e){var t=this.value();this.validateInput(e),this.value()!==t&&this.trigger("change")},_attachEvents:function(){var t=this;t.element.is("form")&&t.element.on("submit"+s,f(t._submit,t)),t.options.validateOnBlur&&(t.element.is(c)?(t.element.on("blur"+s,function(){t._checkElement(t.element)}),t.element.is(u)&&t.element.on("click"+s,function(){t._checkElement(t.element)})):(t.element.on("blur"+s,t._inputSelector,function(){t._checkElement(e(this))}),t.element.on("click"+s,t._checkboxSelector,function(){t._checkElement(e(this))})))},validate:function(){var e,t,i,n=!1,r=this.value();if(this._errors={},this.element.is(c))n=this.validateInput(this.element);else{var s=!1;for(t=0,i=(e=this.element.find(this._inputSelector)).length;t<i;t++)this.validateInput(e.eq(t))||(s=!0);n=!s}return this.trigger("validate",{valid:n}),r!==n&&this.trigger("change"),n},validateInput:function(t){t=e(t),this._isValidated=!0;var i,r=this._errorTemplate,s=this._checkValidity(t),o=s.valid,a=t.attr("name")||"",l=this._findMessageContainer(a).add(t.next(".k-invalid-msg").filter(function(){var t=e(this);return!t.filter("["+n.attr("for")+"]").length||t.attr(n.attr("for"))===a})).hide();if(t.removeAttr("aria-invalid"),o)delete this._errors[a];else{i=this._extractMessage(t,s.key),this._errors[a]=i;var d=function(t){return e.parseHTML?e(e.parseHTML(t)):e(t)}(r({message:function(e){return e.replace(/&amp/g,"&amp;").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">")}(i)})),c=l.attr("id");this._decorateMessageContainer(d,a),c&&d.attr("id",c),l.replaceWith(d).length||d.insertAfter(t),d.show(),t.attr("aria-invalid",!0)}return t.toggleClass("k-invalid",!o),t.toggleClass("k-valid",o),o},hideMessages:function(){var e=this.element;e.is(c)?e.next(".k-invalid-msg").hide():e.find(".k-invalid-msg").hide()},_findMessageContainer:function(t){for(var r,s=n.ui.validator.messageLocators,o=e(),a=0,l=this.element.length;a<l;a++)o=o.add(i(this.element[a].getElementsByTagName("*"),t));for(r in s)o=o.add(s[r].locate(this.element,t));return o},_decorateMessageContainer:function(e,t){var i,r=n.ui.validator.messageLocators;e.addClass(o).attr(n.attr("for"),t||"");for(i in r)r[i].decorate(e,t);e.attr("role","alert")},_extractMessage:function(e,t){var i=this.options.messages[t],r=e.attr("name");return i=n.isFunction(i)?i(e):i,n.format(e.attr(n.attr(t+"-msg"))||e.attr("validationMessage")||e.attr("title")||i||"",r,e.attr(t)||e.attr(n.attr(t)))},_checkValidity:function(e){var t,i=this.options.rules;for(t in i)if(!i[t].call(this,e))return{valid:!1,key:t};return{valid:!0}},errors:function(){var e,t=[],i=this._errors;for(e in i)t.push(i[e]);return t}});n.ui.plugin(g)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.userevents",["kendo.core"],function(){return function(e,t){function i(e,t){var i=e.x.location,n=e.y.location,r=t.x.location,s=t.y.location,o=i-r,a=n-s;return{center:{x:(i+r)/2,y:(n+s)/2},distance:Math.sqrt(o*o+a*a)}}function n(e){var t,i,n,r=[],s=e.originalEvent,a=e.currentTarget,l=0;if(e.api)r.push({id:2,event:e,target:e.target,currentTarget:e.target,location:e,type:"api"});else if(e.type.match(/touch/))for(t=(i=s?s.changedTouches:[]).length;l<t;l++)n=i[l],r.push({location:n,event:e,target:n.target,currentTarget:a,id:n.identifier,type:"touch"});else o.pointers||o.msPointers?r.push({location:s,event:e,target:e.target,currentTarget:a,id:s.pointerId,type:"pointer"}):r.push({id:1,event:e,target:e.target,currentTarget:a,location:e,type:"mouse"});return r}function r(e){for(var t=s.eventMap.up.split(" "),i=0,n=t.length;i<n;i++)e(t[i])}var s=window.kendo,o=s.support,a=window.document,l=s.Class,d=s.Observable,c=e.now,u=e.extend,h=o.mobileOS,f=h&&h.android,p=800,m=o.browser.msie?5:0,g={api:0,touch:0,mouse:9,pointer:9},v=!o.touch||o.mouseAndTouchPresent,_=l.extend({init:function(e,t){this.axis=e,this._updateLocationData(t),this.startLocation=this.location,this.velocity=this.delta=0,this.timeStamp=c()},move:function(e){var t=e["page"+this.axis],i=c(),n=i-this.timeStamp||1;!t&&f||(this.delta=t-this.location,this._updateLocationData(e),this.initialDelta=t-this.startLocation,this.velocity=this.delta/n,this.timeStamp=i)},_updateLocationData:function(e){var t=this.axis;this.location=e["page"+t],this.client=e["client"+t],this.screen=e["screen"+t]}}),b=l.extend({init:function(e,t,i){u(this,{x:new _("X",i.location),y:new _("Y",i.location),type:i.type,useClickAsTap:e.useClickAsTap,threshold:e.threshold||g[i.type],userEvents:e,target:t,currentTarget:i.currentTarget,initialTouch:i.target,id:i.id,pressEvent:i,_moved:!1,_finished:!1})},press:function(){this._holdTimeout=setTimeout(e.proxy(this,"_hold"),this.userEvents.minHold),this._trigger("press",this.pressEvent)},_hold:function(){this._trigger("hold",this.pressEvent)},move:function(e){if(!this._finished){if(this.x.move(e.location),this.y.move(e.location),!this._moved){if(this._withinIgnoreThreshold())return;if(k.current&&k.current!==this.userEvents)return this.dispose();this._start(e)}this._finished||this._trigger("move",e)}},end:function(e){this.endTime=c(),this._finished||(this._finished=!0,this._trigger("release",e),this._moved?this._trigger("end",e):this.useClickAsTap||this._trigger("tap",e),clearTimeout(this._holdTimeout),this.dispose())},dispose:function(){var t=this.userEvents.touches;this._finished=!0,this.pressEvent=null,clearTimeout(this._holdTimeout),t.splice(e.inArray(this,t),1)},skip:function(){this.dispose()},cancel:function(){this.dispose()},isMoved:function(){return this._moved},_start:function(e){clearTimeout(this._holdTimeout),this.startTime=c(),this._moved=!0,this._trigger("start",e)},_trigger:function(e,t){var i=t.event,n={touch:this,x:this.x,y:this.y,target:this.target,event:i};this.userEvents.notify(e,n)&&i.preventDefault()},_withinIgnoreThreshold:function(){var e=this.x.initialDelta,t=this.y.initialDelta;return Math.sqrt(e*e+t*t)<=this.threshold}}),k=d.extend({init:function(t,i){var n,l=s.guid();if(i=i||{},n=this.filter=i.filter,this.threshold=i.threshold||m,this.minHold=i.minHold||p,this.touches=[],this._maxTouches=i.multiTouch?2:1,this.allowSelection=i.allowSelection,this.captureUpIfMoved=i.captureUpIfMoved,this.useClickAsTap=!i.fastTap&&!o.delayedClick(),this.eventNS=l,t=e(t).handler(this),d.fn.init.call(this),u(this,{element:t,surface:i.global&&v?e(a.documentElement):e(i.surface||t),stopPropagation:i.stopPropagation,pressed:!1}),this.surface.handler(this).on(s.applyEventMap("move",l),"_move").on(s.applyEventMap("up cancel",l),"_end"),t.on(s.applyEventMap("down",l),n,"_start"),this.useClickAsTap&&t.on(s.applyEventMap("click",l),n,"_click"),(o.pointers||o.msPointers)&&(o.browser.version<11?t.css("-ms-touch-action","pinch-zoom double-tap-zoom"):t.css("touch-action","pan-y")),i.preventDragEvent&&t.on(s.applyEventMap("dragstart",l),s.preventDefault),t.on(s.applyEventMap("mousedown",l),n,{root:t},"_select"),this.captureUpIfMoved&&o.eventCapture){var c=this.surface[0],h=e.proxy(this.preventIfMoving,this);r(function(e){c.addEventListener(e,h,!0)})}this.bind(["press","hold","tap","start","move","end","release","cancel","gesturestart","gesturechange","gestureend","gesturetap","select"],i)},preventIfMoving:function(e){this._isMoved()&&e.preventDefault()},destroy:function(){var e=this;if(!e._destroyed){if(e._destroyed=!0,e.captureUpIfMoved&&o.eventCapture){var t=e.surface[0];r(function(i){t.removeEventListener(i,e.preventIfMoving)})}e.element.kendoDestroy(e.eventNS),e.surface.kendoDestroy(e.eventNS),e.element.removeData("handler"),e.surface.removeData("handler"),e._disposeAll(),e.unbind(),delete e.surface,delete e.element,delete e.currentTarget}},capture:function(){k.current=this},cancel:function(){this._disposeAll(),this.trigger("cancel")},notify:function(e,t){var n=this.touches;if(this._isMultiTouch()){switch(e){case"move":e="gesturechange";break;case"end":e="gestureend";break;case"tap":e="gesturetap"}u(t,{touches:n},i(n[0],n[1]))}return this.trigger(e,u(t,{type:e}))},press:function(e,t,i){this._apiCall("_start",e,t,i)},move:function(e,t){this._apiCall("_move",e,t)},end:function(e,t){this._apiCall("_end",e,t)},_isMultiTouch:function(){return this.touches.length>1},_maxTouchesReached:function(){return this.touches.length>=this._maxTouches},_disposeAll:function(){for(var e=this.touches;e.length>0;)e.pop().dispose()},_isMoved:function(){return e.grep(this.touches,function(e){return e.isMoved()}).length},_select:function(e){this.allowSelection&&!this.trigger("select",{event:e})||e.preventDefault()},_start:function(t){var i,r,s=0,o=this.filter,a=n(t),l=a.length,d=t.which;if(!(d&&d>1||this._maxTouchesReached()))for(k.current=null,this.currentTarget=t.currentTarget,this.stopPropagation&&t.stopPropagation();s<l&&!this._maxTouchesReached();s++)r=a[s],(i=o?e(r.currentTarget):this.element).length&&(r=new b(this,i,r),this.touches.push(r),r.press(),this._isMultiTouch()&&this.notify("gesturestart",{}))},_move:function(e){this._eachTouch("move",e)},_end:function(e){this._eachTouch("end",e)},_click:function(t){var i={touch:{initialTouch:t.target,target:e(t.currentTarget),endTime:c(),x:{location:t.pageX,client:t.clientX},y:{location:t.pageY,client:t.clientY}},x:t.pageX,y:t.pageY,target:e(t.currentTarget),event:t,type:"tap"};this.trigger("tap",i)&&t.preventDefault()},_eachTouch:function(e,t){var i,r,s,o,a={},l=n(t),d=this.touches;for(i=0;i<d.length;i++)a[(r=d[i]).id]=r;for(i=0;i<l.length;i++)(o=a[(s=l[i]).id])&&o[e](s)},_apiCall:function(t,i,n,r){this[t]({api:!0,pageX:i,pageY:n,clientX:i,clientY:n,target:e(r||this.element)[0],stopPropagation:e.noop,preventDefault:e.noop})}});k.defaultThreshold=function(e){m=e},k.minHold=function(e){p=e},s.getTouches=n,s.touchDelta=i,s.UserEvents=k}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.draganddrop",["kendo.core","kendo.userevents"],function(){return function(e,t){function i(e,t){return parseInt(e.css(t),10)||0}function n(e,t){return Math.min(Math.max(e,t.min),t.max)}function r(e,t){var n=y(e),r=n.left+i(e,"borderLeftWidth")+i(e,"paddingLeft"),s=n.top+i(e,"borderTopWidth")+i(e,"paddingTop");return{x:{min:r,max:r+e.width()-t.outerWidth(!0)},y:{min:s,max:s+e.height()-t.outerHeight(!0)}}}function s(e,t){var i,n=t.options.group,r=e[n];if(v.fn.destroy.call(t),r.length>1){for(i=0;i<r.length;i++)if(r[i]==t){r.splice(i,1);break}}else r.length=0,delete e[n]}function o(e){var t,i,n,r=a()[0];return e[0]===r?(i=r.scrollTop,n=r.scrollLeft,{top:i,left:n,bottom:i+m.height(),right:n+m.width()}):(t=e.offset(),t.bottom=t.top+e.height(),t.right=t.left+e.width(),t)}function a(){return e(h.support.browser.chrome?p.body:p.documentElement)}function l(t){var i=a();if(!t||t===p.body||t===p.documentElement)return i;for(var n=e(t)[0];n&&!h.isScrollable(n)&&n!==p.body;)n=n.parentNode;return n===p.body?i:e(n)}function d(e,t,i){var n={x:0,y:0};return e-i.left<50?n.x=-(50-(e-i.left)):i.right-e<50&&(n.x=50-(i.right-e)),t-i.top<50?n.y=-(50-(t-i.top)):i.bottom-t<50&&(n.y=50-(i.bottom-t)),n}var c,u,h=window.kendo,f=h.support,p=window.document,m=e(window),g=h.Class,v=h.ui.Widget,_=h.Observable,b=h.UserEvents,k=e.proxy,w=e.extend,y=h.getOffset,x={},C={},S={},T=h.elementUnderCursor,D="dragleave",F=_.extend({init:function(t,i){var n=this,r=t[0];n.capture=!1,r.addEventListener?(e.each(h.eventMap.down.split(" "),function(){r.addEventListener(this,k(n._press,n),!0)}),e.each(h.eventMap.up.split(" "),function(){r.addEventListener(this,k(n._release,n),!0)})):(e.each(h.eventMap.down.split(" "),function(){r.attachEvent(this,k(n._press,n))}),e.each(h.eventMap.up.split(" "),function(){r.attachEvent(this,k(n._release,n))})),_.fn.init.call(n),n.bind(["press","release"],i||{})},captureNext:function(){this.capture=!0},cancelCapture:function(){this.capture=!1},_press:function(e){this.trigger("press"),this.capture&&e.preventDefault()},_release:function(e){this.trigger("release"),this.capture&&(e.preventDefault(),this.cancelCapture())}}),E=_.extend({init:function(t){_.fn.init.call(this),this.forcedEnabled=!1,e.extend(this,t),this.scale=1,this.horizontal?(this.measure="offsetWidth",this.scrollSize="scrollWidth",this.axis="x"):(this.measure="offsetHeight",this.scrollSize="scrollHeight",this.axis="y")},makeVirtual:function(){e.extend(this,{virtual:!0,forcedEnabled:!0,_virtualMin:0,_virtualMax:0})},virtualSize:function(e,t){this._virtualMin===e&&this._virtualMax===t||(this._virtualMin=e,this._virtualMax=t,this.update())},outOfBounds:function(e){return e>this.max||e<this.min},forceEnabled:function(){this.forcedEnabled=!0},getSize:function(){return this.container[0][this.measure]},getTotal:function(){return this.element[0][this.scrollSize]},rescale:function(e){this.scale=e},update:function(e){var t=this.virtual?this._virtualMax:this.getTotal(),i=t*this.scale,n=this.getSize();(0!==t||this.forcedEnabled)&&(this.max=this.virtual?-this._virtualMin:0,this.size=n,this.total=i,this.min=Math.min(this.max,n-i),this.minScale=n/t,this.centerOffset=(i-n)/2,this.enabled=this.forcedEnabled||i>n,e||this.trigger("change",this))}}),R=_.extend({init:function(e){_.fn.init.call(this),this.x=new E(w({horizontal:!0},e)),this.y=new E(w({horizontal:!1},e)),this.container=e.container,this.forcedMinScale=e.minScale,this.maxScale=e.maxScale||100,this.bind("change",e)},rescale:function(e){this.x.rescale(e),this.y.rescale(e),this.refresh()},centerCoordinates:function(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},refresh:function(){this.x.update(),this.y.update(),this.enabled=this.x.enabled||this.y.enabled,this.minScale=this.forcedMinScale||Math.min(this.x.minScale,this.y.minScale),this.fitScale=Math.max(this.x.minScale,this.y.minScale),this.trigger("change")}}),A=_.extend({init:function(e){w(this,e),_.fn.init.call(this)},outOfBounds:function(){return this.dimension.outOfBounds(this.movable[this.axis])},dragMove:function(e){var t=this.dimension,i=this.axis,n=this.movable,r=n[i]+e;t.enabled&&((r<t.min&&e<0||r>t.max&&e>0)&&(e*=this.resistance),n.translateAxis(i,e),this.trigger("change",this))}}),I=g.extend({init:function(t){var i,n,r,s,o=this;w(o,{elastic:!0},t),r=o.elastic?.5:0,s=o.movable,o.x=i=new A({axis:"x",dimension:o.dimensions.x,resistance:r,movable:s}),o.y=n=new A({axis:"y",dimension:o.dimensions.y,resistance:r,movable:s}),o.userEvents.bind(["press","move","end","gesturestart","gesturechange"],{gesturestart:function(e){o.gesture=e,o.offset=o.dimensions.container.offset()},press:function(t){e(t.event.target).closest("a").is("[data-navigate-on-press=true]")&&t.sender.cancel()},gesturechange:function(e){var t,r=o.gesture,a=r.center,l=e.center,d=e.distance/r.distance,c=o.dimensions.minScale,u=o.dimensions.maxScale;s.scale<=c&&d<1&&(d+=.8*(1-d)),s.scale*d>=u&&(d=u/s.scale);var h=s.x+o.offset.left,f=s.y+o.offset.top;t={x:(h-a.x)*d+l.x-h,y:(f-a.y)*d+l.y-f},s.scaleWith(d),i.dragMove(t.x),n.dragMove(t.y),o.dimensions.rescale(s.scale),o.gesture=e,e.preventDefault()},move:function(e){e.event.target.tagName.match(/textarea|input/i)||(i.dimension.enabled||n.dimension.enabled?(i.dragMove(e.x.delta),n.dragMove(e.y.delta),e.preventDefault()):e.touch.skip())},end:function(e){e.preventDefault()}})}}),M=f.transitions.prefix+"Transform";u=f.hasHW3D?function(e,t,i){return"translate3d("+e+"px,"+t+"px,0) scale("+i+")"}:function(e,t,i){return"translate("+e+"px,"+t+"px) scale("+i+")"};var H=_.extend({init:function(t){_.fn.init.call(this),this.element=e(t),this.element[0].style.webkitTransformOrigin="left top",this.x=0,this.y=0,this.scale=1,this._saveCoordinates(u(this.x,this.y,this.scale))},translateAxis:function(e,t){this[e]+=t,this.refresh()},scaleTo:function(e){this.scale=e,this.refresh()},scaleWith:function(e){this.scale*=e,this.refresh()},translate:function(e){this.x+=e.x,this.y+=e.y,this.refresh()},moveAxis:function(e,t){this[e]=t,this.refresh()},moveTo:function(e){w(this,e),this.refresh()},refresh:function(){var e,t=this.x,i=this.y;this.round&&(t=Math.round(t),i=Math.round(i)),(e=u(t,i,this.scale))!=this.coordinates&&(h.support.browser.msie&&h.support.browser.version<10?(this.element[0].style.position="absolute",this.element[0].style.left=this.x+"px",this.element[0].style.top=this.y+"px"):this.element[0].style[M]=e,this._saveCoordinates(e),this.trigger("change"))},_saveCoordinates:function(e){this.coordinates=e}}),z=v.extend({init:function(e,t){v.fn.init.call(this,e,t);var i=this.options.group;i in C?C[i].push(this):C[i]=[this]},events:["dragenter",D,"drop"],options:{name:"DropTarget",group:"default"},destroy:function(){s(C,this)},_trigger:function(e,t){var i=x[this.options.group];if(i)return this.trigger(e,w({},t.event,{draggable:i,dropTarget:t.dropTarget}))},_over:function(e){this._trigger("dragenter",e)},_out:function(e){this._trigger(D,e)},_drop:function(e){var t=x[this.options.group];t&&(t.dropped=!this._trigger("drop",e))}});z.destroyGroup=function(e){var t,i=C[e]||S[e];if(i){for(t=0;t<i.length;t++)v.fn.destroy.call(i[t]);i.length=0,delete C[e],delete S[e]}},z._cache=C;var N=z.extend({init:function(e,t){v.fn.init.call(this,e,t);var i=this.options.group;i in S?S[i].push(this):S[i]=[this]},destroy:function(){s(S,this)},options:{name:"DropTargetArea",group:"default",filter:null}}),P=v.extend({init:function(e,t){v.fn.init.call(this,e,t),this._activated=!1,this.userEvents=new b(this.element,{global:!0,allowSelection:!0,filter:this.options.filter,threshold:this.options.distance,start:k(this._start,this),hold:k(this._hold,this),move:k(this._drag,this),end:k(this._end,this),cancel:k(this._cancel,this),select:k(this._select,this)}),this._afterEndHandler=k(this._afterEnd,this),this._captureEscape=k(this._captureEscape,this)},events:["hold","dragstart","drag","dragend","dragcancel","hintDestroyed"],options:{name:"Draggable",distance:h.support.touch?0:5,group:"default",cursorOffset:null,axis:null,container:null,filter:null,ignore:null,holdToDrag:!1,autoScroll:!1,dropped:!1},cancelHold:function(){this._activated=!1},_captureEscape:function(e){e.keyCode===h.keys.ESC&&(this._trigger("dragcancel",{event:e}),this.userEvents.cancel())},_updateHint:function(t){var i,r=this.options,s=this.boundaries,o=r.axis,a=this.options.cursorOffset;a?i={left:t.x.location+a.left,top:t.y.location+a.top}:(this.hintOffset.left+=t.x.delta,this.hintOffset.top+=t.y.delta,i=e.extend({},this.hintOffset)),s&&(i.top=n(i.top,s.y),i.left=n(i.left,s.x)),"x"===o?delete i.top:"y"===o&&delete i.left,this.hint.css(i)},_shouldIgnoreTarget:function(t){var i=this.options.ignore;return i&&e(t).is(i)},_select:function(e){this._shouldIgnoreTarget(e.event.target)||e.preventDefault()},_start:function(t){var i=this,n=i.options,s=n.container,o=n.hint;if(this._shouldIgnoreTarget(t.touch.initialTouch)||n.holdToDrag&&!i._activated)i.userEvents.cancel();else{if(i.currentTarget=t.target,i.currentTargetOffset=y(i.currentTarget),o){i.hint&&i.hint.stop(!0,!0).remove(),i.hint=h.isFunction(o)?e(o.call(i,i.currentTarget)):o;var a=y(i.currentTarget);i.hintOffset=a,i.hint.css({position:"absolute",zIndex:2e4,left:a.left,top:a.top}).appendTo(p.body),i.angular("compile",function(){i.hint.removeAttr("ng-repeat");for(var n=e(t.target);!n.data("$$kendoScope")&&n.length;)n=n.parent();return{elements:i.hint.get(),scopeFrom:n.data("$$kendoScope")}})}x[n.group]=i,i.dropped=!1,s&&(i.boundaries=r(s,i.hint)),e(p).on("keyup",i._captureEscape),i._trigger("dragstart",t)&&(i.userEvents.cancel(),i._afterEnd()),i.userEvents.capture()}},_hold:function(e){this.currentTarget=e.target,this._trigger("hold",e)?this.userEvents.cancel():this._activated=!0},_drag:function(t){t.preventDefault();var i=this._elementUnderCursor(t);if(this._lastEvent=t,this._processMovement(t,i),this.options.autoScroll&&(this._cursorElement!==i&&(this._scrollableParent=l(i),this._cursorElement=i),this._scrollableParent[0])){var n=d(t.x.location,t.y.location,o(this._scrollableParent));this._scrollCompenstation=e.extend({},this.hintOffset),this._scrollVelocity=n,0===n.y&&0===n.x?(clearInterval(this._scrollInterval),this._scrollInterval=null):this._scrollInterval||(this._scrollInterval=setInterval(e.proxy(this,"_autoScroll"),50))}this.hint&&this._updateHint(t)},_processMovement:function(t,i){this._withDropTarget(i,function(i,n){if(i){if(c){if(n===c.targetElement)return;c._trigger(D,w(t,{dropTarget:e(c.targetElement)}))}i._trigger("dragenter",w(t,{dropTarget:e(n)})),c=w(i,{targetElement:n})}else c&&(c._trigger(D,w(t,{dropTarget:e(c.targetElement)})),c=null)}),this._trigger("drag",w(t,{dropTarget:c,elementUnderCursor:i}))},_autoScroll:function(){var e=this._scrollableParent[0],t=this._scrollVelocity,i=this._scrollCompenstation;if(e){var n=this._elementUnderCursor(this._lastEvent);this._processMovement(this._lastEvent,n);var r,s,o=e===a()[0];o?(r=p.body.scrollHeight>m.height(),s=p.body.scrollWidth>m.width()):(r=e.offsetHeight<=e.scrollHeight,s=e.offsetWidth<=e.scrollWidth);var l=e.scrollTop+t.y,d=r&&l>0&&l<e.scrollHeight,c=e.scrollLeft+t.x,u=s&&c>0&&c<e.scrollWidth;d&&(e.scrollTop+=t.y),u&&(e.scrollLeft+=t.x),o&&(u||d)&&(d&&(i.top+=t.y),u&&(i.left+=t.x),this.hint.css(i))}},_end:function(t){this._withDropTarget(this._elementUnderCursor(t),function(i,n){i&&(i._drop(w({},t,{dropTarget:e(n)})),c=null)}),this._cancel(this._trigger("dragend",t))},_cancel:function(e){var t=this;t._scrollableParent=null,this._cursorElement=null,clearInterval(this._scrollInterval),t._activated=!1,t.hint&&!t.dropped?setTimeout(function(){t.hint.stop(!0,!0),e?t._afterEndHandler():t.hint.animate(t.currentTargetOffset,"fast",t._afterEndHandler)},0):t._afterEnd()},_trigger:function(e,t){return this.trigger(e,w({},t.event,{x:t.x,y:t.y,currentTarget:this.currentTarget,initialTarget:t.touch?t.touch.initialTouch:null,dropTarget:t.dropTarget,elementUnderCursor:t.elementUnderCursor}))},_elementUnderCursor:function(t){var i=T(t),n=this.hint;return n&&function(t,i){try{return e.contains(t,i)||t==i}catch(e){return!1}}(n[0],i)&&(n.hide(),(i=T(t))||(i=T(t)),n.show()),i},_withDropTarget:function(i,n){var r,s=this.options.group,o=C[s],a=S[s];(o&&o.length||a&&a.length)&&((r=function(i,n,r){for(var s,o,a=0,l=n&&n.length,d=r&&r.length;i&&i.parentNode;){for(a=0;a<l;a++)if((s=n[a]).element[0]===i)return{target:s,targetElement:i};for(a=0;a<d;a++)if(o=r[a],e.contains(o.element[0],i)&&f.matchesSelector.call(i,o.options.filter))return{target:o,targetElement:i};i=i.parentNode}return t}(i,o,a))?n(r.target,r.targetElement):n())},destroy:function(){v.fn.destroy.call(this),this._afterEnd(),this.userEvents.destroy(),this._scrollableParent=null,this._cursorElement=null,clearInterval(this._scrollInterval),this.currentTarget=null},_afterEnd:function(){this.hint&&this.hint.remove(),delete x[this.options.group],this.trigger("destroy"),this.trigger("hintDestroyed"),e(p).off("keyup",this._captureEscape)}});h.ui.plugin(z),h.ui.plugin(N),h.ui.plugin(P),h.TapCapture=F,h.containerBoundaries=r,w(h.ui,{Pane:I,PaneDimensions:R,Movable:H}),h.ui.Draggable.utils={autoScrollVelocity:d,scrollableViewPort:o,findScrollableParent:l}}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.mobile.scroller",["kendo.fx","kendo.draganddrop"],function(){return function(e,t){var i=window.kendo,n=i.mobile,r=i.effects,s=n.ui,o=e.proxy,a=e.extend,l=s.Widget,d=i.Class,c=i.ui.Movable,u=i.ui.Pane,h=i.ui.PaneDimensions,f=r.Transition,p=r.Animation,m=Math.abs,g="km-scroller-release",v="km-scroller-refresh",_=p.extend({init:function(e){p.fn.init.call(this),a(this,e),this.userEvents.bind("gestureend",o(this.start,this)),this.tapCapture.bind("press",o(this.cancel,this))},enabled:function(){return this.movable.scale<this.dimensions.minScale},done:function(){return this.dimensions.minScale-this.movable.scale<.01},tick:function(){var e=this.movable;e.scaleWith(1.1),this.dimensions.rescale(e.scale)},onEnd:function(){var e=this.movable;e.scaleTo(this.dimensions.minScale),this.dimensions.rescale(e.scale)}}),b=p.extend({init:function(e){var t=this;p.fn.init.call(t),a(t,e,{transition:new f({axis:e.axis,movable:e.movable,onEnd:function(){t._end()}})}),t.tapCapture.bind("press",function(){t.cancel()}),t.userEvents.bind("end",o(t.start,t)),t.userEvents.bind("gestureend",o(t.start,t)),t.userEvents.bind("tap",o(t.onEnd,t))},onCancel:function(){this.transition.cancel()},freeze:function(e){this.cancel(),this._moveTo(e)},onEnd:function(){this.paneAxis.outOfBounds()?this._snapBack():this._end()},done:function(){return m(this.velocity)<1},start:function(e){var t;this.dimension.enabled&&(this.paneAxis.outOfBounds()?this._snapBack():(t=2===e.touch.id?0:e.touch[this.axis].velocity,this.velocity=Math.max(Math.min(t*this.velocityMultiplier,55),-55),this.tapCapture.captureNext(),p.fn.start.call(this)))},tick:function(){var e=this.dimension,t=this.paneAxis.outOfBounds()?.5:this.friction,i=this.velocity*=t,n=this.movable[this.axis]+i;!this.elastic&&e.outOfBounds(n)&&(n=Math.max(Math.min(n,e.max),e.min),this.velocity=0),this.movable.moveAxis(this.axis,n)},_end:function(){this.tapCapture.cancelCapture(),this.end()},_snapBack:function(){var e=this.dimension,t=this.movable[this.axis]>e.max?e.max:e.min;this._moveTo(t)},_moveTo:function(e){this.transition.moveTo({location:e,duration:500,ease:f.easeOutExpo})}}),k=p.extend({init:function(e){i.effects.Animation.fn.init.call(this),a(this,e,{origin:{},destination:{},offset:{}})},tick:function(){this._updateCoordinates(),this.moveTo(this.origin)},done:function(){return m(this.offset.y)<5&&m(this.offset.x)<5},onEnd:function(){this.moveTo(this.destination),this.callback&&this.callback.call()},setCoordinates:function(e,t){this.offset={},this.origin=e,this.destination=t},setCallback:function(e){e&&i.isFunction(e)?this.callback=e:e=void 0},_updateCoordinates:function(){this.offset={x:(this.destination.x-this.origin.x)/4,y:(this.destination.y-this.origin.y)/4},this.origin={y:this.origin.y+this.offset.y,x:this.origin.x+this.offset.x}}}),w=d.extend({init:function(t){var i="x"===t.axis,n=e('<div class="km-touch-scrollbar km-'+(i?"horizontal":"vertical")+'-scrollbar" />');a(this,t,{element:n,elementSize:0,movable:new c(n),scrollMovable:t.movable,alwaysVisible:t.alwaysVisible,size:i?"width":"height"}),this.scrollMovable.bind("change",o(this.refresh,this)),this.container.append(n),t.alwaysVisible&&this.show()},refresh:function(){var e=this.axis,t=this.dimension,i=t.size,n=this.scrollMovable,r=i/t.total,s=Math.round(-n[e]*r),o=Math.round(i*r);r>=1?this.element.css("display","none"):this.element.css("display",""),s+o>i?o=i-s:s<0&&(o+=s,s=0),this.elementSize!=o&&(this.element.css(this.size,o+"px"),this.elementSize=o),this.movable.moveAxis(e,s)},show:function(){this.element.css({opacity:.7,visibility:"visible"})},hide:function(){this.alwaysVisible||this.element.css({opacity:0})}}),y=l.extend({init:function(t,n){var r=this;if(l.fn.init.call(r,t,n),t=r.element,r._native=r.options.useNative&&i.support.hasNativeScrolling,r._native)return t.addClass("km-native-scroller").prepend('<div class="km-scroll-header"/>'),void a(r,{scrollElement:t,fixedContainer:t.children().first()});t.css("overflow","hidden").addClass("km-scroll-wrapper").wrapInner('<div class="km-scroll-container"/>').prepend('<div class="km-scroll-header"/>');var s=t.children().eq(1),d=new i.TapCapture(t),f=new c(s),p=new h({element:s,container:t,forcedEnabled:r.options.zoom}),g=this.options.avoidScrolling,v=new i.UserEvents(t,{fastTap:!0,allowSelection:!0,preventDragEvent:!0,captureUpIfMoved:!0,multiTouch:r.options.zoom,start:function(t){p.refresh();var i=m(t.x.velocity),n=m(t.y.velocity),s=2*i>=n,o=2*n>=i;!e.contains(r.fixedContainer[0],t.event.target)&&!g(t)&&r.enabled&&(p.x.enabled&&s||p.y.enabled&&o)?v.capture():v.cancel()}}),b=new u({movable:f,dimensions:p,userEvents:v,elastic:r.options.elastic}),w=new _({movable:f,dimensions:p,userEvents:v,tapCapture:d}),y=new k({moveTo:function(e){r.scrollTo(e.x,e.y)}});f.bind("change",function(){r.scrollTop=-f.y,r.scrollLeft=-f.x,r.trigger("scroll",{scrollTop:r.scrollTop,scrollLeft:r.scrollLeft})}),r.options.mousewheelScrolling&&t.on("DOMMouseScroll mousewheel",o(this,"_wheelScroll")),a(r,{movable:f,dimensions:p,zoomSnapBack:w,animatedScroller:y,userEvents:v,pane:b,tapCapture:d,pulled:!1,enabled:!0,scrollElement:s,scrollTop:0,scrollLeft:0,fixedContainer:t.children().first()}),r._initAxis("x"),r._initAxis("y"),r._wheelEnd=function(){r._wheel=!1,r.userEvents.end(0,r._wheelY)},p.refresh(),r.options.pullToRefresh&&r._initPullToRefresh()},_wheelScroll:function(e){this._wheel||(this._wheel=!0,this._wheelY=0,this.userEvents.press(0,this._wheelY)),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(this._wheelEnd,50);var t=i.wheelDeltaY(e);t&&(this._wheelY+=t,this.userEvents.move(0,this._wheelY)),e.preventDefault()},makeVirtual:function(){this.dimensions.y.makeVirtual()},virtualSize:function(e,t){this.dimensions.y.virtualSize(e,t)},height:function(){return this.dimensions.y.size},scrollHeight:function(){return this.scrollElement[0].scrollHeight},scrollWidth:function(){return this.scrollElement[0].scrollWidth},options:{name:"Scroller",zoom:!1,pullOffset:140,visibleScrollHints:!1,elastic:!0,useNative:!1,mousewheelScrolling:!0,avoidScrolling:function(){return!1},pullToRefresh:!1,messages:{pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"}},events:["pull","scroll","resize"],_resize:function(){this._native||this.contentResized()},setOptions:function(e){l.fn.setOptions.call(this,e),e.pullToRefresh&&this._initPullToRefresh()},reset:function(){this._native?this.scrollElement.scrollTop(0):(this.movable.moveTo({x:0,y:0}),this._scale(1))},contentResized:function(){this.dimensions.refresh(),this.pane.x.outOfBounds()&&this.movable.moveAxis("x",this.dimensions.x.min),this.pane.y.outOfBounds()&&this.movable.moveAxis("y",this.dimensions.y.min)},zoomOut:function(){var e=this.dimensions;e.refresh(),this._scale(e.fitScale),this.movable.moveTo(e.centerCoordinates())},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},scrollTo:function(e,t){this._native?(this.scrollElement.scrollLeft(m(e)),this.scrollElement.scrollTop(m(t))):(this.dimensions.refresh(),this.movable.moveTo({x:e,y:t}))},animatedScrollTo:function(e,t,i){var n,r;this._native?this.scrollTo(e,t):(n={x:this.movable.x,y:this.movable.y},r={x:e,y:t},this.animatedScroller.setCoordinates(n,r),this.animatedScroller.setCallback(i),this.animatedScroller.start())},pullHandled:function(){this.refreshHint.removeClass(v),this.hintContainer.html(this.pullTemplate({})),this.yinertia.onEnd(),this.xinertia.onEnd(),this.userEvents.cancel()},destroy:function(){l.fn.destroy.call(this),this.userEvents&&this.userEvents.destroy()},_scale:function(e){this.dimensions.rescale(e),this.movable.scaleTo(e)},_initPullToRefresh:function(){this.dimensions.y.forceEnabled(),this.pullTemplate=i.template(this.options.messages.pullTemplate),this.releaseTemplate=i.template(this.options.messages.releaseTemplate),this.refreshTemplate=i.template(this.options.messages.refreshTemplate),this.scrollElement.prepend('<span class="km-scroller-pull"><span class="km-icon"></span><span class="km-loading-left"></span><span class="km-loading-right"></span><span class="km-template">'+this.pullTemplate({})+"</span></span>"),this.refreshHint=this.scrollElement.children().first(),this.hintContainer=this.refreshHint.children(".km-template"),this.pane.y.bind("change",o(this._paneChange,this)),this.userEvents.bind("end",o(this._dragEnd,this))},_dragEnd:function(){this.pulled&&(this.pulled=!1,this.refreshHint.removeClass(g).addClass(v),this.hintContainer.html(this.refreshTemplate({})),this.yinertia.freeze(this.options.pullOffset/2),this.trigger("pull"))},_paneChange:function(){this.movable.y/.5>this.options.pullOffset?this.pulled||(this.pulled=!0,this.refreshHint.removeClass(v).addClass(g),this.hintContainer.html(this.releaseTemplate({}))):this.pulled&&(this.pulled=!1,this.refreshHint.removeClass(g),this.hintContainer.html(this.pullTemplate({})))},_initAxis:function(e){var t=this,i=t.movable,n=t.dimensions[e],r=t.tapCapture,s=t.pane[e],o=new w({axis:e,movable:i,dimension:n,container:t.element,alwaysVisible:t.options.visibleScrollHints});n.bind("change",function(){o.refresh()}),s.bind("change",function(){o.show()}),t[e+"inertia"]=new b({axis:e,paneAxis:s,movable:i,tapCapture:r,userEvents:t.userEvents,dimension:n,elastic:t.options.elastic,friction:t.options.friction||.96,velocityMultiplier:t.options.velocityMultiplier||10,end:function(){o.hide(),t.trigger("scrollEnd",{axis:e,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft})}})}});s.plugin(y)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.groupable",["kendo.core","kendo.draganddrop"],function(){return function(e,t){function i(e){return e.position().top+3}var n=window.kendo,r=n.ui.Widget,s=e.proxy,o=!1,a=".kendoGroupable",l=n.template('<div class="k-group-indicator" data-#=data.ns#field="${data.field}" data-#=data.ns#title="${data.title || ""}" data-#=data.ns#dir="${data.dir || "asc"}"><a href="\\#" class="k-link"><span class="k-icon k-si-arrow-${(data.dir || "asc") == "asc" ? "n" : "s"}">(sorted ${(data.dir || "asc") == "asc" ? "ascending": "descending"})</span>${data.title ? data.title: data.field}</a><a class="k-button k-button-icon k-button-bare"><span class="k-icon k-group-delete"></span></a></div>',{useWithBlock:!1}),d=function(t){return e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(n.htmlEncode(t.attr(n.attr("title")))||t.attr(n.attr("field"))).prepend('<span class="k-icon k-drag-status k-denied" />')},c=e('<div class="k-grouping-dropclue"/>'),u=r.extend({init:function(t,l){var u,h,f=this,p=n.guid(),m=s(f._intializePositions,f),g=f._dropCuePositions=[];r.fn.init.call(f,t,l),o=n.support.isRtl(t),h=o?"right":"left",f.draggable=u=f.options.draggable||new n.ui.Draggable(f.element,{filter:f.options.draggableElements,hint:d,group:p}),f.groupContainer=e(f.options.groupContainer,f.element).kendoDropTarget({group:u.options.group,dragenter:function(e){f._canDrag(e.draggable.currentTarget)&&(e.draggable.hint.find(".k-drag-status").removeClass("k-denied").addClass("k-add"),c.css("top",i(f.groupContainer)).css(h,0).appendTo(f.groupContainer))},dragleave:function(e){e.draggable.hint.find(".k-drag-status").removeClass("k-add").addClass("k-denied"),c.remove()},drop:function(t){var i,r=t.draggable.currentTarget,s=r.attr(n.attr("field")),a=r.attr(n.attr("title")),l=f.indicator(s),d=f._dropCuePositions,u=d[d.length-1];(r.hasClass("k-group-indicator")||f._canDrag(r))&&(u?(i=f._dropCuePosition(n.getOffset(c).left+parseInt(u.element.css("marginLeft"),10)*(o?-1:1)+parseInt(u.element.css("marginRight"),10)))&&f._canDrop(e(l),i.element,i.left)&&(i.before?i.element.before(l||f.buildIndicator(s,a)):i.element.after(l||f.buildIndicator(s,a)),f._change()):(f.groupContainer.append(f.buildIndicator(s,a)),f._change()))}}).kendoDraggable({filter:"div.k-group-indicator",hint:d,group:u.options.group,dragcancel:s(f._dragCancel,f),dragstart:function(e){var t=e.currentTarget,n=parseInt(t.css("marginLeft"),10),r=t.position(),s=o?r.left-n:r.left+t.outerWidth();m(),c.css({top:i(f.groupContainer),left:s}).appendTo(f.groupContainer),this.hint.find(".k-drag-status").removeClass("k-denied").addClass("k-add")},dragend:function(){f._dragEnd(this)},drag:s(f._drag,f)}).on("click"+a,".k-button",function(t){t.preventDefault(),f._removeIndicator(e(this).parent())}).on("click"+a,".k-link",function(t){var i=e(this).parent(),r=f.buildIndicator(i.attr(n.attr("field")),i.attr(n.attr("title")),"asc"==i.attr(n.attr("dir"))?"desc":"asc");i.before(r).remove(),f._change(),t.preventDefault()}),u.bind(["dragend","dragcancel","dragstart","drag"],{dragend:function(){f._dragEnd(this)},dragcancel:s(f._dragCancel,f),dragstart:function(e){var t;f.options.allowDrag||f._canDrag(e.currentTarget)?(m(),g.length&&(t=g[g.length-1].element,parseInt(t.css("marginRight"),10),t.position().left,t.outerWidth())):e.preventDefault()},drag:s(f._drag,f)}),f.dataSource=f.options.dataSource,f.dataSource&&f._refreshHandler?f.dataSource.unbind("change",f._refreshHandler):f._refreshHandler=s(f.refresh,f),f.dataSource&&(f.dataSource.bind("change",f._refreshHandler),f.refresh())},refresh:function(){var t=this,i=t.dataSource;t.groupContainer&&t.groupContainer.empty().append(e.map(i.group()||[],function(i){var r=i.field,s=n.attr("field"),o=t.element.find(t.options.filter).filter(function(){return e(this).attr(s)===r});return t.buildIndicator(i.field,o.attr(n.attr("title")),i.dir)}).join("")),t._invalidateGroupContainer()},destroy:function(){r.fn.destroy.call(this),this.groupContainer.off(a),this.groupContainer.data("kendoDropTarget")&&this.groupContainer.data("kendoDropTarget").destroy(),this.groupContainer.data("kendoDraggable")&&this.groupContainer.data("kendoDraggable").destroy(),this.options.draggable||this.draggable.destroy(),this.dataSource&&this._refreshHandler&&(this.dataSource.unbind("change",this._refreshHandler),this._refreshHandler=null),this.groupContainer=this.element=this.draggable=null},options:{name:"Groupable",filter:"th",draggableElements:"th",messages:{empty:"Drag a column header and drop it here to group by that column"}},indicator:function(t){var i=e(".k-group-indicator",this.groupContainer);return e.grep(i,function(i){return e(i).attr(n.attr("field"))===t})[0]},buildIndicator:function(e,t,i){return l({field:e.replace(/"/g,"'"),dir:i,title:t,ns:n.ns})},descriptors:function(){var t,i,r,s,o,a=e(".k-group-indicator",this.groupContainer);return t=this.element.find(this.options.filter).map(function(){var t=e(this),r=t.attr(n.attr("aggregates")),a=t.attr(n.attr("field"));if(r&&""!==r)for(i=r.split(","),r=[],s=0,o=i.length;s<o;s++)r.push({field:a,aggregate:i[s]});return r}).toArray(),e.map(a,function(i){return i=e(i),r=i.attr(n.attr("field")),{field:r,dir:i.attr(n.attr("dir")),aggregates:t||[]}})},_removeIndicator:function(e){e.remove(),this._invalidateGroupContainer(),this._change()},_change:function(){this.dataSource&&this.dataSource.group(this.descriptors())},_dropCuePosition:function(t){var i=this._dropCuePositions;if(c.is(":visible")&&0!==i.length){t=Math.ceil(t);var n=i[i.length-1],r=n.left,s=n.right,a=parseInt(n.element.css("marginLeft"),10),l=parseInt(n.element.css("marginRight"),10);return t>=s&&!o||t<r&&o?t={left:n.element.position().left+(o?-a:n.element.outerWidth()+l),element:n.element,before:!1}:(t=e.grep(i,function(e){return e.left<=t&&t<=e.right||o&&t>e.right})[0])&&(t={left:o?t.element.position().left+t.element.outerWidth()+l:t.element.position().left-a,element:t.element,before:!0}),t}},_drag:function(e){var t=this._dropCuePosition(e.x.location);t&&c.css({left:t.left,right:"auto"})},_canDrag:function(e){var t=e.attr(n.attr("field"));return"false"!=e.attr(n.attr("groupable"))&&t&&(e.hasClass("k-group-indicator")||!this.indicator(t))},_canDrop:function(e,t,i){var n=e.next();return e[0]!==t[0]&&(!n[0]||t[0]!==n[0]||!o&&i>n.position().left||o&&i<n.position().left)},_dragEnd:function(t){var i=t.currentTarget.attr(n.attr("field")),r=this.indicator(i);t!==this.options.draggable&&!t.dropped&&r&&this._removeIndicator(e(r)),this._dragCancel()},_dragCancel:function(){c.remove(),this._dropCuePositions=[]},_intializePositions:function(){var t,i=e(".k-group-indicator",this.groupContainer);this._dropCuePositions=e.map(i,function(i){return i=e(i),t=n.getOffset(i).left,{left:parseInt(t,10),right:parseInt(t+i.outerWidth(),10),element:i}})},_invalidateGroupContainer:function(){var e=this.groupContainer;e&&e.is(":empty")&&e.html(this.options.messages.empty)}});n.ui.plugin(u)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.reorderable",["kendo.core","kendo.draganddrop"],function(){return function(e,t){function i(t,i){t=e(t),i?t.find(".k-drag-status").removeClass("k-add").addClass("k-denied"):t.find(".k-drag-status").removeClass("k-denied").addClass("k-add")}var n=window.kendo,r=n.getOffset,s=n.ui.Widget,o=s.extend({init:function(t,o){var a,l=this,d=n.guid()+"-reorderable";s.fn.init.call(l,t,o),t=l.element.addClass("k-reorderable"),o=l.options,l.draggable=a=o.draggable||new n.ui.Draggable(t,{group:d,autoScroll:!0,filter:o.filter,hint:o.hint}),l.reorderDropCue=e('<div class="k-reorder-cue"><div class="k-icon k-i-arrow-s"></div><div class="k-icon k-i-arrow-n"></div></div>'),t.find(a.options.filter).kendoDropTarget({group:a.options.group,dragenter:function(e){if(l._draggable){var t,n=this.element,s=!l._dropTargetAllowed(n)||l._isLastDraggable();if(i(e.draggable.hint,s),!s){var a=(t=r(n)).left;o.inSameContainer&&!o.inSameContainer({source:n,target:l._draggable,sourceIndex:l._index(n),targetIndex:l._index(l._draggable)})?l._dropTarget=n:l._index(n)>l._index(l._draggable)&&(a+=n.outerWidth()),l.reorderDropCue.css({height:n.outerHeight(),top:t.top,left:a}).appendTo(document.body)}}},dragleave:function(e){i(e.draggable.hint,!0),l.reorderDropCue.remove(),l._dropTarget=null},drop:function(){if(l._dropTarget=null,l._draggable){var e=this.element,t=l._draggable;l._dropTargetAllowed(e)&&!l._isLastDraggable()&&l.trigger("change",{element:l._draggable,target:e,oldIndex:l._index(t),newIndex:l._index(e),position:r(l.reorderDropCue).left>r(e).left?"after":"before"})}}}),a.bind(["dragcancel","dragend","dragstart","drag"],{dragcancel:function(){l.reorderDropCue.remove(),l._draggable=null,l._elements=null},dragend:function(){l.reorderDropCue.remove(),l._draggable=null,l._elements=null},dragstart:function(e){l._draggable=e.currentTarget,l._elements=l.element.find(l.draggable.options.filter)},drag:function(e){if(l._dropTarget&&!this.hint.find(".k-drag-status").hasClass("k-denied")){var t=r(l._dropTarget).left,i=l._dropTarget.outerWidth();e.pageX>t+i/2?l.reorderDropCue.css({left:t+i}):l.reorderDropCue.css({left:t})}}})},options:{name:"Reorderable",filter:"*"},events:["change"],_isLastDraggable:function(){var e,t=this.options.inSameContainer,i=this._draggable[0],n=this._elements.get(),r=!1;if(!t)return!1;for(;!r&&n.length>0;)r=i!==(e=n.pop())&&t({source:i,target:e,sourceIndex:this._index(i),targetIndex:this._index(e)});return!r},_dropTargetAllowed:function(e){var t=this.options.inSameContainer,i=this.options.dragOverContainers,n=this._draggable;return n[0]!==e[0]&&(!t||!i||!!t({source:n,target:e,sourceIndex:this._index(n),targetIndex:this._index(e)})||i(this._index(n),this._index(e)))},_index:function(e){return this._elements.index(e)},destroy:function(){s.fn.destroy.call(this),this.element.find(this.draggable.options.filter).each(function(){var t=e(this);t.data("kendoDropTarget")&&t.data("kendoDropTarget").destroy()}),this.draggable&&(this.draggable.destroy(),this.draggable.element=this.draggable=null),this.elements=this.reorderDropCue=this._elements=this._draggable=null}});n.ui.plugin(o)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.resizable",["kendo.core","kendo.draganddrop"],function(){return function(e,t){var i=window.kendo,n=i.ui,r=n.Widget,s=e.proxy,o=i.isFunction,a=e.extend,l="horizontal",d=r.extend({init:function(e,t){r.fn.init.call(this,e,t),this.orientation="vertical"!=this.options.orientation.toLowerCase()?l:"vertical",this._positionMouse=this.orientation==l?"x":"y",this._position=this.orientation==l?"left":"top",this._sizingDom=this.orientation==l?"outerWidth":"outerHeight",this.draggable=new n.Draggable(e,{distance:1,filter:t.handle,drag:s(this._resize,this),dragcancel:s(this._cancel,this),dragstart:s(this._start,this),dragend:s(this._stop,this)}),this.userEvents=this.draggable.userEvents},events:["resize","resizeend","start"],options:{name:"Resizable",orientation:l},resize:function(){},_max:function(e){var t=this.hint?this.hint[this._sizingDom]():0,i=this.options.max;return o(i)?i(e):void 0!==i?this._initialElementPosition+i-t:i},_min:function(e){var t=this.options.min;return o(t)?t(e):void 0!==t?this._initialElementPosition+t:t},_start:function(t){var i=this.options.hint,n=e(t.currentTarget);this._initialElementPosition=n.position()[this._position],this._initialMousePosition=t[this._positionMouse].startLocation,i&&(this.hint=o(i)?e(i(n)):i,this.hint.css({position:"absolute"}).css(this._position,this._initialElementPosition).appendTo(this.element)),this.trigger("start",t),this._maxPosition=this._max(t),this._minPosition=this._min(t),e(document.body).css("cursor",n.css("cursor"))},_resize:function(e){var t,i=this._maxPosition,n=this._minPosition,r=this._initialElementPosition+(e[this._positionMouse].location-this._initialMousePosition);t=void 0!==n?Math.max(n,r):r,this.position=t=void 0!==i?Math.min(i,t):t,this.hint&&this.hint.toggleClass(this.options.invalidClass||"",t==i||t==n).css(this._position,t),this.resizing=!0,this.trigger("resize",a(e,{position:t}))},_stop:function(t){this.hint&&this.hint.remove(),this.resizing=!1,this.trigger("resizeend",a(t,{position:this.position})),e(document.body).css("cursor","")},_cancel:function(e){this.hint&&(this.position=void 0,this.hint.css(this._position,this._initialElementPosition),this._stop(e))},destroy:function(){r.fn.destroy.call(this),this.draggable&&this.draggable.destroy()},press:function(e){if(e){var t=e.position();this.userEvents.press(t.left,t.top,e[0]),this.targetPosition=t,this.target=e}},move:function(e){var t=this._position,i=this.targetPosition,n=this.position;void 0===n&&(n=i[t]),i[t]=n+e,this.userEvents.move(i.left,i.top)},end:function(){this.userEvents.end(),this.target=this.position=void 0}});i.ui.plugin(d)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.sortable",["kendo.draganddrop"],function(){return function(e,t){function i(e){return e.clone()}function n(e){return e.clone().removeAttr("id").css("visibility","hidden")}var r=window.kendo,s=r.ui.Widget,o=s.extend({init:function(e,t){s.fn.init.call(this,e,t),this.options.placeholder||(this.options.placeholder=n),this.options.hint||(this.options.hint=i),this.draggable=this._createDraggable()},events:["start","beforeMove","move","end","change","cancel"],options:{name:"Sortable",hint:null,placeholder:null,filter:">*",holdToDrag:!1,disabled:null,container:null,connectWith:null,handler:null,cursorOffset:null,axis:null,ignore:null,autoScroll:!1,cursor:"auto",moveOnDragEnter:!1},destroy:function(){this.draggable.destroy(),s.fn.destroy.call(this)},_createDraggable:function(){var t=this.element,i=this.options;return new r.ui.Draggable(t,{filter:i.filter,hint:r.isFunction(i.hint)?i.hint:e(i.hint),holdToDrag:i.holdToDrag,container:i.container?e(i.container):null,cursorOffset:i.cursorOffset,axis:i.axis,ignore:i.ignore,autoScroll:i.autoScroll,dragstart:e.proxy(this._dragstart,this),dragcancel:e.proxy(this._dragcancel,this),drag:e.proxy(this._drag,this),dragend:e.proxy(this._dragend,this)})},_dragstart:function(t){var i=this.draggedElement=t.currentTarget,n=this.options.disabled,s=this.options.handler,o=this.options.placeholder,a=this.placeholder=r.isFunction(o)?e(o.call(this,i)):e(o);n&&i.is(n)?t.preventDefault():s&&!e(t.initialTarget).is(s)?t.preventDefault():this.trigger("start",{item:i,draggableEvent:t})?t.preventDefault():(i.css("display","none"),i.before(a),this._setCursor())},_dragcancel:function(){this._cancel(),this.trigger("cancel",{item:this.draggedElement}),this._resetCursor()},_drag:function(t){var i,n,r,s,o,a=this.draggedElement,l=this._findTarget(t),d={left:t.x.location,top:t.y.location},c={x:t.x.delta,y:t.y.delta},u=this.options.axis,h=this.options.moveOnDragEnter,f={item:a,list:this,draggableEvent:t};if("x"!==u&&"y"!==u){if(l){if(i=this._getElementCenter(l.element),n={left:Math.round(d.left-i.left),top:Math.round(d.top-i.top)},e.extend(f,{target:l.element}),l.appendToBottom)return void this._movePlaceholder(l,null,f);if(l.appendAfterHidden&&this._movePlaceholder(l,"next",f),this._isFloating(l.element)?c.x<0&&(h||n.left<0)?r="prev":c.x>0&&(h||n.left>0)&&(r="next"):c.y<0&&(h||n.top<0)?r="prev":c.y>0&&(h||n.top>0)&&(r="next"),r){for(s=(o="prev"===r?jQuery.fn.prev:jQuery.fn.next).call(l.element);s.length&&!s.is(":visible");)s=o.call(s);s[0]!=this.placeholder[0]&&this._movePlaceholder(l,r,f)}}}else this._movementByAxis(u,d,c[u],f)},_dragend:function(t){var i,n,r,s,o=this.placeholder,a=this.draggedElement,l=this.indexOf(a),d=this.indexOf(o),c=this.options.connectWith;this._resetCursor(),r={action:"sort",item:a,oldIndex:l,newIndex:d,draggableEvent:t},d>=0?n=this.trigger("end",r):(i=o.parents(c).getKendoSortable(),r.action="remove",s=e.extend({},r,{action:"receive",oldIndex:-1,newIndex:i.indexOf(o)}),n=!(!this.trigger("end",r)&&!i.trigger("end",s))),n||d===l?this._cancel():(o.replaceWith(a),a.show(),this.draggable.dropped=!0,r={action:-1!=this.indexOf(a)?"sort":"remove",item:a,oldIndex:l,newIndex:this.indexOf(a),draggableEvent:t},this.trigger("change",r),i&&(s=e.extend({},r,{action:"receive",oldIndex:-1,newIndex:i.indexOf(a)}),i.trigger("change",s)))},_findTarget:function(t){var i,n,r=this._findElementUnderCursor(t),s=this.options.connectWith;return e.contains(this.element[0],r)?(i=this.items(),(n=i.filter(r)[0]||i.has(r)[0])?{element:e(n),sortable:this}:null):this.element[0]==r&&this._isEmpty()?{element:this.element,sortable:this,appendToBottom:!0}:this.element[0]==r&&this._isLastHidden()?(n=this.items().eq(0),{element:n,sortable:this,appendAfterHidden:!0}):s?this._searchConnectedTargets(r,t):void 0},_findElementUnderCursor:function(t){var i=r.elementUnderCursor(t),n=t.sender;return function(t,i){try{return e.contains(t,i)||t==i}catch(e){return!1}}(n.hint[0],i)&&(n.hint.hide(),(i=r.elementUnderCursor(t))||(i=r.elementUnderCursor(t)),n.hint.show()),i},_searchConnectedTargets:function(t,i){for(var n,r,s,o=e(this.options.connectWith),a=0;a<o.length;a++)if(n=o.eq(a).getKendoSortable(),e.contains(o[a],t)){if(n)return r=n.items(),(s=r.filter(t)[0]||r.has(t)[0])?(n.placeholder=this.placeholder,{element:e(s),sortable:n}):null}else if(o[a]==t){if(n&&n._isEmpty())return{element:o.eq(a),sortable:n,appendToBottom:!0};if(this._isCursorAfterLast(n,i))return s=n.items().last(),{element:s,sortable:n}}},_isCursorAfterLast:function(e,t){var i,n=e.items().last(),s=t.x.location,o=t.y.location;return i=r.getOffset(n),i.top+=n.outerHeight(),i.left+=n.outerWidth(),(this._isFloating(n)?i.left-s:i.top-o)<0},_movementByAxis:function(t,i,n,r){var s,o="x"===t?i.left:i.top,a=n<0?this.placeholder.prev():this.placeholder.next();a.length&&!a.is(":visible")&&(a=n<0?a.prev():a.next()),e.extend(r,{target:a}),(s=this._getElementCenter(a))&&(s="x"===t?s.left:s.top),a.length&&n<0&&o-s<0?this._movePlaceholder({element:a,sortable:this},"prev",r):a.length&&n>0&&o-s>0&&this._movePlaceholder({element:a,sortable:this},"next",r)},_movePlaceholder:function(e,t,i){var n=this.placeholder;e.sortable.trigger("beforeMove",i)||(t?"prev"===t?e.element.before(n):"next"===t&&e.element.after(n):e.element.append(n),e.sortable.trigger("move",i))},_setCursor:function(){var t,i=this.options.cursor;i&&"auto"!==i&&(t=e(document.body),this._originalCursorType=t.css("cursor"),t.css({cursor:i}),this._cursorStylesheet||(this._cursorStylesheet=e("<style>* { cursor: "+i+" !important; }</style>")),this._cursorStylesheet.appendTo(t))},_resetCursor:function(){this._originalCursorType&&(e(document.body).css("cursor",this._originalCursorType),this._originalCursorType=null,this._cursorStylesheet.remove())},_getElementCenter:function(e){var t=e.length?r.getOffset(e):null;return t&&(t.top+=e.outerHeight()/2,t.left+=e.outerWidth()/2),t},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_cancel:function(){this.draggedElement.show(),this.placeholder.remove()},_items:function(){var e=this.options.filter;return e?this.element.find(e):this.element.children()},indexOf:function(e){var t=this._items(),i=this.placeholder,n=this.draggedElement;return i&&e[0]==i[0]?t.not(n).index(e):t.not(i).index(e)},items:function(){var e=this.placeholder,t=this._items();return e&&(t=t.not(e)),t},_isEmpty:function(){return!this.items().length},_isLastHidden:function(){return 1===this.items().length&&this.items().is(":hidden")}});r.ui.plugin(o)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.selectable",["kendo.core","kendo.userevents"],function(){return function(e,t){var i=window.kendo,n=i.ui.Widget,r=e.proxy,s=Math.abs,o="k-state-selected",a="k-state-selecting",l="k-selectable",d="k-state-unselecting",c="input,a,textarea,.k-multiselect-wrap,select,button,a.k-button>.k-icon,button.k-button>.k-icon,span.k-icon.k-i-expand,span.k-icon.k-i-collapse",u=i.support.browser.msie,h=!1;e('<div class="parent"><span /></div>').on("click",">*",function(){h=!0}).find("span").click().end().off();var f=n.extend({init:function(t,s){var o;n.fn.init.call(this,t,s),this._marquee=e("<div class='k-marquee'><div class='k-marquee-color'></div></div>"),this._lastActive=null,this.element.addClass(l),this.relatedTarget=this.options.relatedTarget,o=this.options.multiple,this.options.aria&&o&&this.element.attr("aria-multiselectable",!0),this.userEvents=new i.UserEvents(this.element,{global:!0,allowSelection:!0,filter:(h?"":"."+l+" ")+this.options.filter,tap:r(this._tap,this)}),o&&this.userEvents.bind("start",r(this._start,this)).bind("move",r(this._move,this)).bind("end",r(this._end,this)).bind("select",r(this._select,this))},events:["change"],options:{name:"Selectable",filter:">*",multiple:!1,relatedTarget:e.noop},_isElement:function(e){var t,i=this.element,n=i.length,r=!1;for(e=e[0],t=0;t<n;t++)if(i[t]===e){r=!0;break}return r},_tap:function(t){var i,n=e(t.target),r=t.event.ctrlKey||t.event.metaKey,s=this.options.multiple,a=s&&t.event.shiftKey,d=t.event.which,c=t.event.button;!this._isElement(n.closest("."+l))||d&&3==d||c&&2==c||this._allowSelection(t.event.target)&&(i=n.hasClass(o),s&&r||this.clear(),n=n.add(this.relatedTarget(n)),a?this.selectRange(this._firstSelectee(),n):(i&&r?(this._unselect(n),this._notify("change")):this.value(n),this._lastActive=this._downTarget=n))},_start:function(t){var i,n=e(t.target),r=n.hasClass(o),s=t.event.ctrlKey||t.event.metaKey;this._allowSelection(t.event.target)&&(this._downTarget=n,this._isElement(n.closest("."+l))?(this.options.useAllItems?this._items=this.element.find(this.options.filter):(i=n.closest(this.element),this._items=i.find(this.options.filter)),t.sender.capture(),this._marquee.appendTo(document.body).css({left:t.x.client+1,top:t.y.client+1,width:0,height:0}),s||this.clear(),n=n.add(this.relatedTarget(n)),r&&(this._selectElement(n,!0),s&&n.addClass(d))):this.userEvents.cancel())},_move:function(e){var t={left:e.x.startLocation>e.x.location?e.x.location:e.x.startLocation,top:e.y.startLocation>e.y.location?e.y.location:e.y.startLocation,width:s(e.x.initialDelta),height:s(e.y.initialDelta)};this._marquee.css(t),this._invalidateSelectables(t,e.event.ctrlKey||e.event.metaKey),e.preventDefault()},_end:function(){this._marquee.remove(),this._unselect(this.element.find(this.options.filter+"."+d)).removeClass(d);var e=this.element.find(this.options.filter+"."+a);e=e.add(this.relatedTarget(e)),this.value(e),this._lastActive=this._downTarget,this._items=null},_invalidateSelectables:function(e,t){var n,r,s,l,c=this._downTarget[0],u=this._items;for(n=0,r=u.length;n<r;n++)s=(l=u.eq(n)).add(this.relatedTarget(l)),function(e,t){if(!e.is(":visible"))return!1;var n=i.getOffset(e),r=t.left+t.width,s=t.top+t.height;return n.right=n.left+e.outerWidth(),n.bottom=n.top+e.outerHeight(),!(n.left>r||n.right<t.left||n.top>s||n.bottom<t.top)}(l,e)?l.hasClass(o)?t&&c!==l[0]&&s.removeClass(o).addClass(d):l.hasClass(a)||l.hasClass(d)||s.addClass(a):l.hasClass(a)?s.removeClass(a):t&&l.hasClass(d)&&s.removeClass(d).addClass(o)},value:function(e){var t=r(this._selectElement,this);return e?(e.each(function(){t(this)}),void this._notify("change")):this.element.find(this.options.filter+"."+o)},_firstSelectee:function(){var e;return null!==this._lastActive?this._lastActive:(e=this.value()).length>0?e[0]:this.element.find(this.options.filter)[0]},_selectElement:function(t,i){var n=e(t),r=!i&&this._notify("select",{element:t});n.removeClass(a),r||(n.addClass(o),this.options.aria&&n.attr("aria-selected",!0))},_notify:function(e,t){return t=t||{},this.trigger(e,t)},_unselect:function(e){return e.removeClass(o),this.options.aria&&e.attr("aria-selected",!1),e},_select:function(t){this._allowSelection(t.event.target)&&(!u||u&&!e(i._activeElement()).is(c))&&t.preventDefault()},_allowSelection:function(t){return!e(t).is(c)||(this.userEvents.cancel(),this._downTarget=null,!1)},resetTouchEvents:function(){this.userEvents.cancel()},clear:function(){var e=this.element.find(this.options.filter+"."+o);this._unselect(e)},selectRange:function(t,i){var n,r,s;for(this.clear(),this.element.length>1&&(s=this.options.continuousItems()),s&&s.length||(s=this.element.find(this.options.filter)),(t=e.inArray(e(t)[0],s))>(i=e.inArray(e(i)[0],s))&&(r=t,t=i,i=r),this.options.useAllItems||(i+=this.element.length-1),n=t;n<=i;n++)this._selectElement(s[n]);this._notify("change")},destroy:function(){n.fn.destroy.call(this),this.element.off(".kendoSelectable"),this.userEvents.destroy(),this._marquee=this._lastActive=this.element=this.userEvents=null}});f.parseOptions=function(e){var t="string"==typeof e&&e.toLowerCase();return{multiple:t&&t.indexOf("multiple")>-1,cell:t&&t.indexOf("cell")>-1}},i.ui.plugin(f)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.button",["kendo.core"],function(){return function(e,t){var i=window.kendo,n=i.ui.Widget,r=e.proxy,s=i.keys,o=".kendoButton",a=n.extend({init:function(e,t){n.fn.init.call(this,e,t),e=this.wrapper=this.element,t=this.options,e.addClass("k-button").attr("role","button"),t.enable=t.enable&&!e.attr("disabled"),this.enable(t.enable),this._tabindex(),this._graphics(),e.on("click"+o,r(this._click,this)).on("focus"+o,r(this._focus,this)).on("blur"+o,r(this._blur,this)).on("keydown"+o,r(this._keydown,this)).on("keyup"+o,r(this._keyup,this)),i.notify(this)},destroy:function(){this.wrapper.off(o),n.fn.destroy.call(this)},events:["click"],options:{name:"Button",icon:"",spriteCssClass:"",imageUrl:"",enable:!0},_isNativeButton:function(){return"button"==this.element.prop("tagName").toLowerCase()},_click:function(e){this.options.enable&&this.trigger("click",{event:e})&&e.preventDefault()},_focus:function(){this.options.enable&&this.element.addClass("k-state-focused")},_blur:function(){this.element.removeClass("k-state-focused")},_keydown:function(e){this._isNativeButton()||e.keyCode!=s.ENTER&&e.keyCode!=s.SPACEBAR||(e.keyCode==s.SPACEBAR&&(e.preventDefault(),this.options.enable&&this.element.addClass("k-state-selected")),this._click(e))},_keyup:function(){this.element.removeClass("k-state-selected")},_graphics:function(){var t,i,n,r=this.element,s=this.options,o=s.icon,a=s.spriteCssClass,l=s.imageUrl;(a||l||o)&&(n=!0,r.contents().not("span.k-sprite").not("span.k-icon").not("img.k-image").each(function(t,i){(1==i.nodeType||3==i.nodeType&&e.trim(i.nodeValue).length>0)&&(n=!1)}),n?r.addClass("k-button-icon"):r.addClass("k-button-icontext")),o?((t=r.children("span.k-icon").first())[0]||(t=e('<span class="k-icon"></span>').prependTo(r)),t.addClass("k-i-"+o)):a?((t=r.children("span.k-sprite").first())[0]||(t=e('<span class="k-sprite"></span>').prependTo(r)),t.addClass(a)):l&&((i=r.children("img.k-image").first())[0]||(i=e('<img alt="icon" class="k-image" />').prependTo(r)),i.attr("src",l))},enable:function(e){var t=this.element;void 0===e&&(e=!0),e=!!e,this.options.enable=e,t.toggleClass("k-state-disabled",!e).attr("aria-disabled",!e).attr("disabled",!e);try{t.blur()}catch(e){}}});i.ui.plugin(a)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.pager",["kendo.data"],function(){return function(e,t){function i(e,t,i,n,r){return e({idx:t,text:i,ns:d.ns,numeric:n,title:r||""})}function n(e,t,i){return _({className:e.substring(1),text:t,wrapClassName:i||""})}function r(e,t,i,n){e.find(t).parent().attr(d.attr("page"),i).attr("tabindex",-1).toggleClass("k-state-disabled",n)}function s(e,t){r(e,f,1,t<=1)}function o(e,t){r(e,m,Math.max(1,t-1),t<=1)}function a(e,t,i){r(e,g,Math.min(i,t+1),t>=i)}function l(e,t,i){r(e,p,i,t>=i)}var d=window.kendo,c=d.ui,u=c.Widget,h=e.proxy,f=".k-i-seek-w",p=".k-i-seek-e",m=".k-i-arrow-w",g=".k-i-arrow-e",v=".kendoPager",_=d.template('<a href="\\#" title="#=text#" class="k-link k-pager-nav #= wrapClassName #"><span class="k-icon #= className #">#=text#</span></a>'),b=u.extend({init:function(t,i){var r,c;if(u.fn.init.call(this,t,i),i=this.options,this.dataSource=d.data.DataSource.create(i.dataSource),this.linkTemplate=d.template(this.options.linkTemplate),this.selectTemplate=d.template(this.options.selectTemplate),this.currentPageTemplate=d.template(this.options.currentPageTemplate),r=this.page(),c=this.totalPages(),this._refreshHandler=h(this.refresh,this),this.dataSource.bind("change",this._refreshHandler),i.previousNext&&(this.element.find(f).length||(this.element.append(n(f,i.messages.first,"k-pager-first")),s(this.element,r)),this.element.find(m).length||(this.element.append(n(m,i.messages.previous)),o(this.element,r))),i.numeric&&(this.list=this.element.find(".k-pager-numbers"),this.list.length||(this.list=e('<ul class="k-pager-numbers k-reset" />').appendTo(this.element))),i.input&&(this.element.find(".k-pager-input").length||this.element.append('<span class="k-pager-input k-label">'+i.messages.page+'<input class="k-textbox">'+d.format(i.messages.of,c)+"</span>"),this.element.on("keydown"+v,".k-pager-input input",h(this._keydown,this))),i.previousNext&&(this.element.find(g).length||(this.element.append(n(g,i.messages.next)),a(this.element,r,c)),this.element.find(p).length||(this.element.append(n(p,i.messages.last,"k-pager-last")),l(this.element,r,c))),i.pageSizes){if(!this.element.find(".k-pager-sizes").length){var _=i.pageSizes.length?i.pageSizes:["all",5,10,20],b=e.map(_,function(e){return e.toLowerCase&&"all"===e.toLowerCase()?"<option value='all'>"+i.messages.allPages+"</option>":"<option>"+e+"</option>"});e('<span class="k-pager-sizes k-label"><select/>'+i.messages.itemsPerPage+"</span>").appendTo(this.element).find("select").html(b.join("")).end().appendTo(this.element)}this.element.find(".k-pager-sizes select").val(this.pageSize()),d.ui.DropDownList&&this.element.find(".k-pager-sizes select").show().kendoDropDownList(),this.element.on("change"+v,".k-pager-sizes select",h(this._change,this))}i.refresh&&(this.element.find(".k-pager-refresh").length||this.element.append('<a href="#" class="k-pager-refresh k-link" title="'+i.messages.refresh+'"><span class="k-icon k-i-refresh">'+i.messages.refresh+"</span></a>"),this.element.on("click"+v,".k-pager-refresh",h(this._refreshClick,this))),i.info&&(this.element.find(".k-pager-info").length||this.element.append('<span class="k-pager-info k-label" />')),this.element.on("click"+v,"a",h(this._click,this)).addClass("k-pager-wrap k-widget k-floatwrap"),this.element.on("click"+v,".k-current-page",h(this._toggleActive,this)),i.autoBind&&this.refresh(),d.notify(this)},destroy:function(){u.fn.destroy.call(this),this.element.off(v),this.dataSource.unbind("change",this._refreshHandler),this._refreshHandler=null,d.destroy(this.element),this.element=this.list=null},events:["change"],options:{name:"Pager",selectTemplate:'<li><span class="k-state-selected">#=text#</span></li>',currentPageTemplate:'<li class="k-current-page"><span class="k-link k-pager-nav">#=text#</span></li>',linkTemplate:'<li><a tabindex="-1" href="\\#" class="k-link" data-#=ns#page="#=idx#" #if (title !== "") {# title="#=title#" #}#>#=text#</a></li>',buttonCount:10,autoBind:!0,numeric:!0,info:!0,input:!1,previousNext:!0,pageSizes:!1,refresh:!1,messages:{allPages:"All",display:"{0} - {1} of {2} items",empty:"No items to display",page:"Page",of:"of {0}",itemsPerPage:"items per page",first:"Go to the first page",previous:"Go to the previous page",next:"Go to the next page",last:"Go to the last page",refresh:"Refresh",morePages:"More pages"}},setDataSource:function(e){this.dataSource.unbind("change",this._refreshHandler),this.dataSource=this.options.dataSource=e,e.bind("change",this._refreshHandler),this.options.autoBind&&e.fetch()},refresh:function(e){var t,n,r,c=1,u=this.page(),h="",f=this.options,p=this.pageSize(),m=this.dataSource.total(),g=this.totalPages(),v=this.linkTemplate,_=f.buttonCount;if(!e||"itemchange"!=e.action){if(f.numeric){for(u>_&&(c=0==(r=u%_)?u-_+1:u-r+1),n=Math.min(c+_-1,g),c>1&&(h+=i(v,c-1,"...",!1,f.messages.morePages)),t=c;t<=n;t++)h+=i(t==u?this.selectTemplate:v,t,t,!0);n<g&&(h+=i(v,t,"...",!1,f.messages.morePages)),""===h&&(h=this.selectTemplate({text:0})),h=this.currentPageTemplate({text:u})+h,this.list.removeClass("k-state-expanded").html(h)}if(f.info&&(h=m>0?d.format(f.messages.display,(u-1)*p+1,Math.min(u*p,m),m):f.messages.empty,this.element.find(".k-pager-info").html(h)),f.input&&this.element.find(".k-pager-input").html(this.options.messages.page+'<input class="k-textbox">'+d.format(f.messages.of,g)).find("input").val(u).attr("disabled",m<1).toggleClass("k-state-disabled",m<1),f.previousNext&&(s(this.element,u),o(this.element,u),a(this.element,u,g),l(this.element,u,g)),f.pageSizes){var b=p;this.element.find(".k-pager-sizes option[value='all']").length>0&&p===this.dataSource.total()&&(p="all",b=f.messages.allPages),this.element.find(".k-pager-sizes select").val(p).filter("["+d.attr("role")+"=dropdownlist]").kendoDropDownList("value",p).kendoDropDownList("text",b)}}},_keydown:function(e){if(e.keyCode===d.keys.ENTER){var t=this.element.find(".k-pager-input").find("input"),i=parseInt(t.val(),10);(isNaN(i)||i<1||i>this.totalPages())&&(i=this.page()),t.val(i),this.page(i)}},_refreshClick:function(e){e.preventDefault(),this.dataSource.read()},_change:function(e){var t=e.currentTarget.value,i=parseInt(t,10),n=this.dataSource;isNaN(i)?"all"==(t+"").toLowerCase()&&n.pageSize(n.total()):n.pageSize(i)},_toggleActive:function(){this.list.toggleClass("k-state-expanded")},_click:function(t){var i=e(t.currentTarget);t.preventDefault(),i.is(".k-state-disabled")||this.page(i.attr(d.attr("page")))},totalPages:function(){return Math.ceil((this.dataSource.total()||0)/(this.pageSize()||1))},pageSize:function(){return this.dataSource.pageSize()||this.dataSource.total()},page:function(e){if(void 0===e)return this.dataSource.total()>0?this.dataSource.page():0;this.dataSource.page(e),this.trigger("change",{index:e})}});c.plugin(b)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.notification",["kendo.core","kendo.popup"],function(){return function(e,t){var i=window.kendo,n=i.ui.Widget,r=e.proxy,s=e.extend,o=window.setTimeout,a="click",l="k-notification",d=".k-notification-wrap .k-i-close",c=".kendoNotification",u='<div class="k-notification-wrap"><span class="k-icon k-i-note">#=typeIcon#</span>#=content#<span class="k-icon k-i-close">Hide</span></div>',h=u.replace("#=content#","#:content#"),f=n.extend({init:function(t,r){n.fn.init.call(this,t,r),(r=this.options).appendTo&&e(r.appendTo).is(t)||this.element.hide(),this._compileTemplates(r.templates),this._guid="_"+i.guid(),this._isRtl=i.support.isRtl(t),this._compileStacking(r.stacking,r.position.top,r.position.left),i.notify(this)},events:["show","hide"],options:{name:"Notification",position:{pinned:!0,top:null,left:null,bottom:20,right:20},stacking:"default",hideOnClick:!0,button:!1,allowHideAfter:0,autoHideAfter:5e3,appendTo:null,width:null,height:null,templates:[],animation:{open:{effects:"fade:in",duration:300},close:{effects:"fade:out",duration:600,hide:!0}}},_compileTemplates:function(t){var n=this,r=i.template;n._compiled={},e.each(t,function(t,i){n._compiled[i.type]=r(i.template||e("#"+i.templateId).html())}),n._defaultCompiled=r(u),n._safeCompiled=r(h)},_getCompiled:function(e,t){var i=t?this._safeCompiled:this._defaultCompiled;return e?this._compiled[e]||i:i},_compileStacking:function(e,t,i){var n,r,s={paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0},o=null!==i?"left":"right";switch(e){case"down":n="bottom "+o,r="top "+o,delete s.paddingBottom;break;case"right":n="top right",r="top left",delete s.paddingRight;break;case"left":n="top left",r="top right",delete s.paddingLeft;break;case"up":n="top "+o,r="bottom "+o,delete s.paddingTop;break;default:null!==t?(n="bottom "+o,r="top "+o,delete s.paddingBottom):(n="top "+o,r="bottom "+o,delete s.paddingTop)}this._popupOrigin=n,this._popupPosition=r,this._popupPaddings=s},_attachPopupEvents:function(e,t){function n(e){e.on(a+c,function(){s._hidePopup(t)})}var r,s=this,l=e.allowHideAfter,u=!isNaN(l)&&l>0;t.options.anchor!==document.body&&t.options.origin.indexOf("right")>0&&t.bind("open",function(){var e=i.getShadows(t.element);o(function(){t.wrapper.css("left",parseFloat(t.wrapper.css("left"))+e.left+e.right)})}),e.hideOnClick?t.bind("activate",function(){u?o(function(){n(t.element)},l):n(t.element)}):e.button&&(r=t.element.find(d),u?o(function(){n(r)},l):n(r))},_showPopup:function(t,n){var r,a,l=this,u=n.autoHideAfter,h=n.position.left,f=n.position.top;a=e("."+l._guid+":not(.k-hiding)").last(),r=new i.ui.Popup(t,{anchor:a[0]?a:document.body,origin:l._popupOrigin,position:l._popupPosition,animation:n.animation,modal:!0,collision:"",isRtl:l._isRtl,close:function(){l._triggerHide(this.element)},deactivate:function(e){e.sender.element.off(c),e.sender.element.find(d).off(c),e.sender.destroy()}}),l._attachPopupEvents(n,r),a[0]?r.open():(null===h&&(h=e(window).width()-t.width()-n.position.right),null===f&&(f=e(window).height()-t.height()-n.position.bottom),r.open(h,f)),r.wrapper.addClass(l._guid).css(s({margin:0},l._popupPaddings)),n.position.pinned?(r.wrapper.css("position","fixed"),a[0]&&l._togglePin(r.wrapper,!0)):a[0]||l._togglePin(r.wrapper,!1),u>0&&o(function(){l._hidePopup(r)},u)},_hidePopup:function(e){e.wrapper.addClass("k-hiding"),e.close()},_togglePin:function(t,i){var n=e(window),r=i?-1:1;t.css({top:parseInt(t.css("top"),10)+r*n.scrollTop(),left:parseInt(t.css("left"),10)+r*n.scrollLeft()})},_attachStaticEvents:function(e,t){function i(e){e.on(a+c,r(n._hideStatic,n,t))}var n=this,s=e.allowHideAfter,l=!isNaN(s)&&s>0;e.hideOnClick?l?o(function(){i(t)},s):i(t):e.button&&(l?o(function(){i(t.find(d))},s):i(t.find(d)))},_showStatic:function(e,t){var i=this,n=t.autoHideAfter,r=t.animation,s="up"==t.stacking||"left"==t.stacking?"prependTo":"appendTo";e.addClass(i._guid)[s](t.appendTo).hide().kendoAnimate(r.open||!1),i._attachStaticEvents(t,e),n>0&&o(function(){i._hideStatic(e)},n)},_hideStatic:function(e){e.kendoAnimate(s(this.options.animation.close||!1,{complete:function(){e.off(c).find(d).off(c),e.remove()}})),this._triggerHide(e)},_triggerHide:function(e){this.trigger("hide",{element:e}),this.angular("cleanup",function(){return{elements:e}})},show:function(t,n,r){var o,a,d=this.options,c=e('<div class="k-widget k-notification"></div>');return n||(n="info"),null!==t&&void 0!==t&&""!==t&&(i.isFunction(t)&&(t=t()),a={typeIcon:n,content:""},o=e.isPlainObject(t)?s(a,t):s(a,{content:t}),c.addClass(l+"-"+n).toggleClass(l+"-button",d.button).attr("data-role","alert").css({width:d.width,height:d.height}).append(this._getCompiled(n,r)(o)),this.angular("compile",function(){return{elements:c,data:[{dataItem:o}]}}),e(d.appendTo)[0]?this._showStatic(c,d):this._showPopup(c,d),this.trigger("show",{element:c})),this},showText:function(e,t){this.show(e,t,!0)},info:function(e){return this.show(e,"info")},success:function(e){return this.show(e,"success")},warning:function(e){return this.show(e,"warning")},error:function(e){return this.show(e,"error")},hide:function(){var t=this,i=t.getNotifications();return t.options.appendTo?i.each(function(i,n){t._hideStatic(e(n))}):i.each(function(i,n){var r=e(n).data("kendoPopup");r&&t._hidePopup(r)}),t},getNotifications:function(){var t=e("."+this._guid);return this.options.appendTo?t:t.children("."+l)},setOptions:function(e){var t;n.fn.setOptions.call(this,e),t=this.options,void 0!==e.templates&&this._compileTemplates(t.templates),void 0===e.stacking&&void 0===e.position||this._compileStacking(t.stacking,t.position.top,t.position.left)},destroy:function(){n.fn.destroy.call(this),this.getNotifications().off(c).find(d).off(c)}});i.ui.plugin(f)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.tooltip",["kendo.core","kendo.popup"],function(){return function(e,t){function i(e){for(;e.length;)!function(e){var t=e.data(s.ns+"title");t&&(e.attr("title",t),e.removeData(s.ns+"title"))}(e),e=e.parent()}function n(e){var t=e.attr("title");t&&(e.data(s.ns+"title",t),e.attr("title",""))}function r(e){for(;e.length&&!e.is("body");)n(e),e=e.parent()}var s=window.kendo,o=s.ui.Widget,a=s.ui.Popup,l=s.isFunction,d=e.isPlainObject,c=e.extend,u=e.proxy,h=e(document),f=s.isLocalUrl,p="k-content-frame",m=s.template("<iframe frameborder='0' class='"+p+"' src='#= content.url #'>This page requires frames in order to show content</iframe>"),g=".kendoTooltip",v={bottom:{origin:"bottom center",position:"top center"},top:{origin:"top center",position:"bottom center"},left:{origin:"center left",position:"center right",collision:"fit flip"},right:{origin:"center right",position:"center left",collision:"fit flip"},center:{position:"center center",origin:"center center"}},_={top:"bottom",bottom:"top",left:"right",right:"left",center:"center"},b={bottom:"n",top:"s",left:"e",right:"w",center:"n"},k={horizontal:{offset:"top",size:"outerHeight"},vertical:{offset:"left",size:"outerWidth"}},w=o.extend({init:function(e,t){var i;o.fn.init.call(this,e,t),i=this.options.position.match(/left|right/)?"horizontal":"vertical",this.dimensions=k[i],this._documentKeyDownHandler=u(this._documentKeyDown,this),this.element.on(this.options.showOn+g,this.options.filter,u(this._showOn,this)).on("mouseenter"+g,this.options.filter,u(this._mouseenter,this)),this.options.autoHide&&this.element.on("mouseleave"+g,this.options.filter,u(this._mouseleave,this))},options:{name:"Tooltip",filter:"",content:function(e){return e.target.data(s.ns+"title")},showAfter:100,callout:!0,position:"bottom",showOn:"mouseenter",autoHide:!0,width:null,height:null,animation:{open:{effects:"fade:in",duration:0},close:{effects:"fade:out",duration:40,hide:!0}}},events:["show","hide","contentLoad","error","requestStart"],_mouseenter:function(t){r(e(t.currentTarget))},_showOn:function(t){var i=this,n=e(t.currentTarget);i.options.showOn&&i.options.showOn.match(/click|focus/)?i._show(n):(clearTimeout(i.timeout),i.timeout=setTimeout(function(){i._show(n)},i.options.showAfter))},_appendContent:function(e){var t,i=this,n=i.options.content,r=i.content,o=i.options.iframe;d(n)&&n.url?("iframe"in i.options||(o=!f(n.url)),i.trigger("requestStart",{options:n,target:e}),o?(r.hide(),(t=r.find("."+p)[0])?t.src=n.url||t.src:r.html(m({content:n})),r.find("."+p).off("load"+g).on("load"+g,function(){i.trigger("contentLoad"),r.show()})):(r.empty(),s.ui.progress(r,!0),i._ajaxRequest(n))):n&&l(n)?(n=n({sender:this,target:e}),r.html(n||"")):r.html(n),i.angular("compile",function(){return{elements:r}})},_ajaxRequest:function(e){var t=this;jQuery.ajax(c({type:"GET",dataType:"html",cache:!1,error:function(e,i){s.ui.progress(t.content,!1),t.trigger("error",{status:i,xhr:e})},success:u(function(e){s.ui.progress(t.content,!1),t.content.html(e),t.trigger("contentLoad")},t)},e))},_documentKeyDown:function(e){e.keyCode===s.keys.ESC&&this.hide()},refresh:function(){var e=this.popup;e&&e.options.anchor&&this._appendContent(e.options.anchor)},hide:function(){this.popup&&this.popup.close()},show:function(e){r(e=e||this.element),this._show(e)},_show:function(e){var t=this,n=t.target();t.popup||t._initPopup(),n&&n[0]!=e[0]&&(t.popup.close(),t.popup.element.kendoStop(!0,!0)),n&&n[0]==e[0]||(t._appendContent(e),t.popup.options.anchor=e),t.popup.one("deactivate",function(){i(e),e.removeAttr("aria-describedby"),this.element.removeAttr("id").attr("aria-hidden",!0),h.off("keydown"+g,t._documentKeyDownHandler)}),t.popup.open()},_initPopup:function(){var t=this,i=t.options,n=e(s.template('<div role="tooltip" class="k-widget k-tooltip#if (!autoHide) {# k-tooltip-closable#}#">#if (!autoHide) {# <div class="k-tooltip-button"><a href="\\#" class="k-icon k-i-close">close</a></div> #}#<div class="k-tooltip-content"></div>#if (callout){ #<div class="k-callout k-callout-#=dir#"></div>#}#</div>')({callout:i.callout&&"center"!==i.position,dir:b[i.position],autoHide:i.autoHide}));t.popup=new a(n,c({activate:function(){var e=this.options.anchor,n=e[0].id||t.element[0].id;n&&(e.attr("aria-describedby",n+"_tt_active"),this.element.attr("id",n+"_tt_active")),i.callout&&t._positionCallout(),this.element.removeAttr("aria-hidden"),h.on("keydown"+g,t._documentKeyDownHandler),t.trigger("show")},close:function(){t.trigger("hide")},copyAnchorStyles:!1,animation:i.animation},v[i.position])),n.css({width:i.width,height:i.height}),t.content=n.find(".k-tooltip-content"),t.arrow=n.find(".k-callout"),i.autoHide?n.on("mouseleave"+g,u(t._mouseleave,t)):n.on("click"+g,".k-tooltip-button",u(t._closeButtonClick,t))},_closeButtonClick:function(e){e.preventDefault(),this.hide()},_mouseleave:function(t){if(this.popup){var n=e(t.currentTarget),r=n.offset(),s=t.pageX,o=t.pageY;if(r.right=r.left+n.outerWidth(),r.bottom=r.top+n.outerHeight(),s>r.left&&s<r.right&&o>r.top&&o<r.bottom)return;this.popup.close()}else i(e(t.currentTarget));clearTimeout(this.timeout)},_positionCallout:function(){var t=this.options.position,i=this.dimensions,n=i.offset,r=this.popup,s=r.options.anchor,o=e(s).offset(),a=parseInt(this.arrow.css("border-top-width"),10),l=e(r.element).offset(),d=b[r.flipped?_[t]:t],c=o[n]-l[n]+e(s)[i.size]()/2-a;this.arrow.removeClass("k-callout-n k-callout-s k-callout-w k-callout-e").addClass("k-callout-"+d).css(n,c)},target:function(){return this.popup?this.popup.options.anchor:null},destroy:function(){var e=this.popup;e&&(e.element.off(g),e.destroy()),clearTimeout(this.timeout),this.element.off(g),h.off("keydown"+g,this._documentKeyDownHandler),o.fn.destroy.call(this)}});s.ui.plugin(w)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.list",["kendo.data","kendo.popup"],function(){return function(e,t){function i(e,i){return e!==t&&""!==e&&null!==e&&("boolean"===i?e=Boolean(e):"number"===i?e=Number(e):"string"===i&&(e=e.toString())),e}function n(t,i){var r,s=!1;return t.filters&&(r=e.grep(t.filters,function(e){return s=n(e,i),e.filters?e.filters.length:e.field!=i}),s||t.filters.length===r.length||(s=!0),t.filters=r),s}var r=window.kendo,s=r.ui,o=s.Widget,a=r.keys,l=r.support,d=r.htmlEncode,c=r._activeElement,u=r.data.ObservableArray,h="change",f="k-state-hover",p="selected",m=e.extend,g=e.proxy,v=e.isArray,_=l.browser,b=_.msie&&_.version<9,k=/"/g,w={ComboBox:"DropDownList",DropDownList:"ComboBox"},y=r.ui.DataBoundWidget.extend({init:function(t,i){var n,r=this.ns;o.fn.init.call(this,t,i),t=this.element,i=this.options,this._isSelect=t.is("select"),this._isSelect&&this.element[0].length&&(i.dataSource||(i.dataTextField=i.dataTextField||"text",i.dataValueField=i.dataValueField||"value")),this.ul=e('<ul unselectable="on" class="k-list k-reset"/>').attr({tabIndex:-1,"aria-hidden":!0}),this.list=e("<div class='k-list-container'/>").append(this.ul).on("mousedown"+r,g(this._listMousedown,this)),(n=t.attr("id"))&&(this.list.attr("id",n+"-list"),this.ul.attr("id",n+"_listbox")),this._header(),this._accessors(),this._initValue()},options:{valuePrimitive:!1,headerTemplate:""},setOptions:function(e){o.fn.setOptions.call(this,e),e&&e.enable!==t&&(e.enabled=e.enable)},focus:function(){this._focused.focus()},readonly:function(e){this._editable({readonly:e===t||e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t||e)})},_listOptions:function(t){var i=this,n=i.options,s=n.virtual,o=g(i._listBound,i);return s="object"==typeof s?s:{},(t=e.extend({autoBind:!1,selectable:!0,dataSource:i.dataSource,click:g(i._click,i),change:g(i._listChange,i),activate:g(i._activateItem,i),deactivate:g(i._deactivateItem,i),dataBinding:function(){i.trigger("dataBinding"),i._angularItems("cleanup")},dataBound:o,listBound:o,height:n.height,dataValueField:n.dataValueField,dataTextField:n.dataTextField,groupTemplate:n.groupTemplate,fixedGroupTemplate:n.fixedGroupTemplate,template:n.template},t,s)).template||(t.template="#:"+r.expr(t.dataTextField,"data")+"#"),t},_initList:function(){var e=this._listOptions({selectedItemChange:g(this._listChange,this)});this.options.virtual?this.listView=new r.ui.VirtualList(this.ul,e):this.listView=new r.ui.StaticList(this.ul,e),this._setListValue()},_setListValue:function(e){(e=e||this.options.value)!==t&&this.listView.value(e).done(g(this._updateSelectionState,this))},_updateSelectionState:e.noop,_listMousedown:function(e){this.filterInput&&this.filterInput[0]===e.target||e.preventDefault()},_isFilterEnabled:function(){var e=this.options.filter;return e&&"none"!==e},_clearFilter:function(){this.options.virtual||this.listView.bound(!1),this._filterSource()},_filterSource:function(e,t){var i=this.options,r=this.dataSource,s=m({},r.filter()||{}),o=n(s,i.dataTextField);(e||o)&&this.trigger("filtering",{filter:e})||(s={filters:s.filters||[],logic:"and"},e&&s.filters.push(e),this._cascading&&this.listView.setDSFilter(s),t?r.read({filter:s}):r.filter(s))},_header:function(){var t,i=this,n=i.options.headerTemplate;e.isFunction(n)&&(n=n({})),n&&(i.list.prepend(n),t=i.ul.prev(),i.header=t[0]?t:null,i.header&&i.angular("compile",function(){return{elements:i.header}}))},_initValue:function(){var e=this.options.value;null!==e?this.element.val(e):(e=this._accessor(),this.options.value=e),this._old=e},_ignoreCase:function(){var e,t=this.dataSource.reader.model;t&&t.fields&&(e=t.fields[this.options.dataTextField])&&e.type&&"string"!==e.type&&(this.options.ignoreCase=!1)},_focus:function(e){return this.listView.focus(e)},current:function(e){return this._focus(e)},items:function(){return this.ul[0].children},destroy:function(){var e=this.ns;o.fn.destroy.call(this),this._unbindDataSource(),this.listView.destroy(),this.list.off(e),this.popup.destroy(),this._form&&this._form.off("reset",this._resetHandler)},dataItem:function(i){if(i===t)return this.listView.selectedDataItems()[0];if("number"!=typeof i){if(this.options.virtual)return this.dataSource.getByUid(e(i).data("uid"));i=e(this.items()).index(i)}return this.dataSource.flatView()[i]},_activateItem:function(){var e=this.listView.focus();e&&this._focused.add(this.filterInput).attr("aria-activedescendant",e.attr("id"))},_deactivateItem:function(){this._focused.add(this.filterInput).removeAttr("aria-activedescendant")},_accessors:function(){var e=this.element,t=this.options,i=r.getter,n=e.attr(r.attr("text-field")),s=e.attr(r.attr("value-field"));!t.dataTextField&&n&&(t.dataTextField=n),!t.dataValueField&&s&&(t.dataValueField=s),this._text=i(t.dataTextField),this._value=i(t.dataValueField)},_aria:function(e){var i=this.options,n=this._focused.add(this.filterInput);i.suggest!==t&&n.attr("aria-autocomplete",i.suggest?"both":"list"),e=e?e+" "+this.ul[0].id:this.ul[0].id,n.attr("aria-owns",e),this.ul.attr("aria-live",this._isFilterEnabled()?"polite":"off")},_blur:function(){this._change(),this.close()},_change:function(){var e,n=this.selectedIndex,r=this.options.value,s=this.value();this._isSelect&&!this.listView.bound()&&r&&(s=r),s!==i(this._old,typeof s)?e=!0:n!==t&&n!==this._oldIndex&&(e=!0),e&&(this._old=s,this._oldIndex=n,this._typing||this.element.trigger(h),this.trigger(h)),this.typing=!1},_data:function(){return this.dataSource.view()},_enable:function(){var e=this.options,i=this.element.is("[disabled]");e.enable!==t&&(e.enabled=e.enable),!e.enabled||i?this.enable(!1):this.readonly(this.element.is("[readonly]"))},_dataValue:function(e){var i=this._value(e);return i===t&&(i=this._text(e)),i},_offsetHeight:function(){var t=0;return this.listView.content.prevAll(":visible").each(function(){var i=e(this);i.hasClass("k-list-filter")?t+=i.children().outerHeight():t+=i.outerHeight()}),t},_height:function(e){var t,i,n=this.list,r=this.options.height,s=this.popup.visible();if(e){if(i=n.add(n.parent(".k-animation-container")).show(),!n.is(":visible"))return void i.hide();r=this.listView.content[0].scrollHeight>r?r:"auto",i.height(r),"auto"!==r&&(t=this._offsetHeight())&&(r-=t),this.listView.content.height(r),s||i.hide()}return r},_adjustListWidth:function(){var e,t,i=this.list,n=i[0].style.width,r=this.wrapper;if(i.data("width")||!n)return e=window.getComputedStyle?window.getComputedStyle(r[0],null):0,t=parseFloat(e&&e.width)||r.outerWidth(),e&&_.msie&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),n="border-box"!==i.css("box-sizing")?t-(i.outerWidth()-i.width()):t,i.css({fontFamily:r.css("font-family"),width:n}).data("width",n),!0},_openHandler:function(e){this._adjustListWidth(),this.trigger("open")?e.preventDefault():(this._focused.attr("aria-expanded",!0),this.ul.attr("aria-hidden",!1))},_closeHandler:function(e){this.trigger("close")?e.preventDefault():(this._focused.attr("aria-expanded",!1),this.ul.attr("aria-hidden",!0))},_focusItem:function(){var e=this.listView,i=e.focus(),n=e.select();(n=n[n.length-1])===t&&this.options.highlightFirst&&!i&&(n=0),n!==t?e.focus(n):e.scrollToIndex(0)},_calculateGroupPadding:function(e){var t=this.ul.children(".k-first:first"),i=this.listView.content.prev(".k-group-header"),n=0;i[0]&&"none"!==i[0].style.display&&("auto"!==e&&(n=r.support.scrollbar()),n+=parseFloat(t.css("border-right-width"),10)+parseFloat(t.children(".k-group").css("padding-right"),10),i.css("padding-right",n))},_calculatePopupHeight:function(e){var t=this._height(this.dataSource.flatView().length||e);this._calculateGroupPadding(t)},_resizePopup:function(e){this.options.virtual||(this.popup.element.is(":visible")?this._calculatePopupHeight(e):this.popup.one("open",function(e){return g(function(){this._calculatePopupHeight(e)},this)}.call(this,e)))},_popup:function(){this.popup=new s.Popup(this.list,m({},this.options.popup,{anchor:this.wrapper,open:g(this._openHandler,this),close:g(this._closeHandler,this),animation:this.options.animation,isRtl:l.isRtl(this.wrapper)}))},_makeUnselectable:function(){b&&this.list.find("*").not(".k-textbox").attr("unselectable","on")},_toggleHover:function(t){e(t.currentTarget).toggleClass(f,"mouseenter"===t.type)},_toggle:function(e,i){var n=l.mobileOS&&(l.touch||l.MSPointers||l.pointers);e=e!==t?e:!this.popup.visible(),i||n||this._focused[0]===c()||(this._prevent=!0,this._focused.focus(),this._prevent=!1),this[e?"open":"close"]()},_triggerCascade:function(){this._cascadeTriggered&&this._old===this.value()&&this._oldIndex===this.selectedIndex||(this._cascadeTriggered=!0,this.trigger("cascade",{userTriggered:this._userTriggered}))},_triggerChange:function(){this._valueBeforeCascade!==this.value()&&this.trigger(h)},_unbindDataSource:function(){this.dataSource.unbind("requestStart",this._requestStartHandler).unbind("requestEnd",this._requestEndHandler).unbind("error",this._errorHandler)}});m(y,{inArray:function(e,t){var i,n,r=t.children;if(!e||e.parentNode!==t)return-1;for(i=0,n=r.length;i<n;i++)if(e===r[i])return i;return-1},unifyType:i}),r.ui.List=y,s.Select=y.extend({init:function(e,t){y.fn.init.call(this,e,t),this._initial=this.element.val()},setDataSource:function(e){var t;this.options.dataSource=e,this._dataSource(),this.listView.bound()&&(this._initialIndex=null),this.listView.setDataSource(this.dataSource),this.options.autoBind&&this.dataSource.fetch(),(t=this._parentWidget())&&this._cascadeSelect(t)},close:function(){this.popup.close()},select:function(e){if(e===t)return this.selectedIndex;this._select(e),this._old=this._accessor(),this._oldIndex=this.selectedIndex},search:function(e){var t=(e="string"==typeof e?e:this.text()).length,i=this.options,n=i.ignoreCase,r=i.dataTextField;clearTimeout(this._typingTimeout),(!t||t>=i.minLength)&&(this._state="filter",this._isFilterEnabled()?(this._open=!0,this._filterSource({value:n?e.toLowerCase():e,field:r,operator:i.filter,ignoreCase:n})):this._filter(e))},_accessor:function(e,t){return this[this._isSelect?"_accessorSelect":"_accessorInput"](e,t)},_accessorInput:function(e){var i=this.element[0];if(e===t)return i.value;null===e&&(e=""),i.value=e},_accessorSelect:function(e,i){var n,r=this.element[0],s=r.selectedIndex;if(e===t)return s>-1&&(n=r.options[s]),n&&(e=n.value),e||"";s>-1&&(r.options[s].removeAttribute(p),r.options[s].selected=!1),i===t&&(i=-1),null!==e&&""!==e&&-1==i?this._custom(e):(e?r.value=e:r.selectedIndex=i,r.selectedIndex>-1&&(n=r.options[r.selectedIndex]),n&&n.setAttribute(p,p))},_custom:function(t){var i=this.element,n=this._customOption;n||(n=e("<option/>"),this._customOption=n,i.append(n)),n.text(t),n[0].setAttribute(p,p),n[0].selected=!0},_hideBusy:function(){clearTimeout(this._busy),this._arrow.removeClass("k-loading"),this._focused.attr("aria-busy",!1),this._busy=null},_showBusy:function(){var e=this;e._request=!0,e._busy||(e._busy=setTimeout(function(){e._arrow&&(e._focused.attr("aria-busy",!0),e._arrow.addClass("k-loading"))},100))},_requestEnd:function(){this._request=!1,this._hideBusy()},_dataSource:function(){var t,i=this.element,n=this.options,s=n.dataSource||{};s=e.isArray(s)?{data:s}:s,this._isSelect&&((t=i[0].selectedIndex)>-1&&(n.index=t),s.select=i,s.fields=[{field:n.dataTextField},{field:n.dataValueField}]),this.dataSource?this._unbindDataSource():(this._requestStartHandler=g(this._showBusy,this),this._requestEndHandler=g(this._requestEnd,this),this._errorHandler=g(this._hideBusy,this)),this.dataSource=r.data.DataSource.create(s).bind("requestStart",this._requestStartHandler).bind("requestEnd",this._requestEndHandler).bind("error",this._errorHandler)},_firstItem:function(){this.listView.focusFirst()},_lastItem:function(){this.listView.focusLast()},_nextItem:function(){this.listView.focusNext()},_prevItem:function(){this.listView.focusPrev()},_move:function(e){var t,i,n,r=this,s=e.keyCode,o=s===a.DOWN;if(s===a.UP||o){if(e.altKey)r.toggle(o);else{if(!r.listView.bound())return r._fetch||(r.dataSource.one(h,function(){r._fetch=!1,r._move(e)}),r._fetch=!0,r._filterSource()),e.preventDefault(),!0;if(n=r._focus(),r._fetch||n&&!n.hasClass("k-state-selected")||(o?(r._nextItem(),r._focus()||r._lastItem()):(r._prevItem(),r._focus()||r._firstItem())),r.trigger("select",{item:r._focus()}))return void r._focus(n);r._select(r._focus(),!0),r.popup.visible()||r._blur()}e.preventDefault(),i=!0}else if(s===a.ENTER||s===a.TAB){r.popup.visible()&&e.preventDefault(),n=r._focus(),t=r.dataItem(),r.popup.visible()||t&&r.text()===r._text(t)||(n=null);var l=r.filterInput&&r.filterInput[0]===c();if(n){if(r.trigger("select",{item:n}))return;r._select(n)}else r.input&&(r._accessor(r.input.val()),r.listView.value(r.input.val()));r._focusElement&&r._focusElement(r.wrapper),l&&s===a.TAB?r.wrapper.focusout():r._blur(),r.close(),i=!0}else s===a.ESC&&(r.popup.visible()&&e.preventDefault(),r.close(),i=!0);return i},_fetchData:function(){var e=this,t=!!e.dataSource.view().length;e._request||e.options.cascadeFrom||e.listView.bound()||e._fetch||t||(e._fetch=!0,e.dataSource.fetch().done(function(){e._fetch=!1}))},_options:function(e,i,n){var r,s,o,a,l=this.element,c=e.length,u="",h=0;for(i&&(u=i);h<c;h++)r="<option",s=e[h],o=this._text(s),(a=this._value(s))!==t&&(-1!==(a+="").indexOf('"')&&(a=a.replace(k,"&quot;")),r+=' value="'+a+'"'),r+=">",o!==t&&(r+=d(o)),u+=r+="</option>";l.html(u),n!==t&&(l[0].value=n,l[0].value&&!n&&(l[0].selectedIndex=-1))},_reset:function(){var t=this,i=t.element,n=i.attr("form"),r=n?e("#"+n):i.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(t._initial)})},t._form=r.on("reset",t._resetHandler))},_parentWidget:function(){var t=this.options.name,i=e("#"+this.options.cascadeFrom),n=i.data("kendo"+t);return n||(n=i.data("kendo"+w[t])),n},_cascade:function(){var e,t=this,i=t.options;if(i.cascadeFrom){if(e=t._parentWidget(),t._cascadeHandlerProxy=g(t._cascadeHandler,t),!e)return;i.autoBind=!1,e.bind("set",function(){t.one("set",function(e){t._selectedValue=e.value})}),e.first("cascade",t._cascadeHandlerProxy),e.listView.bound()?(t._toggleCascadeOnFocus(),t._cascadeSelect(e)):(e.one("dataBound",function(){t._toggleCascadeOnFocus()}),e.value()||t.enable(!1))}},_toggleCascadeOnFocus:function(){var e=this,t=e._parentWidget();t._focused.bind("focus",function(){t.unbind("cascade",e._cascadeHandlerProxy),t.first(h,e._cascadeHandlerProxy)}),t._focused.bind("focusout",function(){t.unbind(h,e._cascadeHandlerProxy),t.first("cascade",e._cascadeHandlerProxy)})},_cascadeHandler:function(e){var t=this._parentWidget(),i=this.value();this._userTriggered=e.userTriggered,this.listView.bound()&&this._clearSelection(t,!0),this._cascadeSelect(t,i)},_cascadeChange:function(e){var t=this._accessor()||this._selectedValue;this._selectedValue=null,this._userTriggered?this._clearSelection(e,!0):t?(t!==this.listView.value()[0]&&this.value(t),this.dataSource.view()[0]&&-1!==this.selectedIndex||this._clearSelection(e,!0)):this.dataSource.flatView().length&&this.select(this.options.index),this.enable(),this._triggerCascade(),this._triggerChange(),this._userTriggered=!1},_cascadeSelect:function(e,i){var r=this,s=e.dataItem(),o=s?e._value(s):null,a=r.options.cascadeFromField||e.options.dataValueField;if(r._valueBeforeCascade=i!==t?i:r.value(),o||0===o){n(r.dataSource.filter()||{},a);var l=function(){r.unbind("dataBound",l),r._cascadeChange(e)};r.first("dataBound",l),r._cascading=!0,r._filterSource({field:a,operator:"eq",value:o}),r._cascading=!1}else r.enable(!1),r._clearSelection(e),r._triggerCascade(),r._triggerChange(),r._userTriggered=!1}});var x=".StaticList",C=r.ui.DataBoundWidget.extend({init:function(t,i){o.fn.init.call(this,t,i),this.element.attr("role","listbox").on("click"+x,"li",g(this._click,this)).on("mouseenter"+x,"li",function(){e(this).addClass(f)}).on("mouseleave"+x,"li",function(){e(this).removeClass(f)}),this.content=this.element.wrap("<div class='k-list-scroller' unselectable='on'></div>").parent(),this.header=this.content.before('<div class="k-group-header" style="display:none"></div>').prev(),this.bound(!1),this._optionID=r.guid(),this._selectedIndices=[],this._view=[],this._dataItems=[],this._values=[];var n=this.options.value;n&&(this._values=e.isArray(n)?n.slice(0):[n]),this._getter(),this._templates(),this.setDataSource(this.options.dataSource),this._onScroll=g(function(){var e=this;clearTimeout(e._scrollId),e._scrollId=setTimeout(function(){e._renderHeader()},50)},this)},options:{name:"StaticList",dataValueField:null,valuePrimitive:!1,selectable:!0,template:null,groupTemplate:null,fixedGroupTemplate:null},events:["click",h,"activate","deactivate","dataBinding","dataBound","selectedItemChange"],setDataSource:function(t){var i,n=t||{};n=e.isArray(n)?{data:n}:n,n=r.data.DataSource.create(n),this.dataSource?(this.dataSource.unbind(h,this._refreshHandler),i=this.value(),this.value([]),this.bound(!1),this.value(i)):this._refreshHandler=g(this.refresh,this),this.setDSFilter(n.filter()),this.dataSource=n.bind(h,this._refreshHandler),this._fixedHeader()},skip:function(){return this.dataSource.skip()},setOptions:function(e){o.fn.setOptions.call(this,e),this._getter(),this._templates(),this._render()},destroy:function(){this.element.off(x),this._refreshHandler&&this.dataSource.unbind(h,this._refreshHandler),clearTimeout(this._scrollId),o.fn.destroy.call(this)},scrollToIndex:function(e){var t=this.element[0].children[e];t&&this.scroll(t)},scroll:function(e){if(e){e[0]&&(e=e[0]);var t=this.content[0],i=e.offsetTop,n=e.offsetHeight,r=t.scrollTop,s=t.clientHeight,o=i+n;r>i?r=i:o>r+s&&(r=o-s),t.scrollTop=r}},selectedDataItems:function(e){if(e===t)return this._dataItems.slice();this._dataItems=e,this._values=this._getValues(e)},_getValues:function(t){var i=this._valueGetter;return e.map(t,function(e){return i(e)})},focusNext:function(){var e=this.focus();e=e?e.next():0,this.focus(e)},focusPrev:function(){var e=this.focus();e=e?e.prev():this.element[0].children.length-1,this.focus(e)},focusFirst:function(){this.focus(this.element[0].children[0])},focusLast:function(){this.focus(this.element[0].children[this.element[0].children.length-1])},focus:function(i){var n,r=this._optionID;if(i===t)return this._current;i=(i=this._get(i))[i.length-1],i=e(this.element[0].children[i]),this._current&&(this._current.removeClass("k-state-focused").removeAttr("aria-selected").removeAttr("id"),this.trigger("deactivate")),(n=!!i[0])&&(i.addClass("k-state-focused"),this.scroll(i),i.attr("id",r)),this._current=n?i:null,this.trigger("activate")},focusIndex:function(){return this.focus()?this.focus().index():t},skipUpdate:function(e){this._skipUpdate=e},select:function(i){var n,r=this.options.selectable,s="multiple"!==r&&!1!==r,o=this._selectedIndices,a=[],l=[];if(i===t)return o.slice();1===(i=this._get(i)).length&&-1===i[0]&&(i=[]);var d=this.isFiltered();d&&!s&&this._deselectFiltered(i)||(!s||d||-1===e.inArray(i[i.length-1],o)?(l=(n=this._deselect(i)).removed,(i=n.indices).length&&(s&&(i=[i[i.length-1]]),a=this._select(i)),(a.length||l.length)&&(this._valueComparer=null,this.trigger(h,{added:a,removed:l}))):this._dataItems.length&&this._view.length&&(this._dataItems=[this._view[o[0]].item]))},removeAt:function(e){return this._selectedIndices.splice(e,1),this._values.splice(e,1),this._valueComparer=null,{position:e,dataItem:this._dataItems.splice(e,1)[0]}},setValue:function(t){t=e.isArray(t)||t instanceof u?t.slice(0):[t],this._values=t,this._valueComparer=null},value:function(i){var n,r=this._valueDeferred;return i===t?this._values.slice():(this.setValue(i),r&&"resolved"!==r.state()||(this._valueDeferred=r=e.Deferred()),this.bound()&&(n=this._valueIndices(this._values),"multiple"===this.options.selectable&&this.select(-1),this.select(n),r.resolve()),this._skipUpdate=!1,r)},items:function(){return this.element.children(".k-item")},_click:function(t){t.isDefaultPrevented()||this.trigger("click",{item:e(t.currentTarget)})||this.select(t.currentTarget)},_valueExpr:function(e,t){var n,r,s=0,o=[];if(!this._valueComparer||this._valueType!==e){for(this._valueType=e;s<t.length;s++)o.push(i(t[s],e));n="for (var idx = 0; idx < "+o.length+"; idx++) { if (current === values[idx]) {   return idx; }} return -1;",r=new Function("current","values",n),this._valueComparer=function(e){return r(e,o)}}return this._valueComparer},_dataItemPosition:function(e,t){var i=this._valueGetter(e);return this._valueExpr(typeof i,t)(i)},_getter:function(){this._valueGetter=r.getter(this.options.dataValueField)},_deselect:function(t){var i,n,r,s=this.element[0].children,o=this.options.selectable,a=this._selectedIndices,l=this._dataItems,d=this._values,c=[],u=0,h=0;if(t=t.slice(),!0!==o&&t.length){if("multiple"===o)for(;u<t.length;u++)if(n=t[u],e(s[n]).hasClass("k-state-selected"))for(i=0;i<a.length;i++)if((r=a[i])===n){e(s[r]).removeClass("k-state-selected"),c.push({position:i+h,dataItem:l.splice(i,1)[0]}),a.splice(i,1),t.splice(u,1),d.splice(i,1),h+=1,u-=1,i-=1;break}}else{for(;u<a.length;u++)e(s[a[u]]).removeClass("k-state-selected"),c.push({position:u,dataItem:l[u]});this._values=[],this._dataItems=[],this._selectedIndices=[]}return{indices:t,removed:c}},_deselectFiltered:function(t){for(var i,n,r,s=this.element[0].children,o=[],a=0;a<t.length;a++)n=t[a],i=this._view[n].item,(r=this._dataItemPosition(i,this._values))>-1&&(o.push(this.removeAt(r)),e(s[n]).removeClass("k-state-selected"));return!!o.length&&(this.trigger(h,{added:[],removed:o}),!0)},_select:function(t){var i,n,r=this.element[0].children,s=this._view,o=[],a=0;for(-1!==t[t.length-1]&&this.focus(t);a<t.length;a++)i=s[n=t[a]],-1!==n&&i&&(i=i.item,this._selectedIndices.push(n),this._dataItems.push(i),this._values.push(this._valueGetter(i)),e(r[n]).addClass("k-state-selected").attr("aria-selected",!0),o.push({dataItem:i}));return o},_get:function(i){return"number"==typeof i?i=[i]:v(i)||((i=e(i).data("offset-index"))===t&&(i=-1),i=[i]),i},_template:function(){var e=this.options,t=e.template;return t?(t=r.template(t),t=function(e){return'<li tabindex="-1" role="option" unselectable="on" class="k-item">'+t(e)+"</li>"}):t=r.template('<li tabindex="-1" role="option" unselectable="on" class="k-item">${'+r.expr(e.dataTextField,"data")+"}</li>",{useWithBlock:!1}),t},_templates:function(){var e,t={template:this.options.template,groupTemplate:this.options.groupTemplate,fixedGroupTemplate:this.options.fixedGroupTemplate};for(var i in t)(e=t[i])&&"function"!=typeof e&&(t[i]=r.template(e));this.templates=t},_normalizeIndices:function(e){for(var i=[],n=0;n<e.length;n++)e[n]!==t&&i.push(e[n]);return i},_valueIndices:function(e,t){var i,n=this._view,r=0;if(t=t?t.slice():[],!e.length)return[];for(;r<n.length;r++)-1!==(i=this._dataItemPosition(n[r].item,e))&&(t[i]=r);return this._normalizeIndices(t)},_firstVisibleItem:function(){for(var t=this.element[0],i=this.content[0].scrollTop,n=e(t.children[0]).height(),r=Math.floor(i/n)||0,s=t.children[r]||t.lastChild,o=s.offsetTop<i;s;)if(o){if(s.offsetTop+n>i||!s.nextSibling)break;s=s.nextSibling}else{if(s.offsetTop<=i||!s.previousSibling)break;s=s.previousSibling}return this._view[e(s).data("offset-index")]},_fixedHeader:function(){this.isGrouped()&&this.templates.fixedGroupTemplate?(this.header.show(),this.content.scroll(this._onScroll)):(this.header.hide(),this.content.off("scroll",this._onScroll))},_renderHeader:function(){var e=this.templates.fixedGroupTemplate;if(e){var t=this._firstVisibleItem();t&&this.header.html(e(t.group))}},_renderItem:function(e){var t='<li tabindex="-1" role="option" unselectable="on" class="k-item',i=e.item,n=0!==e.index,r=e.selected;return n&&e.newGroup&&(t+=" k-first"),r&&(t+=" k-state-selected"),t+='"'+(r?' aria-selected="true"':"")+' data-offset-index="'+e.index+'">',t+=this.templates.template(i),n&&e.newGroup&&(t+='<div class="k-group">'+this.templates.groupTemplate(e.group)+"</div>"),t+"</li>"},_render:function(){var e,t,i,n,r="",s=0,o=0,a=[],l=this.dataSource.view(),d=this.value(),c=this.isGrouped();if(c)for(s=0;s<l.length;s++)for(t=l[s],i=!0,n=0;n<t.items.length;n++)e={selected:this._selected(t.items[n],d),item:t.items[n],group:t.value,newGroup:i,index:o},a[o]=e,o+=1,r+=this._renderItem(e),i=!1;else for(s=0;s<l.length;s++)e={selected:this._selected(l[s],d),item:l[s],index:s},a[s]=e,r+=this._renderItem(e);this._view=a,this.element[0].innerHTML=r,c&&a.length&&this._renderHeader()},_selected:function(e,t){return(!this.isFiltered()||"multiple"===this.options.selectable)&&-1!==this._dataItemPosition(e,t)},setDSFilter:function(e){this._lastDSFilter=m({},e)},isFiltered:function(){return this._lastDSFilter||this.setDSFilter(this.dataSource.filter()),!r.data.Query.compareFilters(this.dataSource.filter(),this._lastDSFilter)},refresh:function(e){var t,i=e&&e.action,n=this.options.skipUpdateOnBind,r="itemchange"===i;this.trigger("dataBinding"),this._fixedHeader(),this._render(),this.bound(!0),r||"remove"===i?(t=function(e,t){var i,n,r,s,o=t.length,a=e.length,l=[],d=[];if(a)for(r=0;r<a;r++){for(i=e[r],n=!1,s=0;s<o;s++)if(i===t[s]){n=!0,l.push({index:r,item:i});break}n||d.push(i)}return{changed:l,unchanged:d}}(this._dataItems,e.items)).changed.length&&(r?this.trigger("selectedItemChange",{items:t.changed}):this.value(this._getValues(t.unchanged))):this.isFiltered()||this._skipUpdate?(this.focus(0),this._skipUpdate&&(this._skipUpdate=!1,this._selectedIndices=this._valueIndices(this._values,this._selectedIndices))):n||i&&"add"!==i||this.value(this._values),this._valueDeferred&&this._valueDeferred.resolve(),this.trigger("dataBound")},bound:function(e){if(e===t)return this._bound;this._bound=e},isGrouped:function(){return(this.dataSource.group()||[]).length}});s.plugin(C)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.calendar",["kendo.core"],function(){return function(e,t){function i(e,t,i,n){var r,s=e.getFullYear(),o=t.getFullYear(),a=i.getFullYear();return s-=s%n,r=s+(n-1),s<o&&(s=o),r>a&&(r=a),s+"-"+r}function n(e){for(var t,i=0,n=e.min,r=e.max,s=e.start,o=e.setter,l=e.build,d=e.cells||12,c=e.perRow||4,u=e.content||E,h=e.empty||R,f=e.html||'<table tabindex="0" role="grid" class="k-content k-meta-view" cellspacing="0"><tbody><tr role="row">';i<d;i++)i>0&&i%c==0&&(f+='</tr><tr role="row">'),s=new J(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0),x(s,0),t=l(s,i,e.disableDates),f+=a(s,n,r)?u(t):h(t),o(s,1);return f+"</tr></tbody></table>"}function r(e,t,i){var n=e.getFullYear(),r=t.getFullYear(),s=r,o=0;return i&&(s=(r-=r%i)-r%i+i-1),n>s?o=1:n<r&&(o=-1),o}function s(){var e=new J;return new J(e.getFullYear(),e.getMonth(),e.getDate())}function o(e,t,i){var n=s();return e&&(n=new J(+e)),t>n?n=new J(+t):i<n&&(n=new J(+i)),n}function a(e,t,i){return+e>=+t&&+e<=+i}function l(e,t){return e.slice(t).concat(e.slice(0,t))}function d(e,t,i){t=t instanceof J?t.getFullYear():e.getFullYear()+i*t,e.setFullYear(t)}function c(t){e(this).hasClass("k-state-disabled")||e(this).toggleClass(N,U.indexOf(t.type)>-1||t.type==V)}function u(e){e.preventDefault()}function h(e){return T(e).calendars.standard}function f(e){var i=X[e.start],n=X[e.depth],r=T(e.culture);e.format=C(e.format||r.calendars.standard.patterns.d),isNaN(i)&&(i=0,e.start=z),(n===t||n>i)&&(e.depth=z),e.dates||(e.dates=[])}function p(e){I&&e.find("*").attr("unselectable","on")}function m(t){return v.isFunction(t)?t:e.isArray(t)?function(t){var i,n=[],r=["su","mo","tu","we","th","fr","sa"],s="if (found) { return true } else {return false}";if(t[0]instanceof J)n=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].setHours(0,0,0,0));return t}(t),i="var found = date && $.inArray(date.setHours(0, 0, 0, 0),["+n+"]) > -1;"+s;else{for(var o=0;o<t.length;o++){var a=t[o].slice(0,2).toLowerCase(),l=e.inArray(a,r);l>-1&&n.push(l)}i="var found = date && $.inArray(date.getDay(),["+n+"]) > -1;"+s}return new Function("date",i)}(t):e.noop}function g(e,t){return e instanceof Date&&t instanceof Date&&(e=e.getTime(),t=t.getTime()),e===t}var v=window.kendo,_=v.support,b=v.ui,k=b.Widget,w=v.keys,y=v.parseDate,x=v.date.adjustDST,C=v._extractFormat,S=v.template,T=v.getCulture,D=v.support.transitions,F=D?D.css+"transform-origin":"",E=S('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link" href="\\#" data-#=data.ns#value="#=data.dateString#">#=data.value#</a></td>',{useWithBlock:!1}),R=S('<td role="gridcell">&nbsp;</td>',{useWithBlock:!1}),A=v.support.browser,I=A.msie&&A.version<9,M=".kendoCalendar",H="click"+M,z="month",N="k-state-hover",P="k-state-disabled",L="k-state-focused",B="k-other-month",O=' class="'+B+'"',V="focus",W=V+M,U=_.touch?"touchstart":"mouseenter",q=_.touch?"touchstart"+M:"mouseenter"+M,$=_.touch?"touchend"+M+" touchmove"+M:"mouseleave"+M,j="_prevArrow",G="_nextArrow",Y="aria-disabled",K=e.proxy,Q=e.extend,J=JalaliDate,X={month:0,year:1,decade:2,century:3},Z=k.extend({init:function(t,i){var n,r,a=this;k.fn.init.call(a,t,i),t=a.wrapper=a.element,(i=a.options).url=window.unescape(i.url),a.options.disableDates=m(a.options.disableDates),a._templates(),a._header(),a._footer(a.footer),(r=t.addClass("k-widget k-calendar").on(q+" "+$,"td:has(.k-link)",c).on("keydown.kendoCalendar","table.k-content",K(a._move,a)).on(H,"td:has(.k-link)",function(t){var i=t.currentTarget.firstChild,n=a._toDateObject(i);-1!=i.href.indexOf("#")&&t.preventDefault(),a.options.disableDates(n)&&"month"==a._view.name||a._click(e(i))}).on("mouseup"+M,"table.k-content, .k-footer",function(){a._focusView(!1!==a.options.focusOnNav)}).attr("id"))&&(a._cellID=r+"_cell_selected"),f(i),n=y(i.value,i.format,i.culture),a._index=X[i.start],a._current=new J(+o(n,i.min,i.max)),a._addClassProxy=function(){if(a._active=!0,a._cell.hasClass(P)){var e=a._view.toDateString(s());a._cell=a._cellByDate(e)}a._cell.addClass(L)},a._removeClassProxy=function(){a._active=!1,a._cell.removeClass(L)},a.value(n),v.notify(a)},options:{name:"Calendar",value:null,min:new J(1278,11,1),max:new J(1478,11,1),dates:[],url:"",culture:"",footer:"",format:"",month:{},start:z,depth:z,animation:{horizontal:{effects:"slideIn",reverse:!0,duration:500,divisor:2},vertical:{effects:"zoomIn",duration:400}}},events:["change","navigate"],setOptions:function(e){f(e),e.dates[0]||(e.dates=this.options.dates),e.disableDates=m(e.disableDates),k.fn.setOptions.call(this,e),this._templates(),this._footer(this.footer),this._index=X[this.options.start],this.navigate()},destroy:function(){var e=this._today;this.element.off(M),this._title.off(M),this[j].off(M),this[G].off(M),v.destroy(this._table),e&&v.destroy(e.off(M)),k.fn.destroy.call(this)},current:function(){return this._current},view:function(){return this._view},focus:function(e){e=e||this._table,this._bindTable(e),e.focus()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},navigateToPast:function(){this._navigate(j,-1)},navigateToFuture:function(){this._navigate(G,1)},navigateUp:function(){var e=this._index;this._title.hasClass(P)||this.navigate(this._current,++e)},navigateDown:function(e){var t=this._index,i=this.options.depth;e&&(t!==X[i]?this.navigate(e,--t):g(this._value,this._current)&&g(this._value,e)||(this.value(e),this.trigger("change")))},navigate:function(i,n){n=isNaN(n)?X[n]:n;var r,s,a,l,d=this.options,c=d.culture,u=d.min,h=d.max,f=this._title,m=this._table,g=this._oldTable,v=this._value,_=this._current,b=i&&+i>+_,k=n!==t&&n!==this._index;if(i||(i=_),this._current=i=new J(+o(i,u,h)),n===t?n=this._index:this._index=n,this._view=s=ee.views[n],a=s.compare,l=n===X.century,f.toggleClass(P,l).attr(Y,l),l=a(i,u)<1,this[j].toggleClass(P,l).attr(Y,l),l=a(i,h)>-1,this[G].toggleClass(P,l).attr(Y,l),m&&g&&g.data("animating")&&(g.kendoStop(!0,!0),m.kendoStop(!0,!0)),this._oldTable=m,!m||this._changeView){f.html(s.title(i,u,h,c)),this._table=r=e(s.content(Q({min:u,max:h,date:i,url:d.url,dates:d.dates,format:d.format,culture:c,disableDates:d.disableDates},this[s.name]))),p(r);var w=m&&m.data("start")===r.data("start");this._animate({from:m,to:r,vertical:k,future:b,replace:w}),this.trigger("navigate"),this._focus(i)}n===X[d.depth]&&v&&!this.options.disableDates(v)&&this._class("k-state-selected",v),this._class(L,i),!m&&this._cell&&this._cell.removeClass(L),this._changeView=!0},value:function(e){var i=this._view,n=this.options,r=this._view,s=n.min,o=n.max;if(e===t)return this._value;null===e&&(this._current=new JalaliDate(this._current.getFullYear(),this._current.getMonth(),this._current.getDate())),null!==(e=y(e,n.format,n.culture))&&(a(e=new J(+e),s,o)||(e=null)),this.options.disableDates(e)?this._value===t&&(this._value=null):this._value=e,r&&null===e&&this._cell?this._cell.removeClass("k-state-selected"):(this._changeView=!e||i&&0!==i.compare(e,this._current),this.navigate(e))},_move:function(t){var i,n,r,s,l=this.options,d=t.keyCode,c=this._view,u=this._index,h=this.options.min,f=this.options.max,p=new J(+this._current),m=v.support.isRtl(this.wrapper),g=this.options.disableDates;return t.target===this._table[0]&&(this._active=!0),t.ctrlKey?d==w.RIGHT&&!m||d==w.LEFT&&m?(this.navigateToFuture(),n=!0):d==w.LEFT&&!m||d==w.RIGHT&&m?(this.navigateToPast(),n=!0):d==w.UP?(this.navigateUp(),n=!0):d==w.DOWN&&(this._click(e(this._cell[0].firstChild)),n=!0):(d==w.RIGHT&&!m||d==w.LEFT&&m?(i=1,n=!0):d==w.LEFT&&!m||d==w.RIGHT&&m?(i=-1,n=!0):d==w.UP?(i=0===u?-7:-4,n=!0):d==w.DOWN?(i=0===u?7:4,n=!0):d==w.ENTER?(this._click(e(this._cell[0].firstChild)),n=!0):d==w.HOME||d==w.END?(s=c[r=d==w.HOME?"first":"last"](p),p=new J(s.getFullYear(),s.getMonth(),s.getDate(),p.getHours(),p.getMinutes(),p.getSeconds(),p.getMilliseconds()),n=!0):d==w.PAGEUP?(n=!0,this.navigateToPast()):d==w.PAGEDOWN&&(n=!0,this.navigateToFuture()),(i||r)&&(r||c.setDate(p,i),g(p)&&(p=this._nextNavigatable(p,i)),a(p,h,f)&&this._focus(o(p,l.min,l.max)))),n&&t.preventDefault(),this._current},_nextNavigatable:function(e,t){var i=!0,n=this._view,r=this.options.min,s=this.options.max,o=this.options.disableDates,l=new JalaliDate(e.getTime());for(n.setDate(l,-t);i;){if(n.setDate(e,t),!a(e,r,s)){e=l;break}i=o(e)}return e},_animate:function(e){var t=e.from,i=e.to,n=this._active;t?t.parent().data("animating")?(t.off(M),t.parent().kendoStop(!0,!0).remove(),t.remove(),i.insertAfter(this.element[0].firstChild),this._focusView(n)):!t.is(":visible")||!1===this.options.animation||e.replace?(i.insertAfter(t),t.off(M).remove(),this._focusView(n)):this[e.vertical?"_vertical":"_horizontal"](t,i,e.future):(i.insertAfter(this.element[0].firstChild),this._bindTable(i))},_horizontal:function(e,t,i){var n=this,r=n._active,s=n.options.animation.horizontal,o=s.effects,a=e.outerWidth();o&&-1!=o.indexOf("slideIn")&&(e.add(t).css({width:a}),e.wrap("<div/>"),n._focusView(r,e),e.parent().css({position:"relative",width:2*a,float:"left","margin-left":i?0:-a}),t[i?"insertAfter":"insertBefore"](e),Q(s,{effects:"slideIn:"+(i?"right":"left"),complete:function(){e.off(M).remove(),n._oldTable=null,t.unwrap(),n._focusView(r)}}),e.parent().kendoStop(!0,!0).kendoAnimate(s))},_vertical:function(e,t){var i,n,r=this,s=r.options.animation.vertical,o=s.effects,a=r._active;o&&-1!=o.indexOf("zoom")&&(t.css({position:"absolute",top:e.prev().outerHeight(),left:0}).insertBefore(e),F&&(n=(n=(i=r._cellByDate(r._view.toDateString(r._current))).position()).left+parseInt(i.width()/2,10)+"px "+(n.top+parseInt(i.height()/2,10))+"px",t.css(F,n)),e.kendoStop(!0,!0).kendoAnimate({effects:"fadeOut",duration:600,complete:function(){e.off(M).remove(),r._oldTable=null,t.css({position:"static",top:0,left:0}),r._focusView(a)}}),t.kendoStop(!0,!0).kendoAnimate(s))},_cellByDate:function(t){return this._table.find("td:not(."+B+")").filter(function(){return e(this.firstChild).attr(v.attr("value"))===t})},_class:function(t,i){var n,r=this._cellID,s=this._cell,o=this._view.toDateString(i);s&&s.removeAttr("aria-selected").removeAttr("aria-label").removeAttr("id"),i&&(n=this.options.disableDates(i)),s=this._table.find("td:not(."+B+")").removeClass(t).filter(function(){return e(this.firstChild).attr(v.attr("value"))===o}).attr("aria-selected",!0),(t===L&&!this._active&&!1!==this.options.focusOnNav||n)&&(t=""),s.addClass(t),s[0]&&(this._cell=s),r&&(s.attr("id",r),this._table.removeAttr("aria-activedescendant").attr("aria-activedescendant",r))},_bindTable:function(e){e.on(W,this._addClassProxy).on("blur.kendoCalendar",this._removeClassProxy)},_click:function(e){var t=this.options,i=new J(+this._current),n=e.attr(v.attr("value")).split("/");n=n instanceof JalaliDate?n.gregoriandate:new J(n[0],n[1],n[2]),x(n,0),this._view.setDate(i,n),this.navigateDown(o(i,t.min,t.max))},_focus:function(e){0!==this._view.compare(e,this._current)?this.navigate(e):(this._current=e,this._class(L,e))},_focusView:function(e,t){e&&this.focus(t)},_footer:function(t){var i=s(),n=this.element,r=n.find(".k-footer");if(!t)return this._toggle(!1),void r.hide();r[0]||(r=e('<div class="k-footer"><a href="#" class="k-link k-nav-today"></a></div>').appendTo(n)),this._today=r.show().find(".k-link").html(t(i)).attr("title",v.toString(i,"D",this.options.culture)),this._toggle()},_header:function(){var e,t=this,i=t.element;i.find(".k-header")[0]||i.html('<div class="k-header"><a href="#" role="button" class="k-link k-nav-prev"><span class="k-icon k-i-arrow-w"></span></a><a href="#" role="button" aria-live="assertive" aria-atomic="true" class="k-link k-nav-fast"></a><a href="#" role="button" class="k-link k-nav-next"><span class="k-icon k-i-arrow-e"></span></a></div>'),e=i.find(".k-link").on(q+" "+$+" "+W+" blur.kendoCalendar",c).click(!1),t._title=e.eq(1).on(H,function(){t._active=!1!==t.options.focusOnNav,t.navigateUp()}),t[j]=e.eq(0).on(H,function(){t._active=!1!==t.options.focusOnNav,t.navigateToPast()}),t[G]=e.eq(2).on(H,function(){t._active=!1!==t.options.focusOnNav,t.navigateToFuture()})},_navigate:function(e,t){var i=this._index+1,n=new J(+this._current);(e=this[e]).hasClass(P)||(i>3?n.setFullYear(n.getFullYear()+100*t):ee.views[i].setDate(n,t),this.navigate(n))},_option:function(e,i){var n,r=this.options,s=this._value||this._current;if(i===t)return r[e];(i=y(i,r.format,r.culture))&&(r[e]=new J(+i),((n="min"===e?i>s:s>i)||function(e,t){return!!e&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}(s,i))&&(n&&(this._value=null),this._changeView=!0),this._changeView||(this._changeView=!(!r.month.content&&!r.month.empty)),this.navigate(this._value),this._toggle())},_toggle:function(e){var i=this.options,n=this.options.disableDates(s()),r=this._today;e===t&&(e=a(s(),i.min,i.max)),r&&(r.off(H),e&&!n?r.addClass("k-nav-today").removeClass(P).on(H,K(this._todayClick,this)):r.removeClass("k-nav-today").addClass(P).on(H,u))},_todayClick:function(e){var t=X[this.options.depth],i=this.options.disableDates,n=s();e.preventDefault(),i(n)||(0===this._view.compare(this._current,n)&&this._index==t&&(this._changeView=!1),this._value=n,this.navigate(n,t),this.trigger("change"))},_toDateObject:function(t){var i=e(t).attr(v.attr("value")).split("/");return i=new J(i[0],i[1],i[2])},_templates:function(){var e=this.options,t=e.footer,i=e.month,n=i.content,r=i.empty;this.month={content:S('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link#=data.linkClass#" href="#=data.url#" '+v.attr("value")+'="#=data.dateString#" title="#=data.title#">'+(n||"#=data.value#")+"</a></td>",{useWithBlock:!!n}),empty:S('<td role="gridcell">'+(r||"&nbsp;")+"</td>",{useWithBlock:!!r})},this.footer=!1!==t?S(t||'#= kendo.toString(data,"D","'+e.culture+'") #',{useWithBlock:!1}):null}});b.plugin(Z);var ee={firstDayOfMonth:function(e){return new J(e.getFullYear(),e.getMonth(),1)},firstVisibleDay:function(e,t){for(var i=(t=t||v.culture().calendar).firstDay,n=new J(e.getFullYear(),e.getMonth(),0,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());n.getDay()!=i;)ee.setTime(n,-864e5);return n},setTime:function(e,t){var i=e.getTimezoneOffset(),n=new J(e.getTime()+t),r=n.getTimezoneOffset()-i;e.setTime(n.getTime()+6e4*r)},views:[{name:z,title:function(e,t,i,n){return h(n).months.names[e.getMonth()]+" "+e.getFullYear()},content:function(e){for(var t=0,i=e.min,r=e.max,s=e.date,o=e.dates,a=e.format,d=e.culture,c=e.url,u=c&&o[0],f=h(d),p=f.firstDay,m=f.days,g=l(m.names,p),_=l(m.namesShort,p),b=ee.firstVisibleDay(s,f),k=this.first(s),w=this.last(s),y=this.toDateString,C=new J,S='<table tabindex="0" role="grid" class="k-content" cellspacing="0" data-start="'+y(b)+'"><thead><tr role="row">';t<7;t++)S+='<th scope="col" title="'+g[t]+'">'+_[t]+"</th>";return C=new J(C.getFullYear(),C.getMonth(),C.getDate()),x(C,0),C=+C,n({cells:42,perRow:7,html:S+='</tr></thead><tbody><tr role="row">',start:b,min:new J(i.getFullYear(),i.getMonth(),i.getDate()),max:new J(r.getFullYear(),r.getMonth(),r.getDate()),content:e.content,empty:e.empty,setter:this.setDate,disableDates:e.disableDates,build:function(e,t,i){var n=[],r=e.getDay(),s="",l="#";return(e<k||e>w)&&n.push(B),i(e)&&n.push(P),+e===C&&n.push("k-today"),0!==r&&6!==r||n.push("k-weekend"),u&&function(e,t){for(var i=0,n=t.length;i<n;i++)if(e===+t[i])return!0;return!1}(+e,o)&&(l=c.replace("{0}",v.toString(e,a,d)),s=" k-action-link"),{date:e,dates:o,ns:v.ns,title:v.toString(e,"D",d),value:e.getDate(),dateString:y(e),cssClass:n[0]?' class="'+n.join(" ")+'"':"",linkClass:s,url:l}}})},first:function(e){return ee.firstDayOfMonth(e)},last:function(e){var t=new J(e.getFullYear(),e.getMonth()+1,0),i=ee.firstDayOfMonth(e),n=Math.abs(t.getTimezoneOffset()-i.getTimezoneOffset());return n&&t.setHours(i.getHours()+n/60),t},compare:function(e,t){var i=e.getMonth(),n=e.getFullYear(),r=t.getMonth(),s=t.getFullYear();return n>s?1:n<s?-1:i==r?0:i>r?1:-1},setDate:function(e,t){var i=e.getHours();t instanceof J?e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()):ee.setTime(e,864e5*t),x(e,i)},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/"+e.getDate()}},{name:"year",title:function(e){return e.getFullYear()},content:function(e){var t=h(e.culture).months.namesAbbr,i=this.toDateString,r=e.min,s=e.max;return n({min:new J(r.getFullYear(),r.getMonth(),1),max:new J(s.getFullYear(),s.getMonth(),1),start:new J(e.date.getFullYear(),0,1),setter:this.setDate,build:function(e){return{value:t[e.getMonth()],ns:v.ns,dateString:i(e),cssClass:""}}})},first:function(e){return new J(e.getFullYear(),0,e.getDate())},last:function(e){return new J(e.getFullYear(),11,e.getDate())},compare:function(e,t){return r(e,t)},setDate:function(e,t){var i,n=e.getHours();t instanceof J?(i=t.getMonth(),e.setFullYear(t.getFullYear(),i,e.getDate()),i!==e.getMonth()&&e.setDate(0)):(i=e.getMonth()+t,e.setMonth(i),i>11&&(i-=12),i>0&&e.getMonth()!=i&&e.setDate(0)),x(e,n)},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/1"}},{name:"decade",title:function(e,t,n){return i(e,t,n,10)},content:function(e){var t=e.date.getFullYear(),i=this.toDateString;return n({start:new J(t-t%10-1,0,1),min:new J(e.min.getFullYear(),0,1),max:new J(e.max.getFullYear(),0,1),setter:this.setDate,build:function(e,t){return{value:e.getFullYear(),ns:v.ns,dateString:i(e),cssClass:0===t||11==t?O:""}}})},first:function(e){var t=e.getFullYear();return new J(t-t%10,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return new J(t-t%10+9,e.getMonth(),e.getDate())},compare:function(e,t){return r(e,t,10)},setDate:function(e,t){d(e,t,1)},toDateString:function(e){return e.getFullYear()+"/0/1"}},{name:"century",title:function(e,t,n){return i(e,t,n,100)},content:function(e){var t=e.date.getFullYear(),i=e.min.getFullYear(),r=e.max.getFullYear(),s=this.toDateString,o=i,a=r;return o-=o%10,(a-=a%10)-o<10&&(a=o+9),n({start:new J(t-t%100-10,0,1),min:new J(o,0,1),max:new J(a,0,1),setter:this.setDate,build:function(e,t){var n=e.getFullYear(),o=n+9;return n<i&&(n=i),o>r&&(o=r),{ns:v.ns,value:n+" - "+o,dateString:s(e),cssClass:0===t||11==t?O:""}}})},first:function(e){var t=e.getFullYear();return new J(t-t%100,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return new J(t-t%100+99,e.getMonth(),e.getDate())},compare:function(e,t){return r(e,t,100)},setDate:function(e,t){d(e,t,10)},toDateString:function(e){var t=e.getFullYear();return t-t%10+"/0/1"}}]};ee.isEqualDatePart=function(e,t){return!!e&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},ee.makeUnselectable=p,ee.restrictValue=o,ee.isInRange=a,ee.normalize=f,ee.viewsEnum=X,ee.disabled=m,v.calendar=ee}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.datepicker",["kendo.calendar","kendo.popup"],function(){return function(e,t){function i(t){var i=t.parseFormats,n=t.format;g.normalize(t),(i=e.isArray(i)?i:[i]).length||i.push("yyyy-MM-dd"),-1===e.inArray(n,i)&&i.splice(0,0,t.format),t.parseFormats=i}function n(e){e.preventDefault()}var r=window.kendo,s=r.ui,o=s.Widget,a=r.parseDate,l=r.keys,d=r.template,c=r._activeElement,u=".kendoDatePicker",h="click"+u,f="k-state-default",p="k-state-disabled",m="mousedown"+u,g=r.calendar,v=g.isInRange,_=g.restrictValue,b=g.isEqualDatePart,k=e.extend,w=e.proxy,y=JalaliDate,x=function(t){var i,n=document.body,o=e("<div />").attr("aria-hidden","true").addClass("k-calendar-container").appendTo(n);this.options=t=t||{},(i=t.id)&&(i+="_dateview",o.attr("id",i),this._dateViewID=i),this.popup=new s.Popup(o,k(t.popup,t,{name:"Popup",isRtl:r.support.isRtl(t.anchor)})),this.div=o,this.value(t.value)};x.prototype={_calendar:function(){var t,i=this.calendar,o=this.options;i||(t=e("<div />").attr("id",r.guid()).appendTo(this.popup.element).on(m,n).on(h,"td:has(.k-link)",w(this._click,this)),this.calendar=i=new s.Calendar(t),this._setOptions(o),r.calendar.makeUnselectable(i.element),i.navigate(this._value||this._current,o.start),this.value(this._value))},_setOptions:function(e){this.calendar.setOptions({focusOnNav:!1,change:e.change,culture:e.culture,dates:e.dates,depth:e.depth,footer:e.footer,format:e.format,max:e.max,min:e.min,month:e.month,start:e.start,disableDates:e.disableDates})},setOptions:function(e){var t=this.options,i=e.disableDates;i&&(e.disableDates=g.disabled(i)),this.options=k(t,e,{change:t.change,close:t.close,open:t.open}),this.calendar&&this._setOptions(this.options)},destroy:function(){this.popup.destroy()},open:function(){this._calendar(),this.popup.open()},close:function(){this.popup.close()},min:function(e){this._option("min",e)},max:function(e){this._option("max",e)},toggle:function(){this[this.popup.visible()?"close":"open"]()},move:function(e){var t=e.keyCode,i=this.calendar,n=e.ctrlKey&&t==l.DOWN||t==l.ENTER,r=!1;if(e.altKey)t==l.DOWN?(this.open(),e.preventDefault(),r=!0):t==l.UP&&(this.close(),e.preventDefault(),r=!0);else if(this.popup.visible()){if(t==l.ESC||n&&i._cell.hasClass("k-state-selected"))return this.close(),e.preventDefault(),!0;this._current=i._move(e),r=!0}return r},current:function(e){this._current=e,this.calendar._focus(e)},value:function(e){var t=this.calendar,i=this.options,n=i.disableDates;n&&n(e)&&(e=null),this._value=e,this._current=new y(+_(e,i.min,i.max)),t&&t.value(e)},_click:function(e){-1!==e.currentTarget.className.indexOf("k-state-selected")&&this.close()},_option:function(e,t){var i=this.calendar;this.options[e]=t,i&&i[e](t)}},x.normalize=i,r.DateView=x;var C=o.extend({init:function(t,n){var s,l=this;o.fn.init.call(l,t,n),t=l.element,(n=l.options).disableDates=r.calendar.disabled(n.disableDates),n.min=a(t.attr("min"))||a("1278/11/01","yyyy/MM/dd"),n.max=a(t.attr("max"))||a("1478/11/01","yyyy/MM/dd"),i(n),l._initialOptions=k({},n),l._wrapper(),l.dateView=new x(k({},n,{id:t.attr("id"),anchor:l.wrapper,change:function(){l._change(this.value()),l.close()},close:function(e){l.trigger("close")?e.preventDefault():(t.attr("aria-expanded",!1),s.attr("aria-hidden",!0))},open:function(e){var i,n=l.options;l.trigger("open")?e.preventDefault():(l.element.val()!==l._oldText&&(i=a(t.val(),n.parseFormats,n.culture),l.dateView[i?"current":"value"](i)),t.attr("aria-expanded",!0),s.attr("aria-hidden",!1),l._updateARIA(i))}})),s=l.dateView.div,l._icon();try{t[0].setAttribute("type","text")}catch(e){t[0].type="text"}t.addClass("k-input").attr({role:"combobox","aria-expanded":!1,"aria-owns":l.dateView._dateViewID}),l._reset(),l._template(),t.is("[disabled]")||e(l.element).parents("fieldset").is(":disabled")?l.enable(!1):l.readonly(t.is("[readonly]")),l._old=l._update(n.value||l.element.val()),l._oldText=t.val(),r.notify(l)},events:["open","close","change"],options:{name:"DatePicker",value:null,footer:"",format:"",culture:"",parseFormats:[],min:new Date(1900,0,1),max:new Date(2099,11,31),start:"month",depth:"month",animation:{},month:{},dates:[],ARIATemplate:'Current focused date is #=kendo.toString(data.current, "D")#'},setOptions:function(e){var t=this._value;o.fn.setOptions.call(this,e),(e=this.options).min=a(e.min),e.max=a(e.max),i(e),this.dateView.setOptions(e),t&&(this.element.val(r.toString(t,e.format,e.culture)),this._updateARIA(t))},_editable:function(e){var t=this,i=t._dateIcon.off(u),r=t.element.off(u),s=t._inputWrapper.off(u),o=e.readonly,a=e.disable;o||a?(s.addClass(a?p:f).removeClass(a?f:p),r.attr("disabled",a).attr("readonly",o).attr("aria-disabled",a).attr("aria-readonly",o)):(s.addClass(f).removeClass(p).on("mouseenter.kendoDatePicker mouseleave.kendoDatePicker",t._toggleHover),r.removeAttr("disabled").removeAttr("readonly").attr("aria-disabled",!1).attr("aria-readonly",!1).on("keydown"+u,w(t._keydown,t)).on("focusout"+u,w(t._blur,t)).on("focus"+u,function(){t._inputWrapper.addClass("k-state-focused")}),i.on(h,w(t._click,t)).on(m,n))},readonly:function(e){this._editable({readonly:void 0===e||e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=void 0===e||e)})},destroy:function(){o.fn.destroy.call(this),this.dateView.destroy(),this.element.off(u),this._dateIcon.off(u),this._inputWrapper.off(u),this._form&&this._form.off("reset",this._resetHandler)},open:function(){this.dateView.open()},close:function(){this.dateView.close()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},value:function(e){if(void 0===e)return this._value;this._old=this._update(e),null===this._old&&this.element.val(""),this._oldText=this.element.val()},_toggleHover:function(t){e(t.currentTarget).toggleClass("k-state-hover","mouseenter"===t.type)},_blur:function(){var e=this.element.val();this.close(),e!==this._oldText&&this._change(e),this._inputWrapper.removeClass("k-state-focused")},_click:function(){var e=this.element;this.dateView.toggle(),r.support.touch||e[0]===c()||e.focus()},_change:function(e){var t,i=this.element.val();e=this._update(e);var n=(t=+this._old!=+e)&&!this._typing,r=i!==this.element.val();(n||r)&&this.element.trigger("change"),t&&(this._old=e,this._oldText=this.element.val(),this.trigger("change")),this._typing=!1},_keydown:function(e){var t=this.dateView,i=this.element.val(),n=!1;t.popup.visible()||e.keyCode!=l.ENTER||i===this._oldText?(n=t.move(e),this._updateARIA(t._current),n||(this._typing=!0)):this._change(i)},_icon:function(){var t,i=this.element;(t=i.next("span.k-select"))[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-calendar">select</span></span>').insertAfter(i)),this._dateIcon=t.attr({role:"button","aria-controls":this.dateView._dateViewID})},_option:function(e,t){var i=this.options;if(void 0===t)return i[e];(t=a(t,i.parseFormats,i.culture))&&(i[e]=new y(+t),this.dateView[e](t))},_update:function(e){var t,i=this.options,n=i.min,s=i.max,o=this._value,l=a(e,i.parseFormats,i.culture),d=null===l&&null===o||l instanceof Date&&o instanceof Date;return i.disableDates(l)&&(l=null,this._old||(e=null)),+l==+o&&d?((t=r.toString(l,i.format,i.culture))!==e&&this.element.val(null===l?e:t),l):(null!==l&&b(l,n)?l=_(l,n,s):v(l,n,s)||(l=null),this._value=l,this.dateView.value(l),this.element.val(l?r.toString(l,i.format,i.culture):e),this._updateARIA(l),l)},_wrapper:function(){var t,i=this.element;(t=i.parents(".k-datepicker"))[0]||(t=(t=i.wrap("<span />").parent().addClass("k-picker-wrap k-state-default")).wrap("<span />").parent()),t[0].style.cssText=i[0].style.cssText,i.css({width:"100%",height:i[0].style.height}),this.wrapper=t.addClass("k-widget k-datepicker k-header").addClass(i[0].className),this._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,i=t.element,n=i.attr("form"),r=n?e("#"+n):i.closest("form");r[0]&&(t._resetHandler=function(){t.value(i[0].defaultValue),t.max(t._initialOptions.max),t.min(t._initialOptions.min)},t._form=r.on("reset",t._resetHandler))},_template:function(){this._ariaTemplate=d(this.options.ARIATemplate)},_updateARIA:function(e){var t,i=this.dateView.calendar;this.element.removeAttr("aria-activedescendant"),i&&((t=i._cell).attr("aria-label",this._ariaTemplate({current:e||i.current()})),this.element.attr("aria-activedescendant",t.attr("id")))}});s.plugin(C)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.autocomplete",["kendo.list","kendo.mobile.scroller"],function(){return function(e,t){function i(e,t,i){return i?t.substring(0,e).split(i).length-1:0}var n=window.kendo,r=n.support,s=n.caret,o=n._activeElement,a=r.placeholder,l=n.ui,d=l.List,c=n.keys,u=n.data.DataSource,h="k-state-default",f="k-state-disabled",p=".kendoAutoComplete",m=e.proxy,g=d.extend({init:function(t,i){var r,s=this;s.ns=p,i=e.isArray(i)?{dataSource:i}:i,d.fn.init.call(s,t,i),t=s.element,(i=s.options).placeholder=i.placeholder||t.attr("placeholder"),a&&t.attr("placeholder",i.placeholder),s._wrapper(),s._loader(),s._dataSource(),s._ignoreCase(),t[0].type="text",r=s.wrapper,s._popup(),t.addClass("k-input").on("keydown"+p,m(s._keydown,s)).on("keypress"+p,m(s._keypress,s)).on("paste"+p,m(s._search,s)).on("focus"+p,function(){s._prev=s._accessor(),s._oldText=s._prev,s._placeholder(!1),r.addClass("k-state-focused")}).on("focusout"+p,function(){s._change(),s._placeholder(),r.removeClass("k-state-focused")}).attr({autocomplete:"off",role:"textbox","aria-haspopup":!0}),s._enable(),s._old=s._accessor(),t[0].id&&t.attr("aria-owns",s.ul[0].id),s._aria(),s._placeholder(),s._initList(),e(s.element).parents("fieldset").is(":disabled")&&s.enable(!1),s.listView.bind("click",function(e){e.preventDefault()}),s._resetFocusItemHandler=e.proxy(s._resetFocusItem,s),n.notify(s)},options:{name:"AutoComplete",enabled:!0,suggest:!1,template:"",groupTemplate:"#:data#",fixedGroupTemplate:"#:data#",dataTextField:"",minLength:1,delay:200,height:200,filter:"startswith",ignoreCase:!0,highlightFirst:!1,separator:null,placeholder:"",animation:{},virtual:!1,value:null},_dataSource:function(){this.dataSource&&this._refreshHandler?this._unbindDataSource():(this._progressHandler=m(this._showBusy,this),this._errorHandler=m(this._hideBusy,this)),this.dataSource=u.create(this.options.dataSource).bind("progress",this._progressHandler).bind("error",this._errorHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.listView.setDataSource(this.dataSource)},events:["open","close","change","select","filtering","dataBinding","dataBound"],setOptions:function(e){var t=this._listOptions(e);d.fn.setOptions.call(this,e),this.listView.setOptions(t),this._accessors(),this._aria()},_listOptions:function(t){var i=d.fn._listOptions.call(this,e.extend(t,{skipUpdateOnBind:!0}));return i.dataValueField=i.dataTextField,i.selectedItemChange=null,i},_editable:function(e){var t=this.element,i=this.wrapper.off(p),n=e.readonly,r=e.disable;n||r?(i.addClass(r?f:h).removeClass(r?h:f),t.attr("disabled",r).attr("readonly",n).attr("aria-disabled",r).attr("aria-readonly",n)):(i.addClass(h).removeClass(f).on("mouseenter.kendoAutoComplete mouseleave.kendoAutoComplete",this._toggleHover),t.removeAttr("disabled").removeAttr("readonly").attr("aria-disabled",!1).attr("aria-readonly",!1))},close:function(){var e=this.listView.focus();e&&e.removeClass("k-state-selected"),this.popup.close()},destroy:function(){this.element.off(p),this.wrapper.off(p),d.fn.destroy.call(this)},refresh:function(){this.listView.refresh()},select:function(e){this._select(e)},search:function(e){var t,n=this.options,r=n.ignoreCase,o=n.separator;e=e||this._accessor(),clearTimeout(this._typingTimeout),o&&(e=function(e,t,n){return t.split(n)[i(e,t,n)]}(s(this.element)[0],e,o)),(!(t=e.length)||t>=n.minLength)&&(this._open=!0,this._mute(function(){this.listView.value([])}),this._filterSource({value:r?e.toLowerCase():e,operator:n.filter,field:n.dataTextField,ignoreCase:r}))},suggest:function(e){var t,n=this._last,r=this._accessor(),a=this.element[0],l=s(a)[0],u=this.options.separator,h=r.split(u),f=i(l,r,u),p=l;n!=c.BACKSPACE&&n!=c.DELETE?("string"!=typeof(e=e||"")&&(e[0]&&(e=this.dataSource.view()[d.inArray(e[0],this.ul[0])]),e=e?this._text(e):""),l<=0&&(l=r.toLowerCase().indexOf(e.toLowerCase())+1),t=(t=r.substring(0,l).lastIndexOf(u))>-1?l-(t+u.length):l,r=h[f].substring(0,t),e&&((t=(e=e.toString()).toLowerCase().indexOf(r.toLowerCase()))>-1&&(p=l+(e=e.substring(t+r.length)).length,r+=e),u&&""!==h[h.length-1]&&h.push("")),h[f]=r,this._accessor(h.join(u||"")),a===o()&&s(a,l,p)):this._last=void 0},value:function(e){if(void 0===e)return this._accessor();this.listView.value(e),this._accessor(e),this._old=this._accessor(),this._oldText=this._accessor()},_click:function(e){var t=e.item,i=this.element;e.preventDefault(),this._active=!0,this.trigger("select",{item:t})?this.close():(this._oldText=i.val(),this._select(t),this._blur(),s(i,i.val().length))},_resetFocusItem:function(){var e=this.options.highlightFirst?0:-1;this.options.virtual&&this.listView.scrollTo(0),this.listView.focus(e)},_listBound:function(){var e,t=this.popup,i=this.options,n=this.dataSource.flatView(),r=n.length,s=this.element[0]===o();this._angularItems("compile"),this._resizePopup(),t.position(),r&&i.suggest&&s&&this.suggest(n[0]),this._open&&(this._open=!1,e=r?"open":"close",this._typingTimeout&&!s&&(e="close"),r&&(this._resetFocusItem(),i.virtual&&this.popup.unbind("activate",this._resetFocusItemHandler).one("activate",this._resetFocusItemHandler)),t[e](),this._typingTimeout=void 0),this._touchScroller&&this._touchScroller.reset(),this._hideBusy(),this._makeUnselectable(),this.trigger("dataBound")},_mute:function(e){this._muted=!0,e.call(this),this._muted=!1},_listChange:function(){(this._active||this.element[0]===o())&&!this._muted&&this._selectValue(this.listView.selectedDataItems()[0])},_selectValue:function(e){var t=this.options.separator,n="";e&&(n=this._text(e)),null===n&&(n=""),t&&(n=function(e,t,n,r){var s=t.split(r);return s.splice(i(e,t,r),1,n),r&&""!==s[s.length-1]&&s.push(""),s.join(r)}(s(this.element)[0],this._accessor(),n,t)),this._prev=n,this._accessor(n),this._placeholder()},_change:function(){var e=this.value(),t=e!==d.unifyType(this._old,typeof e),i=t&&!this._typing,n=this._oldText!==e;(i||n)&&this.element.trigger("change"),t&&(this._old=e,this.trigger("change")),this.typing=!1},_accessor:function(e){var t=this.element[0];if(void 0===e)return e=t.value,t.className.indexOf("k-readonly")>-1&&e===this.options.placeholder?"":e;t.value=null===e?"":e,this._placeholder()},_keydown:function(e){var t=e.keyCode,i=this.popup.visible(),n=this.listView.focus();if(this._last=t,t===c.DOWN)i&&this._move(n?"focusNext":"focusFirst"),e.preventDefault();else if(t===c.UP)i&&this._move(n?"focusPrev":"focusLast"),e.preventDefault();else if(t===c.ENTER||t===c.TAB){if(t===c.ENTER&&i&&e.preventDefault(),i&&n){if(this.trigger("select",{item:n}))return;this._select(n)}this._blur()}else t===c.ESC?(i&&e.preventDefault(),this.close()):this._search()},_keypress:function(){this._oldText=this.element.val(),this._typing=!0},_move:function(e){this.listView[e](),this.options.suggest&&this.suggest(this.listView.focus())},_hideBusy:function(){clearTimeout(this._busy),this._loading.hide(),this.element.attr("aria-busy",!1),this._busy=null},_showBusy:function(){var e=this;e._busy||(e._busy=setTimeout(function(){e.element.attr("aria-busy",!0),e._loading.show()},100))},_placeholder:function(e){if(!a){var t,i=this.element,n=this.options.placeholder;if(n){if(t=i.val(),void 0===e&&(e=!t),e||(n=t!==n?t:""),t===this._old&&!e)return;i.toggleClass("k-readonly",e).val(n),n||i[0]!==document.activeElement||s(i[0],0,0)}}},_search:function(){var e=this;clearTimeout(e._typingTimeout),e._typingTimeout=setTimeout(function(){e._prev!==e._accessor()&&(e._prev=e._accessor(),e.search())},e.options.delay)},_select:function(e){this._active=!0,this.listView.select(e),this._active=!1},_loader:function(){this._loading=e('<span class="k-icon k-loading" style="display:none"></span>').insertAfter(this.element)},_toggleHover:function(t){e(t.currentTarget).toggleClass("k-state-hover","mouseenter"===t.type)},_wrapper:function(){var e,t=this.element,i=t[0];(e=t.parent()).is("span.k-widget")||(e=t.wrap("<span />").parent()),e.attr("tabindex",-1),e.attr("role","presentation"),e[0].style.cssText=i.style.cssText,t.css({width:"100%",height:i.style.height}),this._focused=this.element,this.wrapper=e.addClass("k-widget k-autocomplete k-header").addClass(i.className)}});l.plugin(g)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.dropdownlist",["kendo.list","kendo.mobile.scroller"],function(){return function(e,t){function i(e,t,i){for(var n,r=0,s=t.length-1;r<s;++r)(n=t[r])in e||(e[n]={}),e=e[n];e[t[s]]=i}function n(e,t){return e>=t&&(e-=t),e}var r=window.kendo,s=r.ui,o=s.List,a=s.Select,l=r.support,d=r._activeElement,c=r.data.ObservableObject,u=r.keys,h=".kendoDropDownList",f="k-state-default",p="k-state-disabled",m="mouseenter"+h+" mouseleave"+h,g="tabindex",v=e.proxy,_=a.extend({init:function(t,i){var n,s,o=i&&i.index;this.ns=h,i=e.isArray(i)?{dataSource:i}:i,a.fn.init.call(this,t,i),i=this.options,t=this.element.on("focus"+h,v(this._focusHandler,this)),this._focusInputHandler=e.proxy(this._focusInput,this),this.optionLabel=e(),this._optionLabel(),this._inputTemplate(),this._reset(),this._prev="",this._word="",this._wrapper(),this._tabindex(),this.wrapper.data(g,this.wrapper.attr(g)),this._span(),this._popup(),this._mobile(),this._dataSource(),this._ignoreCase(),this._filterHeader(),this._aria(),this._enable(),this._oldIndex=this.selectedIndex=-1,void 0!==o&&(i.index=o),this._initialIndex=i.index,this._initList(),this._cascade(),i.autoBind?this.dataSource.fetch():-1===this.selectedIndex&&((s=i.text||"")||((n=i.optionLabel)&&0===i.index?s=n:this._isSelect&&(s=t.children(":selected").text())),this._textAccessor(s)),e(this.element).parents("fieldset").is(":disabled")&&this.enable(!1),this.listView.bind("click",function(e){e.preventDefault()}),r.notify(this)},options:{name:"DropDownList",enabled:!0,autoBind:!0,index:0,text:null,value:null,delay:500,height:200,dataTextField:"",dataValueField:"",optionLabel:"",cascadeFrom:"",cascadeFromField:"",ignoreCase:!0,animation:{},filter:"none",minLength:1,virtual:!1,template:null,valueTemplate:null,optionLabelTemplate:null,groupTemplate:"#:data#",fixedGroupTemplate:"#:data#"},events:["open","close","change","select","filtering","dataBinding","dataBound","cascade","set"],setOptions:function(e){a.fn.setOptions.call(this,e),this.listView.setOptions(this._listOptions(e)),this._optionLabel(),this._inputTemplate(),this._accessors(),this._filterHeader(),this._enable(),this._aria(),!this.value()&&this.hasOptionLabel()&&this.select(0)},destroy:function(){a.fn.destroy.call(this),this.wrapper.off(h),this.element.off(h),this._inputWrapper.off(h),this._arrow.off(),this._arrow=null,this.optionLabel.off()},open:function(){this.popup.visible()||(this.listView.bound()&&"accept"!==this._state?this._allowOpening()&&(this.popup.one("activate",this._focusInputHandler),this.popup.open(),this._focusItem()):(this._open=!0,this._state="rebind",this.filterInput&&(this.filterInput.val(""),this._prev=""),this._filterSource()))},_focusInput:function(){this._focusElement(this.filterInput)},_allowOpening:function(){return this.hasOptionLabel()||this.filterInput||this.dataSource.view().length},toggle:function(e){this._toggle(e,!0)},current:function(e){var t;if(void 0===e)return!(t=this.listView.focus())&&0===this.selectedIndex&&this.hasOptionLabel()?this.optionLabel:t;this._focus(e)},dataItem:function(t){var i=null;if(null===t)return t;if(void 0===t)i=this.listView.selectedDataItems()[0];else{if("number"!=typeof t){if(this.options.virtual)return this.dataSource.getByUid(e(t).data("uid"));t=t.hasClass("k-list-optionlabel")?-1:e(this.items()).index(t)}else this.hasOptionLabel()&&(t-=1);i=this.dataSource.flatView()[t]}return i||(i=this._optionLabelDataItem()),i},refresh:function(){this.listView.refresh()},text:function(e){var t,i,n=this,r=n.options.ignoreCase;if(void 0===(e=null===e?"":e))return n._textAccessor();"string"==typeof e&&(i=r?e.toLowerCase():e,n._select(function(e){return e=n._text(e),r&&(e=(e+"").toLowerCase()),e===i}),(t=n.dataItem())&&(e=t)),n._textAccessor(e)},value:function(e){var t=this,i=t.listView,n=t.dataSource;return void 0===e?void 0===(e=t._accessor()||t.listView.value()[0])||null===e?"":e:(!e&&t.hasOptionLabel()||(t._initialIndex=null),this.trigger("set",{value:e}),t._request&&t.options.cascadeFrom&&t.listView.bound()?(t._valueSetter&&n.unbind("change",t._valueSetter),t._valueSetter=v(function(){t.value(e)},t),void n.one("change",t._valueSetter)):(t._isFilterEnabled()&&i.bound()&&i.isFiltered()?t._clearFilter():t._fetchData(),void i.value(e).done(function(){-1===t.selectedIndex&&t.text()&&(t.text(""),t._accessor("",-1)),t._old=t._accessor(),t._oldIndex=t.selectedIndex})))},hasOptionLabel:function(){return this.optionLabel&&!!this.optionLabel[0]},_optionLabel:function(){var t=this,i=t.options,n=i.optionLabel,s=i.optionLabelTemplate;if(!n)return t.optionLabel.off().remove(),void(t.optionLabel=e());s||(s="#:",s+="string"==typeof n?"data":r.expr(i.dataTextField,"data"),s+="#"),"function"!=typeof s&&(s=r.template(s)),t.optionLabelTemplate=s,t.hasOptionLabel()||(t.optionLabel=e('<div class="k-list-optionlabel"></div>').prependTo(t.list)),t.optionLabel.html(s(n)).off().click(v(t._click,t)).on(m,t._toggleHover),t.angular("compile",function(){return{elements:t.optionLabel,data:[{dataItem:t._optionLabelDataItem()}]}})},_optionLabelText:function(){var e=this.options.optionLabel;return"string"==typeof e?e:this._text(e)},_optionLabelDataItem:function(){var t=this.options.optionLabel;return this.hasOptionLabel()?e.isPlainObject(t)?new c(t):this._assignInstance(this._optionLabelText(),""):null},_buildOptions:function(e){if(this._isSelect){var t=this.listView.value()[0],i=this._optionLabelDataItem();void 0!==t&&null!==t||(t=""),i&&(i='<option value="'+this._value(i)+'">'+this._text(i)+"</option>"),this._options(e,i,t),t!==o.unifyType(this._accessor(),typeof t)&&(this._customOption=null,this._custom(t))}},_listBound:function(){var e,t=this._initialIndex,i="filter"===this._state,n=this.dataSource.flatView();this._angularItems("compile"),this._presetValue=!1,this._resizePopup(!0),this.popup.position(),this._buildOptions(n),this._makeUnselectable(),i||(this._open&&this.toggle(this._allowOpening()),this._open=!1,this._fetch||(n.length?(!this.listView.value().length&&t>-1&&null!==t&&this.select(t),this._initialIndex=null,(e=this.listView.selectedDataItems()[0])&&this.text()!==this._text(e)&&this._selectValue(e)):this._textAccessor()!==this._optionLabelText()&&(this.listView.value(""),this._selectValue(null),this._oldIndex=this.selectedIndex))),this._hideBusy(),this.trigger("dataBound")},_listChange:function(){this._selectValue(this.listView.selectedDataItems()[0]),(this._presetValue||this._old&&-1===this._oldIndex)&&(this._oldIndex=this.selectedIndex)},_focusHandler:function(){this.wrapper.focus()},_focusinHandler:function(){this._inputWrapper.addClass("k-state-focused"),this._prevent=!1},_focusoutHandler:function(){var e="filter"===this._state,t=window.self!==window.top,i=this._focus();this._prevent||(clearTimeout(this._typingTimeout),e&&i&&!this.trigger("select",{item:i})&&this._select(i,!this.dataSource.view().length),l.mobileOS.ios&&t?this._change():this._blur(),this._inputWrapper.removeClass("k-state-focused"),this._prevent=!0,this._open=!1,this.element.blur())},_wrapperMousedown:function(){this._prevent=!!this.filterInput},_wrapperClick:function(e){e.preventDefault(),this.popup.unbind("activate",this._focusInputHandler),this._focused=this.wrapper,this._toggle()},_editable:function(e){var t=this.element,i=e.disable,n=e.readonly,r=this.wrapper.add(this.filterInput).off(h),s=this._inputWrapper.off(m);n||i?i?(r.removeAttr(g),s.addClass(p).removeClass(f)):(s.addClass(f).removeClass(p),r.on("focusin"+h,v(this._focusinHandler,this)).on("focusout"+h,v(this._focusoutHandler,this))):(t.removeAttr("disabled").removeAttr("readonly"),s.addClass(f).removeClass(p).on(m,this._toggleHover),r.attr(g,r.data(g)).attr("aria-disabled",!1).attr("aria-readonly",!1).on("keydown"+h,v(this._keydown,this)).on("focusin"+h,v(this._focusinHandler,this)).on("focusout"+h,v(this._focusoutHandler,this)).on("mousedown"+h,v(this._wrapperMousedown,this)),this.wrapper.on("click"+h,v(this._wrapperClick,this)),this.filterInput||r.on("keypress"+h,v(this._keypress,this))),t.attr("disabled",i).attr("readonly",n),r.attr("aria-disabled",i).attr("aria-readonly",n)},_keydown:function(e){var t,i,n=e.keyCode,r=e.altKey,s=this.popup.visible();this.filterInput&&(t=this.filterInput[0]===d()),n===u.LEFT?(n=u.UP,i=!0):n===u.RIGHT&&(n=u.DOWN,i=!0),i&&t||(e.keyCode=n,(r&&n===u.UP||n===u.ESC)&&this._focusElement(this.wrapper),n===u.ENTER&&this._typingTimeout&&this.filterInput&&s?e.preventDefault():(i=this._move(e))||(s&&this.filterInput||(n===u.HOME?(i=!0,this._firstItem()):n===u.END&&(i=!0,this._lastItem()),i&&(this._select(this._focus()),e.preventDefault())),r||i||!this.filterInput||this._search()))},_matchText:function(e,t){var i=this.options.ignoreCase;return void 0!==e&&null!==e&&(e+="",i&&(e=e.toLowerCase()),0===e.indexOf(t))},_shuffleData:function(e,t){var i=this._optionLabelDataItem();return i&&(e=[i].concat(e)),e.slice(t).concat(e.slice(0,t))},_selectNext:function(){var e,t,i=this.dataSource.flatView(),r=i.length+(this.hasOptionLabel()?1:0),s=function(e,t){for(var i=0;i<e.length;i++)if(e.charAt(i)!==t)return!1;return!0}(this._word,this._last),o=this.selectedIndex;o=-1===o?0:n(o+=s?1:0,r),i=i.toJSON?i.toJSON():i.slice(),i=this._shuffleData(i,o);for(var a=0;a<r&&(t=this._text(i[a]),!s||!this._matchText(t,this._last))&&!this._matchText(t,this._word);a++);a!==r&&(e=this._focus(),this._select(n(o+a,r)),this.trigger("select",{item:this._focus()})&&this._select(e),this.popup.visible()||this._change())},_keypress:function(e){if(0!==e.which&&e.keyCode!==r.keys.ENTER){var t=String.fromCharCode(e.charCode||e.keyCode);this.options.ignoreCase&&(t=t.toLowerCase())," "===t&&e.preventDefault(),this._word+=t,this._last=t,this._search()}},_popupOpen:function(){var e=this.popup;e.wrapper=r.wrap(e.element),e.element.closest(".km-root")[0]&&(e.wrapper.addClass("km-popup km-widget"),this.wrapper.addClass("km-widget"))},_popup:function(){a.fn._popup.call(this),this.popup.one("open",v(this._popupOpen,this))},_click:function(t){var i=t.item||e(t.currentTarget);t.preventDefault(),this.trigger("select",{item:i})?this.close():(this._userTriggered=!0,this._select(i),this._focusElement(this.wrapper),this._blur())},_focusElement:function(e){var t=d(),i=this.wrapper,n=this.filterInput,r=e===n?i:n,s=l.mobileOS&&(l.touch||l.MSPointers||l.pointers);n&&n[0]===e[0]&&s||n&&r[0]===t&&(this._prevent=!0,this._focused=e.focus())},_filter:function(e){if(e){var t=this;t.options.ignoreCase&&(e=e.toLowerCase()),t._select(function(i){return t._matchText(t._text(i),e)})}},_search:function(){var e=this,t=e.dataSource;if(clearTimeout(e._typingTimeout),e._isFilterEnabled())e._typingTimeout=setTimeout(function(){var t=e.filterInput.val();e._prev!==t&&(e._prev=t,e.search(t)),e._typingTimeout=null},e.options.delay);else{if(e._typingTimeout=setTimeout(function(){e._word=""},e.options.delay),!e.listView.bound())return void t.fetch().done(function(){e._selectNext()});e._selectNext()}},_get:function(t){var i,n,r,s="function"==typeof t,o=s?e():e(t);if(this.hasOptionLabel()&&("number"==typeof t?t>-1&&(t-=1):o.hasClass("k-list-optionlabel")&&(t=-1)),s){for(i=this.dataSource.flatView(),r=0;r<i.length;r++)if(t(i[r])){t=r,n=!0;break}n||(t=-1)}return t},_firstItem:function(){this.hasOptionLabel()?this._focus(this.optionLabel):this.listView.focusFirst()},_lastItem:function(){this._resetOptionLabel(),this.listView.focusLast()},_nextItem:function(){this.optionLabel.hasClass("k-state-focused")?(this._resetOptionLabel(),this.listView.focusFirst()):this.listView.focusNext()},_prevItem:function(){this.optionLabel.hasClass("k-state-focused")||(this.listView.focusPrev(),this.listView.focus()||this._focus(this.optionLabel))},_focusItem:function(){var e=this.listView,t=e.focus(),i=e.select();void 0===(i=i[i.length-1])&&this.options.highlightFirst&&!t&&(i=0),void 0!==i?e.focus(i):this.options.optionLabel?(this._focus(this.optionLabel),this._select(this.optionLabel)):e.scrollToIndex(0)},_resetOptionLabel:function(e){this.optionLabel.removeClass("k-state-focused"+(e||"")).removeAttr("id")},_focus:function(e){var t=this.listView,i=this.optionLabel;if(void 0===e)return!(e=t.focus())&&i.hasClass("k-state-focused")&&(e=i),e;this._resetOptionLabel(),e=this._get(e),t.focus(e),-1===e&&(i.addClass("k-state-focused").attr("id",t._optionID),this._focused.add(this.filterInput).removeAttr("aria-activedescendant").attr("aria-activedescendant",t._optionID))},_select:function(e,t){e=this._get(e),this.listView.select(e),t||"filter"!==this._state||(this._state="accept"),-1===e&&this._selectValue(null)},_selectValue:function(e){var t=this.options.optionLabel,i=this.listView.select(),n="",r="";void 0===(i=i[i.length-1])&&(i=-1),this._resetOptionLabel(" k-state-selected"),e?(r=e,n=this._dataValue(e),t&&(i+=1)):t&&(this._focus(this.optionLabel.addClass("k-state-selected")),r=this._optionLabelText(),n="string"==typeof t?"":this._value(t),i=0),this.selectedIndex=i,null===n&&(n=""),this._textAccessor(r),this._accessor(n,i),this._triggerCascade()},_mobile:function(){var e=this.popup,t=l.mobileOS;e.element.parents(".km-root").eq(0).length&&t&&(e.options.animation.open.effects=t.android||t.meego?"fadeIn":t.ios||t.wp?"slideIn:up":e.options.animation.open.effects)},_filterHeader:function(){var t;this.filterInput&&(this.filterInput.off(h).parent().remove(),this.filterInput=null),this._isFilterEnabled()&&(t='<span unselectable="on" class="k-icon k-i-search">select</span>',this.filterInput=e('<input class="k-textbox"/>').attr({placeholder:this.element.attr("placeholder"),role:"listbox","aria-haspopup":!0,"aria-expanded":!1}),this.list.prepend(e('<span class="k-list-filter" />').append(this.filterInput.add(t))))},_span:function(){var t,i=this.wrapper;(t=i.find("span.k-input"))[0]||(i.append('<span unselectable="on" class="k-dropdown-wrap k-state-default"><span unselectable="on" class="k-input">&nbsp;</span><span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(this.element),t=i.find("span.k-input")),this.span=t,this._inputWrapper=e(i[0].firstChild),this._arrow=i.find(".k-icon")},_wrapper:function(){var e,t=this.element,i=t[0];(e=t.parent()).is("span.k-widget")||((e=t.wrap("<span />").parent())[0].style.cssText=i.style.cssText,e[0].title=i.title),t.hide(),this._focused=this.wrapper=e.addClass("k-widget k-dropdown k-header").addClass(i.className).css("display","").attr({accesskey:t.attr("accesskey"),unselectable:"on",role:"listbox","aria-haspopup":!0,"aria-expanded":!1})},_clearSelection:function(e){this.select(e.value()?0:-1)},_inputTemplate:function(){var t=this.options.valueTemplate;if(t=t?r.template(t):e.proxy(r.template("#:this._text(data)#",{useWithBlock:!1}),this),this.valueTemplate=t,this.hasOptionLabel()&&!this.options.optionLabelTemplate)try{this.valueTemplate(this._optionLabelDataItem())}catch(e){throw new Error("The `optionLabel` option is not valid due to missing fields. Define a custom optionLabel as shown here http://docs.telerik.com/kendo-ui/api/javascript/ui/dropdownlist#configuration-optionLabel")}},_textAccessor:function(t){var i=null,n=this.valueTemplate,r=this.options.optionLabel,s=this.span;if(void 0===t)return s.text();e.isPlainObject(t)||t instanceof c?i=t:r&&this._optionLabelText()===t&&(i=r,n=this.optionLabelTemplate),i||(i=this._assignInstance(t,this._accessor()));var o=function(){return{elements:s.get(),data:[{dataItem:i}]}};this.angular("cleanup",o);try{s.html(n(i))}catch(e){s.html("")}this.angular("compile",o)},_preselect:function(e,t){e||t||(t=this._optionLabelText()),this._accessor(e),this._textAccessor(t),this._old=this._accessor(),this._oldIndex=this.selectedIndex,this.listView.setValue(e),this._initialIndex=null,this._presetValue=!0},_assignInstance:function(e,t){var n=this.options.dataTextField,r={};return n?(i(r,n.split("."),e),i(r,this.options.dataValueField.split("."),t),r=new c(r)):r=e,r}});s.plugin(_)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.combobox",["kendo.list","kendo.mobile.scroller"],function(){return function(e,t){var i=window.kendo,n=i.ui,r=n.List,s=n.Select,o=i.caret,a=i.support.placeholder,l=i._activeElement,d=i.keys,c=".kendoComboBox",u="click"+c,h="mousedown"+c,f="k-state-default",p="k-state-disabled",m=e.proxy,g=s.extend({init:function(t,n){var r;this.ns=c,n=e.isArray(n)?{dataSource:n}:n,s.fn.init.call(this,t,n),n=this.options,t=this.element.on("focus"+c,m(this._focusHandler,this)),n.placeholder=n.placeholder||t.attr("placeholder"),this._reset(),this._wrapper(),this._input(),this._tabindex(this.input),this._popup(),this._dataSource(),this._ignoreCase(),this._enable(),this._oldIndex=this.selectedIndex=-1,this._aria(),this._initialIndex=n.index,this._initList(),this._cascade(),n.autoBind?this._filterSource():(!(r=n.text)&&this._isSelect&&(r=t.children(":selected").text()),r&&this._setText(r)),r||this._placeholder(),e(this.element).parents("fieldset").is(":disabled")&&this.enable(!1),i.notify(this)},options:{name:"ComboBox",enabled:!0,index:-1,text:null,value:null,autoBind:!0,delay:200,dataTextField:"",dataValueField:"",minLength:0,height:200,highlightFirst:!0,filter:"none",placeholder:"",suggest:!1,cascadeFrom:"",cascadeFromField:"",ignoreCase:!0,animation:{},virtual:!1,template:null,groupTemplate:"#:data#",fixedGroupTemplate:"#:data#"},events:["open","close","change","select","filtering","dataBinding","dataBound","cascade","set"],setOptions:function(e){s.fn.setOptions.call(this,e),this.listView.setOptions(e),this._accessors(),this._aria()},destroy:function(){this.input.off(c),this.element.off(c),this._inputWrapper.off(c),this._arrow.parent().off(u+" "+h),s.fn.destroy.call(this)},_focusHandler:function(){this.input.focus()},_arrowClick:function(){this._toggle()},_inputFocus:function(){this._inputWrapper.addClass("k-state-focused"),this._placeholder(!1)},_inputFocusout:function(){var e=this.value();this._inputWrapper.removeClass("k-state-focused"),clearTimeout(this._typingTimeout),this._typingTimeout=null,this.text(this.text()),e!==this.value()&&this.trigger("select",{item:this._focus()})?this.value(e):(this._placeholder(),this._blur(),this.element.blur())},_editable:function(e){var t=e.disable,i=e.readonly,n=this._inputWrapper.off(c),r=this.element.add(this.input.off(c)),s=this._arrow.parent().off(u+" "+h);i||t?(n.addClass(t?p:f).removeClass(t?f:p),r.attr("disabled",t).attr("readonly",i).attr("aria-disabled",t).attr("aria-readonly",i)):(n.addClass(f).removeClass(p).on("mouseenter.kendoComboBox mouseleave.kendoComboBox",this._toggleHover),r.removeAttr("disabled").removeAttr("readonly").attr("aria-disabled",!1).attr("aria-readonly",!1),s.on(u,m(this._arrowClick,this)).on(h,function(e){e.preventDefault()}),this.input.on("keydown"+c,m(this._keydown,this)).on("focus"+c,m(this._inputFocus,this)).on("focusout"+c,m(this._inputFocusout,this)))},open:function(){var e=this._state;this.popup.visible()||(!this.listView.bound()&&"filter"!==e||"accept"===e?(this._open=!0,this._state="rebind",this._filterSource()):(this.popup.open(),this._focusItem()))},_updateSelectionState:function(){var e=this.options.text,t=this.options.value;this.listView.isFiltered()||(-1===this.selectedIndex?(void 0!==e&&null!==e||(e=t),this._accessor(t),this.input.val(e||this.input.val()),this._placeholder()):-1===this._oldIndex&&(this._oldIndex=this.selectedIndex))},_buildOptions:function(e){if(this._isSelect){var t=this._customOption;"rebind"===this._state&&(this._state=""),this._customOption=void 0,this._options(e,"",this.value()),t&&t[0].selected&&this._custom(t.val())}},_updateSelection:function(){var t=this.listView,i=this._initialIndex,n=null!==i&&i>-1;if("filter"===this._state)e(t.focus()).removeClass("k-state-selected");else if(!this._fetch){t.value().length||(n?this.select(i):this._accessor()&&t.value(this._accessor())),this._initialIndex=null;var r=t.selectedDataItems()[0];r&&(this._value(r)!==this.value()&&this._custom(this._value(r)),this.text()&&this.text()!==this._text(r)&&this._selectValue(r))}},_updateItemFocus:function(){var e=this.listView;this.options.highlightFirst?e.focus()||e.focusIndex()||e.focus(0):e.focus(-1)},_listBound:function(){var e=this.input[0]===l(),t=this.dataSource.flatView(),i=this.listView.skip(),n=void 0===i||0===i;this._angularItems("compile"),this._presetValue=!1,this._resizePopup(),this.popup.position(),this._buildOptions(t),this._makeUnselectable(),this._updateSelection(),t.length&&n&&(this._updateItemFocus(),this.options.suggest&&e&&this.input.val()&&this.suggest(t[0])),this._open&&(this._open=!1,this._typingTimeout&&!e?this.popup.close():this.toggle(!!t.length),this._typingTimeout=null),this._hideBusy(),this.trigger("dataBound")},_listChange:function(){this._selectValue(this.listView.selectedDataItems()[0]),this._presetValue&&(this._oldIndex=this.selectedIndex)},_get:function(e){var t,i,n;if("function"==typeof e){for(t=this.dataSource.flatView(),n=0;n<t.length;n++)if(e(t[n])){e=n,i=!0;break}i||(e=-1)}return e},_select:function(e,t){-1===(e=this._get(e))&&(this.input[0].value="",this._accessor("")),this.listView.select(e),t||"filter"!==this._state||(this._state="accept")},_selectValue:function(e){var t=this.listView.select(),i="",n="";void 0===(t=t[t.length-1])&&(t=-1),this.selectedIndex=t,-1===t?(i=n=this.input[0].value,this.listView.focus(-1)):(e&&(i=this._dataValue(e),n=this._text(e)),null===i&&(i="")),this._prev=this.input[0].value=n,this._accessor(void 0!==i?i:n,t),this._placeholder(),this._triggerCascade()},refresh:function(){this.listView.refresh()},suggest:function(e){var t,i=this.input[0],n=this.text(),s=o(i)[0],a=this._last;a!=d.BACKSPACE&&a!=d.DELETE?("string"!=typeof(e=e||"")&&(e[0]&&(e=this.dataSource.view()[r.inArray(e[0],this.ul[0])]),e=e?this._text(e):""),s<=0&&(s=n.toLowerCase().indexOf(e.toLowerCase())+1),e?(t=(e=e.toString()).toLowerCase().indexOf(n.toLowerCase()))>-1&&(n+=e.substring(t+n.length)):n=n.substring(0,s),n.length===s&&e||(i.value=n,i===l()&&o(i,s,n.length))):this._last=void 0},text:function(e){e=null===e?"":e;var t,i,n=this,s=n.input[0],o=n.options.ignoreCase,a=e;if(void 0===e)return s.value;!1!==n.options.autoBind||n.listView.bound()?(t=n.dataItem())&&n._text(t)===e&&(i=n._value(t))===r.unifyType(n._old,typeof i)?n._triggerCascade():(o&&(a=a.toLowerCase()),n._select(function(e){return e=n._text(e),o&&(e=(e+"").toLowerCase()),e===a}),n.selectedIndex<0&&(n._accessor(e),s.value=e,n._triggerCascade()),n._prev=s.value):n._setText(e)},toggle:function(e){this._toggle(e,!0)},value:function(e){var t=this,i=t.options,n=t.listView;if(void 0===e)return void 0===(e=t._accessor()||t.listView.value()[0])||null===e?"":e;t.trigger("set",{value:e}),e===i.value&&t.input.val()===i.text||(t._accessor(e),t._isFilterEnabled()&&n.bound()&&n.isFiltered()?t._clearFilter():t._fetchData(),n.value(e).done(function(){-1===t.selectedIndex&&(t._accessor(e),t.input.val(e),t._placeholder(!0)),t._old=t._accessor(),t._oldIndex=t.selectedIndex,t._prev=t.input.val(),"filter"===t._state&&(t._state="accept")}))},_click:function(e){var t=e.item;e.preventDefault(),this.trigger("select",{item:t})?this.close():(this._userTriggered=!0,this._select(t),this._blur())},_filter:function(e){var t=this,i=t.options,n=t.dataSource,r=i.ignoreCase;if(r&&(e=e.toLowerCase()),t.ul[0].firstChild){this.listView.focus(this._get(function(i){var n=t._text(i);if(void 0!==n)return(""==(n+="")||""!==e)&&(r&&(n=n.toLowerCase()),0===n.indexOf(e))}));var s=this.listView.focus();s&&(i.suggest&&t.suggest(s),this.open()),this.options.highlightFirst&&!e&&this.listView.focusFirst()}else n.one("change",function(){n.view()[0]&&t.search(e)}).fetch()},_input:function(){var t,i=this.element.removeClass("k-input")[0],n=i.accessKey,r=this.wrapper,s=i.name||"";s&&(s='name="'+s+'_input" '),(t=r.find("input.k-input"))[0]||(r.append('<span tabindex="-1" unselectable="on" class="k-dropdown-wrap k-state-default"><input '+s+'class="k-input" type="text" autocomplete="off"/><span tabindex="-1" unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(this.element),t=r.find("input.k-input")),t[0].style.cssText=i.style.cssText,t[0].title=i.title,i.maxLength>-1&&(t[0].maxLength=i.maxLength),t.addClass(i.className).val(this.options.text||i.value).css({width:"100%",height:i.style.height}).attr({role:"combobox","aria-expanded":!1}).show(),a&&t.attr("placeholder",this.options.placeholder),n&&(i.accessKey="",t[0].accessKey=n),this._focused=this.input=t,this._inputWrapper=e(r[0].firstChild),this._arrow=r.find(".k-icon").attr({role:"button",tabIndex:-1}),i.id&&this._arrow.attr("aria-controls",this.ul[0].id)},_keydown:function(e){var t=e.keyCode;this._last=t,clearTimeout(this._typingTimeout),this._typingTimeout=null,t==d.TAB||this._move(e)||this._search()},_placeholder:function(e){if(!a){var t,i=this.input,n=this.options.placeholder;if(n){if(t=this.value(),void 0===e&&(e=!t),i.toggleClass("k-readonly",e),!e){if(t)return;n=""}i.val(n),n||i[0]!==l()||o(i[0],0,0)}}},_search:function(){var e=this;e._typingTimeout=setTimeout(function(){var t=e.text();e._prev!==t&&(e._prev=t,"none"===e.options.filter&&e.listView.select(-1),e.search(t)),e._typingTimeout=null},e.options.delay)},_setText:function(e){this.input.val(e),this._prev=e},_wrapper:function(){var e=this.element,t=e.parent();t.is("span.k-widget")||((t=e.hide().wrap("<span />").parent())[0].style.cssText=e[0].style.cssText),this.wrapper=t.addClass("k-widget k-combobox k-header").addClass(e[0].className).css("display","")},_clearSelection:function(e,t){var i=e.value(),n=i&&-1===e.selectedIndex;-1==this.selectedIndex&&this.value()||(t||!i||n)&&(this.options.value="",this.value(""))},_preselect:function(e,t){this.input.val(t),this._accessor(e),this._old=this._accessor(),this._oldIndex=this.selectedIndex,this.listView.setValue(e),this._placeholder(),this._initialIndex=null,this._presetValue=!0}});n.plugin(g)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.multiselect",["kendo.list","kendo.mobile.scroller"],function(){return function(e,t){var i=window.kendo,n=i.ui,r=n.List,s=i.keys,o=i._activeElement,a=i.data.ObservableArray,l=e.proxy,d="k-state-focused",c="k-loading-hidden",u="k-state-disabled",h=".kendoMultiSelect",f="mouseenter"+h,p="mouseleave"+h,m=/"/g,g=e.isArray,v=["font-family","font-size","font-stretch","font-style","font-weight","letter-spacing","text-transform","line-height"],_=r.extend({init:function(t,n){var s;this.ns=h,r.fn.init.call(this,t,n),this._optionsMap={},this._customOptions={},this._wrapper(),this._tagList(),this._input(),this._textContainer(),this._loader(),this._tabindex(this.input),t=this.element.attr("multiple","multiple").hide(),(n=this.options).placeholder||(n.placeholder=t.data("placeholder")),(s=t.attr("id"))&&(this._tagID=s+"_tag_active",s+="_taglist",this.tagList.attr("id",s)),this._aria(s),this._dataSource(),this._ignoreCase(),this._popup(),this._tagTemplate(),this._initList(),this._reset(),this._enable(),this._placeholder(),n.autoBind?this.dataSource.fetch():n.value&&this._preselect(n.value),e(this.element).parents("fieldset").is(":disabled")&&this.enable(!1),i.notify(this)},options:{name:"MultiSelect",tagMode:"multiple",enabled:!0,autoBind:!0,autoClose:!0,highlightFirst:!0,dataTextField:"",dataValueField:"",filter:"startswith",ignoreCase:!0,minLength:0,delay:100,value:null,maxSelectedItems:null,placeholder:"",height:200,animation:{},virtual:!1,itemTemplate:"",tagTemplate:"",groupTemplate:"#:data#",fixedGroupTemplate:"#:data#"},events:["open","close","change","select","filtering","dataBinding","dataBound"],setDataSource:function(e){this.options.dataSource=e,this._state="",this._dataSource(),this.listView.setDataSource(this.dataSource),this.options.autoBind&&this.dataSource.fetch()},setOptions:function(e){var t=this._listOptions(e);r.fn.setOptions.call(this,e),this.listView.setOptions(t),this._accessors(),this._aria(this.tagList.attr("id")),this._tagTemplate()},currentTag:function(e){if(void 0===e)return this._currentTag;this._currentTag&&(this._currentTag.removeClass(d).removeAttr("id"),this.input.removeAttr("aria-activedescendant")),e&&(e.addClass(d).attr("id",this._tagID),this.input.attr("aria-activedescendant",this._tagID)),this._currentTag=e},dataItems:function(){return this.listView.selectedDataItems()},destroy:function(){var e=this.ns;clearTimeout(this._busy),clearTimeout(this._typingTimeout),this.wrapper.off(e),this.tagList.off(e),this.input.off(e),r.fn.destroy.call(this)},_activateItem:function(){r.fn._activateItem.call(this),this.currentTag(null)},_listOptions:function(t){var n=r.fn._listOptions.call(this,e.extend(t,{selectedItemChange:l(this._selectedItemChange,this),selectable:"multiple"})),s=this.options.itemTemplate||this.options.template,o=n.itemTemplate||s||n.template;return o||(o="#:"+i.expr(n.dataTextField,"data")+"#"),n.template=o,n},_setListValue:function(){r.fn._setListValue.call(this,this._initialValues.slice(0))},_listChange:function(e){"rebind"===this._state&&(this._state="",e.added=[]),this._selectValue(e.added,e.removed)},_selectedItemChange:function(e){var t,i,n=e.items;for(i=0;i<n.length;i++)t=n[i],this.tagList.children().eq(t.index).children("span:first").html(this.tagTextTemplate(t.item))},_wrapperMousedown:function(t){var n="input"!==t.target.nodeName.toLowerCase(),r=e(t.target),s=r.hasClass("k-select")||r.hasClass("k-icon");s&&(s=!r.closest(".k-select").children(".k-i-arrow-s").length),!n||s&&i.support.mobileOS||t.preventDefault(),s||(this.input[0]!==o()&&n&&this.input.focus(),0===this.options.minLength&&this.open())},_inputFocus:function(){this._placeholder(!1),this.wrapper.addClass(d)},_inputFocusout:function(){clearTimeout(this._typingTimeout),this.wrapper.removeClass(d),this._placeholder(!this.listView.selectedDataItems()[0],!0),this.close(),"filter"===this._state&&(this._state="accept",this.listView.skipUpdate(!0)),this.element.blur()},_removeTag:function(e){var t,i=this._state,n=e.index(),r=this.listView,s=r.value()[n],o=this._customOptions[s];void 0!==o||"accept"!==i&&"filter"!==i||(o=this._optionsMap[s]),void 0!==o?((t=this.element[0].children[o]).removeAttribute("selected"),t.selected=!1,r.removeAt(n),e.remove()):r.select(r.select()[n]),this.currentTag(null),this._change(),this._close()},_tagListClick:function(t){var i=e(t.currentTarget);i.children(".k-i-arrow-s").length||this._removeTag(i.closest("li"))},_editable:function(t){var i=t.disable,n=t.readonly,r=this.wrapper.off(h),s=this.tagList.off(h),o=this.element.add(this.input.off(h));n||i?(i?r.addClass(u):r.removeClass(u),o.attr("disabled",i).attr("readonly",n).attr("aria-disabled",i).attr("aria-readonly",n)):(r.removeClass(u).on("mouseenter.kendoMultiSelect mouseleave.kendoMultiSelect",this._toggleHover).on("mousedown"+h+" touchend"+h,l(this._wrapperMousedown,this)),this.input.on("keydown.kendoMultiSelect",l(this._keydown,this)).on("paste"+h,l(this._search,this)).on("focus"+h,l(this._inputFocus,this)).on("focusout"+h,l(this._inputFocusout,this)),o.removeAttr("disabled").removeAttr("readonly").attr("aria-disabled",!1).attr("aria-readonly",!1),s.on(f,"li",function(){e(this).addClass("k-state-hover")}).on(p,"li",function(){e(this).removeClass("k-state-hover")}).on("click.kendoMultiSelect","li.k-button .k-select",l(this._tagListClick,this)))},_close:function(){this.options.autoClose?this.close():this.popup.position()},_filterSource:function(e,t){t||(t=this._retrieveData),this._retrieveData=!1,r.fn._filterSource.call(this,e,t)},close:function(){this.popup.close()},open:function(){this._request&&(this._retrieveData=!1),this._retrieveData||!this.listView.bound()||"accept"===this._state?(this._open=!0,this._state="rebind",this.listView.skipUpdate(!0),this._filterSource()):this._allowSelection()&&(this.popup.open(),this._focusItem())},toggle:function(e){this[(e=void 0!==e?e:!this.popup.visible())?"open":"close"]()},refresh:function(){this.listView.refresh()},_angularItems:function(t){var i=this;i.angular(t,function(){return{elements:i.items(),data:e.map(i.dataSource.flatView(),function(e){return{dataItem:e}})}})},_listBound:function(){var e=this.dataSource.flatView(),t=this.listView.skip(),i=e.length;this._angularItems("compile"),this._render(e),this._resizePopup(),this._open&&(this._open=!1,this.toggle(i)),this.popup.position(),!this.options.highlightFirst||void 0!==t&&0!==t||this.listView.focusFirst(),this._touchScroller&&this._touchScroller.reset(),this._hideBusy(),this._makeUnselectable(),this.trigger("dataBound")},search:function(e){var t,i,n=this.options,r=n.ignoreCase,s=n.dataTextField,o=this.input.val();n.placeholder===o&&(o=""),clearTimeout(this._typingTimeout),(!(i=(e="string"==typeof e?e:o).length)||i>=n.minLength)&&(this._state="filter",this._open=!0,t={value:r?e.toLowerCase():e,field:s,operator:n.filter,ignoreCase:r},this._filterSource(t))},value:function(e){var t=this.listView,i=t.value().slice(),n=this.options.maxSelectedItems,r=t.bound()&&t.isFiltered();if(void 0===e)return i;e=this._normalizeValues(e),null!==n&&e.length>n&&(e=e.slice(0,n)),r&&this._clearFilter(),t.value(e),this._old=e,r||this._fetchData()},_preselect:function(t,n){g(t)||t instanceof i.data.ObservableArray||(t=[t]),(e.isPlainObject(t[0])||t[0]instanceof i.data.ObservableObject||!this.options.dataValueField)&&(this.dataSource.data(t),this.value(n||this._initialValues),this._retrieveData=!0)},_setOption:function(e,t){var i=this.element[0].children[this._optionsMap[e]];i&&(t?i.setAttribute("selected","selected"):i.removeAttribute("selected"),i.selected=t)},_fetchData:function(){var e=this,t=!!e.dataSource.view().length;0===e.listView.value().length||e._request||(e._retrieveData||!e._fetch&&!t)&&(e._fetch=!0,e._retrieveData=!1,e.dataSource.read().done(function(){e._fetch=!1}))},_isBound:function(){return this.listView.bound()&&!this._retrieveData},_dataSource:function(){var e=this.element,t=this.options,n=t.dataSource||{};(n=g(n)?{data:n}:n).select=e,n.fields=[{field:t.dataTextField},{field:t.dataValueField}],this.dataSource&&this._refreshHandler?this._unbindDataSource():(this._progressHandler=l(this._showBusy,this),this._errorHandler=l(this._hideBusy,this)),this.dataSource=i.data.DataSource.create(n).bind("progress",this._progressHandler).bind("error",this._errorHandler)},_reset:function(){var t=this,i=t.element,n=i.attr("form"),r=n?e("#"+n):i.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(t._initialValues),t._placeholder()})},t._form=r.on("reset",t._resetHandler))},_initValue:function(){var e=this.options.value||this.element.val();this._old=this._initialValues=this._normalizeValues(e)},_normalizeValues:function(t){var i=this;return null===t?t=[]:t&&e.isPlainObject(t)?t=[i._value(t)]:t&&e.isPlainObject(t[0])?t=e.map(t,function(e){return i._value(e)}):g(t)||t instanceof a||(t=[t]),t},_change:function(){var e=this.value();(function(e,t){var i;if(null===e&&null!==t||null!==e&&null===t)return!1;if((i=e.length)!==t.length)return!1;for(;i--;)if(e[i]!==t[i])return!1;return!0})(e,this._old)||(this._old=e.slice(),this.trigger("change"),this.element.trigger("change"))},_click:function(e){var t=e.item;e.preventDefault(),this.trigger("select",{item:t})?this._close():(this._select(t),this._change(),this._close())},_keydown:function(t){var n=this,r=t.keyCode,o=n._currentTag,a=n.listView.focus(),l=n.input.val(),d=i.support.isRtl(n.wrapper),c=n.popup.visible();if(r===s.DOWN){if(t.preventDefault(),!c)return n.open(),void(a||this.listView.focusFirst());a?(this.listView.focusNext(),this.listView.focus()||this.listView.focusLast()):this.listView.focusFirst()}else if(r===s.UP)c&&(a&&this.listView.focusPrev(),this.listView.focus()||n.close()),t.preventDefault();else if(r===s.LEFT&&!d||r===s.RIGHT&&d)l||(o=o?o.prev():e(n.tagList[0].lastChild))[0]&&n.currentTag(o);else if(r===s.RIGHT&&!d||r===s.LEFT&&d)!l&&o&&(o=o.next(),n.currentTag(o[0]?o:null));else if(r===s.ENTER&&c){if(a){if(n.trigger("select",{item:a}))return void n._close();n._select(a)}n._change(),n._close(),t.preventDefault()}else r===s.ESC?(c?t.preventDefault():n.currentTag(null),n.close()):r===s.HOME?c?this.listView.focusFirst():l||(o=n.tagList[0].firstChild)&&n.currentTag(e(o)):r===s.END?c?this.listView.focusLast():l||(o=n.tagList[0].lastChild)&&n.currentTag(e(o)):r!==s.DELETE&&r!==s.BACKSPACE||l?(clearTimeout(n._typingTimeout),setTimeout(function(){n._scale()}),n._search()):(r!==s.BACKSPACE||o||(o=e(n.tagList[0].lastChild)),o&&o[0]&&n._removeTag(o))},_hideBusy:function(){clearTimeout(this._busy),this.input.attr("aria-busy",!1),this._loading.addClass(c),this._request=!1,this._busy=null},_showBusyHandler:function(){this.input.attr("aria-busy",!0),this._loading.removeClass(c)},_showBusy:function(){this._request=!0,this._busy||(this._busy=setTimeout(l(this._showBusyHandler,this),100))},_placeholder:function(e,t){var n=this.input,r=o();void 0===e&&(e=!1,n[0]!==r&&(e=!this.listView.selectedDataItems()[0])),this._prev="",n.toggleClass("k-readonly",e).val(e?this.options.placeholder:""),n[0]!==r||t||i.caret(n[0],0,0),this._scale()},_scale:function(){var e,t=this.wrapper,i=t.width(),n=this._span.text(this.input.val());t.is(":visible")?e=n.width()+25:(n.appendTo(document.documentElement),i=e=n.width()+25,n.appendTo(t)),this.input.width(e>i?i:e)},_option:function(e,t,n){var r="<option";return void 0!==e&&(-1!==(e+="").indexOf('"')&&(e=e.replace(m,"&quot;")),r+=' value="'+e+'"'),n&&(r+=" selected"),r+=">",void 0!==t&&(r+=i.htmlEncode(t)),r+="</option>"},_render:function(e){var t,i,n,r,s=this.listView.selectedDataItems(),o=this.listView.value(),a=e.length,l="";o.length!==s.length&&(s=this._buildSelectedItems(o));var d={},c={};for(r=0;r<a;r++)i=e[r],n=this._value(i),-1!==(t=this._selectedItemIndex(n,s))&&s.splice(t,1),c[n]=r,l+=this._option(n,this._text(i),-1!==t);if(s.length)for(r=0;r<s.length;r++)i=s[r],d[n=this._value(i)]=a,c[n]=a,a+=1,l+=this._option(n,this._text(i),!0);this._customOptions=d,this._optionsMap=c,this.element.html(l)},_buildSelectedItems:function(e){for(var t,i=this.options.dataValueField,n=this.options.dataTextField,r=[],s=0;s<e.length;s++)(t={})[i]=e[s],t[n]=e[s],r.push(t);return r},_selectedItemIndex:function(e,t){for(var i=this._value,n=0;n<t.length;n++)if(e===i(t[n]))return n;return-1},_search:function(){var e=this;e._typingTimeout=setTimeout(function(){var t=e.input.val();e._prev!==t&&(e._prev=t,e.search(t))},e.options.delay)},_allowSelection:function(){var e=this.options.maxSelectedItems;return null===e||e>this.listView.value().length},_angularTagItems:function(t){var i=this;i.angular(t,function(){return{elements:i.tagList[0].children,data:e.map(i.dataItems(),function(e){return{dataItem:e}})}})},_selectValue:function(e,t){var i,n,r,s=this.value(),o=this.dataSource.total(),a=this.tagList,l=this._value;if(this._angularTagItems("cleanup"),"multiple"===this.options.tagMode){for(r=t.length-1;r>-1;r--)i=t[r],a[0].removeChild(a[0].children[i.position]),this._setOption(l(i.dataItem),!1);for(r=0;r<e.length;r++)n=e[r],a.append(this.tagTemplate(n.dataItem)),this._setOption(l(n.dataItem),!0)}else{for((!this._maxTotal||this._maxTotal<o)&&(this._maxTotal=o),a.html(""),s.length&&a.append(this.tagTemplate({values:s,dataItems:this.dataItems(),maxTotal:this._maxTotal,currentTotal:o})),r=t.length-1;r>-1;r--)this._setOption(l(t[r].dataItem),!1);for(r=0;r<e.length;r++)this._setOption(l(e[r].dataItem),!0)}this._angularTagItems("compile"),this._placeholder()},_select:function(e){"rebind"===this._state&&(this._state=""),this._allowSelection()&&(this.listView.select(e),this._placeholder(),"filter"===this._state&&(this._state="accept",this.listView.skipUpdate(!0)))},_input:function(){var t=this.element[0].accessKey,i=this._innerWrapper.children("input.k-input");i[0]||(i=e('<input class="k-input" style="width: 25px" />').appendTo(this._innerWrapper)),this.element.removeAttr("accesskey"),this._focused=this.input=i.attr({accesskey:t,autocomplete:"off",role:"listbox","aria-expanded":!1})},_tagList:function(){var t=this._innerWrapper.children("ul");t[0]||(t=e('<ul role="listbox" unselectable="on" class="k-reset"/>').appendTo(this._innerWrapper)),this.tagList=t},_tagTemplate:function(){var e,t=this.options,n=t.tagTemplate,r=t.dataSource,s="multiple"===t.tagMode;this.element[0].length&&!r&&(t.dataTextField=t.dataTextField||"text",t.dataValueField=t.dataValueField||"value"),e=s?i.template("#:"+i.expr(t.dataTextField,"data")+"#",{useWithBlock:!1}):i.template("#:values.length# item(s) selected"),this.tagTextTemplate=n=n?i.template(n):e,this.tagTemplate=function(e){return'<li class="k-button" unselectable="on"><span unselectable="on">'+n(e)+'</span><span unselectable="on" class="k-select"><span unselectable="on" class="k-icon '+(s?"k-i-close":"k-i-arrow-s")+'">'+(s?"delete":"open")+"</span></span></li>"}},_loader:function(){this._loading=e('<span class="k-icon k-loading '+c+'"></span>').insertAfter(this.input)},_textContainer:function(){var t=i.getComputedStyles(this.input[0],v);t.position="absolute",t.visibility="hidden",t.top=-3333,t.left=-3333,this._span=e("<span/>").css(t).appendTo(this.wrapper)},_wrapper:function(){var t=this.element,i=t.parent("span.k-multiselect");i[0]||((i=t.wrap('<div class="k-widget k-multiselect k-header" unselectable="on" />').parent())[0].style.cssText=t[0].style.cssText,i[0].title=t[0].title,e('<div class="k-multiselect-wrap k-floatwrap" unselectable="on" />').insertBefore(t)),this.wrapper=i.addClass(t[0].className).css("display",""),this._innerWrapper=e(i[0].firstChild)}});n.plugin(_)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.slider",["kendo.draganddrop"],function(){return function(e,t){function i(e,t,i){var n="";return n="increase"==t?i?"k-i-arrow-e":"k-i-arrow-n":i?"k-i-arrow-w":"k-i-arrow-s","<a class='k-button k-button-"+t+"'><span class='k-icon "+n+"' title='"+e[t+"ButtonTitle"]+"'>"+e[t+"ButtonTitle"]+"</span></a>"}function n(e){return function(t){return t+e}}function r(e){return function(){return e}}function s(e){return(e+"").replace(".",c.cultures.current.numberFormat["."])}function o(e){var t,i;return e=parseFloat(e,10),t=function(e){var t=e.toString(),i=0;return(t=t.split("."))[1]&&(i=t[1].length),i=i>10?10:i}(e),i=_.pow(10,t||0),_.round(e*i)/i}function a(e,i){var n=m(e.getAttribute(i));return null===n&&(n=t),n}function l(e){return typeof e!==V}function d(e){return 1e4*e}var c=window.kendo,u=c.ui.Widget,h=c.ui.Draggable,f=e.extend,p=c.format,m=c.parseFloat,g=e.proxy,v=e.isArray,_=Math,b=c.support,k=b.pointers,w=b.msPointers,y=".slider",x="touchstart.slider mousedown.slider",C=k?"pointerdown.slider":w?"MSPointerDown.slider":x,S="touchend.slider mouseup.slider",T=k?"pointerup":w?"MSPointerUp.slider":S,D="moveSelection",F="keydown.slider",E="click.slider",R="mouseover.slider",A="focus.slider",I="blur.slider",M=".k-draghandle",H=".k-slider-track",z=".k-tick",N="k-state-selected",P="k-state-focused",L="k-state-default",B="k-state-disabled",O="disabled",V="undefined",W=c.getTouches,U=u.extend({init:function(e,t){if(u.fn.init.call(this,e,t),t=this.options,this._distance=o(t.max-t.min),this._isHorizontal="horizontal"==t.orientation,this._isRtl=this._isHorizontal&&c.support.isRtl(e),this._position=this._isHorizontal?"left":"bottom",this._sizeFn=this._isHorizontal?"width":"height",this._outerSize=this._isHorizontal?"outerWidth":"outerHeight",t.tooltip.format=t.tooltip.enabled?t.tooltip.format||"{0}":"{0}",t.smallStep<=0)throw new Error("Kendo UI Slider smallStep must be a positive number.");this._createHtml(),this.wrapper=this.element.closest(".k-slider"),this._trackDiv=this.wrapper.find(H),this._setTrackDivWidth(),this._maxSelection=this._trackDiv[this._sizeFn](),this._sliderItemsInit(),this._reset(),this._tabindex(this.wrapper.find(M)),this[t.enabled?"enable":"disable"]();var i=c.support.isRtl(this.wrapper)?-1:1;this._keyMap={37:n(-1*i*t.smallStep),40:n(-t.smallStep),39:n(1*i*t.smallStep),38:n(+t.smallStep),35:r(t.max),36:r(t.min),33:n(+t.largeStep),34:n(-t.largeStep)},c.notify(this)},events:["change","slide"],options:{enabled:!0,min:0,max:10,smallStep:1,largeStep:5,orientation:"horizontal",tickPlacement:"both",tooltip:{enabled:!0,format:"{0}"}},_resize:function(){this._setTrackDivWidth(),this.wrapper.find(".k-slider-items").remove(),this._maxSelection=this._trackDiv[this._sizeFn](),this._sliderItemsInit(),this._refresh(),this.options.enabled&&this.enable(!0)},_sliderItemsInit:function(){var e=this.options,t=this._maxSelection/((e.max-e.min)/e.smallStep),i=this._calculateItemsWidth(_.floor(this._distance/e.smallStep));"none"!=e.tickPlacement&&t>=2&&(this._trackDiv.before(function(e,t){var i,n="<ul class='k-reset k-slider-items'>",r=_.floor(o(t/e.smallStep))+1;for(i=0;i<r;i++)n+="<li class='k-tick' role='presentation'>&nbsp;</li>";return n+="</ul>"}(e,this._distance)),this._setItemsWidth(i),this._setItemsTitle()),this._calculateSteps(i),"none"!=e.tickPlacement&&t>=2&&e.largeStep>=e.smallStep&&this._setItemsLargeTick()},getSize:function(){return c.dimensions(this.wrapper)},_setTrackDivWidth:function(){var e=2*parseFloat(this._trackDiv.css(this._isRtl?"right":this._position),10);this._trackDiv[this._sizeFn](this.wrapper[this._sizeFn]()-2-e)},_setItemsWidth:function(t){var i,n=this.options,r=t.length-1,s=this.wrapper.find(z),o=0,a=s.length,l=0;for(i=0;i<a-2;i++)e(s[i+1])[this._sizeFn](t[i]);if(this._isHorizontal?(e(s[0]).addClass("k-first")[this._sizeFn](t[r-1]),e(s[r]).addClass("k-last")[this._sizeFn](t[r])):(e(s[r]).addClass("k-first")[this._sizeFn](t[r]),e(s[0]).addClass("k-last")[this._sizeFn](t[r-1])),this._distance%n.smallStep!=0&&!this._isHorizontal){for(i=0;i<t.length;i++)l+=t[i];o=this._maxSelection-l,o+=parseFloat(this._trackDiv.css(this._position),10)+2,this.wrapper.find(".k-slider-items").css("padding-top",o)}},_setItemsTitle:function(){for(var t=this.options,i=this.wrapper.find(z),n=t.min,r=i.length,s=this._isHorizontal&&!this._isRtl?0:r-1,a=this._isHorizontal&&!this._isRtl?r:-1,l=this._isHorizontal&&!this._isRtl?1:-1;s-a!=0;s+=l)e(i[s]).attr("title",p(t.tooltip.format,o(n))),n+=t.smallStep},_setItemsLargeTick:function(){var t,i=this.options,n=this.wrapper.find(z),r=0;if(d(i.largeStep)%d(i.smallStep)==0||this._distance/i.largeStep>=3)for(this._isHorizontal||this._isRtl||(n=e.makeArray(n).reverse()),r=0;r<n.length;r++){t=e(n[r]);var s=o(d(this._values[r]-this.options.min));s%d(i.smallStep)==0&&s%d(i.largeStep)==0&&(t.addClass("k-tick-large").html("<span class='k-label'>"+t.attr("title")+"</span>"),0!==r&&r!==n.length-1&&t.css("line-height",t[this._sizeFn]()+"px"))}},_calculateItemsWidth:function(e){var t,i,n,r=this.options,s=parseFloat(this._trackDiv.css(this._sizeFn))+1,o=s/this._distance;for(this._distance/r.smallStep-_.floor(this._distance/r.smallStep)>0&&(s-=this._distance%r.smallStep*o),t=s/e,i=[],n=0;n<e-1;n++)i[n]=t;return i[e-1]=i[e]=t/2,this._roundWidths(i)},_roundWidths:function(e){var t,i=0,n=e.length;for(t=0;t<n;t++)i+=e[t]-_.floor(e[t]),e[t]=_.floor(e[t]);return i=_.round(i),this._addAdditionalSize(i,e)},_addAdditionalSize:function(e,t){if(0===e)return t;var i,n=parseFloat(t.length-1)/parseFloat(1==e?e:e-1);for(i=0;i<e;i++)t[parseInt(_.round(n*i),10)]+=1;return t},_calculateSteps:function(e){var t,i=this.options,n=i.min,r=0,s=_.ceil(this._distance/i.smallStep),a=1;if(s+=this._distance/i.smallStep%1==0?1:0,e.splice(0,0,2*e[s-2]),e.splice(s-1,1,2*e.pop()),this._pixelSteps=[r],this._values=[n],0!==s){for(;a<s;)r+=(e[a-1]+e[a])/2,this._pixelSteps[a]=r,n+=i.smallStep,this._values[a]=o(n),a++;t=this._distance%i.smallStep==0?s-1:s,this._pixelSteps[t]=this._maxSelection,this._values[t]=i.max,this._isRtl&&(this._pixelSteps.reverse(),this._values.reverse())}},_getValueFromPosition:function(e,t){var i,n=this.options,r=_.max(n.smallStep*(this._maxSelection/this._distance),0),s=0,a=r/2;if(this._isHorizontal?(s=e-t.startPoint,this._isRtl&&(s=this._maxSelection-s)):s=t.startPoint-e,this._maxSelection-(parseInt(this._maxSelection%r,10)-3)/2<s)return n.max;for(i=0;i<this._pixelSteps.length;i++)if(_.abs(this._pixelSteps[i]-s)-1<=a)return o(this._values[i])},_getFormattedValue:function(e,t){var i,n,r,s="",o=this.options.tooltip;return v(e)?(n=e[0],r=e[1]):t&&t.type&&(n=t.selectionStart,r=t.selectionEnd),t&&(i=t.tooltipTemplate),!i&&o.template&&(i=c.template(o.template)),v(e)||t&&t.type?s=i?i({selectionStart:n,selectionEnd:r}):(n=p(o.format,n))+" - "+(r=p(o.format,r)):(t&&(t.val=e),s=i?i({value:e}):p(o.format,e)),s},_getDraggableArea:function(){var e=c.getOffset(this._trackDiv);return{startPoint:this._isHorizontal?e.left:e.top+this._maxSelection,endPoint:this._isHorizontal?e.left+this._maxSelection:e.top}},_createHtml:function(){var e=this.element,t=this.options,n=e.find("input");2==n.length?(n.eq(0).prop("value",s(t.selectionStart)),n.eq(1).prop("value",s(t.selectionEnd))):e.prop("value",s(t.value)),e.wrap(function(e,t,i){var n=i?" k-slider-horizontal":" k-slider-vertical",r=e.style?e.style:t.attr("style"),s=t.attr("class")?" "+t.attr("class"):"",o="";return"bottomRight"==e.tickPlacement?o=" k-slider-bottomright":"topLeft"==e.tickPlacement&&(o=" k-slider-topleft"),r=r?" style='"+r+"'":"","<div class='k-widget k-slider"+n+s+"'"+r+"><div class='k-slider-wrap"+(e.showButtons?" k-slider-buttons":"")+o+"'></div></div>"}(t,e,this._isHorizontal)).hide(),t.showButtons&&e.before(i(t,"increase",this._isHorizontal)).before(i(t,"decrease",this._isHorizontal)),e.before(function(e,t){var i=t.is("input")?1:2;return"<div class='k-slider-track'><div class='k-slider-selection'>\x3c!-- --\x3e</div><a href='#' class='k-draghandle' title='"+(2==i?e.leftDragHandleTitle:e.dragHandleTitle)+"' role='slider' aria-valuemin='"+e.min+"' aria-valuemax='"+e.max+"' aria-valuenow='"+(i>1?e.selectionStart||e.min:e.value||e.min)+"'>Drag</a>"+(i>1?"<a href='#' class='k-draghandle' title='"+e.rightDragHandleTitle+"'role='slider' aria-valuemin='"+e.min+"' aria-valuemax='"+e.max+"' aria-valuenow='"+(e.selectionEnd||e.max)+"'>Drag</a>":"")+"</div>"}(t,e))},_focus:function(t){var i=t.target,n=this.value(),r=this._drag;r||(i==this.wrapper.find(M).eq(0)[0]?(r=this._firstHandleDrag,this._activeHandle=0):(r=this._lastHandleDrag,this._activeHandle=1),n=n[this._activeHandle]),e(i).addClass(P+" "+N),r&&(this._activeHandleDrag=r,r.selectionStart=this.options.selectionStart,r.selectionEnd=this.options.selectionEnd,r._updateTooltip(n))},_focusWithMouse:function(t){var i=this,n=(t=e(t)).is(M)?t.index():0;window.setTimeout(function(){i.wrapper.find(M)[2==n?1:0].focus()},1),i._setTooltipTimeout()},_blur:function(t){var i=this._activeHandleDrag;e(t.target).removeClass(P+" "+N),i&&(i._removeTooltip(),delete this._activeHandleDrag,delete this._activeHandle)},_setTooltipTimeout:function(){var e=this;e._tooltipTimeout=window.setTimeout(function(){var t=e._drag||e._activeHandleDrag;t&&t._removeTooltip()},300)},_clearTooltipTimeout:function(){window.clearTimeout(this._tooltipTimeout);var e=this._drag||this._activeHandleDrag;e&&e.tooltipDiv&&e.tooltipDiv.stop(!0,!1).css("opacity",1)},_reset:function(){var t=this.element,i=t.attr("form"),n=i?e("#"+i):t.closest("form");n[0]&&(this._form=n.on("reset",g(this._formResetHandler,this)))},destroy:function(){this._form&&this._form.off("reset",this._formResetHandler),u.fn.destroy.call(this)}}),q=U.extend({init:function(i,n){var r;i.type="text",n=f({},{value:a(i,"value"),min:a(i,"min"),max:a(i,"max"),smallStep:a(i,"step")},n),i=e(i),n&&n.enabled===t&&(n.enabled=!i.is("[disabled]")),U.fn.init.call(this,i,n),l((n=this.options).value)&&null!==n.value||(n.value=n.min,i.prop("value",s(n.min))),n.value=_.max(_.min(n.value,n.max),n.min),r=this.wrapper.find(M),this._selection=new q.Selection(r,this,n),this._drag=new q.Drag(r,"",this,n)},options:{name:"Slider",showButtons:!0,increaseButtonTitle:"Increase",decreaseButtonTitle:"Decrease",dragHandleTitle:"drag",tooltip:{format:"{0:#,#.##}"},value:null},enable:function(t){var i,n,r=this,s=r.options;if(r.disable(),!1!==t){if(r.wrapper.removeClass(B).addClass(L),r.wrapper.find("input").removeAttr(O),i=function(t){var i=W(t)[0];if(i){var n=r._isHorizontal?i.location.pageX:i.location.pageY,s=r._getDraggableArea(),o=e(t.target);o.hasClass("k-draghandle")?o.addClass(P+" "+N):(r._update(r._getValueFromPosition(n,s)),r._focusWithMouse(t.target),r._drag.dragstart(t),t.preventDefault())}},r.wrapper.find(".k-tick, "+H).on(C,i).end().on(C,function(){e(document.documentElement).one("selectstart",c.preventDefault)}).on(T,function(){r._drag._end()}),r.wrapper.find(M).attr("tabindex",0).on(S,function(){r._setTooltipTimeout()}).on(E,function(e){r._focusWithMouse(e.target),e.preventDefault()}).on(A,g(r._focus,r)).on(I,g(r._blur,r)),n=g(function(e){var t=r._nextValueByIndex(r._valueIndex+1*e);r._setValueInRange(t),r._drag._updateTooltip(t)},r),s.showButtons){var o=g(function(e,t){this._clearTooltipTimeout(),(1===e.which||b.touch&&0===e.which)&&(n(t),this.timeout=setTimeout(g(function(){this.timer=setInterval(function(){n(t)},60)},this),200))},r);r.wrapper.find(".k-button").on(S,g(function(e){this._clearTimer(),r._focusWithMouse(e.target)},r)).on(R,function(t){e(t.currentTarget).addClass("k-state-hover")}).on("mouseout.slider",g(function(t){e(t.currentTarget).removeClass("k-state-hover"),this._clearTimer()},r)).eq(0).on(x,g(function(e){o(e,1)},r)).click(!1).end().eq(1).on(x,g(function(e){o(e,-1)},r)).click(c.preventDefault)}r.wrapper.find(M).off(F,!1).on(F,g(this._keydown,r)),s.enabled=!0}},disable:function(){this.wrapper.removeClass(L).addClass(B),e(this.element).prop(O,O),this.wrapper.find(".k-button").off(x).on(x,c.preventDefault).off(S).on(S,c.preventDefault).off("mouseleave.slider").on("mouseleave.slider",c.preventDefault).off(R).on(R,c.preventDefault),this.wrapper.find(".k-tick, "+H).off(C).off(T),this.wrapper.find(M).attr("tabindex",-1).off(S).off(F).off(E).off(A).off(I),this.options.enabled=!1},_update:function(e){var t=this.value()!=e;this.value(e),t&&this.trigger("change",{value:this.options.value})},value:function(e){var t=this.options;if(e=o(e),isNaN(e))return t.value;e>=t.min&&e<=t.max&&t.value!=e&&(this.element.prop("value",s(e)),t.value=e,this._refreshAriaAttr(e),this._refresh())},_refresh:function(){this.trigger(D,{value:this.options.value})},_refreshAriaAttr:function(e){var t,i=this._drag;t=i&&i._tooltipDiv?i._tooltipDiv.text():this._getFormattedValue(e,null),this.wrapper.find(M).attr("aria-valuenow",e).attr("aria-valuetext",t)},_clearTimer:function(){clearTimeout(this.timeout),clearInterval(this.timer)},_keydown:function(e){e.keyCode in this._keyMap&&(this._clearTooltipTimeout(),this._setValueInRange(this._keyMap[e.keyCode](this.options.value)),this._drag._updateTooltip(this.value()),e.preventDefault())},_setValueInRange:function(e){var t=this.options;e=o(e),isNaN(e)?this._update(t.min):(e=_.max(_.min(e,t.max),t.min),this._update(e))},_nextValueByIndex:function(e){var t=this._values.length;return this._isRtl&&(e=t-1-e),this._values[_.max(0,_.min(e,t-1))]},_formResetHandler:function(){var e=this,t=e.options.min;setTimeout(function(){var i=e.element[0].value;e.value(""===i||isNaN(i)?t:i)})},destroy:function(){U.fn.destroy.call(this),this.wrapper.off(y).find(".k-button").off(y).end().find(M).off(y).end().find(".k-tick, "+H).off(y).end(),this._drag.draggable.destroy(),this._drag._removeTooltip(!0)}});q.Selection=function(e,t,i){function n(n){var r=n-i.min,s=t._valueIndex=_.ceil(o(r/i.smallStep)),a=parseInt(t._pixelSteps[s],10),l=t._trackDiv.find(".k-slider-selection"),d=parseInt(e[t._outerSize]()/2,10),c=t._isRtl?2:0;l[t._sizeFn](t._isRtl?t._maxSelection-a:a),e.css(t._position,a-d-c)}n(i.value),t.bind(["change","slide",D],function(e){n(parseFloat(e.value,10))})},q.Drag=function(e,t,i,n){this.owner=i,this.options=n,this.element=e,this.type=t,this.draggable=new h(e,{distance:0,dragstart:g(this._dragstart,this),drag:g(this.drag,this),dragend:g(this.dragend,this),dragcancel:g(this.dragcancel,this)}),e.click(!1)},q.Drag.prototype={dragstart:function(e){this.owner._activeDragHandle=this,this.draggable.userEvents.cancel(),this._dragstart(e),this.dragend()},_dragstart:function(t){var i=this.owner,n=this.options;n.enabled?(this.owner._activeDragHandle=this,i.element.off(R),i.wrapper.find("."+P).removeClass(P+" "+N),this.element.addClass(P+" "+N),e(document.documentElement).css("cursor","pointer"),this.dragableArea=i._getDraggableArea(),this.step=_.max(n.smallStep*(i._maxSelection/i._distance),0),this.type?(this.selectionStart=n.selectionStart,this.selectionEnd=n.selectionEnd,i._setZIndex(this.type)):this.oldVal=this.val=n.value,this._removeTooltip(!0),this._createTooltip()):t.preventDefault()},_createTooltip:function(){var t,i=this.owner,n=this.options.tooltip,r="",s=e(window);n.enabled&&(n.template&&(this.tooltipTemplate=c.template(n.template)),e(".k-slider-tooltip").remove(),this.tooltipDiv=e("<div class='k-widget k-tooltip k-slider-tooltip'>\x3c!-- --\x3e</div>").appendTo(document.body),r=i._getFormattedValue(this.val||i.value(),this),this.type||(t="k-callout-"+(i._isHorizontal?"s":"e"),this.tooltipInnerDiv="<div class='k-callout "+t+"'>\x3c!-- --\x3e</div>",r+=this.tooltipInnerDiv),this.tooltipDiv.html(r),this._scrollOffset={top:s.scrollTop(),left:s.scrollLeft()},this.moveTooltip())},drag:function(e){var t,i=this.owner,n=e.x.location,r=e.y.location,s=this.dragableArea.startPoint,o=this.dragableArea.endPoint;e.preventDefault(),i._isHorizontal?i._isRtl?this.val=this.constrainValue(n,s,o,n<o):this.val=this.constrainValue(n,s,o,n>=o):this.val=this.constrainValue(r,o,s,r<=o),this.oldVal!=this.val&&(this.oldVal=this.val,this.type?("firstHandle"==this.type?this.val<this.selectionEnd?this.selectionStart=this.val:this.selectionStart=this.selectionEnd=this.val:this.val>this.selectionStart?this.selectionEnd=this.val:this.selectionStart=this.selectionEnd=this.val,t={values:[this.selectionStart,this.selectionEnd],value:[this.selectionStart,this.selectionEnd]}):t={value:this.val},i.trigger("slide",t)),this._updateTooltip(this.val)},_updateTooltip:function(e){var t="";this.options.tooltip.enabled&&(this.tooltipDiv||this._createTooltip(),t=this.owner._getFormattedValue(o(e),this),this.type||(t+=this.tooltipInnerDiv),this.tooltipDiv.html(t),this.moveTooltip())},dragcancel:function(){return this.owner._refresh(),e(document.documentElement).css("cursor",""),this._end()},dragend:function(){var t=this.owner;return e(document.documentElement).css("cursor",""),this.type?t._update(this.selectionStart,this.selectionEnd):(t._update(this.val),this.draggable.userEvents._disposeAll()),this.draggable.userEvents.cancel(),this._end()},_end:function(){var e=this.owner;return e._focusWithMouse(this.element),e.element.on(R),!1},_removeTooltip:function(t){var i=this,n=i.owner;i.tooltipDiv&&n.options.tooltip.enabled&&n.options.enabled&&(t?(i.tooltipDiv.remove(),i.tooltipDiv=null):i.tooltipDiv.fadeOut("slow",function(){e(this).remove(),i.tooltipDiv=null}))},moveTooltip:function(){var t,i,n,r,s=this.owner,o=0,a=0,l=this.element,d=c.getOffset(l),u=e(window),h=this.tooltipDiv.find(".k-callout"),f=this.tooltipDiv.outerWidth(),p=this.tooltipDiv.outerHeight();this.type?(t=s.wrapper.find(M),d=c.getOffset(t.eq(0)),i=c.getOffset(t.eq(1)),s._isHorizontal?(o=i.top,a=d.left+(i.left-d.left)/2):(o=d.top+(i.top-d.top)/2,a=i.left),r=t.eq(0).outerWidth()+16):(o=d.top,a=d.left,r=l.outerWidth()+16),s._isHorizontal?(a-=parseInt((f-l[s._outerSize]())/2,10),o-=p+h.height()+8):(o-=parseInt((p-l[s._outerSize]())/2,10),a-=f+h.width()+8),s._isHorizontal?(o+=n=this._flip(o,p,r,u.outerHeight()+this._scrollOffset.top),a+=this._fit(a,f,u.outerWidth()+this._scrollOffset.left)):(n=this._flip(a,f,r,u.outerWidth()+this._scrollOffset.left),o+=this._fit(o,p,u.outerHeight()+this._scrollOffset.top),a+=n),n>0&&h&&(h.removeClass(),h.addClass("k-callout k-callout-"+(s._isHorizontal?"n":"w"))),this.tooltipDiv.css({top:o,left:a})},_fit:function(e,t,i){var n=0;return e+t>i&&(n=i-(e+t)),e<0&&(n=-e),n},_flip:function(e,t,i,n){var r=0;return e+t>n&&(r+=-(i+t)),e+r<0&&(r+=i+t),r},constrainValue:function(e,t,i,n){return t<e&&e<i?this.owner._getValueFromPosition(e,this.dragableArea):n?this.options.max:this.options.min}},c.ui.plugin(q);var $=U.extend({init:function(i,n){var r=e(i).find("input"),o=r.eq(0)[0],d=r.eq(1)[0];o.type="text",d.type="text",n&&n.showButtons&&(window.console&&window.console.warn("showbuttons option is not supported for the range slider, ignoring"),n.showButtons=!1),(n=f({},{selectionStart:a(o,"value"),min:a(o,"min"),max:a(o,"max"),smallStep:a(o,"step")},{selectionEnd:a(d,"value"),min:a(d,"min"),max:a(d,"max"),smallStep:a(d,"step")},n))&&n.enabled===t&&(n.enabled=!r.is("[disabled]")),U.fn.init.call(this,i,n),l((n=this.options).selectionStart)&&null!==n.selectionStart||(n.selectionStart=n.min,r.eq(0).prop("value",s(n.min))),l(n.selectionEnd)&&null!==n.selectionEnd||(n.selectionEnd=n.max,r.eq(1).prop("value",s(n.max)));var c=this.wrapper.find(M);this._selection=new $.Selection(c,this,n),this._firstHandleDrag=new q.Drag(c.eq(0),"firstHandle",this,n),this._lastHandleDrag=new q.Drag(c.eq(1),"lastHandle",this,n)},options:{name:"RangeSlider",leftDragHandleTitle:"drag",rightDragHandleTitle:"drag",tooltip:{format:"{0:#,#.##}"},selectionStart:null,selectionEnd:null},enable:function(t){var i,n=this,r=n.options;n.disable(),!1!==t&&(n.wrapper.removeClass(B).addClass(L),n.wrapper.find("input").removeAttr(O),i=function(t){var i=W(t)[0];if(i){var s,o,a,l=n._isHorizontal?i.location.pageX:i.location.pageY,d=n._getDraggableArea(),c=n._getValueFromPosition(l,d),u=e(t.target);if(u.hasClass("k-draghandle"))return n.wrapper.find("."+P).removeClass(P+" "+N),void u.addClass(P+" "+N);c<r.selectionStart?(s=c,o=r.selectionEnd,a=n._firstHandleDrag):c>n.selectionEnd?(s=r.selectionStart,o=c,a=n._lastHandleDrag):c-r.selectionStart<=r.selectionEnd-c?(s=c,o=r.selectionEnd,a=n._firstHandleDrag):(s=r.selectionStart,o=c,a=n._lastHandleDrag),a.dragstart(t),n._setValueInRange(s,o),n._focusWithMouse(a.element)}},n.wrapper.find(".k-tick, "+H).on(C,i).end().on(C,function(){e(document.documentElement).one("selectstart",c.preventDefault)}).on(T,function(){n._activeDragHandle&&n._activeDragHandle._end()}),n.wrapper.find(M).attr("tabindex",0).on(S,function(){n._setTooltipTimeout()}).on(E,function(e){n._focusWithMouse(e.target),e.preventDefault()}).on(A,g(n._focus,n)).on(I,g(n._blur,n)),n.wrapper.find(M).off(F,c.preventDefault).eq(0).on(F,g(function(e){this._keydown(e,"firstHandle")},n)).end().eq(1).on(F,g(function(e){this._keydown(e,"lastHandle")},n)),n.options.enabled=!0)},disable:function(){this.wrapper.removeClass(L).addClass(B),this.wrapper.find("input").prop(O,O),this.wrapper.find(".k-tick, "+H).off(C).off(T),this.wrapper.find(M).attr("tabindex",-1).off(S).off(F).off(E).off(A).off(I),this.options.enabled=!1},_keydown:function(e,t){var i,n,r,s=this.options.selectionStart,a=this.options.selectionEnd;e.keyCode in this._keyMap&&(this._clearTooltipTimeout(),"firstHandle"==t?(r=this._activeHandleDrag=this._firstHandleDrag,(s=this._keyMap[e.keyCode](s))>a&&(a=s)):(r=this._activeHandleDrag=this._lastHandleDrag,s>(a=this._keyMap[e.keyCode](a))&&(s=a)),this._setValueInRange(o(s),o(a)),i=Math.max(s,this.options.selectionStart),n=Math.min(a,this.options.selectionEnd),r.selectionEnd=Math.max(n,this.options.selectionStart),r.selectionStart=Math.min(i,this.options.selectionEnd),r._updateTooltip(this.value()[this._activeHandle]),e.preventDefault())},_update:function(e,t){var i=this.value(),n=i[0]!=e||i[1]!=t;this.value([e,t]),n&&this.trigger("change",{values:[e,t],value:[e,t]})},value:function(e){return e&&e.length?this._value(e[0],e[1]):this._value()},_value:function(e,t){var i=this.options,n=i.selectionStart,r=i.selectionEnd;if(isNaN(e)&&isNaN(t))return[n,r];e=o(e),t=o(t),e>=i.min&&e<=i.max&&t>=i.min&&t<=i.max&&e<=t&&(n==e&&r==t||(this.element.find("input").eq(0).prop("value",s(e)).end().eq(1).prop("value",s(t)),i.selectionStart=e,i.selectionEnd=t,this._refresh(),this._refreshAriaAttr(e,t)))},values:function(e,t){return v(e)?this._value(e[0],e[1]):this._value(e,t)},_refresh:function(){var e=this.options;this.trigger(D,{values:[e.selectionStart,e.selectionEnd],value:[e.selectionStart,e.selectionEnd]}),e.selectionStart==e.max&&e.selectionEnd==e.max&&this._setZIndex("firstHandle")},_refreshAriaAttr:function(e,t){var i,n=this.wrapper.find(M),r=this._activeHandleDrag;i=this._getFormattedValue([e,t],r),n.eq(0).attr("aria-valuenow",e),n.eq(1).attr("aria-valuenow",t),n.attr("aria-valuetext",i)},_setValueInRange:function(e,t){var i=this.options;e=_.max(_.min(e,i.max),i.min),t=_.max(_.min(t,i.max),i.min),e==i.max&&t==i.max&&this._setZIndex("firstHandle"),this._update(_.min(e,t),_.max(e,t))},_setZIndex:function(t){this.wrapper.find(M).each(function(i){e(this).css("z-index","firstHandle"==t?1-i:i)})},_formResetHandler:function(){var e=this,t=e.options;setTimeout(function(){var i=e.element.find("input"),n=i[0].value,r=i[1].value;e.values(""===n||isNaN(n)?t.min:n,""===r||isNaN(r)?t.max:r)})},destroy:function(){U.fn.destroy.call(this),this.wrapper.off(y).find(".k-tick, "+H).off(y).end().find(M).off(y),this._firstHandleDrag.draggable.destroy(),this._lastHandleDrag.draggable.destroy()}});$.Selection=function(e,t,i){function n(n){var r=(n=n||[])[0]-i.min,s=n[1]-i.min,a=_.ceil(o(r/i.smallStep)),l=_.ceil(o(s/i.smallStep)),d=t._pixelSteps[a],c=t._pixelSteps[l],u=parseInt(e.eq(0)[t._outerSize]()/2,10),h=t._isRtl?2:0;e.eq(0).css(t._position,d-u-h).end().eq(1).css(t._position,c-u-h),function(e,i){var n,r,s=t._trackDiv.find(".k-slider-selection");n=_.abs(e-i),s[t._sizeFn](n),t._isRtl?(r=_.max(e,i),s.css("right",t._maxSelection-r-1)):(r=_.min(e,i),s.css(t._position,r-1))}(d,c)}n(t.value()),t.bind(["change","slide",D],function(e){n(e.values)})},c.ui.plugin($)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.colorpicker",["kendo.core","kendo.color","kendo.popup","kendo.slider","kendo.userevents"],function(){return function(e,t,i){function n(e,t,i){(i=c(i))&&!i.equals(e.color())&&("change"==t&&(e._value=i),i=1!=i.a?i.toCssRgba():i.toCss(),e.trigger(t,{value:i}))}function r(e,t,i){var n=(e=Array.prototype.slice.call(e)).length,r=e.indexOf(t);return r<0?i<0?e[n-1]:e[0]:((r+=i)<0?r+=n:r%=n,e[r])}function s(e){e.preventDefault()}function o(e,t){return function(){return e.apply(t,arguments)}}var a=window.kendo,l=a.ui,d=l.Widget,c=a.parseColor,u=a.Color,h=a.keys,f="background-color",p="k-state-selected",m={apply:"Apply",cancel:"Cancel"},g=".kendoColorTools",v="click"+g,_="keydown"+g,b=a.support.browser,k=b.msie&&b.version<9,w=d.extend({init:function(e,t){var i;d.fn.init.call(this,e,t),e=this.element,t=this.options,this._value=t.value=c(t.value),this._tabIndex=e.attr("tabIndex")||0,(i=this._ariaId=t.ariaId)&&e.attr("aria-labelledby",i),t._standalone&&(this._triggerSelect=this._triggerChange)},options:{name:"ColorSelector",value:null,_standalone:!0},events:["change","select","cancel"],color:function(e){return void 0!==e&&(this._value=c(e),this._updateUI(this._value)),this._value},value:function(e){return(e=this.color(e))&&(e=this.options.opacity?e.toCssRgba():e.toCss()),e||null},enable:function(t){0===arguments.length&&(t=!0),e(".k-disabled-overlay",this.wrapper).remove(),t||this.wrapper.append("<div class='k-disabled-overlay'></div>"),this._onEnable(t)},_select:function(e,t){var i=this._value;e=this.color(e),t||(this.element.trigger("change"),e.equals(i)?this._standalone||this.trigger("cancel"):this.trigger("change",{value:this.value()}))},_triggerSelect:function(e){n(this,"select",e)},_triggerChange:function(e){n(this,"change",e)},destroy:function(){this.element&&this.element.off(g),this.wrapper&&this.wrapper.off(g).find("*").off(g),this.wrapper=null,d.fn.destroy.call(this)},_updateUI:e.noop,_selectOnHide:function(){return null},_cancel:function(){this.trigger("cancel")}}),y=w.extend({init:function(t,i){var n=this;w.fn.init.call(n,t,i),t=n.wrapper=n.element;var r=(i=n.options).palette;"websafe"==r?(r="FFFFFF,FFCCFF,FF99FF,FF66FF,FF33FF,FF00FF,CCFFFF,CCCCFF,CC99FF,CC66FF,CC33FF,CC00FF,99FFFF,99CCFF,9999FF,9966FF,9933FF,9900FF,FFFFCC,FFCCCC,FF99CC,FF66CC,FF33CC,FF00CC,CCFFCC,CCCCCC,CC99CC,CC66CC,CC33CC,CC00CC,99FFCC,99CCCC,9999CC,9966CC,9933CC,9900CC,FFFF99,FFCC99,FF9999,FF6699,FF3399,FF0099,CCFF99,CCCC99,CC9999,CC6699,CC3399,CC0099,99FF99,99CC99,999999,996699,993399,990099,FFFF66,FFCC66,FF9966,FF6666,FF3366,FF0066,CCFF66,CCCC66,CC9966,CC6666,CC3366,CC0066,99FF66,99CC66,999966,996666,993366,990066,FFFF33,FFCC33,FF9933,FF6633,FF3333,FF0033,CCFF33,CCCC33,CC9933,CC6633,CC3333,CC0033,99FF33,99CC33,999933,996633,993333,990033,FFFF00,FFCC00,FF9900,FF6600,FF3300,FF0000,CCFF00,CCCC00,CC9900,CC6600,CC3300,CC0000,99FF00,99CC00,999900,996600,993300,990000,66FFFF,66CCFF,6699FF,6666FF,6633FF,6600FF,33FFFF,33CCFF,3399FF,3366FF,3333FF,3300FF,00FFFF,00CCFF,0099FF,0066FF,0033FF,0000FF,66FFCC,66CCCC,6699CC,6666CC,6633CC,6600CC,33FFCC,33CCCC,3399CC,3366CC,3333CC,3300CC,00FFCC,00CCCC,0099CC,0066CC,0033CC,0000CC,66FF99,66CC99,669999,666699,663399,660099,33FF99,33CC99,339999,336699,333399,330099,00FF99,00CC99,009999,006699,003399,000099,66FF66,66CC66,669966,666666,663366,660066,33FF66,33CC66,339966,336666,333366,330066,00FF66,00CC66,009966,006666,003366,000066,66FF33,66CC33,669933,666633,663333,660033,33FF33,33CC33,339933,336633,333333,330033,00FF33,00CC33,009933,006633,003333,000033,66FF00,66CC00,669900,666600,663300,660000,33FF00,33CC00,339900,336600,333300,330000,00FF00,00CC00,009900,006600,003300,000000",i.columns=18):"basic"==r&&(r="000000,7f7f7f,880015,ed1c24,ff7f27,fff200,22b14c,00a2e8,3f48cc,a349a4,ffffff,c3c3c3,b97a57,ffaec9,ffc90e,efe4b0,b5e61d,99d9ea,7092be,c8bfe7"),"string"==typeof r&&(r=r.split(",")),e.isArray(r)&&(r=e.map(r,function(e){return c(e)})),n._selectedID=(i.ariaId||a.guid())+"_selected",t.addClass("k-widget k-colorpalette").attr("role","grid").attr("aria-readonly","true").append(e(n._template({colors:r,columns:i.columns,tileSize:i.tileSize,value:n._value,id:i.ariaId}))).on(v,".k-item",function(t){n._select(e(t.currentTarget).css(f))}).attr("tabIndex",n._tabIndex).on(_,o(n._keydown,n));var s,l,d=i.tileSize;if(d){if(/number|string/.test(typeof d))s=l=parseFloat(d);else{if("object"!=typeof d)throw new Error("Unsupported value for the 'tileSize' argument");s=parseFloat(d.width),l=parseFloat(d.height)}t.find(".k-item").css({width:s,height:l})}},focus:function(){this.wrapper.focus()},options:{name:"ColorPalette",columns:10,tileSize:null,palette:"basic"},_onEnable:function(e){e?this.wrapper.attr("tabIndex",this._tabIndex):this.wrapper.removeAttr("tabIndex")},_keydown:function(t){var i,n=this.wrapper.find(".k-item"),o=n.filter("."+p).get(0),a=t.keyCode;if(a==h.LEFT?i=r(n,o,-1):a==h.RIGHT?i=r(n,o,1):a==h.DOWN?i=r(n,o,this.options.columns):a==h.UP?i=r(n,o,-this.options.columns):a==h.ENTER?(s(t),o&&this._select(e(o).css(f))):a==h.ESC&&this._cancel(),i){s(t),this._current(i);try{var l=c(i.css(f));this._triggerSelect(l)}catch(e){}}},_current:function(t){this.wrapper.find("."+p).removeClass(p).attr("aria-selected",!1).removeAttr("id"),e(t).addClass(p).attr("aria-selected",!0).attr("id",this._selectedID),this.element.removeAttr("aria-activedescendant").attr("aria-activedescendant",this._selectedID)},_updateUI:function(t){var i=null;this.wrapper.find(".k-item").each(function(){var n=c(e(this).css(f));if(n&&n.equals(t))return i=this,!1}),this._current(i)},_template:a.template('<table class="k-palette k-reset" role="presentation"><tr role="row"># for (var i = 0; i < colors.length; ++i) { ## var selected = colors[i].equals(value); ## if (i && i % columns == 0) { # </tr><tr role="row"> # } #<td role="gridcell" unselectable="on" style="background-color:#= colors[i].toCss() #"#= selected ? " aria-selected=true" : "" # #=(id && i === 0) ? "id=\\""+id+"\\" " : "" # class="k-item#= selected ? " '+p+'" : "" #" aria-label="#= colors[i].toCss() #"></td># } #</tr></table>')}),x=w.extend({init:function(t,i){var n=this;w.fn.init.call(n,t,i),i=n.options,t=n.element,n.wrapper=t.addClass("k-widget k-flatcolorpicker").append(n._template(i)),n._hueElements=e(".k-hsv-rectangle, .k-transparency-slider .k-slider-track",t),n._selectedColor=e(".k-selected-color-display",t),n._colorAsText=e("input.k-color-value",t),n._sliders(),n._hsvArea(),n._updateUI(n._value||c("#f00")),t.find("input.k-color-value").on(_,function(t){var i=this;if(t.keyCode==h.ENTER)try{var r=c(i.value),s=n.color();n._select(r,r.equals(s))}catch(t){e(i).addClass("k-state-error")}else n.options.autoupdate&&setTimeout(function(){var e=c(i.value,!0);e&&n._updateUI(e,!0)},10)}).end().on(v,".k-controls button.apply",function(){n._select(n._getHSV())}).on(v,".k-controls button.cancel",function(){n._updateUI(n.color()),n._cancel()}),k&&n._applyIEFilter()},destroy:function(){this._hueSlider.destroy(),this._opacitySlider&&this._opacitySlider.destroy(),this._hueSlider=this._opacitySlider=this._hsvRect=this._hsvHandle=this._hueElements=this._selectedColor=this._colorAsText=null,w.fn.destroy.call(this)},options:{name:"FlatColorPicker",opacity:!1,buttons:!1,input:!0,preview:!0,autoupdate:!0,messages:m},_applyIEFilter:function(){var e=this.element.find(".k-hue-slider .k-slider-track")[0],t=e.currentStyle.backgroundImage;t=t.replace(/^url\([\'\"]?|[\'\"]?\)$/g,""),e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t+"', sizingMethod='scale')"},_sliders:function(){function e(e){i._updateUI(i._getHSV(e.value,null,null,null))}function t(e){i._updateUI(i._getHSV(null,null,null,e.value/100))}var i=this,n=i.element;i._hueSlider=n.find(".k-hue-slider").kendoSlider({min:0,max:359,tickPlacement:"none",showButtons:!1,slide:e,change:e}).data("kendoSlider"),i._opacitySlider=n.find(".k-transparency-slider").kendoSlider({min:0,max:100,tickPlacement:"none",showButtons:!1,slide:t,change:t}).data("kendoSlider")},_hsvArea:function(){function e(e,i){var n=this.offset,r=e-n.left,s=i-n.top,o=this.width,a=this.height;r=r<0?0:r>o?o:r,s=s<0?0:s>a?a:s,t._svChange(r/o,1-s/a)}var t=this,i=t.element.find(".k-hsv-rectangle"),n=i.find(".k-draghandle").attr("tabIndex",0).on(_,o(t._keydown,t));t._hsvEvents=new a.UserEvents(i,{global:!0,press:function(t){this.offset=a.getOffset(i),this.width=i.width(),this.height=i.height(),n.focus(),e.call(this,t.x.location,t.y.location)},start:function(){i.addClass("k-dragging"),n.focus()},move:function(t){t.preventDefault(),e.call(this,t.x.location,t.y.location)},end:function(){i.removeClass("k-dragging")}}),t._hsvRect=i,t._hsvHandle=n},_onEnable:function(e){this._hueSlider.enable(e),this._opacitySlider&&this._opacitySlider.enable(e),this.wrapper.find("input").attr("disabled",!e);var t=this._hsvRect.find(".k-draghandle");e?t.attr("tabIndex",this._tabIndex):t.removeAttr("tabIndex")},_keydown:function(e){function t(t,i){var r=n._getHSV();r[t]+=i*(e.shiftKey?.01:.05),r[t]<0&&(r[t]=0),r[t]>1&&(r[t]=1),n._updateUI(r),s(e)}function i(t){var i=n._getHSV();i.h+=t*(e.shiftKey?1:5),i.h<0&&(i.h=0),i.h>359&&(i.h=359),n._updateUI(i),s(e)}var n=this;switch(e.keyCode){case h.LEFT:e.ctrlKey?i(-1):t("s",-1);break;case h.RIGHT:e.ctrlKey?i(1):t("s",1);break;case h.UP:t(e.ctrlKey&&n._opacitySlider?"a":"v",1);break;case h.DOWN:t(e.ctrlKey&&n._opacitySlider?"a":"v",-1);break;case h.ENTER:n._select(n._getHSV());break;case h.F2:n.wrapper.find("input.k-color-value").focus().select();break;case h.ESC:n._cancel()}},focus:function(){this._hsvHandle.focus()},_getHSV:function(e,t,i,n){var r=this._hsvRect,s=r.width(),o=r.height(),a=this._hsvHandle.position();return null==e&&(e=this._hueSlider.value()),null==t&&(t=a.left/s),null==i&&(i=1-a.top/o),null==n&&(n=this._opacitySlider?this._opacitySlider.value()/100:1),u.fromHSV(e,t,i,n)},_svChange:function(e,t){var i=this._getHSV(null,e,t,null);this._updateUI(i)},_updateUI:function(e,t){var i=this._hsvRect;e&&(this._colorAsText.removeClass("k-state-error"),this._selectedColor.css(f,e.toDisplay()),t||this._colorAsText.val(this._opacitySlider?e.toCssRgba():e.toCss()),this._triggerSelect(e),e=e.toHSV(),this._hsvHandle.css({left:e.s*i.width()+"px",top:(1-e.v)*i.height()+"px"}),this._hueElements.css(f,u.fromHSV(e.h,1,1,1).toCss()),this._hueSlider.value(e.h),this._opacitySlider&&this._opacitySlider.value(100*e.a))},_selectOnHide:function(){return this.options.buttons?null:this._getHSV()},_template:a.template('# if (preview) { #<div class="k-selected-color"><div class="k-selected-color-display"><input class="k-color-value" #= !data.input ? \'style="visibility: hidden;"\' : "" #></div></div># } #<div class="k-hsv-rectangle"><div class="k-hsv-gradient"></div><div class="k-draghandle"></div></div><input class="k-hue-slider" /># if (opacity) { #<input class="k-transparency-slider" /># } ## if (buttons) { #<div unselectable="on" class="k-controls"><button class="k-button k-primary apply">#: messages.apply #</button> <button class="k-button cancel">#: messages.cancel #</button></div># } #')}),C=d.extend({init:function(t,i){var n=this;d.fn.init.call(n,t,i),i=n.options;var r=(t=n.element).attr("value")||t.val();r=c(r||i.value,!0),n._value=i.value=r;var s=n.wrapper=e(n._template(i));if(t.hide().after(s),t.is("input")){t.appendTo(s);var o=t.closest("label"),a=t.attr("id");a&&(o=o.add('label[for="'+a+'"]')),o.click(function(e){n.open(),e.preventDefault()})}n._tabIndex=t.attr("tabIndex")||0,n.enable(!t.attr("disabled"));var l=t.attr("accesskey");l&&(t.attr("accesskey",null),s.attr("accesskey",l)),n.bind("activate",function(e){e.isDefaultPrevented()||n.toggle()}),n._updateUI(r)},destroy:function(){this.wrapper.off(g).find("*").off(g),this._popup&&(this._selector.destroy(),this._popup.destroy()),this._selector=this._popup=this.wrapper=null,d.fn.destroy.call(this)},enable:function(e){var t=this,i=t.wrapper,n=i.children(".k-picker-wrap"),r=n.find(".k-select");0===arguments.length&&(e=!0),t.element.attr("disabled",!e),i.attr("aria-disabled",!e),r.off(g).on("mousedown"+g,s),i.addClass("k-state-disabled").removeAttr("tabIndex").add("*",i).off(g),e&&i.removeClass("k-state-disabled").attr("tabIndex",t._tabIndex).on("mouseenter"+g,function(){n.addClass("k-state-hover")}).on("mouseleave"+g,function(){n.removeClass("k-state-hover")}).on("focus"+g,function(){n.addClass("k-state-focused")}).on("blur"+g,function(){n.removeClass("k-state-focused")}).on(_,o(t._keydown,t)).on(v,".k-select",o(t.toggle,t)).on(v,t.options.toolIcon?".k-tool-icon":".k-selected-color",function(){t.trigger("activate")})},_template:a.template('<span role="textbox" aria-haspopup="true" class="k-widget k-colorpicker k-header"><span class="k-picker-wrap k-state-default"># if (toolIcon) { #<span class="k-tool-icon #= toolIcon #"><span class="k-selected-color"></span></span># } else { #<span class="k-selected-color"></span># } #<span class="k-select" unselectable="on"><span class="k-icon k-i-arrow-s" unselectable="on"></span></span></span></span>'),options:{name:"ColorPicker",palette:null,columns:10,toolIcon:null,value:null,messages:m,opacity:!1,buttons:!0,preview:!0,ARIATemplate:'Current selected color is #=data || ""#'},events:["activate","change","select","open","close"],open:function(){this._getPopup().open()},close:function(){this._getPopup().close()},toggle:function(){this._getPopup().toggle()},color:w.fn.color,value:w.fn.value,_select:w.fn._select,_triggerSelect:w.fn._triggerSelect,_isInputTypeColor:function(){var e=this.element[0];return/^input$/i.test(e.tagName)&&/^color$/i.test(e.type)},_updateUI:function(e){var t="";e&&(t=this._isInputTypeColor()||1==e.a?e.toCss():e.toCssRgba(),this.element.val(t)),this._ariaTemplate||(this._ariaTemplate=a.template(this.options.ARIATemplate)),this.wrapper.attr("aria-label",this._ariaTemplate(t)),this._triggerSelect(e),this.wrapper.find(".k-selected-color").css(f,e?e.toDisplay():"transparent")},_keydown:function(e){var t=e.keyCode;this._getPopup().visible()?(t==h.ESC?this._selector._cancel():this._selector._keydown(e),s(e)):t!=h.ENTER&&t!=h.DOWN||(this.open(),s(e))},_getPopup:function(){var t=this,i=t._popup;if(!i){var n,r=t.options;n=r.palette?y:x,r._standalone=!1,delete r.select,delete r.change,delete r.cancel;var s=a.guid(),o=t._selector=new n(e('<div id="'+s+'"/>').appendTo(document.body),r);t.wrapper.attr("aria-owns",s),t._popup=i=o.wrapper.kendoPopup({anchor:t.wrapper,adjustSize:{width:5,height:0}}).data("kendoPopup"),o.bind({select:function(e){t._updateUI(c(e.value))},change:function(){t._select(o.color()),t.close()},cancel:function(){t.close()}}),i.bind({close:function(e){if(t.trigger("close"))e.preventDefault();else{t.wrapper.children(".k-picker-wrap").removeClass("k-state-focused");var i=o._selectOnHide();i?t._select(i):(t.wrapper.focus(),t._updateUI(t.color()))}},open:function(e){t.trigger("open")?e.preventDefault():t.wrapper.children(".k-picker-wrap").addClass("k-state-focused")},activate:function(){o._select(t.color(),!0),o.focus(),t.wrapper.children(".k-picker-wrap").addClass("k-state-focused")}})}return i}});l.plugin(y),l.plugin(x),l.plugin(C)}(jQuery,parseInt),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.numerictextbox",["kendo.core","kendo.userevents"],function(){return function(e,t){function i(e,t){return'<span unselectable="on" class="k-link"><span unselectable="on" class="k-icon k-i-arrow-'+e+'" title="'+t+'">'+t+"</span></span>"}var n=window.kendo,r=n.caret,s=n.keys,o=n.ui,a=o.Widget,l=n._activeElement,d=n._extractFormat,c=n.parseFloat,u=n.support.placeholder,h=n.getCulture,f=n._round,p=".kendoNumericTextBox",m="mouseenter"+p+" mouseleave.kendoNumericTextBox",g="k-state-default",v="k-state-selected",_="k-state-disabled",b=/^(-)?(\d*)$/,k=e.proxy,w=e.extend,y=a.extend({init:function(t,i){var r,s,o,l,c=this,u=i&&void 0!==i.step;a.fn.init.call(c,t,i),i=c.options,t=c.element.on("focusout"+p,k(c._focusout,c)).attr("role","spinbutton"),i.placeholder=i.placeholder||t.attr("placeholder"),c._initialOptions=w({},i),c._reset(),c._wrapper(),c._arrows(),c._input(),n.support.mobileOS?c._text.on("touchend"+p+" focus"+p,function(){c._toggleText(!1),t.focus()}):c._text.on("focus"+p,k(c._click,c)),r=c.min(t.attr("min")),s=c.max(t.attr("max")),o=c._parse(t.attr("step")),null===i.min&&null!==r&&(i.min=r),null===i.max&&null!==s&&(i.max=s),u||null===o||(i.step=o),t.attr("aria-valuemin",i.min).attr("aria-valuemax",i.max),i.format=d(i.format),l=i.value,c.value(null!==l?l:t.val()),t.is("[disabled]")||e(c.element).parents("fieldset").is(":disabled")?c.enable(!1):c.readonly(t.is("[readonly]")),n.notify(c)},options:{name:"NumericTextBox",decimals:null,min:null,max:null,value:null,step:1,culture:"",format:"n",spinners:!0,placeholder:"",upArrowText:"Increase value",downArrowText:"Decrease value"},events:["change","spin"],_editable:function(e){var t=this,i=t.element,n=e.disable,r=e.readonly,s=t._text.add(i),o=t._inputWrapper.off(m);t._toggleText(!0),t._upArrowEventHandler.unbind("press"),t._downArrowEventHandler.unbind("press"),i.off("keydown"+p).off("keypress"+p).off("paste"+p),r||n?(o.addClass(n?_:g).removeClass(n?g:_),s.attr("disabled",n).attr("readonly",r).attr("aria-disabled",n).attr("aria-readonly",r)):(o.addClass(g).removeClass(_).on(m,t._toggleHover),s.removeAttr("disabled").removeAttr("readonly").attr("aria-disabled",!1).attr("aria-readonly",!1),t._upArrowEventHandler.bind("press",function(e){e.preventDefault(),t._spin(1),t._upArrow.addClass(v)}),t._downArrowEventHandler.bind("press",function(e){e.preventDefault(),t._spin(-1),t._downArrow.addClass(v)}),t.element.on("keydown"+p,k(t._keydown,t)).on("keypress"+p,k(t._keypress,t)).on("paste"+p,k(t._paste,t)))},readonly:function(e){this._editable({readonly:void 0===e||e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=void 0===e||e)})},destroy:function(){this.element.add(this._text).add(this._upArrow).add(this._downArrow).add(this._inputWrapper).off(p),this._upArrowEventHandler.destroy(),this._downArrowEventHandler.destroy(),this._form&&this._form.off("reset",this._resetHandler),a.fn.destroy.call(this)},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},step:function(e){return this._option("step",e)},value:function(e){if(void 0===e)return this._value;(e=this._parse(e))===this._adjust(e)&&(this._update(e),this._old=this._value)},focus:function(){this._focusin()},_adjust:function(e){var t=this.options,i=t.min,n=t.max;return null===e?e:(null!==i&&e<i?e=i:null!==n&&e>n&&(e=n),e)},_arrows:function(){var t,r=this,s=function(){clearTimeout(r._spinning),t.removeClass(v)},o=r.options,a=o.spinners,l=r.element;(t=l.siblings(".k-icon"))[0]||(t=e(i("n",o.upArrowText)+i("s",o.downArrowText)).insertAfter(l)).wrapAll('<span class="k-select"/>'),a||(t.parent().toggle(a),r._inputWrapper.addClass("k-expand-padding")),r._upArrow=t.eq(0),r._upArrowEventHandler=new n.UserEvents(r._upArrow,{release:s}),r._downArrow=t.eq(1),r._downArrowEventHandler=new n.UserEvents(r._downArrow,{release:s})},_blur:function(){this._toggleText(!0),this._change(this.element.val())},_click:function(e){var t=this;clearTimeout(t._focusing),t._focusing=setTimeout(function(){var i,n,s,o=e.target,a=r(o)[0],l=o.value.substring(0,a),d=t._format(t.options.format),c=d[","],u=0;c&&(n=new RegExp("\\"+c,"g"),s=new RegExp("([\\d\\"+c+"]+)(\\"+d["."]+")?(\\d+)?")),s&&(i=s.exec(l)),i&&(u=i[0].replace(n,"").length,-1!=l.indexOf("(")&&t._value<0&&u++),t._focusin(),r(t.element[0],u)})},_change:function(e){this._update(e),e=this._value,this._old!=e&&(this._old=e,this._typing||this.element.trigger("change"),this.trigger("change")),this._typing=!1},_culture:function(e){return e||h(this.options.culture)},_focusin:function(){this._inputWrapper.addClass("k-state-focused"),this._toggleText(!1),this.element[0].focus()},_focusout:function(){clearTimeout(this._focusing),this._inputWrapper.removeClass("k-state-focused").removeClass("k-state-hover"),this._blur()},_format:function(e,t){var i=this._culture(t).numberFormat;return(e=e.toLowerCase()).indexOf("c")>-1?i=i.currency:e.indexOf("p")>-1&&(i=i.percent),i},_input:function(){var t,i=this.element.addClass("k-input").show()[0],n=i.accessKey;(t=this.wrapper.find(".k-formatted-value"))[0]||(t=e('<input type="text"/>').insertBefore(i).addClass("k-formatted-value"));try{i.setAttribute("type","text")}catch(e){i.type="text"}t[0].tabIndex=i.tabIndex,t[0].style.cssText=i.style.cssText,t[0].title=i.title,t.prop("placeholder",this.options.placeholder),n&&(t.attr("accesskey",n),i.accessKey=""),this._text=t.addClass(i.className)},_keydown:function(e){var t=e.keyCode;this._key=t,t==s.DOWN?this._step(-1):t==s.UP?this._step(1):t==s.ENTER?this._change(this.element.val()):this._typing=!0},_keypress:function(e){if(0!==e.which&&!e.metaKey&&!e.ctrlKey&&e.keyCode!==s.BACKSPACE&&e.keyCode!==s.ENTER){var t,i=this.options.min,n=this.element,o=r(n),a=o[0],l=o[1],d=String.fromCharCode(e.which),c=this._format(this.options.format),u=this._key===s.NUMPAD_DOT,h=n.val();u&&(d=c["."]),h=h.substring(0,a)+d+h.substring(l),(t=this._numericRegex(c).test(h))&&u?(n.val(h),r(n,a+d.length),e.preventDefault()):(null!==i&&i>=0&&"-"===h.charAt(0)||!t)&&e.preventDefault(),this._key=0}},_numericRegex:function(e){var t=e["."],i=this.options.decimals;return"."===t&&(t="\\"+t),null===i&&(i=e.decimals),0===i?b:(this._separator!==t&&(this._separator=t,this._floatRegExp=new RegExp("^(-)?(((\\d+("+t+"\\d*)?)|("+t+"\\d*)))?$")),this._floatRegExp)},_paste:function(e){var t=this,i=e.target,n=i.value;setTimeout(function(){null===t._parse(i.value)&&t._update(n)})},_option:function(e,t){var i=this.options;if(void 0===t)return i[e];((t=this._parse(t))||"step"!==e)&&(i[e]=t,this.element.attr("aria-value"+e,t).attr(e,t))},_spin:function(e,t){var i=this;t=t||500,clearTimeout(i._spinning),i._spinning=setTimeout(function(){i._spin(e,50)},t),i._step(e)},_step:function(e){var t=this.element,i=this._parse(t.val())||0;l()!=t[0]&&this._focusin(),i+=this.options.step*e,this._update(this._adjust(i)),this._typing=!1,this.trigger("spin")},_toggleHover:function(t){e(t.currentTarget).toggleClass("k-state-hover","mouseenter"===t.type)},_toggleText:function(e){this._text.toggle(e),this.element.toggle(!e)},_parse:function(e,t){return c(e,this._culture(t),this.options.format)},_update:function(e){var t,i=this.options,r=i.format,s=i.decimals,o=this._culture(),a=this._format(r,o);null===s&&(s=a.decimals),(t=null!==(e=this._parse(e,o)))&&(e=parseFloat(f(e,s))),this._value=e=this._adjust(e),this._placeholder(n.toString(e,r,o)),t?(-1!==(e=e.toString()).indexOf("e")&&(e=f(+e,s)),e=e.replace(".",a["."])):e="",this.element.val(e).attr("aria-valuenow",e)},_placeholder:function(e){this._text.val(e),u||e||this._text.val(this.options.placeholder)},_wrapper:function(){var t,i=this.element,n=i[0];(t=i.parents(".k-numerictextbox")).is("span.k-numerictextbox")||(t=(t=i.hide().wrap('<span class="k-numeric-wrap k-state-default" />').parent()).wrap("<span/>").parent()),t[0].style.cssText=n.style.cssText,n.style.width="",this.wrapper=t.addClass("k-widget k-numerictextbox").addClass(n.className).css("display",""),this._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,i=t.element,n=i.attr("form"),r=n?e("#"+n):i.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(i[0].value),t.max(t._initialOptions.max),t.min(t._initialOptions.min)})},t._form=r.on("reset",t._resetHandler))}});o.plugin(y)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.filtermenu",["kendo.datepicker","kendo.numerictextbox","kendo.dropdownlist","kendo.binder"],function(){return function(e,t){function i(t,n){t.filters&&(t.filters=e.grep(t.filters,function(e){return i(e,n),e.filters?e.filters.length:e.field!=n}))}function n(e){var t,i,n,r,s,o;if(e&&e.length)for(o=[],t=0,i=e.length;t<i;t++)s=""!==(n=e[t]).text?n.text||n.value||n:n.text,r=null==n.value?n.text||n:n.value,o[t]={text:s,value:r};return o}function r(t,i){t.filters&&(t.filters=e.grep(t.filters,function(e){return r(e,i),e.filters?e.filters.length:e.field==i&&"eq"==e.operator}))}function s(i){return"and"==i.logic&&i.filters.length>1?[]:i.filters?e.map(i.filters,function(e){return s(e)}):null!==i.value&&i.value!==t?[i.value]:[]}function o(e,i){for(var n=a.getter(i,!0),r=[],s=0,o={};s<e.length;){var l=e[s++],d=n(l);d===t||null===d||o.hasOwnProperty(d)||(r.push(l),o[d]=!0)}return r}var a=window.kendo,l=a.ui,d=e.proxy,c="kendoPopup",u=".kendoFilterMenu",h="Is equal to",f="Is not equal to",p={number:"numerictextbox",date:"datepicker"},m={string:"text",number:"number",date:"date"},g=a.isFunction,v=l.Widget,_=v.extend({init:function(t,i){var n,r,s,o,l=this,c="string";v.fn.init.call(l,t,i),n=l.operators=i.operators||{},t=l.element,(i=l.options).appendToElement||((s=t.addClass("k-with-icon k-filterable").find(".k-grid-filter"))[0]||(s=t.prepend('<a class="k-grid-filter" href="#"><span class="k-icon k-filter">'+i.messages.filter+"</span></a>").find(".k-grid-filter")),s.attr("tabindex",-1).on("click"+u,d(l._click,l))),l.link=s||e(),l.dataSource=k.create(i.dataSource),l.field=i.field||t.attr(a.attr("field")),l.model=l.dataSource.reader.model,l._parse=function(e){return null!=e?e+"":e},l.model&&l.model.fields&&(o=l.model.fields[l.field])&&(c=o.type||"string",o.parse&&(l._parse=d(o.parse,o))),i.values&&(c="enums"),l.type=c,n=n[c]||i.operators[c];for(r in n)break;l._defaultFilter=function(){return{field:l.field,operator:r||"eq",value:""}},l._refreshHandler=d(l.refresh,l),l.dataSource.bind("change",l._refreshHandler),i.appendToElement?l._init():l.refresh()},_init:function(){var t,i=this.options.ui,n=g(i);this.pane=this.options.pane,this.pane&&(this._isMobile=!0),n||(t=i||p[this.type]),this._isMobile?this._createMobileForm(t):this._createForm(t),this.form.on("submit"+u,d(this._submit,this)).on("reset"+u,d(this._reset,this)),n&&this.form.find(".k-textbox").removeClass("k-textbox").each(function(){i(e(this))}),this.form.find("["+a.attr("role")+"=numerictextbox]").removeClass("k-textbox").end().find("["+a.attr("role")+"=datetimepicker]").removeClass("k-textbox").end().find("["+a.attr("role")+"=timepicker]").removeClass("k-textbox").end().find("["+a.attr("role")+"=datepicker]").removeClass("k-textbox"),this.refresh(),this.trigger("init",{field:this.field,container:this.form}),a.cycleForm(this.form)},_createForm:function(t){var i=this,r=i.options,s=i.operators||{},o=i.type;s=s[o]||r.operators[o],i.form=e('<form class="k-filter-menu"/>').html(a.template("boolean"===o?'<div><div class="k-filter-help-text">#=messages.info#</div><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label><div><button type="submit" class="k-button k-primary">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>':'<div><div class="k-filter-help-text">#=messages.info#</div><select data-#=ns#bind="value: filters[0].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select data-#=ns#bind="value:filters[0].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#" data-#=ns#value-primitive="true"></select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}##if(extra){#<select class="k-filter-and" data-#=ns#bind="value: logic" data-#=ns#role="dropdownlist"><option value="and">#=messages.and#</option><option value="or">#=messages.or#</option></select><select data-#=ns#bind="value: filters[1].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select data-#=ns#bind="value:filters[1].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#" data-#=ns#value-primitive="true"></select>#}else{#<input data-#=ns#bind="value: filters[1].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""#/>#}##}#<div><button type="submit" class="k-button k-primary">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>')({field:i.field,format:r.format,ns:a.ns,messages:r.messages,extra:r.extra,operators:s,type:o,role:t,values:n(r.values)})),r.appendToElement?(i.element.append(i.form),i.popup=i.element.closest(".k-popup").data(c)):i.popup=i.form[c]({anchor:i.link,open:d(i._open,i),activate:d(i._activate,i),close:function(){i.options.closeCallback&&i.options.closeCallback(i.element)}}).data(c),i.form.on("keydown"+u,d(i._keydown,i))},_createMobileForm:function(t){var i=this,r=i.options,s=i.operators||{},o=i.type;s=s[o]||r.operators[o],i.form=e("<div />").html(a.template("boolean"===o?'<div data-#=ns#role="view" data-#=ns#init-widgets="false" data-#=ns#use-native-scrolling="true" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-cancel">#=messages.cancel#</button>#=title#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form class="k-filter-menu k-mobile-list"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#</span><ul><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label></li><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label></li></ul></li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#</button></li></ul></form></div>':'<div data-#=ns#role="view" data-#=ns#init-widgets="false" data-#=ns#use-native-scrolling="true" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-cancel">#=messages.cancel#</button>#=title#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form class="k-filter-menu k-mobile-list"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#</span><ul><li class="k-item"><label class="k-label">#=messages.operator#<select data-#=ns#bind="value: filters[0].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></label></li><li class="k-item"><label class="k-label">#=messages.value##if(values){#<select data-#=ns#bind="value:filters[0].value"><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#</label></li>#if(extra){#</ul><ul class="k-filter-help-text"><li><span class="k-link"></span><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="and" />#=messages.and#</label></li><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="or" />#=messages.or#</label></li></ul><ul class="k-filter-help-text"><li><span class="k-link"></span><li class="k-item"><label class="k-label">#=messages.operator#<select data-#=ns#bind="value: filters[1].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></label></li><li class="k-item"><label class="k-label">#=messages.value##if(values){#<select data-#=ns#bind="value:filters[1].value"><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input data-#=ns#bind="value:filters[1].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#</label></li>#}#</ul></li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#</button></li></ul></div></form></div>')({field:i.field,title:r.title||i.field,format:r.format,ns:a.ns,messages:r.messages,extra:r.extra,operators:s,type:o,role:t,useRole:!a.support.input.date&&"date"===o||"number"===o,inputType:m[o],values:n(r.values)})),i.view=i.pane.append(i.form.html()),i.form=i.view.element.find("form"),i.view.element.on("click",".k-submit",function(e){i.form.submit(),e.preventDefault()}).on("click",".k-cancel",function(e){i._closeForm(),e.preventDefault()})},refresh:function(){var e=this.dataSource.filter()||{filters:[],logic:"and"};this.filterModel=a.observable({logic:"and",filters:[this._defaultFilter(),this._defaultFilter()]}),this.form&&a.bind(this.form.children().first(),this.filterModel),this._bind(e)?this.link.addClass("k-state-active"):this.link.removeClass("k-state-active")},destroy:function(){v.fn.destroy.call(this),this.form&&(a.unbind(this.form),a.destroy(this.form),this.form.unbind(u),this.popup&&(this.popup.destroy(),this.popup=null),this.form=null),this.view&&(this.view.purge(),this.view=null),this.link.unbind(u),this._refreshHandler&&(this.dataSource.unbind("change",this._refreshHandler),this.dataSource=null),this.element=this.link=this._refreshHandler=this.filterModel=null},_bind:function(e){var t,i,n,r,s=e.filters,o=!1,a=0,l=this.filterModel;for(t=0,i=s.length;t<i;t++)(r=s[t]).field==this.field?(l.set("logic",e.logic),(n=l.filters[a])||(l.filters.push({field:this.field}),n=l.filters[a]),n.set("value",this._parse(r.value)),n.set("operator",r.operator),a++,o=!0):r.filters&&(o=o||this._bind(r));return o},_stripFilters:function(t){return e.grep(t,function(e){return""!==e.value&&null!=e.value||"isnull"===e.operator||"isnotnull"===e.operator||"isempty"===e.operator||"isnotempty"===e.operator})},_merge:function(e){var t,n,r,s=e.logic||"and",o=this._stripFilters(e.filters),a=this.dataSource.filter()||{filters:[],logic:"and"};for(i(a,this.field),n=0,r=o.length;n<r;n++)(t=o[n]).value=this._parse(t.value);return o.length&&(a.filters.length?(e.filters=o,"and"!==a.logic&&(a.filters=[{logic:a.logic,filters:a.filters}],a.logic="and"),o.length>1?a.filters.push(e):a.filters.push(o[0])):(a.filters=o,a.logic=s)),a},filter:function(e){if((e=this._merge(e)).filters.length){for(var t=0;t<e.filters.length;t++){var i=e.filters[t].value;i instanceof Date?e.filters[t].value=moment(i).format("YYYY-MM-DD"):i&&i.gregoriandate&&(e.filters[t].value=moment(i.gregoriandate).format("YYYY-MM-DD"))}this.dataSource.filter(e)}},clear:function(){var t=this,i=t.dataSource.filter()||{filters:[]};i.filters=e.grep(i.filters,function(i){return i.filters?(i.filters=function(t,i){return e.grep(t,function(t){return t.filters?(t.filters=e.grep(t.filters,function(e){return e.field!=i}),t.filters.length):t.field!=i})}(i.filters,t.field),i.filters.length):i.field!=t.field}),i.filters.length||(i=null),t.dataSource.filter(i)},_submit:function(e){e.preventDefault(),e.stopPropagation(),this.filter(this.filterModel.toJSON()),this._closeForm()},_reset:function(){this.clear(),this.options.search&&this.container.find("label").parent().show(),this._closeForm()},_closeForm:function(){this._isMobile?this.pane.navigate("",this.options.animations.right):this.popup.close()},_click:function(e){e.preventDefault(),e.stopPropagation(),this.popup||this.pane||this._init(),this._isMobile?this.pane.navigate(this.view,this.options.animations.left):this.popup.toggle()},_open:function(){var t;e(".k-filter-menu").not(this.form).each(function(){(t=e(this).data(c))&&t.close()})},_activate:function(){this.form.find(":kendoFocusable:first").focus()},_keydown:function(e){e.keyCode==a.keys.ESC&&this.popup.close()},events:["init"],options:{name:"FilterMenu",extra:!0,appendToElement:!1,type:"string",operators:{string:{eq:h,neq:f,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with",isnull:"Is null",isnotnull:"Is not null",isempty:"Is empty",isnotempty:"Is not empty"},number:{eq:h,neq:f,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than",isnull:"Is null",isnotnull:"Is not null"},date:{eq:h,neq:f,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before",isnull:"Is null",isnotnull:"Is not null"},enums:{eq:h,neq:f,isnull:"Is null",isnotnull:"Is not null"}},messages:{info:"Show items with value that:",isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",and:"And",or:"Or",selectValue:"-Select value-",operator:"Operator",value:"Value",cancel:"Cancel"},animations:{left:"slide",right:"slide:right"}}}),b=".kendoFilterMultiCheck",k=a.data.DataSource,w=v.extend({init:function(t,i){v.fn.init.call(this,t,i),i=this.options,this.element=e(t);var n=this.field=this.options.field||this.element.attr(a.attr("field")),r=i.checkSource;this._foreignKeyValues()?(this.checkSource=k.create(i.values),this.checkSource.fetch()):i.forceUnique?(delete(r=i.dataSource.options).pageSize,this.checkSource=k.create(r),this.checkSource.reader.data=function(e,t){return function(i){return o(e(i),t)}}(this.checkSource.reader.data,this.field)):this.checkSource=k.create(r),this.dataSource=i.dataSource,this.model=this.dataSource.reader.model,this._parse=function(e){return e+""},this.model&&this.model.fields&&(n=this.model.fields[this.field])&&("number"==n.type?this._parse=parseFloat:n.parse&&(this._parse=d(n.parse,n)),this.type=n.type||"string"),i.appendToElement?this._init():this._createLink(),this._refreshHandler=d(this.refresh,this),this.dataSource.bind("change",this._refreshHandler)},_createLink:function(){var e=this.element,t=e.addClass("k-with-icon k-filterable").find(".k-grid-filter");t[0]||(t=e.prepend('<a class="k-grid-filter" href="#"><span class="k-icon k-filter"/></a>').find(".k-grid-filter")),this._link=t.attr("tabindex",-1).on("click"+u,d(this._click,this))},_init:function(){var e=this,t=this.options.forceUnique,i=this.options;this.pane=i.pane,this.pane&&(this._isMobile=!0),this._createForm(),this._foreignKeyValues()?this.refresh():t&&!this.checkSource.options.serverPaging&&this.dataSource.data().length?(this.checkSource.data(o(this.dataSource.data(),this.field)),this.refresh()):(this._attachProgress(),this.checkSource.fetch(function(){e.refresh.call(e)})),this.options.forceUnique||(this.checkChangeHandler=function(){e.container.empty(),e.refresh()},this.checkSource.bind("change",this.checkChangeHandler)),this.form.on("keydown"+b,d(this._keydown,this)).on("submit"+b,d(this._filter,this)).on("reset"+b,d(this._reset,this)),this.trigger("init",{field:this.field,container:this.form})},_attachProgress:function(){var e=this;this._progressHandler=function(){l.progress(e.container,!0)},this._progressHideHandler=function(){l.progress(e.container,!1)},this.checkSource.bind("progress",this._progressHandler).bind("change",this._progressHideHandler)},_input:function(){var e=this;e._clearTypingTimeout(),e._typingTimeout=setTimeout(function(){e.search()},100)},_clearTypingTimeout:function(){this._typingTimeout&&(clearTimeout(this._typingTimeout),this._typingTimeout=null)},search:function(){var e=this.options.ignoreCase,t=this.searchTextBox[0].value,i=this.container.find("label");e&&(t=t.toLowerCase());var n=0;for(this.options.checkAll&&i.length&&(i[0].parentNode.style.display=t?"none":"",n++);n<i.length;){var r=i[n],s=r.textContent||r.innerText;e&&(s=s.toLowerCase()),r.parentNode.style.display=s.indexOf(t)>=0?"":"none",n++}},_activate:function(){this.form.find(":kendoFocusable:first").focus()},_createForm:function(){var t=this.options,i="";if(this._isMobile||(t.search&&(i+="<div class='k-textbox k-space-right'><input placeholder='"+t.messages.search+"'/><span class='k-icon k-font-icon k-i-search' /></div>"),i+="<ul class='k-reset k-multicheck-wrap'></ul>",t.messages.selectedItemsFormat&&(i+="<div class='k-filter-selected-items'>"+a.format(t.messages.selectedItemsFormat,0)+"</div>"),i+="<button type='submit' class='k-button k-primary'>"+t.messages.filter+"</button>",i+="<button type='reset' class='k-button'>"+t.messages.clear+"</button>",this.form=e('<form class="k-filter-menu"/>').html(i),this.container=this.form.find(".k-multicheck-wrap")),this._isMobile){var n=this;n.form=e("<div />").html(a.template('<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-cancel">#=messages.cancel#</button>#=title#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form class="k-filter-menu k-mobile-list">#if(search){#<div class=\'k-textbox k-space-right\'><input placeholder=\'#=messages.search#\'/><span class=\'k-icon k-font-icon k-i-search\' /></div>#}#<ul class="k-multicheck-wrap"></ul></li><li class="k-button-container">#if(messages.selectedItemsFormat){#<div class=\'k-filter-selected-items\'></div>#}#<button type="reset" class="k-button">#=messages.clear#</button></li></ul></form></div>')({field:n.field,title:t.title||n.field,ns:a.ns,messages:t.messages,search:t.search})),n.view=n.pane.append(n.form.html()),n.form=n.view.element.find("form");var r=this.view.element;this.container=r.find(".k-multicheck-wrap"),r.on("click",".k-submit",function(e){n.form.submit(),e.preventDefault()}).on("click",".k-cancel",function(e){n._closeForm(),e.preventDefault()})}else t.appendToElement?(this.popup=this.element.closest(".k-popup").data(c),this.element.append(this.form)):this.popup=this.form.kendoPopup({anchor:this._link,activate:d(this._activate,this)}).data(c);t.search&&(this.searchTextBox=this.form.find(".k-textbox > input"),this.searchTextBox.on("input",d(this._input,this)))},createCheckAllItem:function(){var t=this.options,i=a.template(t.itemTemplate({field:"all",mobile:this._isMobile})),n=e(i({all:t.messages.checkAll}));this.container.prepend(n),this.checkBoxAll=n.find(":checkbox").eq(0).addClass("k-check-all"),this.checkAllHandler=d(this.checkAll,this),this.checkBoxAll.on("change"+b,this.checkAllHandler)},updateCheckAllState:function(){if(this.options.messages.selectedItemsFormat&&this.form.find(".k-filter-selected-items").text(a.format(this.options.messages.selectedItemsFormat,this.container.find(":checked:not(.k-check-all)").length)),this.checkBoxAll){var e=this.container.find(":checkbox:not(.k-check-all)").length==this.container.find(":checked:not(.k-check-all)").length;this.checkBoxAll.prop("checked",e)}},refresh:function(e){var t=this.options.forceUnique,i=this.dataSource,n=this.getFilterArray();this._link&&this._link.toggleClass("k-state-active",0!==n.length),this.form&&(e&&t&&e.sender===i&&!i.options.serverPaging&&("itemchange"==e.action||"add"==e.action||"remove"==e.action||i.options.autoSync&&"sync"===e.action)&&!this._foreignKeyValues()&&(this.checkSource.data(o(this.dataSource.data(),this.field)),this.container.empty()),this.container.is(":empty")&&this.createCheckBoxes(),this.checkValues(n),this.trigger("refresh"))},getFilterArray:function(){var t=e.extend(!0,{},{filters:[],logic:"and"},this.dataSource.filter());return r(t,this.field),s(t)},createCheckBoxes:function(){var e,t=this.options,i={field:this.field,format:t.format,mobile:this._isMobile,type:this.type};this.options.forceUnique?this._foreignKeyValues()?(e=this.checkSource.data(),i.valueField="value",i.field="text"):e=this.checkSource.data():e=this.checkSource.view();var n=a.template(t.itemTemplate(i)),r=a.render(n,e);t.checkAll&&this.createCheckAllItem(),this.container.on("change"+b,":checkbox",d(this.updateCheckAllState,this)),this.container.append(r)},checkAll:function(){var e=this.checkBoxAll.is(":checked");this.container.find(":checkbox").prop("checked",e)},checkValues:function(t){var i=this;e(e.grep(this.container.find(":checkbox").prop("checked",!1),function(n){var r=!1;if(!e(n).is(".k-check-all"))for(var s=i._parse(e(n).val()),o=0;o<t.length;o++)if(r="date"==i.type?t[o].getTime()==s.getTime():t[o]==s)return r})).prop("checked",!0),this.updateCheckAllState()},_filter:function(t){t.preventDefault(),t.stopPropagation();var i={logic:"or"},n=this;i.filters=e.map(this.form.find(":checkbox:checked:not(.k-check-all)"),function(t){return{value:e(t).val(),operator:"eq",field:n.field}}),(i=this._merge(i)).filters.length&&this.dataSource.filter(i),this._closeForm()},_stripFilters:function(t){return e.grep(t,function(e){return null!=e.value})},_foreignKeyValues:function(){var e=this.options;return e.values&&!e.checkSource},destroy:function(){v.fn.destroy.call(this),this.form&&(a.unbind(this.form),a.destroy(this.form),this.form.unbind(b),this.popup&&(this.popup.destroy(),this.popup=null),this.form=null,this.container&&(this.container.unbind(b),this.container=null),this.checkBoxAll&&this.checkBoxAll.unbind(b)),this.view&&(this.view.purge(),this.view=null),this._link&&this._link.unbind(u),this._refreshHandler&&(this.dataSource.unbind("change",this._refreshHandler),this.dataSource=null),this.checkChangeHandler&&this.checkSource.unbind("change",this.checkChangeHandler),this._progressHandler&&this.checkSource.unbind("progress",this._progressHandler),this._progressHideHandler&&this.checkSource.unbind("change",this._progressHideHandler),this._clearTypingTimeout(),this.searchTextBox=null,this.element=this.checkSource=this.container=this.checkBoxAll=this._link=this._refreshHandler=this.checkAllHandler=null},options:{name:"FilterMultiCheck",itemTemplate:function(e){var i=e.field,n=e.format,r=e.valueField,s=e.mobile,o="";return r===t&&(r=i),"date"==e.type&&(o=":yyyy-MM-ddTHH:mm:sszzz"),"<li class='k-item'><label class='k-label'><input type='checkbox' class='"+(s?"k-check":"")+"'  value='#:kendo.format('{0"+o+"}',"+r+")#'/>#:kendo.format('"+(n||"{0}")+"', "+i+")#</label></li>"},checkAll:!0,search:!1,ignoreCase:!0,appendToElement:!1,messages:{checkAll:"Select All",clear:"Clear",filter:"Filter",search:"Search",cancel:"Cancel",selectedItemsFormat:"{0} items selected"},forceUnique:!0,animations:{left:"slide",right:"slide:right"}},events:["init","refresh"]});e.extend(w.fn,{_click:_.fn._click,_keydown:_.fn._keydown,_reset:_.fn._reset,_closeForm:_.fn._closeForm,clear:_.fn.clear,_merge:_.fn._merge}),l.plugin(_),l.plugin(w)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.menu",["kendo.popup"],function(){return function(e,t){function i(t,i){try{return e.contains(t,i)}catch(e){return!1}}function n(t){(t=e(t)).addClass("k-item").children(_).addClass(x),t.children("a").addClass(k).children(_).addClass(x),t.filter(":not([disabled])").addClass(I),t.filter(".k-separator").empty().append("&nbsp;"),t.filter("li[disabled]").addClass(z).removeAttr("disabled").attr("aria-disabled",!0),t.filter("[role]").length||t.attr("role","menuitem"),t.children("."+k).length||t.contents().filter(function(){return!(this.nodeName.match(g)||3==this.nodeType&&!e.trim(this.nodeValue))}).wrapAll("<span class='"+k+"'/>"),r(t),s(t)}function r(t){(t=e(t)).find("> .k-link > [class*=k-i-arrow]:not(.k-sprite)").remove(),t.filter(":has(.k-menu-group)").children(".k-link:not(:has([class*=k-i-arrow]:not(.k-sprite)))").each(function(){var t=e(this),i=t.parent().parent();t.append("<span class='k-icon "+(i.hasClass(b+"-horizontal")?"k-i-arrow-s":"k-i-arrow-e")+"'/>")})}function s(t){(t=e(t)).filter(".k-first:not(:first-child)").removeClass(y),t.filter(".k-last:not(:last-child)").removeClass(w),t.filter(":first-child").addClass(y),t.filter(":last-child").addClass(w)}var o=window.kendo,a=o.ui,l=o._activeElement,d=o.support.touch&&o.support.mobileOS,c=e.extend,u=e.proxy,h=e.each,f=o.template,p=o.keys,m=a.Widget,g=/^(ul|a|div)$/i,v=".kendoMenu",_="img",b="k-menu",k="k-link",w="k-last",y="k-first",x="k-image",C="touchstart.kendoMenu MSPointerDown.kendoMenu pointerdown"+v,S=o.support.pointers,T=o.support.msPointers,D=S?"pointerover":T?"MSPointerOver":"mouseenter",F=S?"pointerout":T?"MSPointerOut":"mouseleave",E=d||T||S,R=e(document.documentElement),A="kendoPopup",I="k-state-default",M="k-state-hover",H="k-state-focused",z="k-state-disabled",N=".k-menu-group",P=N+",.k-animation-container",L=":not(.k-list) > .k-item",B=".k-item:not(.k-state-disabled)",O=":not(.k-item.k-separator)",V=O+":eq(0)",W=O+":last",U={2:1,touch:1},q={content:f("<div #= contentCssAttributes(item) # tabindex='-1'>#= content(item) #</div>"),group:f("<ul class='#= groupCssClass(group) #'#= groupAttributes(group) # role='menu' aria-hidden='true'>#= renderItems(data) #</ul>"),itemWrapper:f("<#= tag(item) # class='#= textClass(item) #'#= textAttributes(item) #>#= image(data) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:f("<li class='#= wrapperCssClass(group, item) #' #= itemCssAttributes(item) # role='menuitem'  #=item.items ? \"aria-haspopup='true'\": \"\"##=item.enabled === false ? \"aria-disabled='true'\" : ''#>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"),image:f("<img #= imageCssAttributes(item) # alt='' src='#= item.imageUrl #' />"),arrow:f("<span class='#= arrowClass(item, group) #'></span>"),sprite:f("<span class='k-sprite #= spriteCssClass #'></span>"),empty:f("")},$={wrapperCssClass:function(e,t){var i="k-item",n=t.index;return!1===t.enabled?i+=" k-state-disabled":i+=" k-state-default",e.firstLevel&&0===n&&(i+=" k-first"),n==e.length-1&&(i+=" k-last"),t.cssClass&&(i+=" "+t.cssClass),t.attr&&t.attr.hasOwnProperty("class")&&(i+=" "+t.attr.class),t.selected&&(i+=" k-state-selected"),i},itemCssAttributes:function(e){var t="",i=e.attr||{};for(var n in i)i.hasOwnProperty(n)&&"class"!==n&&(t+=n+'="'+i[n]+'" ');return t},imageCssAttributes:function(e){var t="",i=e.imageAttr||{};i.class?i.class+=" "+x:i.class=x;for(var n in i)i.hasOwnProperty(n)&&(t+=n+'="'+i[n]+'" ');return t},contentCssAttributes:function(e){var t="",i=e.contentAttr||{},n="k-content k-group k-menu-group";i.class?i.class+=" "+n:i.class=n;for(var r in i)i.hasOwnProperty(r)&&(t+=r+'="'+i[r]+'" ');return t},textClass:function(){return k},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},arrowClass:function(e,t){var i="k-icon";return t.horizontal?i+=" k-i-arrow-s":i+=" k-i-arrow-e",i},text:function(e){return!1===e.encoded?e.text:o.htmlEncode(e.text)},tag:function(e){return e.url?"a":"span"},groupAttributes:function(e){return!0!==e.expanded?" style='display:none'":""},groupCssClass:function(){return"k-group k-menu-group"},content:function(e){return e.content?e.content:"&nbsp;"}},j=m.extend({init:function(t,i){m.fn.init.call(this,t,i),t=this.wrapper=this.element,i=this.options,this._initData(i),this._updateClasses(),this._animations(i),this.nextItemZIndex=100,this._tabindex(),this._focusProxy=u(this._focusHandler,this),t.on(C,B,this._focusProxy).on("click"+v,".k-item.k-state-disabled",!1).on("click"+v,B,u(this._click,this)).on("keydown"+v,u(this._keydown,this)).on("focus"+v,u(this._focus,this)).on("focus"+v,".k-content",u(this._focus,this)).on(C+" mousedown"+v,".k-content",u(this._preventClose,this)).on("blur"+v,u(this._removeHoverItem,this)).on("blur"+v,"[tabindex]",u(this._checkActiveElement,this)).on(D+v,B,u(this._mouseenter,this)).on(F+v,B,u(this._mouseleave,this)).on(D+v+" "+F+v+" mousedown"+v+" click"+v,".k-item:not(.k-state-disabled) > .k-link",u(this._toggleHover,this)),i.openOnClick&&(this.clicked=!1,this._documentClickHandler=u(this._documentClick,this),e(document).click(this._documentClickHandler)),t.attr("role","menubar"),t[0].id&&(this._ariaId=o.format("{0}_mn_active",t[0].id)),o.notify(this)},events:["open","close","activate","deactivate","select"],options:{name:"Menu",animation:{open:{duration:200},close:{duration:100}},orientation:"horizontal",direction:"default",openOnClick:!1,closeOnClick:!0,hoverDelay:100,popupCollision:void 0},_initData:function(e){var t=this;e.dataSource&&(t.angular("cleanup",function(){return{elements:t.element.children()}}),t.element.empty(),t.append(e.dataSource,t.element),t.angular("compile",function(){return{elements:t.element.children()}}))},setOptions:function(e){var t=this.options.animation;this._animations(e),e.animation=c(!0,t,e.animation),"dataSource"in e&&this._initData(e),this._updateClasses(),m.fn.setOptions.call(this,e)},destroy:function(){m.fn.destroy.call(this),this.element.off(v),this._documentClickHandler&&e(document).unbind("click",this._documentClickHandler),o.destroy(this.element)},enable:function(e,t){return this._toggleDisabled(e,!1!==t),this},disable:function(e){return this._toggleDisabled(e,!1),this},append:function(e,t){t=this.element.find(t);var i=this._insert(e,t,t.length?t.find("> .k-menu-group, > .k-animation-container > .k-menu-group"):null);return h(i.items,function(){i.group.append(this),r(this)}),r(t),s(i.group.find(".k-first, .k-last").add(i.items)),this},insertBefore:function(e,t){t=this.element.find(t);var i=this._insert(e,t,t.parent());return h(i.items,function(){t.before(this),r(this),s(this)}),s(t),this},insertAfter:function(e,t){t=this.element.find(t);var i=this._insert(e,t,t.parent());return h(i.items,function(){t.after(this),r(this),s(this)}),s(t),this},_insert:function(t,i,r){var s,o;i&&i.length||(r=this.element);var a=e.isPlainObject(t),l={firstLevel:r.hasClass(b),horizontal:r.hasClass(b+"-horizontal"),expanded:!0,length:r.children().length};return i&&!r.length&&(r=e(j.renderGroup({group:l})).appendTo(i)),a||e.isArray(t)?s=e(e.map(a?[t]:t,function(t,i){return"string"==typeof t?e(t).get():e(j.renderItem({group:l,item:c(t,{index:i})})).get()})):(o=(s="string"==typeof t&&"<"!=t.charAt(0)?this.element.find(t):e(t)).find("> ul").addClass("k-menu-group").attr("role","menu"),(s=s.filter("li")).add(o.find("> li")).each(function(){n(this)})),{items:s,group:r}},remove:function(e){var t=(e=this.element.find(e)).parentsUntil(this.element,L),i=e.parent("ul:not(.k-menu)");if(e.remove(),i&&!i.children(L).length){var n=i.parent(".k-animation-container");n.length?n.remove():i.remove()}return t.length&&(r(t=t.eq(0)),s(t)),this},open:function(t){var i=this,n=i.options,r="horizontal"==n.orientation,s=n.direction,a=o.support.isRtl(i.wrapper);return t=i.element.find(t),/^(top|bottom|default)$/.test(s)&&(s=a?r?(s+" left").replace("default","bottom"):"left":r?(s+" right").replace("default","bottom"):"right"),t.siblings().find(">.k-popup:visible,>.k-animation-container>.k-popup:visible").each(function(){var t=e(this).data("kendoPopup");t&&t.close()}),t.each(function(){var t=e(this);clearTimeout(t.data("timer")),t.data("timer",setTimeout(function(){var l,u=t.find(".k-menu-group:first:hidden");if(u[0]&&!1===i._triggerEvent({item:t[0],type:"open"})){if(!u.find(".k-menu-group")[0]&&u.children(".k-item").length>1){var h=e(window).height(),f=function(){u.css({maxHeight:h-(u.outerHeight()-u.height())-o.getShadows(u).bottom,overflow:"auto"})};o.support.browser.msie&&o.support.browser.version<=7?setTimeout(f,0):f()}else u.css({maxHeight:"",overflow:""});t.data("zIndex",t.css("zIndex")),t.css("zIndex",i.nextItemZIndex++),l=u.data(A);var p=t.parent().hasClass(b),m=p&&r,g=function(e,t,i){e=e.split(" ")[!t+0]||e;var n={origin:["bottom",i?"right":"left"],position:["top",i?"right":"left"]};return/left|right/.test(e)?(n.origin=["top",e],n.position[1]=o.directions[e].reverse):(n.origin[0]=e,n.position[0]=o.directions[e].reverse),n.origin=n.origin.join(" "),n.position=n.position.join(" "),n}(s,p,a),v=n.animation.open.effects,_=void 0!==v?v:"slideIn:"+function(e,t){return(e=e.split(" ")[!t+0]||e).replace("top","up").replace("bottom","down")}(s,p);l?((l=u.data(A)).options.origin=g.origin,l.options.position=g.position,l.options.animation.open.effects=_):l=u.kendoPopup({activate:function(){i._triggerEvent({item:this.wrapper.parent(),type:"activate"})},deactivate:function(e){e.sender.element.removeData("targetTransform").css({opacity:""}),i._triggerEvent({item:this.wrapper.parent(),type:"deactivate"})},origin:g.origin,position:g.position,collision:void 0!==n.popupCollision?n.popupCollision:m?"fit":"fit flip",anchor:t,appendTo:t,animation:{open:c(!0,{effects:_},n.animation.open),close:n.animation.close},close:function(e){var t=e.sender.wrapper.parent();i._triggerEvent({item:t[0],type:"close"})?e.preventDefault():(t.css("zIndex",t.data("zIndex")),t.removeData("zIndex"),d&&(t.removeClass(M),i._removeHoverItem()))}}).data(A),u.removeAttr("aria-hidden"),l.open()}},i.options.hoverDelay))}),i},close:function(t,i){var n=this,r=n.element;return(t=r.find(t)).length||(t=r.find(">.k-item")),t.each(function(){var t=e(this);!i&&n._isRootItem(t)&&(n.clicked=!1),clearTimeout(t.data("timer")),t.data("timer",setTimeout(function(){var e=t.find(".k-menu-group:not(.k-list-container):not(.k-calendar-container):first:visible").data(A);e&&(e.close(),e.element.attr("aria-hidden",!0))},n.options.hoverDelay))}),n},_toggleDisabled:function(t,i){this.element.find(t).each(function(){e(this).toggleClass(I,i).toggleClass(z,!i).attr("aria-disabled",!i)})},_toggleHover:function(t){var i=e(o.eventTarget(t)||t.target).closest(L),n=t.type==D||-1!=="mousedown".indexOf(t.type);i.parents("li."+z).length||i.toggleClass(M,n||"mousedown"==t.type||"click"==t.type),this._removeHoverItem()},_preventClose:function(){this.options.closeOnClick||(this._closurePrevented=!0)},_checkActiveElement:function(t){var n=this,r=e(t?t.currentTarget:this._hoverItem()),s=n._findRootParent(r)[0];this._closurePrevented||setTimeout(function(){document.hasFocus()&&(i(s,o._activeElement())||!t||i(s,t.currentTarget))||n.close(s)},0),this._closurePrevented=!1},_removeHoverItem:function(){var e=this._hoverItem();e&&e.hasClass(H)&&(e.removeClass(H),this._oldHoverItem=null)},_updateClasses:function(){var e,t=this.element;t.removeClass("k-menu-horizontal k-menu-vertical"),t.addClass("k-widget k-reset k-header k-menu-init "+b).addClass(b+"-"+this.options.orientation),t.find("li > ul").filter(function(){return!o.support.matchesSelector.call(this,".k-menu-init div ul")}).addClass("k-group k-menu-group").attr("role","menu").attr("aria-hidden",t.is(":visible")).end().find("li > div").addClass("k-content").attr("tabindex","-1"),e=t.find("> li,.k-menu-group > li"),t.removeClass("k-menu-init"),e.each(function(){n(this)})},_mouseenter:function(t){var n=this,r=e(t.currentTarget),s=r.children(".k-animation-container").length||r.children(N).length;t.delegateTarget==r.parents(".k-menu")[0]&&(n.options.openOnClick&&!n.clicked||d||(S||T)&&t.originalEvent.pointerType in U&&n._isRootItem(r.closest(L))||!i(t.currentTarget,t.relatedTarget)&&s&&n.open(r),(n.options.openOnClick&&n.clicked||E)&&r.siblings().each(u(function(e,t){n.close(t,!0)},n)))},_mouseleave:function(t){var n=e(t.currentTarget),r=n.children(".k-animation-container").length||n.children(N).length;n.parentsUntil(".k-animation-container",".k-list-container,.k-calendar-container")[0]?t.stopImmediatePropagation():this.options.openOnClick||d||(S||T)&&t.originalEvent.pointerType in U||i(t.currentTarget,t.relatedTarget||t.target)||!r||i(t.currentTarget,o._activeElement())||this.close(n)},_click:function(t){var i,n,r,s=this.options,a=e(o.eventTarget(t)),l=a[0]?a[0].nodeName.toUpperCase():"",d="INPUT"==l||"SELECT"==l||"BUTTON"==l||"LABEL"==l,c=a.closest("."+k),u=a.closest(L),h=c.attr("href"),f=a.attr("href"),p=e("<a href='#' />").attr("href"),m=!!h&&h!==p,g=m&&!!h.match(/^#/),v=!!f&&f!==p,_=s.openOnClick&&r&&this._isRootItem(u);if(!a.closest("> div:not(.k-animation-container,.k-list-container)",u[0]).length)if(u.hasClass(z))t.preventDefault();else{if(t.handled||!this._triggerEvent({item:u[0],type:"select"})||d||t.preventDefault(),t.handled=!0,n=u.children(P),r=n.is(":visible"),s.closeOnClick&&(!m||g)&&(!n.length||_))return u.removeClass(M).css("height"),this._oldHoverItem=this._findRootParent(u),this.close(c.parentsUntil(this.element,L)),this.clicked=!1,void(-1!="MSPointerUp".indexOf(t.type)&&t.preventDefault());m&&t.enterKey&&c[0].click(),(this._isRootItem(u)&&s.openOnClick||o.support.touch||(S||T)&&this._isRootItem(u.closest(L)))&&(m||d||v||t.preventDefault(),this.clicked=!0,i=n.is(":visible")?"close":"open",(s.closeOnClick||"close"!=i)&&this[i](u))}},_documentClick:function(e){i(this.element[0],e.target)||(this.clicked=!1)},_focus:function(t){var i=t.target,n=this._hoverItem(),r=l();if(i!=this.wrapper[0]&&!e(i).is(":kendoFocusable"))return t.stopPropagation(),e(i).closest(".k-content").closest(".k-menu-group").closest(".k-item").addClass(H),void this.wrapper.focus();r===t.currentTarget&&(n.length?this._moveHover([],n):this._oldHoverItem||this._moveHover([],this.wrapper.children().first()))},_keydown:function(e){var t,i,n,r=e.keyCode,s=this._oldHoverItem,a=o.support.isRtl(this.wrapper);if(e.target==e.currentTarget||r==p.ESC){if(s||(s=this._oldHoverItem=this._hoverItem()),i=this._itemBelongsToVertival(s),n=this._itemHasChildren(s),r==p.RIGHT)t=this[a?"_itemLeft":"_itemRight"](s,i,n);else if(r==p.LEFT)t=this[a?"_itemRight":"_itemLeft"](s,i,n);else if(r==p.DOWN)t=this._itemDown(s,i,n);else if(r==p.UP)t=this._itemUp(s,i,n);else if(r==p.ESC)t=this._itemEsc(s,i);else if(r==p.ENTER||r==p.SPACEBAR)(t=s.children(".k-link")).length>0&&(this._click({target:t[0],preventDefault:function(){},enterKey:!0}),this._moveHover(s,this._findRootParent(s)));else if(r==p.TAB)return t=this._findRootParent(s),this._moveHover(s,t),void this._checkActiveElement();t&&t[0]&&(e.preventDefault(),e.stopPropagation())}},_hoverItem:function(){return this.wrapper.find(".k-item.k-state-hover,.k-item.k-state-focused").filter(":visible")},_itemBelongsToVertival:function(e){var t=this.wrapper.hasClass("k-menu-vertical");return e.length?e.parent().hasClass("k-menu-group")||t:t},_itemHasChildren:function(e){return!!e.length&&e.children("ul.k-menu-group, div.k-animation-container").length>0},_moveHover:function(t,i){var n=this._ariaId;t.length&&i.length&&t.removeClass(H),i.length&&(i[0].id&&(n=i[0].id),i.addClass(H),this._oldHoverItem=i,n&&(this.element.removeAttr("aria-activedescendant"),e("#"+n).removeAttr("id"),i.attr("id",n),this.element.attr("aria-activedescendant",n)))},_findRootParent:function(e){return this._isRootItem(e)?e:e.parentsUntil(".k-menu","li.k-item").last()},_isRootItem:function(e){return e.parent().hasClass(b)},_itemRight:function(e,t,i){var n,r;if(!e.hasClass(z))return t?i?(this.open(e),n=e.find(".k-menu-group").children().first()):"horizontal"==this.options.orientation&&(r=this._findRootParent(e),this.close(r),n=r.nextAll(V)):(n=e.nextAll(V)).length||(n=e.prevAll(W)),n&&!n.length?n=this.wrapper.children(".k-item").first():n||(n=[]),this._moveHover(e,n),n},_itemLeft:function(e,t){var i;return t?(i=e.parent().closest(".k-item"),this.close(i),this._isRootItem(i)&&"horizontal"==this.options.orientation&&(i=i.prevAll(V))):(i=e.prevAll(V)).length||(i=e.nextAll(W)),i.length||(i=this.wrapper.children(".k-item").last()),this._moveHover(e,i),i},_itemDown:function(e,t,i){var n;if(t)n=e.nextAll(V);else{if(!i||e.hasClass(z))return;this.open(e),n=e.find(".k-menu-group").children().first()}return!n.length&&e.length?n=e.parent().children().first():e.length||(n=this.wrapper.children(".k-item").first()),this._moveHover(e,n),n},_itemUp:function(e,t){var i;if(t)return!(i=e.prevAll(V)).length&&e.length?i=e.parent().children().last():e.length||(i=this.wrapper.children(".k-item").last()),this._moveHover(e,i),i},_itemEsc:function(e,t){var i;return t?(i=e.parent().closest(".k-item"),this.close(i),this._moveHover(e,i),i):e},_triggerEvent:function(e){return this.trigger(e.type,{type:e.type,item:e.item})},_focusHandler:function(t){var i=this,n=e(o.eventTarget(t)).closest(L);setTimeout(function(){i._moveHover([],n),n.children(".k-content")[0]&&n.parent().closest(".k-item").removeClass(H)},200)},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={open:{effects:{}},close:{hide:!0,effects:{}}})}});c(j,{renderItem:function(e){e=c({menu:{},group:{}},e);var t=q.empty,i=e.item;return q.item(c(e,{image:i.imageUrl?q.image:t,sprite:i.spriteCssClass?q.sprite:t,itemWrapper:q.itemWrapper,renderContent:j.renderContent,arrow:i.items||i.content?q.arrow:t,subGroup:j.renderGroup},$))},renderGroup:function(e){return q.group(c({renderItems:function(e){for(var t="",i=0,n=e.items,r=n?n.length:0,s=c({length:r},e.group);i<r;i++)t+=j.renderItem(c(e,{group:s,item:c({index:i},n[i])}));return t}},e,$))},renderContent:function(e){return q.content(c(e,$))}});var G=j.extend({init:function(t,i){j.fn.init.call(this,t,i),this.target=e(this.options.target),this._popup(),this._wire()},options:{name:"ContextMenu",filter:null,showOn:"contextmenu",orientation:"vertical",alignToAnchor:!1,target:"body"},events:["open","close","activate","deactivate","select"],setOptions:function(t){j.fn.setOptions.call(this,t),this.target.off(this.showOn+v,this._showProxy),this.userEvents&&this.userEvents.destroy(),this.target=e(this.options.target),t.orientation&&this.popup.wrapper[0]&&this.popup.element.unwrap(),this._wire(),j.fn.setOptions.call(this,t)},destroy:function(){this.target.off(this.options.showOn+v),R.off(o.support.mousedown+v,this._closeProxy),this.userEvents&&this.userEvents.destroy(),j.fn.destroy.call(this)},open:function(t,n){return t=e(t)[0],i(this.element[0],e(t)[0])?j.fn.open.call(this,t):!1===this._triggerEvent({item:this.element,type:"open"})&&(this.popup.visible()&&this.options.filter&&(this.popup.close(!0),this.popup.element.kendoStop(!0)),void 0!==n?(this.popup.wrapper.hide(),this.popup.open(t,n)):(this.popup.options.anchor=t||this.popup.anchor||this.target,this.popup.element.kendoStop(!0),this.popup.open()),R.off(this.popup.downEvent,this.popup._mousedownProxy),R.on(o.support.mousedown+v,this._closeProxy)),this},close:function(){i(this.element[0],e(arguments[0])[0])?j.fn.close.call(this,arguments[0]):this.popup.visible()&&!1===this._triggerEvent({item:this.element,type:"close"})&&(this.popup.close(),R.off(o.support.mousedown+v,this._closeProxy),this.unbind("select",this._closeTimeoutProxy))},_showHandler:function(e){var t,n=e,r=this.options;e.event&&((n=e.event).pageX=e.x.location,n.pageY=e.y.location),i(this.element[0],e.relatedTarget||e.target)||(this._eventOrigin=n,n.preventDefault(),n.stopImmediatePropagation(),this.element.find("."+H).removeClass(H),(r.filter&&o.support.matchesSelector.call(n.currentTarget,r.filter)||!r.filter)&&(r.alignToAnchor?(this.popup.options.anchor=n.currentTarget,this.open(n.currentTarget)):(this.popup.options.anchor=n.currentTarget,this._targetChild?(t=this.target.offset(),this.open(n.pageX-t.left,n.pageY-t.top)):this.open(n.pageX,n.pageY))))},_closeHandler:function(t){var n=e(t.relatedTarget||t.target),r=n.closest(this.target.selector)[0]==this.target[0],s=n.closest(B).children(P),o=i(this.element[0],n[0]);this._eventOrigin=t;var a=3!==t.which;this.popup.visible()&&(a&&r||!r)&&(this.options.closeOnClick&&!s[0]&&o||!o)&&(o?(this.unbind("select",this._closeTimeoutProxy),this.bind("select",this._closeTimeoutProxy)):this.close())},_wire:function(){var e=this.options,t=this.target;this._showProxy=u(this._showHandler,this),this._closeProxy=u(this._closeHandler,this),this._closeTimeoutProxy=u(this.close,this),t[0]&&(o.support.mobileOS&&"contextmenu"==e.showOn?(this.userEvents=new o.UserEvents(t,{filter:e.filter,allowSelection:!1}),t.on(e.showOn+v,!1),this.userEvents.bind("hold",this._showProxy)):e.filter?t.on(e.showOn+v,e.filter,this._showProxy):t.on(e.showOn+v,this._showProxy))},_triggerEvent:function(t){var i=e(this.popup.options.anchor)[0],n=this._eventOrigin;return this._eventOrigin=void 0,this.trigger(t.type,c({type:t.type,item:t.item||this.element[0],target:i},n?{event:n}:{}))},_popup:function(){this._triggerProxy=u(this._triggerEvent,this),this.popup=this.element.addClass("k-context-menu").kendoPopup({anchor:this.target||"body",copyAnchorStyles:this.options.copyAnchorStyles,collision:this.options.popupCollision||"fit",animation:this.options.animation,activate:this._triggerProxy,deactivate:this._triggerProxy}).data("kendoPopup"),this._targetChild=i(this.target[0],this.popup.element[0])}});a.plugin(j),a.plugin(G)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.columnmenu",["kendo.popup","kendo.filtermenu","kendo.menu"],function(){return function(e,t){function i(e){for(var t=[],n=0;n<e.length;n++)e[n].columns?t=t.concat(i(e[n].columns)):t.push(e[n]);return t}var n=window.kendo,r=n.ui,s=e.proxy,o=e.extend,a=e.grep,l=e.map,d=e.inArray,c="k-state-selected",u=".kendoColumnMenu",h=r.Widget,f=h.extend({init:function(t,i){var r;h.fn.init.call(this,t,i),t=this.element,i=this.options,this.owner=i.owner,this.dataSource=i.dataSource,this.field=t.attr(n.attr("field")),this.title=t.attr(n.attr("title")),(r=t.find(".k-header-column-menu"))[0]||(r=t.addClass("k-with-icon").prepend('<a class="k-header-column-menu" href="#"><span class="k-icon k-i-arrowhead-s">'+i.messages.settings+"</span></a>").find(".k-header-column-menu")),this.link=r.attr("tabindex",-1).on("click"+u,s(this._click,this)),this.wrapper=e('<div class="k-column-menu"/>'),this._refreshHandler=s(this.refresh,this),this.dataSource.bind("change",this._refreshHandler)},_init:function(){var e=this;e.pane=e.options.pane,e.pane&&(e._isMobile=!0),e._isMobile?e._createMobileMenu():e._createMenu(),e.owner._muteAngularRebind(function(){e._angularItems("compile")}),e._sort(),e._columns(),e._filter(),e._lockColumns(),e.trigger("init",{field:e.field,container:e.wrapper})},events:["init"],options:{name:"ColumnMenu",messages:{sortAscending:"Sort Ascending",sortDescending:"Sort Descending",filter:"Filter",columns:"Columns",done:"Done",settings:"Column Settings",lock:"Lock",unlock:"Unlock"},filter:"",columns:!0,sortable:!0,filterable:!0,animations:{left:"slide"}},_createMenu:function(){var e=this,t=e.options;e.wrapper.html(n.template(p)({ns:n.ns,messages:t.messages,sortable:t.sortable,filterable:t.filterable,columns:e._ownerColumns(),showColumns:t.columns,lockedColumns:t.lockedColumns})),e.popup=e.wrapper.kendoPopup({anchor:e.link,open:s(e._open,e),activate:s(e._activate,e),close:function(){e.options.closeCallback&&e.options.closeCallback(e.element)}}).data("kendoPopup"),e.menu=e.wrapper.children().kendoMenu({orientation:"vertical",closeOnClick:!1}).data("kendoMenu")},_createMobileMenu:function(){var e=this,t=e.options,i=n.template(m)({ns:n.ns,field:e.field,title:e.title||e.field,messages:t.messages,sortable:t.sortable,filterable:t.filterable,columns:e._ownerColumns(),showColumns:t.columns,lockedColumns:t.lockedColumns});e.view=e.pane.append(i),e.wrapper=e.view.element.find(".k-column-menu"),e.menu=new g(e.wrapper.children(),{pane:e.pane}),e.view.element.on("click",".k-done",function(t){e.close(),t.preventDefault()}),e.options.lockedColumns&&e.view.bind("show",function(){e._updateLockedColumns()})},_angularItems:function(t){var i=this;i.angular(t,function(){return{elements:i.wrapper.find(".k-columns-item input["+n.attr("field")+"]").map(function(){return e(this).closest("li")}),data:l(i._ownerColumns(),function(e){return{column:e._originalObject}})}})},destroy:function(){this._angularItems("cleanup"),h.fn.destroy.call(this),this.filterMenu&&this.filterMenu.destroy(),this._refreshHandler&&this.dataSource.unbind("change",this._refreshHandler),this.options.columns&&this.owner&&(this._updateColumnsMenuHandler&&(this.owner.unbind("columnShow",this._updateColumnsMenuHandler),this.owner.unbind("columnHide",this._updateColumnsMenuHandler)),this._updateColumnsLockedStateHandler&&(this.owner.unbind("columnLock",this._updateColumnsLockedStateHandler),this.owner.unbind("columnUnlock",this._updateColumnsLockedStateHandler))),this.menu&&(this.menu.element.off(u),this.menu.destroy()),this.wrapper.off(u),this.popup&&this.popup.destroy(),this.view&&this.view.purge(),this.link.off(u),this.owner=null,this.wrapper=null,this.element=null},close:function(){this.menu.close(),this.popup&&(this.popup.close(),this.popup.element.off("keydown"+u))},_click:function(e){e.preventDefault(),e.stopPropagation();var t=this.options;t.filter&&this.element.is(!t.filter)||(this.popup||this.pane||this._init(),this._isMobile?this.pane.navigate(this.view,this.options.animations.left):this.popup.toggle())},_open:function(){var t=this;e(".k-column-menu").not(t.wrapper).each(function(){e(this).data("kendoPopup").close()}),t.popup.element.on("keydown"+u,function(e){e.keyCode==n.keys.ESC&&t.close()}),t.options.lockedColumns&&t._updateLockedColumns()},_activate:function(){this.menu.element.focus()},_ownerColumns:function(){var t=i(this.owner.columns),n=a(t,function(t){var i=!0,n=function(t){return e.trim(t).replace(/&nbsp;/gi,"")}(t.title||"");return!1!==t.menu&&(t.field||n.length)||(i=!1),i});return l(n,function(e){return{originalField:e.field,field:e.field||e.title,title:e.title||e.field,hidden:e.hidden,index:d(e,t),locked:!!e.locked,_originalObject:e}})},_sort:function(){var t=this;t.options.sortable&&(t.refresh(),t.menu.bind("select",function(i){var n,r=e(i.item);r.hasClass("k-sort-asc")?n="asc":r.hasClass("k-sort-desc")&&(n="desc"),n&&(r.parent().find(".k-sort-"+("asc"==n?"desc":"asc")).removeClass(c),t._sortDataSource(r,n),t.close())}))},_sortDataSource:function(e,t){var i,n,r=this.options.sortable,s=null===r.compare?void 0:r.compare,o=this.dataSource,a=o.sort()||[];if(e.hasClass(c)&&r&&!1!==r.allowUnsort?(e.removeClass(c),t=void 0):e.addClass(c),"multiple"===r.mode){for(i=0,n=a.length;i<n;i++)if(a[i].field===this.field){a.splice(i,1);break}a.push({field:this.field,dir:t,compare:s})}else a=[{field:this.field,dir:t,compare:s}];o.sort(a)},_columns:function(){var t=this;t.options.columns&&(t._updateColumnsMenu(),t._updateColumnsMenuHandler=s(t._updateColumnsMenu,t),t.owner.bind(["columnHide","columnShow"],t._updateColumnsMenuHandler),t._updateColumnsLockedStateHandler=s(t._updateColumnsLockedState,t),t.owner.bind(["columnUnlock","columnLock"],t._updateColumnsLockedStateHandler),t.menu.bind("select",function(r){var s,o,l,d=e(r.item),c=i(t.owner.columns);t._isMobile&&r.preventDefault(),d.parent().closest("li.k-columns-item")[0]&&((s=d.find(":checkbox")).attr("disabled")||(l=s.attr(n.attr("field")),!0===(o=a(c,function(e){return e.field==l||e.title==l})[0]).hidden?t.owner.showColumn(o):t.owner.hideColumn(o)))}))},_updateColumnsMenu:function(){var e,t,i,r,s,o=n.attr("field"),c=n.attr("locked"),u=a(this._ownerColumns(),function(e){return!e.hidden}),h=a(u,function(e){return e.originalField}),f=a(h,function(e){return!0===e.locked}).length,p=a(h,function(e){return!0!==e.locked}).length;u=l(u,function(e){return e.field});var m=this.wrapper.find(".k-columns-item input["+o+"]").prop("disabled",!1).prop("checked",!1);for(e=0,t=m.length;e<t;e++)s="true"===(i=m.eq(e)).attr(c),r=!1,d(i.attr(o),u)>-1&&(r=!0,i.prop("checked",r)),r&&(1==f&&s&&i.prop("disabled",!0),1!=p||s||i.prop("disabled",!0))},_updateColumnsLockedState:function(){var e,t,i,r,s=n.attr("field"),o=n.attr("locked"),a=function(e,t){var i,n,r,s={};for(i=0,n=e.length;i<n;i++)s[(r=e[i])[t]]=r;return s}(this._ownerColumns(),"field"),l=this.wrapper.find(".k-columns-item input[type=checkbox]");for(e=0,t=l.length;e<t;e++)(r=a[(i=l.eq(e)).attr(s)])&&i.attr(o,r.locked);this._updateColumnsMenu()},_filter:function(){var t=this,i="kendoFilterMenu",n=t.options;!1!==n.filterable&&(n.filterable.multi&&(i="kendoFilterMultiCheck",n.filterable.dataSource&&(n.filterable.checkSource=n.filterable.dataSource,delete n.filterable.dataSource)),t.filterMenu=t.wrapper.find(".k-filterable")[i](o(!0,{},{appendToElement:!0,dataSource:n.dataSource,values:n.values,field:t.field,title:t.title},n.filterable)).data(i),t._isMobile&&t.menu.bind("select",function(i){e(i.item).hasClass("k-filter-item")&&t.pane.navigate(t.filterMenu.view,t.options.animations.left)}))},_lockColumns:function(){var t=this;t.menu.bind("select",function(i){var n=e(i.item);n.hasClass("k-lock")?(t.owner.lockColumn(t.field),t.close()):n.hasClass("k-unlock")&&(t.owner.unlockColumn(t.field),t.close())})},_updateLockedColumns:function(){var e=this.field,t=this.owner.columns,i=a(t,function(t){return t.field==e||t.title==e})[0];if(i){var n=!0===i.locked,r=a(t,function(e){return!e.hidden&&(e.locked&&n||!e.locked&&!n)}).length,s=this.wrapper.find(".k-lock").removeClass("k-state-disabled"),o=this.wrapper.find(".k-unlock").removeClass("k-state-disabled");(n||1==r)&&s.addClass("k-state-disabled"),n&&1!=r||o.addClass("k-state-disabled"),this._updateColumnsLockedState()}},refresh:function(){var e,t,i,n=this.options.dataSource.sort()||[],r=this.field;for(this.wrapper.find(".k-sort-asc, .k-sort-desc").removeClass(c),t=0,i=n.length;t<i;t++)r==(e=n[t]).field&&this.wrapper.find(".k-sort-"+e.dir).addClass(c);this.link[this._filterExist(this.dataSource.filter())?"addClass":"removeClass"]("k-state-active")},_filterExist:function(e){var t,i=!1;if(e){for(var n=0,r=(e=e.filters).length;n<r;n++)(t=e[n]).field==this.field?i=!0:t.filters&&(i=i||this._filterExist(t));return i}}}),p='<ul>#if(sortable){#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-sprite k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-sprite k-i-sort-desc"></span>${messages.sortDescending}</span></li>#if(showColumns || filterable){#<li class="k-separator"></li>#}##}##if(showColumns){#<li class="k-item k-columns-item"><span class="k-link"><span class="k-sprite k-i-columns"></span>${messages.columns}</span><ul>#for (var idx = 0; idx < columns.length; idx++) {#<li><input type="checkbox" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#"/>#=columns[idx].title#</li>#}#</ul></li>#if(filterable || lockedColumns){#<li class="k-separator"></li>#}##}##if(filterable){#<li class="k-item k-filter-item"><span class="k-link"><span class="k-sprite k-filter"></span>${messages.filter}</span><ul><li><div class="k-filterable"></div></li></ul></li>#if(lockedColumns){#<li class="k-separator"></li>#}##}##if(lockedColumns){#<li class="k-item k-lock"><span class="k-link"><span class="k-sprite k-i-lock"></span>${messages.lock}</span></li><li class="k-item k-unlock"><span class="k-link"><span class="k-sprite k-i-unlock"></span>${messages.unlock}</span></li>#}#</ul>',m='<div data-#=ns#role="view" data-#=ns#init-widgets="false" data-#=ns#use-native-scrolling="true" class="k-grid-column-menu"><div data-#=ns#role="header" class="k-header">${messages.settings}<button class="k-button k-done">#=messages.done#</button></div><div class="k-column-menu k-mobile-list"><ul><li><span class="k-link">${title}</span><ul>#if(sortable){#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-sprite k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-sprite k-i-sort-desc"></span>${messages.sortDescending}</span></li>#}##if(lockedColumns){#<li class="k-item k-lock"><span class="k-link"><span class="k-sprite k-i-lock"></span>${messages.lock}</span></li><li class="k-item k-unlock"><span class="k-link"><span class="k-sprite k-i-unlock"></span>${messages.unlock}</span></li>#}##if(filterable){#<li class="k-item k-filter-item"><span class="k-link k-filterable"><span class="k-sprite k-filter"></span>${messages.filter}</span></li>#}#</ul></li>#if(showColumns){#<li class="k-columns-item"><span class="k-link">${messages.columns}</span><ul>#for (var idx = 0; idx < columns.length; idx++) {#<li class="k-item"><label class="k-label"><input type="checkbox" class="k-check" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#"/>#=columns[idx].title#</label></li>#}#</ul></li>#}#</ul></div></div>',g=h.extend({init:function(e,t){h.fn.init.call(this,e,t),this.element.on("click"+u,"li.k-item:not(.k-separator):not(.k-state-disabled)","_click")},events:["select"],_click:function(t){e(t.target).is("[type=checkbox]")||t.preventDefault(),this.trigger("select",{item:t.currentTarget})},close:function(){this.options.pane.navigate("")},destroy:function(){h.fn.destroy.call(this),this.element.off(u)}});r.plugin(f)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.columnsorter",["kendo.core"],function(){return function(e,t){var i=window.kendo,n=i.ui,r=n.Widget,s=e.proxy,o=r.extend({init:function(e,t){var i;r.fn.init.call(this,e,t),this._refreshHandler=s(this.refresh,this),this.dataSource=this.options.dataSource.bind("change",this._refreshHandler),(i=this.element.find(".k-link"))[0]||(i=this.element.wrapInner('<a class="k-link" href="#"/>').find(".k-link")),this.link=i,this.element.on("click.kendoColumnSorter",s(this._click,this))},options:{name:"ColumnSorter",mode:"single",allowUnsort:!0,compare:null,filter:""},destroy:function(){r.fn.destroy.call(this),this.element.off(".kendoColumnSorter"),this.dataSource.unbind("change",this._refreshHandler),this._refreshHandler=this.element=this.link=this.dataSource=null},refresh:function(){var t,n,r,s,o=this.dataSource.sort()||[],a=this.element,l=a.attr(i.attr("field"));for(a.removeAttr(i.attr("dir")),a.removeAttr("aria-sort"),t=0,n=o.length;t<n;t++)l==(r=o[t]).field&&a.attr(i.attr("dir"),r.dir);s=a.attr(i.attr("dir")),a.find(".k-i-arrow-n,.k-i-arrow-s").remove(),"asc"===s?(e('<span class="k-icon k-i-arrow-n" />').appendTo(this.link),a.attr("aria-sort","ascending")):"desc"===s&&(e('<span class="k-icon k-i-arrow-s" />').appendTo(this.link),a.attr("aria-sort","descending"))},_click:function(e){var t,n,r=this.element,s=r.attr(i.attr("field")),o=r.attr(i.attr("dir")),a=this.options,l=null===this.options.compare?void 0:this.options.compare,d=this.dataSource.sort()||[];if(e.preventDefault(),!a.filter||r.is(a.filter)){if(o="asc"===o?"desc":"desc"===o&&a.allowUnsort?void 0:"asc","single"===a.mode)d=[{field:s,dir:o,compare:l}];else if("multiple"===a.mode){for(t=0,n=d.length;t<n;t++)if(d[t].field===s){d.splice(t,1);break}d.push({field:s,dir:o,compare:l})}this.dataSource.sort(d)}}});n.plugin(o)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.editable",["kendo.datepicker","kendo.numerictextbox","kendo.validator","kendo.binder"],function(){return function(e,t){function i(t){return(t=null!=t?t:"").type||e.type(t)||"string"}function n(e){var t,n,r=(e.model.fields||e.model)[e.field],o=i(r),a=r?r.validation:{},l=s.attr("type"),d=s.attr("bind"),f={name:e.field};for(t in a)n=a[t],h(t,p)>=0?f[l]=t:c(n)||(f[t]=u(n)?n.value||t:n),f[s.attr(t+"-msg")]=n.message;return h(o,p)>=0&&(f[l]=o),f[d]=("boolean"===o?"checked:":"value:")+e.field,f}function r(e,t){var i,n,r=e?e.validation||{}:{};for(i in r)u(n=r[i])&&n.value&&(n=n.value),c(n)&&(t[i]=n)}var s=window.kendo,o=s.ui,a=o.Widget,l=e.extend,d=s.support.browser.msie&&s.support.browser.version<9,c=s.isFunction,u=e.isPlainObject,h=e.inArray,f=/("|\%|'|\[|\]|\$|\.|\,|\:|\;|\+|\*|\&|\!|\#|\(|\)|<|>|\=|\?|\@|\^|\{|\}|\~|\/|\||`)/g,p=["url","email","number","date","boolean"],m={number:function(t,i){var r=n(i);e('<input type="text"/>').attr(r).appendTo(t).kendoNumericTextBox({format:i.format}),e("<span "+s.attr("for")+'="'+i.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},date:function(t,i){var r=n(i),o=i.format;o&&(o=s._extractFormat(o)),r[s.attr("format")]=o,e('<input type="text"/>').attr(r).appendTo(t).kendoDatePicker({format:i.format}),e("<span "+s.attr("for")+'="'+i.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},string:function(t,i){var r=n(i);e('<input type="text" class="k-input k-textbox"/>').attr(r).appendTo(t)},boolean:function(t,i){var r=n(i);e('<input type="checkbox" />').attr(r).appendTo(t)},values:function(t,i){var r=n(i),o=s.stringify(function(e){var t,i,n,r,s,o;if(e&&e.length)for(o=[],t=0,i=e.length;t<i;t++)s=(n=e[t]).text||n.value||n,r=null==n.value?n.text||n:n.value,o[t]={text:s,value:r};return o}(i.values));e("<select "+s.attr("text-field")+'="text"'+s.attr("value-field")+'="value"'+s.attr("source")+"='"+(o?o.replace(/\'/g,"&apos;"):o)+"'"+s.attr("role")+'="dropdownlist"/>').attr(r).appendTo(t),e("<span "+s.attr("for")+'="'+i.field+'" class="k-invalid-msg"/>').hide().appendTo(t)}},g=a.extend({init:function(t,i){i.target&&(i.$angular=i.target.options.$angular),a.fn.init.call(this,t,i),this._validateProxy=e.proxy(this._validate,this),this.refresh()},events:["change"],options:{name:"Editable",editors:m,clearContainer:!0,errorTemplate:'<div class="k-widget k-tooltip k-tooltip-validation" style="margin:0.5em"><span class="k-icon k-warning"> </span>#=message#<div class="k-callout k-callout-n"></div></div>'},editor:function(e,t){var n=this.options.editors,r=u(e),o=r?e.field:e,a=this.options.model||{},d=r&&e.values?"values":i(t),c=r&&e.editor,h=c?e.editor:n[d],p=this.element.find("["+s.attr("container-for")+"="+o.replace(f,"\\$1")+"]");h=h||n.string,c&&"string"==typeof e.editor&&(h=function(t){t.append(e.editor)}),h(p=p.length?p:this.element,l(!0,{},r?e:{field:o},{model:a}))},_validate:function(t){var i,n=t.value,r=this._validationEventInProgress,o={},a=s.attr("bind"),l=t.field.replace(f,"\\$1"),d=new RegExp("(value|checked)\\s*:\\s*"+l+"\\s*(,|$)");o[t.field]=t.value,(i=e(":input["+a+'*="'+l+'"]',this.element).filter("["+s.attr("validate")+"!='false']").filter(function(){return d.test(e(this).attr(a))})).length>1&&(i=i.filter(function(){var t=e(this);return!t.is(":radio")||t.val()==n}));try{this._validationEventInProgress=!0,(!this.validatable.validateInput(i)||!r&&this.trigger("change",{values:o}))&&t.preventDefault()}finally{this._validationEventInProgress=!1}},end:function(){return this.validatable.validate()},destroy:function(){var e=this;e.angular("cleanup",function(){return{elements:e.element}}),a.fn.destroy.call(e),e.options.model.unbind("set",e._validateProxy),s.unbind(e.element),e.validatable&&e.validatable.destroy(),s.destroy(e.element),e.element.removeData("kendoValidator"),e.element.is("["+s.attr("role")+"=editable]")&&e.element.removeAttr(s.attr("role"))},refresh:function(){var t,i,n,o,a,l,c=this.options.fields||[],h=this.options.clearContainer?this.element.empty():this.element,f=this.options.model||{},p={};for(e.isArray(c)||(c=[c]),t=0,i=c.length;t<i;t++)n=c[t],o=u(n)?n.field:n,r(a=(f.fields||f)[o],p),this.editor(n,a);if(this.options.target&&this.angular("compile",function(){return{elements:h,data:h.map(function(){return{dataItem:f}})}}),!i){l=f.fields||f;for(o in l)r(l[o],p)}!function(t){t.find(":input:not(:button, ["+s.attr("role")+"=upload], ["+s.attr("skip")+"], [type=file]), select").each(function(){var t=s.attr("bind"),i=this.getAttribute(t)||"",n="checkbox"===this.type||"radio"===this.type?"checked:":"value:",r=this.name;-1===i.indexOf(n)&&r&&(i+=(i.length?",":"")+n+r,e(this).attr(t,i))})}(h),this.validatable&&this.validatable.destroy(),s.bind(h,this.options.model),this.options.model.unbind("set",this._validateProxy),this.options.model.bind("set",this._validateProxy),this.validatable=new s.ui.Validator(h,{validateOnBlur:!1,errorTemplate:this.options.errorTemplate||void 0,rules:p});var m=h.find(":kendoFocusable").eq(0).focus();d&&m.focus()}});o.plugin(g)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.window",["kendo.draganddrop"],function(){return function(e,t){function i(e){return void 0!==e}function n(e,t,i){return Math.max(Math.min(parseInt(e,10),i===1/0?i:parseInt(i,10)),parseInt(t,10))}function r(){return!this.type||this.type.toLowerCase().indexOf("script")>=0}function s(e){this.owner=e,this._draggable=new c(e.wrapper,{filter:">"+y,group:e.wrapper.id+"-resizing",dragstart:f(this.dragstart,this),drag:f(this.drag,this),dragend:f(this.dragend,this)}),this._draggable.userEvents.bind("press",f(this.addOverlay,this)),this._draggable.userEvents.bind("release",f(this.removeOverlay,this))}function o(e,t){this.owner=e,this._draggable=new c(e.wrapper,{filter:t,group:e.wrapper.id+"-moving",dragstart:f(this.dragstart,this),drag:f(this.drag,this),dragend:f(this.dragend,this),dragcancel:f(this.dragcancel,this)}),this._draggable.userEvents.stopPropagation=!1}var a,l=window.kendo,d=l.ui.Widget,c=l.ui.Draggable,u=e.isPlainObject,h=l._activeElement,f=e.proxy,p=e.extend,m=e.each,g=l.template,v=".kendoWindow",_=".k-window",b=".k-window-title",k=b+"bar",w=".k-window-content",y=".k-resize-handle",x=".k-overlay",C="k-content-frame",S=":visible",T="overflow",D=".k-window-actions .k-i-minimize,.k-window-actions .k-i-maximize",F=".k-i-pin,.k-i-unpin",E=".k-window-titlebar .k-window-action",R=".k-window-titlebar .k-i-refresh",A=l.isLocalUrl,I=d.extend({init:function(t,n){var s,o,a,c,h,p,m,g={},y=n&&n.actions&&!n.actions.length;d.fn.init.call(this,t,n),c=(n=this.options).position,t=this.element,h=n.content,y&&(n.actions=[]),this.appendTo=e(n.appendTo),h&&!u(h)&&(h=n.content={url:h}),t.find("script").filter(r).remove(),t.parent().is(this.appendTo)||void 0!==c.top&&void 0!==c.left||(t.is(S)?g=t.offset():(o=t.css("visibility"),a=t.css("display"),t.css({visibility:"hidden",display:""}),g=t.offset(),t.css({visibility:o,display:a})),void 0===c.top&&(c.top=g.top),void 0===c.left&&(c.left=g.left)),i(n.visible)&&null!==n.visible||(n.visible=t.is(S)),s=this.wrapper=t.closest(_),t.is(".k-content")&&s[0]||(t.addClass("k-window-content k-content"),this._createWindow(t,n),s=this.wrapper=t.closest(_),this._dimensions()),this._position(),n.pinned&&this.pin(!0),h&&this.refresh(h),n.visible&&this.toFront(),p=s.children(w),this._tabindex(p),n.visible&&n.modal&&this._overlay(s.is(S)).css({opacity:.5}),s.on("mouseenter"+v,E,f(this._buttonEnter,this)).on("mouseleave"+v,E,f(this._buttonLeave,this)).on("click"+v,"> "+E,f(this._windowActionHandler,this)),p.on("keydown"+v,f(this._keydown,this)).on("focus"+v,f(this._focus,this)).on("blur"+v,f(this._blur,this)),this._resizable(),this._draggable(),(m=t.attr("id"))&&(m+="_wnd_title",s.children(k).children(b).attr("id",m),p.attr({role:"dialog","aria-labelledby":m})),s.add(s.children(".k-resize-handle,"+k)).on("mousedown"+v,f(this.toFront,this)),this.touchScroller=l.touchScroller(t),this._resizeHandler=f(this._onDocumentResize,this),this._marker=l.guid().substring(0,8),e(window).on("resize"+v+this._marker,this._resizeHandler),n.visible&&(this.trigger("open"),this.trigger("activate")),l.notify(this)},_buttonEnter:function(t){e(t.currentTarget).addClass("k-state-hover")},_buttonLeave:function(t){e(t.currentTarget).removeClass("k-state-hover")},_focus:function(){this.wrapper.addClass("k-state-focused")},_blur:function(){this.wrapper.removeClass("k-state-focused")},_dimensions:function(){var e=this.wrapper,t=this.options,i=t.width,r=t.height,s=t.maxHeight,o=["minWidth","minHeight","maxWidth","maxHeight"];this.title(t.title);for(var a=0;a<o.length;a++){var l=t[o[a]];l&&l!=1/0&&e.css(o[a],l)}s&&s!=1/0&&this.element.css("maxHeight",s),i&&(i.toString().indexOf("%")>0?e.width(i):e.width(n(i,t.minWidth,t.maxWidth))),r&&(r.toString().indexOf("%")>0?e.height(r):e.height(n(r,t.minHeight,t.maxHeight))),t.visible||e.hide()},_position:function(){var e=this.wrapper,t=this.options.position;0===t.top&&(t.top=t.top.toString()),0===t.left&&(t.left=t.left.toString()),e.css({top:t.top||"",left:t.left||""})},_animationOptions:function(e){var t=this.options.animation;return t&&t[e]||{open:{effects:{}},close:{hide:!0,effects:{}}}[e]},_resize:function(){l.resize(this.element.children())},_resizable:function(){var t=this.options.resizable,i=this.wrapper;this.resizing&&(i.off("dblclick"+v).children(y).remove(),this.resizing.destroy(),this.resizing=null),t&&(i.on("dblclick"+v,k,f(function(t){e(t.target).closest(".k-window-action").length||this.toggleMaximization()},this)),m("n e s w se sw ne nw".split(" "),function(e,t){i.append(a.resizeHandle(t))}),this.resizing=new s(this)),i=null},_draggable:function(){var e=this.options.draggable;this.dragging&&(this.dragging.destroy(),this.dragging=null),e&&(this.dragging=new o(this,e.dragHandle||k))},_actions:function(){var t=this.options.actions,i=this.wrapper.children(k).find(".k-window-actions");t=e.map(t,function(e){return{name:e}}),i.html(l.render(a.action,t))},setOptions:function(e){d.fn.setOptions.call(this,e);var t=!1!==this.options.scrollable;if(this.restore(),this._dimensions(),this._position(),this._resizable(),this._draggable(),this._actions(),void 0!==e.modal){var i=!1!==this.options.visible;this._overlay(e.modal&&i)}this.element.css(T,t?"":"hidden")},events:["open","activate","deactivate","close","minimize","maximize","refresh","resize","resizeEnd","dragstart","dragend","error"],options:{name:"Window",animation:{open:{effects:{zoom:{direction:"in"},fade:{direction:"in"}},duration:350},close:{effects:{zoom:{direction:"out",properties:{scale:.7}},fade:{direction:"out"}},duration:350,hide:!0}},title:"",actions:["Close"],autoFocus:!0,modal:!1,resizable:!0,draggable:!0,minWidth:90,minHeight:50,maxWidth:1/0,maxHeight:1/0,pinned:!1,scrollable:!0,position:{},content:null,visible:null,height:null,width:null,appendTo:"body"},_closable:function(){return e.inArray("close",e.map(this.options.actions,function(e){return e.toLowerCase()}))>-1},_keydown:function(e){var t,i,r,s,o,a,d=this.options,c=l.keys,u=e.keyCode,h=this.wrapper,f=this.options.isMaximized;e.target!=e.currentTarget||this._closing||(u==c.ESC&&this._closable()&&this._close(!1),!d.draggable||e.ctrlKey||f||(t=l.getOffset(h),u==c.UP?i=h.css("top",t.top-10):u==c.DOWN?i=h.css("top",t.top+10):u==c.LEFT?i=h.css("left",t.left-10):u==c.RIGHT&&(i=h.css("left",t.left+10))),d.resizable&&e.ctrlKey&&!f&&(u==c.UP?(i=!0,s=h.height()-10):u==c.DOWN&&(i=!0,s=h.height()+10),u==c.LEFT?(i=!0,r=h.width()-10):u==c.RIGHT&&(i=!0,r=h.width()+10),i&&(o=n(r,d.minWidth,d.maxWidth),a=n(s,d.minHeight,d.maxHeight),isNaN(o)||(h.width(o),this.options.width=o+"px"),isNaN(a)||(h.height(a),this.options.height=a+"px"),this.resize())),i&&e.preventDefault())},_overlay:function(t){var i=this.appendTo.children(x),n=this.wrapper;return i.length||(i=e("<div class='k-overlay' />")),i.insertBefore(n[0]).toggle(t).css("zIndex",parseInt(n.css("zIndex"),10)-1),i},_actionForIcon:function(e){return{"k-i-close":"_close","k-i-maximize":"maximize","k-i-minimize":"minimize","k-i-restore":"restore","k-i-refresh":"refresh","k-i-pin":"pin","k-i-unpin":"unpin"}[/\bk-i-\w+\b/.exec(e[0].className)[0]]},_windowActionHandler:function(t){if(!this._closing){var i=e(t.target).closest(".k-window-action").find(".k-icon"),n=this._actionForIcon(i);return n?(t.preventDefault(),this[n](),!1):void 0}},_modals:function(){var t=this,i=e(_).filter(function(){var i=e(this),n=t._object(i),r=n&&n.options;return r&&r.modal&&r.visible&&r.appendTo===t.options.appendTo&&i.is(S)}).sort(function(t,i){return+e(t).css("zIndex")-+e(i).css("zIndex")});return t=null,i},_object:function(e){var t=e.children(w),i=l.widgetInstance(t);if(i instanceof I)return i},center:function(){var t,i,n=this.options.position,r=this.wrapper,s=e(window),o=0,a=0;return this.options.isMaximized?this:(this.options.pinned||(o=s.scrollTop(),a=s.scrollLeft()),i=a+Math.max(0,(s.width()-r.width())/2),t=o+Math.max(0,(s.height()-r.height()-parseInt(r.css("paddingTop"),10))/2),r.css({left:i,top:t}),n.top=t,n.left=i,this)},title:function(e){var t,i=this.wrapper,n=this.options,r=i.children(k),s=r.children(b);return arguments.length?(!1===e?(i.addClass("k-window-titleless"),r.remove()):(r.length?s.html(e):(i.prepend(a.titlebar(n)),this._actions(),r=i.children(k)),t=r.outerHeight(),i.css("padding-top",t),r.css("margin-top",-t)),this.options.title=e,this):s.html()},content:function(e,t){var n=this.wrapper.children(w),r=n.children(".km-scroll-container");return n=r[0]?r:n,i(e)?(this.angular("cleanup",function(){return{elements:n.children()}}),l.destroy(this.element.children()),n.empty().html(e),this.angular("compile",function(){for(var e=[],i=n.length;--i>=0;)e.push({dataItem:t});return{elements:n.children(),data:e}}),this):n.html()},open:function(){var t,i=this.wrapper,n=this.options,r=this._animationOptions("open"),s=i.children(w),o=e(document);if(!this.trigger("open")){if(this._closing&&i.kendoStop(!0,!0),this._closing=!1,this.toFront(),n.autoFocus&&this.element.focus(),n.visible=!0,n.modal){if((t=this._overlay(!1)).kendoStop(!0,!0),r.duration&&l.effects.Fade){var a=l.fx(t).fadeIn();a.duration(r.duration||0),a.endValue(.5),a.play()}else t.css("opacity",.5);t.show()}i.is(S)||(s.css(T,"hidden"),i.show().kendoStop().kendoAnimate({effects:r.effects,duration:r.duration,complete:f(this._activate,this)}))}return n.isMaximized&&(this._documentScrollTop=o.scrollTop(),this._documentScrollLeft=o.scrollLeft(),e("html, body").css(T,"hidden")),this},_activate:function(){var e=!1!==this.options.scrollable;this.options.autoFocus&&this.element.focus(),this.element.css(T,e?"":"hidden"),this.trigger("activate")},_removeOverlay:function(t){var i=this._modals(),n=this.options,r=n.modal&&!i.length,s=n.modal?this._overlay(!0):e(void 0),o=this._animationOptions("close");if(r)if(!t&&o.duration&&l.effects.Fade){var a=l.fx(s).fadeOut();a.duration(o.duration||0),a.startValue(.5),a.play()}else this._overlay(!1).remove();else i.length&&this._object(i.last())._overlay(!0)},_close:function(t){var i=this.wrapper,n=this.options,r=this._animationOptions("open"),s=this._animationOptions("close"),o=e(document);if(i.is(S)&&!this.trigger("close",{userTriggered:!t})){if(this._closing)return;this._closing=!0,n.visible=!1,e(_).each(function(t,n){var r=e(n).children(w);n!=i&&r.find("> ."+C).length>0&&r.children(x).remove()}),this._removeOverlay(),i.kendoStop().kendoAnimate({effects:s.effects||r.effects,reverse:!0===s.reverse,duration:s.duration,complete:f(this._deactivate,this)})}this.options.isMaximized&&(e("html, body").css(T,""),this._documentScrollTop&&this._documentScrollTop>0&&o.scrollTop(this._documentScrollTop),this._documentScrollLeft&&this._documentScrollLeft>0&&o.scrollLeft(this._documentScrollLeft))},_deactivate:function(){if(this.wrapper.hide().css("opacity",""),this.trigger("deactivate"),this.options.modal){var e=this._object(this._modals().last());e&&e.toFront()}},close:function(){return this._close(!0),this},_actionable:function(t){return e(t).is(E+","+E+" .k-icon,:input,a")},_shouldFocus:function(t){var i=h(),n=this.element;return this.options.autoFocus&&!e(i).is(n)&&!this._actionable(t)&&(!n.find(i).length||!n.find(t).length)},toFront:function(t){var i=this.wrapper,n=i[0],r=+i.css("zIndex"),s=r,o=t&&t.target||null;if(e(_).each(function(t,i){var s=e(i),o=s.css("zIndex"),l=s.children(w);isNaN(o)||(r=Math.max(+o,r)),i!=n&&l.find("> ."+C).length>0&&l.append(a.overlay)}),(!i[0].style.zIndex||s<r)&&i.css("zIndex",r+2),this.element.find("> .k-overlay").remove(),this._shouldFocus(o)){this.element.focus();var l=e(window).scrollTop(),d=parseInt(i.position().top,10);d>0&&d<l&&(l>0?e(window).scrollTop(d):i.css("top",l))}return i=null,this},toggleMaximization:function(){return this._closing?this:this[this.options.isMaximized?"restore":"maximize"]()},restore:function(){var t=this.options,i=t.minHeight,n=this.restoreOptions,r=e(document);return t.isMaximized||t.isMinimized?(i&&i!=1/0&&this.wrapper.css("min-height",i),this.wrapper.css({position:t.pinned?"fixed":"absolute",left:n.left,top:n.top,width:n.width,height:n.height}).removeClass("k-window-maximized").find(".k-window-content,.k-resize-handle").show().end().find(".k-window-titlebar .k-i-restore").parent().remove().end().end().find(D).parent().show().end().end().find(F).parent().show(),this.options.width=n.width,this.options.height=n.height,e("html, body").css(T,""),this._documentScrollTop&&this._documentScrollTop>0&&r.scrollTop(this._documentScrollTop),this._documentScrollLeft&&this._documentScrollLeft>0&&r.scrollLeft(this._documentScrollLeft),t.isMaximized=t.isMinimized=!1,this.resize(),this):this},_sizingAction:function(e,t){var i=this.wrapper,n=i[0].style,r=this.options;return r.isMaximized||r.isMinimized?this:(this.restoreOptions={width:n.width,height:n.height},i.children(y).hide().end().children(k).find(D).parent().hide().eq(0).before(a.action({name:"Restore"})),t.call(this),this.wrapper.children(k).find(F).parent().toggle("maximize"!==e),this.trigger(e),this)},maximize:function(){this._sizingAction("maximize",function(){var t=this.wrapper,i=t.position(),n=e(document);p(this.restoreOptions,{left:i.left,top:i.top}),t.css({left:0,top:0,position:"fixed"}).addClass("k-window-maximized"),this._documentScrollTop=n.scrollTop(),this._documentScrollLeft=n.scrollLeft(),e("html, body").css(T,"hidden"),this.options.isMaximized=!0,this._onDocumentResize()})},minimize:function(){this._sizingAction("minimize",function(){this.wrapper.css({height:"",minHeight:""}),this.element.hide(),this.options.isMinimized=!0})},pin:function(t){var i=e(window),n=this.wrapper,r=parseInt(n.css("top"),10),s=parseInt(n.css("left"),10);(t||!this.options.pinned&&!this.options.isMaximized)&&(n.css({position:"fixed",top:r-i.scrollTop(),left:s-i.scrollLeft()}),n.children(k).find(".k-i-pin").addClass("k-i-unpin").removeClass("k-i-pin"),this.options.pinned=!0)},unpin:function(){var t=e(window),i=this.wrapper,n=parseInt(i.css("top"),10),r=parseInt(i.css("left"),10);this.options.pinned&&!this.options.isMaximized&&(i.css({position:"",top:n+t.scrollTop(),left:r+t.scrollLeft()}),i.children(k).find(".k-i-unpin").addClass("k-i-pin").removeClass("k-i-unpin"),this.options.pinned=!1)},_onDocumentResize:function(){var t,i,n=this.wrapper,r=e(window),s=l.support.zoomLevel();this.options.isMaximized&&(t=r.width()/s,i=r.height()/s-parseInt(n.css("padding-top"),10),n.css({width:t,height:i}),this.options.width=t,this.options.height=i,this.resize())},refresh:function(t){var n,r,s,o=this.options,l=e(this.element);return u(t)||(t={url:t}),t=p({},o.content,t),r=i(o.iframe)?o.iframe:t.iframe,(s=t.url)?(i(r)||(r=!A(s)),r?((n=l.find("."+C)[0])?n.src=s||n.src:l.html(a.contentFrame(p({},o,{content:t}))),l.find("."+C).unbind("load"+v).on("load"+v,f(this._triggerRefresh,this))):this._ajaxRequest(t)):(t.template&&this.content(g(t.template)({})),this.trigger("refresh")),l.toggleClass("k-window-iframecontent",!!r),this},_triggerRefresh:function(){this.trigger("refresh")},_ajaxComplete:function(){clearTimeout(this._loadingIconTimeout),this.wrapper.find(R).removeClass("k-loading")},_ajaxError:function(e,t){this.trigger("error",{status:t,xhr:e})},_ajaxSuccess:function(e){return function(t){var i=t;e&&(i=g(e)(t||{})),this.content(i,t),this.element.prop("scrollTop",0),this.trigger("refresh")}},_showLoading:function(){this.wrapper.find(R).addClass("k-loading")},_ajaxRequest:function(t){this._loadingIconTimeout=setTimeout(f(this._showLoading,this),100),e.ajax(p({type:"GET",dataType:"html",cache:!1,error:f(this._ajaxError,this),complete:f(this._ajaxComplete,this),success:f(this._ajaxSuccess(t.template),this)},t))},_destroy:function(){this.resizing&&this.resizing.destroy(),this.dragging&&this.dragging.destroy(),this.wrapper.off(v).children(w).off(v).end().find(".k-resize-handle,.k-window-titlebar").off(v),e(window).off("resize"+v+this._marker),clearTimeout(this._loadingIconTimeout),d.fn.destroy.call(this),this.unbind(void 0),l.destroy(this.wrapper),this._removeOverlay(!0)},destroy:function(){this._destroy(),this.wrapper.empty().remove(),this.wrapper=this.appendTo=this.element=e()},_createWindow:function(){var t,i,n=this.element,r=this.options,s=l.support.isRtl(n);!1===r.scrollable&&n.attr("style","overflow:hidden;"),i=e(a.wrapper(r)),t=n.find("iframe:not(.k-content)").map(function(){var e=this.getAttribute("src");return this.src="",e}),i.toggleClass("k-rtl",s).appendTo(this.appendTo).append(n).find("iframe:not(.k-content)").each(function(e){this.src=t[e]}),i.find(".k-window-title").css(s?"left":"right",i.find(".k-window-actions").outerWidth()+10),n.css("visibility","").show(),n.find("[data-role=editor]").each(function(){var t=e(this).data("kendoEditor");t&&t.refresh()}),i=n=null}});a={wrapper:g("<div class='k-widget k-window' />"),action:g("<a role='button' href='\\#' class='k-window-action k-link'><span role='presentation' class='k-icon k-i-#= name.toLowerCase() #'>#= name #</span></a>"),titlebar:g("<div class='k-window-titlebar k-header'>&nbsp;<span class='k-window-title'>#= title #</span><div class='k-window-actions' /></div>"),overlay:"<div class='k-overlay' />",contentFrame:g("<iframe frameborder='0' title='#= title #' class='"+C+"' src='#= content.url #'>This page requires frames in order to show content</iframe>"),resizeHandle:g("<div class='k-resize-handle k-resize-#= data #'></div>")},s.prototype={addOverlay:function(){this.owner.wrapper.append(a.overlay)},removeOverlay:function(){this.owner.wrapper.find(x).remove()},dragstart:function(t){var i=this.owner,n=i.wrapper;this.elementPadding=parseInt(n.css("padding-top"),10),this.initialPosition=l.getOffset(n,"position"),this.resizeDirection=t.currentTarget.prop("className").replace("k-resize-handle k-resize-",""),this.initialSize={width:n.width(),height:n.height()},this.containerOffset=l.getOffset(i.appendTo,"position"),n.children(y).not(t.currentTarget).hide(),e("body").css("cursor",t.currentTarget.css("cursor"))},drag:function(e){var t,i,r,s,o=this.owner,a=o.wrapper,l=o.options,d=this.resizeDirection,c=this.containerOffset,u=this.initialPosition,h=this.initialSize,f=Math.max(e.x.location,c.left),p=Math.max(e.y.location,c.top);d.indexOf("e")>=0?(t=f-u.left,a.width(n(t,l.minWidth,l.maxWidth))):d.indexOf("w")>=0&&(t=n((s=u.left+h.width)-f,l.minWidth,l.maxWidth),a.css({left:s-t-c.left,width:t})),d.indexOf("s")>=0?(i=p-u.top-this.elementPadding,a.height(n(i,l.minHeight,l.maxHeight))):d.indexOf("n")>=0&&(i=n((r=u.top+h.height)-p,l.minHeight,l.maxHeight),a.css({top:r-i-c.top,height:i})),t&&(o.options.width=t+"px"),i&&(o.options.height=i+"px"),o.resize()},dragend:function(t){var i=this.owner,n=i.wrapper;return n.children(y).not(t.currentTarget).show(),e("body").css("cursor",""),i.touchScroller&&i.touchScroller.reset(),27==t.keyCode&&n.css(this.initialPosition).css(this.initialSize),i.trigger("resizeEnd"),!1},destroy:function(){this._draggable&&this._draggable.destroy(),this._draggable=this.owner=null}},o.prototype={dragstart:function(t){var i=this.owner,n=i.element,r=n.find(".k-window-actions"),s=l.getOffset(i.appendTo);i.trigger("dragstart"),i.initialWindowPosition=l.getOffset(i.wrapper,"position"),i.initialPointerPosition={left:t.x.client,top:t.y.client},i.startPosition={left:t.x.client-i.initialWindowPosition.left,top:t.y.client-i.initialWindowPosition.top},r.length>0?i.minLeftPosition=r.outerWidth()+parseInt(r.css("right"),10)-n.outerWidth():i.minLeftPosition=20-n.outerWidth(),i.minLeftPosition-=s.left,i.minTopPosition=-s.top,i.wrapper.append(a.overlay).children(y).hide(),e("body").css("cursor",t.currentTarget.css("cursor"))},drag:function(t){var i=this.owner,n=i.options.position;n.top=Math.max(t.y.client-i.startPosition.top,i.minTopPosition),n.left=Math.max(t.x.client-i.startPosition.left,i.minLeftPosition),l.support.transforms?e(i.wrapper).css("transform","translate("+(t.x.client-i.initialPointerPosition.left)+"px, "+(t.y.client-i.initialPointerPosition.top)+"px)"):e(i.wrapper).css(n)},_finishDrag:function(){var t=this.owner;t.wrapper.children(y).toggle(!t.options.isMinimized).end().find(x).remove(),e("body").css("cursor","")},dragcancel:function(e){this._finishDrag(),e.currentTarget.closest(_).css(this.owner.initialWindowPosition)},dragend:function(){return e(this.owner.wrapper).css(this.owner.options.position).css("transform",""),this._finishDrag(),this.owner.trigger("dragend"),!1},destroy:function(){this._draggable&&this._draggable.destroy(),this._draggable=this.owner=null}},l.ui.plugin(I)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.mobile.view",["kendo.core","kendo.fx","kendo.mobile.scroller","kendo.view"],function(){return function(e,t){function i(e){var t,i,n=e.find(h("popover")),r=a.roles;for(t=0,i=n.length;t<i;t++)s.initWidget(n[t],{},r)}function n(e){s.triggeredByInput(e)||e.preventDefault()}function r(t){t.each(function(){s.initWidget(e(this),{},a.roles)})}var s=window.kendo,o=s.mobile,a=o.ui,l=s.attr,d=a.Widget,c=s.ViewClone,u=s.attrValue,h=s.roleSelector,f=s.directiveSelector,p=s.compileMobileDirective,m=d.extend({init:function(t,i){d.fn.init.call(this,t,i),this.params={},e.extend(this,i),this.transition=this.transition||this.defaultTransition,this._id(),this.options.$angular?this._overlay():(this._layout(),this._overlay(),this._scroller(),this._model())},events:["init","beforeShow","show","afterShow","beforeHide","hide","destroy","transitionStart","transitionEnd"],options:{name:"View",title:"",layout:null,getLayout:e.noop,reload:!1,transition:"",defaultTransition:"",useNativeScrolling:!1,stretch:!1,zoom:!1,model:null,modelScope:window,scroller:{},initWidgets:!0},enable:function(e){void 0===e&&(e=!0),e?this.overlay.hide():this.overlay.show()},destroy:function(){this.layout&&this.layout.detach(this),this.trigger("destroy"),d.fn.destroy.call(this),this.scroller&&this.scroller.destroy(),this.options.$angular&&this.element.scope().$destroy(),s.destroy(this.element)},purge:function(){this.destroy(),this.element.remove()},triggerBeforeShow:function(){return!this.trigger("beforeShow",{view:this})},triggerBeforeHide:function(){return!this.trigger("beforeHide",{view:this})},showStart:function(){var e=this.element;e.css("display",""),this.inited?this._invokeNgController():(this.inited=!0,this.trigger("init",{view:this})),this.layout&&this.layout.attach(this),this._padIfNativeScrolling(),this.trigger("show",{view:this}),s.resize(e)},showEnd:function(){this.trigger("afterShow",{view:this}),this._padIfNativeScrolling()},hideEnd:function(){this.element.hide(),this.trigger("hide",{view:this}),this.layout&&this.layout.trigger("hide",{view:this,layout:this.layout})},beforeTransition:function(e){this.trigger("transitionStart",{type:e})},afterTransition:function(e){this.trigger("transitionEnd",{type:e})},_padIfNativeScrolling:function(){if(o.appLevelNativeScrolling()){var e=s.support.mobileOS&&s.support.mobileOS.android,t=o.application.skin()||"",i=o.application.os.android||t.indexOf("android")>-1,n="flat"===t||t.indexOf("material")>-1,r=!e&&!i||n?"header":"footer",a=!e&&!i||n?"footer":"header";this.content.css({paddingTop:this[r].height(),paddingBottom:this[a].height()})}},contentElement:function(){return this.options.stretch?this.content:this.scrollerContent},clone:function(){return new c(this)},_scroller:function(){o.appLevelNativeScrolling()||(this.options.stretch?this.content.addClass("km-stretched-view"):(this.content.kendoMobileScroller(e.extend(this.options.scroller,{zoom:this.options.zoom,useNative:this.options.useNativeScrolling})),this.scroller=this.content.data("kendoMobileScroller"),this.scrollerContent=this.scroller.scrollElement),s.support.kineticScrollNeeded&&(e(this.element).on("touchmove",".km-header",n),this.options.useNativeScrolling||this.options.stretch||e(this.element).on("touchmove",".km-content",n)))},_model:function(){var e=this.element,t=this.options.model;"string"==typeof t&&(t=s.getter(t)(this.options.modelScope)),this.model=t,i(e),this.element.css("display",""),this.options.initWidgets&&(t?s.bind(e,t,a,s.ui,s.dataviz.ui):o.init(e.children())),this.element.css("display","none")},_id:function(){var e=this.element,t=e.attr("id")||"";this.id=u(e,"url")||"#"+t,"#"==this.id&&(this.id=s.guid(),e.attr("id",this.id))},_layout:function(){var e=h("content"),t=this.element;t.addClass("km-view"),this.header=t.children(h("header")).addClass("km-header"),this.footer=t.children(h("footer")).addClass("km-footer"),t.children(e)[0]||t.wrapInner("<div "+l("role")+'="content"></div>'),this.content=t.children(h("content")).addClass("km-content"),this.element.prepend(this.header).append(this.footer),this.layout=this.options.getLayout(this.layout),this.layout&&this.layout.setup(this)},_overlay:function(){this.overlay=e('<div style="height: 100%; width: 100%; position: absolute; top: 0; left: 0; z-index: 20000; display: none" />').appendTo(this.element)},_invokeNgController:function(){var t,i;if(this.options.$angular&&(t=this.element.controller(),i=this.options.$angular[0],t)){var n=e.proxy(this,"_callController",t,i);/^\$(digest|apply)$/.test(i.$$phase)?n():i.$apply(n)}},_callController:function(e,t){this.element.injector().invoke(e.constructor,e,{$scope:t})}}),g=d.extend({init:function(e,t){d.fn.init.call(this,e,t),e=this.element,this.header=e.children(this._locate("header")).addClass("km-header"),this.footer=e.children(this._locate("footer")).addClass("km-footer"),this.elements=this.header.add(this.footer),i(e),this.options.$angular||s.mobile.init(this.element.children()),this.element.detach(),this.trigger("init",{layout:this})},_locate:function(e){return this.options.$angular?f(e):h(e)},options:{name:"Layout",id:null,platform:null},events:["init","show","hide"],setup:function(e){e.header[0]||(e.header=this.header),e.footer[0]||(e.footer=this.footer)},detach:function(e){e.header===this.header&&this.header[0]&&e.element.prepend(this.header.detach()[0].cloneNode(!0)),e.footer===this.footer&&this.footer.length&&e.element.append(this.footer.detach()[0].cloneNode(!0))},attach:function(e){var t=this.currentView;t&&this.detach(t),e.header===this.header&&(this.header.detach(),e.element.children(h("header")).remove(),e.element.prepend(this.header)),e.footer===this.footer&&(this.footer.detach(),e.element.children(h("footer")).remove(),e.element.append(this.footer)),this.trigger("show",{layout:this,view:e}),this.currentView=e}}),v=s.Observable,_=/<body[^>]*>(([\u000a\u000d\u2028\u2029]|.)*)<\/body>/i,b=v.extend({init:function(t){var i,n,o,a,l=this;if(v.fn.init.call(l),e.extend(l,t),l.sandbox=e("<div />"),o=l.container,i=l._hideViews(o),l.rootView=i.first(),!l.rootView[0]&&t.rootNeeded)throw n=o[0]==s.mobile.application.element[0]?'Your kendo mobile application element does not contain any direct child elements with data-role="view" attribute set. Make sure that you instantiate the mobile application using the correct container.':'Your pane element does not contain any direct child elements with data-role="view" attribute set.',new Error(n);l.layouts={},l.viewContainer=new s.ViewContainer(l.container),l.viewContainer.bind("accepted",function(e){e.view.params=l.params}),l.viewContainer.bind("complete",function(e){l.trigger("viewShow",{view:e.view})}),l.viewContainer.bind("after",function(){l.trigger("after")}),this.getLayoutProxy=e.proxy(this,"_getLayout"),l._setupLayouts(o),a=o.children(l._locate("modalview drawer")),l.$angular?(l.$angular[0].viewOptions={defaultTransition:l.transition,loader:l.loader,container:l.container,getLayout:l.getLayoutProxy},a.each(function(i,n){p(e(n),t.$angular[0])})):r(a),this.bind(this.events,t)},events:["showStart","after","viewShow","loadStart","loadComplete","sameViewRequested","viewTypeDetermined"],destroy:function(){s.destroy(this.container);for(var e in this.layouts)this.layouts[e].destroy()},view:function(){return this.viewContainer.view},showView:function(e,t,i){if(""===(e=e.replace(new RegExp("^"+this.remoteViewURLPrefix),""))&&this.remoteViewURLPrefix&&(e="/"),e.replace(/^#/,"")===this.url)return this.trigger("sameViewRequested"),!1;this.trigger("showStart");var n=this,r=function(i){return n.viewContainer.show(i,t,e)},o=n._findViewElement(e),a=s.widgetInstance(o);return n.url=e.replace(/^#/,""),n.params=i,a&&a.reload&&(a.purge(),o=[]),this.trigger("viewTypeDetermined",{remote:0===o.length,url:e}),o[0]?(a||(a=n._createView(o)),r(a)):(this.serverNavigation?location.href=e:n._loadView(e,r),!0)},append:function(e,t){var i,n,s,o=this.sandbox,a=(t||"").split("?")[0],d=this.container;return _.test(e)&&(e=RegExp.$1),o[0].innerHTML=e,d.append(o.children("script, style")),i=this._hideViews(o),(s=i.first()).length||(i=s=o.wrapInner("<div data-role=view />").children()),a&&s.hide().attr(l("url"),a),this._setupLayouts(o),n=o.children(this._locate("modalview drawer")),d.append(o.children(this._locate("layout modalview drawer")).add(i)),r(n),this._createView(s)},_locate:function(e){return this.$angular?f(e):h(e)},_findViewElement:function(e){var t,i=e.split("?")[0];return i?((t=this.container.children("["+l("url")+"='"+i+"']"))[0]||-1!==i.indexOf("/")||(t=this.container.children("#"===i.charAt(0)?i:"#"+i)),t):this.rootView},_createView:function(e){return this.$angular?p(e,this.$angular[0]):s.initWidget(e,{defaultTransition:this.transition,loader:this.loader,container:this.container,getLayout:this.getLayoutProxy,modelScope:this.modelScope,reload:u(e,"reload")},a.roles)},_getLayout:function(e){return""===e?null:e?this.layouts[e]:this.layouts[this.layout]},_loadView:function(t,i){this._xhr&&this._xhr.abort(),this.trigger("loadStart"),this._xhr=e.get(s.absoluteURL(t,this.remoteViewURLPrefix),"html").always(e.proxy(this,"_xhrComplete",i,t))},_xhrComplete:function(e,t,i){var n=!0;if("object"==typeof i&&0===i.status){if(!(i.responseText&&i.responseText.length>0))return;n=!0,i=i.responseText}this.trigger("loadComplete"),n&&e(this.append(i,t))},_hideViews:function(e){return e.children(this._locate("view splitview")).hide()},_setupLayouts:function(t){var i,n=this;t.children(n._locate("layout")).each(function(){var t=(i=n.$angular?p(e(this),n.$angular[0]):s.initWidget(e(this),{},a.roles)).options.platform;t&&t!==o.application.os.name?i.destroy():n.layouts[i.options.id]=i})}});s.mobile.ViewEngine=b,a.plugin(m),a.plugin(g)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.mobile.loader",["kendo.core"],function(){return function(e,t){var i=window.kendo,n=i.mobile.ui,r=n.Widget,s=e.map(i.eventMap,function(e){return e}).join(" ").split(" "),o=r.extend({init:function(t,i){var n=e('<div class="km-loader"><span class="km-loading km-spin"></span><span class="km-loading-left"></span><span class="km-loading-right"></span></div>');r.fn.init.call(this,n,i),this.container=t,this.captureEvents=!1,this._attachCapture(),n.append(this.options.loading).hide().appendTo(t)},options:{name:"Loader",loading:"<h1>Loading...</h1>",timeout:100},show:function(){var e=this;clearTimeout(e._loading),!1!==e.options.loading&&(e.captureEvents=!0,e._loading=setTimeout(function(){e.element.show()},e.options.timeout))},hide:function(){this.captureEvents=!1,clearTimeout(this._loading),this.element.hide()},changeMessage:function(e){this.options.loading=e,this.element.find(">h1").html(e)},transition:function(){this.captureEvents=!0,this.container.css("pointer-events","none")},transitionDone:function(){this.captureEvents=!1,this.container.css("pointer-events","")},_attachCapture:function(){function e(e){t.captureEvents&&e.preventDefault()}var t=this;t.captureEvents=!1;for(var i=0;i<s.length;i++)t.container[0].addEventListener(s[i],e,!0)}});n.plugin(o)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.mobile.pane",["kendo.mobile.view","kendo.mobile.loader"],function(){return function(e,t){var i=window.kendo,n=i.mobile,r=i.roleSelector,s=n.ui,o=s.Widget,a=n.ViewEngine,l=s.View,d=n.ui.Loader,c="sameViewRequested",u=i.support.mobileOS,h=u.ios&&!u.appMode&&u.flatVersion>=700,f=/popover|actionsheet|modalview|drawer/,p=i.attrValue,m=o.extend({init:function(e,t){var n=this;o.fn.init.call(n,e,t),t=n.options,(e=n.element).addClass("km-pane"),n.options.collapsible&&e.addClass("km-collapsible-pane"),this.history=[],this.historyCallback=function(e,t,i){var r=n.transition;return n.transition=null,h&&i&&(r="none"),n.viewEngine.showView(e,r,t)},this._historyNavigate=function(e){if("#:back"===e){if(1===n.history.length)return;n.history.pop(),e=n.history[n.history.length-1]}else n.history.push(e);n.historyCallback(e,i.parseQueryStringParams(e))},this._historyReplace=function(e){var t=i.parseQueryStringParams(e);n.history[n.history.length-1]=e,n.historyCallback(e,t)},n.loader=new d(e,{loading:n.options.loading}),n.viewEngine=new a({container:e,transition:t.transition,modelScope:t.modelScope,rootNeeded:!t.initial,serverNavigation:t.serverNavigation,remoteViewURLPrefix:t.root||"",layout:t.layout,$angular:t.$angular,loader:n.loader,showStart:function(){n.loader.transition(),n.closeActiveDialogs()},after:function(){n.loader.transitionDone()},viewShow:function(e){n.trigger("viewShow",e)},loadStart:function(){n.loader.show()},loadComplete:function(){n.loader.hide()},sameViewRequested:function(){n.trigger(c)},viewTypeDetermined:function(e){e.remote&&n.options.serverNavigation||n.trigger("navigate",{url:e.url})}}),this._setPortraitWidth(),i.onResize(function(){n._setPortraitWidth()}),n._setupAppLinks()},closeActiveDialogs:function(){this.element.find(r("actionsheet popover modalview")).filter(":visible").each(function(){i.widgetInstance(e(this),s).close()})},navigateToInitial:function(){var e=this.options.initial;return e&&this.navigate(e),e},options:{name:"Pane",portraitWidth:"",transition:"",layout:"",collapsible:!1,initial:null,modelScope:window,loading:"<h1>Loading...</h1>"},events:["navigate","viewShow",c],append:function(e){return this.viewEngine.append(e)},destroy:function(){o.fn.destroy.call(this),this.viewEngine.destroy(),this.userEvents.destroy()},navigate:function(e,t){e instanceof l&&(e=e.id),this.transition=t,this._historyNavigate(e)},replace:function(e,t){e instanceof l&&(e=e.id),this.transition=t,this._historyReplace(e)},bindToRouter:function(e){var t=this,n=this.history,r=this.viewEngine;e.bind("init",function(t){var s=t.url,o=e.pushState?s:"/";r.rootView.attr(i.attr("url"),o);var a=n.length;"/"===s&&a&&(e.navigate(n[a-1],!0),t.preventDefault())}),e.bind("routeMissing",function(e){t.historyCallback(e.url,e.params,e.backButtonPressed)||e.preventDefault()}),e.bind("same",function(){t.trigger(c)}),t._historyNavigate=function(t){e.navigate(t)},t._historyReplace=function(t){e.replace(t)}},hideLoading:function(){this.loader.hide()},showLoading:function(){this.loader.show()},changeLoadingMessage:function(e){this.loader.changeMessage(e)},view:function(){return this.viewEngine.view()},_setPortraitWidth:function(){var e,t=this.options.portraitWidth;t&&(e=i.mobile.application.element.is(".km-vertical")?t:"auto",this.element.css("width",e))},_setupAppLinks:function(){var t=this,n="[data-"+i.ns+"navigate-on-press]",s=e.map(["button","backbutton","detailbutton","listview-link"],function(e){return r(e)+":not("+n+")"}).join(",");this.element.handler(this).on("down",r("tab")+","+n,"_mouseup").on("click",r("tab")+","+s+","+n,"_appLinkClick"),this.userEvents=new i.UserEvents(this.element,{fastTap:!0,filter:s,tap:function(e){e.event.currentTarget=e.touch.currentTarget,t._mouseup(e.event)}}),this.element.css("-ms-touch-action","")},_appLinkClick:function(t){var i=e(t.currentTarget).attr("href");i&&"#"!==i[0]&&this.options.serverNavigation||"external"==p(e(t.currentTarget),"rel")||t.preventDefault()},_mouseup:function(t){if(!(t.which>1||t.isDefaultPrevented())){var r=this,o=e(t.currentTarget),a=p(o,"transition"),l=p(o,"rel")||"",d=p(o,"target"),c=o.attr("href"),u=h&&0===o[0].offsetHeight,m=c&&"#"!==c[0]&&this.options.serverNavigation;u||m||"external"===l||void 0===c||"#!"===c||(o.attr("href","#!"),setTimeout(function(){o.attr("href",c)}),l.match(f)?(i.widgetInstance(e(c),s).openFor(o),"actionsheet"!==l&&"drawer"!==l||t.stopPropagation()):("_top"===d?r=n.application.pane:d&&(r=e("#"+d).data("kendoMobilePane")),r.navigate(c,a)),t.preventDefault())}}});m.wrap=function(e){e.is(r("view"))||(e=e.wrap("<div data-"+i.ns+'role="view" data-stretch="true"></div>').parent());var t=e.wrap('<div class="km-pane-wrapper"><div></div></div>').parent(),n=new m(t);return n.navigate(""),n},s.plugin(m)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.mobile.popover",["kendo.popup","kendo.mobile.pane"],function(){return function(e,t){var i=window.kendo,n=i.mobile.ui,r=n.Widget,s={down:{origin:"bottom center",position:"top center"},up:{origin:"top center",position:"bottom center"},left:{origin:"center left",position:"center right",collision:"fit flip"},right:{origin:"center right",position:"center left",collision:"fit flip"}},o={animation:{open:{effects:"fade:in",duration:0},close:{effects:"fade:out",duration:400}}},a={horizontal:{offset:"top",size:"height"},vertical:{offset:"left",size:"width"}},l={up:"down",down:"up",left:"right",right:"left"},d=r.extend({init:function(t,n){var l,d,c=this,u=t.closest(".km-modalview-wrapper"),h=t.closest(".km-root").children(".km-pane").first(),f=u[0]?u:h;n.viewport?h=n.viewport:h[0]||(h=window),n.container?f=n.container:f[0]||(f=document.body),l={viewport:h,copyAnchorStyles:!1,autosize:!0,open:function(){c.overlay.show()},activate:e.proxy(c._activate,c),deactivate:function(){c.overlay.hide(),c._apiCall||c.trigger("hide"),c._apiCall=!1}},r.fn.init.call(c,t,n),t=c.element,n=c.options,t.wrap('<div class="km-popup-wrapper" />').addClass("km-popup").show(),d=c.options.direction.match(/left|right/)?"horizontal":"vertical",c.dimensions=a[d],c.wrapper=t.parent().css({width:n.width,height:n.height}).addClass("km-popup-wrapper km-"+n.direction).hide(),c.arrow=e('<div class="km-popup-arrow" />').prependTo(c.wrapper).hide(),c.overlay=e('<div class="km-popup-overlay" />').appendTo(f).hide(),l.appendTo=c.overlay,n.className&&c.overlay.addClass(n.className),c.popup=new i.ui.Popup(c.wrapper,e.extend(!0,l,o,s[n.direction]))},options:{name:"Popup",width:240,height:"",direction:"down",container:null,viewport:null},events:["hide"],show:function(t){this.popup.options.anchor=e(t),this.popup.open()},hide:function(){this._apiCall=!0,this.popup.close()},destroy:function(){r.fn.destroy.call(this),this.popup.destroy(),this.overlay.remove()},target:function(){return this.popup.options.anchor},_activate:function(){var t=this.options.direction,i=this.dimensions,n=i.offset,r=this.popup,s=r.options.anchor,o=e(s).offset(),a=e(r.element).offset(),d=r.flipped?l[t]:t,c=2*this.arrow[i.size](),u=this.element[i.size]()-this.arrow[i.size](),h=e(s)[i.size](),f=o[n]-a[n]+h/2;f<c&&(f=c),f>u&&(f=u),this.wrapper.removeClass("km-up km-down km-left km-right").addClass("km-"+d),this.arrow.css(n,f).show()}}),c=r.extend({init:function(t,s){var o,a=this;a.initialOpen=!1,r.fn.init.call(a,t,s),o=e.extend({className:"km-popover-root",hide:function(){a.trigger("close")}},this.options.popup),a.popup=new d(a.element,o),a.popup.overlay.on("move",function(e){e.target==a.popup.overlay[0]&&e.preventDefault()}),a.pane=new n.Pane(a.element,e.extend(this.options.pane,{$angular:this.options.$angular})),i.notify(a,n)},options:{name:"PopOver",popup:{},pane:{}},events:["open","close"],open:function(e){this.popup.show(e),this.initialOpen?this.pane.view()._invokeNgController():(this.pane.navigateToInitial()||this.pane.navigate(""),this.popup.popup._position(),this.initialOpen=!0)},openFor:function(e){this.open(e),this.trigger("open",{target:this.popup.target()})},close:function(){this.popup.hide()},destroy:function(){r.fn.destroy.call(this),this.pane.destroy(),this.popup.destroy(),i.destroy(this.element)}});n.plugin(d),n.plugin(c)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.mobile.shim",["kendo.popup"],function(){return function(e,t){var i=window.kendo,n=i.mobile.ui,r=i.ui.Popup,s=n.Widget,o=s.extend({init:function(t,n){var o=this,a=i.mobile.application,l=i.support.mobileOS,d=a?a.os.name:l?l.name:"ios",c="ios"===d||"wp"===d||!!a&&a.os.skin,u="blackberry"===d,h=n.align||(c?"bottom center":u?"center right":"center center"),f=n.position||(c?"bottom center":u?"center right":"center center"),p=n.effect||(c?"slideIn:up":u?"slideIn:left":"fade:in"),m=e('<div class="km-shim"/>').handler(o).hide();s.fn.init.call(o,t,n),o.shim=m,t=o.element,(n=o.options).className&&o.shim.addClass(n.className),n.modal||o.shim.on("down","_hide"),(a?a.element:e(document.body)).append(m),o.popup=new r(o.element,{anchor:m,modal:!0,appendTo:m,origin:h,position:f,animation:{open:{effects:p,duration:n.duration},close:{duration:n.duration}},close:function(e){var t=!1;o._apiCall||(t=o.trigger("hide")),t&&e.preventDefault(),o._apiCall=!1},deactivate:function(){m.hide()},open:function(){m.show()}}),i.notify(o)},events:["hide"],options:{name:"Shim",modal:!1,align:void 0,position:void 0,effect:void 0,duration:200},show:function(){this.popup.open()},hide:function(){this._apiCall=!0,this.popup.close()},destroy:function(){s.fn.destroy.call(this),this.shim.kendoDestroy(),this.popup.destroy(),this.shim.remove()},_hide:function(t){t&&e.contains(this.shim.children().children(".k-popup")[0],t.target)||this.popup.close()}});n.plugin(o)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.mobile.actionsheet",["kendo.mobile.popover","kendo.mobile.shim"],function(){return function(e,t){var i=window.kendo,n=i.support,r=i.mobile.ui,s=r.Shim,o=r.Popup,a=r.Widget,l=i.template('<li class="km-actionsheet-cancel"><a href="\\#">#:cancel#</a></li>'),d=a.extend({init:function(t,d){var c,u,h,f=this,p=n.mobileOS;a.fn.init.call(f,t,d),h=(d=f.options).type,t=f.element,c=(u="auto"===h?p&&p.tablet:"tablet"===h)?o:s,d.cancelTemplate&&(l=i.template(d.cancelTemplate)),t.addClass("km-actionsheet").append(l({cancel:f.options.cancel})).wrap('<div class="km-actionsheet-wrapper" />').on("up","li>a","_click").on("click","li>a",i.preventDefault),f.view().bind("destroy",function(){f.destroy()}),f.wrapper=t.parent().addClass(h?" km-actionsheet-"+h:""),f.shim=new c(f.wrapper,e.extend({modal:p.ios&&p.majorVersion<7,className:"km-actionsheet-root"},f.options.popup)),f._closeProxy=e.proxy(f,"_close"),f._shimHideProxy=e.proxy(f,"_shimHide"),f.shim.bind("hide",f._shimHideProxy),u&&i.onResize(f._closeProxy),i.notify(f,r)},events:["open","close","command"],options:{name:"ActionSheet",cancel:"Cancel",type:"auto",popup:{height:"auto"}},open:function(t,i){this.target=e(t),this.context=i,this.shim.show(t)},close:function(){this.context=this.target=null,this.shim.hide()},openFor:function(e){var t=e.data("actionsheetContext");this.open(e,t),this.trigger("open",{target:e,context:t})},destroy:function(){a.fn.destroy.call(this),i.unbindResize(this._closeProxy),this.shim.destroy()},_click:function(t){if(!t.isDefaultPrevented()){var n=e(t.currentTarget),r=n.data("action");if(r){var s={target:this.target,context:this.context},o=this.options.$angular;o?this.element.injector().get("$parse")(r)(o[0])(s):i.getter(r)(window)(s)}this.trigger("command",{target:this.target,context:this.context,currentTarget:n}),t.preventDefault(),this._close()}},_shimHide:function(e){this.trigger("close")?e.preventDefault():this.context=this.target=null},_close:function(e){this.trigger("close")?e.preventDefault():this.close()}});r.plugin(d)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.progressbar",["kendo.core"],function(){return function(e,t){var i=window.kendo,n=i.ui.Widget,r="horizontal",s="k-progressbar-indeterminate",o="k-state-selected",a={VALUE:"value",PERCENT:"percent",CHUNK:"chunk"},l=Math,d=e.extend,c=e.proxy,u="<span class='k-progress-status-wrap'><span class='k-progress-status'></span></span>",h=n.extend({init:function(e,t){n.fn.init.call(this,e,t),t=this.options,this._progressProperty=t.orientation===r?"width":"height",this._fields(),t.value=this._validateValue(t.value),this._validateType(t.type),this._wrapper(),this._progressAnimation(),t.value!==t.min&&!1!==t.value&&this._updateProgress()},setOptions:function(e){n.fn.setOptions.call(this,e),e.hasOwnProperty("reverse")&&this.wrapper.toggleClass("k-progressbar-reverse",e.reverse),e.hasOwnProperty("enable")&&this.enable(e.enable),this._progressAnimation(),this._validateValue(),this._updateProgress()},events:["change","complete"],options:{name:"ProgressBar",orientation:r,reverse:!1,min:0,max:100,value:0,enable:!0,type:a.VALUE,chunkCount:5,showStatus:!0,animation:{}},_fields:function(){this._isStarted=!1,this.progressWrapper=this.progressStatus=e()},_validateType:function(t){var n=!1;if(e.each(a,function(e,i){if(i===t)return n=!0,!1}),!n)throw new Error(i.format("Invalid ProgressBar type '{0}'",t))},_wrapper:function(){var e,t=this.wrapper=this.element,i=this.options,n=i.orientation;t.addClass("k-widget k-progressbar"),t.addClass("k-progressbar-"+(n===r?r:"vertical")),!1===i.enable&&t.addClass("k-state-disabled"),i.reverse&&t.addClass("k-progressbar-reverse"),!1===i.value&&t.addClass(s),i.type===a.CHUNK?this._addChunkProgressWrapper():i.showStatus&&(this.progressStatus=this.wrapper.prepend(u).find(".k-progress-status"),e=!1!==i.value?i.value:i.min,i.type===a.VALUE?this.progressStatus.text(e):this.progressStatus.text(this._calculatePercentage(e).toFixed()+"%"))},value:function(e){return this._value(e)},_value:function(e){var t,i=this.options;if(void 0===e)return i.value;"boolean"!=typeof e?(e=this._roundValue(e),isNaN(e)||(t=this._validateValue(e))!==i.value&&(this.wrapper.removeClass(s),i.value=t,this._isStarted=!0,this._updateProgress())):e||(this.wrapper.addClass(s),i.value=!1)},_roundValue:function(e){e=parseFloat(e);var t=l.pow(10,3);return l.floor(e*t)/t},_validateValue:function(e){var t=this.options;if(!1!==e){if(e<=t.min||!0===e)return t.min;if(e>=t.max)return t.max}else if(!1===e)return!1;return isNaN(this._roundValue(e))?t.min:e},_updateProgress:function(){var e=this.options,t=this._calculatePercentage();e.type===a.CHUNK?(this._updateChunks(t),this._onProgressUpdateAlways(e.value)):this._updateProgressWrapper(t)},_updateChunks:function(e){var t,i=this.options,n=i.chunkCount,s=parseInt(100/n*100,10)/100,a=parseInt(100*e,10)/100,d=l.floor(a/s);t=i.orientation===r&&!i.reverse||"vertical"===i.orientation&&i.reverse?this.wrapper.find("li.k-item:lt("+d+")"):this.wrapper.find("li.k-item:gt(-"+(d+1)+")"),this.wrapper.find("."+o).removeClass(o).addClass("k-state-default"),t.removeClass("k-state-default").addClass(o)},_updateProgressWrapper:function(e){var t=this.options,i=this.wrapper.find(".k-state-selected"),n=this._isStarted?this._animation.duration:0,r={};0===i.length&&this._addRegularProgressWrapper(),r[this._progressProperty]=e+"%",this.progressWrapper.animate(r,{duration:n,start:c(this._onProgressAnimateStart,this),progress:c(this._onProgressAnimate,this),complete:c(this._onProgressAnimateComplete,this,t.value),always:c(this._onProgressUpdateAlways,this,t.value)})},_onProgressAnimateStart:function(){this.progressWrapper.show()},_onProgressAnimate:function(e){var t,i=this.options,n=parseFloat(e.elem.style[this._progressProperty],10);i.showStatus&&(t=1e4/parseFloat(this.progressWrapper[0].style[this._progressProperty]),this.progressWrapper.find(".k-progress-status-wrap").css(this._progressProperty,t+"%")),i.type!==a.CHUNK&&n<=98&&this.progressWrapper.removeClass("k-complete")},_onProgressAnimateComplete:function(e){var t,i=this.options,n=parseFloat(this.progressWrapper[0].style[this._progressProperty]);i.type!==a.CHUNK&&n>98&&this.progressWrapper.addClass("k-complete"),i.showStatus&&(t=i.type===a.VALUE?e:i.type==a.PERCENT?this._calculatePercentage(e).toFixed()+"%":l.floor(this._calculatePercentage(e))+"%",this.progressStatus.text(t)),e===i.min&&this.progressWrapper.hide()},_onProgressUpdateAlways:function(e){var t=this.options;this._isStarted&&this.trigger("change",{value:e}),e===t.max&&this._isStarted&&this.trigger("complete",{value:t.max})},enable:function(e){var t=this.options;t.enable=void 0===e||e,this.wrapper.toggleClass("k-state-disabled",!t.enable)},destroy:function(){n.fn.destroy.call(this)},_addChunkProgressWrapper:function(){var e=this.options,t=this.wrapper,i=100/e.chunkCount,n="";e.chunkCount<=1&&(e.chunkCount=1),n+="<ul class='k-reset'>";for(var r=e.chunkCount-1;r>=0;r--)n+="<li class='k-item k-state-default'></li>";n+="</ul>",t.append(n).find(".k-item").css(this._progressProperty,i+"%").first().addClass("k-first").end().last().addClass("k-last"),this._normalizeChunkSize()},_normalizeChunkSize:function(){var e=this.options,t=this.wrapper.find(".k-item:last"),i=parseFloat(t[0].style[this._progressProperty]),n=100-e.chunkCount*i;n>0&&t.css(this._progressProperty,i+n+"%")},_addRegularProgressWrapper:function(){this.progressWrapper=e("<div class='k-state-selected'></div>").appendTo(this.wrapper),this.options.showStatus&&(this.progressWrapper.append(u),this.progressStatus=this.wrapper.find(".k-progress-status"))},_calculateChunkSize:function(){var e=this.options.chunkCount,t=this.wrapper.find("ul.k-reset");return(parseInt(t.css(this._progressProperty),10)-(e-1))/e},_calculatePercentage:function(e){var t=this.options,i=void 0!==e?e:t.value,n=t.min,r=t.max;return this._onePercent=l.abs((r-n)/100),l.abs((i-n)/this._onePercent)},_progressAnimation:function(){var e=this.options,t=e.animation;this._animation=!1===t?{duration:0}:d({duration:400},e.animation)}});i.ui.plugin(h)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("pdf/core",["kendo.core","util/main"],function(){!function(e,t,i){"use strict";function n(){function e(){for(var t=0;t<arguments.length;++t){var r=arguments[t];if(r===i)throw new Error("Cannot output undefined to PDF");if(r instanceof h)r.beforeRender(e),r.render(e);else if(H(r))!function(e,t){t("["),e.length>0&&t.withIndent(function(){for(var i=0;i<e.length;++i)i>0&&i%8==0?t.indent(e[i]):t(" ",e[i])});t(" ]")}(r,e);else if(function(e){return e instanceof Date}(r))!function(e,t){t("(D:",l(e.getUTCFullYear(),4),l(e.getUTCMonth()+1,2),l(e.getUTCDate(),2),l(e.getUTCHours(),2),l(e.getUTCMinutes(),2),l(e.getUTCSeconds(),2),"Z)")}(r,e);else if("number"==typeof r){if(isNaN(r))throw new Error("Cannot output NaN to PDF");var s=r.toFixed(7);s.indexOf(".")>=0&&(s=s.replace(/\.?0+$/,"")),"-0"==s&&(s="0"),n.writeString(s)}else/string|boolean/.test(typeof r)?n.writeString(r+""):"function"==typeof r.get?n.write(r.get()):"object"==typeof r&&(r?e(new B(r)):n.writeString("null"))}}var t=0,n=k();return e.writeData=function(e){n.write(e)},e.withIndent=function(i){++t,i(e),--t},e.indent=function(){e(T,a("",2*t,"  ")),e.apply(null,arguments)},e.offset=function(){return n.offset()},e.toString=function(){throw new Error("FIX CALLER")},e.get=function(){return n.get()},e.stream=function(){return n},e}function r(e){if("function"!=typeof e){var t=e;e=function(e,i){return e in t?t[e]:i}}var i=e("paperSize",E.a4);if(!i)return{};if("string"==typeof i&&null==(i=E[i.toLowerCase()]))throw new Error("Unknown paper size");i[0]=u(i[0]),i[1]=u(i[1]),e("landscape",!1)&&(i=[Math.max(i[0],i[1]),Math.min(i[0],i[1])]);var n=e("margin");return n&&(n="string"==typeof n||"number"==typeof n?{left:n=u(n,0),top:n,right:n,bottom:n}:{left:u(n.left,0),top:u(n.top,0),right:u(n.right,0),bottom:u(n.bottom,0)},e("addMargin")&&(i[0]+=n.left+n.right,i[1]+=n.top+n.bottom)),{paperSize:i,margin:n}}function s(e){function t(t,i){return e&&null!=e[t]?e[t]:i}var i=this,s=n(),o=0,a=[];i.getOption=t,i.attach=function(e){return a.indexOf(e)<0&&(!function(e,t){var i=e.beforeRender,n=e.render;e.beforeRender=function(){},e.render=function(e){e(t," 0 R")},e.renderFull=function(r){e._offset=r.offset(),r(t," 0 obj "),i.call(e,r),n.call(e,r),r(" endobj")}}(e,++o),a.push(e)),e},i.pages=[],i.FONTS={},i.IMAGES={},i.GRAD_COL_FUNCTIONS={},i.GRAD_OPC_FUNCTIONS={},i.GRAD_COL={},i.GRAD_OPC={};var d=i.attach(new V),c=i.attach(new W);d.setPages(c),i.addPage=function(e){var t=r(function(t,i){return e&&null!=e[t]?e[t]:i}),s=t.paperSize,o=t.margin,a=s[0],l=s[1];o&&(a-=o.left+o.right,l-=o.top+o.bottom);var d=new O(n(),null,!0),u={Contents:i.attach(d),Parent:c,MediaBox:[0,0,s[0],s[1]]},h=new j(i,u);return h._content=d,c.addPage(i.attach(h)),h.transform(1,0,0,-1,0,s[1]),o&&(h.translate(o.left,o.top),h.rect(0,0,a,l),h.clip()),i.pages.push(h),h},i.render=function(){var e;for(s("%PDF-1.4",T,"%",T,T),e=0;e<a.length;++e)a[e].renderFull(s),s(T,T);var i=s.offset();for(s("xref",T,0," ",a.length+1,T),s("0000000000 65535 f ",T),e=0;e<a.length;++e)s(l(a[e]._offset,10)," 00000 n ",T);return s(T),s("trailer",T),s(new B({Size:a.length+1,Root:d,Info:new B({Producer:new z(t("producer","Kendo UI PDF Generator v."+C.version)),Title:new z(t("title","")),Author:new z(t("author","")),Subject:new z(t("subject","")),Keywords:new z(t("keywords","")),Creator:new z(t("creator","Kendo UI PDF Generator v."+C.version)),CreationDate:t("date",new Date)})}),T,T),s("startxref",T,i,T),s("%%EOF",T),s.stream().offset(0)}}function o(e){return function(t,i){var n=t.length,r=n;if(0===n)return i();for(;r-- >0;)e(t[r],function(){0==--n&&i()})}}function a(e,t,i){for(;e.length<t;)e=i+e;return e}function l(e,t){return a(e+"",t,"0")}function d(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e){return e*(72/25.4)}function u(e,i){if("number"==typeof e)return e;if("string"==typeof e){var n;if(n=/^\s*([0-9.]+)\s*(mm|cm|in|pt)\s*$/.exec(e)){var r=t(n[1]);if(!isNaN(r))return"pt"==n[2]?r:{mm:c,cm:function(e){return c(10*e)},in:function(e){return 72*e}}[n[2]](r)}}if(null!=i)return i;throw new Error("Can't parse unit: "+e)}function h(){}function f(e,t,i){i||(i=h),e.prototype=new i;for(var n in t)d(t,n)&&(e.prototype[n]=t[n]);return e}function p(e){return d(L,e)?L[e]:L[e]=new P(e)}function m(e,t,i){this.asStream=function(){var n=new O(i,{Type:p("XObject"),Subtype:p("Image"),Width:e,Height:t,BitsPerComponent:8,ColorSpace:p("DeviceRGB"),Filter:p("DCTDecode")});return n._resourceName=p("I"+ ++D),n}}function g(e){return e.map(function(e){return H(e)?g(e):"number"==typeof e?(Math.round(1e3*e)/1e3).toFixed(3):e}).join(" ")}function v(e,t,i,n,r,s,o){var a=g([t,i,n,r,s,o]),l=e.GRAD_COL_FUNCTIONS[a];return l||(l=e.GRAD_COL_FUNCTIONS[a]=e.attach(new B({FunctionType:2,Domain:[0,1],Range:[0,1,0,1,0,1],N:1,C0:[t,i,n],C1:[r,s,o]}))),l}function _(e,t,i){var n=g([t,i]),r=e.GRAD_OPC_FUNCTIONS[n];return r||(r=e.GRAD_OPC_FUNCTIONS[n]=e.attach(new B({FunctionType:2,Domain:[0,1],Range:[0,1],N:1,C0:[t],C1:[i]}))),r}function b(e,t,i){var n="radial"==t.type,r=function(e,t){function i(e){return 1==e.length?e[0]:{FunctionType:3,Functions:e,Domain:[0,1],Bounds:u,Encode:h}}var n,r,s,o,a,l=!1,d=[],c=[],u=[],h=[];for(n=1;n<t.length;++n)r=t[n-1],s=t[n],o=r.color,a=s.color,c.push(v(e,o.r,o.g,o.b,a.r,a.g,a.b)),(o.a<1||a.a<1)&&(l=!0),u.push(s.offset),h.push(0,1);if(l)for(n=1;n<t.length;++n)r=t[n-1],s=t[n],o=r.color,a=s.color,d.push(_(e,o.a,a.a));return u.pop(),{hasAlpha:l,colors:i(c),opacities:l?i(d):null}}(e,t.stops),s=n?[t.start.x,t.start.y,t.start.r,t.end.x,t.end.y,t.end.r]:[t.start.x,t.start.y,t.end.x,t.end.y],o=function(e,t,i,n,r,s){var o,a;if(!s){var l=[t].concat(n);i.forEach(function(e){l.push(e.offset,e.color.r,e.color.g,e.color.b)}),a=g(l),o=e.GRAD_COL[a]}o||(o=new B({Type:p("Shading"),ShadingType:t?3:2,ColorSpace:p("DeviceRGB"),Coords:n,Domain:[0,1],Function:r,Extend:[!0,!0]}),e.attach(o),o._resourceName="S"+ ++D,a&&(e.GRAD_COL[a]=o));return o}(e,n,t.stops,s,r.colors,t.userSpace&&i),a=r.hasAlpha?function(e,t,i,n,r,s){var o,a;if(!s){var l=[t].concat(n);i.forEach(function(e){l.push(e.offset,e.color.a)}),a=g(l),o=e.GRAD_OPC[a]}o||(o=new B({Type:p("ExtGState"),AIS:!1,CA:1,ca:1,SMask:{Type:p("Mask"),S:p("Luminosity"),G:e.attach(new O("/a0 gs /s0 sh",{Type:p("XObject"),Subtype:p("Form"),FormType:1,BBox:s?[s.left,s.top+s.height,s.left+s.width,s.top]:[0,1,1,0],Group:{Type:p("Group"),S:p("Transparency"),CS:p("DeviceGray"),I:!0},Resources:{ExtGState:{a0:{CA:1,ca:1}},Shading:{s0:{ColorSpace:p("DeviceGray"),Coords:n,Domain:[0,1],ShadingType:t?3:2,Function:r,Extend:[!0,!0]}}}}))}}),e.attach(o),o._resourceName="O"+ ++D,a&&(e.GRAD_OPC[a]=o));return o}(e,n,t.stops,s,r.opacities,t.userSpace&&i):null;return{hasAlpha:r.hasAlpha,shading:o,opacity:a}}function k(t){function i(){return f<p?t[f++]:0}function n(e){m(f),t[f++]=255&e,f>p&&(p=f)}function r(){return i()<<8|i()}function s(e){n(e>>8),n(e)}function o(){return 65536*r()+r()}function a(e){s(e>>>16&65535),s(65535&e)}function l(){var e=o();return e>=2147483648?e-4294967296:e}function d(e){a(e<0?e+4294967296:e)}function c(e){return h(e,i)}function u(e){for(var t=0;t<e.length;++t)n(e.charCodeAt(t))}function h(e,t){for(var i=new Array(e),n=0;n<e;++n)i[n]=t();return i}var f=0,p=0;null==t?t=S?new Uint8Array(256):[]:p=t.length;var m=S?function(e){if(e>=t.length){var i=new Uint8Array(Math.max(e+256,2*t.length));i.set(t,0),t=i}}:function(){},g=S?function(){return new Uint8Array(t.buffer,0,p)}:function(){return t},v=S?function(e){if("string"==typeof e)return u(e);var i=e.length;m(f+i),t.set(e,f),(f+=i)>p&&(p=f)}:function(e){if("string"==typeof e)return u(e);for(var t=0;t<e.length;++t)n(e[t])},_=S?function(e,i){if(t.buffer.slice)return new Uint8Array(t.buffer.slice(e,e+i));var n=new Uint8Array(i);return n.set(new Uint8Array(t.buffer,e,i)),n}:function(e,i){return t.slice(e,e+i)},b={eof:function(){return f>=p},readByte:i,writeByte:n,readShort:r,writeShort:s,readLong:o,writeLong:a,readFixed:function(){return o()/65536},writeFixed:function(e){a(Math.round(65536*e))},readShort_:function(){var e=r();return e>=32768?e-65536:e},writeShort_:function(e){s(e<0?e+65536:e)},readLong_:l,writeLong_:d,readFixed_:function(){return l()/65536},writeFixed_:function(e){d(Math.round(65536*e))},read:c,write:v,readString:function(e){return String.fromCharCode.apply(String,c(e))},writeString:u,times:h,get:g,slice:_,offset:function(e){return null!=e?(f=e,b):f},skip:function(e){f+=e},toString:function(){throw new Error("FIX CALLER.  BinaryStream is no longer convertible to string!")},length:function(){return p},saveExcursion:function(e){var t=f;try{return e()}finally{f=t}},writeBase64:function(t){e.atob?u(e.atob(t)):v(F.decode(t))},base64:function(){return F.encode(g())}};return b}function w(e){return e.replace(/^\s*(['"])(.*)\1\s*$/,"$2")}function y(e,t){e=e.toLowerCase(),G[e]=function(){return G[t]},G[e+"|bold"]=function(){return G[t+"|bold"]},G[e+"|italic"]=function(){return G[t+"|italic"]},G[e+"|bold|italic"]=function(){return G[t+"|bold|italic"]}}function x(e,t){if(1==arguments.length)for(var i in e)d(e,i)&&x(i,e[i]);else switch(e=e.toLowerCase(),G[e]=t,e){case"dejavu sans":G["sans-serif"]=t;break;case"dejavu sans|bold":G["sans-serif|bold"]=t;break;case"dejavu sans|italic":G["sans-serif|italic"]=t;break;case"dejavu sans|bold|italic":G["sans-serif|bold|italic"]=t;break;case"dejavu serif":G.serif=t;break;case"dejavu serif|bold":G["serif|bold"]=t;break;case"dejavu serif|italic":G["serif|italic"]=t;break;case"dejavu serif|bold|italic":G["serif|bold|italic"]=t;break;case"dejavu mono":G.monospace=t;break;case"dejavu mono|bold":G["monospace|bold"]=t;break;case"dejavu mono|italic":G["monospace|italic"]=t;break;case"dejavu mono|bold|italic":G["monospace|bold|italic"]=t}}var C=e.kendo,S=!!e.Uint8Array,T="\n",D=0,F=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{decode:function(t){for(var i=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),n=0,r=i.length,s=[];n<r;){var o=e.indexOf(i.charAt(n++)),a=e.indexOf(i.charAt(n++)),l=e.indexOf(i.charAt(n++)),d=e.indexOf(i.charAt(n++)),c=o<<2|a>>>4,u=(15&a)<<4|l>>>2,h=(3&l)<<6|d;s.push(c),64!=l&&s.push(u),64!=d&&s.push(h)}return s},encode:function(t){for(var i=0,n=t.length,r="";i<n;){var s=t[i++],o=t[i++],a=t[i++],l=s>>>2,d=(3&s)<<4|o>>>4,c=(15&o)<<2|a>>>6,u=63&a;i-n==2?c=u=64:i-n==1&&(u=64),r+=e.charAt(l)+e.charAt(d)+e.charAt(c)+e.charAt(u)}return r}}}(),E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],executive:[521.86,756],folio:[612,936],legal:[612,1008],letter:[612,792],tabloid:[792,1224]},R={"Times-Roman":!0,"Times-Bold":!0,"Times-Italic":!0,"Times-BoldItalic":!0,Helvetica:!0,"Helvetica-Bold":!0,"Helvetica-Oblique":!0,"Helvetica-BoldOblique":!0,Courier:!0,"Courier-Bold":!0,"Courier-Oblique":!0,"Courier-BoldOblique":!0,Symbol:!0,ZapfDingbats:!0},A={},I=o(function(t,i){var n=R[t];n?i(n):function(t,i){function n(){e.console&&(e.console.error?e.console.error("Cannot load URL: %s",t):e.console.log("Cannot load URL: %s",t)),i(null)}var r=new XMLHttpRequest;r.open("GET",t,!0),S&&(r.responseType="arraybuffer");r.onload=function(){200==r.status||304==r.status?i(S?new Uint8Array(r.response):new VBArray(r.responseBody).toArray()):n()},r.onerror=n,r.send(null)}(t,function(e){if(null==e)throw new Error("Cannot load font from "+t);var n=new C.pdf.TTFFont(e);R[t]=n,i(n)})}),M=o(function(e,t){function i(e){a.src=e,a.complete&&!C.support.browser.msie?r():(a.onload=r,a.onerror=n)}function n(){t(A[e]="TAINTED")}function r(){if(o&&/^image\/jpe?g$/i.test(o.type)){var i=new FileReader;return i.onload=function(){a=new m(a.width,a.height,k(new Uint8Array(this.result))),URL.revokeObjectURL(s),t(A[e]=a)},void i.readAsArrayBuffer(o)}var r=document.createElement("canvas");r.width=a.width,r.height=a.height;var l=r.getContext("2d");l.drawImage(a,0,0);var d;try{d=l.getImageData(0,0,a.width,a.height)}catch(e){return n()}finally{s&&URL.revokeObjectURL(s)}for(var c=!1,u=k(),h=k(),f=d.data,g=0;g<f.length;){u.writeByte(f[g++]),u.writeByte(f[g++]),u.writeByte(f[g++]);var v=f[g++];v<255&&(c=!0),h.writeByte(v)}if(c)a=new function(e,t,i,n){this.asStream=function(r){var s=new O(n,{Type:p("XObject"),Subtype:p("Image"),Width:e,Height:t,BitsPerComponent:8,ColorSpace:p("DeviceGray")},!0),o=new O(i,{Type:p("XObject"),Subtype:p("Image"),Width:e,Height:t,BitsPerComponent:8,ColorSpace:p("DeviceRGB"),SMask:r.attach(s)},!0);return o._resourceName=p("I"+ ++D),o}}(a.width,a.height,u,h);else{var _=r.toDataURL("image/jpeg");_=_.substr(_.indexOf(";base64,")+8);var b=k();b.writeBase64(_),b.offset(0),a=new m(a.width,a.height,b)}t(A[e]=a)}var s,o,a=A[e];if(a)t(a);else if(a=new Image,/^data:/i.test(e)||(a.crossOrigin="Anonymous"),S&&!/^data:/i.test(e)){var l=new XMLHttpRequest;l.onload=function(){o=l.response,i(s=URL.createObjectURL(o))},l.onerror=n,l.open("GET",e,!0),l.responseType="blob",l.send()}else i(e)});s.prototype={loadFonts:I,loadImages:M,getFont:function(e){var t=this.FONTS[e];if(!t){if(!(t=R[e]))throw new Error("Font "+e+" has not been loaded");t=!0===t?this.attach(new U(e)):this.attach(new q(this,t)),this.FONTS[e]=t}return t},getImage:function(e){var t=this.IMAGES[e];if(!t){if(!(t=A[e]))throw new Error("Image "+e+" has not been loaded");if("TAINTED"===t)return null;t=this.IMAGES[e]=this.attach(t.asStream(this))}return t},getOpacityGS:function(e,i){var n=t(e).toFixed(3);e=t(n),n+=i?"S":"F";var r=this._opacityGSCache||(this._opacityGSCache={}),s=r[n];if(!s){var o={Type:p("ExtGState")};i?o.CA=e:o.ca=e,(s=this.attach(new B(o)))._resourceName=p("GS"+ ++D),r[n]=s}return s},dict:function(e){return new B(e)},name:function(e){return p(e)},stream:function(e,t){return new O(t,e)}};var H=Array.isArray||function(e){return e instanceof Array};h.prototype.beforeRender=function(){};var z=f(function(e){this.value=e},{render:function(e){for(var t="",i=this.escape(),n=0;n<i.length;++n)t+=String.fromCharCode(255&i.charCodeAt(n));e("(",t,")")},escape:function(){return this.value.replace(/([\(\)\\])/g,"\\$1")},toString:function(){return this.value}}),N=f(function(e){this.value=e},{render:function(e){e("<");for(var t=0;t<this.value.length;++t)e(l(this.value.charCodeAt(t).toString(16),4));e(">")}},z),P=f(function(e){this.name=e},{render:function(e){e("/"+this.escape())},escape:function(){return this.name.replace(/[^\x21-\x7E]/g,function(e){return"#"+l(e.charCodeAt(0).toString(16),2)})},toString:function(){return this.name}}),L={};P.get=p;var B=f(function(e){this.props=e},{render:function(e){var t=this.props,i=!0;e("<<"),e.withIndent(function(){for(var n in t)d(t,n)&&!/^_/.test(n)&&(i=!1,e.indent(p(n)," ",t[n]))}),i||e.indent(),e(">>")}}),O=f(function(e,t,i){if("string"==typeof e){var n=k();n.write(e),e=n}this.data=e,this.props=t||{},this.compress=i},{render:function(t){var i=this.data.get(),n=this.props;this.compress&&e.pako&&"function"==typeof e.pako.deflate&&(n.Filter?n.Filter instanceof Array||(n.Filter=[n.Filter]):n.Filter=[],n.Filter.unshift(p("FlateDecode")),i=e.pako.deflate(i)),n.Length=i.length,t(new B(n)," stream",T),t.writeData(i),t(T,"endstream")}}),V=f(function(e){(e=this.props=e||{}).Type=p("Catalog")},{setPages:function(e){this.props.Pages=e}},B),W=f(function(){this.props={Type:p("Pages"),Kids:[],Count:0}},{addPage:function(e){this.props.Kids.push(e),this.props.Count++}},B),U=f(function(e){this.props={Type:p("Font"),Subtype:p("Type1"),BaseFont:p(e)},this._resourceName=p("F"+ ++D)},{encodeText:function(e){return new z(e+"")}},B),q=f(function(e,t,i){(i=this.props=i||{}).Type=p("Font"),i.Subtype=p("Type0"),i.Encoding=p("Identity-H"),this._pdf=e,this._font=t,this._sub=t.makeSubset(),this._resourceName=p("F"+ ++D);var n=t.head;this.name=t.psName;var r=this.scale=t.scale;this.bbox=[n.xMin*r,n.yMin*r,n.xMax*r,n.yMax*r],this.italicAngle=t.post.italicAngle,this.ascent=t.ascent*r,this.descent=t.descent*r,this.lineGap=t.lineGap*r,this.capHeight=t.os2.capHeight||this.ascent,this.xHeight=t.os2.xHeight||0,this.stemV=0,this.familyClass=(t.os2.familyClass||0)>>8,this.isSerif=this.familyClass>=1&&this.familyClass<=7,this.isScript=10==this.familyClass,this.flags=(t.post.isFixedPitch?1:0)|(this.isSerif?2:0)|(this.isScript?8:0)|(0!==this.italicAngle?64:0)|32},{encodeText:function(e){return new N(this._sub.encodeText(e+""))},getTextWidth:function(e,t){for(var i=0,n=this._font.cmap.codeMap,r=0;r<t.length;++r){var s=n[t.charCodeAt(r)];i+=this._font.widthOfGlyph(s||0)}return i*e/1e3},beforeRender:function(){var e=this,t=e._sub,i=t.render(),r=new O(k(i),{Length1:i.length},!0),s=e._pdf.attach(new B({Type:p("FontDescriptor"),FontName:p(e._sub.psName),FontBBox:e.bbox,Flags:e.flags,StemV:e.stemV,ItalicAngle:e.italicAngle,Ascent:e.ascent,Descent:e.descent,CapHeight:e.capHeight,XHeight:e.xHeight,FontFile2:e._pdf.attach(r)})),o=t.ncid2ogid,a=t.firstChar,l=t.lastChar,d=[];!function t(i,n){if(i<=l){var r=o[i];null==r?t(i+1):(n||d.push(i,n=[]),n.push(e._font.widthOfGlyph(r)),t(i+1,n))}}(a);var c=new B({Type:p("Font"),Subtype:p("CIDFontType2"),BaseFont:p(e._sub.psName),CIDSystemInfo:new B({Registry:new z("Adobe"),Ordering:new z("Identity"),Supplement:0}),FontDescriptor:s,FirstChar:a,LastChar:l,DW:Math.round(e._font.widthOfGlyph(0)),W:d,CIDToGIDMap:e._pdf.attach(e._makeCidToGidMap())}),u=e.props;u.BaseFont=p(e._sub.psName),u.DescendantFonts=[e._pdf.attach(c)];var h=new $(a,l,t.subset),f=new O(n(),null,!0);f.data(h),u.ToUnicode=e._pdf.attach(f)},_makeCidToGidMap:function(){return new O(k(this._sub.cidToGidMap()),null,!0)}},B),$=f(function(e,t,i){this.firstChar=e,this.lastChar=t,this.map=i},{render:function(e){e.indent("/CIDInit /ProcSet findresource begin"),e.indent("12 dict begin"),e.indent("begincmap"),e.indent("/CIDSystemInfo <<"),e.indent("  /Registry (Adobe)"),e.indent("  /Ordering (UCS)"),e.indent("  /Supplement 0"),e.indent(">> def"),e.indent("/CMapName /Adobe-Identity-UCS def"),e.indent("/CMapType 2 def"),e.indent("1 begincodespacerange"),e.indent("  <0000><ffff>"),e.indent("endcodespacerange");var t=this;e.indent(t.lastChar-t.firstChar+1," beginbfchar"),e.withIndent(function(){for(var i=t.firstChar;i<=t.lastChar;++i){var n=t.map[i],r=C.util.ucs2encode([n]);e.indent("<",l(i.toString(16),4),">","<");for(var s=0;s<r.length;++s)e(l(r.charCodeAt(s).toString(16),4));e(">")}}),e.indent("endbfchar"),e.indent("endcmap"),e.indent("CMapName currentdict /CMap defineresource pop"),e.indent("end"),e.indent("end")}}),j=f(function(e,t){this._pdf=e,this._rcount=0,this._textMode=!1,this._fontResources={},this._gsResources={},this._xResources={},this._patResources={},this._shResources={},this._opacity=1,this._matrix=[1,0,0,1,0,0],this._annotations=[],this._font=null,this._fontSize=null,this._contextStack=[],(t=this.props=t||{}).Type=p("Page"),t.ProcSet=[p("PDF"),p("Text"),p("ImageB"),p("ImageC"),p("ImageI")],t.Resources=new B({Font:new B(this._fontResources),ExtGState:new B(this._gsResources),XObject:new B(this._xResources),Pattern:new B(this._patResources),Shading:new B(this._shResources)}),t.Annots=this._annotations},{_out:function(){this._content.data.apply(null,arguments)},transform:function(e,t,i,n,r,s){(function(e){return 1===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&0===e[4]&&0===e[5]})(arguments)||(this._matrix=function(e,t){var i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=t[0],d=t[1],c=t[2],u=t[3],h=t[4],f=t[5];return[i*l+n*c,i*d+n*u,r*l+s*c,r*d+s*u,o*l+a*c+h,o*d+a*u+f]}(arguments,this._matrix),this._out(e," ",t," ",i," ",n," ",r," ",s," cm"),this._out(T))},translate:function(e,t){this.transform(1,0,0,1,e,t)},scale:function(e,t){this.transform(e,0,0,t,0,0)},rotate:function(e){var t=Math.cos(e),i=Math.sin(e);this.transform(t,i,-i,t,0,0)},beginText:function(){this._textMode=!0,this._out("BT",T)},endText:function(){this._textMode=!1,this._out("ET",T)},_requireTextMode:function(){if(!this._textMode)throw new Error("Text mode required; call page.beginText() first")},_requireFont:function(){if(!this._font)throw new Error("No font selected; call page.setFont() first")},setFont:function(e,t){this._requireTextMode(),null==e?e=this._font:e instanceof q||(e=this._pdf.getFont(e)),null==t&&(t=this._fontSize),this._fontResources[e._resourceName]=e,this._font=e,this._fontSize=t,this._out(e._resourceName," ",t," Tf",T)},setTextLeading:function(e){this._requireTextMode(),this._out(e," TL",T)},setTextRenderingMode:function(e){this._requireTextMode(),this._out(e," Tr",T)},showText:function(e,t){if(this._requireFont(),e.length>1&&t&&this._font instanceof q){var i=this._font.getTextWidth(this._fontSize,e),n=t/i*100;this._out(n," Tz ")}this._out(this._font.encodeText(e)," Tj",T)},showTextNL:function(e){this._requireFont(),this._out(this._font.encodeText(e)," '",T)},addLink:function(e,t){var i=this._toPage({x:t.left,y:t.bottom}),n=this._toPage({x:t.right,y:t.top});this._annotations.push(new B({Type:p("Annot"),Subtype:p("Link"),Rect:[i.x,i.y,n.x,n.y],Border:[0,0,0],A:new B({Type:p("Action"),S:p("URI"),URI:new z(e)})}))},setStrokeColor:function(e,t,i){this._out(e," ",t," ",i," RG",T)},setOpacity:function(e){this.setFillOpacity(e),this.setStrokeOpacity(e),this._opacity*=e},setStrokeOpacity:function(e){if(e<1){var t=this._pdf.getOpacityGS(this._opacity*e,!0);this._gsResources[t._resourceName]=t,this._out(t._resourceName," gs",T)}},setFillColor:function(e,t,i){this._out(e," ",t," ",i," rg",T)},setFillOpacity:function(e){if(e<1){var t=this._pdf.getOpacityGS(this._opacity*e,!1);this._gsResources[t._resourceName]=t,this._out(t._resourceName," gs",T)}},gradient:function(e,t){this.save(),this.rect(t.left,t.top,t.width,t.height),this.clip(),e.userSpace||this.transform(t.width,0,0,t.height,t.left,t.top);var i,n=b(this._pdf,e,t),r=n.shading._resourceName;this._shResources[r]=n.shading,n.hasAlpha&&(i=n.opacity._resourceName,this._gsResources[i]=n.opacity,this._out("/"+i+" gs ")),this._out("/"+r+" sh",T),this.restore()},setDashPattern:function(e,t){this._out(e," ",t," d",T)},setLineWidth:function(e){this._out(e," w",T)},setLineCap:function(e){this._out(e," J",T)},setLineJoin:function(e){this._out(e," j",T)},setMitterLimit:function(e){this._out(e," M",T)},save:function(){this._contextStack.push(this._context()),this._out("q",T)},restore:function(){this._out("Q",T),this._context(this._contextStack.pop())},moveTo:function(e,t){this._out(e," ",t," m",T)},lineTo:function(e,t){this._out(e," ",t," l",T)},bezier:function(e,t,i,n,r,s){this._out(e," ",t," ",i," ",n," ",r," ",s," c",T)},bezier1:function(e,t,i,n){this._out(e," ",t," ",i," ",n," y",T)},bezier2:function(e,t,i,n){this._out(e," ",t," ",i," ",n," v",T)},close:function(){this._out("h",T)},rect:function(e,t,i,n){this._out(e," ",t," ",i," ",n," re",T)},ellipse:function(e,t,i,n){function r(t){return e+t}function s(e){return t+e}var o=.5522847498307936;this.moveTo(r(0),s(n)),this.bezier(r(i*o),s(n),r(i),s(n*o),r(i),s(0)),this.bezier(r(i),s(-n*o),r(i*o),s(-n),r(0),s(-n)),this.bezier(r(-i*o),s(-n),r(-i),s(-n*o),r(-i),s(0)),this.bezier(r(-i),s(n*o),r(-i*o),s(n),r(0),s(n))},circle:function(e,t,i){this.ellipse(e,t,i,i)},stroke:function(){this._out("S",T)},nop:function(){this._out("n",T)},clip:function(){this._out("W n",T)},clipStroke:function(){this._out("W S",T)},closeStroke:function(){this._out("s",T)},fill:function(){this._out("f",T)},fillStroke:function(){this._out("B",T)},drawImage:function(e){var t=this._pdf.getImage(e);t&&(this._xResources[t._resourceName]=t,this._out(t._resourceName," Do",T))},comment:function(e){var t=this;e.split(/\r?\n/g).forEach(function(e){t._out("% ",e,T)})},_context:function(e){if(null==e)return{opacity:this._opacity,matrix:this._matrix};this._opacity=e.opacity,this._matrix=e.matrix},_toPage:function(e){var t=this._matrix,i=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5];return{x:i*e.x+r*e.y+o,y:n*e.x+s*e.y+a}}},B),G={serif:"Times-Roman","serif|bold":"Times-Bold","serif|italic":"Times-Italic","serif|bold|italic":"Times-BoldItalic","sans-serif":"Helvetica","sans-serif|bold":"Helvetica-Bold","sans-serif|italic":"Helvetica-Oblique","sans-serif|bold|italic":"Helvetica-BoldOblique",monospace:"Courier","monospace|bold":"Courier-Bold","monospace|italic":"Courier-Oblique","monospace|bold|italic":"Courier-BoldOblique",zapfdingbats:"ZapfDingbats","zapfdingbats|bold":"ZapfDingbats","zapfdingbats|italic":"ZapfDingbats","zapfdingbats|bold|italic":"ZapfDingbats"};y("Times New Roman","serif"),y("Courier New","monospace"),y("Arial","sans-serif"),y("Helvetica","sans-serif"),y("Verdana","sans-serif"),y("Tahoma","sans-serif"),y("Georgia","sans-serif"),y("Monaco","monospace"),y("Andale Mono","monospace"),C.pdf={Document:s,BinaryStream:k,defineFont:x,parseFontDef:function(e){var t=/^\s*((normal|italic)\s+)?((normal|small-caps)\s+)?((normal|bold|\d+)\s+)?(([0-9.]+)(px|pt))(\/(([0-9.]+)(px|pt)|normal))?\s+(.*?)\s*$/i.exec(e);if(!t)return{fontSize:12,fontFamily:"sans-serif"};var i=t[8]?parseInt(t[8],10):12;return{italic:t[2]&&"italic"==t[2].toLowerCase(),variant:t[4],bold:t[6]&&/bold|700/i.test(t[6]),fontSize:i,lineHeight:t[12]?"normal"==t[12]?i:parseInt(t[12],10):null,fontFamily:t[14].split(/\s*,\s*/g).map(w)}},getFontURL:function(e){function t(t){return e.bold&&(t+="|bold"),e.italic&&(t+="|italic"),t.toLowerCase()}var i,n,r=e.fontFamily;if(r instanceof Array)for(var s=0;s<r.length&&(i=t(r[s]),!(n=G[i]));++s);else n=G[r.toLowerCase()];for(;"function"==typeof n;)n=n();n||(n="Times-Roman");return n},loadFonts:I,loadImages:M,getPaperOptions:r,TEXT_RENDERING_MODE:{fill:0,stroke:1,fillAndStroke:2,invisible:3,fillAndClip:4,strokeAndClip:5,fillStrokeClip:6,clip:7}}}(window,parseFloat)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("pdf/ttf",["pdf/core","util/main"],function(){!function(e){"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function i(e){return Object.keys(e).sort(function(e,t){return e-t}).map(parseFloat)}function n(e){this.raw=e,this.scalerType=e.readLong(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort();for(var t=this.tables={},i=0;i<this.tableCount;++i){var n={tag:e.readString(4),checksum:e.readLong(),offset:e.readLong(),length:e.readLong()};t[n.tag]=n}}function r(e){function i(e,t){this.definition=t,this.length=t.length,this.offset=t.offset,this.file=e,this.rawData=e.raw,this.parse(e.raw)}i.prototype.raw=function(){return this.rawData.slice(this.offset,this.length)};for(var n in e)t(e,n)&&(i[n]=i.prototype[n]=e[n]);return i}function s(e){this.font=e,this.subset={},this.unicodes={},this.ogid2ngid={0:0},this.ngid2ogid={0:0},this.ncid2ogid={},this.next=this.firstChar=1,this.nextGid=1,this.psName=function(){for(var e="",t=b+"",i=0;i<t.length;++i)e+=String.fromCharCode(t.charCodeAt(i)-48+65);return++b,e}()+"+"+this.font.psName}function o(e,t){var i=this,n=i.contents=l(e);if("ttcf"==n.readString(4)){if(!t)throw new Error("Must specify a name for TTC files");n.readLong();for(var r=n.readLong(),s=0;s<r;++s){var o=n.readLong();if(n.saveExcursion(function(){n.offset(o),i.parse()}),i.psName==t)return}throw new Error("Font "+t+" not found in collection")}n.offset(0),i.parse()}var a=e.kendo.pdf,l=a.BinaryStream;n.prototype={readTable:function(e,t){var i=this.tables[e];if(!i)throw new Error("Table "+e+" not found in directory");return this[e]=i.table=new t(this,i)},render:function(e){var i=Object.keys(e).length,n=Math.pow(2,Math.floor(Math.log(i)/Math.LN2)),r=16*n,s=Math.floor(Math.log(n)/Math.LN2),o=16*i-r,a=l();a.writeLong(this.scalerType),a.writeShort(i),a.writeShort(r),a.writeShort(s),a.writeShort(o);var d=16*i,c=a.offset()+d,u=null,h=l();for(var f in e)if(t(e,f)){var p=e[f];for(a.writeString(f),a.writeLong(this.checksum(p)),a.writeLong(c),a.writeLong(p.length),h.write(p),"head"==f&&(u=c),c+=p.length;c%4;)h.writeByte(0),c++}a.write(h.get());var m=this.checksum(a.get()),g=2981146554-m;return a.offset(u+8),a.writeLong(g),a.get()},checksum:function(e){e=l(e);for(var t=0;!e.eof();)t+=e.readLong();return 4294967295&t}};var d=r({parse:function(e){e.offset(this.offset),this.version=e.readLong(),this.revision=e.readLong(),this.checkSumAdjustment=e.readLong(),this.magicNumber=e.readLong(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.read(8),this.modified=e.read(8),this.xMin=e.readShort_(),this.yMin=e.readShort_(),this.xMax=e.readShort_(),this.yMax=e.readShort_(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort_(),this.indexToLocFormat=e.readShort_(),this.glyphDataFormat=e.readShort_()},render:function(e){var t=l();return t.writeLong(this.version),t.writeLong(this.revision),t.writeLong(0),t.writeLong(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.write(this.created),t.write(this.modified),t.writeShort_(this.xMin),t.writeShort_(this.yMin),t.writeShort_(this.xMax),t.writeShort_(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort_(this.fontDirectionHint),t.writeShort_(e),t.writeShort_(this.glyphDataFormat),t.get()}}),c=r({parse:function(e){e.offset(this.offset);var t=this.file.head.indexToLocFormat;this.offsets=0===t?e.times(this.length/2,function(){return 2*e.readShort()}):e.times(this.length/4,e.readLong)},offsetOf:function(e){return this.offsets[e]},lengthOf:function(e){return this.offsets[e+1]-this.offsets[e]},render:function(e){for(var t=l(),i=e[e.length-1]>65535,n=0;n<e.length;++n)i?t.writeLong(e[n]):t.writeShort(e[n]/2);return{format:i?1:0,table:t.get()}}}),u=r({parse:function(e){e.offset(this.offset),this.version=e.readLong(),this.ascent=e.readShort_(),this.descent=e.readShort_(),this.lineGap=e.readShort_(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort_(),this.minRightSideBearing=e.readShort_(),this.xMaxExtent=e.readShort_(),this.caretSlopeRise=e.readShort_(),this.caretSlopeRun=e.readShort_(),this.caretOffset=e.readShort_(),e.skip(8),this.metricDataFormat=e.readShort_(),this.numOfLongHorMetrics=e.readShort()},render:function(e){var t=l();return t.writeLong(this.version),t.writeShort_(this.ascent),t.writeShort_(this.descent),t.writeShort_(this.lineGap),t.writeShort(this.advanceWidthMax),t.writeShort_(this.minLeftSideBearing),t.writeShort_(this.minRightSideBearing),t.writeShort_(this.xMaxExtent),t.writeShort_(this.caretSlopeRise),t.writeShort_(this.caretSlopeRun),t.writeShort_(this.caretOffset),t.write([0,0,0,0,0,0,0,0]),t.writeShort_(this.metricDataFormat),t.writeShort(e.length),t.get()}}),h=r({parse:function(e){e.offset(this.offset),this.version=e.readLong(),this.numGlyphs=e.readShort(),this.maxPoints=e.readShort(),this.maxContours=e.readShort(),this.maxComponentPoints=e.readShort(),this.maxComponentContours=e.readShort(),this.maxZones=e.readShort(),this.maxTwilightPoints=e.readShort(),this.maxStorage=e.readShort(),this.maxFunctionDefs=e.readShort(),this.maxInstructionDefs=e.readShort(),this.maxStackElements=e.readShort(),this.maxSizeOfInstructions=e.readShort(),this.maxComponentElements=e.readShort(),this.maxComponentDepth=e.readShort()},render:function(e){var t=l();return t.writeLong(this.version),t.writeShort(e.length),t.writeShort(this.maxPoints),t.writeShort(this.maxContours),t.writeShort(this.maxComponentPoints),t.writeShort(this.maxComponentContours),t.writeShort(this.maxZones),t.writeShort(this.maxTwilightPoints),t.writeShort(this.maxStorage),t.writeShort(this.maxFunctionDefs),t.writeShort(this.maxInstructionDefs),t.writeShort(this.maxStackElements),t.writeShort(this.maxSizeOfInstructions),t.writeShort(this.maxComponentElements),t.writeShort(this.maxComponentDepth),t.get()}}),f=r({parse:function(e){e.offset(this.offset);var t=this.file,i=t.hhea;this.metrics=e.times(i.numOfLongHorMetrics,function(){return{advance:e.readShort(),lsb:e.readShort_()}});var n=t.maxp.numGlyphs-t.hhea.numOfLongHorMetrics;this.leftSideBearings=e.times(n,e.readShort_)},forGlyph:function(e){var t=this.metrics,i=t.length;return e<i?t[e]:{advance:t[i-1].advance,lsb:this.leftSideBearings[e-i]}},render:function(e){for(var t=l(),i=0;i<e.length;++i){var n=this.forGlyph(e[i]);t.writeShort(n.advance),t.writeShort_(n.lsb)}return t.get()}}),p=function(){function e(e){this.raw=e}function i(e){this.raw=e;for(var t=this.glyphIds=[],i=this.idOffsets=[];;){var r=e.readShort();if(i.push(e.offset()),t.push(e.readShort()),!(r&o))break;e.skip(r&n?4:2),r&d?e.skip(8):r&a?e.skip(4):r&s&&e.skip(2)}}e.prototype={compound:!1,render:function(){return this.raw.get()}};var n=1,s=8,o=32,a=64,d=128;return i.prototype={compound:!0,render:function(e){for(var t=l(this.raw.get()),i=0;i<this.glyphIds.length;++i){var n=this.glyphIds[i];t.offset(this.idOffsets[i]),t.writeShort(e[n])}return t.get()}},r({parse:function(){this.cache={}},glyphFor:function(n){var r=this.cache;if(t(r,n))return r[n];var s=this.file.loca,o=s.lengthOf(n);if(0===o)return r[n]=null;var a=this.rawData,d=this.offset+s.offsetOf(n),c=l(a.slice(d,o)),u=c.readShort_(),h=c.readShort_(),f=c.readShort_(),p=c.readShort_(),m=c.readShort_(),g=r[n]=-1==u?new i(c):new e(c);return g.numberOfContours=u,g.xMin=h,g.yMin=f,g.xMax=p,g.yMax=m,g},render:function(e,t,i){for(var n=l(),r=[],s=0;s<t.length;++s){var o=t[s],a=e[o];r.push(n.offset()),a&&n.write(a.render(i))}return r.push(n.offset()),{table:n.get(),offsets:r}}})}(),m=function(){function e(e,t){this.text=e,this.length=e.length,this.platformID=t.platformID,this.platformSpecificID=t.platformSpecificID,this.languageID=t.languageID,this.nameID=t.nameID}return r({parse:function(t){t.offset(this.offset),t.readShort();for(var i=t.readShort(),n=this.offset+t.readShort(),r=t.times(i,function(){return{platformID:t.readShort(),platformSpecificID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:t.readShort()+n}}),s=this.strings={},o=0;o<r.length;++o){var a=r[o];t.offset(a.offset);var l=t.readString(a.length);s[a.nameID]||(s[a.nameID]=[]),s[a.nameID].push(new e(l,a))}this.postscriptEntry=s[6][0],this.postscriptName=this.postscriptEntry.text.replace(/[^\x20-\x7F]/g,"")},render:function(i){var n=this.strings,r=0;for(var s in n)t(n,s)&&(r+=n[s].length);var o=l(),a=l();o.writeShort(0),o.writeShort(r),o.writeShort(6+12*r);for(s in n)if(t(n,s))for(var d=6==s?[new e(i,this.postscriptEntry)]:n[s],c=0;c<d.length;++c){var u=d[c];o.writeShort(u.platformID),o.writeShort(u.platformSpecificID),o.writeShort(u.languageID),o.writeShort(u.nameID),o.writeShort(u.length),o.writeShort(a.offset()),a.writeString(u.text)}return o.write(a.get()),o.get()}})}(),g=function(){var e=".notdef .null nonmarkingreturn space exclam quotedbl numbersign dollar percent ampersand quotesingle parenleft parenright asterisk plus comma hyphen period slash zero one two three four five six seven eight nine colon semicolon less equal greater question at A B C D E F G H I J K L M N O P Q R S T U V W X Y Z bracketleft backslash bracketright asciicircum underscore grave a b c d e f g h i j k l m n o p q r s t u v w x y z braceleft bar braceright asciitilde Adieresis Aring Ccedilla Eacute Ntilde Odieresis Udieresis aacute agrave acircumflex adieresis atilde aring ccedilla eacute egrave ecircumflex edieresis iacute igrave icircumflex idieresis ntilde oacute ograve ocircumflex odieresis otilde uacute ugrave ucircumflex udieresis dagger degree cent sterling section bullet paragraph germandbls registered copyright trademark acute dieresis notequal AE Oslash infinity plusminus lessequal greaterequal yen mu partialdiff summation product pi integral ordfeminine ordmasculine Omega ae oslash questiondown exclamdown logicalnot radical florin approxequal Delta guillemotleft guillemotright ellipsis nonbreakingspace Agrave Atilde Otilde OE oe endash emdash quotedblleft quotedblright quoteleft quoteright divide lozenge ydieresis Ydieresis fraction currency guilsinglleft guilsinglright fi fl daggerdbl periodcentered quotesinglbase quotedblbase perthousand Acircumflex Ecircumflex Aacute Edieresis Egrave Iacute Icircumflex Idieresis Igrave Oacute Ocircumflex apple Ograve Uacute Ucircumflex Ugrave dotlessi circumflex tilde macron breve dotaccent ring cedilla hungarumlaut ogonek caron Lslash lslash Scaron scaron Zcaron zcaron brokenbar Eth eth Yacute yacute Thorn thorn minus multiply onesuperior twosuperior threesuperior onehalf onequarter threequarters franc Gbreve gbreve Idotaccent Scedilla scedilla Cacute cacute Ccaron ccaron dcroat".split(/\s+/g);return r({parse:function(e){e.offset(this.offset),this.format=e.readLong(),this.italicAngle=e.readFixed_(),this.underlinePosition=e.readShort_(),this.underlineThickness=e.readShort_(),this.isFixedPitch=e.readLong(),this.minMemType42=e.readLong(),this.maxMemType42=e.readLong(),this.minMemType1=e.readLong(),this.maxMemType1=e.readLong();var t;switch(this.format){case 65536:case 196608:break;case 131072:t=e.readShort(),this.glyphNameIndex=e.times(t,e.readShort),this.names=[];for(var i=this.offset+this.length;e.offset()<i;)this.names.push(e.readString(e.readByte()));break;case 151552:t=e.readShort(),this.offsets=e.read(t);break;case 262144:this.map=e.times(this.file.maxp.numGlyphs,e.readShort)}},glyphFor:function(t){switch(this.format){case 65536:return e[t]||".notdef";case 131072:var i=this.glyphNameIndex[t];return i<e.length?e[i]:this.names[i-e.length]||".notdef";case 151552:case 196608:return".notdef";case 262144:return this.map[t]||65535}},render:function(t){if(196608==this.format)return this.raw();var i=l(this.rawData.slice(this.offset,32));i.writeLong(131072),i.offset(32);for(var n=[],r=[],s=0;s<t.length;++s){var o=t[s],a=this.glyphFor(o),d=e.indexOf(a);d>=0?n.push(d):(n.push(e.length+r.length),r.push(a))}for(i.writeShort(t.length),s=0;s<n.length;++s)i.writeShort(n[s]);for(s=0;s<r.length;++s)i.writeByte(r[s].length),i.writeString(r[s]);return i.get()}})}(),v=function(){return r({parse:function(t){var i=this,n=i.offset;t.offset(n),i.codeMap={},i.version=t.readShort();var r=t.readShort();i.tables=t.times(r,function(){return new function(t,i,n){var r=this;r.platformID=t.readShort(),r.platformSpecificID=t.readShort(),r.offset=i+t.readLong(),t.saveExcursion(function(){var i;switch(t.offset(r.offset),r.format=t.readShort(),r.format){case 0:r.length=t.readShort(),r.language=t.readShort();for(var s=0;s<256;++s)n[s]=t.readByte();break;case 4:r.length=t.readShort(),r.language=t.readShort();var o=t.readShort()/2;t.skip(6);var a=t.times(o,t.readShort);t.skip(2);var l=t.times(o,t.readShort),d=t.times(o,t.readShort_),c=t.times(o,t.readShort),u=(r.length+r.offset-t.offset())/2,h=t.times(u,t.readShort);for(s=0;s<o;++s){var f=l[s],p=a[s];for(i=f;i<=p;++i){var m;if(0===c[s])m=i+d[s];else{var g=c[s]/2-(o-s)+(i-f);0!==(m=h[g]||0)&&(m+=d[s])}n[i]=65535&m}}break;case 6:r.length=t.readShort(),r.language=t.readShort(),i=t.readShort();for(var v=t.readShort();v-- >0;)n[i++]=t.readShort();break;case 12:t.readShort(),r.length=t.readLong(),r.language=t.readLong();for(var _=t.readLong();_-- >0;){i=t.readLong();for(var b=t.readLong(),k=t.readLong();i<=b;)n[i++]=k++}break;default:e.console&&e.console.error("Unhandled CMAP format: "+r.format)}})}(t,n,i.codeMap)})},render:function(e,t){var n=l();return n.writeShort(0),n.writeShort(1),n.write(function(e,t){function n(i){return t[e[i]]}var r=i(e),s=[],o=[],a=null,d=null;for(var c=0;c<r.length;++c){var u=r[c],h=n(u),f=h-u;null!=a&&f===d||(a&&o.push(a),s.push(u),d=f),a=u}a&&o.push(a);o.push(65535),s.push(65535);var p=s.length,m=2*p,g=2*Math.pow(2,Math.floor(Math.log(p)/Math.LN2)),v=Math.log(g/2)/Math.LN2,_=m-g,b=[],k=[],w=[];for(c=0;c<p;++c){var y=s[c],x=o[c];if(65535==y){b.push(0),k.push(0);break}var C=n(y);if(y-C>=32768){b.push(0),k.push(2*(w.length+p-c));for(var S=y;S<=x;++S)w.push(n(S))}else b.push(C-y),k.push(0)}var T=l();return T.writeShort(3),T.writeShort(1),T.writeLong(12),T.writeShort(4),T.writeShort(16+8*p+2*w.length),T.writeShort(0),T.writeShort(m),T.writeShort(g),T.writeShort(v),T.writeShort(_),o.forEach(T.writeShort),T.writeShort(0),s.forEach(T.writeShort),b.forEach(T.writeShort_),k.forEach(T.writeShort),w.forEach(T.writeShort),T.get()}(e,t)),n.get()}})}(),_=r({parse:function(e){e.offset(this.offset),this.version=e.readShort(),this.averageCharWidth=e.readShort_(),this.weightClass=e.readShort(),this.widthClass=e.readShort(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort_(),this.ySubscriptYSize=e.readShort_(),this.ySubscriptXOffset=e.readShort_(),this.ySubscriptYOffset=e.readShort_(),this.ySuperscriptXSize=e.readShort_(),this.ySuperscriptYSize=e.readShort_(),this.ySuperscriptXOffset=e.readShort_(),this.ySuperscriptYOffset=e.readShort_(),this.yStrikeoutSize=e.readShort_(),this.yStrikeoutPosition=e.readShort_(),this.familyClass=e.readShort_(),this.panose=e.times(10,e.readByte),this.charRange=e.times(4,e.readLong),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort_(),this.descent=e.readShort_(),this.lineGap=e.readShort_(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=e.times(2,e.readLong),this.version>1&&(this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()))},render:function(){return this.raw()}}),b=1e5;s.prototype={use:function(e){var t=this;if("string"==typeof e)return kendo.util.ucs2decode(e).reduce(function(e,i){return e+String.fromCharCode(t.use(i))},"");var i=t.unicodes[e];if(!i){i=t.next++,t.subset[i]=e,t.unicodes[e]=i;var n=t.font.cmap.codeMap[e];if(n&&(t.ncid2ogid[i]=n,null==t.ogid2ngid[n])){var r=t.nextGid++;t.ogid2ngid[n]=r,t.ngid2ogid[r]=n}}return i},encodeText:function(e){return this.use(e)},glyphIds:function(){return i(this.ogid2ngid)},glyphsFor:function(e,t){t||(t={});for(var i=0;i<e.length;++i){var n=e[i];if(!t[n]){var r=t[n]=this.font.glyf.glyphFor(n);r&&r.compound&&this.glyphsFor(r.glyphIds,t)}}return t},render:function(){var e=this.glyphsFor(this.glyphIds());for(var n in e)if(t(e,n)&&(n=parseInt(n,10),null==this.ogid2ngid[n])){var r=this.nextGid++;this.ogid2ngid[n]=r,this.ngid2ogid[r]=n}var s=i(this.ngid2ogid),o=s.map(function(e){return this.ngid2ogid[e]},this),a=this.font,l=a.glyf.render(e,o,this.ogid2ngid),d=a.loca.render(l.offsets);this.lastChar=this.next-1;var c={cmap:v.render(this.ncid2ogid,this.ogid2ngid),glyf:l.table,loca:d.table,hmtx:a.hmtx.render(o),hhea:a.hhea.render(o),maxp:a.maxp.render(o),post:a.post.render(o),name:a.name.render(this.psName),head:a.head.render(d.format),"OS/2":a.os2.render()};return this.font.directory.render(c)},cidToGidMap:function(){for(var e=l(),t=0,i=this.firstChar;i<this.next;++i){for(;t<i;)e.writeShort(0),t++;var n=this.ncid2ogid[i];if(n){var r=this.ogid2ngid[n];e.writeShort(r)}else e.writeShort(0);t++}return e.get()}},o.prototype={parse:function(){var e=this.directory=new n(this.contents);this.head=e.readTable("head",d),this.loca=e.readTable("loca",c),this.hhea=e.readTable("hhea",u),this.maxp=e.readTable("maxp",h),this.hmtx=e.readTable("hmtx",f),this.glyf=e.readTable("glyf",p),this.name=e.readTable("name",m),this.post=e.readTable("post",g),this.cmap=e.readTable("cmap",v),this.os2=e.readTable("OS/2",_),this.psName=this.name.postscriptName,this.ascent=this.os2.ascent||this.hhea.ascent,this.descent=this.os2.descent||this.hhea.descent,this.lineGap=this.os2.lineGap||this.hhea.lineGap,this.scale=1e3/this.head.unitsPerEm},widthOfGlyph:function(e){return this.hmtx.forGlyph(e).advance*this.scale},makeSubset:function(){return new s(this)}},a.TTFFont=o}(window)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("pdf/drawing",["kendo.core","kendo.color","kendo.drawing","pdf/core"],function(){!function(e,t){"use strict";function i(t,i){function n(e,t,i){return i||(i=c),i.pdf&&null!=i.pdf[e]?i.pdf[e]:t}function r(){function r(e){var t=e.options,i=function(e){function t(e){return o=!0,e}function i(e){return e.visible()&&e.opacity()>0&&(a(e.fill())||a(e.stroke()))}function n(e){for(var t=[],i=0;i<e.length;++i){var n=r(e[i]);null!=n&&t.push(n)}return t}function r(r){return function(e,t){var i=l,n=d;e.transform()&&(d=d.multiplyCopy(e.transform().matrix()));var r=e.clip();r&&(r=r.bbox())&&(r=r.bbox(d),l=l?w.Rect.intersect(l,r):r);try{return t()}finally{l=i,d=n}}(r,function(){if(!(r instanceof k.Group||r instanceof k.MultiPath)){var o=function(e){if(null==l)return!1;var t=e.rawBBox().bbox(d);l&&t&&(t=w.Rect.intersect(t,l));return t}(r);if(!o)return t(null);c=c?w.Rect.union(c,o):o}return s({Path:function(e){return 0!==e.segments.length&&i(e)?e:t(null)},MultiPath:function(e){if(!i(e))return t(null);var r=new k.MultiPath(e.options);return r.paths=n(e.paths),0===r.paths.length?t(null):r},Circle:function(e){return i(e)?e:t(null)},Arc:function(e){return i(e)?e:t(null)},Text:function(e){return/\S/.test(e.content())&&i(e)?e:t(null)},Image:function(e){return e.visible()&&e.opacity()>0?e:t(null)},Group:function(i){var r=new k.Group(i.options);return r.children=n(i.children),r._pdfLink=i._pdfLink,i===e||0!==r.children.length||i._pdfLink?r:t(null)},Rect:function(e){return i(e)?e:t(null)}},r)})}var o,l=!1,d=w.Matrix.unit(),c=null;do{o=!1,e=r(e)}while(e&&o);return{root:e,bbox:c}}(e),r=i.bbox;e=i.root;var d=n("paperSize",n("paperSize","auto"),t),c=!1;if("auto"==d)if(r){var u=r.getSize();d=[u.width,u.height],c=!0;var h=r.getOrigin();(i=new k.Group).transform(new w.Matrix(1,0,0,1,-h.x,-h.y)),i.append(e),e=i}else d="A4";var f;f=l.addPage({paperSize:d,margin:n("margin",n("margin"),t),addMargin:c,landscape:n("landscape",n("landscape",!1),t)}),o(e,f,l)}if(!(--h>0)){var l=new e.pdf.Document({producer:n("producer"),title:n("title"),author:n("author"),subject:n("subject"),keywords:n("keywords"),creator:n("creator"),date:n("date")});u?t.children.forEach(r):r(t),i(l.render(),l)}}var l=[],d=[],c=t.options,u=n("multiPage");t.traverse(function(t){s({Image:function(e){d.indexOf(e.src())<0&&d.push(e.src())},Text:function(t){var i=e.pdf.parseFontDef(t.options.font),n=e.pdf.getFontURL(i);l.indexOf(n)<0&&l.push(n)}},t)});var h=2;e.pdf.loadFonts(l,r),e.pdf.loadImages(d,r)}function n(e,t){i(e,function(e){t("data:application/pdf;base64,"+e.base64())})}function r(e,t){i(e,function(e){t(new Blob([e.get()],{type:"application/pdf"}))})}function s(e,t){var i=e[t.nodeType];return i?i.call.apply(i,arguments):t}function o(e,t,i){e.options._pdfDebug&&t.comment("BEGIN: "+e.options._pdfDebug);var n=e.transform(),r=e.opacity();if(t.save(),null!=r&&r<1&&t.setOpacity(r),function(e,t){var i=e.stroke&&e.stroke();if(!i)return;var n=i.color;if(n){if(null==(n=b(n)))return;t.setStrokeColor(n.r,n.g,n.b),1!=n.a&&t.setStrokeOpacity(n.a)}var r=i.width;if(null!=r){if(0===r)return;t.setLineWidth(r)}var s=i.dashType;s&&t.setDashPattern(x[s],0);var o=i.lineCap;o&&t.setLineCap(C[o]);var a=i.lineJoin;a&&t.setLineJoin(S[a]);var l=i.opacity;null!=l&&t.setStrokeOpacity(l)}(e,t),function(e,t){var i=e.fill&&e.fill();if(!i)return;if(i instanceof k.Gradient)return;var n=i.color;if(n){if(null==(n=b(n)))return;t.setFillColor(n.r,n.g,n.b),1!=n.a&&t.setFillOpacity(n.a)}var r=i.opacity;null!=r&&t.setFillOpacity(r)}(e,t),n){var o=n.matrix();t.transform(o.a,o.b,o.c,o.d,o.e,o.f)}!function(e,t,i){var n=e.clip();n&&(c(n,t,i),t.clip())}(e,t,i),s({Path:u,MultiPath:h,Circle:f,Arc:p,Text:m,Image:v,Group:g,Rect:_},e,t,i),t.restore(),e.options._pdfDebug&&t.comment("END: "+e.options._pdfDebug)}function a(e){return e&&(e instanceof k.Gradient||e.color&&!/^(none|transparent)$/i.test(e.color)&&(null==e.width||e.width>0)&&(null==e.opacity||e.opacity>0))}function l(e,t,i,n){var r=e.fill();if(r instanceof k.Gradient){n?t.clipStroke():t.clip();var s,o,a=r instanceof k.RadialGradient;a?(s={x:r.center().x,y:r.center().y,r:0},o={x:r.center().x,y:r.center().y,r:r.radius()}):(s={x:r.start().x,y:r.start().y},o={x:r.end().x,y:r.end().y});var l={type:a?"radial":"linear",start:s,end:o,userSpace:r.userSpace(),stops:r.stops.elements().map(function(e){var t=e.offset();t=/%$/.test(t)?parseFloat(t)/100:parseFloat(t);var i=b(e.color());return i.a*=e.opacity(),{offset:t,color:i}})},d=e.rawBBox(),c=d.topLeft(),u=d.getSize();return d={left:c.x,top:c.y,width:u.width,height:u.height},t.gradient(l,d),!0}}function d(e,t,i){a(e.fill())&&a(e.stroke())?l(e,t,i,!0)||t.fillStroke():a(e.fill())?l(e,t,i,!1)||t.fill():a(e.stroke())?t.stroke():t.nop()}function c(e,t,i){var n=e.segments;if(0!==n.length&&!function(e,t){var i=e.segments;if(4==i.length&&e.options.closed){for(var n=[],r=0;r<i.length;++r){if(i[r].controlIn())return!1;n[r]=i[r].anchor()}var s=n[0].y==n[1].y&&n[1].x==n[2].x&&n[2].y==n[3].y&&n[3].x==n[0].x||n[0].x==n[1].x&&n[1].y==n[2].y&&n[2].x==n[3].x&&n[3].y==n[0].y;if(s)return t.rect(n[0].x,n[0].y,n[2].x-n[0].x,n[2].y-n[0].y),!0}}(e,t)){for(var r,s=0;s<n.length;++s){var o=n[s],a=o.anchor();if(r){var l=r.controlOut(),d=o.controlIn();l&&d?t.bezier(l.x,l.y,d.x,d.y,a.x,a.y):t.lineTo(a.x,a.y)}else t.moveTo(a.x,a.y);r=o}e.options.closed&&t.close()}}function u(e,t,i){c(e,t,i),d(e,t,i)}function h(e,t,i){for(var n=e.paths,r=0;r<n.length;++r)c(n[r],t,i);d(e,t,i)}function f(e,t,i){var n=e.geometry();t.circle(n.center.x,n.center.y,n.radius),d(e,t,i)}function p(e,t,i){var n=e.geometry().curvePoints();t.moveTo(n[0].x,n[0].y);for(var r=1;r<n.length;)t.bezier(n[r].x,n[r++].y,n[r].x,n[r++].y,n[r].x,n[r++].y);d(e,t,i)}function m(t,i){var n,r=e.pdf.parseFontDef(t.options.font),s=t._position;t.fill()&&t.stroke()?n=y.fillAndStroke:t.fill()?n=y.fill:t.stroke()&&(n=y.stroke),i.transform(1,0,0,-1,s.x,s.y+r.fontSize),i.beginText(),i.setFont(e.pdf.getFontURL(r),r.fontSize),i.setTextRenderingMode(n),i.showText(t.content(),t._pdfRect?t._pdfRect.width():null),i.endText()}function g(e,t,i){e._pdfLink&&t.addLink(e._pdfLink.url,e._pdfLink);for(var n=e.children,r=0;r<n.length;++r)o(n[r],t,i)}function v(e,t){var i=e.src();if(i){var n=e.rect(),r=n.getOrigin(),s=n.getSize();t.transform(s.width,0,0,-s.height,r.x,r.y+s.height),t.drawImage(i)}}function _(e,t,i){var n=e.geometry();t.rect(n.origin.x,n.origin.y,n.size.width,n.size.height),d(e,t,i)}function b(t){var i=e.parseColor(t,!0);return i?i.toRGB():null}var k=e.drawing,w=e.geometry,y=e.pdf.TEXT_RENDERING_MODE,x={dash:[4],dashDot:[4,2,1,2],dot:[1,2],longDash:[8,2],longDashDot:[8,2,1,2],longDashDotDot:[8,2,1,2,1,2],solid:[]},C={butt:0,round:1,square:2},S={miter:0,round:1,bevel:2};e.deepExtend(k,{exportPDF:function(e,i){var n=t.Deferred();for(var r in i)"margin"==r&&e.options.pdf._ignoreMargin||e.options.set("pdf."+r,i[r]);return k.pdf.toDataURL(e,n.resolve),n.promise()},pdf:{toDataURL:n,toBlob:r,saveAs:function(t,i,s,o){window.Blob&&!e.support.browser.safari?r(t,function(t){e.saveAs({dataURI:t,fileName:i}),o&&o(t)}):n(t,function(t){e.saveAs({dataURI:t,fileName:i,proxyURL:s}),o&&o(t)})},toStream:i}})}(window.kendo,window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.pdf",["kendo.core","pdf/core","pdf/ttf","pdf/drawing","kendo.drawing"],function(){return function(e,t){e.PDFMixin={extend:function(e){e.events.push("pdfExport"),e.options.pdf=this.options,e.saveAsPDF=this.saveAsPDF,e._drawPDF=this._drawPDF,e._drawPDFShadow=this._drawPDFShadow},options:{fileName:"Export.pdf",proxyURL:"",paperSize:"auto",allPages:!1,landscape:!1,margin:null,title:null,author:null,subject:null,keywords:null,creator:"Kendo UI PDF Generator v."+e.version,date:null},saveAsPDF:function(){var i=new t.Deferred,n=i.promise(),r={promise:n};if(!this.trigger("pdfExport",r)){var s=this.options.pdf;return s.multiPage=s.allPages,this._drawPDF(i).then(function(t){return e.drawing.exportPDF(t,s)}).done(function(t){e.saveAs({dataURI:t,fileName:s.fileName,proxyURL:s.proxyURL,forceProxy:s.forceProxy,proxyTarget:s.proxyTarget}),i.resolve()}).fail(function(e){i.reject(e)}),n}},_drawPDF:function(i){var n=new t.Deferred;return e.drawing.drawDOM(this.wrapper).done(function(e){var t={page:e,pageNumber:1,progress:1,totalPages:1};i.notify(t),n.resolve(t.page)}).fail(function(e){n.reject(e)}),n},_drawPDFShadow:function(i,n){i=i||{};var r=this.wrapper,s=t("<div class='k-pdf-export-shadow'>");i.width&&s.css({width:i.width,overflow:"visible"}),r.before(s),s.append(i.content||r.clone(!0,!0));var o=t.Deferred();return setTimeout(function(){e.drawing.drawDOM(s,n).always(function(){s.remove()}).then(function(){o.resolve.apply(o,arguments)}).fail(function(){o.reject.apply(o,arguments)}).progress(function(){o.progress.apply(o,arguments)})},15),o.promise()}}}(kendo,window.kendo.jQuery),kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.grid",["kendo.data","kendo.columnsorter","kendo.editable","kendo.window","kendo.filtermenu","kendo.columnmenu","kendo.groupable","kendo.pager","kendo.selectable","kendo.sortable","kendo.reorderable","kendo.resizable","kendo.mobile.actionsheet","kendo.mobile.pane","kendo.ooxml","kendo.excel","kendo.progressbar","kendo.pdf"],function(){return function(e,t){function i(e){return new Array(e+1).join('<td class="k-group-cell">&nbsp;</td>')}function n(e){var t,i=" ";if(e){if(typeof e===Me)return e;for(t in e)i+=t+'="'+e[t]+'"'}return i}function r(t,i){e("th, th .k-grid-filter, th .k-link",t).add(document.body).css("cursor",i)}function s(t,i,n,r,s){var o=i;i=e(),s=s||1;for(var a=0;a<s;a++)i=i.add(t.eq(o+a));"number"==typeof n?i[r?"insertBefore":"insertAfter"](t.eq(n)):i.appendTo(n)}function o(t,i,n){return e(t).add(i).find(n)}function a(e,t,i){var n,r,s,o;for(n=0,r=(i=pe(i)?i:[i]).length;n<r;n++)s=i[n],ce(s)&&s.click&&(o=s.name||s.text,t.on(Re+Te,"a.k-grid-"+(o||"").replace(/\s/g,""),{commandName:o},ve(s.click,e)))}function l(e,t,i){return he(e,function(e){var n;f(e=typeof e===Me?{field:e}:e)&&!i||(e.attributes=B(e.attributes),e.footerAttributes=B(e.footerAttributes),e.headerAttributes=B(e.headerAttributes),n=!0),e.columns&&(e.columns=l(e.columns,t,n));var r=ne.guid();return e.headerAttributes=ue({id:r},e.headerAttributes),ue({encoded:t,hidden:n},e)})}function d(e,t){var i=[];return c(e,t,i),i[i.length-1]}function c(e,t,i){i=i||[];for(var n=0;n<t.length;n++){if(e===t[n])return!0;if(t[n].columns){var r=i.length;if(i.push(t[n]),c(e,t[n].columns,i))return!0;i.splice(r,i.length-r)}}return!1}function u(e,t){var i=t?O:B;e.hidden=!t,e.attributes=i(e.attributes),e.footerAttributes=i(e.footerAttributes),e.headerAttributes=i(e.headerAttributes)}function h(){return"none"!==this.style.display}function f(e){return p([e]).length>0}function p(e){return fe(e,function(e){var t=!e.hidden;return t&&e.columns&&(t=p(e.columns).length>0),t})}function m(t){return e(t).map(function(){return this.toArray()})}function g(t,i,n,r,s,o,a){var l=_(t),d=_([i]);if(l>d){var c=new Array(a+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>'),u=o.children(":not(.k-filter-row)");e(new Array(l-d+1).join("<tr>"+c+"</tr>")).insertAfter(u.last())}!function(e,t){for(var i=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)"),n=0;n<i.length;n++)i[n].rowSpan+=t}(o,l-d),b(n,r,s,o)}function v(t,i,n){n=n||0;var r,s=i;i=H(i);for(var o={},a=t.find(">tr:not(.k-filter-row)"),l=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},d=0,c=i.length;d<c;d++)o[(r=k(i[d],s)).row]||(o[r.row]=a.eq(r.row).find(".k-header").filter(l)),o[r.row].eq(r.cell).attr(ne.attr("index"),n+d);return i.length}function _(e){for(var t=0,i=0;i<e.length;i++)if(e[i].columns){var n=_(e[i].columns);n>t&&(t=n)}return 1+t}function b(t,i,n,r){var s,o=y(t[0],i),a=n.find(">tr:not(.k-filter-row):eq("+o.row+")>th.k-header"),l=e(),d=o.cell;for(s=0;s<t.length;s++)l=l.add(a.eq(d+s));r.find(">tr:not(.k-filter-row)").eq(o.row).append(l);var c=[];for(s=0;s<t.length;s++)t[s].columns&&(c=c.concat(t[s].columns));c.length&&b(c,i,n,r)}function k(e,t,i,n){var r,s;for(i=i||0,(n=n||{})[i]=n[i]||0,s=0;s<t.length;s++){if(t[s]==e){r={cell:n[i],row:i};break}if(t[s].columns&&(r=k(e,t[s].columns,i+1,n)))break;n[i]++}return r}function w(e,t,i,n){if(t.columns)return(t=t.columns)[n?0:t.length-1];var r,s=d(t,e);r=s?s.columns:e;var o=me(t,r);return 0===o&&n?o++:o!=r.length-1||n?(o>0||0===o&&!n)&&(o+=n?-1:1):o--,(t=function(e,t,i,n){var r,s=i.locked;do{r=e[t],t+=n?1:-1}while(r&&t>-1&&t<e.length&&r!=i&&!r.columns&&r.locked==s);return r}(r,o,i,me(i,r)>o))&&t!=i&&t.columns?w(e,t,i,n):null}function y(e,t,i,n){var r,s;for(i=i||0,(n=n||{})[i]=n[i]||0,s=0;s<t.length;s++){if(t[s]==e){r={cell:n[i],row:i};break}if(t[s].columns&&(r=y(e,t[s].columns,i+1,n)))break;t[s].hidden||n[i]++}return r}function x(e){return C(E(e)).concat(C(R(e)))}function C(e){for(var t=[],i=[],n=0;n<e.length;n++)t.push(e[n]),e[n].columns&&(i=i.concat(e[n].columns));return i.length&&(t=t.concat(C(i))),t}function S(e){for(var t,i=0,n=0;n<e.length;n++)(t=e[n]).columns?i+=S(t.columns):t.hidden&&i++;return i}function T(e){for(var t,i=0,n=0,r=e.length;n<r;n++)(t=e[n].style.width)&&-1==t.indexOf("%")&&(i+=parseInt(t,10));return i}function D(t){for(var i=t.find("tr:not(.k-filter-row)"),n=i.filter(function(){return!e(this).children().length}).remove().length,r=i.find("th:not(.k-group-cell,.k-hierarchy-cell)"),s=0;s<r.length;s++)r[s].rowSpan>1&&(r[s].rowSpan-=n);return i.length-n}function F(e,t,i,n,r){var s,o,a,l=[];for(s=0,a=e.length;s<a;s++)(o=i[n]||[]).push(t.eq(r+s)),i[n]=o,e[s].columns&&(l=l.concat(e[s].columns));l.length&&F(l,t,i,n+1,r+e.length)}function E(e){return fe(e,function(e){return e.locked})}function R(e){return fe(e,function(e){return!e.locked})}function A(e){return fe(e,function(e){return!e.locked&&f(e)})}function I(e){return fe(e,function(e){return e.locked&&f(e)})}function M(e){for(var t=[],i=0;i<e.length;i++)e[i].hidden||(e[i].columns?t=t.concat(M(e[i].columns)):t.push(e[i]));return t}function H(e){for(var t=[],i=0;i<e.length;i++)e[i].columns?t=t.concat(H(e[i].columns)):t.push(e[i]);return t}function z(i){var n=i.find(">tr:not(.k-filter-row)"),r=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},s=e();n.length>1&&(s=n.find("th").filter(r).filter(function(){return this.rowSpan>1})),s=s.add(n.last().find("th").filter(r));var o=ne.attr("index");return s.sort(function(i,n){i=e(i),n=e(n);var r=i.attr(o),s=n.attr(o);return r===t&&(r=e(i).index()),s===t&&(s=e(n).index()),r=parseInt(r,10),s=parseInt(s,10),r>s?1:r<s?-1:0}),s}function N(t){var i=t.closest("table"),n=e().add(t),r=t.closest("tr"),s=i.find("tr:not(.k-filter-row)"),o=s.index(r);if(o>0){for(var a=s.eq(o-1).find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return!e(this).attr("rowspan")}),l=0,d=r.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),c=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.colSpan>1}),u=0;u<c.length;u++)l+=c[u].colSpan||1;for(d+=Math.max(l-1,0),l=0,u=0;u<a.length;u++){var h=a.eq(u);if(h.attr("colSpan")?l+=h[0].colSpan:l+=1,d>=u&&d<l){n=N(h).add(n);break}}}return n}function P(t){var i=t.closest("thead"),n=e().add(t),r=t.closest("tr"),s=i.find("tr:not(.k-filter-row)"),o=s.index(r)+t[0].rowSpan,a=ne.attr("colspan");if(o<=s.length-1){var l,d=r.next(),c=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)");c=c.filter(function(){return!this.rowSpan||1===this.rowSpan});var u=0;for(l=0;l<c.length;l++)u+=parseInt(c.eq(l).attr(a),10)||1;var h=d.find("th:not(.k-group-cell,.k-hierarchy-cell)"),f=parseInt(t.attr(a),10)||1;for(l=0;l<f;){d=h.eq(l+u),n=n.add(P(d));var p=parseInt(d.attr(a),10);p>1&&(f-=p-1),l++}}return n}function L(t,i,n,r){var s,o=t;return r&&t.empty(),oe?t[0].innerHTML=n:((s=document.createElement("div")).innerHTML="<table><tbody>"+n+"</tbody></table>",t=s.firstChild.firstChild,i[0].replaceChild(t,o[0]),t=e(t)),t}function B(e){var t=(e=e||{}).style;return t?(t=t.replace(/((.*)?display)(.*)?:([^;]*)/i,"$1:none"))===e.style&&(t=t.replace(/(.*)?/i,"display:none;$1")):t="display:none",ue({},e,{style:t})}function O(e){var t=(e=e||{}).style;return t&&(e.style=t.replace(/(display\s*:\s*none\s*;?)*/gi,"")),e}function V(t,i,n,r){var s,o=t.find(">colgroup"),a=he(i,function(e){return(s=e.width)&&0!==parseInt(s,10)?ne.format('<col style="width:{0}"/>',typeof s===Me?s:s+"px"):"<col />"});(n||o.find(".k-hierarchy-col").length)&&a.splice(0,0,'<col class="k-hierarchy-col" />'),o.length&&o.remove(),(o=e(new Array(r+1).join('<col class="k-group-col">')+a.join(""))).is("colgroup")||(o=e("<colgroup/>").append(o)),t.prepend(o),Oe.msie&&8==Oe.version&&(t.css("display","inline-table"),window.setTimeout(function(){t.css("display","")},1))}function W(e){var t,i,n,r={};for(i=0,n=e.length;i<n;i++)r[(t=e[i]).value]=t.text;return r}function U(e,t,i){for(var n=0,r=e[n];r;){if((i||"none"!==r.style.display)&&!Pe.test(r.className)&&--t<0){r.style.display=i?"":"none";break}r=e[++n]}}function q(t,i){for(var n,r,s=0,o=t.length;s<o;s+=1)(r=t.eq(s)).is(".k-grouping-row,.k-detail-row")?(n=r.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan",parseInt(n.attr("colspan"),10)-1):(r.hasClass("k-grid-edit-row")&&(n=r.children(".k-edit-container")[0])&&((n=e(n)).attr("colspan",parseInt(n.attr("colspan"),10)-1),n.find("col").eq(i).remove(),r=n.find("tr:first")),U(r[0].cells,i,!1))}function $(e){for(var t,i=[],n=0;n<e.length&&"field"in(t=e[n])&&"value"in t&&"items"in t;n++)i.push(t),t.hasSubgroups&&(i=i.concat($(t.items)));return i}function j(e){for(var t,i=[],n=0;n<e.length&&"field"in(t=e[n])&&"value"in t&&"items"in t;n++)t.hasSubgroups&&(i=i.concat(j(t.items))),i.push(t.aggregates);return i}function G(t,i){for(var n,r,s=0,o=t.length;s<o;s+=1)(r=t.eq(s)).is(".k-grouping-row,.k-detail-row")?(n=r.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan",parseInt(n.attr("colspan"),10)+1):(r.hasClass("k-grid-edit-row")&&(n=r.children(".k-edit-container")[0])&&((n=e(n)).attr("colspan",parseInt(n.attr("colspan"),10)+1),V(n.find(">form>table"),p(void 0),!1,0),r=n.find("tr:first")),U(r[0].cells,i,!0))}function Y(e,t,i){i=i||1;var n,r,s;for(r=0,s=e.length;r<s;r++)(n=e.eq(r).children().last()).attr("colspan",parseInt(n.attr("colspan"),10)+i),(n=t.eq(r).children().last()).attr("colspan",parseInt(n.attr("colspan"),10)-i)}function K(e){var t,i,n=0,r=e.find(">colgroup>col");for(t=0,i=r.length;t<i;t+=1)n+=parseInt(r[t].style.width,10);return n}function Q(e,t){var i,n=e.offsetHeight,r=t.offsetHeight;n>r?i=n+"px":n<r&&(i=r+"px"),i&&(e.style.height=t.style.height=i)}function J(e,t){var i,n,r;if(typeof e===Me&&e===t)return e;if(ce(e)&&e.name===t)return e;if(pe(e))for(i=0,n=e.length;i<n;i++)if(typeof(r=e[i])===Me&&r===t||r.name===t)return r;return null}function X(t,i){var n=Oe.msie||Oe.edge;if(!0===i){var r,s;if(r=(t=e(t)).parent().scrollTop(),s=t.parent().scrollLeft(),n)try{t[0].setActive()}catch(e){t[0].focus()}else t[0].focus();t.parent().scrollTop(r).scrollLeft(s)}else e(t).one("focusin",function(e){e.preventDefault()}).focus()}function Z(t){return e(t).is(":button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap,.k-tool-icon")}function ee(t){var i=e(t.currentTarget),n=i.is("th"),r=this.table.add(this.lockedTable),s=this.thead.parent().add(e(">table",this.lockedHeader)),o=Z(t.target),a=i.closest("table")[0];ne.support.touch||(o&&i.find(ne.roleSelector("filtercell")).length?this._setCurrent(i):a!==r[0]&&a!==r[1]&&a!==s[0]&&a!==s[1]||e(t.target).is("a.k-i-collapse, a.k-i-expand")||(this.options.navigatable&&this._setCurrent(i),!n&&o||setTimeout(function(){We&&e(ne._activeElement()).hasClass("k-widget")||Z(ne._activeElement())||X(a,!0)}),n&&t.preventDefault()))}function te(e,t,n){return'<tr role="row" class="k-grouping-row">'+i(t)+'<td colspan="'+e+'" aria-expanded="true"><p class="k-reset"><a class="k-icon k-i-collapse" href="#" tabindex="-1"></a>'+n+"</p></td></tr>"}function ie(e){return'<tr role="row" class="k-grouping-row"><td colspan="'+e+'" aria-expanded="true"><p class="k-reset">&nbsp;</p></td></tr>'}var ne=window.kendo,re=ne.ui,se=ne.data.DataSource,oe=ne.support.tbodyInnerHtml,ae=ne._activeElement,le=re.Widget,de=ne.keys,ce=e.isPlainObject,ue=e.extend,he=e.map,fe=e.grep,pe=e.isArray,me=e.inArray,ge=Array.prototype.push,ve=e.proxy,_e=ne.isFunction,be=e.isEmptyObject,ke=Math,we=":not(.k-group-cell):not(.k-hierarchy-cell):visible",ye="tr:not(.k-footer-template):visible",xe=":not(.k-group-cell):not(.k-hierarchy-cell):visible",Ce=ye+":first>"+xe+":first",Se="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",Te=".kendoGrid",De="change",Fe="k-state-focused",Ee="columnResize",Re="click",Ae="tabIndex",Ie="function",Me="string",He=/(\}|\#)/gi,ze=/#/gi,Ne="[\\x20\\t\\r\\n\\f]",Pe=new RegExp("(^|"+Ne+")(k-group-cell|k-hierarchy-cell)("+Ne+"|$)"),Le=new RegExp("(^|"+Ne+")(k-filter-row)("+Ne+"|$)"),Be=!1,Oe=ne.support.browser,Ve=Oe.msie&&7==Oe.version,We=Oe.msie&&8==Oe.version,Ue=le.extend({init:function(e,t){le.fn.init.call(this,e,t),this._refreshHandler=ve(this.refresh,this),this.setDataSource(t.dataSource),this.wrap()},setDataSource:function(e){this.dataSource&&this.dataSource.unbind(De,this._refreshHandler),this.dataSource=e,this.dataSource.bind(De,this._refreshHandler)},options:{name:"VirtualScrollable",itemHeight:e.noop,prefetch:!0},destroy:function(){le.fn.destroy.call(this),this.dataSource.unbind(De,this._refreshHandler),this.wrapper.add(this.verticalScrollbar).off(Te),this.drag&&(this.drag.destroy(),this.drag=null),this.wrapper=this.element=this.verticalScrollbar=null,this._refreshHandler=null},wrap:function(){var t,i=this,n=ne.support.scrollbar()+1,r=i.element;r.css({width:"auto",overflow:"hidden"}).css(Be?"padding-left":"padding-right",n),i.content=r.children().first(),t=i.wrapper=i.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+Te+" mousewheel"+Te,ve(i._wheelScroll,i)),ne.support.kineticScrollNeeded&&(i.drag=new ne.UserEvents(i.wrapper,{global:!0,start:function(e){e.sender.capture()},move:function(e){i.verticalScrollbar.scrollTop(i.verticalScrollbar.scrollTop()-e.y.delta),t.scrollLeft(t.scrollLeft()-e.x.delta),e.preventDefault()}})),i.verticalScrollbar=e('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:n}).appendTo(r).bind("scroll"+Te,ve(i._scroll,i))},_wheelScroll:function(t){if(!t.ctrlKey){var i=this.verticalScrollbar,n=i.scrollTop(),r=ne.wheelDeltaY(t);!r||r>0&&0===n||r<0&&n+i[0].clientHeight==i[0].scrollHeight||(t.preventDefault(),e(t.currentTarget).one("wheel"+Te,!1),this.verticalScrollbar.scrollTop(n+-r))}},_scroll:function(e){var t=this,i=!t.options.prefetch,n=e.currentTarget.scrollTop,r=t.dataSource,s=t.itemHeight,o=r.skip()||0,a=t._rangeStart||o,l=t.element.innerHeight(),d=!!(t._scrollbarTop&&t._scrollbarTop>n),c=ke.max(ke.floor(n/s),0),u=ke.max(c+ke.floor(l/s),0);t._scrollTop=n-a*s,t._scrollbarTop=n,t._scrolling=i,t._fetch(c,u,d)||(t.wrapper[0].scrollTop=t._scrollTop),i&&(t._scrollingTimeout&&clearTimeout(t._scrollingTimeout),t._scrollingTimeout=setTimeout(function(){t._scrolling=!1,t._page(t._rangeStart,t.dataSource.take())},100))},itemIndex:function(e){return(this._rangeStart||this.dataSource.skip()||0)+e},position:function(e){var t,i=this._rangeStart||this.dataSource.skip()||0,n=this.dataSource.pageSize();return(t=e>i?e-i+1:i-e-1)>n?n:t},scrollIntoView:function(e){var t=this.wrapper[0],i=t.clientHeight,n=this._scrollTop||t.scrollTop,r=e[0].offsetTop,s=e[0].offsetHeight;n>r?this.verticalScrollbar[0].scrollTop-=i/2:r+s>=n+i&&(this.verticalScrollbar[0].scrollTop+=i/2)},_fetch:function(t,i,n){var r=this.dataSource,s=this.itemHeight,o=r.take(),a=this._rangeStart||r.skip()||0,l=ke.floor(t/o)*o,d=!1;return t<a?(d=!0,a=ke.max(0,i-o),this._scrollTop=(t-a)*s,this._page(a,o)):i>=a+o&&!n?(d=!0,a=t,this._scrollTop=s,this._page(a,o)):!this._fetching&&this.options.prefetch&&(t<l+o-.33*o&&t>o&&r.prefetch(l-o,o,e.noop),i>l+.33*o&&r.prefetch(l+o,o,e.noop)),d},fetching:function(){return this._fetching},_page:function(e,t){var i=this,n=!i.options.prefetch,r=i.dataSource;clearTimeout(i._timeout),i._fetching=!0,i._rangeStart=e,r.inRange(e,t)?r.range(e,t):(n||ne.ui.progress(i.wrapper.parent(),!0),i._timeout=setTimeout(function(){i._scrolling||(n&&ne.ui.progress(i.wrapper.parent(),!0),r.range(e,t))},100))},repaintScrollbar:function(){var e,t,i,n="",r=this.dataSource,s=ne.support.kineticScrollNeeded?0:ne.support.scrollbar(),o=this.wrapper[0];i=this.itemHeight=this.options.itemHeight()||0;var a=o.scrollWidth>o.offsetWidth?s:0;for(e=r.total()*i+a,t=0;t<ke.floor(e/25e4);t++)n+='<div style="width:1px;height:250000px"></div>';e%25e4&&(n+='<div style="width:1px;height:'+e%25e4+'px"></div>'),this.verticalScrollbar.html(n),o.scrollTop=this._scrollTop},refresh:function(){var e=this.dataSource,t=this._rangeStart;ne.ui.progress(this.wrapper.parent(),!1),clearTimeout(this._timeout),this.repaintScrollbar(),this.drag&&this.drag.cancel(),t&&!this._fetching&&(this._rangeStart=e.skip(),1===e.page()&&(this.verticalScrollbar[0].scrollTop=0)),this._fetching=!1}}),qe={create:{text:"Add new record",imageClass:"k-add",className:"k-grid-add",iconClass:"k-icon"},cancel:{text:"Cancel changes",imageClass:"k-cancel",className:"k-grid-cancel-changes",iconClass:"k-icon"},save:{text:"Save changes",imageClass:"k-update",className:"k-grid-save-changes",iconClass:"k-icon"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-grid-delete",iconClass:"k-icon"},edit:{text:"Edit",imageClass:"k-edit",className:"k-grid-edit",iconClass:"k-icon"},update:{text:"Update",imageClass:"k-update",className:"k-primary k-grid-update",iconClass:"k-icon"},canceledit:{text:"Cancel",imageClass:"k-cancel",className:"k-grid-cancel",iconClass:"k-icon"},excel:{text:"Export to Excel",imageClass:"k-i-excel",className:"k-grid-excel",iconClass:"k-icon"},pdf:{text:"Export to PDF",imageClass:"k-i-pdf",className:"k-grid-pdf",iconClass:"k-icon"}},$e=ne.ui.DataBoundWidget.extend({init:function(t,i,n){var r=this;i=pe(i)?{dataSource:i}:i,le.fn.init.call(r,t,i),n&&(r._events=n),Be=ne.support.isRtl(t),r._element(),r._aria(),r._columns(r.options.columns),r._dataSource(),r._tbody(),r._pageable(),r._thead(),r._groupable(),r._toolbar(),r._setContentHeight(),r._templates(),r._navigatable(),r._selectable(),r._clipboard(),r._details(),r._editable(),r._attachCustomCommandsEvent(),r._minScreenSupport(),r.options.autoBind?r.dataSource.fetch():(r._group=r._groups()>0,r._footer()),r.lockedContent&&(r.wrapper.addClass("k-grid-lockedcolumns"),r._resizeHandler=function(){r.resize()},e(window).on("resize"+Te,r._resizeHandler)),ne.notify(r)},events:[De,"dataBinding","cancel","dataBound","detailExpand","detailCollapse","detailInit","filterMenuInit","columnMenuInit","edit","save","remove","saveChanges",Ee,"columnReorder","columnShow","columnHide","columnLock","columnUnlock","navigate"],setDataSource:function(e){var t=this.options.scrollable;this.options.dataSource=e,this._dataSource(),this._pageable(),this._thead(),t&&(t.virtual?this.content.find(">.k-virtual-scrollable-wrap").scrollLeft(0):this.content.scrollLeft(0)),this.options.groupable&&this._groupable(),this.virtualScrollable&&this.virtualScrollable.setDataSource(this.options.dataSource),this.options.navigatable&&this._navigatable(),this.options.selectable&&this._selectable(),this.options.autoBind&&e.fetch()},options:{name:"Grid",columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,allowCopy:!1,navigatable:!1,pageable:!1,editable:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",noRecords:!1,dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",messages:{editable:{cancelDelete:"Cancel",confirmation:"Are you sure you want to delete this record?",confirmDelete:"Delete"},commands:{create:qe.create.text,cancel:qe.cancel.text,save:qe.save.text,destroy:qe.destroy.text,edit:qe.edit.text,update:qe.update.text,canceledit:qe.canceledit.text,excel:qe.excel.text,pdf:qe.pdf.text},noRecords:"No records available."}},destroy:function(){var t;this._angularItems("cleanup"),this._destroyColumnAttachments(),le.fn.destroy.call(this),this._navigatableTables=null,this._resizeHandler&&e(window).off("resize"+Te,this._resizeHandler),this.pager&&this.pager.element&&this.pager.destroy(),this.pager=null,this.groupable&&this.groupable.element&&this.groupable.element.kendoGroupable("destroy"),this.groupable=null,this.options.reorderable&&this.wrapper.data("kendoReorderable").destroy(),this.selectable&&this.selectable.element&&(this.selectable.destroy(),this.clearArea(),this.copyHandler&&(this.wrapper.off("keydown",this.copyHandler),this.unbind(this.copyHandler)),this.updateClipBoardState&&(this.unbind(this.updateClipBoardState),this.updateClipBoardState=null),this.clearAreaHandler&&this.wrapper.off("keyup",this.clearAreaHandler)),this.selectable=null,this.resizable&&(this.resizable.destroy(),this._resizeUserEvents&&(this._resizeHandleDocumentClickHandler&&e(document).off("click",this._resizeHandleDocumentClickHandler),this._resizeUserEvents.destroy(),this._resizeUserEvents=null),this.resizable=null),this.virtualScrollable&&this.virtualScrollable.element&&this.virtualScrollable.destroy(),this.virtualScrollable=null,this._destroyEditable(),this.dataSource&&(this.dataSource.unbind(De,this._refreshHandler).unbind("progress",this._progressHandler).unbind("error",this._errorHandler),this._refreshHandler=this._progressHandler=this._errorHandler=null),t=this.element.add(this.wrapper).add(this.table).add(this.thead).add(this.wrapper.find(">.k-grid-toolbar")),this.content&&(t=t.add(this.content).add(this.content.find(">.k-virtual-scrollable-wrap"))),this.lockedHeader&&this._removeLockedContainers(),this.pane&&this.pane.destroy(),this.minScreenResizeHandler&&e(window).off("resize",this.minScreenResizeHandler),this._draggableInstance&&this._draggableInstance.element&&this._draggableInstance.destroy(),this._draggableInstance=null,t.off(Te),ne.destroy(this.wrapper),this.rowTemplate=this.altRowTemplate=this.lockedRowTemplate=this.lockedAltRowTemplate=this.detailTemplate=this.footerTemplate=this.groupFooterTemplate=this.lockedGroupFooterTemplate=this.noRecordsTemplate=null,this.scrollables=this.thead=this.tbody=this.element=this.table=this.content=this.footer=this.wrapper=this.lockedTable=this.lockedContent=this.lockedHeader=this.lockedFooter=this._groupableClickHandler=this._setContentWidthHandler=null},getOptions:function(){this.options.dataSource=null;var i=ue(!0,{},this.options);i.columns=ne.deepExtend([],this.columns);var n=this.dataSource,r=n.options.data&&n._data;return n.options.data=null,i.dataSource=e.extend(!0,{},n.options),n.options.data=r,i.dataSource.data=r,i.dataSource.page=n.page(),i.dataSource.filter=n.filter(),i.dataSource.pageSize=n.pageSize(),i.dataSource.sort=n.sort(),i.dataSource.group=n.group(),i.dataSource.aggregate=n.aggregate(),i.dataSource.transport&&(i.dataSource.transport.dataSource=null),i.pageable&&i.pageable.pageSize&&(i.pageable.pageSize=n.pageSize()),i.$angular=t,i},setOptions:function(e){var t=this.getOptions();ne.deepExtend(t,e),e.dataSource||(t.dataSource=this.dataSource);var i=this.wrapper,n=this._events,r=this.element;if(this.destroy(),this.options=null,this._isMobile){var s=i.closest(ne.roleSelector("pane")).parent();s.after(i),s.remove(),i.removeClass("k-grid-mobile")}i[0]!==r[0]&&(i.before(r),i.remove()),r.empty(),this.init(r,t,n),this._setEvents(t)},items:function(){return this.lockedContent?this._items(this.tbody).add(this._items(this.lockedTable.children("tbody"))):this._items(this.tbody)},_items:function(t){return t.children().filter(function(){var t=e(this);return!t.hasClass("k-grouping-row")&&!t.hasClass("k-detail-row")&&!t.hasClass("k-group-footer")})},dataItems:function(){var e=ne.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){for(var t=e.length,i=new Array(2*t),n=t;--n>=0;)i[n]=i[n+t]=e[n];e=i}return e},_destroyColumnAttachments:function(){var t=this;t.resizeHandle=null,t.thead&&(this.angular("cleanup",function(){return{elements:t.thead.get()}}),t.thead.add(t.lockedHeader).find("th").each(function(){var t=e(this),i=t.data("kendoFilterMenu"),n=t.data("kendoColumnSorter"),r=t.data("kendoColumnMenu");i&&i.destroy(),n&&n.destroy(),r&&r.destroy()}))},_attachCustomCommandsEvent:function(){var e,t,i,n=H(this.columns||[]);for(t=0,i=n.length;t<i;t++)(e=n[t].command)&&a(this,this.wrapper,e)},_aria:function(){var e=this.element.attr("id")||"aria";e&&(this._cellId=e+"_active_cell")},_element:function(){var t=this.element;t.is("table")||(t=this.options.scrollable?this.element.find("> .k-grid-content > table"):this.element.children("table")).length||(t=e("<table />").appendTo(this.element)),Ve&&t.attr("cellspacing",0),this.table=t.attr("role",this._hasDetails()?"treegrid":"grid"),this._wrapper()},_createResizeHandle:function(t,i){var n,r=this,s=r.options.columnResizeHandleWidth,o=r.options.scrollable,a=r.resizeHandle,l=this._groups();if(a&&r.lockedContent&&a.data("th")[0]!==i[0]&&(a.off(Te).remove(),a=null),a||(a=r.resizeHandle=e('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>'),t.append(a)),Be){if(n=i.position().left,o){var d=i.closest(".k-grid-header-wrap, .k-grid-header-locked"),c=Oe.msie?d.scrollLeft():0;n-=(Oe.webkit?d[0].scrollWidth-d[0].offsetWidth-d.scrollLeft():0)-(Oe.mozilla?d[0].scrollWidth-d[0].offsetWidth-(d[0].scrollWidth-d[0].offsetWidth-d.scrollLeft()):0)+c}}else{n=i[0].offsetWidth;for(var u=z(i.closest("thead")).filter(":visible"),h=0;h<u.length&&u[h]!=i[0];h++)n+=u[h].offsetWidth;l>0&&(n+=t.find(".k-group-cell:first").outerWidth()*l),r._hasDetails()&&(n+=t.find(".k-hierarchy-cell:first").outerWidth())}a.css({top:i.position().top,left:n-s,height:i.outerHeight(),width:3*s}).data("th",i).show(),a.off("dblclick"+Te).on("dblclick"+Te,function(){r._autoFitLeafColumn(i.data("index"))})},_positionColumnResizeHandle:function(){var t=this,i=t.options.columnResizeHandleWidth,n=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t.thead.add(n).on("mousemove"+Te,"th",function(n){var s=e(this);if(!s.hasClass("k-group-cell")&&!s.hasClass("k-hierarchy-cell")){var o=n.clientX/parseFloat(document.documentElement.style.zoom||document.body.style.zoom||1),a=e(window).scrollLeft(),l=s.offset().left+(Be?0:this.offsetWidth);o+a>l-i&&o+a<l+i?t._createResizeHandle(s.closest("div"),s):t.resizeHandle?t.resizeHandle.hide():r(t.wrapper,"")}})},_resizeHandleDocumentClick:function(t){e(t.target).closest(".k-column-active").length||(e(document).off(t),this._hideResizeHandle())},_hideResizeHandle:function(){this.resizeHandle&&(this.resizeHandle.data("th").removeClass("k-column-active"),this.lockedContent&&!this._isMobile?(this.resizeHandle.off(Te).remove(),this.resizeHandle=null):this.resizeHandle.hide())},_positionColumnResizeHandleTouch:function(){var t=this,i=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t._resizeUserEvents=new ne.UserEvents(i.add(t.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,hold:function(i){var n=e(i.target);i.preventDefault(),n.addClass("k-column-active"),t._createResizeHandle(n.closest("div"),n),t._resizeHandleDocumentClickHandler||(t._resizeHandleDocumentClickHandler=ve(t._resizeHandleDocumentClick,t)),e(document).on("click",t._resizeHandleDocumentClickHandler)}})},_resizable:function(){var t,i,n,s,o,a,l,d=this,c=d.options,u=this._isMobile,h=ne.support.mobileOS?0:ne.support.scrollbar();c.resizable&&(t=c.scrollable?d.wrapper.find(".k-grid-header-wrap:first"):d.wrapper,u?d._positionColumnResizeHandleTouch(t):d._positionColumnResizeHandle(t),d.resizable&&d.resizable.destroy(),d.resizable=new re.Resizable(t.add(d.lockedHeader),{handle:(c.scrollable?"":">")+".k-resize-handle",hint:function(t){return e('<div class="k-grid-resize-indicator" />').css({height:t.data("th").outerHeight()+d.tbody.attr("clientHeight")})},start:function(t){l=e(t.currentTarget).data("th"),u&&d._hideResizeHandle();var h=l.closest("table"),f=e.inArray(l[0],z(l.closest("thead")).filter(":visible")),p=(o=h.parent().hasClass("k-grid-header-locked"))?d.lockedTable:d.table,m=d.footer||e();d.footer&&d.lockedContent&&(m=o?d.footer.children(".k-grid-footer-locked"):d.footer.children(".k-grid-footer-wrap")),r(d.wrapper,"col-resize"),a=c.scrollable?h.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")").add(p.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")")).add(m.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")")):p.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")"),i=t.x.location,n=l.outerWidth(),s=o?p.children("tbody").outerWidth():d.tbody.outerWidth(),Oe.webkit&&d.wrapper.addClass("k-grid-column-resizing")},resize:function(t){var r=Be?-1:1,u=n+t.x.location*r-i*r;if(c.scrollable){var f;o&&d.lockedFooter?f=d.lockedFooter.children("table"):d.footer&&(f=d.footer.find(">.k-grid-footer-wrap>table")),f&&f[0]||(f=e());var p=l.closest("table"),m=o?d.lockedTable:d.table,g=!1,v=d.wrapper.width()-h,_=u;o&&s-n+_>v&&((_=n+(v-s-2*h))<0&&(_=u),g=!0),_>10&&(a.css("width",_),s&&(_=g?v-2*h:s+t.x.location*r-i*r,m.add(p).add(f).css("width",_),o||(d._footerWidth=_)))}else u>10&&a.css("width",u)},resizeend:function(){var e,t,i=l.outerWidth();if(r(d.wrapper,""),Oe.webkit&&d.wrapper.removeClass("k-grid-column-resizing"),n!=i){t=d.lockedHeader?d.lockedHeader.find("thead:first tr:first").add(d.thead.find("tr:first")):l.parent();var s=l.attr(ne.attr("index"));s||(s=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(l)),(e=H(d.columns)[s]).width=i,d.trigger(Ee,{column:e,oldWidth:n,newWidth:i}),d._applyLockedContainersWidth(),d._syncLockedContentHeight(),d._syncLockedHeaderHeight()}d._hideResizeHandle(),l=null}}))},_draggable:function(){var t=this;t.options.reorderable&&(t._draggableInstance&&t._draggableInstance.destroy(),t._draggableInstance=t.wrapper.kendoDraggable({group:ne.guid(),autoScroll:!0,filter:t.content?".k-grid-header:first "+Se:"table:first>.k-grid-header "+Se,drag:function(){t._hideResizeHandle()},hint:function(t){var i=t.attr(ne.attr("title"));return i&&(i=ne.htmlEncode(i)),e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(i||t.attr(ne.attr("field"))||t.text()).prepend('<span class="k-icon k-drag-status k-denied" />')}}).data("kendoDraggable"))},_reorderable:function(){var t=this;if(t.options.reorderable){t.wrapper.data("kendoReorderable")&&t.wrapper.data("kendoReorderable").destroy();var i=function(e,i,n){var r=e[i],s=e[n],o=d(r,t.columns);return e=o?o.columns:t.columns,me(s,e)};t.wrapper.kendoReorderable({draggable:t._draggableInstance,dragOverContainers:function(e,n){var r=x(t.columns);return!1!==r[e].lockable&&i(r,e,n)>-1},inSameContainer:function(n){return e(n.source).parent()[0]===e(n.target).parent()[0]&&i(x(t.columns),n.sourceIndex,n.targetIndex)>-1},change:function(e){var n=x(t.columns),r=n[e.oldIndex],s=i(n,e.oldIndex,e.newIndex);t.trigger("columnReorder",{newIndex:s,oldIndex:me(r,n),column:r}),t.reorderColumn(s,r,"before"===e.position)}})}},_reorderHeader:function(e,t,i){for(var n=k(e[0],this.columns),r=k(t,this.columns),a=[],l=0;l<e.length;l++)e[l].columns&&(a=a.concat(e[l].columns));var d=o(this.lockedHeader,this.thead,"tr:eq("+n.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"),c=E(e).length,u=E([t]).length;a.length?(c>0&&0===u?g(e,t,a,this.columns,this.lockedHeader.find("thead"),this.thead,this._groups()):0===c&&u>0&&g(e,t,a,this.columns,this.thead,this.lockedHeader.find("thead"),this._groups()),(t.columns||n.cell-r.cell>1||r.cell-n.cell>1)&&(t=w(this.columns,t,e[0],i))&&this._reorderHeader(a,t,i)):c!==u&&function(e,t,i){var n=_(E(t)),r=_(R(t)),s=e.rowSpan;e.rowSpan=i?n>r?s-(n-r)||1:s+(r-n):n>r?s+(n-r):s-(r-n)||1}(d[n.cell],this.columns,c),s(d,n.cell,r.cell,i,e.length)},_reorderContent:function(t,i,n){var r,a,l=e(),d=t[0],c=p(t),u=me(d,H(this.columns)),h=me(i,H(this.columns)),f=me(d,M(this.columns)),m=me(i,M(this.columns)),g=E(this.columns).length,v=!!i.locked,_=this.footer||this.wrapper.find(".k-grid-footer");r=a=m,i.hidden&&(v?(m=this.lockedTable.find("colgroup"),r=this.lockedHeader.find("colgroup"),a=e(this.lockedFooter).find(">table>colgroup")):(m=this.tbody.prev(),r=this.thead.prev(),a=_.find(".k-grid-footer-wrap").find(">table>colgroup"))),this._hasFilterRow()&&s(this.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),u,h,n,t.length),s(o(this.lockedHeader,this.thead.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),f,r,n,c.length),this.options.scrollable&&s(o(this.lockedTable,this.tbody.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),f,m,n,c.length),_&&_.length&&(s(o(this.lockedFooter,_.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),f,a,n,c.length),s(_.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),u,h,n,t.length));var b=this.tbody.children(":not(.k-grouping-row,.k-detail-row)");this.lockedTable&&(g>h?g<=u&&Y(this.lockedTable.find(">tbody>tr.k-grouping-row"),this.table.find(">tbody>tr.k-grouping-row"),t.length):g>u&&Y(this.table.find(">tbody>tr.k-grouping-row"),this.lockedTable.find(">tbody>tr.k-grouping-row"),t.length),l=this.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)"));for(var k=0,w=b.length;k<w;k+=1)s(o(l[k],b[k],">td:not(.k-group-cell,.k-hierarchy-cell)"),u,h,n,t.length)},_autoFitLeafColumn:function(e){this.autoFitColumn(H(this.columns)[e])},autoFitColumn:function(t){var i,n,r,s,o,a=this.options,l=this.columns,d=this.lockedHeader?z(this.lockedHeader.find(">table>thead")).filter(h).length:0,c="col:not(.k-group-col):not(.k-hierarchy-col)",u="td:visible:not(.k-group-cell):not(.k-hierarchy-cell)";if((t="number"==typeof t?l[t]:ce(t)?fe(C(l),function(e){return e===t})[0]:fe(C(l),function(e){return e.field===t})[0])&&f(t)){i=me(t,H(l)),n=(r=(s=t.locked)?this.lockedHeader.children("table"):this.thead.parent()).find("[data-index='"+i+"']");var p=s?this.lockedTable:this.table,m=this.footer||e();this.footer&&this.lockedContent&&(m=s?this.footer.children(".k-grid-footer-locked"):this.footer.children(".k-grid-footer-wrap"));var g=m.find("table").first();this.lockedHeader&&!s&&(i-=d);for(var v=0;v<l.length&&l[v]!==t;v++)l[v].hidden&&i--;o=a.scrollable?r.find(c).eq(i).add(p.children("colgroup").find(c).eq(i)).add(g.find("colgroup").find(c).eq(i)):p.children("colgroup").find(c).eq(i);var _=r.add(p).add(g),b=n.outerWidth();o.width(""),_.css("table-layout","fixed"),o.width("auto"),_.addClass("k-autofitting"),_.css("table-layout","");var k=Math.ceil(Math.max(n.outerWidth(),p.find("tr:not(.k-grouping-row)").eq(0).children(u).eq(i).outerWidth(),g.find("tr").eq(0).children(u).eq(i).outerWidth()))+1;if(o.width(k),t.width=k,a.scrollable){for(var w,y=r.find("col"),x=0,S=0,T=y.length;S<T;S+=1){if(!(w=y[S].style.width)||-1!=w.indexOf("%")){x=0;break}x+=parseInt(w,10)}x&&_.each(function(){this.style.width=x+"px"})}Oe.msie&&8==Oe.version&&(_.css("display","inline-table"),setTimeout(function(){_.css("display","table")},1)),_.removeClass("k-autofitting"),this.trigger(Ee,{column:t,oldWidth:b,newWidth:k}),this._applyLockedContainersWidth(),this._syncLockedContentHeight(),this._syncLockedHeaderHeight()}},reorderColumn:function(e,i,n){var r,s=d(i,this.columns),o=s?s.columns:this.columns,a=me(i,o),l=o[e],c=!!l.locked,u=E(this.columns).length;if(a!==e&&(i.locked||!c||1!=R(this.columns).length)&&(!i.locked||c||1!=u)){this._hideResizeHandle(),n===t&&(n=e<a);var h=[i];this._reorderHeader(h,l,n),this.lockedHeader&&(D(this.thead),D(this.lockedHeader)),l.columns&&(l=(l=H(l.columns))[n?0:l.length-1]),i.columns&&(h=H(i.columns)),this._reorderContent(h,l,n),r=(r=!!i.locked)!=c,i.locked=c,o.splice(n?e:e+1,0,i),o.splice(a<e?a:a+1,1),this._templates(),this._updateColumnCellIndex(),this._updateTablesWidth(),this._applyLockedContainersWidth(),this._syncLockedHeaderHeight(),this._syncLockedContentHeight(),this._updateFirstColumnClass(),r&&(c?this.trigger("columnLock",{column:i}):this.trigger("columnUnlock",{column:i}))}},_updateColumnCellIndex:function(){var e=0;this.lockedHeader&&(e=v(this.lockedHeader.find("thead"),E(this.columns))),v(this.thead,R(this.columns),e)},lockColumn:function(e){var t=this.columns;if((e="number"==typeof e?t[e]:fe(t,function(t){return t.field===e})[0])&&!e.locked&&!e.hidden){var i=E(t).length-1;this.reorderColumn(i,e,!1)}},unlockColumn:function(e){var t=this.columns;if((e="number"==typeof e?t[e]:fe(t,function(t){return t.field===e})[0])&&e.locked&&!e.hidden){var i=E(t).length;this.reorderColumn(i,e,!0)}},cellIndex:function(t){var i=0;return this.lockedTable&&!e.contains(this.lockedTable[0],t[0])&&(i=H(E(this.columns)).length),e(t).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(t)+i},_modelForContainer:function(t){(t=e(t)).is("tr")||"popup"===this._editMode()||(t=t.closest("tr"));var i=t.attr(ne.attr("uid"));return this.dataSource.getByUid(i)},_editable:function(){var t=this,i=t.selectable&&t.selectable.options.multiple,n=t.options.editable,r=function(){var i=ae(),n=t._editContainer;!n||e.contains(n[0],i)||n[0]===i||e(i).closest(".k-animation-container").length||t.editable.end()&&t.closeCell()};n&&(this.wrapper.addClass("k-editable"),"incell"===t._editMode()?!1!==n.update&&t.wrapper.on(Re+Te,"tr:not(.k-grouping-row) > td",function(n){var r=e(this),s=t.lockedTable&&r.closest("table")[0]===t.lockedTable[0];r.hasClass("k-hierarchy-cell")||r.hasClass("k-detail-cell")||r.hasClass("k-group-cell")||r.hasClass("k-edit-cell")||r.has("a.k-grid-delete").length||r.has("button.k-grid-delete").length||r.closest("tbody")[0]!==t.tbody[0]&&!s||e(n.target).is(":input")||(t.editable?t.editable.end()&&(i&&e(ae()).blur(),t.closeCell(),t.editCell(r)):t.editCell(r))}).on("focusin"+Te,function(){e.contains(this,ae())||(clearTimeout(t.timer),t.timer=null)}).on("focusout"+Te,function(){t.timer=setTimeout(r,1)}):!1!==n.update&&t.wrapper.on(Re+Te,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",function(i){i.preventDefault(),t.editRow(e(this).closest("tr"))}),!1!==n.destroy?t.wrapper.on(Re+Te,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(i){i.preventDefault(),i.stopPropagation(),t.removeRow(e(this).closest("tr"))}):t.wrapper.on(Re+Te,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",function(e){e.stopPropagation(),t._confirmation()||e.preventDefault()}))},editCell:function(t){t=e(t);var i=this,n=H(i.columns)[i.cellIndex(t)],r=i._modelForContainer(t);if(i.closeCell(),r&&(!r.editable||r.editable(n.field))&&!n.command&&n.field){i._attachModelChange(r),i._editContainer=t,i.editable=t.addClass("k-edit-cell").kendoEditable({fields:{field:n.field,format:n.format,editor:n.editor,values:n.values},model:r,target:i,change:function(e){i.trigger("save",{values:e.values,container:t,model:r})&&e.preventDefault()}}).data("kendoEditable");var s=t.parent().addClass("k-grid-edit-row");i.lockedContent&&Q(s[0],i._relatedRow(s).addClass("k-grid-edit-row")[0]),i.trigger("edit",{container:t,model:r})}},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent(),i=e[0].offsetWidth>t[0].clientWidth?ne.support.scrollbar():0;this.lockedContent.height(t.height()-i)},_syncLockedContentHeight:function(){this.lockedTable&&(this.touchScroller||this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){if(this.lockedHeader){var e=this.lockedHeader.children("table"),t=this.thead.parent();this._adjustRowsHeight(e,t),function(e,t){if(e=e[0],t=t[0],e.rows.length!==t.rows.length){var i,n,r=e.offsetHeight,s=t.offsetHeight;r>s?(i=t.rows[t.rows.length-1],Le.test(i.className)&&(i=t.rows[t.rows.length-2]),n=r-s):(i=e.rows[e.rows.length-1],Le.test(i.className)&&(i=e.rows[e.rows.length-2]),n=s-r),i.style.height=i.offsetHeight+n+"px"}}(e,t)}},_syncLockedFooterHeight:function(){this.lockedFooter&&this.footer&&this.footer.length&&this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))},_destroyEditable:function(){var e=this,t=function(){if(e.editable){var t=e.editView?e.editView.element:e._editContainer;t&&(t.off(Re+Te,"a.k-grid-cancel",e._editCancelClickHandler),t.off(Re+Te,"a.k-grid-update",e._editUpdateClickHandler)),e._detachModelChange(),e.editable.destroy(),e.editable=null,e._editContainer=null,e._destroyEditView()}};e.editable&&("popup"!==e._editMode()||e._isMobile?t():e._editContainer.data("kendoWindow").bind("deactivate",t).close()),e._actionSheet&&(e._actionSheet.destroy(),e._actionSheet=null)},_destroyEditView:function(){this.editView&&(this.editView.purge(),this.editView=null,this.pane.navigate(""))},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})},e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this._editContainer,t=this._modelForContainer(e);t&&t.unbind(De,this._modelChangeHandler)},closeCell:function(t){var i,n,r,s,o=this._editContainer;o&&(i=o.closest("tr").attr(ne.attr("uid")),s=this.dataSource.getByUid(i),t&&this.trigger("cancel",{container:o,model:s})||(o.removeClass("k-edit-cell"),n=H(this.columns)[this.cellIndex(o)],r=o.parent().removeClass("k-grid-edit-row"),this._destroyEditable(),this._displayCell(o,n,s),o.hasClass("k-dirty-cell")&&e('<span class="k-dirty"/>').prependTo(o),this.trigger("itemChange",{item:r,data:s,ns:re}),this.lockedContent&&Q(r.css("height","")[0],this._relatedRow(r).css("height","")[0])))},_displayCell:function(e,t,i){var n={storage:{},count:0},r=ue({},ne.Template,this.options.templateSettings),s=ne.template(this._cellTmpl(t,n),r);n.count>0&&(s=ve(s,n.storage)),e.empty().html(s(i)),this.angular("compile",function(){return{elements:e,data:[{dataItem:i}]}})},removeRow:function(e){this._confirmation(e)&&this._removeRow(e)},_removeRow:function(t){var i,n=this._editMode();"incell"!==n&&this.cancelRow(),t=e(t),this.lockedContent&&(t=t.add(this._relatedRow(t))),t=t.hide(),(i=this._modelForContainer(t))&&!this.trigger("remove",{row:t,model:i})?(this.dataSource.remove(i),"inline"!==n&&"popup"!==n||this.dataSource.sync()):"incell"===n&&this._destroyEditable()},_editMode:function(){var e="incell",t=this.options.editable;return!0!==t&&(e="string"==typeof t?t:t.mode||e),e},editRow:function(t){var i,n=this;t instanceof ne.data.ObservableObject?i=t:(t=e(t),i=n._modelForContainer(t));var r,s=n._editMode();n.cancelRow(),i&&(t=n.tbody.children("["+ne.attr("uid")+"="+i.uid+"]"),n._attachModelChange(i),"popup"===s?n._createPopupEditor(i):"inline"===s?n._createInlineEditor(t,i):"incell"===s&&e(t).children(we).each(function(){var t=e(this),r=H(n.columns)[n.cellIndex(t)];if((i=n._modelForContainer(t))&&(!i.editable||i.editable(r.field))&&r.field)return n.editCell(t),!1}),(r=n.editView?n.editView.element:n._editContainer)&&(this._editCancelClickHandler||(this._editCancelClickHandler=ve(this._editCancelClick,this)),r.on(Re+Te,"a.k-grid-cancel",this._editCancelClickHandler),this._editUpdateClickHandler||(this._editUpdateClickHandler=ve(this._editUpdateClick,this)),r.on(Re+Te,"a.k-grid-update",this._editUpdateClickHandler)))},_editUpdateClick:function(e){e.preventDefault(),e.stopPropagation(),this.saveRow()},_editCancelClick:function(t){var i=this.options.navigatable,n=this.editable.options.model,r=this.editView?this.editView.element:this._editContainer;if(t.preventDefault(),t.stopPropagation(),!this.trigger("cancel",{container:r,model:n})){var s=this.items().index(e(this.current()).parent());this.cancelRow(),i&&(this._setCurrent(this.items().eq(s).children().filter(xe).first()),X(this.table,!0))}},_createPopupEditor:function(t){var i,n,r,s,o,a,l,d,c,u=this,h="<div "+ne.attr("uid")+'="'+t.uid+'" class="k-popup-edit-form'+(u._isMobile?" k-mobile-list":"")+'"><div class="k-edit-form-container">',f=[],p=H(u.columns),m=u.options.editable,g=m.template,v=ce(m)?m.window:{},_=ue({},ne.Template,u.options.templateSettings);if(v=v||{},g)for(typeof g===Me&&(g=window.unescape(g)),h+=ne.template(g,_)(t),r=0,s=p.length;r<s;r++)(i=p[r]).command&&(d=J(i.command,"edit"))&&(n=d);else for(r=0,s=p.length;r<s;r++)if((i=p[r]).command)i.command&&(d=J(i.command,"edit"))&&(n=d);else if(h+='<div class="k-edit-label"><label for="'+i.field+'">'+(i.title||i.field||"")+"</label></div>",t.editable&&!t.editable(i.field)||!i.field){var b={storage:{},count:0};o=ne.template(u._cellTmpl(i,b),_),b.count>0&&(o=ve(o,b.storage)),h+='<div class="k-edit-field">'+o(t)+"</div>"}else f.push({field:i.field,format:i.format,editor:i.editor,values:i.values}),h+="<div "+ne.attr("container-for")+'="'+i.field+'" class="k-edit-field"></div>';n&&ce(n)&&(n.text&&ce(n.text)&&(a=n.text.update,l=n.text.cancel),n.attr&&(c=n.attr));var k;u._isMobile?(h+="</div></div>",u.editView=u.pane.append("<div data-"+ne.ns+'role="view" data-'+ne.ns+'use-native-scrolling="true" data-'+ne.ns+'init-widgets="false" class="k-grid-edit-form"><div data-'+ne.ns+'role="header" class="k-header">'+u._createButton({name:"update",text:a,attr:c})+(v.title||"Edit")+u._createButton({name:"canceledit",text:l,attr:c})+"</div>"+h+"</div>"),k=u._editContainer=u.editView.element.find(".k-popup-edit-form")):(h+='<div class="k-edit-buttons k-state-default">',h+=u._createButton({name:"update",text:a,attr:c})+u._createButton({name:"canceledit",text:l,attr:c}),h+="</div></div></div>",k=u._editContainer=e(h).appendTo(u.wrapper).eq(0).kendoWindow(ue({modal:!0,resizable:!1,draggable:!0,title:"Edit",visible:!1,close:function(i){if(i.userTriggered){if(i.sender.element.focus(),u.trigger("cancel",{container:k,model:t}))return void i.preventDefault();var n=u.items().index(e(u.current()).parent());u.cancelRow(),u.options.navigatable&&(u._setCurrent(u.items().eq(n).children().filter(xe).first()),X(u.table,!0))}}},v))),u.editable=u._editContainer.kendoEditable({fields:f,model:t,clearContainer:!1,target:u}).data("kendoEditable"),u._isMobile&&k.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){e(this).next().children("input").click()}),u._openPopUpEditor(),u.trigger("edit",{container:k,model:t})},_openPopUpEditor:function(){this._isMobile?this.pane.navigate(this.editView,this._editAnimation):this._editContainer.data("kendoWindow").center().open()},_createInlineEditor:function(t,i){var n,r,s,o=this,a=[];o.lockedContent&&(t=t.add(o._relatedRow(t))),t.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){if(r=e(this),(n=H(o.columns)[o.cellIndex(r)]).command||!n.field||i.editable&&!i.editable(n.field)){if(n.command&&(s=J(n.command,"edit"))){r.empty();var t,l,d;ce(s)&&(s.text&&ce(s.text)&&(t=s.text.update,l=s.text.cancel),s.attr&&(d=s.attr)),e(o._createButton({name:"update",text:t,attr:d})+o._createButton({name:"canceledit",text:l,attr:d})).appendTo(r)}}else a.push({field:n.field,format:n.format,editor:n.editor,values:n.values}),r.attr(ne.attr("container-for"),n.field),r.empty()}),o._editContainer=t,o.editable=new ne.ui.Editable(t.addClass("k-grid-edit-row"),{target:o,fields:a,model:i,clearContainer:!1}),t.length>1&&(Q(t[0],t[1]),o._applyLockedContainersWidth()),o.trigger("edit",{container:t,model:i})},cancelRow:function(e){var t,i=this._editContainer;if(i){if(t=this._modelForContainer(i),e&&this.trigger("cancel",{container:i,model:t}))return;this._destroyEditable(),this.dataSource.cancelChanges(t),"popup"!==this._editMode()?this._displayRow(i):this._displayRow(this.tbody.find("["+ne.attr("uid")+"="+t.uid+"]"))}},saveRow:function(){var e=this._editContainer,t=this._modelForContainer(e),i=this.editable;e&&i&&i.end()&&!this.trigger("save",{container:e,model:t})&&this.dataSource.sync()},_displayRow:function(t){var i,n,r,s=this._modelForContainer(t),o=t.hasClass("k-state-selected"),a=t.hasClass("k-alt");if(s){this.lockedContent&&(i=e((a?this.lockedAltRowTemplate:this.lockedRowTemplate)(s)),this._relatedRow(t.last()).replaceWith(i)),this.angular("cleanup",function(){return{elements:t.get()}}),n=e((a?this.altRowTemplate:this.rowTemplate)(s)),t.replaceWith(n),this.trigger("itemChange",{item:n,data:s,ns:re}),i&&i.length&&this.trigger("itemChange",{item:i,data:s,ns:re});var l=n,d=[{dataItem:s}];i&&i.length&&(l=n.add(i),d.push({dataItem:s})),this.angular("compile",function(){return{elements:l.get(),data:d}}),o&&this.options.selectable&&this.select(n.add(i)),i&&Q(n[0],i[0]),(r=n.next()).hasClass("k-detail-row")&&r.is(":visible")&&n.find(".k-hierarchy-cell .k-icon").removeClass("k-plus").addClass("k-minus")}},_showMessage:function(t,i){var n=this;if(!n._isMobile)return window.confirm(t.title);var r=ne.template('<ul><li class="km-actionsheet-title">#:title#</li><li><a href="\\#" class="k-button k-grid-delete">#:confirmDelete#</a></li></ul>'),s=e(r(t)).appendTo(n.view.element);return(n._actionSheet=new ne.mobile.ui.ActionSheet(s,{cancel:t.cancelDelete,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy()},command:function(t){e(t.currentTarget).parent().hasClass("km-actionsheet-cancel")||n._removeRow(i)},popup:n._actionSheetPopupOptions})).open(i),!1},_confirmation:function(e){var t=this.options.editable,i=!0===t||typeof t===Me?this.options.messages.editable.confirmation:t.confirmation;return!1===i||null==i||(typeof i===Ie&&(i=i(this._modelForContainer(e))),this._showMessage({confirmDelete:t.confirmDelete||this.options.messages.editable.confirmDelete,cancelDelete:t.cancelDelete||this.options.messages.editable.cancelDelete,title:!0===i?this.options.messages.editable.confirmation:i},e))},cancelChanges:function(){this.dataSource.cancelChanges()},saveChanges:function(){(this.editable&&this.editable.end()||!this.editable)&&!this.trigger("saveChanges")&&this.dataSource.sync()},addRow:function(){var e,t=this.dataSource,i=this._editMode(),n=this.options.editable.createAt||"",r=t.pageSize(),s=t.view()||[];if(this.editable&&this.editable.end()||!this.editable){"incell"!=i&&this.cancelRow(),e=t.indexOf(s[0]),"bottom"==n.toLowerCase()&&(e+=s.length,r&&!t.options.serverPaging&&r<=s.length&&(e-=1)),e<0&&(e=t.page()>t.totalPages()?(t.page()-1)*r:0);var o=t.insert(e,{}),a=o.uid,l=(this.lockedContent?this.lockedTable:this.table).find("tr["+ne.attr("uid")+"="+a+"]"),d=l.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(this._firstEditableColumnIndex(l));"inline"===i&&l.length?this.editRow(l):"popup"===i?this.editRow(o):d.length&&this.editCell(d),"bottom"==n.toLowerCase()&&this.lockedContent&&(this.lockedContent[0].scrollTop=this.content[0].scrollTop=this.table[0].offsetHeight)}},_firstEditableColumnIndex:function(e){var t,i,n,r=H(this.columns),s=this._modelForContainer(e);for(i=0,n=r.length;i<n;i++)if(t=r[i],s&&(!s.editable||s.editable(t.field))&&!t.command&&t.field&&!0!==t.hidden)return i;return-1},_toolbar:function(){var t,i=this,n=i.wrapper,r=i.options.toolbar,s=i.options.editable;r&&((t=i.wrapper.find(".k-grid-toolbar")).length||(_e(r)||(r=typeof r===Me?r:i._toolbarTmpl(r).replace(ze,"\\#"),r=ve(ne.template(r),i)),t=e('<div class="k-header k-grid-toolbar" />').html(r({})).prependTo(n),i.angular("compile",function(){return{elements:t.get()}})),s&&!1!==s.create&&t.on(Re+Te,".k-grid-add",function(e){e.preventDefault(),i.addRow()}).on(Re+Te,".k-grid-cancel-changes",function(e){e.preventDefault(),i.cancelChanges()}).on(Re+Te,".k-grid-save-changes",function(e){e.preventDefault(),i.saveChanges()}),t.on(Re+Te,".k-grid-excel",function(e){e.preventDefault(),i.saveAsExcel()}),t.on(Re+Te,".k-grid-pdf",function(e){e.preventDefault(),i.saveAsPDF()}))},_toolbarTmpl:function(e){var t,i,n="";if(pe(e))for(t=0,i=e.length;t<i;t++)n+=this._createButton(e[t]);return n},_createButton:function(e){var i,r=e.template||'<a class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a>',s=typeof e===Me?e:e.name||e.text,o={className:qe[s]?qe[s].className:"k-grid-"+(s||"").replace(/\s/g,""),text:s,imageClass:"",attr:"",iconClass:""},a=this.options.messages.commands;if(!(s||ce(e)&&e.template))throw new Error("Custom commands should have name specified");return ce(e)?((e=ue(!0,{},e)).className&&me(o.className,e.className.split(" "))<0?e.className+=" "+o.className:e.className===t&&(e.className=o.className),"edit"===s&&ce(e.text)&&((e=ue(!0,{},e)).text=e.text.edit),e.attr&&(ce(e.attr)&&(e.attr=n(e.attr)),typeof e.attr===Me&&(i=e.attr.match(/class="(.+?)"/))&&me(i[1],e.className.split(" "))<0&&(e.className+=" "+i[1])),o=ue(!0,o,qe[s],{text:a[s]},e)):o=ue(!0,o,qe[s],{text:a[s]}),ne.template(r)(o)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var t=this;t._groupableClickHandler?t.table.add(t.lockedTable).off(Re+Te,t._groupableClickHandler):t._groupableClickHandler=function(i){var n=e(this),r=n.closest("tr");n.hasClass("k-i-collapse")?t.collapseGroup(r):t.expandGroup(r),i.preventDefault(),i.stopPropagation()},t._isLocked()?t.lockedTable.on(Re+Te,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",t._groupableClickHandler):t.table.on(Re+Te,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",t._groupableClickHandler),t._attachGroupable()},_attachGroupable:function(){var t=this.wrapper,i=this.options.groupable,n=Se+"["+ne.attr("field")+"]",r=this.content?".k-grid-header:first "+n:"table:first>.k-grid-header "+n;i&&!1!==i.enabled&&(t.has("div.k-grouping-header")[0]||e("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(t),this.groupable&&this.groupable.destroy(),this.groupable=new re.Groupable(t,ue({},i,{draggable:this._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:this.dataSource,draggableElements:r,filter:r,allowDrag:this.options.reorderable})))},_continuousItems:function(t,i){if(this.lockedContent){for(var n=this.table.add(this.lockedTable),r=e(t,n[0]),s=e(t,n[1]),o=i?E(this.columns).length:1,a=i?this.columns.length-o:1,l=[],d=0;d<r.length;d+=o)ge.apply(l,r.slice(d,d+o)),ge.apply(l,s.splice(0,a));return l}},_selectable:function(){var t,i,n=this,r=[],s=n._isLocked(),o=n.options.selectable;if(o){n.selectable&&n.selectable.destroy(),o=ne.ui.Selectable.parseOptions(o),t=o.multiple,i=o.cell,n._hasDetails()&&(r[r.length]=".k-detail-row"),(n.options.groupable||n._hasFooters())&&(r[r.length]=".k-grouping-row,.k-group-footer"),""!==(r=r.join(","))&&(r=":not("+r+")");var a=n.table;s&&(a=a.add(n.lockedTable));var l=">"+(i?"tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)":"tbody>tr"+r);n.selectable=new ne.ui.Selectable(a,{filter:l,aria:!0,multiple:t,change:function(){n.trigger(De)},useAllItems:s&&t&&i,relatedTarget:function(t){if(!i&&s){for(var r,o=e(),a=0,l=t.length;a<l;a++)r=n._relatedRow(t[a]),me(r[0],t)<0&&(o=o.add(r));return o}},continuousItems:function(){return n._continuousItems(l,i)}}),n.options.navigatable&&a.on("keydown"+Te,function(r){var o=n.current(),l=r.target;if(r.keyCode===de.SPACEBAR&&e.inArray(l,a)>-1&&!o.is(".k-edit-cell,.k-header")&&o.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){if(r.preventDefault(),r.stopPropagation(),o=i?o:o.parent(),s&&!i&&(o=o.add(n._relatedRow(o))),t)if(r.ctrlKey){if(o.hasClass("k-state-selected"))return o.removeClass("k-state-selected"),void n.trigger(De)}else n.selectable.clear();else n.selectable.clear();n.selectable.value(o)}})}},_clipboard:function(){var e=this.options;if(e.selectable&&e.allowCopy){var t=this;e.navigatable||t.table.add(t.lockedTable).attr("tabindex",0).on("mousedown"+Te+" keydown"+Te,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}).on("mousedown"+Te,ye+">"+xe,ve(ee,t)),t.copyHandler=ve(t.copySelection,t),t.updateClipBoardState=function(){t.areaClipBoard&&t.areaClipBoard.val(t.getTSV()).focus().select()},t.bind("change",t.updateClipBoardState),t.wrapper.on("keydown",t.copyHandler),t.clearAreaHandler=ve(t.clearArea,t),t.wrapper.on("keyup",t.clearAreaHandler)}},copySelection:function(t){t instanceof jQuery.Event&&!t.ctrlKey&&!t.metaKey||e(t.target).is("input:visible,textarea:visible")||window.getSelection&&window.getSelection().toString()||document.selection&&document.selection.createRange().text||(this.areaClipBoard||(this.areaClipBoard=e("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper)),this.areaClipBoard.val(this.getTSV()).focus().select())},getTSV:function(){var t=this,i=t.select(),n="\t",r=t.options.allowCopy;e.isPlainObject(r)&&r.delimeter&&(n=r.delimeter);var s="";if(i.length){i.eq(0).is("tr")&&(i=i.find("td:not(.k-group-cell)")),i.filter(":visible");var o=[],a=this.columns.length,l=t._isLocked()&&E(t.columns).length,d=!0;e.each(i,function(i,n){var r=(n=e(n)).closest("tr").index(),s=n.index();s-=n.prevAll(":hidden").length,l&&d&&(d=e.contains(t.lockedTable[0],n[0])),t._groups()&&d&&(s-=t._groups()),a>(s=d?s:s+l)&&(a=s);var c=n.text();o[r]||(o[r]=[]),o[r][s]=c});var c=o.length;o=e.each(o,function(e,t){t&&(o[e]=t.slice(a),c>e&&(c=e))}),e.each(o.slice(c),function(e,t){s+=t?t.join(n)+"\r\n":"\r\n"})}return s},clearArea:function(t){this.areaClipBoard&&t&&t.target===this.areaClipBoard[0]&&X(this.options.navigatable?e(this.current()).closest("table"):this.table,!0),this.areaClipBoard&&(this.areaClipBoard.remove(),this.areaClipBoard=null)},_minScreenSupport:function(){this.hideMinScreenCols()&&(this.minScreenResizeHandler=ve(this.hideMinScreenCols,this),e(window).on("resize",this.minScreenResizeHandler))},hideMinScreenCols:function(){var e=this.columns,t=window.innerWidth>0?window.innerWidth:screen.width;return this._iterateMinScreenCols(e,t)},_iterateMinScreenCols:function(e,i){for(var n=!1,r=0;r<e.length;r++){var s=e[r],o=s.minScreenWidth;o!==t&&null!==o&&(n=!0,o>i?this.hideColumn(s):this.showColumn(s)),!s.hidden&&s.columns&&(n=this._iterateMinScreenCols(s.columns,i)||n)}return n},_relatedRow:function(t){var i=this.lockedTable;if(t=e(t),!i)return t;var n=t.closest(this.table.add(this.lockedTable)),r=n.find(">tbody>tr").index(t);return(n=n[0]===this.table[0]?i:this.table).find(">tbody>tr").eq(r)},clearSelection:function(){this.selectable.clear(),this.trigger(De)},select:function(e){var t=this,i=t.selectable;return(e=t.table.add(t.lockedTable).find(e)).length?(i.options.multiple||(i.clear(),e=e.first()),t._isLocked()&&(e=e.add(e.map(function(){return t._relatedRow(this)}))),void i.value(e)):i.value()},_updateCurrentAttr:function(t,i){var n=e(t).data("headerId");if(e(t).removeClass(Fe).removeAttr("aria-describedby").closest("table").removeAttr("aria-activedescendant"),n?(n=n.replace(this._cellId,""),e(t).attr("id",n)):e(t).removeAttr("id"),i.data("headerId",i.attr("id")).attr("id",this._cellId).addClass(Fe).closest("table").attr("aria-activedescendant",this._cellId),i.closest("tr").hasClass("k-grouping-row")||i.hasClass("k-header"))i.attr("aria-describedby",this._cellId);else{var r=this.columns[this.cellIndex(i)];r&&(n=r.headerAttributes.id),i.attr("aria-describedby",n+" "+this._cellId)}this._current=i},_scrollCurrent:function(){var t=this._current,i=this.options.scrollable;if(t&&i){var n=t.parent(),r=n.closest("table").parent(),s=r.is(".k-grid-content-locked,.k-grid-header-locked"),o=r.is(".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap"),a=e(this.content).find(">.k-virtual-scrollable-wrap").andSelf().last()[0];if(o)if(i.virtual){var l=Math.max(me(n[0],this._items(n.parent())),0);this._rowVirtualIndex=this.virtualScrollable.itemIndex(l),this.virtualScrollable.scrollIntoView(n)}else this._scrollTo(this._relatedRow(n)[0],a);this.lockedContent&&(this.lockedContent[0].scrollTop=a.scrollTop),s||this._scrollTo(t[0],a)}},current:function(e){return this._setCurrent(e,!0)},_setCurrent:function(t,i){var n=this._current;return(t=e(t)).length&&(n&&n[0]===t[0]||(this._updateCurrentAttr(n,t),this._scrollCurrent(),i||this.trigger("navigate",{element:t}))),this._current},_removeCurrent:function(){this._current&&(this._current.removeClass(Fe),this._current=null)},_scrollTo:function(t,i){var n=t.tagName.toLowerCase(),r="td"===n||"th"===n,s=t[r?"offsetLeft":"offsetTop"],o=t[r?"offsetWidth":"offsetHeight"],a=i[r?"scrollLeft":"scrollTop"],l=i[r?"clientWidth":"clientHeight"],d=s+o,c=0,u=0,h=0;if(Be&&r){var f=e(t).closest("table")[0];Oe.msie?u=f.offsetLeft:Oe.mozilla&&(h=f.offsetLeft-ne.support.scrollbar())}c=(a=Math.abs(a+u-h))>s?s:d>a+l?o<=l?d-l:s:a,c=Math.abs(c+u)+h,i[r?"scrollLeft":"scrollTop"]=c},_navigatable:function(){if(this.options.navigatable){var t=this.table.add(this.lockedTable),i=this.thead.parent().add(e(">table",this.lockedHeader)),n=t;this.options.scrollable&&(n=n.add(i),i.attr(Ae,-1)),this._navigatableTables=n,n.off("mousedown"+Te+" focus"+Te+" focusout"+Te+" keydown"+Te),i.on("keydown"+Te,ve(this._openHeaderMenu,this)).find("a.k-link").attr("tabIndex",-1),t.attr(Ae,ke.max(t.attr(Ae)||0,0)).on("mousedown"+Te+" keydown"+Te,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}),n.on(ne.support.touch?"touchstart"+Te:"mousedown"+Te,ye+">"+xe,ve(ee,this)).on("focus"+Te,ve(this._tableFocus,this)).on("focusout"+Te,ve(this._tableBlur,this)).on("keydown"+Te,ve(this._tableKeyDown,this))}},_openHeaderMenu:function(e){e.altKey&&e.keyCode==de.DOWN&&(this.current().find(".k-grid-filter, .k-header-column-menu").click(),e.stopImmediatePropagation())},_setTabIndex:function(e){this._navigatableTables.attr(Ae,-1),e.attr(Ae,0)},_tableFocus:function(t){if(!ne.support.touch){var i=this.current(),n=e(t.currentTarget);i&&i.is(":visible")?i.addClass(Fe):this._setCurrent(n.find(Ce)),this._setTabIndex(n)}},_tableBlur:function(){var e=this.current();e&&e.removeClass(Fe)},_tableKeyDown:function(t){var i=this.current(),n=this.virtualScrollable&&this.virtualScrollable.fetching(),r=e(t.target),s=!t.isDefaultPrevented()&&!r.is(":button,a,:input,a>.k-icon");if(n)t.preventDefault();else if((i=i||e(this.lockedTable).add(this.table).find(Ce)).length){var o=!1;s&&t.keyCode==de.UP&&(o=this._moveUp(i)),s&&t.keyCode==de.DOWN&&(o=this._moveDown(i)),s&&t.keyCode==(Be?de.LEFT:de.RIGHT)&&(o=this._moveRight(i,t.altKey)),s&&t.keyCode==(Be?de.RIGHT:de.LEFT)&&(o=this._moveLeft(i,t.altKey)),s&&t.keyCode==de.PAGEDOWN&&(o=this._handlePageDown()),s&&t.keyCode==de.PAGEUP&&(o=this._handlePageUp()),t.keyCode!=de.ENTER&&t.keyCode!=de.F2||(o=this._handleEnterKey(i,t.currentTarget,r)),t.keyCode==de.ESC&&(o=this._handleEscKey(i,t.currentTarget)),t.keyCode==de.TAB&&(o=this._handleTabKey(i,t.currentTarget,t.shiftKey)),o&&(t.preventDefault(),t.stopPropagation())}},_moveLeft:function(e,t){var i,n,r=e.parent(),s=r.parent();return t?this.collapseRow(r):(n=s.find(ye).index(r),(i=this._prevHorizontalCell(s,e,n))[0]||(s=this._horizontalContainer(s),(i=this._prevHorizontalCell(s,e,n))[0]!==e[0]&&X(s.parent(),!0)),this._setCurrent(i)),!0},_moveRight:function(e,t){var i,n,r=e.parent(),s=r.parent();return t?this.expandRow(r):(n=s.find(ye).index(r),(i=this._nextHorizontalCell(s,e,n))[0]||(s=this._horizontalContainer(s,!0),(i=this._nextHorizontalCell(s,e,n))[0]!==e[0]&&X(s.parent(),!0)),this._setCurrent(i)),!0},_moveUp:function(e){var t=e.parent().parent(),i=this._prevVerticalCell(t,e);return i[0]||(t=this._verticalContainer(t,!0),(i=this._prevVerticalCell(t,e))[0]&&X(t.parent(),!0)),this._setCurrent(i),!0},_moveDown:function(e){var t=e.parent().parent(),i=this._nextVerticalCell(t,e);return i[0]||(t=this._verticalContainer(t),(i=this._nextVerticalCell(t,e))[0]&&X(t.parent(),!0)),this._setCurrent(i),!0},_handlePageDown:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()+1),!0)},_handlePageUp:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()-1),!0)},_handleTabKey:function(t,i,n){var r;return!(!this.options.editable||"incell"!=this._editMode()||t.is("th")||((r=e(ae()).closest(".k-edit-cell"))[0]&&r[0]!==t[0]&&(t=r),!(r=this._tabNext(t,i,n)).length||(this._handleEditing(t,r,r.closest("table")),0)))},_handleEscKey:function(t,i){var n=ae(),r="incell"==this._editMode();if(!function(e){return e&&(e.hasClass("k-edit-cell")||e.parent().hasClass("k-grid-edit-row"))}(t))return!!t.has(n).length&&(X(i,!0),!0);if(r)this.closeCell(!0);else{var s=e(t).parent().index();n&&n.blur(),this.cancelRow(!0),s>=0&&this._setCurrent(this.items().eq(s).children(xe).first())}return Oe.msie&&Oe.version<9&&document.body.focus(),X(i,!0),!0},_toggleCurrent:function(e,t){var i=e.parent();return i.is(".k-grouping-row")?(i.find(".k-icon:first").click(),!0):!(t||!i.is(".k-master-row")||(i.find(".k-icon:first").click(),0))},_handleEnterKey:function(t,i,n){var r=this.options.editable,s=n.closest("[role=gridcell]");if(n.is("table")||e.contains(t[0],n[0])||(t=s),t.is("th"))return t.find(".k-link").click(),!0;if(this._toggleCurrent(t,r))return!0;var o=t.find(":kendoFocusable:first");return o[0]&&!t.hasClass("k-edit-cell")&&t.hasClass("k-state-focused")?(o.focus(),!0):!(!r||n.is(":button,.k-button,textarea")||(s[0]||(s=t),this._handleEditing(s,!1,i),0))},_nextHorizontalCell:function(e,t,i){var n=t.nextAll(we);if(!n.length){var r=e.find(ye);if(-1==r.index(t.parent())){if(t.hasClass("k-header")){var s=[];return F([E(this.columns)[0]],P(r.eq(0).children().first()),s,0,0),s[i]?s[i][0]:t}return t.parent().hasClass("k-filter-row")?r.last().children(we).first():r.eq(i).children(we).first()}}return n.first()},_prevHorizontalCell:function(e,t,i){var n=t.prevAll(we);if(!n.length){var r=e.find(ye);if(-1==r.index(t.parent())){if(t.hasClass("k-header")){var s=[],o=E(this.columns);return F([o[o.length-1]],P(r.eq(0).children().last()),s,0,0),s[i]?s[i][0]:t}return t.parent().hasClass("k-filter-row")?r.last().children(we).last():r.eq(i).children(we).last()}}return n.first()},_currentDataIndex:function(e,i){var n=i.attr("data-index");if(!n)return t;var r=E(this.columns).length;return r&&!e.closest("div").hasClass("k-grid-content-locked")[0]?n-r:n},_prevVerticalCell:function(t,i){var n,r=i.parent(),s=t.children(ye),o=s.index(r),a=this._currentDataIndex(t,i);if(a||i.hasClass("k-header"))return(n=N(i)).eq(n.length-2);if(a=r.children(we).index(i),r.hasClass("k-filter-row"))return z(t).eq(a);if(-1==o){if(!(r=t.find(".k-filter-row"))[0])return z(t).eq(a)}else r=0===o?e():s.eq(o-1);return(n=r.children(we)).length>a?n.eq(a):n.eq(0)},_nextVerticalCell:function(e,i){var n,r=i.parent(),s=e.children(ye),o=s.index(r),a=this._currentDataIndex(e,i);return-1!=o&&a===t&&i.hasClass("k-header")?P(i).eq(1):(a=a?parseInt(a,10):r.children(we).index(i),r=-1==o?s.eq(0):s.eq(o+i[0].rowSpan),(n=r.children(we)).length>a?n.eq(a):n.eq(0))},_verticalContainer:function(e,t){var i=e.parent(),n=this._navigatableTables.length,r=Math.floor(n/2),s=me(i[0],this._navigatableTables);return t&&(r*=-1),((s+=r)>=0||s<n)&&(i=this._navigatableTables.eq(s)),i.find(t?"thead":"tbody")},_horizontalContainer:function(e,t){var i=this._navigatableTables.length;if(i<=2)return e;var n=e.parent(),r=me(n[0],this._navigatableTables);return r+=t?1:-1,!t||2!=r&&r!=i?!t&&(1==r||r<0)?e:this._navigatableTables.eq(r).find("thead, tbody"):e},_tabNext:function(e,t,i){var n=!0,r=i?e.prevAll(we+":first"):e.nextAll(":visible:first");return r.length||(r=e.parent(),this.lockedTable&&(n=i&&t==this.lockedTable[0]||!i&&t==this.table[0],r=this._relatedRow(r)),n&&(r=r[i?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first")),r=r.children(we+(i?":last":":first"))),r},_handleEditing:function(t,i,n){var r,s,o=e(ae()),a=this._editMode(),l=Oe.msie,d=l&&Oe.version<9,c=this._editContainer;if(n=e(n),s="incell"==a?t.hasClass("k-edit-cell"):t.parent().hasClass("k-grid-edit-row"),this.editable){if(e.contains(c[0],o[0])&&(Oe.opera||d?o.blur().change().triggerHandler("blur"):(o.blur(),l&&o.blur())),!this.editable)return void X(n);if(!this.editable.end())return"incell"==a?this._setCurrent(c):this._setCurrent(c.children().filter(we).first()),void((r=c.find(":kendoFocusable:first")[0])&&r.focus());"incell"==a?this.closeCell():(this.saveRow(),s=!0)}i&&this._setCurrent(i),d&&document.body.focus(),X(n,!0),(!s&&!i||i)&&("incell"==a?this.editCell(this.current()):this.editRow(this.current().parent()))},_wrapper:function(){var e=this.table,t=this.options.height,i=this.element;i.is("div")||(i=i.wrap("<div/>").parent()),this.wrapper=i.addClass("k-grid k-widget"),t&&(this.wrapper.css("height",t),e.css("height","auto")),this._initMobile()},_initMobile:function(){var t=this.options,i=this;if(this._isMobile=!0===t.mobile&&ne.support.mobileOS||"phone"===t.mobile||"tablet"===t.mobile,this._isMobile){var n=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+ne.ns+'stretch="true" data-'+ne.ns+'role="view" data-'+ne.ns+'init-widgets="false"></div>').parent();this.pane=ne.mobile.ui.Pane.wrap(n),this.view=this.pane.view(),this._actionSheetPopupOptions=e(document.documentElement).hasClass("km-root")?{modal:!1}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"},t.height&&this.pane.element.parent().css("height",t.height),this._editAnimation="slide",this.view.bind("show",function(){i._isLocked()&&(i._updateTablesWidth(),i._applyLockedContainersWidth(),i._syncLockedContentHeight(),i._syncLockedHeaderHeight(),i._syncLockedFooterHeight())})}},_tbody:function(){var t,i=this.table;(t=i.find(">tbody")).length||(t=e("<tbody/>").appendTo(i)),this.tbody=t.attr("role","rowgroup")},_scrollable:function(){var t,i,n=this,r=n.options.scrollable,s=!0!==r&&r.virtual&&!n.virtualScrollable,o=!ne.support.kineticScrollNeeded||s?ne.support.scrollbar():0;if(r){(t=n.wrapper.children(".k-grid-header"))[0]||(t=e('<div class="k-grid-header" />').insertBefore(n.table)),t.css(Be?"padding-left":"padding-right",r.virtual?o+1:o),i=e('<table role="grid" />'),Ve&&i.attr("cellspacing",0),i.width(n.table[0].style.width),i.append(n.thead),t.empty().append(e('<div class="k-grid-header-wrap k-auto-scrollable" />').append(i)),n.content=n.table.parent(),n.content.is(".k-virtual-scrollable-wrap, .km-scroll-container")&&(n.content=n.content.parent()),n.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(n.content=n.table.wrap('<div class="k-grid-content k-auto-scrollable" />').parent()),s&&(n.virtualScrollable=new Ue(n.content,{dataSource:n.dataSource,itemHeight:function(){return n._averageRowHeight()}})),n.scrollables=t.children(".k-grid-header-wrap").add(n.content);var a=n.wrapper.find(".k-grid-footer");if(a.length&&(n.scrollables=n.scrollables.add(a.children(".k-grid-footer-wrap"))),r.virtual)n.content.find(">.k-virtual-scrollable-wrap").unbind("scroll"+Te).bind("scroll"+Te,function(){n.scrollables.scrollLeft(this.scrollLeft),n.lockedContent&&(n.lockedContent[0].scrollTop=this.scrollTop)});else{n.scrollables.unbind("scroll"+Te).bind("scroll"+Te,function(e){n.scrollables.not(e.currentTarget).scrollLeft(this.scrollLeft),n.lockedContent&&e.currentTarget==n.content[0]&&(n.lockedContent[0].scrollTop=this.scrollTop)});var l=n.content.data("kendoTouchScroller");l&&l.destroy(),(l=ne.touchScroller(n.content))&&l.movable&&(n.touchScroller=l,l.movable.bind("change",function(e){n.scrollables.scrollLeft(-e.sender.x),n.lockedContent&&n.lockedContent.scrollTop(-e.sender.y)}),n.one("dataBound",function(e){e.sender.wrapper.addClass("k-grid-backface")}))}}},_renderNoRecordsContent:function(){if(this.options.noRecords){var t=this.table.parent().children(".k-grid-norecords");t.length&&(this.angular("cleanup",function(){return{elements:t.get()}}),t.remove()),this.dataSource&&this.dataSource.view().length||(t=e(this.noRecordsTemplate({})).insertAfter(this.table),this.angular("compile",function(){return{elements:t.get(),data:[{}]}}))}},_setContentWidth:function(t){var i,n="k-grid-content-expander",r=this.resizable;this.options.scrollable&&this.wrapper.is(":visible")&&(i=this.table.parent().children("."+n),this._setContentWidthHandler=ve(this._setContentWidth,this),this.dataSource&&this.dataSource.view().length?i[0]&&(i.remove(),r&&r.unbind("resize",this._setContentWidthHandler)):(i[0]||(i=e('<div class="k-grid-content-expander"></div>').appendTo(this.table.parent()),r&&r.bind("resize",this._setContentWidthHandler)),this.thead&&(i.width(this.thead.width()),t&&this.content.scrollLeft(t))),this._applyLockedContainersWidth(),this.lockedHeader&&0===this.table[0].clientWidth&&(this.table[0].style.width="1px"))},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var e,t=this.thead.parent(),i=t.parent(),n=this.wrapper[0].clientWidth,r=this._groups(),s=ne.support.scrollbar(),o=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),a=t.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),l=T(o),d=T(a);r>0&&(l+=this.lockedHeader.find(".k-group-cell:first").outerWidth()*r),l>=n&&(l=n-3*s),this.lockedHeader.add(this.lockedContent).width(l),i[0].style.width=i.parent().width()-l-2+"px",t.add(this.table).width(d),this.virtualScrollable&&(n-=s),this.content[0].style.width=n-l-2+"px",this.lockedFooter&&this.lockedFooter.length&&(this.lockedFooter.width(l),(e=this.footer.find(".k-grid-footer-wrap"))[0].style.width=i[0].clientWidth+"px",e.children().first().width(d))}},_setContentHeight:function(){var e=this.options,t=this.wrapper.innerHeight(),i=this.wrapper.children(".k-grid-header"),n=ne.support.scrollbar();e.scrollable&&this.wrapper.is(":visible")&&(t-=i.outerHeight(),this.pager&&(t-=this.pager.element.outerHeight()),e.groupable&&(t-=this.wrapper.children(".k-grouping-header").outerHeight()),e.toolbar&&(t-=this.wrapper.children(".k-grid-toolbar").outerHeight()),this.footerTemplate&&(t-=this.wrapper.children(".k-grid-footer").outerHeight()),function(e){var t,i;return!!e[0].style.height||(t=e.height(),e.height("auto"),i=e.height(),t!=i?(e.height(""),!0):(e.height(""),!1))}(this.wrapper)&&(t>2*n?(this.lockedContent&&(n=this.table[0].offsetWidth>this.table.parent()[0].clientWidth?n:0,this.lockedContent.height(t-n)),this.content.height(t)):this.content.height(2*n+1)))},_averageRowHeight:function(){var e=this._items(this.tbody).length,t=this._rowHeight;if(0===e)return t;this._rowHeight||(this._rowHeight=t=this.table.outerHeight()/e,this._sum=t,this._measures=1);var i=this.table.outerHeight()/e;return t!==i&&(this._measures++,this._sum+=i,this._rowHeight=this._sum/this._measures),t},_dataSource:function(){var e,i=this.options,n=i.dataSource;n=pe(n)?{data:n}:n,ce(n)&&(ue(n,{table:this.table,fields:this.columns}),e=i.pageable,ce(e)&&e.pageSize!==t&&(n.pageSize=e.pageSize)),this.dataSource&&this._refreshHandler?this.dataSource.unbind(De,this._refreshHandler).unbind("progress",this._progressHandler).unbind("error",this._errorHandler):(this._refreshHandler=ve(this.refresh,this),this._progressHandler=ve(this._requestStart,this),this._errorHandler=ve(this._error,this)),this.dataSource=se.create(n).bind(De,this._refreshHandler).bind("progress",this._progressHandler).bind("error",this._errorHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_modelChange:function(t){var i,n,r,s,o,a,l,d,c,u=this,h=u.tbody,f=t.model,p=u.tbody.find("tr["+ne.attr("uid")+"="+f.uid+"]"),m=p.hasClass("k-alt"),g=u._items(h).index(p),v=u.lockedContent;if(v&&(i=u._relatedRow(p)),p.add(i).children(".k-edit-cell").length&&!u.options.rowTemplate)p.add(i).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){n=e(this),(r=H(u.columns)[u.cellIndex(n)]).field===t.field&&(n.hasClass("k-edit-cell")?n.addClass("k-dirty-cell"):(u._displayCell(n,r,f),e('<span class="k-dirty"/>').prependTo(n)))});else if(!p.hasClass("k-grid-edit-row")){a=e().add(p),v&&(s=(m?u.lockedAltRowTemplate:u.lockedRowTemplate)(f),a=a.add(i),i.replaceWith(s)),u.angular("cleanup",function(){return{elements:a.get()}}),s=(m?u.altRowTemplate:u.rowTemplate)(f),p.replaceWith(s),s=u._items(h).eq(g);var _=[{dataItem:f}];for(v&&(p=p.add(i),i=u._relatedRow(s)[0],Q(s[0],i),s=s.add(i),_.push({dataItem:f})),u.angular("compile",function(){return{elements:s.get(),data:_}}),(o=u.options.selectable)&&p.hasClass("k-state-selected")&&u.select(s),d=a.children(":not(.k-group-cell,.k-hierarchy-cell)"),l=s.children(":not(.k-group-cell,.k-hierarchy-cell)"),g=0,c=u.columns.length;g<c;g++)r=u.columns[g],n=l.eq(g),o&&d.eq(g).hasClass("k-state-selected")&&n.addClass("k-state-selected"),r.field===t.field&&e('<span class="k-dirty"/>').prependTo(n);u.trigger("itemChange",{item:s,data:f,ns:re})}},_pageable:function(){var t,i=this.options.pageable;i&&((t=this.wrapper.children("div.k-grid-pager")).length||(t=e('<div class="k-pager-wrap k-grid-pager"/>').appendTo(this.wrapper)),this.pager&&this.pager.destroy(),"object"==typeof i&&i instanceof ne.ui.Pager?this.pager=i:this.pager=new ne.ui.Pager(t,ue({},i,{dataSource:this.dataSource})))},_footer:function(){var t,i=this,n=i.dataSource.aggregates(),r="",s=i.footerTemplate,o=i.options,a=i.footer||i.wrapper.find(".k-grid-footer");if(s){if(r=e(i._wrapFooter(s(n))),a.length){var l=r;i.angular("cleanup",function(){return{elements:a.get()}}),a.replaceWith(l),a=i.footer=l}else a=o.scrollable?i.footer=o.pageable?r.insertBefore(i.wrapper.children("div.k-grid-pager")):r.appendTo(i.wrapper):i.footer=r.insertBefore(i.tbody);i.angular("compile",function(){return{elements:a.find("td:not(.k-group-cell, .k-hierarchy-cell)").get(),data:he(i.columns,function(e){return{column:e,aggregate:n[e.field]}})}})}else a&&!i.footer&&(i.footer=a);if(a.length&&(o.scrollable&&(t=a.attr("tabindex",-1).children(".k-grid-footer-wrap"),i.scrollables=i.scrollables.filter(function(){return!e(this).is(".k-grid-footer-wrap")}).add(t)),i._footerWidth&&a.find("table").css("width",i._footerWidth),t)){var d=i.content.scrollLeft();!0!==o.scrollable&&o.scrollable.virtual&&(d=i.wrapper.find(".k-virtual-scrollable-wrap").scrollLeft()),t.scrollLeft(d)}i.lockedContent&&(i._appendLockedColumnFooter(),i._applyLockedContainersWidth(),i._syncLockedFooterHeight())},_wrapFooter:function(t){var i="",n=ne.support.mobileOS?0:ne.support.scrollbar();return this.options.scrollable?(i=e('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table'+(Ve?' cellspacing="0"':"")+"><tbody>"+t+"</tbody></table></div></div>"),this._appendCols(i.find("table")),i.css(Be?"padding-left":"padding-right",n),i):'<tfoot class="k-grid-footer">'+t+"</tfoot>"},_columnMenu:function(){var e,i,n,r,s,o,a=this,l=H(a.columns),d=a.options,c=d.columnMenu,u=fe(a.columns,function(e){return e.columns!==t}).length>0,h=this._isMobile,f=function(e){a.trigger("columnMenuInit",{field:e.field,container:e.container})},p=function(e){X(e.closest("table"),!0)},m=d.$angular;if(c){"boolean"==typeof c&&(c={});for(var g=0,v=(o=z(a.thead)).length;g<v;g++){i=l[g];var _=o.eq(g);i.command||!i.field&&!_.attr("data-"+ne.ns+"field")||((e=_.data("kendoColumnMenu"))&&e.destroy(),r=!1!==i.sortable&&!1!==c.sortable&&!1!==d.sortable&&ue({},d.sortable,{compare:(i.sortable||{}).compare}),s=!(!d.filterable||!1===i.filterable||!1===c.filterable)&&ue({pane:a.pane},d.filterable,i.filterable),i.filterable&&i.filterable.dataSource&&(s.forceUnique=!1,s.checkSource=i.filterable.dataSource),s&&(s.format=i.format),n={dataSource:a.dataSource,values:i.values,columns:c.columns,sortable:r,filterable:s,messages:c.messages,owner:a,closeCallback:p,init:f,pane:a.pane,filter:h?":not(.k-column-active)":"",lockedColumns:!u&&!1!==i.lockable&&E(l).length>0},m&&(n.$angular=m),_.kendoColumnMenu(n))}}},_headerCells:function(){return this.thead.find("th").filter(function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")})},_filterable:function(){var e,t,i,n=this,r=H(n.columns),s=function(e){n.trigger("filterMenuInit",{field:e.field,container:e.container})},o=function(e){X(e.closest("table"),!0)},a=n.options.filterable;if(a&&typeof a.mode==Me&&-1==a.mode.indexOf("menu")&&(a=!1),a&&!n.options.columnMenu)for(var l=0,d=(t=z(n.thead)).length;l<d;l++)if(i=t.eq(l),!1!==r[l].filterable&&!r[l].command&&(r[l].field||i.attr("data-"+ne.ns+"field"))){(e=i.data("kendoFilterMenu"))&&e.destroy(),(e=i.data("kendoFilterMultiCheck"))&&e.destroy();var c=r[l].filterable,u=ue({},a,c,{dataSource:n.dataSource,values:r[l].values,format:r[l].format,closeCallback:o,title:r[l].title||r[l].field,init:s,pane:n.pane});c&&c.messages&&(u.messages=ue(!0,{},a.messages,c.messages)),c&&c.dataSource&&(u.forceUnique=!1,u.checkSource=c.dataSource),c&&c.multi?i.kendoFilterMultiCheck(u):i.kendoFilterMenu(u)}},_filterRow:function(){if(this._hasFilterRow()){var t,i=this.options.$angular,n=H(this.columns),r=this.options.filterable,s=this.thead.find(".k-filter-row");this._updateHeader(this.dataSource.group().length);for(var o=0;o<n.length;o++){var a,l=n[o],d=this.options.filterable.operators,c=!1,u=e("<th/>"),h=l.field;if(l.hidden&&u.hide(),s.append(u),h&&!1!==l.filterable){var f=l.filterable&&l.filterable.cell||{};(a=this.options.dataSource)instanceof se&&(a=this.options.dataSource.options);var p=ue(!0,{},r.messages);if(l.filterable&&ue(!0,p,l.filterable.messages),!1===f.enabled){u.html("&nbsp;");continue}f.dataSource&&(a=f.dataSource,c=!0),l.filterable&&l.filterable.operators&&(d=l.filterable.operators),t={column:l,dataSource:this.dataSource,suggestDataSource:a,customDataSource:c,field:h,messages:p,values:l.values,template:f.template,delay:f.delay,inputWidth:f.inputWidth,suggestionOperator:f.suggestionOperator,minLength:f.minLength,dataTextField:f.dataTextField,operator:f.operator,operators:d,showOperators:f.showOperators},i&&(t.$angular=i),e("<span/>").attr(ne.attr("field"),h).appendTo(u).kendoFilterCell(t)}else u.html("&nbsp;")}}},_sortable:function(){var e,t,i,n=H(this.columns),r=this.options.sortable;if(r){for(var s=z(this.thead),o=0,a=s.length;o<a;o++)!1!==(e=n[o]).sortable&&!e.command&&e.field&&((t=(i=s.eq(o)).data("kendoColumnSorter"))&&t.destroy(),i.attr("data-"+ne.ns+"field",e.field).kendoColumnSorter(ue({},r,e.sortable,{dataSource:this.dataSource,aria:!0,filter:":not(.k-column-active)"})));s=null}},_columns:function(t){var i,n,r=this.table,s=r.find("col"),o=this.options.dataSource;if(t=t.length?t:he(r.find("th"),function(t,i){var n=(t=e(t)).attr(ne.attr("sortable")),r=t.attr(ne.attr("filterable")),o=t.attr(ne.attr("type")),a=t.attr(ne.attr("groupable")),l=t.attr(ne.attr("field")),d=t.attr(ne.attr("title")),c=t.attr(ne.attr("menu"));return l||(l=t.text().replace(/\s|[^A-z0-9]/g,"")),{field:l,type:o,title:d,sortable:"false"!==n,filterable:"false"!==r,groupable:"false"!==a,menu:c,template:t.attr(ne.attr("template")),width:s.eq(i).css("width")}}),i=!(this.table.find("tbody tr").length>0&&(!o||!o.transport)),this.options.scrollable){var a=t;if(n=E(t),t=R(t),n.length>0&&0===t.length)throw new Error("There should be at least one non locked column");!function(e,t){var i,n,r=0,s=e.find("th:not(.k-group-cell)");for(i=0,n=t.length;i<n;i++)t[i].locked&&(s.eq(i).insertBefore(s.eq(r)),s=e.find("th:not(.k-group-cell)"),r++)}(this.element.find("tr:has(th):first"),a),t=n.concat(t)}this.columns=l(t,i)},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_tmpl:function(e,t,r,s){var o,a,l=ue({},ne.Template,this.options.templateSettings),d=t.length,c={storage:{},count:0},u=this._hasDetails(),h=[],f=this._groups();if(!e){for(e="<tr",r&&h.push("k-alt"),u&&h.push("k-master-row"),h.length&&(e+=' class="'+h.join(" ")+'"'),d&&(e+=" "+ne.attr("uid")+'="#='+ne.expr("uid",l.paramName)+'#"'),e+=" role='row'>",f>0&&!s&&(e+=i(f)),u&&(e+='<td class="k-hierarchy-cell"><a class="k-icon k-plus" href="\\#" tabindex="-1"></a></td>'),o=0;o<d;o++)(a=t[o]).template,e+="<td"+n(a.attributes)+" role='gridcell'>",e+=this._cellTmpl(a,c),e+="</td>";e+="</tr>"}return e=ne.template(e,l),c.count>0?ve(e,c.storage):e},_headerCellText:function(e){var t=ue({},ne.Template,this.options.templateSettings),i=e.headerTemplate,n=typeof i,r=e.title||e.field||"";return n===Ie?r=ne.template(i,t)({}):n===Me&&(r=i),r},_cellTmpl:function(e,t){var i,n,r=ue({},ne.Template,this.options.templateSettings),s=e.template,o=r.paramName,a=e.field,l="",d=e.format,c=typeof s,u=e.values;if(e.command){if(pe(e.command)){for(i=0,n=e.command.length;i<n;i++)l+=this._createButton(e.command[i]);return l.replace(ze,"\\#")}return this._createButton(e.command).replace(ze,"\\#")}return c===Ie?(t.storage["tmpl"+t.count]=s,l+="#=this.tmpl"+t.count+"("+o+")#",t.count++):c===Me?l+=s:u&&u.length&&ce(u[0])&&"value"in u[0]&&a?(l+="#var v ="+ne.stringify(W(u)).replace(ze,"\\#")+"#",l+="#var f = v[",r.useWithBlock||(l+=o+"."),l+=a+"]#",l+="${f != null ? f : ''}"):(l+=e.encoded?"#:":"#=",d&&(l+='kendo.format("'+d.replace(He,"\\$1")+'",'),l+=a?(a=ne.expr(a,o))+"==null?'':"+a:"''",d&&(l+=")"),l+="#"),l},_templates:function(){var t=this.options,i=this.dataSource,n=i.group(),r=this.footer||this.wrapper.find(".k-grid-footer"),s=i.aggregate(),o=H(this.columns),a=H(E(this.columns)),l=t.scrollable?H(R(this.columns)):o;if(t.scrollable&&a.length){if(t.rowTemplate||t.altRowTemplate)throw new Error("Having both row template and locked columns is not supported");this.rowTemplate=this._tmpl(t.rowTemplate,l,!1,!0),this.altRowTemplate=this._tmpl(t.altRowTemplate||t.rowTemplate,l,!0,!0),this.lockedRowTemplate=this._tmpl(t.rowTemplate,a),this.lockedAltRowTemplate=this._tmpl(t.altRowTemplate||t.rowTemplate,a,!0)}else this.rowTemplate=this._tmpl(t.rowTemplate,l),this.altRowTemplate=this._tmpl(t.altRowTemplate||t.rowTemplate,l,!0);this._hasDetails()&&(this.detailTemplate=this._detailTmpl(t.detailTemplate||"")),(this._group&&!be(s)||!be(s)&&!r.length||fe(o,function(e){return e.footerTemplate}).length)&&(this.footerTemplate=this._footerTmpl(o,s,"footerTemplate","k-footer-template")),n&&fe(o,function(e){return e.groupFooterTemplate}).length&&(s=e.map(n,function(e){return e.aggregates}),this.groupFooterTemplate=this._footerTmpl(l,s,"groupFooterTemplate","k-group-footer",a.length),t.scrollable&&a.length&&(this.lockedGroupFooterTemplate=this._footerTmpl(a,s,"groupFooterTemplate","k-group-footer"))),this.options.noRecords&&(this.noRecordsTemplate=this._noRecordsTmpl())},_noRecordsTmpl:function(){var t,i,n,r=this.options.scrollable&&!this.wrapper[0].style.height?' style="margin:0 auto;position:static;"':"",s={storage:{},count:0},o=e.extend({},ne.Template,this.options.templateSettings),a=o.paramName,l="";return t=this.options.noRecords.template?this.options.noRecords.template:ne.format('<div class="k-grid-norecords-template"{1}>{0}</div>',this.options.messages.noRecords,r),"function"==(i=typeof t)?(s.storage["tmpl"+s.count]=t,l+="#=this.tmpl"+s.count+"("+a+")#",s.count++):"string"===i&&(l+=t),n=ne.template(ne.format('<div class="{0}">{1}</div>',"k-grid-norecords",l),o),s.count>0&&(n=e.proxy(n,s.storage)),n},_footerTmpl:function(e,t,r,s,o){var a,l,d,c,u,h=ue({},ne.Template,this.options.templateSettings),f=h.paramName,p="",m={},g=0,v={},_=this._groups(),b=this.dataSource._emptyAggregates(t);for(p+='<tr class="'+s+'">',_>0&&!o&&(p+=i(_)),this._hasDetails()&&(p+='<td class="k-hierarchy-cell">&nbsp;</td>'),a=0,l=e.length;a<l;a++)c=typeof(d=(u=e[a])[r]),p+="<td"+n(u.footerAttributes)+">",d?(c!==Ie&&(v=b[u.field]?ue({},h,{paramName:f+"['"+u.field+"']"}):{},d=ne.template(d,v)),m["tmpl"+g]=d,p+="#=this.tmpl"+g+"("+f+")#",g++):p+="&nbsp;",p+="</td>";return p+="</tr>",p=ne.template(p,h),g>0?ve(p,m):p},_detailTmpl:function(e){var t="",n=ue({},ne.Template,this.options.templateSettings),r=n.paramName,s={},o=0,a=this._groups(),l=p(H(this.columns)).length,d=typeof e;return t+='<tr class="k-detail-row">',a>0&&(t+=i(a)),t+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(l?' colspan="'+l+'"':"")+">",d===Ie?(s["tmpl"+o]=e,t+="#=this.tmpl"+o+"("+r+")#",o++):t+=e,t+="</td></tr>",t=ne.template(t,n),o>0?ve(t,s):t},_hasDetails:function(){return null!==this.options.detailTemplate||(this._events.detailInit||[]).length},_hasFilterRow:function(){var t=this.options.filterable,i=t&&typeof t.mode==Me&&-1!=t.mode.indexOf("row"),n=this.columns,r=e.grep(n,function(e){return!1===e.filterable});return n.length&&r.length==n.length&&(i=!1),i},_details:function(){var t=this;if(t.options.scrollable&&t._hasDetails()&&E(t.columns).length)throw new Error("Having both detail template and locked columns is not supported");t.table.on(Re+Te,".k-hierarchy-cell .k-plus, .k-hierarchy-cell .k-minus",function(i){var n,r,s=e(this),o=s.hasClass("k-plus"),a=s.closest("tr.k-master-row"),l=t.detailTemplate,d=t._hasDetails();return s.toggleClass("k-plus",!o).toggleClass("k-minus",o),n=a.next(),d&&!n.hasClass("k-detail-row")&&(r=t.dataItem(a),n=e(l(r)).addClass(a.hasClass("k-alt")?"k-alt":"").insertAfter(a),t.angular("compile",function(){return{elements:n.get(),data:[{dataItem:r}]}}),t.trigger("detailInit",{masterRow:a,detailRow:n,data:r,detailCell:n.find(".k-detail-cell")})),t.trigger(o?"detailExpand":"detailCollapse",{masterRow:a,detailRow:n}),n.toggle(o),t._current&&t._current.attr("aria-expanded",o),i.preventDefault(),!1})},dataItem:function(t){if(!(t=e(t)[0]))return null;var i,n,r=this.tbody.children(),s=/k-grouping-row|k-detail-row|k-group-footer/,o=t.sectionRowIndex;for(n=o,i=0;i<o;i++)s.test(r[i].className)&&n--;return this._data[n]},expandRow:function(t){e(t).find("> td .k-plus, > td .k-i-expand").click()},collapseRow:function(t){e(t).find("> td .k-minus, > td .k-i-collapse").click()},_createHeaderCells:function(e,i){var r,s,o,a,l,d="",c=H(this.columns);for(r=0,a=e.length;r<a;r++){s=e[r].column||e[r],o=this._headerCellText(s),l="";var u=me(s,c);s.command?(d+="<th scope='col'"+n(s.headerAttributes),i&&!e[r].colSpan&&(d+=" rowspan='"+i+"'"),u>-1&&(d+=ne.attr("index")+"='"+u+"'"),d+=">"+o+"</th>"):(s.field&&(l=ne.attr("field")+"='"+s.field+"' "),d+="<th scope='col' role='columnheader' "+l,i&&!e[r].colSpan&&(d+=" rowspan='"+i+"'"),e[r].colSpan>1&&(d+='colspan="'+(e[r].colSpan-S(s.columns))+'" ',d+=ne.attr("colspan")+"='"+e[r].colSpan+"'"),s.title&&(d+=ne.attr("title")+'="'+s.title.replace('"',"&quot;").replace(/'/g,"'")+'" '),s.groupable!==t&&(d+=ne.attr("groupable")+"='"+s.groupable+"' "),s.aggregates&&s.aggregates.length&&(d+=ne.attr("aggregates")+"='"+s.aggregates+"'"),u>-1&&(d+=ne.attr("index")+"='"+u+"'"),d+=n(s.headerAttributes),d+=">"+o+"</th>")}return d},_appendLockedColumnContent:function(){var t,i,n,r,s,o=this.columns,a=this.table.find("colgroup"),l=a.find("col:not(.k-group-col,.k-hierarchy-col)"),d=e(),c=0,u=0;for(t=0,i=o.length;t<i;t++)if(o[t].locked)if(f(o[t])){for(r=1,o[t].columns&&(r=H(o[t].columns).length-S(o[t].columns)),r=r||1,s=0;s<r;s++)d=d.add(l.eq(t+u+s-c));u+=r-1}else c++;n=e('<div class="k-grid-content-locked"><table'+(Ve?' cellspacing="0"':"")+"><colgroup/><tbody></tbody></table></div>"),a.detach(),n.find("colgroup").append(d),a.insertBefore(this.table.find("tbody")),this.lockedContent=n.insertBefore(this.content),this.lockedTable=n.children("table")},_appendLockedColumnFooter:function(){var t,i,n=this.footer,r=n.find(".k-footer-template>td"),s=n.find(".k-grid-footer-wrap>table>colgroup>col"),o=e('<div class="k-grid-footer-locked"><table><colgroup /><tbody><tr class="k-footer-template"></tr></tbody></table></div>'),a=this._groups(),l=e(),d=e();for(l=l.add(r.filter(".k-group-cell")),t=0,i=H(E(this.columns)).length;t<i;t++)l=l.add(r.eq(t+a));for(d=d.add(s.filter(".k-group-col")),t=0,i=p(H(I(this.columns))).length;t<i;t++)d=d.add(s.eq(t+a));l.appendTo(o.find("tr")),d.appendTo(o.find("colgroup")),this.lockedFooter=o.prependTo(n)},_appendLockedColumnHeader:function(t){var i,n,r,s,o,a,l,d,c,u=this.columns,h=[],p=0,g=e(),v=this._hasFilterRow(),_=0,b=e(),k=0,w=e();s=this.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)"),l=this.thead.find("tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)"),d=this.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)");var y=0;for(i=0,r=u.length;i<r;i++){if(u[i].locked){if(c=l.eq(i),k=H(u[i].columns||[]).length,f(u[i])){var x=null;u[i].columns&&(x=k-S(u[i].columns)),x=x||1;for(var C=0;C<x;C++)g=g.add(s.eq(i+y+C-p));y+=x-1}F([u[i]],P(c),h,0,0),k=k||1;for(var T=0;T<k;T++)b=b.add(d.eq(_+T));_+=k}u[i].columns&&(p+=S(u[i].columns)),f(u[i])||p++}if(h.length){for(n='<div class="k-grid-header-locked" style="width:1px"><table'+(Ve?' cellspacing="0"':"")+"><colgroup/><thead>",n+=new Array(h.length+1).join("<tr></tr>"),(s=(a=e(n+=(v?'<tr class="k-filter-row" />':"")+"</thead></table></div>")).find("colgroup")).append(this.thead.prev().find("col.k-group-col").add(g)),o=a.find("thead tr:not(.k-filter-row)"),i=0,r=h.length;i<r;i++)w=m(h[i]),o.eq(i).append(this.thead.find("tr:eq("+i+") .k-group-cell").add(w));var E=D(this.thead);return h.length<E&&function(e,t){for(var i,n=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)"),r=0;r<n.length;r++)(i=n[r].rowSpan)>1&&(n[r].rowSpan=i-t||1)}(a,E-h.length),a.find(".k-filter-row").append(this.thead.find(".k-filter-row .k-group-cell").add(b)),this.lockedHeader=a.prependTo(t),this.thead.find(".k-group-cell").remove(),!0}return!1},_removeLockedContainers:function(){var e=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);ne.destroy(e),e.off(Te).remove(),this.lockedHeader=this.lockedContent=this.lockedFooter=null,this.selectable=null},_thead:function(){var t,i,n=this.columns,r=this._hasDetails()&&n.length,s=this._hasFilterRow(),o="",a=this.table.find(">thead"),l=this.element.find("thead:first").length>0;if(a.length||(a=e("<thead/>").insertBefore(this.tbody)),this.lockedHeader&&this.thead?((i=this.thead.find("tr:has(th):not(.k-filter-row)").html("")).remove(),i=e(),this._removeLockedContainers()):i=l?this.element.find("thead:first tr:has(th):not(.k-filter-row)"):this.element.find("tr:has(th):first"),!i.length&&!(i=a.children().first()).length){var d=[{rowSpan:1,cells:[],index:0}];for(this._prepareColumns(d,n),t=0;t<d.length;t++)o+="<tr>",r&&(o+='<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'),o+=this._createHeaderCells(d[t].cells,d[t].rowSpan),o+="</tr>";i=e(o)}if(s){var c=e("<tr/>");c.addClass("k-filter-row"),(r||i.find(".k-hierarchy-cell").length)&&c.prepend('<th class="k-hierarchy-cell" scope="col">&nbsp;</th>');var u=(this.thead||a).find(".k-filter-row");u.length&&(ne.destroy(u),u.remove()),a.append(c)}i.children().length?r&&!i.find(".k-hierarchy-cell")[0]&&i.prepend('<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'):(o="",r&&(o+='<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'),o+=this._createHeaderCells(n),i.html(o)),i.attr("role","row").find("th").addClass("k-header"),this.options.scrollable||a.addClass("k-grid-header"),i.find("script").remove().end().prependTo(a),this.thead&&this._destroyColumnAttachments(),this.angular("cleanup",function(){return{elements:a.find("th").get()}}),this.angular("compile",function(){return{elements:a.find("th").get(),data:he(n,function(e){return{column:e}})}}),this.thead=a.attr("role","rowgroup"),this._sortable(),this._filterable(),this._filterRow(),this._scrollable(),this._updateCols(),this._columnMenu();var h,f=this.options.scrollable&&E(this.columns).length;f&&(h=this._appendLockedColumnHeader(this.thead.closest(".k-grid-header")),this._appendLockedColumnContent(),this.lockedContent.bind("DOMMouseScroll"+Te+" mousewheel"+Te,ve(this._wheelScroll,this))),this._updateColumnCellIndex(),this._updateFirstColumnClass(),this._resizable(),this._draggable(),this._reorderable(),this._updateHeader(this._groups()),f&&(h&&this._syncLockedHeaderHeight(),this._applyLockedContainersWidth()),this.groupable&&this._attachGroupable()},_retrieveFirstColumn:function(t,i){var n=e();if(i.length&&t[0]){for(var r=t[0];r.columns&&r.columns.length;)r=r.columns[0],i=i.filter(":not(:first())");n=n.add(i)}return n},_updateFirstColumnClass:function(){var t=this.columns||[];if(!(this._hasDetails()&&t.length||this._groups())){var i=this.thead.find(">tr:not(.k-filter-row):not(:first)");t=R(t);var n=this._retrieveFirstColumn(t,i);this._isLocked()&&(i=this.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)"),t=E(this.columns),n=n.add(this._retrieveFirstColumn(t,i))),n.each(function(){var t=e(this).find("th");t.removeClass("k-first"),t.eq(0).addClass("k-first")})}},_prepareColumns:function(e,t,i,n){for(var r=n||e[e.length-1],s=e[r.index+1],o=0,a=0;a<t.length;a++){var l={column:t[a],colSpan:0};r.cells.push(l),t[a].columns&&t[a].columns.length&&(s||(s={rowSpan:0,cells:[],index:e.length},e.push(s)),l.colSpan=t[a].columns.length,this._prepareColumns(e,t[a].columns,l,s),o+=l.colSpan-1,r.rowSpan=e.length-r.index)}i&&(i.colSpan+=o)},_wheelScroll:function(t){if(!t.ctrlKey){var i=this.content;this.options.scrollable.virtual&&(i=this.virtualScrollable.verticalScrollbar);var n=i.scrollTop(),r=ne.wheelDeltaY(t);r&&(t.preventDefault(),e(t.currentTarget).one("wheel"+Te,!1),i.scrollTop(n+-r))}},_isLocked:function(){return null!=this.lockedHeader},_updateHeaderCols:function(){var e=this.thead.parent().add(this.table);this._isLocked()?V(e,M(A(this.columns)),this._hasDetails(),0):V(e,M(p(this.columns)),this._hasDetails(),0)},_updateCols:function(e){e=e||this.thead.parent().add(this.table),this._appendCols(e,this._isLocked())},_updateLockedCols:function(e){this._isLocked()&&V(e=e||this.lockedHeader.find("table").add(this.lockedTable),M(I(this.columns)),this._hasDetails(),this._groups())},_appendCols:function(e,t){t?V(e,M(A(this.columns)),this._hasDetails(),0):V(e,M(p(this.columns)),this._hasDetails(),this._groups())},_autoColumns:function(e){if(e&&e.toJSON){var t,i;e=e.toJSON(),i=!(this.table.find("tbody tr").length>0&&(!this.dataSource||!this.dataSource.transport));for(t in e)this.columns.push({field:t,encoded:i,headerAttributes:{id:ne.guid()}});this._thead(),this._templates()}},_rowsHtml:function(e,t){var i,n,r="",s=t.rowTemplate,o=t.altRowTemplate;for(i=0,n=e.length;i<n;i++)r+=i%2?o(e[i]):s(e[i]),this._data.push(e[i]);return r},_groupRowHtml:function(e,t,i,n,r,s){var o,a,l="",d=e.field,c=fe(H(this.columns),function(e){return e.field==d})[0]||{},u=c.groupHeaderTemplate,h=(c.title||d)+": "+function(e,t,i,n){var r=i&&i.length&&ce(i[0])&&"value"in i[0]?W(i)[e]:e;return r=null!=r?r:"",t?ne.format(t,r):!1===n?r:ne.htmlEncode(r)}(e.value,c.format,c.values,c.encoded),f=this._groupAggregatesDefaultObject||{},p=ue({},f,e.aggregates),m=ue({},{field:e.field,value:e.value,aggregates:p},e.aggregates[e.field]),g=r.groupFooterTemplate,v=e.items;if(u&&(h=typeof u===Ie?u(m):ne.template(u)(m)),l+=n(t,i,h),e.hasSubgroups)for(o=0,a=v.length;o<a;o++)l+=this._groupRowHtml(v[o],s?t:t-1,i+1,n,r,s);else l+=this._rowsHtml(v,r);return g&&(l+=g(p)),l},collapseGroup:function(t){t=e(t);var i,n,r,s,o,a=this.options.groupable.showFooter?0:1,l=e();this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?l=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(l=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),i=t.find(".k-group-cell").length,t.find(".k-i-collapse").addClass("k-i-expand").removeClass("k-i-collapse"),t.find("td[aria-expanded='true']:first").attr("aria-expanded",!1);var d=[];for(r=0,s=(t=t.nextAll("tr")).length;r<s&&(o=t.eq(r),n=o.find(".k-group-cell").length,o.hasClass("k-grouping-row")?a++:o.hasClass("k-group-footer")&&a--,!(n<=i||o.hasClass("k-group-footer")&&a<0));r++)l.length&&d.push(l[r]),d.push(o[0]);e(d).hide()},expandGroup:function(t){t=e(t);var i,n,r,s,o,a=this.options.groupable.showFooter,l=e(),d=[],c=1;for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?l=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(l=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),i=t.find(".k-group-cell").length,t.find(".k-i-expand").addClass("k-i-collapse").removeClass("k-i-expand"),t.find("td[aria-expanded='false']:first").attr("aria-expanded",!0),s=0,o=(t=t.nextAll("tr")).length;s<o&&(n=t.eq(s),!((r=n.find(".k-group-cell").length)<=i));s++)r!=i+1||n.hasClass("k-detail-row")||(n.show(),l.eq(s).show(),n.hasClass("k-grouping-row")&&n.find(".k-icon").hasClass("k-i-collapse")&&this.expandGroup(n),n.hasClass("k-master-row")&&n.find(".k-icon").hasClass("k-minus")&&(n.next().show(),l.eq(s+1).show())),n.hasClass("k-grouping-row")&&(a&&d.push(n.is(":visible")),c++),n.hasClass("k-group-footer")&&(a&&n.toggle(d.pop()),1==c?(n.show(),l.eq(s).show()):c--)},_updateHeader:function(t){var i=this._isLocked()?this.lockedHeader.find("thead"):this.thead,n=i.find("tr.k-filter-row").find("th.k-group-cell").length,r=i.find("tr:first").find("th.k-group-cell").length,s=i.children("tr:not(:first)").filter(function(){return!e(this).children(":visible").length});t>r?(e(new Array(t-r+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>')).prependTo(i.children("tr:not(.k-filter-row)")),this.element.is(":visible")&&s.find("th.k-group-cell").hide()):t<r&&i.find("tr").each(function(){e(this).find("th.k-group-cell").filter(":eq("+t+"),:gt("+t+")").remove()}),t>n&&e(new Array(t-n+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>')).prependTo(i.find(".k-filter-row"))},_firstDataItem:function(e,t){return e&&t&&(e=e.hasSubgroups?this._firstDataItem(e.items[0],t):e.items[0]),e},_updateTablesWidth:function(){var t;this._isLocked()&&(t=e(">.k-grid-footer>.k-grid-footer-wrap>table",this.wrapper).add(this.thead.parent()).add(this.table),this._footerWidth=K(t.eq(0)),t.width(this._footerWidth),(t=e(">.k-grid-footer>.k-grid-footer-locked>table",this.wrapper).add(this.lockedHeader.find(">table")).add(this.lockedTable)).width(K(t.eq(0))))},hideColumn:function(t){var i,n,r,s,a,l,d,c,m,g=0,v=this.footer||this.wrapper.find(".k-grid-footer"),_=this.columns,b=this.lockedHeader?z(this.lockedHeader.find(">table>thead")).filter(h).length:0;if((t="number"==typeof t?_[t]:ce(t)?fe(C(_),function(e){return e===t})[0]:fe(C(_),function(e){return e.field===t})[0])&&f(t))if(t.columns&&t.columns.length){for(l=y(t,_),u(t,!1),U(o(e(">table>thead",this.lockedHeader),this.thead,">tr:eq("+l.row+")>th"),l.cell,!1),r=0;r<t.columns.length;r++)this.hideColumn(t.columns[r]);this.trigger("columnHide",{column:t})}else{m=me(t,p(H(_))),u(t,!1),this._setParentsVisibility(t,!1),this._templates(),this._updateCols(),this._updateLockedCols();var k=this.thead;if(d=m,this.lockedHeader&&b>m?k=this.lockedHeader.find(">table>thead"):d-=b,i=z(k).filter(h).eq(d),i[0].style.display="none",U(o(e(">table>thead",this.lockedHeader),this.thead,">tr.k-filter-row>th"),m,!1),v[0]&&(this._updateCols(v.find(">.k-grid-footer-wrap>table")),this._updateLockedCols(v.find(">.k-grid-footer-locked>table")),U(v.find(".k-footer-template>td"),m,!1)),this.lockedTable&&b>m?q(this.lockedTable.find(">tbody>tr"),m):q(this.tbody.children(),m-b),this.lockedTable)this._updateTablesWidth(),this._applyLockedContainersWidth(),this._syncLockedContentHeight(),this._syncLockedHeaderHeight(),this._syncLockedFooterHeight();else{for(r=0,c=(s=this.thead.prev().find("col")).length;r<c;r+=1){if(!(a=s[r].style.width)||-1!=a.indexOf("%")){g=0;break}g+=parseInt(a,10)}n=e(">.k-grid-header table:first,>.k-grid-footer table:first",this.wrapper).add(this.table),this._footerWidth=null,g&&(n.each(function(){this.style.width=g+"px"}),this._footerWidth=g),Oe.msie&&8==Oe.version&&(n.css("display","inline-table"),setTimeout(function(){n.css("display","table")},1))}this._updateFirstColumnClass(),this.trigger("columnHide",{column:t})}},_setParentsVisibility:function(t,i){var n,r,s,a,l,d=this.columns,h=[],f=i?function(e){return p(e.columns).length&&e.hidden}:function(e){return!p(e.columns).length&&!e.hidden};if(c(t,d,h)&&h.length)for(n=h.length-1;n>=0;n--)s=k(r=h[n],d),a=o(e(">table>thead",this.lockedHeader),this.thead,">tr:eq("+s.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(s.cell),f(r)&&(u(r,i),a[0].style.display=i?"":"none"),a.filter("["+ne.attr("colspan")+"]").length&&(l=parseInt(a.attr(ne.attr("colspan")),10),a[0].colSpan=l-S(r.columns)||1)},showColumn:function(t){var i,n,r,s,a,l,d,c,h,p,m=this.columns,g=this.footer||this.wrapper.find(".k-grid-footer"),v=this.lockedHeader?z(this.lockedHeader.find(">table>thead")).length:0;if((t="number"==typeof t?m[t]:ce(t)?fe(C(m),function(e){return e===t})[0]:fe(C(m),function(e){return e.field===t})[0])&&!f(t))if(t.columns&&t.columns.length){for(d=k(t,m),u(t,!0),U(o(e(">table>thead",this.lockedHeader),this.thead,">tr:eq("+d.row+")>th"),d.cell,!0),i=0;i<t.columns.length;i++)this.showColumn(t.columns[i]);this.trigger("columnShow",{column:t})}else{p=me(t,H(m)),u(t,!0),this._setParentsVisibility(t,!0),this._templates(),this._updateCols(),this._updateLockedCols();var _=this.thead;if(l=p,this.lockedHeader&&v>p?_=this.lockedHeader.find(">table>thead"):l-=v,r=z(_).eq(l),r[0].style.display="",U(o(e(">table>thead",this.lockedHeader),this.thead,">tr.k-filter-row>th"),p,!0),g[0]&&(this._updateCols(g.find(">.k-grid-footer-wrap>table")),this._updateLockedCols(g.find(">.k-grid-footer-locked>table")),U(g.find(".k-footer-template>td"),p,!0)),this.lockedTable&&v>p?G(this.lockedTable.find(">tbody>tr"),p):G(this.tbody.children(),p-v),this.lockedTable)this._updateTablesWidth(),this._applyLockedContainersWidth(),this._syncLockedContentHeight(),this._syncLockedHeaderHeight();else if(s=e(">.k-grid-header table:first,>.k-grid-footer table:first",this.wrapper).add(this.table),t.width){for(a=0,i=0,n=(h=this.thead.prev().find("col")).length;i<n;i+=1){if((c=h[i].style.width).indexOf("%")>-1){a=0;break}a+=parseInt(c,10)}this._footerWidth=null,a&&(s.each(function(){this.style.width=a+"px"}),this._footerWidth=a)}else s.width("");this._updateFirstColumnClass(),this.trigger("columnShow",{column:t})}},_progress:function(e){var t=this.element;this.lockedContent?t=this.wrapper:this.element.is("table")?t=this.element.parent():this.content&&this.content.length&&(t=this.content),ne.ui.progress(t,e)},_resize:function(e,t){this._syncLockedHeaderHeight(),this.content&&(this._setContentWidth(),this._setContentHeight()),this.virtualScrollable&&(t||this._rowHeight)&&(t&&(this._rowHeight=null),this.virtualScrollable.repaintScrollbar())},_isActiveInTable:function(){var t=ae();return!!t&&(this.table[0]===t||e.contains(this.table[0],t)||this._isLocked()&&(this.lockedTable[0]===t||e.contains(this.lockedTable[0],t)))},refresh:function(t){var i,n=this,r=n.dataSource.view(),s=n.options.navigatable,o=e(n.current()),a=!1,l=(n.dataSource.group()||[]).length,d=n.content&&n.content.scrollLeft(),c=l+M(p(n.columns)).length;t&&"itemchange"===t.action&&n.editable||(t=t||{},n.trigger("dataBinding",{action:t.action||"rebind",index:t.index,items:t.items})||(n._angularItems("cleanup"),s&&(n._isActiveInTable()||n._editContainer&&n._editContainer.data("kendoWindow"))&&(a=o.is("th"),i=Math.max(n.cellIndex(o),0)),n._destroyEditable(),n._progress(!1),n._hideResizeHandle(),n._data=[],n.columns.length||(n._autoColumns(n._firstDataItem(r[0],l)),c=l+n.columns.length),n._group=l>0||n._group,n._group&&(n._templates(),n._updateCols(),n._updateLockedCols(),n._updateHeader(l),n._group=l>0),n._renderContent(r,c,l),n._renderLockedContent(r,c,l),n._footer(),n._renderNoRecordsContent(),n._setContentHeight(),n._setContentWidth(d),n.lockedTable&&(n.options.scrollable.virtual?n.content.find(">.k-virtual-scrollable-wrap").trigger("scroll"):n.touchScroller?n.touchScroller.movable.trigger("change"):(n.wrapper.one("scroll",function(e){e.stopPropagation()}),n.content.trigger("scroll"))),n._restoreCurrent(i,a),n.touchScroller&&n.touchScroller.contentResized(),n.selectable&&n.selectable.resetTouchEvents(),n._muteAngularRebind(function(){n._angularItems("compile")}),n.trigger("dataBound")))},_restoreCurrent:function(i,n){if(!(i===t||i<0)){if(this._removeCurrent(),n)this._setCurrent(this.thead.find("th:not(.k-group-cell)").eq(i));else{var r=0;this._rowVirtualIndex?r=this.virtualScrollable.position(this._rowVirtualIndex):i=0;var s=e();this.lockedTable&&(s=this.lockedTable.find(">tbody>tr").eq(r));var o=(s=s.add(this.tbody.children().eq(r))).find(">td:not(.k-group-cell):not(.k-hierarchy-cell)").eq(i);this._setCurrent(o)}this._current&&X(this._current.closest("table")[0],!0)}},_angularItems:function(e){ne.ui.DataBoundWidget.fn._angularItems.call(this,e),"cleanup"===e&&this._cleanupDetailItems(),this._angularGroupItems(e),this._angularGroupFooterItems(e)},_cleanupDetailItems:function(){var e=this;e._hasDetails()&&(e.angular("cleanup",function(){return{elements:e.tbody.children(".k-detail-row")}}),e.tbody.find(".k-detail-cell").empty())},_angularGroupItems:function(t){var i=this,n=i.tbody;i.lockedContent&&(n=i.lockedTable.find("tbody")),i._group&&i.angular(t,function(){return{elements:n.children(".k-grouping-row"),data:e.map($(i.dataSource.view()),function(e){return{dataItem:e}})}})},_angularGroupFooterItems:function(t){var i=this,n=i.tbody;i.lockedContent&&(n=i.element),i._group&&i.groupFooterTemplate&&i.angular(t,function(){return{elements:n.find(".k-group-footer"),data:e.map(j(i.dataSource.view()),function(e){return{dataItem:e}})}})},_renderContent:function(e,t,i){var n,r,s="",o=null!=this.lockedContent,a={rowTemplate:this.rowTemplate,altRowTemplate:this.altRowTemplate,groupFooterTemplate:this.groupFooterTemplate};if(t=o?t-M(I(this.columns)).length:t,i>0)for(t=o?t-i:t,this.detailTemplate&&t++,this.groupFooterTemplate&&(this._groupAggregatesDefaultObject=this.dataSource.aggregates()),n=0,r=e.length;n<r;n++)s+=this._groupRowHtml(e[n],t,0,o?ie:te,a,o);else s+=this._rowsHtml(e,a);this.tbody=L(this.tbody,this.table,s,this.options.$angular)},_renderLockedContent:function(e,t,i){var n,r,s="",o={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate};if(this.lockedContent){var a=this.lockedTable;if(i>0)for(t-=p(H(R(this.columns))).length,n=0,r=e.length;n<r;n++)s+=this._groupRowHtml(e[n],t,0,te,o);else s=this._rowsHtml(e,o);L(a.children("tbody"),a,s,this.options.$angular),this._syncLockedContentHeight()}},_adjustRowsHeight:function(e,t){var i,n=e[0].rows,r=n.length,s=t[0].rows,o=e.add(t),a=o.length,l=[];for(i=0;i<r&&s[i];i++){n[i].style.height&&(n[i].style.height=s[i].style.height="");var d=n[i].offsetHeight,c=s[i].offsetHeight,u=0;d>c?u=d:d<c&&(u=c),l.push(u)}for(i=0;i<a;i++)o[i].style.display="none";for(i=0;i<r;i++)l[i]&&(n[i].style.height=s[i].style.height=l[i]+1+"px");for(i=0;i<a;i++)o[i].style.display=""}});ne.ExcelMixin&&ne.ExcelMixin.extend($e.prototype),ne.PDFMixin&&(ne.PDFMixin.extend($e.prototype),$e.prototype._drawPDF_autoPageBreak=function(i){function n(){c.appendTo(document.body);var t=e.extend({},s.options.pdf,{_destructive:!0,progress:function(e){i.notify({pageNumber:e.pageNum,progress:.5+e.pageNum/e.totalPages/2})}});ne.drawing.drawDOM(u,t).then(function(e){c.remove(),o.resolve(e)}).fail(function(e){o.reject(e)})}function r(){var e=a.page(),o=l?a.totalPages():1;h.append(d.find("tr"));var c={pageNumber:e,progress:e/o/2,totalPages:o};i.notify(c),e<o?a.page(e+1):l&&f!==t?(a.unbind("change",r),a.one("change",n),a.page(f)):(s.refresh(),n())}var s=this,o=new e.Deferred,a=s.dataSource,l=s.options.pdf.allPages,d=s.wrapper.find(".k-grid-content tbody"),c=e("<div>").css({position:"absolute",left:-1e4,top:-1e4}),u=s.wrapper.clone().css({height:"auto",width:"auto"}).appendTo(c);u.find(".k-grid-content").css({height:"auto",width:"auto",overflow:"visible"}),u.find(".k-grid-pager, .k-grid-toolbar, .k-grouping-header").remove(),u.find(".k-grid-header").css({paddingRight:0}),this._initPDFProgress(i);var h=u.find(".k-grid-content tbody").empty(),f=a.page();return l?(a.bind("change",r),a.page(1)):r(),o.promise()},$e.prototype._drawPDF=function(i){function n(){r._drawPDFShadow({width:r.wrapper.width()},{avoidLinks:r.options.pdf.avoidLinks}).done(function(e){var r=o.page(),c=a?o.totalPages():1,u={page:e,pageNumber:r,progress:r/c,totalPages:c};i.notify(u),l.append(u.page),r<c?o.page(r+1):a&&d!==t?(o.unbind("change",n),o.one("change",function(){s.resolve(l)}),o.page(d)):s.resolve(l)}).fail(function(e){s.reject(e)})}var r=this;if(r.options.pdf.paperSize&&"auto"!=r.options.pdf.paperSize)return r._drawPDF_autoPageBreak(i);var s=new e.Deferred,o=r.dataSource,a=r.options.pdf.allPages;this._initPDFProgress(i);var l=new ne.drawing.Group,d=o.page();return a?(o.bind("change",n),o.page(1)):n(),s.promise()},$e.prototype._initPDFProgress=function(t){var i=e("<div class='k-loading-pdf-mask'><div class='k-loading-color'/></div>");i.prepend(this.wrapper.clone().css({position:"absolute",top:0,left:0})),this.wrapper.append(i);var n=e("<div class='k-loading-pdf-progress'>").appendTo(i).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar");t.progress(function(e){n.value(e.progress)}).always(function(){ne.destroy(i),i.remove()})}),re.plugin($e),re.plugin(Ue)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.listview",["kendo.data","kendo.editable","kendo.selectable"],function(){return function(e,t){var i=window.kendo,n=i.ui.Widget,r=i.keys,s=">*:not(.k-loading-mask)",o="k-state-focused",a=".kendoListView",l=e.proxy,d=i._activeElement,c=i.ui.progress,u=i.data.DataSource,h=i.ui.DataBoundWidget.extend({init:function(t,r){r=e.isArray(r)?{dataSource:r}:r,n.fn.init.call(this,t,r),r=this.options,this.wrapper=t=this.element,t[0].id&&(this._itemId=t[0].id+"_lv_active"),this._element(),this._dataSource(),this._templates(),this._navigatable(),this._selectable(),this._pageable(),this._crudHandlers(),this.options.autoBind&&this.dataSource.fetch(),i.notify(this)},events:["change","cancel","dataBinding","dataBound","edit","remove","save"],options:{name:"ListView",autoBind:!0,selectable:!1,navigatable:!1,template:"",altTemplate:"",editTemplate:""},setOptions:function(e){n.fn.setOptions.call(this,e),this._templates(),this.selectable&&(this.selectable.destroy(),this.selectable=null),this._selectable()},_templates:function(){var e=this.options;this.template=i.template(e.template||""),this.altTemplate=i.template(e.altTemplate||e.template),this.editTemplate=i.template(e.editTemplate||"")},_item:function(e){return this.element.children()[e]()},items:function(){return this.element.children()},dataItem:function(t){var n=i.attr("uid"),r=e(t).closest("["+n+"]").attr(n);return this.dataSource.getByUid(r)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&e.fetch()},_unbindDataSource:function(){this.dataSource.unbind("change",this._refreshHandler).unbind("progress",this._progressHandler).unbind("error",this._errorHandler)},_dataSource:function(){this.dataSource&&this._refreshHandler?this._unbindDataSource():(this._refreshHandler=l(this.refresh,this),this._progressHandler=l(this._progress,this),this._errorHandler=l(this._error,this)),this.dataSource=u.create(this.options.dataSource).bind("change",this._refreshHandler).bind("progress",this._progressHandler).bind("error",this._errorHandler)},_progress:function(){c(this.element,!0)},_error:function(){c(this.element,!1)},_element:function(){this.element.addClass("k-widget k-listview").attr("role","listbox")},refresh:function(e){var t,n,r,s,o,a=this.dataSource.view(),l="",c=this.template,u=this.altTemplate,h=d();if("itemchange"!==(e=e||{}).action){if(!this.trigger("dataBinding",{action:e.action||"rebind",items:e.items,index:e.index})){for(this._angularItems("cleanup"),this._destroyEditable(),s=0,o=a.length;s<o;s++)l+=s%2?u(a[s]):c(a[s]);for(this.element.html(l),n=this.items(),s=0,o=a.length;s<o;s++)n.eq(s).attr(i.attr("uid"),a[s].uid).attr("role","option").attr("aria-selected","false");this.element[0]===h&&this.options.navigatable&&this.current(n.eq(0)),this._angularItems("compile"),this.trigger("dataBound")}}else this._hasBindingTarget()||this.editable||(t=e.items[0],(r=this.items().filter("["+i.attr("uid")+"="+t.uid+"]")).length>0&&(s=r.index(),this.angular("cleanup",function(){return{elements:[r]}}),r.replaceWith(c(t)),(r=this.items().eq(s)).attr(i.attr("uid"),t.uid),this.angular("compile",function(){return{elements:[r],data:[{dataItem:t}]}}),this.trigger("itemChange",{item:r,data:t})))},_pageable:function(){var t,n,r=this.options.pageable;e.isPlainObject(r)&&(n=r.pagerId,t=e.extend({},r,{dataSource:this.dataSource,pagerId:null}),this.pager=new i.ui.Pager(e("#"+n),t))},_selectable:function(){var e,t,n=this,o=n.options.selectable,l=n.options.navigatable;o&&(e=i.ui.Selectable.parseOptions(o).multiple,n.selectable=new i.ui.Selectable(n.element,{aria:!0,multiple:e,filter:s,change:function(){n.trigger("change")}}),l&&n.element.on("keydown"+a,function(i){if(i.keyCode===r.SPACEBAR){if(t=n.current(),i.target==i.currentTarget&&i.preventDefault(),e)if(i.ctrlKey){if(t&&t.hasClass("k-state-selected"))return void t.removeClass("k-state-selected")}else n.selectable.clear();else n.selectable.clear();n.selectable.value(t)}}))},current:function(e){var t=this.element,i=this._current,n=this._itemId;if(void 0===e)return i;i&&i[0]&&(i[0].id===n&&i.removeAttr("id"),i.removeClass(o),t.removeAttr("aria-activedescendant")),e&&e[0]&&(n=e[0].id||n,this._scrollTo(e[0]),t.attr("aria-activedescendant",n),e.addClass(o).attr("id",n)),this._current=e},_scrollTo:function(t){var i,n=!1;"auto"==this.wrapper.css("overflow")||"scroll"==this.wrapper.css("overflow")?i=this.wrapper[0]:(i=window,n=!0);var r=function(r,s){var o=n?e(t).offset()[r.toLowerCase()]:t["offset"+r],a=t["client"+s],l=e(i)["scroll"+r](),d=e(i)[s.toLowerCase()]();o+a>l+d?e(i)["scroll"+r](o+a-d):o<l&&e(i)["scroll"+r](o)};r("Top","Height"),r("Left","Width")},_navigatable:function(){var t=this,n=t.options.navigatable,c=t.element;n&&(t._tabindex(),c.on("focus"+a,function(){var e=t._current;e&&e.is(":visible")||(e=t._item("first")),t.current(e)}).on("focusout"+a,function(){t._current&&t._current.removeClass(o)}).on("keydown"+a,function(n){var s,o=n.keyCode,a=t.current(),l=e(n.target),u=!l.is(":button,textarea,a,a>.t-icon,input"),h=l.is(":text,:password"),f=i.preventDefault,p=c.find(".k-edit-item"),m=d();if(!(!u&&!h&&r.ESC!=o||h&&r.ESC!=o&&r.ENTER!=o))if(r.UP===o||r.LEFT===o)a&&(a=a.prev()),t.current(a&&a[0]?a:t._item("last")),f(n);else if(r.DOWN===o||r.RIGHT===o)a&&(a=a.next()),t.current(a&&a[0]?a:t._item("first")),f(n);else if(r.PAGEUP===o)t.current(null),t.dataSource.page(t.dataSource.page()-1),f(n);else if(r.PAGEDOWN===o)t.current(null),t.dataSource.page(t.dataSource.page()+1),f(n);else if(r.HOME===o)t.current(t._item("first")),f(n);else if(r.END===o)t.current(t._item("last")),f(n);else if(r.ENTER===o)0!==p.length&&(u||h)?(s=t.items().index(p),m&&m.blur(),t.save(),t.one("dataBound",function(){t.element.trigger("focus"),t.current(t.items().eq(s))})):""!==t.options.editTemplate&&t.edit(a);else if(r.ESC===o){if(0===(p=c.find(".k-edit-item")).length)return;s=t.items().index(p),t.cancel(),t.element.trigger("focus"),t.current(t.items().eq(s))}}),c.on("mousedown"+a+" touchstart"+a,s,l(function(i){t.current(e(i.currentTarget)),e(i.target).is(":button,a,:input,a>.k-icon,textarea")||c.focus()},t)))},clearSelection:function(){this.selectable.clear(),this.trigger("change")},select:function(t){var i=this.selectable;return(t=e(t)).length?(i.options.multiple||(i.clear(),t=t.first()),void i.value(t)):i.value()},_destroyEditable:function(){this.editable&&(this.editable.destroy(),delete this.editable)},_modelFromElement:function(e){var t=e.attr(i.attr("uid"));return this.dataSource.getByUid(t)},_closeEditable:function(){var e,t,n,r=this.editable,s=this.template;return r&&(r.element.index()%2&&(s=this.altTemplate),this.angular("cleanup",function(){return{elements:[r.element]}}),e=this._modelFromElement(r.element),this._destroyEditable(),n=r.element.index(),r.element.replaceWith(s(e)),(t=this.items().eq(n)).attr(i.attr("uid"),e.uid),this._hasBindingTarget()&&i.bind(t,e),this.angular("compile",function(){return{elements:[t],data:[{dataItem:e}]}})),!0},edit:function(e){var t,n,r=this._modelFromElement(e),s=r.uid;this.cancel(),n=(e=this.items().filter("["+i.attr("uid")+"="+s+"]")).index(),e.replaceWith(this.editTemplate(r)),t=this.items().eq(n).addClass("k-edit-item").attr(i.attr("uid"),r.uid),this.editable=t.kendoEditable({model:r,clearContainer:!1,errorTemplate:!1,target:this}).data("kendoEditable"),this.trigger("edit",{model:r,item:t})},save:function(){var e,t=this.editable;if(t){var i=t.element;e=this._modelFromElement(i),t.end()&&!this.trigger("save",{model:e,item:i})&&(this._closeEditable(),this.dataSource.sync())}},remove:function(e){var t=this.dataSource,i=this._modelFromElement(e);this.editable&&(t.cancelChanges(this._modelFromElement(this.editable.element)),this._closeEditable()),this.trigger("remove",{model:i,item:e})||(e.hide(),t.remove(i),t.sync())},add:function(){var e,t=this.dataSource,i=t.indexOf((t.view()||[])[0]);i<0&&(i=0),this.cancel(),e=t.insert(i,{}),this.edit(this.element.find("[data-uid='"+e.uid+"']"))},cancel:function(){var e=this.dataSource;if(this.editable){var t=this.editable.element,i=this._modelFromElement(t);this.trigger("cancel",{model:i,container:t})||(e.cancelChanges(i),this._closeEditable())}},_crudHandlers:function(){var t=this,n="click"+a;t.element.on(n,".k-edit-button",function(n){var r=e(this).closest("["+i.attr("uid")+"]");t.edit(r),n.preventDefault()}),t.element.on(n,".k-delete-button",function(n){var r=e(this).closest("["+i.attr("uid")+"]");t.remove(r),n.preventDefault()}),t.element.on(n,".k-update-button",function(e){t.save(),e.preventDefault()}),t.element.on(n,".k-cancel-button",function(e){t.cancel(),e.preventDefault()})},destroy:function(){n.fn.destroy.call(this),this._unbindDataSource(),this._destroyEditable(),this.element.off(a),this.pager&&this.pager.destroy(),i.destroy(this.element)}});i.ui.plugin(h)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.upload",["kendo.core"],function(){return function(e,t){function i(t){return e.map(n(t),function(e){return e.name}).join(", ")}function n(e){var t=e[0];return t.files?r(t.files):[{name:function(e){var t=e.lastIndexOf("\\");return-1!=t?e.substr(t+1):e}(t.value),extension:s(t.value),size:null}]}function r(t){return e.map(t,function(e){return function(e){var t=e.name||e.fileName;return{name:m.htmlEncode(t),extension:s(t),size:e.size||e.fileSize,rawFile:e}}(e)})}function s(e){var t=e.match(b);return t?t[0]:""}function o(t,i){var n=m.guid();return e.map(t,function(e){return e.uid=i?m.guid():n,e})}function a(t){return!t.multiple&&e(".k-file",t.wrapper).length>1}function l(t,i,n){if(i._supportsRemove()){var r=t.data("fileNames"),s=e.map(r,function(e){return e.name});i._submitRemove(s,n,function(e,n,s){i._removeFileEntry(t),i.trigger(w,{operation:"remove",files:r,response:e,XMLHttpRequest:s})},function(e){a(i)&&i._removeFileEntry(t),i.trigger(y,{operation:"remove",files:r,XMLHttpRequest:e}),_("Server response: "+e.responseText)})}else a(i)&&i._removeFileEntry(t)}function d(t,i,n){var r=!1,s="";try{s=e.parseJSON(c(t)),r=!0}catch(e){n()}r&&i(s)}function c(e){return void 0!==e&&""!==e||(e="{}"),e}function u(e){e.stopPropagation(),e.preventDefault()}function h(e,t,i,n){var r,s;e.on("dragenter"+t,function(){i(),s=new Date,r||(r=setInterval(function(){new Date-s>100&&(n(),clearInterval(r),r=null)},100))}).on("dragover"+t,function(){s=new Date})}function f(e){return e.is(".k-file-progress, .k-file-success, .k-file-error")}function p(t){return e(t.target).closest(".k-file")}var m=window.kendo,g=m.ui.Widget,v=m.antiForgeryTokens,_=m.logToConsole,b=/\.([^\.]+)$/,k=".kendoUpload",w="success",y="error",x=g.extend({init:function(t,i){g.fn.init.call(this,t,i),this.name=t.name,this.multiple=this.options.multiple,this.localization=this.options.localization;var n=this.element;this.wrapper=n.closest(".k-upload"),0===this.wrapper.length&&(this.wrapper=this._wrapInput(n)),this._activeInput(n),this.toggle(this.options.enabled);var r=this._ns=k+"-"+m.guid();if(n.closest("form").on("submit"+r,e.proxy(this._onParentFormSubmit,this)).on("reset"+r,e.proxy(this._onParentFormReset,this)),this.options.async.saveUrl){this._module=this._supportsFormData()?new T(this):new S(this),this._async=!0;var s=this.options.files;s.length>0&&this._renderInitialFiles(s)}else this._module=new C(this);this._supportsDrop()&&this._setupDropZone(),this.wrapper.on("click",".k-upload-action",e.proxy(this._onFileAction,this)).on("click",".k-upload-selected",e.proxy(this._onUploadSelected,this)),this.element.val()&&this._onInputChange({target:this.element})},events:["select","upload",w,y,"complete","cancel","progress","remove"],options:{name:"Upload",enabled:!0,multiple:!0,showFileList:!0,template:"",files:[],async:{removeVerb:"POST",autoUpload:!0,withCredentials:!0,accept:"*/*; q=0.5; application/json"},localization:{select:"Select files...",cancel:"Cancel",retry:"Retry",remove:"Remove",uploadSelectedFiles:"Upload files",dropFilesHere:"drop files here to upload",statusUploading:"uploading",statusUploaded:"uploaded",statusWarning:"warning",statusFailed:"failed",headerStatusUploading:"Uploading...",headerStatusUploaded:"Done"}},setOptions:function(e){var t=this.element;g.fn.setOptions.call(this,e),this.multiple=this.options.multiple,t.attr("multiple",!!this._supportsMultiple()&&this.multiple),this.toggle(this.options.enabled)},enable:function(e){e=void 0===e||e,this.toggle(e)},disable:function(){this.toggle(!1)},toggle:function(e){e=void 0===e?e:!e,this.wrapper.toggleClass("k-state-disabled",e),this.element.prop("disabled",e)},destroy:function(){e(document).add(e(".k-dropzone",this.wrapper)).add(this.wrapper.closest("form")).off(this._ns),e(this.element).off(k),g.fn.destroy.call(this)},_addInput:function(t){if(t[0].nodeType){var i=t.clone().val("");i.insertAfter(this.element).data("kendoUpload",this),e(this.element).hide().attr("tabindex","-1").removeAttr("id").off(k),this._activeInput(i),this.element.focus()}},_activeInput:function(t){var i=this.wrapper;this.element=t,t.attr("multiple",!!this._supportsMultiple()&&this.multiple).attr("autocomplete","off").on("click"+k,function(e){i.hasClass("k-state-disabled")&&e.preventDefault()}).on("focus"+k,function(){e(this).parent().addClass("k-state-focused")}).on("blur"+k,function(){e(this).parent().removeClass("k-state-focused")}).on("change"+k,e.proxy(this._onInputChange,this)).on("keydown"+k,e.proxy(this._onInputKeyDown,this))},_onInputKeyDown:function(e){var t=this.wrapper.find(".k-upload-action:first");e.keyCode===m.keys.TAB&&t.length>0&&(e.preventDefault(),t.focus())},_onInputChange:function(t){var i=e(t.target),n=o(this._inputFiles(i),this._isAsyncNonBatch());this.trigger("select",{files:n})?(this._addInput(i),i.remove()):this._module.onSelect({target:i},n)},_onDrop:function(t){var i=t.originalEvent.dataTransfer.files,n=o(r(i),this._isAsyncNonBatch());u(t),i.length>0&&!this.wrapper.hasClass("k-state-disabled")&&(!this.multiple&&n.length>1&&n.splice(1,n.length-1),this.trigger("select",{files:n})||this._module.onSelect({target:e(".k-dropzone",this.wrapper)},n))},_isAsyncNonBatch:function(){return this._async&&!this.options.async.batch||!1},_renderInitialFiles:function(t){var i=0;for(t=o(t,!0),i=0;i<t.length;i++){var n=t[i],r=this._enqueueFile(n.name,{fileNames:[n]});r.addClass("k-file-success").data("files",[t[i]]),e(".k-progress",r).width("100%"),this.options.template||e(".k-upload-status",r).prepend("<span class='k-upload-pct'>100%</span>"),this._supportsRemove()&&this._fileAction(r,"remove")}},_prepareTemplateData:function(e,t){var i=t.fileNames,n={},r=0,s=0;for(s=0;s<i.length;s++)r+=i[s].size;return n.name=e,n.size=r,n.files=t.fileNames,n},_prepareDefaultFileEntryTemplate:function(t,i){var n="",r=e("<li class='k-file'><span class='k-progress'></span><span class='k-icon'></span><span class='k-filename' title='"+t+"'>"+t+"</span><strong class='k-upload-status'></strong></li>");return 1==i.fileNames.length&&i.fileNames[0].extension&&(n=i.fileNames[0].extension.substring(1),e(".k-icon",r).addClass("k-i-"+n)),r},_enqueueFile:function(t,i){var n,r,s,o,a=i.fileNames[0].uid,l=e(".k-upload-files",this.wrapper),d=this.options.template;return 0===l.length&&(l=e("<ul class='k-upload-files k-reset'></ul>").appendTo(this.wrapper),this.options.showFileList||l.hide(),this.wrapper.removeClass("k-upload-empty")),n=e(".k-file",l),d?(s=this._prepareTemplateData(t,i),d=m.template(d),(r=e("<li class='k-file'>"+d(s)+"</li>")).find(".k-upload-action").addClass("k-button k-button-bare"),this.angular("compile",function(){return{elements:r,data:[s]}})):r=this._prepareDefaultFileEntryTemplate(t,i),r.attr(m.attr("uid"),a).appendTo(l).data(i),this._async||e(".k-progress",r).width("100%"),!this.multiple&&n.length>0&&(o={files:n.data("fileNames")},this.trigger("remove",o)||this._module.onRemove({target:e(n,this.wrapper)},o.data)),r},_removeFileEntry:function(t){var i,n=t.closest(".k-upload-files");t.remove(),i=e(".k-file",n),e(".k-file-success, .k-file-error",n).length===i.length&&this._hideUploadButton(),0===i.length&&(n.remove(),this.wrapper.addClass("k-upload-empty"),this._hideHeaderUploadstatus())},_fileAction:function(e,t){var i={remove:"k-delete",cancel:"k-cancel",retry:"k-retry"},n={remove:"k-i-close",cancel:"k-i-close",retry:"k-i-refresh"};i.hasOwnProperty(t)&&(this._clearFileAction(e),this.options.template?e.find(".k-upload-action").addClass("k-button k-button-bare").append("<span class='k-icon "+n[t]+" "+i[t]+"' title='"+this.localization[t]+"'></span>").show():(e.find(".k-upload-status .k-upload-action").remove(),e.find(".k-upload-status").append(this._renderAction(i[t],this.localization[t],n[t]))))},_fileState:function(t,i){var n=this.localization,r={uploading:{text:n.statusUploading},uploaded:{text:n.statusUploaded},failed:{text:n.statusFailed}}[i];r&&e(".k-icon:not(.k-delete, .k-cancel, .k-retry)",t).text(r.text)},_renderAction:function(t,i,n){return e(""!==t?"<button type='button' class='k-button k-button-bare k-upload-action'><span class='k-icon "+n+" "+t+"' title='"+i+"'></span></button>":"<button type='button' class='k-button'>"+i+"</button>")},_clearFileAction:function(t){e(".k-upload-action",t).empty().hide()},_onFileAction:function(t){if(!this.wrapper.hasClass("k-state-disabled")){var i=e(t.target).closest(".k-upload-action"),n=i.find(".k-icon"),r=i.closest(".k-file"),s={files:r.data("fileNames")};n.hasClass("k-delete")?this.trigger("remove",s)||this._module.onRemove({target:e(r,this.wrapper)},s.data):n.hasClass("k-cancel")?(this.trigger("cancel",s),this._module.onCancel({target:e(r,this.wrapper)}),this._checkAllComplete(),this._updateHeaderUploadStatus()):n.hasClass("k-retry")&&(e(".k-warning",r).remove(),this._module.onRetry({target:e(r,this.wrapper)}))}return!1},_onUploadSelected:function(){return this.wrapper.hasClass("k-state-disabled")||this._module.onSaveSelected(),!1},_onFileProgress:function(t,i){i>100&&(i=100),this.options.template?e(".k-progress",t.target).width(i+"%"):(0===e(".k-upload-pct",t.target).length&&e(".k-upload-status",t.target).prepend("<span class='k-upload-pct'></span>"),e(".k-upload-pct",t.target).text(i+"%"),e(".k-progress",t.target).width(i+"%")),this.trigger("progress",{files:p(t).data("fileNames"),percentComplete:i})},_onUploadSuccess:function(e,t,i){var n=p(e);this._fileState(n,"uploaded"),n.removeClass("k-file-progress").addClass("k-file-success"),this._updateHeaderUploadStatus(),this.trigger(w,{files:n.data("fileNames"),response:t,operation:"upload",XMLHttpRequest:i}),this._supportsRemove()?this._fileAction(n,"remove"):this._clearFileAction(n),this._checkAllComplete()},_onUploadError:function(t,i){var n=p(t),r=e(".k-upload-pct",n);this._fileState(n,"failed"),n.removeClass("k-file-progress").addClass("k-file-error"),e(".k-progress",n).width("100%"),r.length>0?r.empty().removeClass("k-upload-pct").addClass("k-icon k-warning"):e(".k-upload-status",n).prepend("<span class='k-icon k-warning'></span>"),this._updateHeaderUploadStatus(),this._fileAction(n,"retry"),this.trigger(y,{operation:"upload",files:n.data("fileNames"),XMLHttpRequest:i}),_("Server response: "+i.responseText),this._checkAllComplete()},_showUploadButton:function(){var t=e(".k-upload-selected",this.wrapper);0===t.length&&(t=this._renderAction("",this.localization.uploadSelectedFiles).addClass("k-upload-selected")),this.wrapper.append(t)},_hideUploadButton:function(){e(".k-upload-selected",this.wrapper).remove()},_showHeaderUploadStatus:function(){var t=this.localization,i=e(".k-dropzone",this.wrapper),n=e(".k-upload-status-total",this.wrapper);0!==n.length&&n.remove(),n='<strong class="k-upload-status k-upload-status-total">'+t.headerStatusUploading+'<span class="k-icon k-loading">'+t.statusUploading+"</span></strong>",i.length>0?i.append(n):e(".k-upload-button",this.wrapper).after(n)},_updateHeaderUploadStatus:function(){var t,i,n,r=this.localization;0===e(".k-file",this.wrapper).not(".k-file-success, .k-file-error").length&&(t=e(".k-file.k-file-error",this.wrapper),i=e(".k-upload-status-total",this.wrapper),n=e(".k-icon",i).removeClass("k-loading").addClass(0!==t.length?"k-warning":"k-i-tick").text(0!==t.length?r.statusWarning:r.statusUploaded),i.text(this.localization.headerStatusUploaded).append(n))},_hideHeaderUploadstatus:function(){e(".k-upload-status-total",this.wrapper).remove()},_onParentFormSubmit:function(){var t=this.element;if(void 0!==this._module.onAbort&&this._module.onAbort(),!t.value){var i=e(t);i.attr("disabled","disabled"),window.setTimeout(function(){i.removeAttr("disabled")},0)}},_onParentFormReset:function(){e(".k-upload-files",this.wrapper).remove()},_supportsFormData:function(){return"undefined"!=typeof FormData},_supportsMultiple:function(){var e=this._userAgent().indexOf("Windows")>-1;return!(m.support.browser.opera||m.support.browser.safari&&e)},_supportsDrop:function(){var e=this._userAgent().toLowerCase();return!(!/chrome/.test(e)&&/safari/.test(e)&&/windows/.test(e))&&this._supportsFormData()&&this.options.async.saveUrl},_userAgent:function(){return navigator.userAgent},_setupDropZone:function(){e(".k-upload-button",this.wrapper).wrap("<div class='k-dropzone'></div>");var t=this._ns,i=e(".k-dropzone",this.wrapper).append(e("<em>"+this.localization.dropFilesHere+"</em>")).on("dragenter"+t,u).on("dragover"+t,function(e){e.preventDefault()}).on("drop"+t,e.proxy(this._onDrop,this));h(i,t,function(){i.closest(".k-upload").hasClass("k-state-disabled")||i.addClass("k-dropzone-hovered")},function(){i.removeClass("k-dropzone-hovered")}),h(e(document),t,function(){i.closest(".k-upload").hasClass("k-state-disabled")||(i.addClass("k-dropzone-active"),i.closest(".k-upload").removeClass("k-upload-empty"))},function(){i.removeClass("k-dropzone-active"),0===e("li.k-file",i.closest(".k-upload")).length&&i.closest(".k-upload").addClass("k-upload-empty")})},_supportsRemove:function(){return!!this.options.async.removeUrl},_submitRemove:function(t,i,n,r){var s=this.options.async.removeField||"fileNames",o=e.extend(i,v());o[s]=t,jQuery.ajax({type:this.options.async.removeVerb,dataType:"json",dataFilter:c,url:this.options.async.removeUrl,traditional:!0,data:o,success:n,error:r,xhrFields:{withCredentials:this.options.async.withCredentials}})},_wrapInput:function(e){var t=this.options;return e.wrap("<div class='k-widget k-upload k-header'><div class='k-button k-upload-button'></div></div>"),t.async.saveUrl||e.closest(".k-upload").addClass("k-upload-sync"),e.closest(".k-upload").addClass("k-upload-empty"),e.closest(".k-button").append("<span>"+this.localization.select+"</span>"),e.closest(".k-upload")},_checkAllComplete:function(){0===e(".k-file.k-file-progress",this.wrapper).length&&this.trigger("complete")},_inputFiles:function(e){return n(e)}}),C=function(e){this.name="syncUploadModule",this.element=e.wrapper,this.upload=e,this.element.closest("form").attr("enctype","multipart/form-data").attr("encoding","multipart/form-data")};C.prototype={onSelect:function(t,n){var r=this.upload,s=e(t.target);r._addInput(s);var o=r._enqueueFile(i(s),{relatedInput:s,fileNames:n});r._fileAction(o,"remove")},onRemove:function(e){var t=p(e);t.data("relatedInput").remove(),this.upload._removeFileEntry(t)}};var S=function(e){this.name="iframeUploadModule",this.element=e.wrapper,this.upload=e,this.iframes=[]};x._frameId=0,S.prototype={onSelect:function(t,i){var n=this.upload,r=e(t.target),s=this.prepareUpload(r,i);n.options.async.autoUpload?this.performUpload(s):(n._supportsRemove()&&this.upload._fileAction(s,"remove"),n._showUploadButton())},prepareUpload:function(t,n){var r=this.upload,s=e(r.element),o=r.options.async.saveField||t.attr("name");r._addInput(t),t.attr("name",o);var a=this.createFrame(r.name+"_"+x._frameId++);this.registerFrame(a);var l=this.createForm(r.options.async.saveUrl,a.attr("name")).append(s),d=r._enqueueFile(i(t),{frame:a,relatedInput:s,fileNames:n});return a.data({form:l,file:d}),d},performUpload:function(t){var i={files:t.data("fileNames")},n=t.data("frame"),r=this.upload;if(r.trigger("upload",i))r._removeFileEntry(n.data("file")),this.cleanupFrame(n),this.unregisterFrame(n);else{r._hideUploadButton(),r._showHeaderUploadStatus(),n.appendTo(document.body);var s=n.data("form").attr("action",r.options.async.saveUrl).appendTo(document.body);i.data=e.extend({},i.data,v());for(var o in i.data){var a=s.find("input[name='"+o+"']");0===a.length&&(a=e("<input>",{type:"hidden",name:o}).prependTo(s)),a.val(i.data[o])}r._fileAction(t,"cancel"),r._fileState(t,"uploading"),e(t).removeClass("k-file-error").addClass("k-file-progress"),n.one("load",e.proxy(this.onIframeLoad,this)),s[0].submit()}},onSaveSelected:function(){var t=this;e(".k-file",this.element).each(function(){var i=e(this);f(i)||t.performUpload(i)})},onIframeLoad:function(t){var i,n=e(t.target);try{i=n.contents().text()}catch(e){i="Error trying to get server response: "+e}this.processResponse(n,i)},processResponse:function(t,i){var n=t.data("file"),r=this,s={responseText:i};d(i,function(i){e.extend(s,{statusText:"OK",status:"200"}),r.upload._onFileProgress({target:e(n,r.upload.wrapper)},100),r.upload._onUploadSuccess({target:e(n,r.upload.wrapper)},i,s),r.cleanupFrame(t),r.unregisterFrame(t)},function(){e.extend(s,{statusText:"error",status:"500"}),r.upload._onUploadError({target:e(n,r.upload.wrapper)},s)})},onCancel:function(t){var i=e(t.target).data("frame");this.stopFrameSubmit(i),this.cleanupFrame(i),this.unregisterFrame(i),this.upload._removeFileEntry(i.data("file"))},onRetry:function(e){var t=p(e);this.performUpload(t)},onRemove:function(e,t){var i=p(e),n=i.data("frame");n?(this.unregisterFrame(n),this.upload._removeFileEntry(i),this.cleanupFrame(n)):l(i,this.upload,t)},onAbort:function(){var t=this.element,i=this;e.each(this.iframes,function(){e("input",this.data("form")).appendTo(t),i.stopFrameSubmit(this[0]),this.data("form").remove(),this.remove()}),this.iframes=[]},createFrame:function(t){return e("<iframe name='"+t+"' id='"+t+"' style='display:none;' />")},createForm:function(t,i){return e("<form enctype='multipart/form-data' method='POST' action='"+t+"' target='"+i+"'/>")},stopFrameSubmit:function(e){void 0!==e.stop?e.stop():e.document&&e.document.execCommand("Stop")},registerFrame:function(e){this.iframes.push(e)},unregisterFrame:function(t){this.iframes=e.grep(this.iframes,function(e){return e.attr("name")!=t.attr("name")})},cleanupFrame:function(e){var t=e.data("form");e.data("file").data("frame",null),setTimeout(function(){t.remove(),e.remove()},1)}};var T=function(e){this.name="formDataUploadModule",this.element=e.wrapper,this.upload=e};T.prototype={onSelect:function(t,i){var n=this.upload,r=this,s=e(t.target),o=this.prepareUpload(s,i);e.each(o,function(){n.options.async.autoUpload?r.performUpload(this):(n._supportsRemove()&&n._fileAction(this,"remove"),n._showUploadButton())})},prepareUpload:function(t,i){var n=this.enqueueFiles(i);return t.is("input")&&(e.each(n,function(){e(this).data("relatedInput",t)}),t.data("relatedFileEntries",n),this.upload._addInput(t)),n},enqueueFiles:function(t){var i,n,r,s,o=this.upload,a=t.length,l=[];if(!0===o.options.async.batch)i=e.map(t,function(e){return e.name}).join(", "),(s=o._enqueueFile(i,{fileNames:t})).data("files",t),l.push(s);else for(n=0;n<a;n++)i=(r=t[n]).name,(s=o._enqueueFile(i,{fileNames:[r]})).data("files",[r]),l.push(s);return l},performUpload:function(t){var i=this.upload,n=this.createFormData(),r=this.createXHR(),s={files:t.data("fileNames"),XMLHttpRequest:r};if(i.trigger("upload",s))this.removeFileEntry(t);else{if(i._fileAction(t,"cancel"),i._hideUploadButton(),i._showHeaderUploadStatus(),s.formData)n=s.formData;else{s.data=e.extend({},s.data,v());for(var o in s.data)n.append(o,s.data[o]);this.populateFormData(n,t.data("files"))}i._fileState(t,"uploading"),e(t).removeClass("k-file-error").addClass("k-file-progress"),this.postFormData(i.options.async.saveUrl,n,t,r)}},onSaveSelected:function(){var t=this;e(".k-file",this.element).each(function(){var i=e(this);f(i)||t.performUpload(i)})},onCancel:function(e){var t=p(e);this.stopUploadRequest(t),this.removeFileEntry(t)},onRetry:function(e){var t=p(e);this.performUpload(t)},onRemove:function(e,t){var i=p(e);i.hasClass("k-file-success")?l(i,this.upload,t):this.removeFileEntry(i)},createXHR:function(){return new XMLHttpRequest},postFormData:function(e,t,i,n){var r=this;i.data("request",n),n.addEventListener("load",function(e){r.onRequestSuccess.call(r,e,i)},!1),n.addEventListener(y,function(e){r.onRequestError.call(r,e,i)},!1),n.upload.addEventListener("progress",function(e){r.onRequestProgress.call(r,e,i)},!1),n.open("POST",e,!0),n.withCredentials=this.upload.options.async.withCredentials;var s=this.upload.options.async.accept;s&&n.setRequestHeader("Accept",s),n.send(t)},createFormData:function(){return new FormData},populateFormData:function(e,t){var i,n=this.upload,r=t.length;for(i=0;i<r;i++)e.append(n.options.async.saveField||n.name,t[i].rawFile);return e},onRequestSuccess:function(t,i){function n(){s.upload._onUploadError({target:e(i,s.upload.wrapper)},r)}var r=t.target,s=this;r.status>=200&&r.status<=299?d(r.responseText,function(t){s.upload._onFileProgress({target:e(i,s.upload.wrapper)},100),s.upload._onUploadSuccess({target:e(i,s.upload.wrapper)},t,r),s.cleanupFileEntry(i)},n):n()},onRequestError:function(t,i){var n=t.target;this.upload._onUploadError({target:e(i,this.upload.wrapper)},n)},cleanupFileEntry:function(t){var i=t.data("relatedInput"),n=!0;i&&(e.each(i.data("relatedFileEntries")||[],function(){this.parent().length>0&&this[0]!=t[0]&&(n=n&&this.hasClass("k-file-success"))}),n&&i.remove())},removeFileEntry:function(e){this.cleanupFileEntry(e),this.upload._removeFileEntry(e)},onRequestProgress:function(t,i){var n=Math.round(100*t.loaded/t.total);this.upload._onFileProgress({target:e(i,this.upload.wrapper)},n)},stopUploadRequest:function(e){e.data("request").abort()}},m.ui.plugin(x)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.filebrowser",["kendo.listview","kendo.dropdownlist","kendo.upload"],function(){return function(e,t){function i(e,i){return e!==t&&e.match(/\/$/)||(e=(e||"")+"/"),e+i}function n(e){if(!e)return"";var t=" bytes";return e>=1073741824?(t=" GB",e/=1073741824):e>=1048576?(t=" MB",e/=1048576):e>=1024&&(t=" KB",e/=1024),Math.round(100*e)/100+t}var r=window.kendo,s=r.ui.Widget,o=e.isPlainObject,a=e.proxy,l=e.extend,d=r.support.placeholder,c=r.support.browser,u=r.isFunction,h=/(^\/|\/$)/g,f=".kendoFileBrowser",p=".kendoBreadcrumbs",m=".kendoSearchBox",g={field:"type",dir:"asc"},v=r.template('<li class="k-tile-empty"><strong>${text}</strong></li>');l(!0,r.data,{schemas:{filebrowser:{data:function(e){return e.items||e||[]},model:{id:"name",fields:{name:"name",size:"size",type:"type"}}}}}),l(!0,r.data,{transports:{filebrowser:r.data.RemoteTransport.extend({init:function(t){r.data.RemoteTransport.fn.init.call(this,e.extend(!0,{},this.options,t))},_call:function(t,i){i.data=e.extend({},i.data,{path:this.options.path()}),u(this.options[t])?this.options[t].call(this,i):r.data.RemoteTransport.fn[t].call(this,i)},read:function(e){this._call("read",e)},create:function(e){this._call("create",e)},destroy:function(e){this._call("destroy",e)},update:function(){},options:{read:{type:"POST"},update:{type:"POST"},create:{type:"POST"},destroy:{type:"POST"}}})}}),c.msie&&c.version;var _=s.extend({init:function(e,t){t=t||{},s.fn.init.call(this,e,t),this.element.addClass("k-filebrowser"),this.element.on("click"+f,".k-filebrowser-toolbar button:not(.k-state-disabled):has(.k-delete)",a(this._deleteClick,this)).on("click"+f,".k-filebrowser-toolbar button:not(.k-state-disabled):has(.k-addfolder)",a(this._addClick,this)).on("keydown"+f,"li.k-state-selected input",a(this._directoryKeyDown,this)).on("blur"+f,"li.k-state-selected input",a(this._directoryBlur,this)),this._dataSource(),this.refresh(),this.path(this.options.path)},options:{name:"FileBrowser",messages:{uploadFile:"Upload",orderBy:"Arrange by",orderByName:"Name",orderBySize:"Size",directoryNotFound:"A directory with this name was not found.",emptyFolder:"Empty Folder",deleteFile:'Are you sure you want to delete "{0}"?',invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',dropFilesHere:"drop file here to upload",search:"Search"},transport:{},path:"/",fileTypes:"*.*"},events:["error","change","apply"],destroy:function(){s.fn.destroy.call(this),this.dataSource.unbind("error",this._errorHandler),this.element.add(this.list).add(this.toolbar).off(f),r.destroy(this.element)},value:function(){var e,t=this._selectedItem(),n=this.options.transport.fileUrl;if(t&&"f"===t.get("type"))return e=i(this.path(),t.get("name")).replace(h,""),n&&(e=u(n)?n(e):r.format(n,encodeURIComponent(e))),e},_selectedItem:function(){var e=this.listView.select();if(e.length)return this.dataSource.getByUid(e.attr(r.attr("uid")))},_toolbar:function(){var t=this,i=r.template('<div class="k-widget k-filebrowser-toolbar k-header k-floatwrap"><div class="k-toolbar-wrap"># if (showUpload) { # <div class="k-widget k-upload"><div class="k-button k-button-icontext k-upload-button"><span class="k-icon k-add"></span>#=messages.uploadFile#<input type="file" name="file" /></div></div># } ## if (showCreate) { #<button type="button" class="k-button k-button-icon"><span class="k-icon k-addfolder" /></button># } ## if (showDelete) { #<button type="button" class="k-button k-button-icon k-state-disabled"><span class="k-icon k-delete" /></button>&nbsp;# } #</div><div class="k-tiles-arrange"><label>#=messages.orderBy#: <select /></label></div></div>'),n=t.options.messages,s=[{text:n.orderByName,value:"name"},{text:n.orderBySize,value:"size"}];t.toolbar=e(i({messages:n,showUpload:t.options.transport.uploadUrl,showCreate:t.options.transport.create,showDelete:t.options.transport.destroy})).appendTo(t.element).find(".k-upload input").kendoUpload({multiple:!1,localization:{dropFilesHere:n.dropFilesHere},async:{saveUrl:t.options.transport.uploadUrl,autoUpload:!0},upload:a(t._fileUpload,t),error:function(e){t._error({xhr:e.XMLHttpRequest,status:"error"})}}).end(),t.upload=t.toolbar.find(".k-upload input").data("kendoUpload"),t.arrangeBy=t.toolbar.find(".k-tiles-arrange select").kendoDropDownList({dataSource:s,dataTextField:"text",dataValueField:"value",change:function(){t.orderBy(this.value())}}).data("kendoDropDownList"),t._attachDropzoneEvents()},_attachDropzoneEvents:function(){this.options.transport.uploadUrl&&(function(e,t,i){var n,r;e.on("dragenter"+f,function(){t(),r=new Date,n||(n=setInterval(function(){new Date-r>100&&(i(),clearInterval(n),n=null)},100))}).on("dragover"+f,function(){r=new Date})}(e(document.documentElement),e.proxy(this._dropEnter,this),e.proxy(this._dropLeave,this)),this._scrollHandler=a(this._positionDropzone,this))},_dropEnter:function(){this._positionDropzone(),e(document).on("scroll"+f,this._scrollHandler)},_dropLeave:function(){this._removeDropzone(),e(document).off("scroll"+f,this._scrollHandler)},_positionDropzone:function(){var e=this.element,t=e.offset();this.toolbar.find(".k-dropzone").addClass("k-filebrowser-dropzone").offset(t).css({width:e[0].clientWidth,height:e[0].clientHeight,lineHeight:e[0].clientHeight+"px"})},_removeDropzone:function(){this.toolbar.find(".k-dropzone").removeClass("k-filebrowser-dropzone").css({width:"",height:"",lineHeight:"",top:"",left:""})},_deleteClick:function(){var e=this.listView.select(),t=r.format(this.options.messages.deleteFile,e.find("strong").text());e.length&&this._showMessage(t,"confirm")&&this.listView.remove(e)},_addClick:function(){this.createDirectory()},_getFieldName:function(e){return function(e,t){var i=e[t];return o(i)?i.from||i.field||t:i}(this.dataSource.reader.model.fields,e)},_fileUpload:function(e){var t,i=this,n=i.options,s=n.fileTypes,o=new RegExp(("("+s.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),a=e.files[0].name;o.test(a)?(e.data={path:i.path()},(t=i._createFile(a))?i.upload.one("success",function(e){t.set("name",e.response[i._getFieldName("name")]),t.set("size",e.response[i._getFieldName("size")]),i._tiles=i.listView.items().filter("["+r.attr("type")+"=f]")}):e.preventDefault()):(e.preventDefault(),i._showMessage(r.format(n.messages.invalidFileType,a,s)))},_findFile:function(e){var t,i,n,r=this.dataSource.data();for(e=e.toLowerCase(),t=0,n=r.length;t<n;t++)if("f"===r[t].get("type")&&r[t].get("name").toLowerCase()===e){i=r[t];break}return i},_createFile:function(e){var t,i,n=0,s={},o=this.dataSource.view(),a=this._findFile(e);if(a)return this._showMessage(r.format(this.options.messages.overwriteFile,e),"confirm")?(a._forceReload=!0,a):null;for(t=0,i=o.length;t<i;t++)if("f"===o[t].get("type")){n=t;break}return s.type="f",s.name=e,s.size=0,this.dataSource.insert(++n,s)},createDirectory:function(){var e,t,i=this,n=0,s=i.dataSource.data(),o=i._nameDirectory(),a=new i.dataSource.reader.model;for(e=0,t=s.length;e<t;e++)"d"===s[e].get("type")&&(n=e);a.set("type","d"),a.set("name",o),i.listView.one("dataBound",function(){var e=i.listView.items().filter("["+r.attr("uid")+"="+a.uid+"]"),t=e.find("input");e.length&&this.edit(e),this.element.scrollTop(e.attr("offsetTop")-this.element[0].offsetHeight),setTimeout(function(){t.select()})}).one("save",function(e){var t=e.model.get("name");t?e.model.set("name",i._nameExists(t,a.uid)?i._nameDirectory():t):e.model.set("name",o)}),i.dataSource.insert(++n,a)},_directoryKeyDown:function(e){13==e.keyCode&&e.currentTarget.blur()},_directoryBlur:function(){this.listView.save()},_nameExists:function(e,t){var i,n,r=this.dataSource.data();for(i=0,n=r.length;i<n;i++)if("d"===r[i].get("type")&&r[i].get("name").toLowerCase()===e.toLowerCase()&&r[i].uid!==t)return!0;return!1},_nameDirectory:function(){var t,i,n,r="New folder",s=this.dataSource.data(),o=[];for(i=0,n=s.length;i<n;i++)"d"===s[i].get("type")&&s[i].get("name").toLowerCase().indexOf(r.toLowerCase())>-1&&o.push(s[i].get("name"));if(e.inArray(r,o)>-1){i=2;do{t=r+" ("+i+")",i++}while(e.inArray(t,o)>-1);r=t}return r},orderBy:function(e){this.dataSource.sort([{field:"type",dir:"asc"},{field:e,dir:"asc"}])},search:function(e){this.dataSource.filter({field:"name",operator:"contains",value:e})},_content:function(){var t=this;t.list=e('<ul class="k-reset k-floats k-tiles" />').appendTo(t.element).on("dblclick"+f,"li",a(t._dblClick,t)),t.listView=new r.ui.ListView(t.list,{dataSource:t.dataSource,template:t._itemTmpl(),editTemplate:t._editTmpl(),selectable:!0,autoBind:!1,dataBinding:function(e){t.toolbar.find(".k-delete").parent().addClass("k-state-disabled"),"remove"!==e.action&&"sync"!==e.action||e.preventDefault()},dataBound:function(){t.dataSource.view().length?t._tiles=this.items().filter("["+r.attr("type")+"=f]"):this.wrapper.append(v({text:t.options.messages.emptyFolder}))},change:a(t._listViewChange,t)})},_dblClick:function(t){var n=e(t.currentTarget);if(n.hasClass("k-edit-item")&&this._directoryBlur(),n.filter("["+r.attr("type")+"=d]").length){var s=this.dataSource.getByUid(n.attr(r.attr("uid")));s&&(this.path(i(this.path(),s.get("name"))),this.breadcrumbs.value(this.path()))}else n.filter("["+r.attr("type")+"=f]").length&&this.trigger("apply")},_listViewChange:function(){var e=this._selectedItem();e&&(this.toolbar.find(".k-delete").parent().removeClass("k-state-disabled"),"f"===e.get("type")&&this.trigger("change"))},_dataSource:function(){var e=this.options,t=e.transport,i=l({},g),n={field:"name",dir:"asc"},s={type:t.type||"filebrowser",sort:[i,n]};o(t)&&(t.path=a(this.path,this),s.transport=t),o(e.schema)?s.schema=e.schema:t.type&&o(r.data.schemas[t.type])&&r.data.schemas[t.type],this.dataSource&&this._errorHandler?this.dataSource.unbind("error",this._errorHandler):this._errorHandler=a(this._error,this),this.dataSource=r.data.DataSource.create(s).bind("error",this._errorHandler)},_navigation:function(){var t=this,i=e('<div class="k-floatwrap"><input/><input/></div>').appendTo(this.element);t.breadcrumbs=i.find("input:first").kendoBreadcrumbs({value:t.options.path,change:function(){t.path(this.value())}}).data("kendoBreadcrumbs"),t.searchBox=i.parent().find("input:last").kendoSearchBox({label:t.options.messages.search,change:function(){t.search(this.value())}}).data("kendoSearchBox")},_error:function(e){var t;this.trigger("error",e)||(t=e.xhr.status,"error"==e.status?"404"==t?this._showMessage(this.options.messages.directoryNotFound):"0"!=t&&this._showMessage("Error! The requested URL returned "+t+" - "+e.xhr.statusText):"timeout"==t&&this._showMessage("Error! Server timeout."))},_showMessage:function(e,t){return window[t||"alert"](e)},refresh:function(){this._navigation(),this._toolbar(),this._content()},_editTmpl:function(){var e='<li class="k-tile k-state-selected" '+r.attr("uid")+'="#=uid#" ';return e+=r.attr("type")+'="${type}">',e+='#if(type == "d") { #',e+='<div class="k-thumb"><span class="k-icon k-folder"></span></div>',e+="#}else{#",e+='<div class="k-thumb"><span class="k-icon k-loading"></span></div>',e+="#}#",e+='#if(type == "d") { #',e+='<input class="k-input" '+r.attr("bind")+'="value:name"/>',e+="#}#",e+="</li>",a(r.template(e),{sizeFormatter:n})},_itemTmpl:function(){var e='<li class="k-tile" '+r.attr("uid")+'="#=uid#" ';return e+=r.attr("type")+'="${type}">',e+='#if(type == "d") { #',e+='<div class="k-thumb"><span class="k-icon k-folder"></span></div>',e+="#}else{#",e+='<div class="k-thumb"><span class="k-icon k-file"></span></div>',e+="#}#",e+="<strong>${name}</strong>",e+='#if(type == "f") { # <span class="k-filesize">${this.sizeFormatter(size)}</span> #}#',e+="</li>",a(r.template(e),{sizeFormatter:n})},path:function(e){var i=this._path||"";return e!==t?(this._path=e.replace(h,"")+"/",void this.dataSource.read({path:this._path})):(i&&(i=i.replace(h,"")),"/"===i||""===i?"":i+"/")}}),b=s.extend({init:function(e,t){t=t||{},s.fn.init.call(this,e,t),d&&this.element.attr("placeholder",this.options.label),this._wrapper(),this.element.on("keydown"+m,a(this._keydown,this)).on("change"+m,a(this._updateValue,this)),this.wrapper.on("click"+m,"a",a(this._click,this)),d||this.element.on("focus"+m,a(this._focus,this)).on("blur"+m,a(this._blur,this))},options:{name:"SearchBox",label:"Search",value:""},events:["change"],destroy:function(){this.wrapper.add(this.element).add(this.label).off(m),s.fn.destroy.call(this)},_keydown:function(e){13===e.keyCode&&this._updateValue()},_click:function(e){e.preventDefault(),this._updateValue()},_updateValue:function(){var e=this.element.val();e!==this.value()&&(this.value(e),this.trigger("change"))},_blur:function(){this._updateValue(),this._toggleLabel()},_toggleLabel:function(){d||this.label.toggle(!this.element.val())},_focus:function(){this.label.hide()},_wrapper:function(){var t=this.element,i=t.parents(".k-search-wrap");t[0].style.width="",t.addClass("k-input"),i.length||(i=t.wrap(e('<div class="k-widget k-search-wrap k-textbox"/>')).parent(),d||e('<label style="display:block">'+this.options.label+"</label>").insertBefore(t),e('<a href="#" class="k-icon k-i-search k-search"/>').appendTo(i)),this.wrapper=i,this.label=i.find(">label")},value:function(e){return e!==t?(this.options.value=e,this.element.val(e),void this._toggleLabel()):this.options.value}}),k=s.extend({init:function(e,t){t=t||{},s.fn.init.call(this,e,t),this._wrapper(),this.wrapper.on("focus"+p,"input",a(this._focus,this)).on("blur"+p,"input",a(this._blur,this)).on("keydown"+p,"input",a(this._keydown,this)).on("click"+p,"a.k-i-arrow-n:first",a(this._rootClick,this)).on("click"+p,"a:not(.k-i-arrow-n)",a(this._click,this)),this.value(this.options.value)},options:{name:"Breadcrumbs",gap:50},events:["change"],destroy:function(){s.fn.destroy.call(this),this.wrapper.add(this.wrapper.find("input")).add(this.wrapper.find("a")).off(p)},_update:function(e){(e="/"===(e||"").charAt(0)?e:"/"+(e||""))!==this.value()&&(this.value(e),this.trigger("change"))},_click:function(t){t.preventDefault(),this._update(this._path(e(t.target).prevAll("a:not(.k-i-arrow-n)").addBack()))},_rootClick:function(e){e.preventDefault(),this._update("")},_focus:function(){var e=this.element;this.overlay.hide(),this.element.val(this.value()),setTimeout(function(){e.select()})},_blur:function(){if(!this.overlay.is(":visible")){var e=this.element,t=e.val().replace(/\/{2,}/g,"/");this.overlay.show(),e.val(""),this._update(t)}},_keydown:function(e){var t=this;13===e.keyCode&&(t._blur(),setTimeout(function(){t.overlay.find("a:first").focus()}))},_wrapper:function(){var t,i=this.element,n=i.parents(".k-breadcrumbs");i[0].style.width="",i.addClass("k-input"),n.length||(n=i.wrap(e('<div class="k-widget k-breadcrumbs k-textbox"/>')).parent()),(t=n.find(".k-breadcrumbs-wrap")).length||(t=e('<div class="k-breadcrumbs-wrap"/>').appendTo(n)),this.wrapper=n,this.overlay=t},refresh:function(){var i,n,r,s="",o=this.value();for(o!==t&&o.match(/^\//)||(o="/"+(o||"")),n=0,r=(i=o.split("/")).length;n<r;n++)i[n]&&(s||(s+='<a href="#" class="k-icon k-i-arrow-n">root</a>'),s+='<a class="k-link" href="#">'+i[n]+"</a>",s+='<span class="k-icon k-i-arrow-e">&gt;</span>');this.overlay.empty().append(e(s)),this._adjustSectionWidth()},_adjustSectionWidth:function(){var t,i=this.wrapper.width()-this.options.gap,n=this.overlay.find("a");n.each(function(r){(t=e(this)).parent().width()>i&&(r==n.length-1?t.width(i):t.prev().addBack().hide())})},value:function(e){return e!==t?(this._value=e.replace(/\/{2,}/g,"/"),void this.refresh()):this._value},_path:function(t){return"/"+e.map(t,function(t){return e(t).text()}).join("/")}});r.ui.plugin(_),r.ui.plugin(k),r.ui.plugin(b)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.imagebrowser",["kendo.filebrowser"],function(){return function(e,t){function i(e){if(!e)return"";var t=" bytes";return e>=1073741824?(t=" GB",e/=1073741824):e>=1048576?(t=" MB",e/=1048576):e>=1024&&(t=" KB",e/=1024),Math.round(100*e)/100+t}var n=window.kendo,r=n.ui.FileBrowser,s=e.isPlainObject,o=e.proxy,a=e.extend,l=n.support.browser,d=n.isFunction,c=/(^\/|\/$)/g,u=".kendoImageBrowser",h={field:"type",dir:"asc"},f=n.template('<li class="k-tile-empty"><strong>${text}</strong></li>');a(!0,n.data,{schemas:{imagebrowser:{data:function(e){return e.items||e||[]},model:{id:"name",fields:{name:"name",size:"size",type:"type"}}}}}),a(!0,n.data,{transports:{imagebrowser:n.data.RemoteTransport.extend({init:function(t){n.data.RemoteTransport.fn.init.call(this,e.extend(!0,{},this.options,t))},_call:function(t,i){i.data=e.extend({},i.data,{path:this.options.path()}),d(this.options[t])?this.options[t].call(this,i):n.data.RemoteTransport.fn[t].call(this,i)},read:function(e){this._call("read",e)},create:function(e){this._call("create",e)},destroy:function(e){this._call("destroy",e)},update:function(){},options:{read:{type:"POST"},update:{type:"POST"},create:{type:"POST"},destroy:{type:"POST"}}})}});var p;p=l.msie&&l.version<8?function(e){return e.offsetTop}:function(t){return t.offsetTop-e(t).height()};var m=r.extend({init:function(e,t){t=t||{},r.fn.init.call(this,e,t),this.element.addClass("k-imagebrowser")},options:{name:"ImageBrowser",fileTypes:"*.png,*.gif,*.jpg,*.jpeg"},value:function(){var e,i=this._selectedItem(),r=this.options.transport.imageUrl;if(i&&"f"===i.get("type"))return e=function(e,i){return e!==t&&e.match(/\/$/)||(e=(e||"")+"/"),e+i}(this.path(),i.get("name")).replace(c,""),r&&(e=d(r)?r(e):n.format(r,encodeURIComponent(e))),e},_fileUpload:function(e){var t,i=this,r=i.options,s=r.fileTypes,o=new RegExp(("("+s.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),a=e.files[0].name;o.test(a)?(e.data={path:i.path()},(t=i._createFile(a))?(t._uploading=!0,i.upload.one("success",function(e){delete t._uploading,t.set("name",e.response[i._getFieldName("name")]),t.set("size",e.response[i._getFieldName("size")]),i._tiles=i.listView.items().filter("["+n.attr("type")+"=f]"),i._scroll()})):e.preventDefault()):(e.preventDefault(),i._showMessage(n.format(r.messages.invalidFileType,a,s)))},_content:function(){var t=this;t.list=e('<ul class="k-reset k-floats k-tiles" />').appendTo(t.element).on("scroll"+u,o(t._scroll,t)).on("dblclick"+u,"li",o(t._dblClick,t)),t.listView=new n.ui.ListView(t.list,{dataSource:t.dataSource,template:t._itemTmpl(),editTemplate:t._editTmpl(),selectable:!0,autoBind:!1,dataBinding:function(e){t.toolbar.find(".k-delete").parent().addClass("k-state-disabled"),"remove"!==e.action&&"sync"!==e.action||e.preventDefault()},dataBound:function(){t.dataSource.view().length?(t._tiles=this.items().filter("["+n.attr("type")+"=f]"),t._scroll()):this.wrapper.append(f({text:t.options.messages.emptyFolder}))},change:o(t._listViewChange,t)})},_dataSource:function(){var e=this.options,t=e.transport,i=a({},h),r={field:"name",dir:"asc"},l={type:t.type||"imagebrowser",sort:[i,r]};s(t)&&(t.path=o(this.path,this),l.transport=t),s(e.schema)?l.schema=e.schema:t.type&&s(n.data.schemas[t.type])&&n.data.schemas[t.type],this.dataSource&&this._errorHandler?this.dataSource.unbind("error",this._errorHandler):this._errorHandler=o(this._error,this),this.dataSource=n.data.DataSource.create(l).bind("error",this._errorHandler)},_loadImage:function(t){var i=e(t),r=this.dataSource.getByUid(i.attr(n.attr("uid"))),s=r.get("name"),o=this.options.transport.thumbnailUrl,a=e("<img />",{alt:s}),l="?";r._uploading||(a.hide().on("load"+u,function(){e(this).prev().remove().end().addClass("k-image").fadeIn()}),i.find(".k-loading").after(a),d(o)?o=o(this.path(),encodeURIComponent(s)):(o.indexOf("?")>=0&&(l="&"),o=o+l+"path="+encodeURIComponent(this.path()+s),r._forceReload&&(o+="&_="+(new Date).getTime(),delete r._forceReload)),a.attr("src",o),t.loaded=!0)},_scroll:function(){var e=this;e.options.transport&&e.options.transport.thumbnailUrl&&(clearTimeout(e._timeout),e._timeout=setTimeout(function(){var t=e.list.outerHeight(),i=e.list.scrollTop(),n=i+t;e._tiles.each(function(){var t=p(this),r=t+this.offsetHeight;if((t>=i&&t<n||r>=i&&r<n)&&e._loadImage(this),t>n)return!1}),e._tiles=e._tiles.filter(function(){return!this.loaded})},250))},_itemTmpl:function(){var e='<li class="k-tile" '+n.attr("uid")+'="#=uid#" ';return e+=n.attr("type")+'="${type}">',e+='#if(type == "d") { #',e+='<div class="k-thumb"><span class="k-icon k-folder"></span></div>',e+="#}else{#",this.options.transport&&this.options.transport.thumbnailUrl?e+='<div class="k-thumb"><span class="k-icon k-loading"></span></div>':e+='<div class="k-thumb"><span class="k-icon k-file"></span></div>',e+="#}#",e+="<strong>${name}</strong>",e+='#if(type == "f") { # <span class="k-filesize">${this.sizeFormatter(size)}</span> #}#',e+="</li>",o(n.template(e),{sizeFormatter:i})}});n.ui.plugin(m)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("util/undoredostack",["kendo.core"],function(){!function(e){var t=e.Observable.extend({init:function(t){e.Observable.fn.init.call(this,t),this.clear()},events:["undo","redo"],push:function(e){this.stack=this.stack.slice(0,this.currentCommandIndex+1),this.currentCommandIndex=this.stack.push(e)-1},undo:function(){if(this.canUndo()){var e=this.stack[this.currentCommandIndex--];e.undo(),this.trigger("undo",{command:e})}},redo:function(){if(this.canRedo()){var e=this.stack[++this.currentCommandIndex];e.redo(),this.trigger("redo",{command:e})}},clear:function(){this.stack=[],this.currentCommandIndex=-1},canUndo:function(){return this.currentCommandIndex>=0},canRedo:function(){return this.currentCommandIndex!=this.stack.length-1}});e.deepExtend(e,{util:{UndoRedoStack:t}})}(kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("editor/main",["util/undoredostack","kendo.combobox","kendo.dropdownlist","kendo.window","kendo.colorpicker"],function(){!function(e,t){var i=window.kendo,n=i.Class,r=i.ui.Widget,s=i.support.mobileOS,o=i.support.browser,a=e.extend,l=e.proxy,d=i.deepExtend,c=i.keys,u=n.extend({init:function(e){this.options=e},getHtml:function(){var e=this.options;return i.template(e.template,{useWithBlock:!1})(e)}}),h={editorWrapperTemplate:'<table cellspacing="4" cellpadding="0" class="k-widget k-editor k-header" role="presentation"><tbody><tr role="presentation"><td class="k-editor-toolbar-wrap" role="presentation"><ul class="k-editor-toolbar" role="toolbar" /></td></tr><tr><td class="k-editable-area" /></tr></tbody></table>',buttonTemplate:'<a href="" role="button" class="k-tool"#= data.popup ? " data-popup" : "" # unselectable="on" title="#= data.title #"><span unselectable="on" class="k-tool-icon #= data.cssClass #"></span><span class="k-tool-text">#= data.title #</span></a>',colorPickerTemplate:'<div class="k-colorpicker #= data.cssClass #" />',comboBoxTemplate:'<select title="#= data.title #" class="#= data.cssClass #" />',dropDownListTemplate:'<span class="k-editor-dropdown"><select title="#= data.title #" class="#= data.cssClass #" /></span>',separatorTemplate:'<span class="k-separator" />',overflowAnchorTemplate:'<a href="" role="button" class="k-tool k-overflow-anchor" data-popup unselectable="on"><span unselectable="on" class="k-icon k-i-more"></span></a>',formatByName:function(t,i){for(var n=0;n<i.length;n++)if(e.inArray(t,i[n].tags)>=0)return i[n]},registerTool:function(e,t){var i=t.options;i&&i.template&&(i.template.options.cssClass="k-"+e),t.name||(t.options.name=e,t.name=e.toLowerCase()),m.defaultTools[e]=t},registerFormat:function(e,t){m.fn.options.formats[e]=t}},f=!s||s.ios&&s.flatVersion>=500||!s.ios&&void 0!==document.documentElement.contentEditable,p={basic:["bold","italic","underline"],alignment:["justifyLeft","justifyCenter","justifyRight"],lists:["insertUnorderedList","insertOrderedList"],indenting:["indent","outdent"],links:["createLink","unlink"],tables:["createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn"]},m=r.extend({init:function(t,n){var s,o,c,u,h,p=this,m=i.ui.editor,g=m.Dom;f&&(r.fn.init.call(p,t,n),p.options=d({},p.options,n),p.options.tools=p.options.tools.slice(),t=p.element,h=t[0],u=g.name(h),this._registerHandler(t.closest("form"),"submit",l(p.update,p,void 0)),(c=a({},p.options)).editor=p,"textarea"==u?(p._wrapTextarea(),o=p.wrapper.find(".k-editor-toolbar"),h.id&&o.attr("aria-controls",h.id)):(p.element.attr("contenteditable",!0).addClass("k-widget k-editor k-editor-inline"),c.popup=!0,o=e('<ul class="k-editor-toolbar" role="toolbar" />').insertBefore(t)),p.toolbar=new m.Toolbar(o[0],c),p.toolbar.bindTo(p),"textarea"==u&&setTimeout(function(){var e=p.wrapper[0].style.height,t=parseInt(e,10),i=p.wrapper.height();e.indexOf("px")>0&&!isNaN(t)&&i>t&&p.wrapper.height(t-(i-t))}),p._resizable(),p._initializeContentElement(p),p.keyboard=new m.Keyboard([new m.BackspaceHandler(p),new m.TypingHandler(p),new m.SystemHandler(p)]),p.clipboard=new m.Clipboard(this),p.undoRedoStack=new i.util.UndoRedoStack,n&&n.value?s=n.value:p.textarea?(s=h.value,p.options.encoded&&e.trim(h.defaultValue).length&&(s=h.defaultValue),s=s.replace(/[\r\n\v\f\t ]+/gi," ")):s=h.innerHTML,p.value(s||i.ui.editor.emptyElementContent),this._registerHandler(document,{mousedown:function(){p._endTyping()},mouseup:function(){p._mouseup()}}),p.toolbar.resize(),i.notify(p))},setOptions:function(e){r.fn.setOptions.call(this,e),e.tools&&this.toolbar.bindTo(this)},_endTyping:function(){var e=this.keyboard;try{e.isTypingInProgress()&&(e.endTyping(!0),this.saveSelection())}catch(e){}},_selectionChange:function(){this._selectionStarted=!1,this.saveSelection(),this.trigger("select",{})},_resizable:function(){var t=this.options.resizable,i=e.isPlainObject(t)?void 0===t.content||!0===t.content:t;i&&this.textarea&&(e("<div class='k-resize-handle'><span class='k-icon k-resize-se' /></div>").insertAfter(this.textarea),this.wrapper.kendoResizable(a({},this.options.resizable,{start:function(t){var i=this.editor=e(t.currentTarget).closest(".k-editor");this.initialSize=i.height(),i.find("td:last").append("<div class='k-overlay' />")},resize:function(e){var t=e.y.initialDelta,i=this.initialSize+t,n=this.options.min||0,r=this.options.max||1/0;i=Math.min(r,Math.max(n,i)),this.editor.height(i)},resizeend:function(){this.editor.find(".k-overlay").remove(),this.editor=null}})))},_wrapTextarea:function(){var t=this.element,i=t[0].style.width,n=t[0].style.height,r=h.editorWrapperTemplate,s=e(r).insertBefore(t).width(i).height(n),o=s.find(".k-editable-area");t.attr("autocomplete","off").appendTo(o).addClass("k-content k-raw-content").css("display","none"),this.textarea=t,this.wrapper=s},_createContentElement:function(t){var n,r,s,o=this,a=o.textarea,l=o.options.domain,d=l||document.domain,c="",u='javascript:""';return(l||d!=location.hostname)&&(u="javascript:document.write('"+(c='<script>document.domain="'+d+'"<\/script>')+"')"),a.hide(),n=e("<iframe />",{title:o.options.messages.editAreaTitle,frameBorder:"0"})[0],e(n).css("display","").addClass("k-content").attr("tabindex",a[0].tabIndex).insertBefore(a),n.src=u,r=n.contentWindow||n,s=r.document||n.contentDocument,e(n).one("load",function(){o.toolbar.decorateFrom(s.body)}),s.open(),s.write("<!DOCTYPE html><html><head><meta charset='utf-8' /><style>html,body{padding:0;margin:0;height:100%;min-height:100%;}body{font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:1px .2em 0;word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;"+(i.support.isRtl(a)?"direction:rtl;":"")+"}h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}ul,ol{padding-left:2.5em}span{-ms-high-contrast-adjust:none;}a{color:#00a}code{font-size:1.23em}telerik\\3Ascript{display: none;}.k-table{table-layout:fixed;width:100%;border-spacing:0;margin: 0 0 1em;}.k-table td{min-width:1px;padding:.2em .3em;}.k-table,.k-table td{outline:0;border: 1px dotted #ccc;}.k-table p{margin:0;padding:0;}k\\:script{display:none;}</style>"+c+"<script>(function(d,c){d[c]('header'),d[c]('article'),d[c]('nav'),d[c]('section'),d[c]('footer');})(document, 'createElement');<\/script>"+e.map(t,function(e){return"<link rel='stylesheet' href='"+e+"'>"}).join("")+"</head><body autocorrect='off' contenteditable='true'></body></html>"),s.close(),r},_blur:function(){var e=this.textarea,t=e?e.val():this._oldValue,i=this.options.encoded?this.encodedValue():this.value();this.update(),e&&e.trigger("blur"),i!=t&&this.trigger("change")},_spellCorrect:function(e){var t,n=!1;this._registerHandler(e.body,{contextmenu:function(){e.one("select",function(){t=null}),e._spellCorrectTimeout=setTimeout(function(){t=new i.ui.editor.RestorePoint(e.getRange()),n=!1},10)},input:function(){t&&(!i.support.browser.mozilla||n?i.ui.editor._finishUpdate(e,t):n=!0)}})},_registerHandler:function(t,i,n){if(t=e(t),this._handlers||(this._handlers=[]),t.length)if(e.isPlainObject(i))for(var r in i)i.hasOwnProperty(r)&&this._registerHandler(t,r,i[r]);else i=i.split(" ").join(".kendoEditor ")+".kendoEditor",this._handlers.push({element:t,type:i,handler:n}),t.on(i,n)},_deregisterHandlers:function(){for(var e=this._handlers,t=0;t<e.length;t++){var i=e[t];i.element.off(i.type,i.handler)}this._handlers=[]},_initializeContentElement:function(){var t,n,r=this;r.textarea?(r.window=r._createContentElement(r.options.stylesheets),t=r.document=r.window.contentDocument||r.window.document,r.body=t.body,n=r.window,this._registerHandler(t,"mouseup",l(this._mouseup,this))):(r.window=window,t=r.document=document,r.body=r.element[0],n=r.body,r.toolbar.decorateFrom(r.body)),this._registerHandler(n,"blur",l(this._blur,this));try{t.execCommand("enableInlineTableEditing",null,!1)}catch(e){}i.support.touch&&this._registerHandler(t,{selectionchange:l(this._selectionChange,this),keydown:function(){i._activeElement()!=t.body&&r.window.focus()}}),this._spellCorrect(r),this._registerHandler(r.body,{dragstart:function(e){e.preventDefault()},keydown:function(e){var t;if((e.keyCode===c.BACKSPACE||e.keyCode===c.DELETE)&&"true"!==r.body.getAttribute("contenteditable"))return!1;if(e.keyCode===c.F10)return setTimeout(l(r.toolbar.focus,r.toolbar),100),void e.preventDefault();if(e.keyCode==c.LEFT||e.keyCode==c.RIGHT){t=r.getRange();var i=e.keyCode==c.LEFT,n=t[i?"startContainer":"endContainer"],s=t[i?"startOffset":"endOffset"],o=i?-1:1;i&&(s-=1),s+o>0&&3==n.nodeType&&"\ufeff"==n.nodeValue[s]&&(t.setStart(n,s+o),t.collapse(!0),r.selectRange(t))}var a=r.toolbar.tools,d=r.keyboard.toolFromShortcut(a,e),u=d?a[d].options:{};if(d&&!u.keyPressCommand)return e.preventDefault(),/^(undo|redo)$/.test(d)||r.keyboard.endTyping(!0),r.trigger("keydown",e),r.exec(d),r._runPostContentKeyCommands(e),!1;r.keyboard.clearTimeout(),r.keyboard.keydown(e)},keypress:function(e){setTimeout(function(){r._runPostContentKeyCommands(e)},0)},keyup:function(t){(e.inArray(t.keyCode,[8,9,33,34,35,36,37,38,39,40,40,45,46])>-1||65==t.keyCode&&t.ctrlKey&&!t.altKey&&!t.shiftKey)&&r._selectionChange(),r.keyboard.keyup(t)},mousedown:function(t){if(r._selectionStarted=!0,!o.gecko){var i=e(t.target);(2==t.which||1==t.which&&t.ctrlKey)&&i.is("a[href]")&&window.open(i.attr("href"),"_new")}},click:function(e){var t,n=i.ui.editor.Dom;"img"===n.name(e.target)&&((t=r.createRange()).selectNode(e.target),r.selectRange(t))},"cut copy paste":function(e){r.clipboard["on"+e.type](e)},focusin:function(){r.body.hasAttribute("contenteditable")&&(e(this).addClass("k-state-active"),r.toolbar.show())},focusout:function(){setTimeout(function(){var t=i._activeElement(),n=r.body,s=r.toolbar;t==n||e.contains(n,t)||e(t).is(".k-editortoolbar-dragHandle")||s.focused()||(e(n).removeClass("k-state-active"),s.hide())},10)}})},_mouseup:function(){var e=this;e._selectionStarted&&setTimeout(function(){e._selectionChange()},1)},_runPostContentKeyCommands:function(e){for(var t=this.getRange(),i=this.keyboard.toolsFromShortcut(this.toolbar.tools,e),n=0;n<i.length;n++){var r=i[n],s=r.options;if(s.keyPressCommand){var o=new s.command({range:t});o.changesContent()&&(this.keyboard.endTyping(!0),this.exec(r.name))}}},refresh:function(){this.textarea&&(this.textarea.val(this.value()),this.wrapper.find("iframe").remove(),this._initializeContentElement(this),this.value(this.textarea.val()))},events:["select","change","execute","error","paste","keydown","keyup"],options:{name:"Editor",messages:{bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",superscript:"Superscript",subscript:"Subscript",justifyCenter:"Center text",justifyLeft:"Align text left",justifyRight:"Align text right",justifyFull:"Justify",insertUnorderedList:"Insert unordered list",insertOrderedList:"Insert ordered list",indent:"Indent",outdent:"Outdent",createLink:"Insert hyperlink",unlink:"Remove hyperlink",insertImage:"Insert image",insertFile:"Insert file",insertHtml:"Insert HTML",viewHtml:"View HTML",fontName:"Select font family",fontNameInherit:"(inherited font)",fontSize:"Select font size",fontSizeInherit:"(inherited size)",formatBlock:"Format",formatting:"Format",foreColor:"Color",backColor:"Background color",style:"Styles",emptyFolder:"Empty Folder",editAreaTitle:"Editable area. Press F10 for toolbar.",uploadFile:"Upload",orderBy:"Arrange by:",orderBySize:"Size",orderByName:"Name",invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',deleteFile:'Are you sure you want to delete "{0}"?',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',directoryNotFound:"A directory with this name was not found.",imageWebAddress:"Web address",imageAltText:"Alternate text",imageWidth:"Width (px)",imageHeight:"Height (px)",fileWebAddress:"Web address",fileTitle:"Title",linkWebAddress:"Web address",linkText:"Text",linkToolTip:"ToolTip",linkOpenInNewWindow:"Open link in new window",dialogUpdate:"Update",dialogInsert:"Insert",dialogCancel:"Cancel",createTable:"Create table",createTableHint:"Create a {0} x {1} table",addColumnLeft:"Add column on the left",addColumnRight:"Add column on the right",addRowAbove:"Add row above",addRowBelow:"Add row below",deleteRow:"Delete row",deleteColumn:"Delete column"},formats:{},encoded:!0,domain:null,resizable:!1,deserialization:{custom:null},serialization:{entities:!0,semantic:!0,scripts:!1},pasteCleanup:{all:!1,css:!1,custom:null,keepNewLines:!1,msAllFormatting:!1,msConvertLists:!0,msTags:!0,none:!1,span:!1},stylesheets:[],dialogOptions:{modal:!0,resizable:!1,draggable:!0,animation:!1},imageBrowser:null,fileBrowser:null,fontName:[{text:"Arial",value:"Arial,Helvetica,sans-serif"},{text:"Courier New",value:"'Courier New',Courier,monospace"},{text:"Georgia",value:"Georgia,serif"},{text:"Impact",value:"Impact,Charcoal,sans-serif"},{text:"Lucida Console",value:"'Lucida Console',Monaco,monospace"},{text:"Tahoma",value:"Tahoma,Geneva,sans-serif"},{text:"Times New Roman",value:"'Times New Roman',Times,serif"},{text:"Trebuchet MS",value:"'Trebuchet MS',Helvetica,sans-serif"},{text:"Verdana",value:"Verdana,Geneva,sans-serif"}],fontSize:[{text:"1 (8pt)",value:"xx-small"},{text:"2 (10pt)",value:"x-small"},{text:"3 (12pt)",value:"small"},{text:"4 (14pt)",value:"medium"},{text:"5 (18pt)",value:"large"},{text:"6 (24pt)",value:"x-large"},{text:"7 (36pt)",value:"xx-large"}],formatBlock:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],tools:[].concat.call(["formatting"],p.basic,p.alignment,p.lists,p.indenting,p.links,["insertImage"],p.tables)},destroy:function(){r.fn.destroy.call(this),this._deregisterHandlers(),clearTimeout(this._spellCorrectTimeout),this._focusOutside(),this.toolbar.destroy(),i.destroy(this.wrapper)},_focusOutside:function(){if(i.support.browser.msie&&this.textarea){var t=e("<input style='position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0' />").appendTo(document.body).focus();t.blur().remove()}},state:function(e){var t,n,r=m.defaultTools[e],s=r&&(r.options.finder||r.finder),o=i.ui.editor.RangeUtils;return!!s&&(t=this.getRange(),!(n=o.textNodes(t)).length&&t.collapsed&&(n=[t.startContainer]),s.getFormat?s.getFormat(n):s.isFormatted(n))},value:function(e){var t=this.body,n=i.ui.editor,r=this.options,s=n.Serializer.domToXhtml(t,r.serialization);if(void 0===e)return s;e!=s&&(n.Serializer.htmlToDom(e,t,r.deserialization),this.selectionRestorePoint=null,this.update(),this.toolbar.refreshTools())},saveSelection:function(t){var n=(t=t||this.getRange()).commonAncestorContainer,r=this.body;(n==r||e.contains(r,n))&&(this.selectionRestorePoint=new i.ui.editor.RestorePoint(t))},_focusBody:function(){var e=this.body,t=this.wrapper&&this.wrapper.find("iframe")[0],n=this.document.documentElement,r=i._activeElement();if(r!=e&&r!=t){var s=n.scrollTop;e.focus(),n.scrollTop=s}},restoreSelection:function(){this._focusBody(),this.selectionRestorePoint&&this.selectRange(this.selectionRestorePoint.toRange())},focus:function(){this.restoreSelection()},update:function(e){e=e||this.options.encoded?this.encodedValue():this.value(),this.textarea?this.textarea.val(e):this._oldValue=e},encodedValue:function(){return i.ui.editor.Dom.encode(this.value())},createRange:function(e){return i.ui.editor.RangeUtils.createRange(e||this.document)},getSelection:function(){return i.ui.editor.SelectionUtils.selectionFromDocument(this.document)},selectRange:function(e){this._focusBody();var t=this.getSelection();t.removeAllRanges(),t.addRange(e),this.saveSelection(e)},getRange:function(){var e=this.getSelection(),t=e&&e.rangeCount>0?e.getRangeAt(0):this.createRange(),i=this.document;return t.startContainer!=i||t.endContainer!=i||t.startOffset||t.endOffset||(t.setStart(this.body,0),t.collapse(!0)),t},selectedHtml:function(){return i.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents())},paste:function(t,n){this.focus();var r=new i.ui.editor.InsertHtmlCommand(e.extend({range:this.getRange(),html:t},n));r.editor=this,r.exec()},exec:function(e,t){var i,n,r=null;if(!e)throw new Error("kendoEditor.exec(): `name` parameter cannot be empty");if("true"!==this.body.getAttribute("contenteditable")&&"print"!==e)return!1;if(e=e.toLowerCase(),this.keyboard.isTypingInProgress()||this.restoreSelection(),!(n=this.toolbar.toolById(e)))for(var s in m.defaultTools)if(s.toLowerCase()==e){n=m.defaultTools[s];break}if(n){if(i=this.getRange(),n.command&&(r=n.command(a({range:i},t))),this.trigger("execute",{name:e,command:r}))return;if(/^(undo|redo)$/i.test(e))this.undoRedoStack[e]();else if(r&&(r.managesUndoRedo||this.undoRedoStack.push(r),r.editor=this,r.exec(),r.async))return void(r.change=l(this._selectionChange,this));this._selectionChange()}}});m.defaultTools={undo:{options:{key:"Z",ctrl:!0}},redo:{options:{key:"Y",ctrl:!0}}},i.ui.plugin(m);var g=n.extend({init:function(e){this.options=e},initialize:function(e,t){e.attr({unselectable:"on",title:t.title}),e.children(".k-tool-text").html(t.title)},command:function(e){return new this.options.command(e)},update:e.noop});g.exec=function(e,t,i){e.exec(t,{value:i})};var v=g.extend({init:function(e){g.fn.init.call(this,e)},command:function(e){return new i.ui.editor.FormatCommand(a(e,{formatter:this.options.formatter}))},update:function(e,t){var i=this.options.finder.isFormatted(t);e.toggleClass("k-state-selected",i),e.attr("aria-pressed",i)}});h.registerTool("separator",new g({template:new u({template:h.separatorTemplate})}));var _=o.msie&&o.version<9?"\ufeff":"",b="\ufeff";o.msie&&10==o.version&&(b=" "),a(i.ui,{editor:{ToolTemplate:u,EditorUtils:h,Tool:g,FormatTool:v,_bomFill:_,emptyElementContent:b}}),i.PDFMixin&&(i.PDFMixin.extend(m.prototype),m.prototype._drawPDF=function(){return i.drawing.drawDOM(this.body,this.options.pdf)},m.prototype.saveAsPDF=function(){var t=new e.Deferred,n=t.promise(),r={promise:n};if(!this.trigger("pdfExport",r)){var s=this.options.pdf,o=s.paperSize;return this._drawPDF(t).then(function(e){return s.paperSize="auto",i.drawing.exportPDF(e,s)}).done(function(e){i.saveAs({dataURI:e,fileName:s.fileName,proxyURL:s.proxyURL,forceProxy:s.forceProxy}),s.paperSize=o,t.resolve()}).fail(function(e){t.reject(e)}),n}})}(window.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("editor/dom",["editor/main"],function(){!function(e){function t(e){var t,i,n={};for(t=0,i=e.length;t<i;t++)n[e[t]]=!0;return n}var i=window.kendo,n=e.map,r=e.extend,s=i.support.browser,o=t("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed".split(",")),a="div,p,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption".split(","),l=a.concat(["ul","ol","li"]),d=t(l),c="span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby".split(","),u=t(c),h=t("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected".split(",")),f=function(e){1==e.nodeType&&e.normalize()};s.msie&&s.version>=8&&(f=function(e){if(1==e.nodeType&&e.firstChild)for(var t=e.firstChild,i=t;i=i.nextSibling;)3==i.nodeType&&3==t.nodeType&&(i.nodeValue=t.nodeValue+i.nodeValue,C.remove(t)),t=i});var p,m=/^\s+$/,g=/^[\n\r\t]+$/,v=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i,_=/\ufeff/g,b=/^(\s+|\ufeff)$/,k="color,padding-left,padding-right,padding-top,padding-bottom,background-color,background-attachment,background-image,background-position,background-repeat,border-top-style,border-top-width,border-top-color,border-bottom-style,border-bottom-width,border-bottom-color,border-left-style,border-left-width,border-left-color,border-right-style,border-right-width,border-right-color,font-family,font-size,font-style,font-variant,font-weight,line-height".split(","),w=/[<>\&]/g,y=/[\u00A0-\u2666<>\&]/g,x={34:"quot",38:"amp",39:"apos",60:"lt",62:"gt",160:"nbsp",161:"iexcl",162:"cent",163:"pound",164:"curren",165:"yen",166:"brvbar",167:"sect",168:"uml",169:"copy",170:"ordf",171:"laquo",172:"not",173:"shy",174:"reg",175:"macr",176:"deg",177:"plusmn",178:"sup2",179:"sup3",180:"acute",181:"micro",182:"para",183:"middot",184:"cedil",185:"sup1",186:"ordm",187:"raquo",188:"frac14",189:"frac12",190:"frac34",191:"iquest",192:"Agrave",193:"Aacute",194:"Acirc",195:"Atilde",196:"Auml",197:"Aring",198:"AElig",199:"Ccedil",200:"Egrave",201:"Eacute",202:"Ecirc",203:"Euml",204:"Igrave",205:"Iacute",206:"Icirc",207:"Iuml",208:"ETH",209:"Ntilde",210:"Ograve",211:"Oacute",212:"Ocirc",213:"Otilde",214:"Ouml",215:"times",216:"Oslash",217:"Ugrave",218:"Uacute",219:"Ucirc",220:"Uuml",221:"Yacute",222:"THORN",223:"szlig",224:"agrave",225:"aacute",226:"acirc",227:"atilde",228:"auml",229:"aring",230:"aelig",231:"ccedil",232:"egrave",233:"eacute",234:"ecirc",235:"euml",236:"igrave",237:"iacute",238:"icirc",239:"iuml",240:"eth",241:"ntilde",242:"ograve",243:"oacute",244:"ocirc",245:"otilde",246:"ouml",247:"divide",248:"oslash",249:"ugrave",250:"uacute",251:"ucirc",252:"uuml",253:"yacute",254:"thorn",255:"yuml",402:"fnof",913:"Alpha",914:"Beta",915:"Gamma",916:"Delta",917:"Epsilon",918:"Zeta",919:"Eta",920:"Theta",921:"Iota",922:"Kappa",923:"Lambda",924:"Mu",925:"Nu",926:"Xi",927:"Omicron",928:"Pi",929:"Rho",931:"Sigma",932:"Tau",933:"Upsilon",934:"Phi",935:"Chi",936:"Psi",937:"Omega",945:"alpha",946:"beta",947:"gamma",948:"delta",949:"epsilon",950:"zeta",951:"eta",952:"theta",953:"iota",954:"kappa",955:"lambda",956:"mu",957:"nu",958:"xi",959:"omicron",960:"pi",961:"rho",962:"sigmaf",963:"sigma",964:"tau",965:"upsilon",966:"phi",967:"chi",968:"psi",969:"omega",977:"thetasym",978:"upsih",982:"piv",8226:"bull",8230:"hellip",8242:"prime",8243:"Prime",8254:"oline",8260:"frasl",8472:"weierp",8465:"image",8476:"real",8482:"trade",8501:"alefsym",8592:"larr",8593:"uarr",8594:"rarr",8595:"darr",8596:"harr",8629:"crarr",8656:"lArr",8657:"uArr",8658:"rArr",8659:"dArr",8660:"hArr",8704:"forall",8706:"part",8707:"exist",8709:"empty",8711:"nabla",8712:"isin",8713:"notin",8715:"ni",8719:"prod",8721:"sum",8722:"minus",8727:"lowast",8730:"radic",8733:"prop",8734:"infin",8736:"ang",8743:"and",8744:"or",8745:"cap",8746:"cup",8747:"int",8756:"there4",8764:"sim",8773:"cong",8776:"asymp",8800:"ne",8801:"equiv",8804:"le",8805:"ge",8834:"sub",8835:"sup",8836:"nsub",8838:"sube",8839:"supe",8853:"oplus",8855:"otimes",8869:"perp",8901:"sdot",8968:"lceil",8969:"rceil",8970:"lfloor",8971:"rfloor",9001:"lang",9002:"rang",9674:"loz",9824:"spades",9827:"clubs",9829:"hearts",9830:"diams",338:"OElig",339:"oelig",352:"Scaron",353:"scaron",376:"Yuml",710:"circ",732:"tilde",8194:"ensp",8195:"emsp",8201:"thinsp",8204:"zwnj",8205:"zwj",8206:"lrm",8207:"rlm",8211:"ndash",8212:"mdash",8216:"lsquo",8217:"rsquo",8218:"sbquo",8220:"ldquo",8221:"rdquo",8222:"bdquo",8224:"dagger",8225:"Dagger",8240:"permil",8249:"lsaquo",8250:"rsaquo",8364:"euro"},C={block:d,inline:u,findNodeIndex:function(e,t){var i=0;if(!e)return-1;for(;e=e.previousSibling;)t&&3==e.nodeType||i++;return i},isDataNode:function(e){return e&&null!==e.nodeValue&&null!==e.data},isAncestorOf:function(t,i){try{return!C.isDataNode(t)&&(e.contains(t,C.isDataNode(i)?i.parentNode:i)||i.parentNode==t)}catch(e){return!1}},isAncestorOrSelf:function(e,t){return C.isAncestorOf(e,t)||e==t},findClosestAncestor:function(e,t){if(C.isAncestorOf(e,t))for(;t&&t.parentNode!=e;)t=t.parentNode;return t},getNodeLength:function(e){return C.isDataNode(e)?e.length:e.childNodes.length},splitDataNode:function(e,t){for(var i,n=e.cloneNode(!1),r="",s=e.nextSibling;s&&3==s.nodeType&&s.nodeValue;)r+=s.nodeValue,i=s,s=s.nextSibling,C.remove(i);e.deleteData(t,e.length),n.deleteData(0,t),n.nodeValue+=r,C.insertAfter(n,e)},attrEquals:function(e,t){for(var n in t){var r=e[n];if("float"==n&&(r=e[i.support.cssFloat?"cssFloat":"styleFloat"]),"object"==typeof r){if(!C.attrEquals(r,t[n]))return!1}else if(r!=t[n])return!1}return!0},blockParentOrBody:function(e){return C.parentOfType(e,l)||e.ownerDocument.body},blockParents:function(t){var i,n,r=[];for(i=0,n=t.length;i<n;i++){var s=C.parentOfType(t[i],C.blockElements);s&&e.inArray(s,r)<0&&r.push(s)}return r},windowFromDocument:function(e){return e.defaultView||e.parentWindow},normalize:f,blockElements:l,nonListBlockElements:a,inlineElements:c,empty:o,fillAttrs:h,toHex:function(e){var t=v.exec(e);return t?"#"+n(t.slice(1),function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e}).join(""):e},encode:function(e,t){var i=!t||t.entities?y:w;return e.replace(i,function(e){var t=e.charCodeAt(0),i=x[t];return i?"&"+i+";":e})},stripBom:function(e){return(e||"").replace(_,"")},stripBomNode:function(e){e&&3===e.nodeType&&"\ufeff"===e.nodeValue&&e.parentNode.removeChild(e)},insignificant:function(e){var t=e.attributes;return"k-marker"==e.className||C.is(e,"br")&&("k-br"==e.className||t._moz_dirty||t._moz_editor_bogus_node)},significantNodes:function(t){return e.grep(t,function(e){var t=C.name(e);return"br"!=t&&(!C.insignificant(e)&&((3!=e.nodeType||!b.test(e.nodeValue))&&!(1==e.nodeType&&!o[t]&&C.emptyNode(e))))})},emptyNode:function(e){return 1==e.nodeType&&!C.significantNodes(e.childNodes).length},name:function(e){return e.nodeName.toLowerCase()},significantChildNodes:function(t){return e.grep(t.childNodes,function(e){return 3!=e.nodeType||!C.isWhitespace(e)})},lastTextNode:function(e){var t=null;if(3==e.nodeType)return e;for(var i=e.lastChild;i;i=i.previousSibling)if(t=C.lastTextNode(i))return t;return t},is:function(e,t){return C.name(e)==t},isMarker:function(e){return"k-marker"==e.className},isWhitespace:function(e){return m.test(e.nodeValue)},isEmptyspace:function(e){return g.test(e.nodeValue)},isBlock:function(e){return d[C.name(e)]},isEmpty:function(e){return o[C.name(e)]},isInline:function(e){return u[C.name(e)]},scrollContainer:function(e){var t=C.windowFromDocument(e),n=(t.contentWindow||t).document||t.ownerDocument||t;return n=i.support.browser.webkit||"BackCompat"==n.compatMode?n.body:n.documentElement},scrollTo:function(t){var i,n,r=e(C.isDataNode(t)?t.parentNode:t),s=C.windowFromDocument(t.ownerDocument),o=s.innerHeight,a=C.scrollContainer(t.ownerDocument);i=r.offset().top,(n=r[0].offsetHeight)||(n=parseInt(r.css("line-height"),10)||Math.ceil(1.2*parseInt(r.css("font-size"),10))||15),n+i>a.scrollTop+o&&(a.scrollTop=n+i-o)},persistScrollTop:function(e){p=C.scrollContainer(e).scrollTop},restoreScrollTop:function(e){C.scrollContainer(e).scrollTop=p},insertAt:function(e,t,i){e.insertBefore(t,e.childNodes[i]||null)},insertBefore:function(e,t){return t.parentNode?t.parentNode.insertBefore(e,t):t},insertAfter:function(e,t){return t.parentNode.insertBefore(e,t.nextSibling)},remove:function(e){e.parentNode.removeChild(e)},removeTextSiblings:function(e){for(var t=e.parentNode;e.nextSibling&&3==e.nextSibling.nodeType;)t.removeChild(e.nextSibling);for(;e.previousSibling&&3==e.previousSibling.nodeType;)t.removeChild(e.previousSibling)},trim:function(e){for(var t=e.childNodes.length-1;t>=0;t--){var i=e.childNodes[t];C.isDataNode(i)?(C.stripBom(i.nodeValue).length||C.remove(i),C.isWhitespace(i)&&C.insertBefore(i,e)):"k-marker"!=i.className&&(C.trim(i),i.childNodes.length||C.isEmpty(i)||C.remove(i))}return e},closest:function(e,t){for(;e&&C.name(e)!=t;)e=e.parentNode;return e},sibling:function(e,t){do{e=e[t]}while(e&&1!=e.nodeType);return e},next:function(e){return C.sibling(e,"nextSibling")},prev:function(e){return C.sibling(e,"previousSibling")},parentOfType:function(e,t){do{e=e.parentNode}while(e&&!C.ofType(e,t));return e},ofType:function(t,i){return e.inArray(C.name(t),i)>=0},changeTag:function(e,t,i){var n,r,s,o,a,l=C.create(e.ownerDocument,t),d=e.attributes;if(!i)for(n=0,r=d.length;n<r;n++)(a=d[n]).specified&&(s=a.nodeName,o=a.nodeValue,"class"==s?l.className=o:"style"==s?l.style.cssText=e.style.cssText:l.setAttribute(s,o));for(;e.firstChild;)l.appendChild(e.firstChild);return C.insertBefore(l,e),C.remove(e),l},editableParent:function(e){for(;e&&(3==e.nodeType||"true"!==e.contentEditable);)e=e.parentNode;return e},wrap:function(e,t){return C.insertBefore(t,e),t.appendChild(e),t},unwrap:function(e){for(var t=e.parentNode;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)},create:function(e,t,i){return C.attr(e.createElement(t),i)},attr:function(e,t){(t=r({},t))&&"style"in t&&(C.style(e,t.style),delete t.style);for(var i in t)null===t[i]?(e.removeAttribute(i),delete t[i]):"className"==i&&(e[i]=t[i]);return r(e,t)},style:function(t,i){e(t).css(i||{})},unstyle:function(e,t){for(var n in t)"float"==n&&(n=i.support.cssFloat?"cssFloat":"styleFloat"),e.style[n]="";""===e.style.cssText&&e.removeAttribute("style")},inlineStyle:function(t,i,r){var o,a=e(C.create(t.ownerDocument,i,r));return t.appendChild(a[0]),o=n(k,function(e){return s.msie&&"line-height"==e&&"1px"==a.css(e)?"line-height:1.5":e+":"+a.css(e)}).join(";"),a.remove(),o},getEffectiveBackground:function(e){var t=e.css("background-color");return t.indexOf("rgba(0, 0, 0, 0")<0&&"transparent"!==t?t:"html"===e[0].tagName.toLowerCase()?"Window":C.getEffectiveBackground(e.parent())},innerText:function(e){var t=e.innerHTML;return t=t.replace(/<!--(.|\s)*?-->/gi,""),t=t.replace(/<\/?[^>]+?\/?>/gm,"")},removeClass:function(t,i){var n,r,s=" "+t.className+" ",o=i.split(" ");for(n=0,r=o.length;n<r;n++)s=s.replace(" "+o[n]+" "," ");(s=e.trim(s)).length?t.className=s:t.removeAttribute("class")},commonAncestor:function(){var e,t,i,n,r,s=arguments.length,o=[],a=1/0,l=null;if(!s)return null;if(1==s)return arguments[0];for(e=0;e<s;e++){for(t=[],i=arguments[e];i;)t.push(i),i=i.parentNode;o.push(t.reverse()),a=Math.min(a,t.length)}if(1==s)return o[0][0];for(e=0;e<a;e++){for(n=o[0][e],r=1;r<s;r++)if(n!=o[r][e])return l;l=n}return l},closestSplittableParent:function(t){var i;(i=1==t.length?C.parentOfType(t[0],["ul","ol"]):C.commonAncestor.apply(null,t))||(i=C.parentOfType(t[0],["p","td"])||t[0].ownerDocument.body),C.isInline(i)&&(i=C.blockParentOrBody(i));var r=n(t,C.editableParent),s=C.commonAncestor(r)[0];return e.contains(i,s)&&(i=s),i},closestEditable:function(t,i){var n,r=C.editableParent(t);return(n=C.ofType(t,i)?t:C.parentOfType(t,i))&&r&&e.contains(n,r)?n=r:!n&&r&&(n=r),n},closestEditableOfType:function(e,t){var i=C.closestEditable(e,t);if(i&&C.ofType(i,t))return i},filter:function(e,t,i){for(var n,r=0,s=t.length,o=[];r<s;r++)n=C.name(t[r]),(!i&&n==e||i&&n!=e)&&o.push(t[r]);return o},ensureTrailingBreaks:function(t){var i=e(t).find("p,td,th"),n=i.length,r=0;if(n)for(;r<n;r++)C.ensureTrailingBreak(i[r]);else C.ensureTrailingBreak(t)},removeTrailingBreak:function(t){e(t).find("br[type=_moz],.k-br").remove()},ensureTrailingBreak:function(e){C.removeTrailingBreak(e);var t,i=e.lastChild,n=i&&C.name(i);(!n||"br"!=n&&"img"!=n||"br"==n&&"k-br"!=i.className)&&((t=e.ownerDocument.createElement("br")).className="k-br",e.appendChild(t))}};i.ui.editor.Dom=C}(window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("editor/serializer",["editor/dom"],function(){!function(e,t){var i=window.kendo,n=i.ui.editor,r=n.Dom,s=e.extend,o="xx-small,x-small,small,medium,large,x-large,xx-large".split(","),a=/"/g,l=/<br[^>]*>/i,d=/^\d+(\.\d*)?(px)?$/i,c=/<p>(?:&nbsp;)?<\/p>/i,u=/(\*?[-#\/\*\\\w]+(?:\[[0-9a-z_-]+\])?)\s*:\s*((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/g,h=/^sizzle-\d+/i,f=/^k-script-/i,p=/\s*onerror\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/i,m=document.createElement("div");m.innerHTML=" <hr>";var g=3===m.firstChild.nodeType;m=null;var v=e.isFunction,_={toEditableHtml:function(e){return(e=e||"").replace(/<!\[CDATA\[(.*)?\]\]>/g,"\x3c!--[CDATA[$1]]--\x3e").replace(/<(\/?)script([^>]*)>/gi,"<$1k:script$2>").replace(/<img([^>]*)>/gi,function(e){return e.replace(p,"")}).replace(/(<\/?img[^>]*>)[\r\n\v\f\t ]+/gi,"$1").replace(/^<(table|blockquote)/i,'<br class="k-br"><$1').replace(/^[\s]*(&nbsp;|\u00a0)/i,"$1").replace(/<\/(table|blockquote)>$/i,'</$1><br class="k-br">')},_fillEmptyElements:function(t){e(t).find("p,td").each(function(){var t=e(this);if(/^\s*$/g.test(t.text())&&!t.find("img,input").length){for(var n=this;n.firstChild&&3!=n.firstChild.nodeType;)n=n.firstChild;1!=n.nodeType||r.empty[r.name(n)]||(n.innerHTML=i.ui.editor.emptyElementContent)}})},_removeSystemElements:function(t){e(".k-paste-container",t).remove()},_resetOrderedLists:function(e){var t,i,n,r=e.getElementsByTagName("ol");for(t=0;t<r.length;t++)i=r[t],n=i.getAttribute("start"),i.setAttribute("start",1),n?i.setAttribute("start",n):i.removeAttribute(n)},_preventScriptExecution:function(t){e(t).find("*").each(function(){var e,t,i,n,r=this.attributes;for(t=0,i=r.length;t<i;t++)e=r[t],n=e.nodeName,e.specified&&/^on/i.test(n)&&(this.setAttribute("k-script-"+n,e.value),this.removeAttribute(n))})},htmlToDom:function(t,n,s){var o=i.support.browser,a=o.msie,l=a&&o.version<9,d="originalsrc",c="originalhref",u=s||{};return t=_.toEditableHtml(t),l&&(t=(t=(t="<br/>"+t).replace(/href\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,c+'="$1"')).replace(/src\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,d+'="$1"')),v(u.custom)&&(t=u.custom(t)||t),n.innerHTML=t,l?(r.remove(n.firstChild),e(n).find("k\\:script,script,link,img,a").each(function(){this[c]&&(this.setAttribute("href",this[c]),this.removeAttribute(c)),this[d]&&(this.setAttribute("src",this[d]),this.removeAttribute(d))})):a&&(r.normalize(n),_._resetOrderedLists(n)),_._preventScriptExecution(n),_._fillEmptyElements(n),_._removeSystemElements(n),e("table",n).addClass("k-table"),n},domToXhtml:function(n,s){function p(t){return e.grep(t,function(e){return"style"!=e.name})}function m(t){var i,n=function(t){var i,n,s,o=e.trim,l=o(t),d=[];u.lastIndex=0;for(;i=u.exec(l);)n=o(i[1].toLowerCase()),s=o(i[2]),"font-size-adjust"!=n&&"font-stretch"!=n&&(n.indexOf("color")>=0?s=r.toHex(s):n.indexOf("font")>=0?s=s.replace(a,"'"):/\burl\(/g.test(s)&&(s=s.replace(a,"")),d.push({property:n,value:s}));return d}(t);for(i=0;i<n.length;i++)y.push(n[i].property),y.push(":"),y.push(n[i].value),y.push(";")}function v(e){var t,i,n,o,a,l,d=[],c=e.attributes;for(i=0,n=c.length;i<n;i++)t=c[i],o=t.nodeName,a=t.value,l=t.specified,"value"==o&&"value"in e&&e.value?l=!0:"type"==o&&"text"==a?l=!0:"class"!=o||a?h.test(o)?l=!1:"complete"==o?l=!1:"altHtml"==o?l=!1:"start"==o&&r.is(e,"ul")?l=!1:"start"==o&&r.is(e,"ol")&&"1"==a?l=!1:o.indexOf("_moz")>=0?l=!1:f.test(o)&&(l=!!s.scripts):l=!1,l&&d.push(t);return d}function _(n,s){var o,a,l,c,u;if(s=s||v(n),r.is(n,"img")){var h=n.style.width,p=n.style.height,g=e(n);h&&d.test(h)&&(g.attr("width",parseInt(h,10)),r.unstyle(n,{width:t})),p&&d.test(p)&&(g.attr("height",parseInt(p,10)),r.unstyle(n,{height:t}))}if(s.length)for(s.sort(function(e,t){return e.nodeName>t.nodeName?1:e.nodeName<t.nodeName?-1:0}),o=0,a=s.length;o<a;o++)l=s[o],c=l.nodeName,u=l.value,"class"==c&&"k-table"==u||(c=c.replace(f,""),y.push(" "),y.push(c),y.push('="'),"style"==c?m(u||n.style.cssText):"src"==c||"href"==c?y.push(i.htmlEncode(n.getAttribute(c,2))):y.push(r.fillAttrs[c]?c:u),y.push('"'))}function b(e,t,i){for(var n=e.firstChild;n;n=n.nextSibling)!function(e,t,i){var n,o,a,l,d,c=e.nodeType;if(1==c){if(!(n=r.name(e))||r.insignificant(e))return;if(!s.scripts&&("script"==n||"k:script"==n))return;if((o=x[n])&&(void 0===o.semantic||s.semantic^o.semantic))return o.start(e),b(e,!1,o.skipEncoding),void o.end(e);y.push("<"),y.push(n),_(e),r.empty[n]?y.push(" />"):(y.push(">"),b(e,t||r.is(e,"pre")),y.push("</"),y.push(n),y.push(">"))}else if(3==c){if(function(e){if("\ufeff"===e.nodeValue){do{if(e=e.parentNode,r.is(e,"td")||1!==e.childNodes.length)return!1}while(!r.isBlock(e));return!0}return!1}(e))return void y.push("&nbsp;");l=k(e),!t&&g&&(a=e.parentNode,(d=e.previousSibling)||(d=(r.isInline(a)?a:e).previousSibling),d&&""!==d.innerHTML&&!r.isBlock(d)||(l=l.replace(/^[\r\n\v\f\t ]+/,"")),l=l.replace(/ +/," ")),y.push(i?l:r.encode(l,s))}else 4==c?(y.push("<![CDATA["),y.push(e.data),y.push("]]>")):8==c&&(e.data.indexOf("[CDATA[")<0?(y.push("\x3c!--"),y.push(e.data),y.push("--\x3e")):(y.push("<!"),y.push(e.data),y.push(">")))}(n,t,i)}function k(e){return e.nodeValue.replace(/\ufeff/g,"")}function w(){e.isFunction(s.custom)&&(y=s.custom(y)||y)}var y=[],x={iframe:{start:function(e){y.push("<iframe"),_(e),y.push(">")},end:function(){y.push("</iframe>")}},"k:script":{start:function(e){y.push("<script"),_(e),y.push(">")},end:function(){y.push("<\/script>")},skipEncoding:!0},span:{semantic:!0,start:function(t){var i=t.style,n=v(t),s=p(n);s.length&&(y.push("<span"),_(t,s),y.push(">")),"underline"==i.textDecoration&&y.push("<u>");var a=[];if(i.color&&a.push('color="'+r.toHex(i.color)+'"'),i.fontFamily&&a.push('face="'+i.fontFamily+'"'),i.fontSize){var l=e.inArray(i.fontSize,o);a.push('size="'+l+'"')}a.length&&y.push("<font "+a.join(" ")+">")},end:function(e){var t=e.style;(t.color||t.fontFamily||t.fontSize)&&y.push("</font>"),"underline"==t.textDecoration&&y.push("</u>"),p(v(e)).length&&y.push("</span>")}},strong:{semantic:!0,start:function(){y.push("<b>")},end:function(){y.push("</b>")}},em:{semantic:!0,start:function(){y.push("<i>")},end:function(){y.push("</i>")}},b:{semantic:!1,start:function(){y.push("<strong>")},end:function(){y.push("</strong>")}},i:{semantic:!1,start:function(){y.push("<em>")},end:function(){y.push("</em>")}},u:{semantic:!1,start:function(){y.push('<span style="text-decoration:underline;">')},end:function(){y.push("</span>")}},font:{semantic:!1,start:function(e){y.push('<span style="');var t=e.getAttribute("color"),i=o[e.getAttribute("size")],n=e.getAttribute("face");t&&(y.push("color:"),y.push(r.toHex(t)),y.push(";")),n&&(y.push("font-family:"),y.push(n),y.push(";")),i&&(y.push("font-size:"),y.push(i),y.push(";")),y.push('">')},end:function(){y.push("</span>")}}};return x.script=x["k:script"],void 0===(s=s||{}).semantic&&(s.semantic=!0),function(e){var t=e.childNodes.length;return t&&3==e.firstChild.nodeType&&(1==t||2==t&&r.insignificant(e.lastChild))}(n)?(y=r.encode(k(n.firstChild).replace(/[\r\n\v\f\t ]+/," "),s),w(),y):(b(n),y=y.join(""),w(),""===y.replace(l,"").replace(c,"")?"":y)}};s(n,{Serializer:_})}(window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("editor/range",["editor/serializer"],function(){!function(e){function t(e,t){(function(e){try{return function(e,t,i,n){if(e==t)return n-i;var r=t;for(;r&&r.parentNode!=e;)r=r.parentNode;if(r)return u(r)-i;r=e;for(;r&&r.parentNode!=t;)r=r.parentNode;if(r)return n-u(r)-1;var s=c.commonAncestor(e,t),o=e;for(;o&&o.parentNode!=s;)o=o.parentNode;o||(o=s);var a=t;for(;a&&a.parentNode!=s;)a=a.parentNode;a||(a=s);if(o==a)return 0;return u(a)-u(o)}(e.startContainer,e.endContainer,e.startOffset,e.endOffset)<0}catch(e){return!0}})(e)&&(t?(e.commonAncestorContainer=e.endContainer=e.startContainer,e.endOffset=e.startOffset):(e.commonAncestorContainer=e.startContainer=e.endContainer,e.startOffset=e.endOffset),e.collapsed=!0)}function i(e){e.collapsed=e.startContainer==e.endContainer&&e.startOffset==e.endOffset;for(var t=e.startContainer;t&&t!=e.endContainer&&!c.isAncestorOf(t,e.endContainer);)t=t.parentNode;e.commonAncestorContainer=t}function n(e,t,i){var n,r=t[i?"startContainer":"endContainer"],s=t[i?"startOffset":"endOffset"],o=0,a=h(r),l=a?r:r.childNodes[s]||null,d=a?r.parentNode:r,u=t.ownerDocument,f=u.body.createTextRange();3!=r.nodeType&&4!=r.nodeType||(o=s),d||(d=u.body),"img"==d.nodeName.toLowerCase()?(f.moveToElementText(d),f.collapse(!1),e.setEndPoint(i?"StartToStart":"EndToStart",f)):(n=d.insertBefore(c.create(u,"a"),l),f.moveToElementText(n),c.remove(n),f[i?"moveStart":"moveEnd"]("character",o),f.collapse(!1),e.setEndPoint(i?"StartToStart":"EndToStart",f))}function r(e,t,i,n){var r,s,o,a,l,d,f,p=c.create(t.ownerDocument,"a"),m=e.duplicate(),g=n?"StartToStart":"StartToEnd",v=!1;p.innerHTML="\ufeff",m.collapse(n),s=m.parentElement(),c.isAncestorOrSelf(i,s)||(s=i);do{v?s.insertBefore(p,p.previousSibling):(s.appendChild(p),v=!0),m.moveToElementText(p)}while((r=m.compareEndPoints(g,e))>0&&p.previousSibling);o=p.nextSibling,-1==r&&h(o)?(m.setEndPoint(n?"EndToStart":"EndToEnd",e),c.remove(p),d=[o,m.text.length]):(a=!n&&p.previousSibling,l=n&&p.nextSibling,h(l)?d=[l,0]:h(a)?d=[a,a.length]:(f=u(p),d=s.nextSibling&&f==s.childNodes.length-1?[s.nextSibling,0]:[s,f]),c.remove(p)),t[n?"setStart":"setEnd"].apply(t,d)}var s=window.kendo,o=s.Class,a=e.extend,l=s.ui.editor,d=s.support.browser,c=l.Dom,u=c.findNodeIndex,h=c.isDataNode,f=c.findClosestAncestor,p=c.getNodeLength,m=c.normalize,g={selectionFromWindow:function(e){return"getSelection"in e?e.getSelection():new b(e.document)},selectionFromRange:function(e){var t=C.documentFromRange(e);return g.selectionFromDocument(t)},selectionFromDocument:function(e){return g.selectionFromWindow(c.windowFromDocument(e))}},v=o.extend({init:function(t){e.extend(this,{ownerDocument:t,startContainer:t,endContainer:t,commonAncestorContainer:t,startOffset:0,endOffset:0,collapsed:!0})},setStart:function(e,n){this.startContainer=e,this.startOffset=n,i(this),t(this,!0)},setEnd:function(e,n){this.endContainer=e,this.endOffset=n,i(this),t(this,!1)},setStartBefore:function(e){this.setStart(e.parentNode,u(e))},setStartAfter:function(e){this.setStart(e.parentNode,u(e)+1)},setEndBefore:function(e){this.setEnd(e.parentNode,u(e))},setEndAfter:function(e){this.setEnd(e.parentNode,u(e)+1)},selectNode:function(e){this.setStartBefore(e),this.setEndAfter(e)},selectNodeContents:function(e){this.setStart(e,0),this.setEnd(e,e[1===e.nodeType?"childNodes":"nodeValue"].length)},collapse:function(e){e?this.setEnd(this.startContainer,this.startOffset):this.setStart(this.endContainer,this.endOffset)},deleteContents:function(){var e=this.cloneRange();this.startContainer!=this.commonAncestorContainer&&this.setStartAfter(f(this.commonAncestorContainer,this.startContainer)),this.collapse(!0),function e(t){for(;t.next();)t.hasPartialSubtree()?e(t.getSubtreeIterator()):t.remove()}(new _(e))},cloneContents:function(){var e=C.documentFromRange(this);return function t(i){for(var n,r=e.createDocumentFragment();n=i.next();)n=n.cloneNode(!i.hasPartialSubtree()),i.hasPartialSubtree()&&n.appendChild(t(i.getSubtreeIterator())),r.appendChild(n);return r}(new _(this))},extractContents:function(){var e=this,t=e.cloneRange();e.startContainer!=e.commonAncestorContainer&&e.setStartAfter(f(e.commonAncestorContainer,e.startContainer)),e.collapse(!0);var i=C.documentFromRange(e);return function t(n){for(var r,s=i.createDocumentFragment();r=n.next();)n.hasPartialSubtree()?(r=r.cloneNode(!1)).appendChild(t(n.getSubtreeIterator())):n.remove(e.originalRange),s.appendChild(r);return s}(new _(t))},insertNode:function(e){h(this.startContainer)?(this.startOffset!=this.startContainer.nodeValue.length&&c.splitDataNode(this.startContainer,this.startOffset),c.insertAfter(e,this.startContainer)):c.insertAt(this.startContainer,e,this.startOffset),this.setStart(this.startContainer,this.startOffset)},cloneRange:function(){return e.extend(new v(this.ownerDocument),{startContainer:this.startContainer,endContainer:this.endContainer,commonAncestorContainer:this.commonAncestorContainer,startOffset:this.startOffset,endOffset:this.endOffset,collapsed:this.collapsed,originalRange:this})},toString:function(){var e=this.startContainer.nodeName,t=this.endContainer.nodeName;return["#text"==e?this.startContainer.nodeValue:e,"(",this.startOffset,") : ","#text"==t?this.endContainer.nodeValue:t,"(",this.endOffset,")"].join("")}});v.fromNode=function(e){return new v(e.ownerDocument)};var _=o.extend({init:function(t){if(e.extend(this,{range:t,_current:null,_next:null,_end:null}),!t.collapsed){var i=t.commonAncestorContainer;this._next=t.startContainer!=i||h(t.startContainer)?f(i,t.startContainer):t.startContainer.childNodes[t.startOffset],this._end=t.endContainer!=i||h(t.endContainer)?f(i,t.endContainer).nextSibling:t.endContainer.childNodes[t.endOffset]}},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return this._next=this._current&&this._current.nextSibling!=this._end?this._current.nextSibling:null,h(this._current)&&(this.range.endContainer==this._current&&(e=e.cloneNode(!0)).deleteData(this.range.endOffset,e.length-this.range.endOffset),this.range.startContainer==this._current&&(e=e.cloneNode(!0)).deleteData(0,this.range.startOffset)),e},traverse:function(e){function t(){return n._current=n._next,n._next=n._current&&n._current.nextSibling!=n._end?n._current.nextSibling:null,n._current}for(var i,n=this;i=t();)n.hasPartialSubtree()?n.getSubtreeIterator().traverse(e):e(i);return i},remove:function(e){var t,i,n,r=this.range.startContainer==this._current,s=this.range.endContainer==this._current;if(h(this._current)&&(r||s))t=r?this.range.startOffset:0,i=s?this.range.endOffset:this._current.length,n=i-t,e&&(r||s)&&(this._current==e.startContainer&&t<=e.startOffset&&(e.startOffset-=n),this._current==e.endContainer&&i<=e.endOffset&&(e.endOffset-=n)),this._current.deleteData(t,n);else{var o=this._current.parentNode;if(e&&(this.range.startContainer==o||this.range.endContainer==o)){var a=u(this._current);o==e.startContainer&&a<=e.startOffset&&(e.startOffset-=1),o==e.endContainer&&a<e.endOffset&&(e.endOffset-=1)}c.remove(this._current)}},hasPartialSubtree:function(){return!h(this._current)&&(c.isAncestorOrSelf(this._current,this.range.startContainer)||c.isAncestorOrSelf(this._current,this.range.endContainer))},getSubtreeIterator:function(){var e=this.range.cloneRange();return e.selectNodeContents(this._current),c.isAncestorOrSelf(this._current,this.range.startContainer)&&e.setStart(this.range.startContainer,this.range.startOffset),c.isAncestorOrSelf(this._current,this.range.endContainer)&&e.setEnd(this.range.endContainer,this.range.endOffset),new _(e)}}),b=o.extend({init:function(e){this.ownerDocument=e,this.rangeCount=1},addRange:function(e){var t=this.ownerDocument.body.createTextRange();n(t,e,!1),n(t,e,!0),t.select()},removeAllRanges:function(){var e=this.ownerDocument.selection;"None"!=e.type&&e.empty()},getRangeAt:function(){var e,t,i=new v(this.ownerDocument),n=this.ownerDocument.selection;try{if(e=n.createRange(),(e.item?e.item(0):e.parentElement()).ownerDocument!=this.ownerDocument)return i}catch(e){return i}if("Control"==n.type)i.selectNode(e.item(0));else{t=function(e){var t=e.duplicate(),i=e.duplicate();return t.collapse(!0),i.collapse(!1),c.commonAncestor(e.parentElement(),t.parentElement(),i.parentElement())}(e),r(e,i,t,!0),r(e,i,t,!1),9==i.startContainer.nodeType&&i.setStart(i.endContainer,i.startOffset),9==i.endContainer.nodeType&&i.setEnd(i.startContainer,i.endOffset),0===e.compareEndPoints("StartToEnd",e)&&i.collapse(!1);var s=i.startContainer,o=i.endContainer,a=this.ownerDocument.body;if(!(i.collapsed||0!==i.startOffset||i.endOffset!=p(i.endContainer)||s==o&&h(s)&&s.parentNode==a)){for(var l=!1,d=!1;0===u(s)&&s==s.parentNode.firstChild&&s!=a;)s=s.parentNode,l=!0;for(;u(o)==p(o.parentNode)-1&&o==o.parentNode.lastChild&&o!=a;)o=o.parentNode,d=!0;s==a&&o==a&&l&&d&&(i.setStart(s,0),i.setEnd(o,p(a)))}}return i}}),k=o.extend({init:function(e){this.enumerate=function(){function t(e){if(c.is(e,"img")||3==e.nodeType&&(!c.isEmptyspace(e)||"\ufeff"==e.nodeValue))i.push(e);else for(e=e.firstChild;e;)t(e),e=e.nextSibling}var i=[];return new _(e).traverse(t),i}}}),w=o.extend({init:function(e,t){this.range=e,this.rootNode=C.documentFromRange(e),this.body=t||this.getEditable(e),"body"!=c.name(this.body)&&(this.rootNode=this.body),this.html=this.body.innerHTML,this.startContainer=this.nodeToPath(e.startContainer),this.endContainer=this.nodeToPath(e.endContainer),this.startOffset=this.offset(e.startContainer,e.startOffset),this.endOffset=this.offset(e.endContainer,e.endOffset)},index:function(e){for(var t=0,i=e.nodeType;e=e.previousSibling;){var n=e.nodeType;3==n&&i==n||t++,i=n}return t},getEditable:function(e){for(var t=e.commonAncestorContainer;t&&(3==t.nodeType||t.attributes&&!t.attributes.contentEditable);)t=t.parentNode;return t},restoreHtml:function(){this.body.innerHTML=this.html},offset:function(e,t){if(3==e.nodeType)for(;(e=e.previousSibling)&&3==e.nodeType;)t+=e.nodeValue.length;return t},nodeToPath:function(e){for(var t=[];e!=this.rootNode;)t.push(this.index(e)),e=e.parentNode;return t},toRangePoint:function(e,t,i,n){for(var r=this.rootNode,s=i.length,o=n;s--;)r=r.childNodes[i[s]];for(;r&&3==r.nodeType&&r.nodeValue.length<o;)o-=r.nodeValue.length,r=r.nextSibling;r&&o>=0&&e[t?"setStart":"setEnd"](r,o)},toRange:function(){var e=this.range.cloneRange();return this.toRangePoint(e,!0,this.startContainer,this.startOffset),this.toRangePoint(e,!1,this.endContainer,this.endOffset),e}}),y=o.extend({init:function(){this.caret=null},addCaret:function(e){return this.caret=c.create(C.documentFromRange(e),"span",{className:"k-marker"}),e.insertNode(this.caret),e.selectNode(this.caret),this.caret},removeCaret:function(e){var t=this.caret.previousSibling,i=0;t&&(i=h(t)?t.nodeValue.length:u(t));var n=this.caret.parentNode,r=t?u(t):0;c.remove(this.caret),m(n);var s=n.childNodes[r];if(h(s))e.setStart(s,i);else if(s){var o=c.lastTextNode(s);o?e.setStart(o,o.nodeValue.length):e[t?"setStartAfter":"setStartBefore"](s)}else d.msie||n.innerHTML||(n.innerHTML='<br _moz_dirty="" />'),e.selectNodeContents(n);e.collapse(!0)},add:function(e,t){var i=e.collapsed&&!C.isExpandable(e),n=C.documentFromRange(e);t&&e.collapsed&&(this.addCaret(e),e=C.expand(e));var r=e.cloneRange();if(r.collapse(!1),this.end=c.create(n,"span",{className:"k-marker"}),r.insertNode(this.end),(r=e.cloneRange()).collapse(!0),this.start=this.end.cloneNode(!0),r.insertNode(this.start),this._removeDeadMarkers(this.start,this.end),i){var s=n.createTextNode("\ufeff");c.insertAfter(s.cloneNode(),this.start),c.insertBefore(s,this.end)}return m(e.commonAncestorContainer),e.setStartBefore(this.start),e.setEndAfter(this.end),e},_removeDeadMarkers:function(e,t){e.previousSibling&&"\ufeff"==e.previousSibling.nodeValue&&c.remove(e.previousSibling),t.nextSibling&&"\ufeff"==t.nextSibling.nodeValue&&c.remove(t.nextSibling)},_normalizedIndex:function(e){for(var t=u(e),i=e;i.previousSibling;)3==i.nodeType&&3==i.previousSibling.nodeType&&t--,i=i.previousSibling;return t},remove:function(e){var t,i,n=this.start,r=this.end;for(m(e.commonAncestorContainer);!n.nextSibling&&n.parentNode;)n=n.parentNode;for(;!r.previousSibling&&r.parentNode;)r=r.parentNode;t=n.previousSibling&&3==n.previousSibling.nodeType&&n.nextSibling&&3==n.nextSibling.nodeType,i=r.previousSibling&&3==r.previousSibling.nodeType&&r.nextSibling&&3==r.nextSibling.nodeType,n=n.nextSibling,r=r.previousSibling;var s=!1,o=!1;if(n==this.end&&(o=!!this.start.previousSibling,n=r=this.start.previousSibling||this.end.nextSibling,s=!0),c.remove(this.start),c.remove(this.end),!n||!r)return e.selectNodeContents(e.commonAncestorContainer),void e.collapse(!0);var a=s?h(n)?n.nodeValue.length:n.childNodes.length:0,l=h(r)?r.nodeValue.length:r.childNodes.length;if(3==n.nodeType)for(;n.previousSibling&&3==n.previousSibling.nodeType;)n=n.previousSibling,a+=n.nodeValue.length;if(3==r.nodeType)for(;r.previousSibling&&3==r.previousSibling.nodeType;)r=r.previousSibling,l+=r.nodeValue.length;var d=n.parentNode,u=r.parentNode,f=this._normalizedIndex(n),p=this._normalizedIndex(r);m(d),3==n.nodeType&&(n=d.childNodes[f]),m(u),3==r.nodeType&&(r=u.childNodes[p]),s?(3==n.nodeType?e.setStart(n,a):e[o?"setStartAfter":"setStartBefore"](n),e.collapse(!0)):(3==n.nodeType?e.setStart(n,a):e.setStartBefore(n),3==r.nodeType?e.setEnd(r,l):e.setEndAfter(r)),this.caret&&this.removeCaret(e)}}),x=/[\u0009-\u000d]|\u0020|\u00a0|\ufeff|\.|,|;|:|!|\(|\)|\?/,C={nodes:function(e){var t=C.textNodes(e);return t.length||(e.selectNodeContents(e.commonAncestorContainer),(t=C.textNodes(e)).length||(t=c.significantChildNodes(e.commonAncestorContainer))),t},textNodes:function(e){return new k(e).enumerate()},documentFromRange:function(e){var t=e.startContainer;return 9==t.nodeType?t:t.ownerDocument},createRange:function(e){return d.msie&&d.version<9?new v(e):e.createRange()},selectRange:function(e){var t=C.image(e);t&&(e.setStartAfter(t),e.setEndAfter(t));var i=g.selectionFromRange(e);i.removeAllRanges(),i.addRange(e)},stringify:function(e){return s.format("{0}:{1} - {2}:{3}",c.name(e.startContainer),e.startOffset,c.name(e.endContainer),e.endOffset)},split:function(e,t,i){function n(n){var r=e.cloneRange();r.collapse(n),r[n?"setStartBefore":"setEndAfter"](t);var s=r.extractContents();i&&(s=c.trim(s)),c[n?"insertBefore":"insertAfter"](s,t)}n(!0),n(!1)},mapAll:function(t,i){var n=[];return new _(t).traverse(function(t){var r=i(t);r&&e.inArray(r,n)<0&&n.push(r)}),n},getAll:function(e,t){var i=t;return"string"==typeof t&&(t=function(e){return c.is(e,i)}),C.mapAll(e,function(e){if(t(e))return e})},getMarkers:function(e){return C.getAll(e,function(e){return"k-marker"==e.className})},image:function(e){var t=C.getAll(e,"img");if(1==t.length)return t[0]},isStartOf:function(e,t){if(0!==e.startOffset)return!1;for(var i=e.cloneRange();0===i.startOffset&&i.startContainer!=t;){for(var n=c.findNodeIndex(i.startContainer),r=i.startContainer.parentNode;n>0&&r[n-1]&&c.insignificant(r[n-1]);)n--;i.setStart(r,n)}return 0===i.startOffset&&i.startContainer==t},isEndOf:function(e,t){var i=e.cloneRange();i.collapse(!1);var n=i.startContainer;c.isDataNode(n)&&i.startOffset==c.getNodeLength(n)&&(i.setStart(n.parentNode,c.findNodeIndex(n)+1),i.collapse(!0)),i.setEnd(t,c.getNodeLength(t));var r=[];return new _(i).traverse(function(e){c.insignificant(e)||r.push(e)}),!r.length},wrapSelectedElements:function(e){function t(e,t){var i=c.getNodeLength(t);if(e==i)return!0;for(var n=e;n<i;n++)if(!c.insignificant(t.childNodes[n]))return!1;return!0}for(var i=c.editableParent(e.startContainer),n=c.editableParent(e.endContainer);0===e.startOffset&&e.startContainer!=i;)e.setStart(e.startContainer.parentNode,c.findNodeIndex(e.startContainer));for(;t(e.endOffset,e.endContainer)&&e.endContainer!=n;)e.setEnd(e.endContainer.parentNode,c.findNodeIndex(e.endContainer)+1);return e},expand:function(e){var t=e.cloneRange(),i=t.startContainer.childNodes[0===t.startOffset?0:t.startOffset-1],n=t.endContainer.childNodes[t.endOffset];if(!h(i)||!h(n))return t;var r=i.nodeValue,s=n.nodeValue;if(!r||!s)return t;var o=r.split("").reverse().join("").search(x),a=s.search(x);return o&&a?(a=-1==a?s.length:a,o=-1==o?0:r.length-o,t.setStart(i,o),t.setEnd(n,a),t):t},isExpandable:function(e){var t=e.startContainer,i=C.documentFromRange(e);if(t==i||t==i.body)return!1;var n=e.cloneRange(),r=t.nodeValue;if(!r)return!1;var s=r.substring(0,n.startOffset),o=r.substring(n.startOffset),a=0,l=0;return s&&(a=s.split("").reverse().join("").search(x)),o&&(l=o.search(x)),a&&l}};a(l,{SelectionUtils:g,W3CRange:v,RangeIterator:_,W3CSelection:b,RangeEnumerator:k,RestorePoint:w,Marker:y,RangeUtils:C})}(window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("editor/system",["editor/range"],function(){!function(e){function t(e,t){var i=e.selectionRestorePoint=new c(e.getRange()),n=new p(t,i);return n.editor=e,e.undoRedoStack.push(n),i}var i=window.kendo,n=i.Class,r=i.ui.editor,s=r.EditorUtils,o=s.registerTool,a=r.Dom,l=r.Tool,d=r.ToolTemplate,c=r.RestorePoint,u=r.Marker,h=e.extend,f=n.extend({init:function(e){this.options=e,this.restorePoint=new c(e.range),this.marker=new u,this.formatter=e.formatter},getRange:function(){return this.restorePoint.toRange()},lockRange:function(e){return this.marker.add(this.getRange(),e)},releaseRange:function(e){this.marker.remove(e),this.editor.selectRange(e)},undo:function(){var e=this.restorePoint;e.restoreHtml(),this.editor.selectRange(e.toRange())},redo:function(){this.exec()},createDialog:function(t,n){var r=this.editor;return e(t).appendTo(document.body).kendoWindow(h({},r.options.dialogOptions,n)).closest(".k-window").toggleClass("k-rtl",i.support.isRtl(r.wrapper)).end()},exec:function(){var e=this.lockRange(!0);this.formatter.editor=this.editor,this.formatter.toggle(e),this.releaseRange(e)}}),p=n.extend({init:function(e,t){this.body=e.body,this.startRestorePoint=e,this.endRestorePoint=t},redo:function(){this.body.innerHTML=this.endRestorePoint.html,this.editor.selectRange(this.endRestorePoint.toRange())},undo:function(){this.body.innerHTML=this.startRestorePoint.html,this.editor.selectRange(this.startRestorePoint.toRange())}}),m=f.extend({init:function(e){f.fn.init.call(this,e),this.managesUndoRedo=!0},exec:function(){var e=this.editor,t=this.options,i=t.range,n=e.body,r=new c(i,n),s=t.html||t.value||"";e.selectRange(i),e.clipboard.paste(s,t),t.postProcess&&t.postProcess(e,e.getRange());var o=new p(r,new c(e.getRange(),n));o.editor=e,e.undoRedoStack.push(o),e.focus()}}),g=l.extend({initialize:function(e,t){var i=t.editor,n=this.options,s=n.items?n.items:i.options.insertHtml;this._selectBox=new r.SelectBox(e,{dataSource:s,dataTextField:"text",dataValueField:"value",change:function(){l.exec(i,"insertHtml",this.value())},title:i.options.messages.insertHtml,highlightFirst:!1})},command:function(e){return new m(e)},update:function(e){var t=e.data("kendoSelectBox")||e.find("select").data("kendoSelectBox");t.close(),t.value(t.options.title)}}),v=n.extend({init:function(e){this.editor=e},keydown:function(i){var n=this,r=n.editor,s=r.keyboard,o=s.isTypingKey(i),a=h(e.Event(),i);if(n.editor.trigger("keydown",a),a.isDefaultPrevented())return i.preventDefault(),!0;if(!a.isDefaultPrevented()&&o&&!s.isTypingInProgress()){var l=r.getRange();return n.startRestorePoint=new c(l),s.startTyping(function(){n.endRestorePoint=t(r,n.startRestorePoint)}),!0}return!1},keyup:function(e){var t=this.editor.keyboard;return this.editor.trigger("keyup",e),!!t.isTypingInProgress()&&(t.endTyping(),!0)}}),_=n.extend({init:function(e){this.editor=e},_addCaret:function(e){var t=a.create(this.editor.document,"a");return a.insertAt(e,t,0),t},_restoreCaret:function(e){var t=this.editor.createRange();t.setStartAfter(e),t.collapse(!0),this.editor.selectRange(t),a.remove(e)},_handleDelete:function(e){var t=e.endContainer,i=a.closestEditableOfType(t,a.blockElements);if(i&&r.RangeUtils.isEndOf(e,i)){var n=a.next(i);if(!n||"p"!=a.name(n))return!1;var s=this._addCaret(n);return this._merge(i,n),this._restoreCaret(s),!0}return!1},_cleanBomBefore:function(e){for(var t=e.startOffset,i=e.startContainer,n=i.nodeValue,r=0;t-r>=0&&"\ufeff"==n[t-r-1];)r++;r>0&&(i.deleteData(t-r,r),e.setStart(i,Math.max(0,t-r)),e.collapse(!0),this.editor.selectRange(e))},_handleBackspace:function(e){var t=e.startContainer,i=a.closestEditableOfType(t,["li"]),n=a.closestEditableOfType(t,"p,h1,h2,h3,h4,h5,h6".split(","));if(a.isDataNode(t)&&this._cleanBomBefore(e),n&&n.previousSibling&&r.RangeUtils.isStartOf(e,n)){var s=n.previousSibling,o=this._addCaret(n);return this._merge(s,n),this._restoreCaret(o),!0}if(i&&r.RangeUtils.isStartOf(e,i)){var l=i.firstChild;l||(i.innerHTML=r.emptyElementContent,l=i.firstChild);var d=new r.ListFormatter(a.name(i.parentNode),"p");return e.selectNodeContents(i),d.toggle(e),a.insignificant(l)?e.setStartBefore(l):e.setStart(l,0),this.editor.selectRange(e),!0}return!1},_handleSelection:function(t){var i=t.commonAncestorContainer,n=a.closest(i,"table"),s=r.emptyElementContent;/t(able|body)/i.test(a.name(i))&&t.selectNode(n);var o=new u;o.add(t,!1),t.setStartAfter(o.start),t.setEndBefore(o.end);var l=t.startContainer,d=t.endContainer;return t.deleteContents(),n&&""===e(n).text()&&(t.selectNode(n),t.deleteContents()),i=t.commonAncestorContainer,"p"===a.name(i)&&""===i.innerHTML&&(i.innerHTML=s,t.setStart(i,0)),this._join(l,d),a.insertAfter(this.editor.document.createTextNode("\ufeff"),o.start),o.remove(t),l=t.startContainer,"tr"==a.name(l)&&(l=l.childNodes[Math.max(0,t.startOffset-1)],t.setStart(l,a.getNodeLength(l))),t.collapse(!0),this.editor.selectRange(t),!0},_root:function(e){for(;e&&e.parentNode&&"body"!=a.name(e.parentNode);)e=e.parentNode;return e},_join:function(e,t){e=this._root(e),t=this._root(t),e!=t&&a.is(t,"p")&&this._merge(e,t)},_merge:function(e,t){for(a.removeTrailingBreak(e);t.firstChild;)1==e.nodeType?e.appendChild(t.firstChild):e.parentNode.appendChild(t.firstChild);a.remove(t)},keydown:function(e){var n,r,s=this.editor.getRange(),o=e.keyCode,a=i.keys,l=o===a.BACKSPACE,d=o==a.DELETE;!l&&!d||s.collapsed?l?n="_handleBackspace":d&&(n="_handleDelete"):n="_handleSelection",n&&(r=new c(s),this[n](s)&&(e.preventDefault(),t(this.editor,r)))},keyup:e.noop}),b=n.extend({init:function(e){this.editor=e,this.systemCommandIsInProgress=!1},createUndoCommand:function(){this.startRestorePoint=this.endRestorePoint=t(this.editor,this.startRestorePoint)},changed:function(){return!!this.startRestorePoint&&this.startRestorePoint.html!=this.editor.body.innerHTML},keydown:function(e){var t=this.editor,i=t.keyboard;return i.isModifierKey(e)?(i.isTypingInProgress()&&i.endTyping(!0),this.startRestorePoint=new c(t.getRange()),!0):!!i.isSystem(e)&&(this.systemCommandIsInProgress=!0,this.changed()&&(this.systemCommandIsInProgress=!1,this.createUndoCommand()),!0)},keyup:function(){return!(!this.systemCommandIsInProgress||!this.changed())&&(this.systemCommandIsInProgress=!1,this.createUndoCommand(),!0)}}),k=n.extend({init:function(e){this.handlers=e,this.typingInProgress=!1},isCharacter:function(e){return e>=48&&e<=90||e>=96&&e<=111||e>=186&&e<=192||e>=219&&e<=222||229==e},toolFromShortcut:function(t,i){var n,r,s=String.fromCharCode(i.keyCode);for(n in t)if(((r=e.extend({ctrl:!1,alt:!1,shift:!1},t[n].options)).key==s||r.key==i.keyCode)&&r.ctrl==i.ctrlKey&&r.alt==i.altKey&&r.shift==i.shiftKey)return n},toolsFromShortcut:function(t,i){var n,r,s=String.fromCharCode(i.keyCode),o=[],a=function(e){return e==s||e==i.keyCode};for(n in t)r=e.extend({ctrl:!1,alt:!1,shift:!1},t[n].options),(e.isArray(r.key)?e.grep(r.key,a).length>0:a(r.key))&&r.ctrl==i.ctrlKey&&r.alt==i.altKey&&r.shift==i.shiftKey&&o.push(t[n]);return o},isTypingKey:function(e){var t=e.keyCode;return this.isCharacter(t)&&!e.ctrlKey&&!e.altKey||32==t||13==t||8==t||46==t&&!e.shiftKey&&!e.ctrlKey&&!e.altKey},isModifierKey:function(e){var t=e.keyCode;return 17==t&&!e.shiftKey&&!e.altKey||16==t&&!e.ctrlKey&&!e.altKey||18==t&&!e.ctrlKey&&!e.shiftKey},isSystem:function(e){return 46==e.keyCode&&e.ctrlKey&&!e.altKey&&!e.shiftKey},startTyping:function(e){this.onEndTyping=e,this.typingInProgress=!0},stopTyping:function(){this.typingInProgress&&this.onEndTyping&&this.onEndTyping(),this.typingInProgress=!1},endTyping:function(t){this.clearTimeout(),t?this.stopTyping():this.timeout=window.setTimeout(e.proxy(this.stopTyping,this),1e3)},isTypingInProgress:function(){return this.typingInProgress},clearTimeout:function(){window.clearTimeout(this.timeout)},notify:function(e,t){var i,n=this.handlers;for(i=0;i<n.length&&!n[i][t](e);i++);},keydown:function(e){this.notify(e,"keydown")},keyup:function(e){this.notify(e,"keyup")}}),w=n.extend({init:function(e){this.editor=e;var t=e.options.pasteCleanup;this.cleaners=[new x(t),new C(t),new S(t),new T(t),new F(t),new E(t),new I(t),new M(t)]},htmlToFragment:function(e){var t=this.editor,i=t.document,n=a.create(i,"div"),r=i.createDocumentFragment();for(n.innerHTML=e;n.firstChild;)r.appendChild(n.firstChild);return r},isBlock:function(e){return/<(div|p|ul|ol|table|h[1-6])/i.test(e)},_startModification:function(){var e,t,i=this.editor;if(!this._inProgress)return this._inProgress=!0,e=i.getRange(),t=new c(e),a.persistScrollTop(i.document),{range:e,restorePoint:t}},_endModification:function(e){t(this.editor,e.restorePoint),this.editor._selectionChange(),this._inProgress=!1},_contentModification:function(e,t){var i=this,n=i.editor,r=i._startModification();r&&(e.call(i,n,r.range),setTimeout(function(){t.call(i,n,r.range),i._endModification(r)}))},_removeBomNodes:function(e){for(var t=r.RangeUtils.textNodes(e),i=0;i<t.length;i++)t[i].nodeValue=a.stripBom(t[i].nodeValue)},_onBeforeCopy:function(e){var t=new u;t.add(e),this._removeBomNodes(e),t.remove(e),this.editor.selectRange(e)},oncopy:function(){this._onBeforeCopy(this.editor.getRange())},oncut:function(){this._onBeforeCopy(this.editor.getRange()),this._contentModification(e.noop,e.noop)},_fileToDataURL:function(t){var i=e.Deferred(),n=new FileReader;return t instanceof window.File||!t.getAsFile||(t=t.getAsFile()),n.onload=e.proxy(i.resolve,i),n.readAsDataURL(t),i.promise()},_triggerPaste:function(e,t){var i={html:e||""};i.html=i.html.replace(/\ufeff/g,""),this.editor.trigger("paste",i),this.paste(i.html,t||{})},_handleImagePaste:function(t){if("FileReader"in window){var i=t.clipboardData||t.originalEvent.clipboardData||window.clipboardData||{},n=i.items||i.files;if(n){var r=e.grep(n,function(e){return/^image\//i.test(e.type)}),s=e.grep(n,function(e){return/^text\/html/i.test(e.type)});if(!s.length&&r.length){var o=this._startModification();if(o)return e.when.apply(e,e.map(r,this._fileToDataURL)).done(e.proxy(function(){var t=Array.prototype.slice.call(arguments),i=e.map(t,function(e){return'<img src="'+e.target.result+'" />'}).join("");this._triggerPaste(i),this._endModification(o)},this)),!0}}}},onpaste:function(t){this._handleImagePaste(t)?t.preventDefault():this._contentModification(function(n,r){var s=a.create(n.document,"div",{className:"k-paste-container",innerHTML:"\ufeff"}),o=i.support.browser;if(n.body.appendChild(s),o.msie&&o.version<11){t.preventDefault();var l=n.createRange();l.selectNodeContents(s),n.selectRange(l);var d=n.document.body.createTextRange();d.moveToElementText(s),e(n.body).unbind("paste"),d.execCommand("Paste"),e(n.body).bind("paste",e.proxy(this.onpaste,this))}else{var c=n.createRange();c.selectNodeContents(s),n.selectRange(c)}r.deleteContents()},function(t,i){var n,r="";t.selectRange(i),(n=e(t.body).children(".k-paste-container")).each(function(){var e=this.lastChild;e&&a.is(e,"br")&&a.remove(e),r+=this.innerHTML}),n.remove(),this._triggerPaste(r,{clean:!0})})},splittableParent:function(e,t){var i,n;if(e)return a.closestEditableOfType(t,["p","ul","ol"])||t.parentNode;if(i=t.parentNode,n=t.ownerDocument.body,a.isInline(i))for(;i.parentNode!=n&&!a.isBlock(i.parentNode);)i=i.parentNode;return i},paste:function(t,i){var n,s,o=this.editor;for(i=h({clean:!1,split:!0},i),n=0,s=this.cleaners.length;n<s;n++)this.cleaners[n].applicable(t)&&(t=this.cleaners[n].clean(t));i.clean&&(t=(t=t.replace(/(<br>(\s|&nbsp;)*)+(<\/?(div|p|li|col|t))/gi,"$3")).replace(/<(a|span)[^>]*><\/\1>/gi,"")),t=t.replace(/^<li/i,"<ul><li").replace(/li>$/g,"li></ul>");var l=this.isBlock(t);o.focus();var d=o.getRange();d.deleteContents(),d.startContainer==o.document&&d.selectNodeContents(o.body);var c=new u,f=c.addCaret(d),p=this.splittableParent(l,f),m=!1,g=p!=o.body&&!a.is(p,"td");i.split&&g&&(l||a.isInline(p))&&(d.selectNode(f),r.RangeUtils.split(d,p,!0),m=!0);var v=this.htmlToFragment(t);if(v.firstChild&&"k-paste-container"===v.firstChild.className){var _=[];for(n=0,s=v.childNodes.length;n<s;n++)_.push(v.childNodes[n].innerHTML);v=this.htmlToFragment(_.join("<br />"))}if(e(v.childNodes).filter("table").addClass("k-table").end().find("table").addClass("k-table"),d.insertNode(v),p=this.splittableParent(l,f),m){for(;f.parentNode!=p;)a.unwrap(f.parentNode);a.unwrap(f.parentNode)}a.normalize(d.commonAncestorContainer),f.style.display="inline",a.restoreScrollTop(o.document),a.scrollTo(f),c.removeCaret(d);var b=d.commonAncestorContainer.parentNode;d.collapsed&&"tbody"==a.name(b)&&(d.setStartAfter(e(b).closest("table")[0]),d.collapse(!0)),o.selectRange(d)}}),y=n.extend({init:function(e){this.options=e||{},this.replacements=[]},clean:function(e,t){var i,n,r=t||this.replacements;for(i=0,n=r.length;i<n;i+=2)e=e.replace(r[i],r[i+1]);return e}}),x=y.extend({init:function(e){y.fn.init.call(this,e),this.replacements=[/<(\/?)script([^>]*)>/i,"<$1telerik:script$2>"]},applicable:function(e){return!this.options.none&&/<script[^>]*>/i.test(e)}}),C=y.extend({init:function(e){y.fn.init.call(this,e);this.replacements=[/<span\s+class="Apple-tab-span"[^>]*>\s*<\/span>/gi," ",/\t/gi," ",/&nbsp;&nbsp; &nbsp;/gi," "]},applicable:function(e){return/&nbsp;&nbsp; &nbsp;|class="?Apple-tab-span/i.test(e)}}),S=y.extend({init:function(e){y.fn.init.call(this,e),this.junkReplacements=[/<\?xml[^>]*>/gi,"",/<!--(.|\n)*?-->/g,"",/&quot;/g,"'",/<o:p>&nbsp;<\/o:p>/gi,"&nbsp;",/<\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\n)*?<\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,"",/<\/o>/g,""],this.replacements=this.junkReplacements.concat([/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,"$1",/<br><br>/g,"<BR><BR>",/<br>(?!\n)/g," ",/<table([^>]*)>(\s|&nbsp;)+<t/gi,"<table$1><t",/<tr[^>]*>(\s|&nbsp;)*<\/tr>/gi,"",/<tbody[^>]*>(\s|&nbsp;)*<\/tbody>/gi,"",/<table[^>]*>(\s|&nbsp;)*<\/table>/gi,"",/<BR><BR>/g,"<br>",/^\s*(&nbsp;)+/gi,"",/(&nbsp;|<br[^>]*>)+\s*$/gi,"",/mso-[^;"]*;?/gi,"",/<(\/?)b(\s[^>]*)?>/gi,"<$1strong$2>",/<(\/?)font(\s[^>]*)?>/gi,this.convertFontMatch,/<(\/?)i(\s[^>]*)?>/gi,"<$1em$2>",/style=(["|'])\s*\1/g,"",/(<br[^>]*>)?\n/g,function(e,t){return t?e:" "}])},convertFontMatch:function(e,t,i){var n=/face=['"]([^'"]+)['"]/i.exec(i),r=i&&n&&n[1];return t?"</span>":r?'<span style="font-family:'+r+'">':"<span>"},applicable:function(e){return/class="?Mso/i.test(e)||/style="[^"]*mso-/i.test(e)||/urn:schemas-microsoft-com:office/.test(e)},stripEmptyAnchors:function(e){return e.replace(/<a([^>]*)>\s*<\/a>/gi,function(e,t){return!t||t.indexOf("href")<0?"":e})},listType:function(e,t){var i,n=e.innerHTML,r=a.innerText(e),s=n.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i),o=s&&s[1],l=/^[a-z\d]/i.test(o),d=function(e){return e.replace(/^(?:&nbsp;|[\u00a0\n\r\s])+/,"")};return s&&(i=!0),n=n.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g,""),!i&&/^[\u2022\u00b7\u00a7\u00d8o]\u00a0+/.test(n)||i&&/^.\u00a0+/.test(n)||o&&!l&&t?{tag:"ul",style:this._guessUnorderedListStyle(d(r))}:/^\s*\w+[\.\)][\u00a0 ]{2,}/.test(n)?{tag:"ol",style:this._guessOrderedListStyle(d(r))}:void 0},_convertToLi:function(e){var t;return 1==e.childNodes.length?t=e.firstChild.innerHTML.replace(/^\w+[\.\)](&nbsp;)+ /,""):(a.remove(e.firstChild),3==e.firstChild.nodeType&&/^[ivxlcdm]+\.$/i.test(e.firstChild.nodeValue)&&a.remove(e.firstChild),/^(&nbsp;|\s)+$/i.test(e.firstChild.innerHTML)&&a.remove(e.firstChild),t=e.innerHTML),a.remove(e),a.create(document,"li",{innerHTML:t})},_guessUnorderedListStyle:function(e){return/^[\u2022\u00b7\u00FC\u00D8\u002dv-]/.test(e)?null:/^o/.test(e)?"circle":"square"},_guessOrderedListStyle:function(e){var t=null;return/^\d/.test(e)||(t=(/^[a-z]/.test(e)?"lower-":"upper-")+(/^[ivxlcdm]/i.test(e)?"roman":"alpha")),t},extractListLevels:function(e){return e=e.replace(/style=['"]?[^'"]*?mso-list:\s?[a-zA-Z]+(\d+)\s[a-zA-Z]+(\d+)\s(\w+)/gi,function(e,t,n){return i.format('data-list="{0}" data-level="{1}" {2}',t,n,e)})},lists:function(t){var i,n,r,s,o,l,d,c,u,h=e(t).find(a.blockElements.join(",")),f=-1,p={},m=t;for(s=0;s<h.length;s++){o=h[s];var g=(u=e(o).data()).list;if("td"!=(i=a.name(o))){var v=this.listType(o,u);if((l=v&&v.tag)&&"p"==i){d=parseFloat(o.style.marginLeft||0),void 0===n&&(n=d);var _=l+g;p[d]||(p[d]={}),c=p[d][_],(d>f||!c)&&(c=a.create(document,l,{style:{listStyleType:v.style}}),m==t||d<=f?(r&&n!==d?r.appendChild(c):a.insertBefore(c,o),p[d]={}):(r=m,m.appendChild(c)),p[d][_]=c),m=this._convertToLi(o),c.appendChild(m),f=d}else o.innerHTML?(f=-1,m=t):a.remove(o)}}},removeAttributes:function(e){for(var t=e.attributes,i=t.length;i--;)"colspan"!=a.name(t[i])&&e.removeAttributeNode(t[i])},createColGroup:function(t){var n=t.cells,r=e(t).closest("table"),s=r.children("colgroup");n.length<2||(s.length&&(n=s.children(),s[0].parentNode.removeChild(s[0])),(s=e(e.map(n,function(e){var t=e.width;return t&&0!==parseInt(t,10)?i.format('<col style="width:{0}px;"/>',t):"<col />"}).join(""))).is("colgroup")||(s=e("<colgroup/>").append(s)),s.prependTo(r))},convertHeaders:function(t){var i,n=t.cells,r=e.map(n,function(t){var i=e(t).children("p").children("strong")[0];if(i&&"strong"==a.name(i))return i});if(r.length==n.length){for(i=0;i<r.length;i++)a.unwrap(r[i]);for(e(t).closest("table").find("colgroup").after("<thead></thead>").end().find("thead").append(t),i=0;i<n.length;i++)a.changeTag(n[i],"th")}},removeParagraphs:function(t){var i,n,r,s,o;for(i=0;i<t.length;i++)for(this.removeAttributes(t[i]),s=e(t[i]),o=s.children("p"),n=0,r=o.length;n<r;n++)n<r-1&&a.insertAfter(a.create(document,"br"),o[n]),a.unwrap(o[n])},removeDefaultColors:function(e){for(var t=0;t<e.length;t++)/^\s*color:\s*[^;]*;?$/i.test(e[t].style.cssText)&&a.unwrap(e[t])},tables:function(t){var i,n,r,s,o,a=e(t).find("table");for(s=0;s<a.length;s++){for(i=a[s].rows,r=n=i[0],o=1;o<i.length;o++)i[o].cells.length>r.cells.length&&(r=i[o]);this.createColGroup(r),this.convertHeaders(n),this.removeAttributes(a[s]),this.removeParagraphs(a.eq(s).find("td,th")),this.removeDefaultColors(a.eq(s).find("span"))}},headers:function(t){for(var i=e(t).find("p.MsoTitle"),n=0;n<i.length;n++)a.changeTag(i[n],"h1")},removeFormatting:function(t){e(t).find("*").css({fontSize:"",fontFamily:""})},clean:function(e){var t,i=this.options;return i.none?(e=y.fn.clean.call(this,e,this.junkReplacements),e=this.stripEmptyAnchors(e)):(e=this.extractListLevels(e),e=y.fn.clean.call(this,e),e=this.stripEmptyAnchors(e),t=a.create(document,"div",{innerHTML:e}),this.headers(t),i.msConvertLists&&this.lists(t),this.tables(t),i.msAllFormatting&&this.removeFormatting(t),e=t.innerHTML.replace(/(<[^>]*)\s+class="?[^"\s>]*"?/gi,"$1")),e}}),T=y.extend({init:function(e){y.fn.init.call(this,e),this.replacements=[/\s+class="Apple-style-span[^"]*"/gi,"",/<(div|p|h[1-6])\s+style="[^"]*"/gi,"<$1",/^<div>(.*)<\/div>$/,"$1"]},applicable:function(e){return/class="?Apple-style-span|style="[^"]*-webkit-nbsp-mode/i.test(e)}}),D=y.extend({clean:function(e){var t=a.create(document,"div",{innerHTML:e});return(t=this.cleanDom(t)).innerHTML},cleanDom:function(e){return e}}),F=D.extend({cleanDom:function(t){var i=this.collectTags();return e(t).find(i).each(function(){a.unwrap(this)}),t},collectTags:function(){if(this.options.span)return"span"},applicable:function(){return this.options.span}}),E=D.extend({cleanDom:function(t){var i=this.collectAttr(),n=e(t).find("["+i.join("],[")+"]");return n.removeAttr(i.join(" ")),t},collectAttr:function(){return this.options.css?["class","style"]:[]},applicable:function(){return this.options.css}}),R=n.extend({init:function(e){this.separators=e||{text:" ",line:"<br/>"},this.lines=[],this.inlineBlockText=[],this.resetLine()},appendText:function(e){3===e.nodeType&&(e=e.nodeValue),this.textContainer.add(e)},appendInlineBlockText:function(e){this.inlineBlockText.push(e)},flashInlineBlockText:function(){this.inlineBlockText.length&&(this.appendText(this.inlineBlockText.join(" ")),this.inlineBlockText=[])},endLine:function(){this.flashInlineBlockText(),this.resetLine()},html:function(){var e=this.separators,t="",i=this.lines;this.flashInlineBlockText();for(var n=0,r=i.length,s=r-1;n<r;n++){for(var o=i[n],a=0,l=o.length,d=l-1;a<l;a++){var c=o[a].text;t+=c,a!==d&&(t+=e.text)}n!==s&&(t+=e.line)}return t},resetLine:function(){this.textContainer=new function(){this.text="",this.add=function(e){this.text+=e}},this.line=[],this.line.push(this.textContainer),this.lines.push(this.line)}}),A=n.extend({init:function(e){this.callback=e},enumerate:function(e){if(e){var t=this.callback(e),i=e.firstChild;!t&&i&&this.enumerate(i),this.enumerate(e.nextSibling)}}}),I=y.extend({init:function(t){y.fn.init.call(this,t),this.hasText=!1,this.enumerator=new A(e.proxy(this.buildText,this))},clean:function(e){var t=a.create(document,"div",{innerHTML:e});return this.cleanDom(t)},cleanDom:function(e){return this.separators=this.getDefaultSeparators(),this.htmlLines=new R(this.separators),this.enumerator.enumerate(e.firstChild),this.hasText=!1,this.htmlLines.html()},buildText:function(e){if(a.isDataNode(e)){if(a.isEmptyspace(e))return;this.htmlLines.appendText(e.nodeValue.replace("\n",this.separators.line)),this.hasText=!0}else if(a.isBlock(e)&&this.hasText){var t=this.actions[a.name(e)]||this.actions.block;return t(this,e)}},applicable:function(){var e=this.options;return e.all||e.keepNewLines},getDefaultSeparators:function(){return this.options.all?{text:" ",line:" "}:{text:" ",line:"<br/>"}},actions:{ul:e.noop,ol:e.noop,table:e.noop,thead:e.noop,tbody:e.noop,td:function(e,t){var i=new I({all:!0}),n=i.cleanDom(t);return e.htmlLines.appendInlineBlockText(n),!0},block:function(e){e.htmlLines.endLine()}}}),M=y.extend({clean:function(e){return this.options.custom(e)},applicable:function(){return"function"==typeof this.options.custom}}),H=f.extend({init:function(e){f.fn.init.call(this,e),this.managesUndoRedo=!0},exec:function(){var e=this.editor;i.support.browser.msie?e.document.execCommand("print",!1,null):e.window.print&&e.window.print()}}),z=f.extend({init:function(e){this.async=!0,f.fn.init.call(this,e)},exec:function(){var e=this,t=this.lockRange(!0);this.editor.saveAsPDF().then(function(){e.releaseRange(t)})}});h(r,{_finishUpdate:t,Command:f,GenericCommand:p,InsertHtmlCommand:m,InsertHtmlTool:g,TypingHandler:v,SystemHandler:b,BackspaceHandler:_,Keyboard:k,Clipboard:w,Cleaner:y,ScriptCleaner:x,TabCleaner:C,MSWordFormatCleaner:S,WebkitFormatCleaner:T,HtmlTagsCleaner:F,HtmlAttrCleaner:E,HtmlContentCleaner:I,HtmlTextLines:R,CustomCleaner:M,PrintCommand:H,ExportPdfCommand:z}),o("insertHtml",new g({template:new d({template:s.dropDownListTemplate,title:"Insert HTML",initialValue:"Insert HTML"})})),o("print",new l({command:H,template:new d({template:s.buttonTemplate,title:"Print"})})),o("pdf",new l({command:z,template:new d({template:s.buttonTemplate,title:"Export PDF"})}))}(window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("editor/inlineformat",["editor/system"],function(){!function(e){var t=window.kendo,i=t.Class,n=t.ui.editor,r=t.ui.Editor.fn.options.formats,s=n.EditorUtils,o=n.Tool,a=n.ToolTemplate,l=n.FormatTool,d=n.Dom,c=n.RangeUtils,u=e.extend,h=n.EditorUtils.registerTool,f=n.EditorUtils.registerFormat,p=i.extend({init:function(e){this.format=e},numberOfSiblings:function(e){var t,i=0,n=0,r=0,s=e.parentNode;for(t=s.firstChild;t;t=t.nextSibling)t!=e&&("k-marker"==t.className?r++:3==t.nodeType?i++:n++);return r>1&&"k-marker"==s.firstChild.className&&"k-marker"==s.lastChild.className?0:n+i},findSuitable:function(e,t){if(!t&&this.numberOfSiblings(e)>0)return null;for(var i=e.parentNode,n=this.format[0].tags;!d.ofType(i,n);){if(this.numberOfSiblings(i)>0)return null;i=i.parentNode}return i},findFormat:function(e){var t,i,n,r,s,o=this.format,a=d.attrEquals;for(t=0,i=o.length;t<i;t++){if(n=e,r=o[t].tags,s=o[t].attr,n&&d.ofType(n,r)&&a(n,s))return n;for(;n;)if((n=d.parentOfType(n,r))&&a(n,s))return n}return null},isFormatted:function(e){var t,i;for(t=0,i=e.length;t<i;t++)if(this.findFormat(e[t]))return!0;return!1}}),m=i.extend({init:function(e,t){this.finder=new p(e),this.attributes=u({},e[0].attr,t),this.tag=e[0].tags[0]},wrap:function(e){return d.wrap(e,d.create(e.ownerDocument,this.tag,this.attributes))},activate:function(e,t){this.finder.isFormatted(t)?(this.split(e),this.remove(t)):this.apply(t)},toggle:function(e){var t=c.textNodes(e);t.length>0&&this.activate(e,t)},apply:function(e){var t,i,n,r,s=[];for(t=0,i=e.length;t<i;t++){if(n=e[t],r=this.finder.findSuitable(n))d.attr(r,this.attributes);else{for(;!d.isBlock(n.parentNode)&&1==n.parentNode.childNodes.length&&"true"!==n.parentNode.contentEditable;)n=n.parentNode;r=this.wrap(n)}s.push(r)}this.consolidate(s)},remove:function(e){var t,i,n;for(t=0,i=e.length;t<i;t++)(n=this.finder.findFormat(e[t]))&&(this.attributes&&this.attributes.style?(d.unstyle(n,this.attributes.style),n.style.cssText||n.attributes.class||d.unwrap(n)):d.unwrap(n))},split:function(e){var t,i,n=c.textNodes(e),r=n.length;if(r>0)for(t=0;t<r;t++)(i=this.finder.findFormat(n[t]))&&c.split(e,i,!0)},consolidate:function(e){for(var t,i;e.length>1;)if(t=e.pop(),i=e[e.length-1],t.previousSibling&&"k-marker"==t.previousSibling.className&&i.appendChild(t.previousSibling),t.tagName==i.tagName&&t.previousSibling==i&&t.style.cssText==i.style.cssText){for(;t.firstChild;)i.appendChild(t.firstChild);d.remove(t)}}}),g=p.extend({init:function(e,t){this.format=e,this.greedyProperty=t,p.fn.init.call(this,e)},getInlineCssValue:function(t){var i,n,r,s,o,a,l,c,u,h,f,p,m=t.attributes,g=e.trim;if(m)for(i=0,n=m.length;i<n;i++)if(r=m[i],s=r.nodeName,o=r.nodeValue,r.specified&&"style"==s)for(a=g(o||t.style.cssText).split(";"),c=0,u=a.length;c<u;c++)if((l=a[c]).length){if(h=l.split(":"),f=g(h[0].toLowerCase()),p=g(h[1]),f!=this.greedyProperty)continue;return f.indexOf("color")>=0?d.toHex(p):p}},getFormatInner:function(t){var i,n,r,s=e(d.isDataNode(t)?t.parentNode:t),o=s.parentsUntil("[contentEditable]").addBack().toArray().reverse();for(i=0,n=o.length;i<n;i++)if(r="className"==this.greedyProperty?o[i].className:this.getInlineCssValue(o[i]))return r;return"inherit"},getFormat:function(e){var t,i,n=this.getFormatInner(e[0]);for(t=1,i=e.length;t<i;t++)if(n!=this.getFormatInner(e[t]))return"";return n},isFormatted:function(e){return""!==this.getFormat(e)}}),v=m.extend({init:function(e,i,n){m.fn.init.call(this,e,i),this.values=i,this.finder=new g(e,n),n&&(this.greedyProperty=t.toCamelCase(n))},activate:function(e,t){var i=this.greedyProperty,n="apply";this.split(e),i&&"inherit"==this.values.style[i]&&(n="remove"),this[n](t)}}),_=l.extend({init:function(e){l.fn.init.call(this,u(e,{finder:new p(e.format),formatter:function(){return new m(e.format)}}))}}),b=o.extend({update:function(e,t){var i=e.data(this.type);i.close(),i.value(this.finder.getFormat(t))}}),k=b.extend({init:function(e){o.fn.init.call(this,e),this.type=t.support.browser.msie||t.support.touch?"kendoDropDownList":"kendoComboBox",this.format=[{tags:["span"]}],this.finder=new g(this.format,e.cssAttr)},command:function(e){var t=this.options,i=this.format,r={};return new n.FormatCommand(u(e,{formatter:function(){return r[t.domAttr]=e.value,new v(i,{style:r},t.cssAttr)}}))},initialize:function(e,t){var i,n=t.editor,r=this.options,s=r.name,a=[];r.defaultValue&&(a=[{text:n.options.messages[r.defaultValue[0].text],value:r.defaultValue[0].value}]),i=a.concat(r.items?r.items:n.options[s]||[]),e.attr({title:t.title}),e[this.type]({dataTextField:"text",dataValueField:"value",dataSource:i,change:function(){o.exec(n,s,this.value())},highlightFirst:!1}),e.closest(".k-widget").removeClass("k-"+s).find("*").addBack().attr("unselectable","on"),e.data(this.type).value("inherit")}}),w=o.extend({init:function(e){o.fn.init.call(this,e),this.format=[{tags:["span"]}],this.finder=new g(this.format,e.cssAttr)},options:{palette:"websafe"},update:function(){this._widget.close()},command:function(e){var t=this.options,i=this.format,r={};return new n.FormatCommand(u(e,{formatter:function(){return r[t.domAttr]=e.value,new v(i,{style:r},t.cssAttr)}}))},initialize:function(e,i){var n=i.editor,r=this.name,s=u({},w.fn.options,this.options),a=s.palette;(e=this._widget=new t.ui.ColorPicker(e,{toolIcon:"k-"+s.name,palette:a,change:function(){var t=e.value();t&&o.exec(n,r,t),n.focus()},activate:function(t){t.preventDefault(),e.trigger("change")}})).wrapper.attr({title:i.title,unselectable:"on"}).find("*").attr("unselectable","on")}});u(n,{InlineFormatFinder:p,InlineFormatter:m,DelayedExecutionTool:b,GreedyInlineFormatFinder:g,GreedyInlineFormatter:v,InlineFormatTool:_,FontTool:k,ColorTool:w}),f("bold",[{tags:["strong","b"]},{tags:["span"],attr:{style:{fontWeight:"bold"}}}]),h("bold",new _({key:"B",ctrl:!0,format:r.bold,template:new a({template:s.buttonTemplate,title:"Bold"})})),f("italic",[{tags:["em","i"]},{tags:["span"],attr:{style:{fontStyle:"italic"}}}]),h("italic",new _({key:"I",ctrl:!0,format:r.italic,template:new a({template:s.buttonTemplate,title:"Italic"})})),f("underline",[{tags:["span"],attr:{style:{textDecoration:"underline"}}},{tags:["u"]}]),h("underline",new _({key:"U",ctrl:!0,format:r.underline,template:new a({template:s.buttonTemplate,title:"Underline"})})),f("strikethrough",[{tags:["del","strike"]},{tags:["span"],attr:{style:{textDecoration:"line-through"}}}]),h("strikethrough",new _({format:r.strikethrough,template:new a({template:s.buttonTemplate,title:"Strikethrough"})})),f("superscript",[{tags:["sup"]}]),h("superscript",new _({format:r.superscript,template:new a({template:s.buttonTemplate,title:"Superscript"})})),f("subscript",[{tags:["sub"]}]),h("subscript",new _({format:r.subscript,template:new a({template:s.buttonTemplate,title:"Subscript"})})),h("foreColor",new w({cssAttr:"color",domAttr:"color",name:"foreColor",template:new a({template:s.colorPickerTemplate,title:"Color"})})),h("backColor",new w({cssAttr:"background-color",domAttr:"backgroundColor",name:"backColor",template:new a({template:s.colorPickerTemplate,title:"Background Color"})})),h("fontName",new k({cssAttr:"font-family",domAttr:"fontFamily",name:"fontName",defaultValue:[{text:"fontNameInherit",value:"inherit"}],template:new a({template:s.comboBoxTemplate,title:"Font Name"})})),h("fontSize",new k({cssAttr:"font-size",domAttr:"fontSize",name:"fontSize",defaultValue:[{text:"fontSizeInherit",value:"inherit"}],template:new a({template:s.comboBoxTemplate,title:"Font Size"})}))}(window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("editor/formatblock",["editor/inlineformat"],function(){!function(e){var t=window.kendo,i=t.Class,n=e.extend,r=t.ui.editor,s=t.ui.Editor.fn.options.formats,o=r.Dom,a=r.Command,l=r.ToolTemplate,d=r.FormatTool,c=r.EditorUtils,u=c.registerTool,h=c.registerFormat,f=r.RangeUtils,p=i.extend({init:function(e){this.format=e},contains:function(e,t){var i,n,r;for(i=0,n=t.length;i<n;i++)if(!(r=t[i])||!o.isAncestorOrSelf(e,r))return!1;return!0},findSuitable:function(t){var i,n,r,s=this.format,a=[];for(i=0,n=t.length;i<n;i++){for(var l=s.length-1;l>=0&&!(r=o.ofType(t[i],s[l].tags)?t[i]:o.closestEditableOfType(t[i],s[l].tags));l--);if(!r||"true"===r.contentEditable)return[];e.inArray(r,a)<0&&a.push(r)}for(i=0,n=a.length;i<n;i++)if(this.contains(a[i],a))return[a[i]];return a},findFormat:function(e){var t,i,n,r,s,a=this.format,l=o.editableParent(e);for(t=0,i=a.length;t<i;t++)for(n=e,r=a[t].tags,s=a[t].attr;n&&o.isAncestorOf(l,n);){if(o.ofType(n,r)&&o.attrEquals(n,s))return n;n=n.parentNode}return null},getFormat:function(e){var t,i,n=this,r=function(e){return n.findFormat(o.isDataNode(e)?e.parentNode:e)},s=r(e[0]);if(!s)return"";for(t=1,i=e.length;t<i;t++)if(s!=r(e[t]))return"";return s.nodeName.toLowerCase()},isFormatted:function(e){for(var t=0,i=e.length;t<i;t++)if(!this.findFormat(e[t]))return!1;return!0}}),m=i.extend({init:function(e,t){this.format=e,this.values=t,this.finder=new p(e)},wrap:function(e,t,i){var n=1==i.length?o.blockParentOrBody(i[0]):o.commonAncestor.apply(null,i);o.isInline(n)&&(n=o.blockParentOrBody(n));var r,s,a=o.significantChildNodes(n),l=o.findNodeIndex(a[0]),d=o.create(n.ownerDocument,e,t);for(r=0;r<a.length;r++)s=a[r],o.isBlock(s)?(o.attr(s,t),d.childNodes.length&&(o.insertBefore(d,s),d=d.cloneNode(!1)),l=o.findNodeIndex(s)+1):d.appendChild(s);d.firstChild&&o.insertAt(n,d,l)},apply:function(t){function i(e){return n({},e&&e.attr,s)}var r,s=this.values,a=o.filter("img",t),l=c.formatByName("img",this.format),d=i(l);if(e.each(a,function(){o.attr(this,d)}),a.length!=t.length){var u=o.filter("img",t,!0),h=this.finder.findSuitable(u);if(h.length)for(var f=0,p=h.length;f<p;f++)r=c.formatByName(o.name(h[f]),this.format),o.attr(h[f],i(r));else r=this.format[0],this.wrap(r.tags[0],i(r),u)}},remove:function(e){var t,i,n,r,s;for(t=0,i=e.length;t<i;t++)(n=this.finder.findFormat(e[t]))&&("div"!=(s=o.name(n))||n.getAttribute("class")?((r=c.formatByName(s,this.format)).attr.style&&o.unstyle(n,r.attr.style),r.attr.className&&o.removeClass(n,r.attr.className)):o.unwrap(n))},toggle:function(e){var t=f.nodes(e);this.finder.isFormatted(t)?this.remove(t):this.apply(t)}}),g=i.extend({init:function(e,t){this.format=e,this.values=t,this.finder=new p(e)},apply:function(e){var t,i,n,s,a,l,d,c=this.format,u=o.blockParents(e),h=c[0].tags[0];if(u.length)for(t=0,i=u.length;t<i;t++)"li"==(d=o.name(u[t]))?(n=u[t].parentNode,s=new r.ListFormatter(n.nodeName.toLowerCase(),h),(a=this.editor.createRange()).selectNode(u[t]),s.toggle(a)):h&&("td"==d||u[t].attributes.contentEditable)?new m(c,this.values).apply(u[t].childNodes):(l=o.changeTag(u[t],h),o.attr(l,c[0].attr));else new m(c,this.values).apply(e)},toggle:function(e){var t=f.textNodes(e);t.length||(e.selectNodeContents(e.commonAncestorContainer),(t=f.textNodes(e)).length||(t=o.significantChildNodes(e.commonAncestorContainer))),this.apply(t)}}),v=a.extend({init:function(e){e.formatter=e.formatter(),a.fn.init.call(this,e)}}),_=d.extend({init:function(e){d.fn.init.call(this,n(e,{finder:new p(e.format),formatter:function(){return new m(e.format)}}))}});n(r,{BlockFormatFinder:p,BlockFormatter:m,GreedyBlockFormatter:g,FormatCommand:v,BlockFormatTool:_});var b=["ul","ol","li"];h("justifyLeft",[{tags:o.nonListBlockElements,attr:{style:{textAlign:"left"}}},{tags:["img"],attr:{style:{float:"left",display:"",marginLeft:"",marginRight:""}}},{tags:b,attr:{style:{textAlign:"left",listStylePosition:""}}}]),u("justifyLeft",new _({format:s.justifyLeft,template:new l({template:c.buttonTemplate,title:"Justify Left"})})),h("justifyCenter",[{tags:o.nonListBlockElements,attr:{style:{textAlign:"center"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto",float:""}}},{tags:b,attr:{style:{textAlign:"center",listStylePosition:"inside"}}}]),u("justifyCenter",new _({format:s.justifyCenter,template:new l({template:c.buttonTemplate,title:"Justify Center"})})),h("justifyRight",[{tags:o.nonListBlockElements,attr:{style:{textAlign:"right"}}},{tags:["img"],attr:{style:{float:"right",display:"",marginLeft:"",marginRight:""}}},{tags:b,attr:{style:{textAlign:"right",listStylePosition:"inside"}}}]),u("justifyRight",new _({format:s.justifyRight,template:new l({template:c.buttonTemplate,title:"Justify Right"})})),h("justifyFull",[{tags:o.nonListBlockElements,attr:{style:{textAlign:"justify"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto",float:""}}},{tags:b,attr:{style:{textAlign:"justify",listStylePosition:""}}}]),u("justifyFull",new _({format:s.justifyFull,template:new l({template:c.buttonTemplate,title:"Justify Full"})}))}(window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("editor/linebreak",["editor/formatblock"],function(){!function(e){var t=window.kendo,i=e.extend,n=t.ui.editor,r=n.Dom,s=n.Command,o=n.Tool,a=n.BlockFormatter,l=r.normalize,d=n.RangeUtils,c=n.EditorUtils.registerTool,u=s.extend({init:function(e){this.options=e,s.fn.init.call(this,e)},_insertMarker:function(e,t){var i,n=r.create(e,"a");return n.className="k-marker",t.insertNode(n),n.parentNode||((i=t.commonAncestorContainer).innerHTML="",i.appendChild(n)),l(n.parentNode),n},_moveFocus:function(e,t){if(r.isEmpty(t))e.setStartBefore(t);else{e.selectNodeContents(t);var i=d.textNodes(e)[0];if(!i){for(;t.childNodes.length&&!r.is(t.firstChild,"br");)t=t.firstChild;i=t}r.isEmpty(i)?e.setStartBefore(i):(r.emptyNode(i)&&(i.innerHTML="\ufeff"),e.setStartBefore(i.firstChild||i))}},shouldTrim:function(e){var t="p,h1,h2,h3,h4,h5,h6".split(","),i=r.parentOfType(e.startContainer,t),n=r.parentOfType(e.endContainer,t);return i&&!n||!i&&n},_blankAfter:function(e){for(;e&&(r.isMarker(e)||""===r.stripBom(e.nodeValue));)e=e.nextSibling;return!e},exec:function(){var e,t,i,s,o,c,u,h,f=this.getRange(),p=d.documentFromRange(f),m=n.emptyElementContent,g=this.shouldTrim(f);f.deleteContents(),o=this._insertMarker(p,f),r.stripBomNode(o.previousSibling),r.stripBomNode(o.nextSibling),c=r.closestEditableOfType(o,["li"]),u=r.closestEditableOfType(o,"h1,h2,h3,h4,h5,h6".split(",")),c?r.emptyNode(c)&&(s=r.create(p,"p"),c.nextSibling&&((h=f.cloneRange()).selectNode(c),d.split(h,c.parentNode)),r.insertAfter(s,c.parentNode),r.remove(1==c.parentNode.childNodes.length?c.parentNode:c),s.innerHTML=m,i=s):u&&this._blankAfter(o)&&(s=r.create(p,"p"),r.insertAfter(s,u),s.innerHTML=m,r.remove(o),i=s),i||(c||u||new a([{tags:["p"]}]).apply([o]),f.selectNode(o),e=r.parentOfType(o,[c?"li":u?r.name(u):"p"]),d.split(f,e,g),t=e.previousSibling,r.is(t,"li")&&t.firstChild&&!r.is(t.firstChild,"br")&&(t=t.firstChild),i=e.nextSibling,this.clean(t),this.clean(i,{links:!0}),r.is(i,"li")&&i.firstChild&&!r.is(i.firstChild,"br")&&(i=i.firstChild),r.remove(e),l(t)),l(i),this._moveFocus(f,i),f.collapse(!0),r.scrollTo(i),d.selectRange(f)},clean:function(t,i){var s=t;if(t.firstChild&&r.is(t.firstChild,"br")&&r.remove(t.firstChild),r.isDataNode(t)&&!t.nodeValue&&(t=t.parentNode),t){for(var o=!1;t.firstChild&&1==t.firstChild.nodeType;)o=o||r.significantNodes(t.childNodes).length>1,t=t.firstChild;if(r.isEmpty(t)||!/^\s*$/.test(t.innerHTML)||o||(e(s).find(".k-br").remove(),t.innerHTML=n.emptyElementContent),i&&i.links)for(;t!=s;){if(r.is(t,"a")&&r.emptyNode(t)){r.unwrap(t);break}t=t.parentNode}}}}),h=s.extend({init:function(e){this.options=e,s.fn.init.call(this,e)},exec:function(){var e,i=this.getRange(),n=r.create(d.documentFromRange(i),"br"),s=t.support.browser,o=s.msie&&s.version<11;i.deleteContents(),i.insertNode(n),l(n.parentNode),o||n.nextSibling&&!r.isWhitespace(n.nextSibling)||((e=n.cloneNode(!0)).className="k-br",r.insertAfter(e,n)),i.setStartAfter(n),i.collapse(!0),r.scrollTo(n.nextSibling||n),d.selectRange(i)}});i(n,{ParagraphCommand:u,NewLineCommand:h}),c("insertLineBreak",new o({key:13,shift:!0,command:h})),c("insertParagraph",new o({key:13,command:u}))}(window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("editor/lists",["editor/linebreak"],function(){!function(e){var t=window.kendo,i=t.Class,n=e.extend,r=t.ui.editor,s=r.Dom,o=r.RangeUtils,a=r.EditorUtils,l=r.Command,d=r.ToolTemplate,c=r.FormatTool,u=r.BlockFormatFinder,h=o.textNodes,f=r.EditorUtils.registerTool,p=u.extend({init:function(e){this.tag=e;var t=this.tags=["ul"==e?"ol":"ul",e];u.fn.init.call(this,[{tags:t}])},isFormatted:function(e){var t,i,n=[];for(i=0;i<e.length;i++)(t=this.findFormat(e[i]))&&s.name(t)==this.tag&&n.push(t);if(n.length<1)return!1;if(n.length!=e.length)return!1;for(i=0;i<n.length&&n[i].parentNode==t.parentNode;i++)if(n[i]!=t)return!1;return!0},findSuitable:function(e){var t=this.findFormat(e[0]);return t&&s.name(t)==this.tag?t:null}}),m=i.extend({init:function(e,t){this.finder=new p(e),this.tag=e,this.unwrapTag=t},isList:function(e){var t=s.name(e);return"ul"==t||"ol"==t||"dl"==t},wrap:function(e,t){var i,n,r=s.create(e.ownerDocument,"li");for(i=0;i<t.length;i++)if(n=t[i],s.is(n,"li"))e.appendChild(n);else if(this.isList(n))for(;n.firstChild;)e.appendChild(n.firstChild);else if(s.is(n,"td")){for(;n.firstChild;)r.appendChild(n.firstChild);e.appendChild(r),n.appendChild(e),e=e.cloneNode(!1),r=r.cloneNode(!1)}else r.appendChild(n),s.isBlock(n)&&(e.appendChild(r),s.unwrap(n),r=r.cloneNode(!1));r.firstChild&&e.appendChild(r)},containsAny:function(e,t){for(var i=0;i<t.length;i++)if(s.isAncestorOrSelf(e,t[i]))return!0;return!1},suitable:function(e,t){if("k-marker"==e.className){var i=e.nextSibling;if(i&&s.isBlock(i))return!1;if((i=e.previousSibling)&&s.isBlock(i))return!1}return this.containsAny(e,t)||s.isInline(e)||3==e.nodeType},_parentLists:function(t){var i=s.closestEditable(t);return e(t).parentsUntil(i,"ul,ol")},split:function(e){var t,i,n,r=h(e);if(r.length){t=s.parentOfType(r[0],["li"]),i=s.parentOfType(r[r.length-1],["li"]),e.setStartBefore(t),e.setEndAfter(i);for(var a=0,l=r.length;a<l;a++){var d=this.finder.findFormat(r[a]);d&&((n=this._parentLists(d)).length?o.split(e,n.last()[0],!0):o.split(e,d,!0))}}},merge:function(e,t){for(var i,n=t.previousSibling;n&&("k-marker"==n.className||3==n.nodeType&&s.isWhitespace(n));)n=n.previousSibling;if(n&&s.name(n)==e){for(;t.firstChild;)n.appendChild(t.firstChild);s.remove(t),t=n}for(i=t.nextSibling;i&&("k-marker"==i.className||3==i.nodeType&&s.isWhitespace(i));)i=i.nextSibling;if(i&&s.name(i)==e){for(;t.lastChild;)i.insertBefore(t.lastChild,i.firstChild);s.remove(t)}},breakable:function(e){return e!=e.ownerDocument.body&&!/table|tbody|tr|td/.test(s.name(e))&&!e.attributes.contentEditable},applyOnSection:function(t,i){function n(){a.push(this)}var r=this.tag,o=s.closestSplittableParent(i),a=[],l=this.finder.findSuitable(i);l||(l=new p("ul"==r?"ol":"ul").findSuitable(i));var d;/table|tbody/.test(s.name(o))?d=e.map(i,function(e){return s.parentOfType(e,["td"])}):(d=s.significantChildNodes(o),e.grep(d,s.isBlock).length&&(d=e.grep(d,e.proxy(function(e){return this.containsAny(e,i)},this))),d.length||(d=i));for(var c=0;c<d.length;c++){var u=d[c],h=(!l||!s.isAncestorOrSelf(l,u))&&this.suitable(u,i);h&&(l&&this.isList(u)?(e.each(u.childNodes,n),s.remove(u)):a.push(u))}a.length==d.length&&this.breakable(o)&&(a=[o]),l||(l=s.create(o.ownerDocument,r),s.insertBefore(l,a[0])),this.wrap(l,a),s.is(l,r)||s.changeTag(l,r),this.merge(r,l)},apply:function(e){var t,i,n,r=0,o=[];do{n=s.closestEditable(e[r],["td","body"]),t&&n==t?i.push(e[r]):(t&&o.push({section:t,nodes:i}),i=[e[r]],t=n),r++}while(r<e.length);for(o.push({section:t,nodes:i}),r=0;r<o.length;r++)this.applyOnSection(o[r].section,o[r].nodes)},unwrap:function(e){var t,i,n,r,o=e.ownerDocument.createDocumentFragment(),a=this.unwrapTag;for(i=e.firstChild;i;i=i.nextSibling){for(n=s.create(e.ownerDocument,a||"p");i.firstChild;)r=i.firstChild,s.isBlock(r)?(n.firstChild&&(o.appendChild(n),n=s.create(e.ownerDocument,a||"p")),o.appendChild(r)):n.appendChild(r);n.firstChild&&o.appendChild(n)}(t=this._parentLists(e))[0]?(s.insertAfter(o,t.last()[0]),t.last().remove()):s.insertAfter(o,e),s.remove(e)},remove:function(e){for(var t,i=0,n=e.length;i<n;i++)(t=this.finder.findFormat(e[i]))&&this.unwrap(t)},toggle:function(e){var t=h(e),i=e.commonAncestorContainer;if(!t.length&&(e.selectNodeContents(i),!(t=h(e)).length)){var n=i.ownerDocument.createTextNode("");e.startContainer.appendChild(n),t=[n],e.selectNode(n.parentNode)}this.finder.isFormatted(t)?(this.split(e),this.remove(t)):this.apply(t)}}),g=l.extend({init:function(e){e.formatter=new m(e.tag),l.fn.init.call(this,e)}}),v=c.extend({init:function(e){this.options=e,c.fn.init.call(this,n(e,{finder:new p(e.tag)}))},command:function(e){return new g(n(e,{tag:this.options.tag}))}});n(r,{ListFormatFinder:p,ListFormatter:m,ListCommand:g,ListTool:v}),f("insertUnorderedList",new v({tag:"ul",template:new d({template:a.buttonTemplate,title:"Insert unordered list"})})),f("insertOrderedList",new v({tag:"ol",template:new d({template:a.buttonTemplate,title:"Insert ordered list"})}))}(window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("editor/link",["editor/lists"],function(){!function(e,t){function i(e,t){for(var i=e.length;i--&&!t.test(e[i]););return i}var n=window.kendo,r=n.Class,s=e.extend,o=e.proxy,a=n.ui.editor,l=a.Dom,d=a.RangeUtils,c=a.EditorUtils,u=a.Command,h=a.Tool,f=a.ToolTemplate,p=a.InlineFormatter,m=a.InlineFormatFinder,g=d.textNodes,v=a.EditorUtils.registerTool,_=n.keys,b=/^\w*:\/\//,k=/[\w\/\$\-_\*\?]/i,w=r.extend({findSuitable:function(e){return l.parentOfType(e,["a"])}}),y=r.extend({init:function(){this.finder=new w},apply:function(e,t){var i,n,r,s,o,a=g(e);if(t.innerHTML){n=d.documentFromRange(e),i=d.getMarkers(e),e.deleteContents(),s=l.create(n,"a",t),e.insertNode(s),o=s.parentNode,"a"==l.name(o)&&l.insertAfter(s,o),l.emptyNode(o)&&l.remove(o);for(var c=s,u=0;u<i.length;u++)l.insertAfter(i[u],c),c=i[u];i.length&&(l.insertBefore(n.createTextNode("\ufeff"),i[1]),l.insertAfter(n.createTextNode("\ufeff"),i[1]),e.setStartBefore(i[0]),e.setEndAfter(i[i.length-1]))}else(r=new p([{tags:["a"]}],t)).finder=this.finder,r.apply(a)}}),x=u.extend({init:function(e){e.formatter={toggle:function(e){new p([{tags:["a"]}]).remove(g(e))}},this.options=e,u.fn.init.call(this,e)}}),C=u.extend({init:function(e){this.options=e,u.fn.init.call(this,e),this.formatter=new y,e.url?this.exec=function(){this.formatter.apply(e.range,{href:e.url,innerHTML:e.text||e.url,target:e.target})}:(this.attributes=null,this.async=!0)},_dialogTemplate:function(){return n.template("<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\"><div class='k-edit-label'><label for='k-editor-link-url'>#: messages.linkWebAddress #</label></div><div class='k-edit-field'><input type='text' class='k-input k-textbox' id='k-editor-link-url'></div><div class='k-edit-label k-editor-link-text-row'><label for='k-editor-link-text'>#: messages.linkText #</label></div><div class='k-edit-field k-editor-link-text-row'><input type='text' class='k-input k-textbox' id='k-editor-link-text'></div><div class='k-edit-label'><label for='k-editor-link-title'>#: messages.linkToolTip #</label></div><div class='k-edit-field'><input type='text' class='k-input k-textbox' id='k-editor-link-title'></div><div class='k-edit-label'></div><div class='k-edit-field'><input type='checkbox' class='k-checkbox' id='k-editor-link-target'><label for='k-editor-link-target' class='k-checkbox-label'>#: messages.linkOpenInNewWindow #</label></div><div class='k-edit-buttons k-state-default'><button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button><button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button></div></div>")({messages:this.editor.options.messages})},exec:function(){var t=this.editor.options.messages;this._initialText="",this._range=this.lockRange(!0);var i=g(this._range),n=i.length?this.formatter.finder.findSuitable(i[0]):null,r=i.length&&"img"==l.name(i[0]),s=this.createDialog(this._dialogTemplate(),{title:t.createLink,close:o(this._close,this),visible:!1});n&&(this._range.selectNodeContents(n),i=g(this._range)),this._initialText=this.linkText(i),s.find(".k-dialog-insert").click(o(this._apply,this)).end().find(".k-dialog-close").click(o(this._close,this)).end().find(".k-edit-field input").keydown(o(this._keydown,this)).end().find("#k-editor-link-url").val(this.linkUrl(n)).end().find("#k-editor-link-text").val(this._initialText).end().find("#k-editor-link-title").val(n?n.title:"").end().find("#k-editor-link-target").attr("checked",!!n&&"_blank"==n.target).end().find(".k-editor-link-text-row").toggle(!r),this._dialog=s.data("kendoWindow").center().open(),e("#k-editor-link-url",s).focus().select()},_keydown:function(e){var t=n.keys;e.keyCode==t.ENTER?this._apply(e):e.keyCode==t.ESC&&this._close(e)},_apply:function(t){var i,n,r,s=this._dialog.element,o=e("#k-editor-link-url",s).val(),a=e("#k-editor-link-text",s);o&&"http://"!=o&&(o.indexOf("@")>0&&!/^(\w+:)|(\/\/)/i.test(o)&&(o="mailto:"+o),this.attributes={href:o},(i=e("#k-editor-link-title",s).val())&&(this.attributes.title=i),a.is(":visible")&&((n=a.val())||this._initialText?n&&n!==this._initialText&&(this.attributes.innerHTML=l.stripBom(n)):this.attributes.innerHTML=o),r=e("#k-editor-link-target",s).is(":checked"),this.attributes.target=r?"_blank":null,this.formatter.apply(this._range,this.attributes)),this._close(t),this.change&&this.change()},_close:function(e){e.preventDefault(),this._dialog.destroy(),l.windowFromDocument(d.documentFromRange(this._range)).focus(),this.releaseRange(this._range)},linkUrl:function(e){return e?e.getAttribute("href",2):"http://"},linkText:function(e){var t,i="";for(t=0;t<e.length;t++)i+=e[t].nodeValue;return l.stripBom(i||"")},redo:function(){var e=this.lockRange(!0);this.formatter.apply(e,this.attributes),this.releaseRange(e)}}),S=u.extend({init:function(e){u.fn.init.call(this,e),this.formatter=new y},exec:function(){var e=this.detectLink();if(e){var t=this.getRange(),i=new n.ui.editor.Marker,r=t.cloneRange();r.setStart(e.start.node,e.start.offset),r.setEnd(e.end.node,e.end.offset),t=this.lockRange(),i.add(r),this.formatter.apply(r,{href:this._ensureWebProtocol(e.text)}),i.remove(r),this.releaseRange(t)}},detectLink:function(){var e=this.getRange(),t=new R({node:e.startContainer,offset:e.startOffset,cancelAtNode:function(e){return e&&"a"===l.name(e)}}),i=new D(t);return i.detectLink()},changesContent:function(){return!!this.detectLink()},_ensureWebProtocol:function(e){var t=this._hasProtocolPrefix(e);return t?e:this._prefixWithWebProtocol(e)},_hasProtocolPrefix:function(e){return b.test(e)},_prefixWithWebProtocol:function(e){return"http://"+e}}),T=h.extend({init:function(t){this.options=t,this.finder=new m([{tags:["a"]}]),h.fn.init.call(this,e.extend(t,{command:x}))},initialize:function(e,t){h.fn.initialize.call(this,e,t),e.addClass("k-state-disabled")},update:function(e,t){e.toggleClass("k-state-disabled",!this.finder.isFormatted(t)).removeClass("k-state-hover")}}),D=r.extend({init:function(e){this.traverser=e,this.start=F(),this.end=F(),this.text=""},detectLink:function(){var t=this.traverser.node,i=this.traverser.offset;if(l.isDataNode(t)){var n=t.data.substring(0,i);if(/\s{2}$/.test(l.stripBom(n)))return}else if(0===i){var r=l.closestEditableOfType(t,l.blockElements);r&&r.previousSibling&&this.traverser.init({node:r.previousSibling})}if(this.traverser.traverse(e.proxy(this._detectEnd,this)),!this.end.blank()&&(this.traverser=this.traverser.clone(this.end),this.traverser.traverse(e.proxy(this._detectStart,this)),!this._isLinkDetected())){var s=this.traverser.extendOptions(this.start),o=new A(s);o.traverse(e.proxy(this._skipStartPuntuation,this)),this._isLinkDetected()||(this.start=F())}return this.start.blank()?null:{start:this.start,end:this.end,text:this.text}},_isLinkDetected:function(){return b.test(this.text)||/^w{3}\./i.test(this.text)},_detectEnd:function(e,t){var n=i(e,k);if(n>-1)return this.end.node=t,this.end.offset=n+1,!1},_detectStart:function(e,t){var n=i(e,/\s/),r=n+1;if(this.text=e.substring(r)+this.text,this.start.node=t,this.start.offset=r,n>-1)return!1},_skipStartPuntuation:function(e,t,i){var n=function(e,t){var i=t.exec(e);return i?i.index:-1}(e,/\w/),r=n;if(-1===n&&(r=e.length),this.text=this.text.substring(r),this.start.node=t,this.start.offset=r+(0|i),n>-1)return!1}}),F=function(){return{node:null,offset:null,blank:function(){return null===this.node&&null===this.offset}}},E=r.extend({init:function(t){this.node=t.node,this.offset=void 0===t.offset?l.isDataNode(this.node)&&this.node.length||0:t.offset,this.cancelAtNode=t.cancelAtNode||this.cancelAtNode||e.noop},traverse:function(e){e&&(this.cancel=!1,this._traverse(e,this.node,this.offset))},_traverse:function(e,t,i){if(t&&!this.cancel){if(3!==t.nodeType){var n=this.edgeNode(t);return this.cancel=this.cancel||this.cancelAtNode(n),this._traverse(e,n)}var r=t.data;void 0!==i&&(r=this.subText(r,i)),this.cancel=!1===e(r,t,i);var s=this.next(t);if(!s)for(var o=t.parentNode;!s&&l.isInline(o);)s=this.next(o),o=o.parentNode;this.cancel=this.cancel||this.cancelAtNode(s),this._traverse(e,s)}},extendOptions:function(t){return e.extend({node:this.node,offset:this.offset,cancelAtNode:this.cancelAtNode},t||{})},edgeNode:function(e){},next:function(e){},subText:function(e,t){}}),R=E.extend({subText:function(e,t){return e.substring(0,t)},next:function(e){return e.previousSibling},edgeNode:function(e){return e.lastChild},clone:function(e){var t=this.extendOptions(e);return new R(t)}}),A=E.extend({subText:function(e,t){return e.substring(t)},next:function(e){return e.nextSibling},edgeNode:function(e){return e.firstChild},clone:function(e){var t=this.extendOptions(e);return new A(t)}});s(n.ui.editor,{LinkFormatFinder:w,LinkFormatter:y,UnlinkCommand:x,LinkCommand:C,AutoLinkCommand:S,UnlinkTool:T,DomTextLinkDetection:D,LeftDomTextTraverser:R,RightDomTextTraverser:A}),v("createLink",new h({key:"K",ctrl:!0,command:C,template:new f({template:c.buttonTemplate,title:"Create Link"})})),v("unlink",new T({key:"K",ctrl:!0,shift:!0,template:new f({template:c.buttonTemplate,title:"Remove Link"})})),v("autoLink",new h({key:[_.ENTER,_.SPACEBAR],keyPressCommand:!0,command:S}))}(window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("editor/file",["kendo.filebrowser","editor/link"],function(){!function(e,t){var i=window.kendo,n=e.extend,r=i.ui.editor,s=r.EditorUtils,o=r.Dom,a=s.registerTool,l=r.ToolTemplate,d=r.RangeUtils,c=r.Command,u=r.LinkFormatter,h=d.textNodes,f=i.keys,p="#k-editor-file-url",m="#k-editor-file-title",g=c.extend({init:function(e){c.fn.init.call(this,e),this.formatter=new u,this.async=!0,this.attributes={}},insertFile:function(e,t){var i=this.attributes,n=d.documentFromRange(t);if(i.href&&"http://"!=i.href){if(!e)return e=o.create(n,"a",{href:i.href}),e.innerHTML=i.innerHTML,t.deleteContents(),t.insertNode(e),e.nextSibling||o.insertAfter(n.createTextNode("\ufeff"),e),t.setStartAfter(e),t.setEndAfter(e),d.selectRange(t),!0;o.attr(e,i)}return!1},_dialogTemplate:function(e){return i.template('<div class="k-editor-dialog k-popup-edit-form k-edit-form-container"># if (showBrowser) { #<div class="k-filebrowser"></div># } #<div class=\'k-edit-label\'><label for="k-editor-file-url">#: messages.fileWebAddress #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-file-url"></div><div class=\'k-edit-label\'><label for="k-editor-file-title">#: messages.fileTitle #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-file-title"></div><div class="k-edit-buttons k-state-default"><button class="k-dialog-insert k-button k-primary">#: messages.dialogInsert #</button><button class="k-dialog-close k-button">#: messages.dialogCancel #</button></div></div>')({messages:this.editor.options.messages,showBrowser:e})},redo:function(){var e=this.lockRange();this.formatter.apply(e,this.attributes),this.releaseRange(e)},exec:function(){function e(e){var i=r.element,n=i.find(p).val().replace(/ /g,"%20"),o=i.find(m).val();s.attributes={href:n,innerHTML:""!==o?o:n},c=s.insertFile(u,a),t(e),s.change&&s.change()}function t(e){e.preventDefault(),r.destroy(),o.windowFromDocument(d.documentFromRange(a)).focus(),c||s.releaseRange(a)}var r,s=this,a=s.lockRange(),l=h(a),c=!1,u=l.length?this.formatter.finder.findSuitable(l[0]):null,g=s.editor.options,v=g.messages,_=g.fileBrowser,b=!!(i.ui.FileBrowser&&_&&_.transport&&void 0!==_.transport.read),k={title:v.insertFile,visible:!1,resizable:b};k.close=t,b&&(k.width=750),r=this.createDialog(s._dialogTemplate(b),k).toggleClass("k-filebrowser-dialog",b).find(".k-dialog-insert").click(e).end().find(".k-dialog-close").click(t).end().find(".k-edit-field input").keydown(function(i){i.keyCode==f.ENTER?e(i):i.keyCode==f.ESC&&t(i)}).end().find(p).val(u?u.getAttribute("href",2):"http://").end().find(m).val(u?u.title:"").end().data("kendoWindow"),b&&(s._fileBrowser=new i.ui.FileBrowser(r.element.find(".k-filebrowser"),n({},_,{change:function(){r.element.find(p).val(this.value())},apply:e}))),r.center().open(),r.element.find(p).focus().select()}});i.ui.editor.FileCommand=g,a("insertFile",new r.Tool({command:g,template:new l({template:s.buttonTemplate,title:"Insert File"})}))}(window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("editor/image",["kendo.imagebrowser","editor/link"],function(){!function(e,t){var i=window.kendo,n=e.extend,r=i.ui.editor,s=r.EditorUtils,o=r.Dom,a=s.registerTool,l=r.ToolTemplate,d=r.RangeUtils,c=r.Command,u=i.keys,h="#k-editor-image-url",f="#k-editor-image-title",p="#k-editor-image-width",m="#k-editor-image-height",g=c.extend({init:function(e){c.fn.init.call(this,e),this.async=!0,this.attributes={}},insertImage:function(e,t){var i=this.attributes,n=d.documentFromRange(t);if(i.src&&"http://"!=i.src){var r=function(){setTimeout(function(){i.width||e.removeAttribute("width"),i.height||e.removeAttribute("height"),e.removeAttribute("complete")})};if(!e)return e=o.create(n,"img",i),e.onload=e.onerror=r,t.deleteContents(),t.insertNode(e),e.nextSibling||o.insertAfter(n.createTextNode("\ufeff"),e),r(),t.setStartAfter(e),t.setEndAfter(e),d.selectRange(t),!0;e.onload=e.onerror=r,o.attr(e,i),r()}return!1},_dialogTemplate:function(e){return i.template('<div class="k-editor-dialog k-popup-edit-form k-edit-form-container"># if (showBrowser) { #<div class="k-filebrowser k-imagebrowser"></div># } #<div class=\'k-edit-label\'><label for="k-editor-image-url">#: messages.imageWebAddress #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-url"></div><div class=\'k-edit-label\'><label for="k-editor-image-title">#: messages.imageAltText #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-title"></div><div class=\'k-edit-label\'><label for="k-editor-image-width">#: messages.imageWidth #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-width"></div><div class=\'k-edit-label\'><label for="k-editor-image-height">#: messages.imageHeight #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-height"></div><div class="k-edit-buttons k-state-default"><button class="k-dialog-insert k-button k-primary">#: messages.dialogInsert #</button><button class="k-dialog-close k-button">#: messages.dialogCancel #</button></div></div>')({messages:this.editor.options.messages,showBrowser:e})},redo:function(){var e=this.lockRange();this.insertImage(d.image(e),e)||this.releaseRange(e)},exec:function(){function e(e){var i=r.element,n=parseInt(i.find(p).val(),10),o=parseInt(i.find(m).val(),10);s.attributes={src:i.find(h).val().replace(/ /g,"%20"),alt:i.find(f).val()},s.attributes.width=null,s.attributes.height=null,!isNaN(n)&&n>0&&(s.attributes.width=n),!isNaN(o)&&o>0&&(s.attributes.height=o),l=s.insertImage(c,a),t(e),s.change&&s.change()}function t(e){e.preventDefault(),r.destroy(),o.windowFromDocument(d.documentFromRange(a)).focus(),l||s.releaseRange(a)}var r,s=this,a=s.lockRange(),l=!1,c=d.image(a),g=c&&c.getAttribute("width")||"",v=c&&c.getAttribute("height")||"",_=s.editor.options,b=_.messages,k=_.imageBrowser,w=!!(i.ui.ImageBrowser&&k&&k.transport&&void 0!==k.transport.read),y={title:b.insertImage,visible:!1,resizable:w};y.close=t,w&&(y.width=750),r=this.createDialog(s._dialogTemplate(w),y).toggleClass("k-filebrowser-dialog",w).find(".k-dialog-insert").click(e).end().find(".k-dialog-close").click(t).end().find(".k-edit-field input").keydown(function(i){i.keyCode==u.ENTER?e(i):i.keyCode==u.ESC&&t(i)}).end().find(h).val(c?c.getAttribute("src",2):"http://").end().find(f).val(c?c.alt:"").end().find(p).val(g).end().find(m).val(v).end().data("kendoWindow"),w&&(this._imageBrowser=new i.ui.ImageBrowser(r.element.find(".k-imagebrowser"),n({},k,{change:function(){r.element.find(h).val(this.value())},apply:e}))),r.center().open(),r.element.find(h).focus().select()}});i.ui.editor.ImageCommand=g,a("insertImage",new r.Tool({command:g,template:new l({template:s.buttonTemplate,title:"Insert Image"})}))}(window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("editor/components",["editor/image"],function(){!function(e,t){var i=window.kendo,n=i.ui.DropDownList,r=i.ui.editor.Dom,s=n.extend({init:function(t,r){var s=this;n.fn.init.call(s,t,r),i.support.mobileOS.ios&&(this._initSelectOverlay(),this.bind("dataBound",e.proxy(this._initSelectOverlay,this))),s.text(s.options.title),s.bind("open",function(){if(s.options.autoSize){var e,t=s.list;t.css({whiteSpace:"nowrap",width:"auto"}),(e=t.width())?e+=20:e=s._listWidth,t.css("width",e+i.support.scrollbar()),s._listWidth=e}})},options:{name:"SelectBox",index:-1},_initSelectOverlay:function(){for(var t,n=this,r=n.value(),s=this.dataSource.view(),o="",a=i.htmlEncode,l=0;l<s.length;l++)t=s[l],o+="<option value='"+a(t.value)+"'",t.value==r&&(o+=" selected"),o+=">"+a(t.text)+"</option>";var d=e("<select class='k-select-overlay'>"+o+"</select>"),c=e(this.element).closest(".k-widget");c.next(".k-select-overlay").remove(),d.insertAfter(c),d.on("change",function(){n.value(this.value),n.trigger("change")})},value:function(e){var t=n.fn.value.call(this,e);if(void 0===e)return t;n.fn.value.call(this)||this.text(this.options.title)},decorate:function(t){var i,n,s,o,a=this.dataSource,l=a.data();for(t&&this.list.css("background-color",r.getEffectiveBackground(e(t))),i=0;i<l.length;i++)n=l[i].tag||"span",s=l[i].className,o=(o=r.inlineStyle(t,n,{className:s})).replace(/"/g,"'"),l[i].style=o+";display:inline-block";a.trigger("change")}});i.ui.plugin(s),i.ui.editor.SelectBox=s}(window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("editor/indent",["editor/components"],function(){!function(e,t){function i(i,n){var r="rtl"==e(i).css("direction"),s=r?"Right":"Left",o="td"!=a.name(i)?"margin"+s:"padding"+s;if(n===t)return i.style[o]||0;n>0?i.style[o]=n+"px":(i.style[o]="",i.style.cssText||i.removeAttribute("style"))}var n=window.kendo,r=n.Class,s=e.extend,o=n.ui.editor,a=o.Dom,l=o.EditorUtils,d=l.registerTool,c=o.Command,u=o.Tool,h=o.ToolTemplate,f=o.RangeUtils,p=a.blockElements,m=o.BlockFormatFinder,g=o.BlockFormatter,v=r.extend({init:function(){this.finder=new m([{tags:a.blockElements}])},apply:function(t){var n,r,s,o,l,d=this.finder.findSuitable(t),c=[];if(d.length){for(n=0,r=d.length;n<r;n++)a.is(d[n],"li")?e(d[n]).index()?e.inArray(d[n].parentNode,c)<0&&c.push(d[n]):c.push(d[n].parentNode):c.push(d[n]);for(;c.length;)if(s=c.shift(),a.is(s,"li")){o=s.parentNode;var u=(l=e(s).prev("li")).find("ul,ol").last(),h=e(s).children("ul,ol")[0];if(h&&l[0])u[0]?(u.append(s),u.append(e(h).children()),a.remove(h)):(l.append(h),h.insertBefore(s,h.firstChild));else for((h=l.children("ul,ol")[0])||(h=a.create(s.ownerDocument,a.name(o)),l.append(h));s&&s.parentNode==o;)h.appendChild(s),s=c.shift()}else{var f=parseInt(i(s),10)+30;i(s,f);for(var p=0;p<c.length;p++)e.contains(s,c[p])&&c.splice(p,1)}}else{var m=new g([{tags:["p"]}],{style:{marginLeft:30}});m.apply(t)}},remove:function(t){var n,r,s,o,a,l,d,c,u=this.finder.findSuitable(t);for(r=0,s=u.length;r<s;r++){if((d=e(u[r])).is("li")){if(o=d.parent(),(a=o.parent()).is("li,ul,ol")&&!i(o[0])){if(n&&e.contains(n,a[0]))continue;(l=d.nextAll("li")).length&&e(o[0].cloneNode(!1)).appendTo(d).append(l),a.is("li")?d.insertAfter(a):d.appendTo(a),o.children("li").length||o.remove();continue}if(n==o[0])continue;n=o[0]}else n=u[r];c=parseInt(i(n),10)-30,i(n,c)}}}),_=c.extend({init:function(e){e.formatter={toggle:function(e){(new v).apply(f.nodes(e))}},c.fn.init.call(this,e)}}),b=c.extend({init:function(e){e.formatter={toggle:function(e){(new v).remove(f.nodes(e))}},c.fn.init.call(this,e)}}),k=u.extend({init:function(e){u.fn.init.call(this,e),this.finder=new m([{tags:p}])},initialize:function(e,t){u.fn.initialize.call(this,e,t),e.addClass("k-state-disabled")},update:function(t,n){var r,s,o,l,d=this.finder.findSuitable(n);for(o=0,l=d.length;o<l;o++)if((r=i(d[o]))||(s=e(d[o]).parents("ul,ol").length,r=a.is(d[o],"li")&&(s>1||i(d[o].parentNode))||a.ofType(d[o],["ul","ol"])&&s>0),r)return void t.removeClass("k-state-disabled");t.addClass("k-state-disabled").removeClass("k-state-hover")}});s(o,{IndentFormatter:v,IndentCommand:_,OutdentCommand:b,OutdentTool:k}),d("indent",new u({command:_,template:new h({template:l.buttonTemplate,title:"Indent"})})),d("outdent",new k({command:b,template:new h({template:l.buttonTemplate,title:"Outdent"})}))}(window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("editor/viewhtml",["editor/indent"],function(){!function(e,t){var i=window.kendo,n=e.extend,r=i.ui.editor,s=r.EditorUtils,o=r.Command,a=r.Tool,l=r.ToolTemplate,d=o.extend({init:function(e){this.options=e,o.fn.init.call(this,e),this.attributes=null,this.async=!0},exec:function(){function t(e){e.preventDefault(),o.data("kendoWindow").destroy(),r.focus()}var n=this,r=n.editor,s=r.options.messages,o=e(i.template(d.template)(s)).appendTo(document.body),a=d.indent(r.value()),l=".k-editor-textarea";this.createDialog(o,{title:s.viewHtml,close:t,visible:!1}).find(l).val(a).end().find(".k-dialog-update").click(function(e){r.value(o.find(l).val()),t(e),n.change&&n.change();r.trigger("change")}).end().find(".k-dialog-close").click(t).end().data("kendoWindow").center().open(),o.find(l).focus()}});n(d,{template:"<div class='k-editor-dialog k-popup-edit-form k-edit-form-container k-viewhtml-dialog'><textarea class='k-editor-textarea k-input'></textarea><div class='k-edit-buttons k-state-default'><button class='k-dialog-update k-button k-primary'>#: dialogUpdate #</button><button class='k-dialog-close k-button'>#: dialogCancel #</button></div></div>",indent:function(e){return e.replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi,"</$1>\n").replace(/<(ul|ol)([^>]*)><li/gi,"<$1$2>\n<li").replace(/<br \/>/gi,"<br />\n").replace(/\n$/,"")}}),i.ui.editor.ViewHtmlCommand=d,r.EditorUtils.registerTool("viewHtml",new a({command:d,template:new l({template:s.buttonTemplate,title:"View HTML"})}))}(window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("editor/formatting",["editor/viewhtml"],function(){!function(e){var t=window.kendo,i=t.ui.editor,n=i.Tool,r=i.ToolTemplate,s=i.DelayedExecutionTool,o=i.Command,a=i.Dom,l=i.EditorUtils,d=i.RangeUtils,c=l.registerTool,u=s.extend({init:function(e){n.fn.init.call(this,t.deepExtend({},this.options,e)),this.type="kendoSelectBox",this.finder={getFormat:function(){return""}}},options:{items:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],width:110},toFormattingItem:function(e){var t=e.value;if(!t)return e;if(e.tag||e.className)return e;var i=t.indexOf(".");return 0===i?e.className=t.substring(1):-1==i?e.tag=t:(e.tag=t.substring(0,i),e.className=t.substring(i+1)),e},command:function(t){var n=t.value;return n=this.toFormattingItem(n),new i.FormatCommand({range:t.range,formatter:function(){var t=(n.tag||n.context||"span").split(","),r=[{tags:t,attr:{className:n.className||""}}];return e.inArray(t[0],a.inlineElements)>=0?new i.GreedyInlineFormatter(r):new i.GreedyBlockFormatter(r)}})},initialize:function(e,i){var r=i.editor,s=this.options,o=s.name,a=this;e.width(s.width),e.kendoSelectBox({dataTextField:"text",dataValueField:"value",dataSource:s.items||r.options[o],title:r.options.messages[o],autoSize:!0,change:function(){var e=this.dataItem();e&&n.exec(r,o,e.toJSON())},dataBound:function(){var e,t=this.dataSource.data();for(e=0;e<t.length;e++)t[e]=a.toFormattingItem(t[e])},highlightFirst:!1,template:t.template('<span unselectable="on" style="display:block;#=(data.style||"")#">#:data.text#</span>')}),e.addClass("k-decorated").closest(".k-widget").removeClass("k-"+o).find("*").addBack().attr("unselectable","on")},getFormattingValue:function(t,i){for(var n=0;n<t.length;n++){var r=t[n],s=r.tag||r.context||"",o=r.className?"."+r.className:"",a=s+o,l=e(i[0]).closest(a)[0];if(l){if(1==i.length)return r.value;for(var d=1;d<i.length&&e(i[d]).closest(a)[0];d++)if(d==i.length-1)return r.value}}return""},update:function(t,i){var n=e(t).data(this.type);if(n){var r,o,l=n.dataSource,d=l.data(),c=a.commonAncestor.apply(null,i);if(c==a.closestEditable(c)||this._ancestor!=c){for(this._ancestor=c,r=0;r<d.length;r++)o=d[r].context,d[r].visible=!o||!!e(c).closest(o).length;l.filter([{field:"visible",operator:"eq",value:!0}]),s.fn.update.call(this,t,i),n.value(this.getFormattingValue(l.view(),i)),n.wrapper.toggleClass("k-state-disabled",!l.view().length)}}},destroy:function(){this._ancestor=null}}),h=o.extend({exec:function(){var e=this.lockRange(!0);this.tagsToClean=this.options.remove||"strong,em,span,sup,sub,del,b,i,u,font".split(","),d.wrapSelectedElements(e);for(var t=d.mapAll(e,function(e){return e}),i=t.length-1;i>=0;i--)this.clean(t[i]);this.releaseRange(e)},clean:function(n){if(n&&!a.isMarker(n)){var r=a.name(n);if("ul"==r||"ol"==r){var s=new i.ListFormatter(r),o=n.previousSibling,l=n.nextSibling;for(s.unwrap(n);o&&o!=l;o=o.nextSibling)this.clean(o)}else if("blockquote"==r)a.changeTag(n,"p");else if(1!=n.nodeType||a.insignificant(n))!function(e){var n=a.closestEditableOfType(e,["li"]);if(n){var r=new i.ListFormatter(a.name(n.parentNode)),s=t.ui.editor.W3CRange.fromNode(e);s.selectNode(n),r.toggle(s)}}(n);else{for(var d=n.childNodes.length-1;d>=0;d--)this.clean(n.childNodes[d]);n.removeAttribute("style"),n.removeAttribute("class")}e.inArray(r,this.tagsToClean)>-1&&a.unwrap(n)}}});e.extend(i,{FormattingTool:u,CleanFormatCommand:h}),c("formatting",new u({template:new r({template:l.dropDownListTemplate,title:"Format"})})),c("cleanFormatting",new n({command:h,template:new r({template:l.buttonTemplate,title:"Clean formatting"})}))}(window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("editor/toolbar",["editor/formatting"],function(){!function(e,t){var i=window.kendo,n=i.ui,r=n.editor,s=n.Widget,o=e.extend,a=e.proxy,l=i.keys,d=".kendoEditor",c=i.ui.editor.EditorUtils,u=i.ui.editor.ToolTemplate,h=i.ui.editor.Tool,f="overflowAnchor",p=".k-tool-group:visible a.k-tool:not(.k-state-disabled),.k-tool.k-overflow-anchor,.k-tool-group:visible .k-widget.k-colorpicker,.k-tool-group:visible .k-selectbox,.k-tool-group:visible .k-dropdown,.k-tool-group:visible .k-combobox .k-input",m=h.extend({initialize:function(t,i){t.attr({unselectable:"on"});var n=i.editor.toolbar;t.on("click",e.proxy(function(){this.overflowPopup.toggle()},n))},options:{name:f},command:e.noop,update:e.noop,destroy:e.noop});c.registerTool(f,new m({key:"",ctrl:!0,template:new u({template:c.overflowAnchorTemplate})}));var g=s.extend({init:function(e,t){var n=this;t=o({},t,{name:"EditorToolbar"}),s.fn.init.call(n,e,t),t.popup&&n._initPopup(),t.resizable&&t.resizable.toolbar&&(n._resizeHandler=i.onResize(function(){n.resize()}),n.element.addClass("k-toolbar-resizable"))},events:["execute"],groups:{basic:["bold","italic","underline","strikethrough"],scripts:["subscript","superscript"],alignment:["justifyLeft","justifyCenter","justifyRight","justifyFull"],links:["insertImage","insertFile","createLink","unlink"],lists:["insertUnorderedList","insertOrderedList","indent","outdent"],tables:["createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn"],advanced:["viewHtml","cleanFormatting","print","pdf"],fonts:["fontName","fontSize"],colors:["foreColor","backColor"]},overflowFlaseTools:["formatting","fontName","fontSize","foreColor","backColor","insertHtml"],_initPopup:function(){this.window=e(this.element).wrap("<div class='editorToolbarWindow k-header' />").parent().prepend("<button class='k-button k-button-bare k-editortoolbar-dragHandle'><span class='k-icon k-i-move' /></button>").kendoWindow({title:!1,resizable:!1,draggable:{dragHandle:".k-editortoolbar-dragHandle"},animation:{open:{effects:"fade:in"},close:{effects:"fade:out"}},minHeight:42,visible:!1,autoFocus:!1,actions:[],dragend:function(){this._moved=!0}}).on("mousedown",function(t){e(t.target).is(".k-icon")||t.preventDefault()}).data("kendoWindow")},_toggleOverflowStyles:function(e,t){e.find("li").toggleClass("k-item k-state-default",t).find(".k-tool:not(.k-state-disabled),.k-overflow-button").toggleClass("k-overflow-button k-button",t)},_initOverflowPopup:function(t){var i=this;i.overflowPopup=e("<ul class='k-editor-overflow-popup k-overflow-container k-list-container'></ul>").appendTo("body").kendoPopup({anchor:t,origin:"bottom right",position:"top right",copyAnchorStyles:!1,open:function(e){this.element.is(":empty")&&e.preventDefault(),i._toggleOverflowStyles(this.element,!0)},activate:a(i.focusOverflowPopup,i)}).data("kendoPopup")},items:function(){var e,t,i=this.options.resizable&&this.options.resizable.toolbar;return t=this.element.children().find("> *, select"),i&&(e=this.overflowPopup,t=t.add(e.element.children().find("> *"))),t},focused:function(){return this.element.find(".k-state-focused").length>0},toolById:function(e){var t,i=this.tools;for(t in i)if(t.toLowerCase()==e)return i[t]},toolGroupFor:function(t){var i,n=this.groups;if(this.isCustomTool(t))return"custom";for(i in n)if(e.inArray(t,n[i])>=0)return i},bindTo:function(t){var i=this,n=i.window;i._editor&&i._editor.unbind("select",a(i.resize,i)),i._editor=t,i.options.resizable&&i.options.resizable.toolbar&&t.options.tools.push(f),i.tools=i.expandTools(t.options.tools),i.render(),i.element.find(".k-combobox .k-input").keydown(function(t){var i=e(this).closest(".k-combobox").data("kendoComboBox"),n=t.keyCode;n==l.RIGHT||n==l.LEFT?i.close():n==l.DOWN&&(i.dropDown.isOpened()||(t.stopImmediatePropagation(),i.open()))}),i._attachEvents(),i.items().each(function(){var n=i._toolName(this),r="more"!==n?i.tools[n]:i.tools.overflowAnchor,s=r&&r.options,o=t.options.messages,a=s&&s.tooltip||o[n],l=e(this);if(r&&r.initialize){if("fontSize"==n||"fontName"==n){var d=o[n+"Inherit"];l.find("input").val(d).end().find("span.k-input").text(d).end()}r.initialize(l,{title:i._appendShortcutSequence(a,r),editor:i._editor}),l.closest(".k-widget",i.element).addClass("k-editor-widget"),l.closest(".k-colorpicker",i.element).next(".k-colorpicker").addClass("k-editor-widget")}}),t.bind("select",a(i.resize,i)),i.update(),n&&n.wrapper.css({top:"",left:"",width:""})},show:function(){var e,t,i,n=this.window,r=this.options.editor;n&&(e=n.wrapper,t=r.element,e.is(":visible")&&this.window.options.visible||(e[0].style.width||e.width(t.outerWidth()-parseInt(e.css("border-left-width"),10)-parseInt(e.css("border-right-width"),10)),n._moved||(i=t.offset(),e.css({top:Math.max(0,parseInt(i.top,10)-e.outerHeight()-parseInt(this.window.element.css("padding-bottom"),10)),left:Math.max(0,parseInt(i.left,10))})),n.open()))},hide:function(){this.window&&this.window.close()},focus:function(){var e=this.element,t=this._editor.element.attr("tabIndex");e.attr("tabIndex",t||0).focus().find(p).first().focus(),t||0===t||e.removeAttr("tabIndex")},focusOverflowPopup:function(){var e=this.overflowPopup.element,t=this._editor.element.attr("tabIndex");e.closest(".k-animation-container").addClass("k-overflow-wrapper"),e.attr("tabIndex",t||0).find(p).first().focus(),t||0===t||e.removeAttr("tabIndex")},_appendShortcutSequence:function(e,t){if(!t.key)return e;var i=e+" (";return t.ctrl&&(i+="Ctrl + "),t.shift&&(i+="Shift + "),t.alt&&(i+="Alt + "),i+=t.key+")"},_nativeTools:["insertLineBreak","insertParagraph","redo","undo","autoLink"],tools:{},isCustomTool:function(e){return!(e in i.ui.Editor.defaultTools)},expandTools:function(t){var n,s,a,l,d=this._nativeTools,c=i.deepExtend({},i.ui.Editor.defaultTools),u={};for(s=0;s<t.length;s++)n=t[s],l=n.name,e.isPlainObject(n)?l&&c[l]?(u[l]=o({},c[l]),o(u[l].options,n)):((a=o({cssClass:"k-i-custom",type:"button",title:""},n)).name||(a.name="custom"),a.cssClass="k-"+("custom"==a.name?"i-custom":a.name),a.template||"button"!=a.type||(a.template=r.EditorUtils.buttonTemplate,a.title=a.title||a.tooltip),u[l]={options:a}):c[n]&&(u[n]=c[n]);for(s=0;s<d.length;s++)u[d[s]]||(u[d[s]]=c[d[s]]);return u},render:function(){function t(t){var n;return t.getHtml?n=t.getHtml():(e.isFunction(t)||(t=i.template(t)),n=t(s)),e.trim(n)}function n(){h.children().length&&(y&&(h.data("position",w),w++),h.appendTo(_))}function r(t){t!==f?(h=e("<li class='k-tool-group' role='presentation' />")).data("overflow",-1===e.inArray(t,x)):h=e("<li class='k-overflow-tools' />")}var s,o,l,d,c,u,h,p,m=this,g=m.tools,v=m._editor.element,_=m.element.empty(),b=m._editor.options.tools,k=i.support.browser,w=0,y=m.options.resizable&&m.options.resizable.toolbar,x=this.overflowFlaseTools;for(_.empty(),b.length&&(d=b[0].name||b[0]),r(d),p=0;p<b.length;p++)d=b[p].name||b[p],!(s=g[d]&&g[d].options)&&e.isPlainObject(d)&&(s=d),o=s&&s.template,"break"==d&&(n(),e("<li class='k-row-break' />").appendTo(m.element),r(d)),o&&(u=m.toolGroupFor(d),c==u&&d!=f||(n(),r(d),c=u),o=t(o),l=e(o).appendTo(h),"custom"==u&&(n(),r(d)),s.exec&&l.hasClass("k-tool")&&l.click(a(s.exec,v[0])));n(),e(m.element).children(":has(> .k-tool)").addClass("k-button-group"),m.options.popup&&k.msie&&k.version<9&&m.window.wrapper.find("*").attr("unselectable","on"),m.updateGroups(),y&&m._initOverflowPopup(m.element.find(".k-overflow-anchor")),m.angular("compile",function(){return{elements:m.element}})},updateGroups:function(){e(this.element).children().each(function(){e(this).children().filter(function(){return!e(this).hasClass("k-state-disabled")}).removeClass("k-group-end").first().addClass("k-group-start").end().last().addClass("k-group-end").end()})},decorateFrom:function(t){this.items().filter(".k-decorated").each(function(){var i=e(this).data("kendoSelectBox");i&&i.decorate(t)})},destroy:function(){s.fn.destroy.call(this);var e,t=this.tools;for(e in t)t[e].destroy&&t[e].destroy();this.window&&this.window.destroy(),this._resizeHandler&&i.unbindResize(this._resizeHandler),this.overflowPopup&&this.overflowPopup.destroy()},_attachEvents:function(){var t=this,i="[role=button].k-tool",n=i+":not(.k-state-disabled)",r=t.overflowPopup?t.overflowPopup.element:e([]);t.element.add(r).off(d).on("mouseenter"+d,n,function(){e(this).addClass("k-state-hover")}).on("mouseleave"+d,n,function(){e(this).removeClass("k-state-hover")}).on("mousedown"+d,i,function(e){e.preventDefault()}).on("keydown"+d,p,function(i){function n(e,t,i){var n=t.find(p),r=n.index(o)+e;return i&&(r=Math.max(0,Math.min(n.length-1,r))),n[r]}var r,s,o=this,a=t.options.resizable&&t.options.resizable.toolbar,d=i.keyCode;d==l.RIGHT||d==l.LEFT?e(o).hasClass(".k-dropdown")||(r=n(d==l.RIGHT?1:-1,t.element,!0)):!a||d!=l.UP&&d!=l.DOWN?d==l.ESC?(t.overflowPopup.visible()&&t.overflowPopup.close(),r=t._editor):d!=l.TAB||i.ctrlKey||i.altKey||(s=a&&e(o.parentElement).hasClass("k-overflow-tool-group")?t.overflowPopup.element:t.element,i.shiftKey?r=n(-1,s):(r=n(1,s))||(r=t._editor)):r=n(d==l.DOWN?1:-1,t.overflowPopup.element,!0),r&&(i.preventDefault(),r.focus())}).on("click"+d,n,function(i){var n=e(this);i.preventDefault(),i.stopPropagation(),n.removeClass("k-state-hover"),n.is("[data-popup]")||t._editor.exec(t._toolName(this))}).on("click"+d,"[role=button].k-tool.k-state-disabled",function(e){e.preventDefault()})},_toolName:function(t){if(t){var i=t.className;/k-tool\b/i.test(i)&&(i=t.firstChild.className);var n=e.grep(i.split(" "),function(e){return!/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(e)});return n[0]?n[0].substring(n[0].lastIndexOf("-")+1):"custom"}},refreshTools:function(){var t=this,n=t._editor,r=n.getRange(),s=i.ui.editor.RangeUtils.textNodes(r);s.length||(s=[r.startContainer]),t.items().each(function(){var i=t.tools[t._toolName(this)];i&&i.update&&i.update(e(this),s)}),this.update()},update:function(){this.updateGroups()},_resize:function(e){var t=e.width,i=this.options.resizable&&this.options.resizable.toolbar,n=this.overflowPopup;this.refreshTools(),i&&(n.visible()&&n.close(!0),this._refreshWidths(),this._shrink(t),this._stretch(t),this._toggleOverflowStyles(this.element,!1),this._toggleOverflowStyles(this.overflowPopup.element,!0),this.element.children("li.k-overflow-tools").css("visibility",n.element.is(":empty")?"hidden":"visible"))},_refreshWidths:function(){this.element.children("li").each(function(t,i){var n=e(i);n.data("outerWidth",n.outerWidth(!0))})},_shrink:function(e){var t,i;if(e<this._groupsWidth())for(var n=(i=this._visibleGroups().filter(":not(.k-overflow-tools)")).length-1;n>=0&&(t=i.eq(n),!(e>this._groupsWidth()));n--)this._hideGroup(t)},_stretch:function(e){var t,i;if(e>this._groupsWidth()){i=this._hiddenGroups();for(var n=0;n<i.length&&(t=i.eq(n),!(e<this._groupsWidth())&&this._showGroup(t,e));n++);}},_hiddenGroups:function(){var t=this.overflowPopup,i=this.element.children("li.k-tool-group").filter(":hidden");return(i=i.add(t.element.children("li"))).sort(function(t,i){return e(t).data("position")>e(i).data("position")?1:-1}),i},_visibleGroups:function(){return this.element.children("li.k-tool-group, li.k-overflow-tools").filter(":visible")},_groupsWidth:function(){var t=0;return this._visibleGroups().each(function(){t+=e(this).data("outerWidth")}),Math.ceil(t)},_hideGroup:function(e){if(e.data("overflow")){var t=this.overflowPopup;e.detach().prependTo(t.element).addClass("k-overflow-tool-group")}else e.hide()},_showGroup:function(t,i){var n,r;return!!(t.length&&i>this._groupsWidth()+t.data("outerWidth"))&&(t.hasClass("k-overflow-tool-group")?(0===(n=t.data("position"))?t.detach().prependTo(this.element):(r=this.element.children().filter(function(t,i){return e(i).data("position")===n-1}),t.detach().insertAfter(r)),t.removeClass("k-overflow-tool-group")):t.show(),!0)}});e.extend(r,{Toolbar:g})}(window.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("editor/tables",["editor/toolbar"],function(){!function(e,t){var i=window.kendo,n=e.extend,r=e.proxy,s=i.ui.editor,o=s.Dom,a=s.EditorUtils,l=s.RangeUtils,d=s.Command,c=".kendoEditor",u="k-state-selected",h=s.Tool,f=s.ToolTemplate,p=s.InsertHtmlCommand,m=s.BlockFormatFinder,g=s.EditorUtils.registerTool,v="<td>"+s.emptyElementContent+"</td>",_=new m([{tags:["table"]}]),b=p.extend({_tableHtml:function(e,t){return e=e||1,t=t||1,"<table class='k-table' data-last>"+new Array(e+1).join("<tr>"+new Array(t+1).join(v)+"</tr>")+"</table>"},postProcess:function(t,i){var n=e("table[data-last]",t.document).removeAttr("data-last");i.setStart(n.find("td")[0],0),i.collapse(!0),t.selectRange(i)},exec:function(){var e=this.options;e.html=this._tableHtml(e.rows,e.columns),e.postProcess=this.postProcess,p.fn.exec.call(this)}}),k=h.extend({initialize:function(t,i){h.fn.initialize.call(this,t,i);var n=e(this.options.popupTemplate).appendTo("body").kendoPopup({anchor:t,copyAnchorStyles:!1,open:r(this._open,this),activate:r(this._activate,this),close:r(this._close,this)}).data("kendoPopup");t.click(r(this._toggle,this)).keydown(r(this._keydown,this)),this._editor=i.editor,this._popup=n},popup:function(){return this._popup},_activate:e.noop,_open:function(){this._popup.options.anchor.addClass("k-state-active")},_close:function(){this._popup.options.anchor.removeClass("k-state-active")},_keydown:function(e){var t=i.keys,n=e.keyCode;n==t.DOWN&&e.altKey?this._popup.open():n==t.ESC&&this._popup.close()},_toggle:function(t){var i=e(t.target).closest(".k-tool");i.hasClass("k-state-disabled")||this.popup().toggle()},update:function(e){var t=this.popup();t.wrapper&&"block"==t.wrapper.css("display")&&t.close(),e.removeClass("k-state-hover")},destroy:function(){this._popup.destroy()}}),w=k.extend({init:function(t){this.cols=8,this.rows=6,k.fn.init.call(this,e.extend(t,{command:b,popupTemplate:"<div class='k-ct-popup'>"+new Array(this.cols*this.rows+1).join("<span class='k-ct-cell k-state-disabled' />")+"<div class='k-status'></div></div>"}))},_activate:function(){function t(t){var i=e(window);return{row:Math.floor((t.clientY+i.scrollTop()-u.top)/r)+1,col:Math.floor((t.clientX+i.scrollLeft()-u.left)/n)+1}}var n,r,s=this,o=s._popup.element,a=o.find(".k-ct-cell"),l=a.eq(0),d=a.eq(a.length-1),u=i.getOffset(l),h=i.getOffset(d),f=s.cols,p=s.rows;o.find("*").addBack().attr("unselectable","on"),h.left+=d[0].offsetWidth,h.top+=d[0].offsetHeight,n=(h.left-u.left)/f,r=(h.top-u.top)/p,o.on("mousemove"+c,function(e){s._setTableSize(t(e))}).on("mouseleave"+c,function(){s._setTableSize()}).on("mouseup"+c,function(e){s._exec(t(e))})},_valid:function(e){return e&&e.row>0&&e.col>0&&e.row<=this.rows&&e.col<=this.cols},_exec:function(e){this._valid(e)&&(this._editor.exec("createTable",{rows:e.row,columns:e.col}),this._popup.close())},_setTableSize:function(t){var n=this._popup.element,r=n.find(".k-status"),s=n.find(".k-ct-cell"),o=this.cols,a=this._editor.options.messages;this._valid(t)?(r.text(i.format(a.createTableHint,t.row,t.col)),s.each(function(i){e(this).toggleClass(u,i%o<t.col&&i/o<t.row)})):(r.text(a.dialogCancel),s.removeClass(u))},_keydown:function(e){if(k.fn._keydown.call(this,e),this._popup.visible()){var t=i.keys,n=e.keyCode,r=this._popup.element.find(".k-ct-cell"),s=Math.max(r.filter(".k-state-selected").last().index(),0),o=Math.floor(s/this.cols),a=s%this.cols,l=!1;n!=t.DOWN||e.altKey?n==t.UP?(l=!0,o--):n==t.RIGHT?(l=!0,a++):n==t.LEFT&&(l=!0,a--):(l=!0,o++);var d={row:Math.max(1,Math.min(this.rows,o+1)),col:Math.max(1,Math.min(this.cols,a+1))};n==t.ENTER?this._exec(d):this._setTableSize(d),l&&(e.preventDefault(),e.stopImmediatePropagation())}},_open:function(){var e=this._editor.options.messages;k.fn._open.call(this),this.popup().element.find(".k-status").text(e.dialogCancel).end().find(".k-ct-cell").removeClass(u)},_close:function(){k.fn._close.call(this),this.popup().element.off(c)},update:function(e,t){var i;k.fn.update.call(this,e),i=_.isFormatted(t),e.toggleClass("k-state-disabled",i)}}),y=d.extend({exec:function(){for(var e,t,i=this.lockRange(!0),n=i.endContainer;"td"!=o.name(n);)n=n.parentNode;(e=n.parentNode).children.length,t=e.cloneNode(!0);for(var r=0;r<e.cells.length;r++)t.cells[r].innerHTML=s.emptyElementContent;"before"==this.options.position?o.insertBefore(t,e):o.insertAfter(t,e),this.releaseRange(i)}}),x=d.extend({exec:function(){var e,t,i,n,r=this.lockRange(!0),a=o.closest(r.endContainer,"td"),l=o.closest(a,"table"),d=l.rows,c=this.options.position;for(e=o.findNodeIndex(a,!0),t=0;t<d.length;t++)i=d[t].cells[e],(n=i.cloneNode()).innerHTML=s.emptyElementContent,"before"==c?o.insertBefore(n,i):o.insertAfter(n,i);this.releaseRange(r)}}),C=d.extend({exec:function(){var t,i=this.lockRange(),n=l.mapAll(i,function(t){return e(t).closest("tr")[0]}),r=o.closest(n[0],"table");if(r.rows.length<=n.length)(t=o.next(r))&&!o.insignificant(t)||(t=o.prev(r)),o.remove(r);else for(var s=0;s<n.length;s++){var a=n[s];o.removeTextSiblings(a),t=(t=o.next(a)||o.prev(a)).cells[0],o.remove(a)}t&&(i.setStart(t,0),i.collapse(!0),this.editor.selectRange(i))}}),S=d.extend({exec:function(){var e,t,i=this.lockRange(),n=o.closest(i.endContainer,"td"),r=o.closest(n,"table"),s=r.rows,a=o.findNodeIndex(n,!0),l=s[0].cells.length;if(1==l)(e=o.next(r))&&!o.insignificant(e)||(e=o.prev(r)),o.remove(r);else for(o.removeTextSiblings(n),e=o.next(n)||o.prev(n),t=0;t<s.length;t++)o.remove(s[t].cells[a]);e&&(i.setStart(e,0),i.collapse(!0),this.editor.selectRange(i))}}),T=h.extend({command:function(e){return"delete"==(e=n(e,this.options)).action?"row"==e.type?new C(e):new S(e):"row"==e.type?new y(e):new x(e)},initialize:function(e,t){h.fn.initialize.call(this,e,t),e.addClass("k-state-disabled")},update:function(e,t){var i=!_.isFormatted(t);e.toggleClass("k-state-disabled",i)}});n(i.ui.editor,{PopupTool:k,TableCommand:b,InsertTableTool:w,TableModificationTool:T,InsertRowCommand:y,InsertColumnCommand:x,DeleteRowCommand:C,DeleteColumnCommand:S}),g("createTable",new w({template:new f({template:a.buttonTemplate,popup:!0,title:"Create table"})})),g("addColumnLeft",new T({type:"column",position:"before",template:new f({template:a.buttonTemplate,title:"Add column on the left"})})),g("addColumnRight",new T({type:"column",template:new f({template:a.buttonTemplate,title:"Add column on the right"})})),g("addRowAbove",new T({type:"row",position:"before",template:new f({template:a.buttonTemplate,title:"Add row above"})})),g("addRowBelow",new T({type:"row",template:new f({template:a.buttonTemplate,title:"Add row below"})})),g("deleteRow",new T({type:"row",action:"delete",template:new f({template:a.buttonTemplate,title:"Delete row"})})),g("deleteColumn",new T({type:"column",action:"delete",template:new f({template:a.buttonTemplate,title:"Delete column"})}))}(window.kendo.jQuery)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.editor",["kendo.combobox","kendo.dropdownlist","kendo.resizable","kendo.window","kendo.colorpicker","kendo.imagebrowser","util/undoredostack","editor/main","editor/dom","editor/serializer","editor/range","editor/system","editor/inlineformat","editor/formatblock","editor/linebreak","editor/lists","editor/link","editor/file","editor/image","editor/components","editor/indent","editor/viewhtml","editor/formatting","editor/toolbar","editor/tables"],function(){}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.maskedtextbox",["kendo.core"],function(){return function(e,t){var i=window.kendo,n=i.caret,r=i.keys,s=i.ui,o=s.Widget,a=".kendoMaskedTextBox",l=e.proxy,d=(i.support.propertyChangeEvent?"propertychange":"input")+a,c=o.extend({init:function(t,r){var s,l=this;o.fn.init.call(l,t,r),l._rules=e.extend({},l.rules,l.options.rules),t=l.element,s=t[0],l.wrapper=t,l._tokenize(),l._form(),l.element.addClass("k-textbox").attr("autocomplete","off").on("focus"+a,function(){var e=s.value;e?l._togglePrompt(!0):s.value=l._old=l._emptyMask,l._oldValue=e,l._timeoutId=setTimeout(function(){n(t,0,e?l._maskLength:0)})}).on("focusout"+a,function(){var e=t.val();clearTimeout(l._timeoutId),s.value=l._old="",e!==l._emptyMask&&(s.value=l._old=e),l._change(),l._togglePrompt()}),t.is("[disabled]")||e(l.element).parents("fieldset").is(":disabled")?l.enable(!1):l.readonly(t.is("[readonly]")),l.value(l.options.value||t.val()),i.notify(l)},options:{name:"MaskedTextBox",clearPromptChar:!1,unmaskOnPost:!1,promptChar:"_",culture:"",rules:{},value:"",mask:""},events:["change"],rules:{0:/\d/,9:/\d|\s/,"#":/\d|\s|\+|\-/,L:/[a-zA-Z]/,"?":/[a-zA-Z]|\s/,"&":/\S/,C:/./,A:/[a-zA-Z0-9]/,a:/[a-zA-Z0-9]|\s/},setOptions:function(t){o.fn.setOptions.call(this,t),this._rules=e.extend({},this.rules,this.options.rules),this._tokenize(),this._unbindInput(),this._bindInput(),this.value(this.element.val())},destroy:function(){this.element.off(a),this._formElement&&(this._formElement.off("reset",this._resetHandler),this._formElement.off("submit",this._submitHandler)),o.fn.destroy.call(this)},raw:function(){return this._unmask(this.element.val(),0).replace(new RegExp(this.options.promptChar,"g"),"")},value:function(e){var t=this.element,n=this._emptyMask;if(void 0===e)return this.element.val();null===e&&(e=""),n?(e=this._unmask(e+""),t.val(e?n:""),this._mask(0,this._maskLength,e),e=t.val(),this._oldValue=e,i._activeElement()!==t&&(e===n?t.val(""):this._togglePrompt())):t.val(e)},_togglePrompt:function(e){var t=this.element[0],i=t.value;this.options.clearPromptChar&&(i=e?this._oldValue:i.replace(new RegExp(this.options.promptChar,"g")," "),t.value=this._old=i)},readonly:function(e){this._editable({readonly:void 0===e||e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=void 0===e||e)})},_bindInput:function(){this._maskLength&&this.element.on("keydown"+a,l(this._keydown,this)).on("keypress"+a,l(this._keypress,this)).on("paste"+a,l(this._paste,this)).on(d,l(this._propertyChange,this))},_unbindInput:function(){this.element.off("keydown"+a).off("keypress"+a).off("paste"+a).off(d)},_editable:function(e){var t=this.element,i=e.disable,n=e.readonly;this._unbindInput(),n||i?t.attr("disabled",i).attr("readonly",n).toggleClass("k-state-disabled",i):(t.removeAttr("disabled").removeAttr("readonly").removeClass("k-state-disabled"),this._bindInput())},_change:function(){var e=this.value();e!==this._oldValue&&(this._oldValue=e,this.trigger("change"),this.element.trigger("change"))},_propertyChange:function(){var e,t,r=this.element[0],s=r.value;i._activeElement()===r&&(s===this._old||this._pasting||(t=n(r)[0],e=this._unmask(s.substring(t),t),r.value=this._old=s.substring(0,t)+this._emptyMask.substring(t),this._mask(t,t,e),n(r,t)))},_paste:function(e){var t=this,i=e.target,r=n(i),s=r[0],o=r[1],a=t._unmask(i.value.substring(o),o);t._pasting=!0,setTimeout(function(){var e=i.value,r=e.substring(s,n(i)[0]);i.value=t._old=e.substring(0,s)+t._emptyMask.substring(s),t._mask(s,s,r),s=n(i)[0],t._mask(s,s,a),n(i,s),t._pasting=!1})},_form:function(){var t=this,i=t.element,n=i.attr("form"),r=n?e("#"+n):i.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(i[0].value)})},t._submitHandler=function(){t.element[0].value=t._old=t.raw()},t.options.unmaskOnPost&&r.on("submit",t._submitHandler),t._formElement=r.on("reset",t._resetHandler))},_keydown:function(e){var t,i=e.keyCode,s=this.element[0],o=n(s),a=o[0],l=o[1],d=i===r.BACKSPACE;d||i===r.DELETE?(a===l&&(d?a-=1:l+=1,t=this._find(a,d)),void 0!==t&&t!==a?(d&&(t+=1),n(s,t)):a>-1&&this._mask(a,l,"",d),e.preventDefault()):i===r.ENTER&&this._change()},_keypress:function(e){if(0!==e.which&&!e.metaKey&&!e.ctrlKey&&e.keyCode!==r.ENTER){var t=String.fromCharCode(e.which),i=n(this.element);this._mask(i[0],i[1],t),(e.keyCode===r.BACKSPACE||t)&&e.preventDefault()}},_find:function(e,t){var i=this.element.val()||this._emptyMask,n=1;for(!0===t&&(n=-1);e>-1||e<=this._maskLength;){if(i.charAt(e)!==this.tokens[e])return e;e+=n}return-1},_mask:function(e,t,r,s){var o,a,l,d,c=this.element[0],u=c.value||this._emptyMask,h=this.options.promptChar,f=0;for((e=this._find(e,s))>t&&(t=e),a=this._unmask(u.substring(t),t),o=(r=this._unmask(r,e)).length,r&&(a=a.replace(new RegExp("^_{0,"+o+"}"),"")),r+=a,u=u.split(""),l=r.charAt(f);e<this._maskLength;)u[e]=l||h,l=r.charAt(++f),void 0===d&&f>o&&(d=e),e=this._find(e+1);c.value=this._old=u.join(""),i._activeElement()===c&&(void 0===d&&(d=this._maskLength),n(c,d))},_unmask:function(t,i){if(!t)return"";t=(t+"").split("");for(var n,r,s=0,o=i||0,a=this.options.promptChar,l=t.length,d=this.tokens.length,c="";o<d&&(n=t[s],r=this.tokens[o],n===r||n===a?(c+=n===a?a:"",s+=1,o+=1):"string"!=typeof r?((r.test&&r.test(n)||e.isFunction(r)&&r(n))&&(c+=n,o+=1),s+=1):o+=1,!(s>=l)););return c},_tokenize:function(){for(var e,t,n=[],r=0,s=(this.options.mask||"").split(""),o=s.length,a=0,l="",d=this.options.promptChar,c=i.getCulture(this.options.culture).numberFormat,u=this._rules;a<o;a++)if(e=s[a],t=u[e])n[r]=t,l+=d,r+=1;else{"."===e||","===e?e=c[e]:"$"===e?e=c.currency.symbol:"\\"===e&&(e=s[a+=1]);for(var h=0,f=(e=e.split("")).length;h<f;h++)n[r]=e[h],l+=e[h],r+=1}this.tokens=n,this._emptyMask=l,this._maskLength=l.length}});s.plugin(c)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.pivotgrid",["kendo.dom","kendo.data"],function(){return function(e,t){function i(e){var i="string"==typeof e?[{name:e}]:e,n="[object Array]"===U.call(i)?i:i!==t?[i]:[];return $(n,function(e){return"string"==typeof e?{name:e}:{name:e.name,type:e.type}})}function n(e){var i="string"==typeof e?[{name:[e],expand:!1}]:e,n="[object Array]"===U.call(i)?i:i!==t?[i]:[];return $(n,function(e){return"string"==typeof e?{name:[e],expand:!1}:{name:"[object Array]"===U.call(e.name)?e.name.slice():[e.name],expand:e.expand}})}function r(e){return-1!==e.indexOf(" ")&&(e='["'+e+'"]'),e}function s(e,t,i,n){var r,o,a,l;if(i||(i=t),n||(n=0),(l=i.members[n])&&!l.measure){if(a=l.children,o=a.length,i===t?e[L.stringify([l.name])]=!!o:o&&(e[L.stringify(pe(i,n))]=!0),o)for(r=0;r<o;r++)s(e,t,a[r],n);s(e,t,i,n+1)}}function o(e,t,i){(function(e,t){var i=(t.tuples||[])[0];if(i&&e.length<i.members.length)for(var n=i.members,r=0;r<n.length;r++)if(!n[r].measure){for(var s=!1,o=0;o<e.length;o++)if(0===E(e[o]).indexOf(n[r].hierarchy)){s=!0;break}s||e.push({name:[n[r].name],expand:!1})}})(t,e=e||{}),i.length>1&&t.push({name:Y,measure:!0,children:n(i)});var r={members:t};if(e.tuples){var s=_(e.tuples,r);s.tuple&&(t=function(e){for(var t=[],i=e.members,n=0;n<i.length;n++)i[n].measure||t.push({name:[i[n].name],expand:i[n].children.length>0});return t}(s.tuple))}return t}function a(e){var t=L.getter(e.field,!0);return function(i,n){return e.aggregate(t(i.dataItem),n,i)}}function l(e){return"number"==typeof e&&!isNaN(e)}function d(e){return e&&e.getTime}function c(e){return e[e.length]={value:"",fmtValue:"",ordinal:e.length},e}function u(e,t,i){if(e.tuples.length<f(t.tuples,i))return t}function h(e,t){return _(t,e).index}function f(e,t){if(!e.length)return 0;for(var i=e.slice(),n=i.shift(),r=1;n;)n.members?[].push.apply(i,n.members):n.children&&(n.measure||(r+=n.children.length),[].push.apply(i,n.children)),n=i.shift();return t.length&&(r*=t.length),r}function p(e){return e||(e={tuples:[]}),e.tuples||(e.tuples=[]),e}function m(e,t,i){if(!e)return 0;var n=Math.max(i.length,1),r=e.members.slice(0,t),s=n,o=r.shift();for(n>1&&(n+=1);o;)o.name===Y?s+=n:o.children?[].push.apply(r,o.children):(s++,[].push.apply(r,o.members)),o=r.shift();return s}function g(e,t,i){if(!t[0])return{parsedRoot:null,tuples:e,memberIndex:0,index:0};var n=_(e,t[0]);if(!n.tuple)return{parsedRoot:null,tuples:t,memberIndex:0,index:0};var r=n.tuple.members,s=t[0].members,o=-1;if(r.length!==s.length)return{parsedRoot:null,tuples:t,memberIndex:0,index:0};for(var a=0,l=r.length;a<l;a++)!r[a].measure&&s[a].children[0]&&(-1==o&&s[a].children.length&&(o=a),r[a].children=s[a].children);return i=Math.max(i.length,1),{parsedRoot:n.tuple,index:n.index*i,memberIndex:o,tuples:e}}function v(e,t){var i,n,r=!0;for(e=e.members,t=t.members,i=0,n=e.length;i<n;i++)e[i].measure||t[i].measure||(r=r&&E(e[i])===E(t[i]));return r}function _(e,t){var i,n,r,s,o,a,l,d=0;for(i=0,n=e.length;i<n;i++){if(r=e[i],v(r,t))return{tuple:r,index:d};for(d++,o=0,a=r.members.length;o<a;o++)if(!(l=r.members[o]).measure&&(s=_(l.children,t),d+=s.index,s.tuple))return{tuple:s.tuple,index:d}}return{index:d}}function b(e,t){var i,n,r,s="";for(n=0,r=e.length;n<r;n++)t[s+=(i=e[n]).name]||(t[s]=i)}function k(e,t){var i,n,r,s,o=e.members,a="",l="";for(i=0,n=o.length;i<n;i++){if(r=o[i],s){if(t[a+r.name]){s=t[a+=r.name];continue}return t[a+r.parentName]?t[a+r.parentName]:t[l+r.parentName]?t[l+r.parentName]:t[l]}if(a+=r.name,!(s=t[r.parentName])&&!(s=t[a]))return null;s&&(l+=s.name)}return s}function w(i,n){if(!(n<0)){var r={name:Y,measure:!0,children:[e.extend({members:[],dataIndex:i.dataIndex},i.members[n])]};i.members.splice(n,1,r),i.dataIndex=t}}function y(e,t){if(e.length<1)return[];for(var i=[],n={},r=function(e,t){if(0===t.length)return-1;for(var i=t[0],n=e.members,r=0,s=n.length;r<s;r++)if(n[r].name==i.name)return r}(e[0],t),s=0;s<e.length;s++){var o=e[s];o.dataIndex=s,w(o,r);var a=k(o,n);a?r<0||!a.measure?a.children.push(o):a.children.push(o.members[r].children[0]):i.push(o),b(o.members,n)}return i}function x(e){for(var i,n,r,s,o,a=[],l=(e=e.slice()).shift();l;){for(l.dataIndex!==t&&a.push(l.dataIndex),r=0,i=0,n=l.members.length;i<n;i++)s=(o=l.members[i]).children,o.measure?[].splice.apply(e,[0,0].concat(s)):[].splice.apply(e,[r,0].concat(s)),r+=s.length;l=e.shift()}return a}function C(e){var t=e.split(".");return t.length>2?t[0]+"."+t[1]:e}function S(e,t){var i,n=e.length-1,r=e[n];return(i=function(e,t){for(var i=0,n=e.length;i<n;i++)if(0===t.indexOf(e[i].field))return e[i];return null}(t,r))&&i.dir?r="ORDER("+r+".Children,"+i.field+".CurrentMember.MEMBER_CAPTION,"+i.dir+")":r+=".Children",e[n]=r,e}function T(e){var t,i="CROSSJOIN({";return e.length>2?(t=e.pop(),i+=T(e)):(i+=e.shift(),t=e.pop()),i+="},{",i+=t,i+="})"}function D(e,t){var i=e.slice(0);return t.length>1&&i.push("{"+F(t).join(",")+"}"),T(i)}function F(e){for(var i,n=0,r=e.length,s=[];n<r;n++)i=e[n],s.push(i.name!==t?i.name:i);return s}function E(e){return e=e.name||e,"[object Array]"===U.call(e)&&(e=e[e.length-1]),e}function R(e){for(var t=e.length,i=[],n=0;n<t;n++)i.push(e[n].name[0]);return i}function A(e,t){var i,n,r,s=0,o=e.length,a=t.length;for(t=t.slice(0);s<o;s++)for(i=e[s],r=0;r<a;r++)if(n=C(t[r]),-1!==i.indexOf(n)){t[r]=i;break}return{names:t,expandedIdx:r,uniquePath:t.slice(0,r+1).join("")}}function I(e){for(var t,i,n,r,s,o,a=[],l=[],d=[],c=0,u=e.length;c<u;c++)if(t=e[c],r=t.name,o=!1,"[object Array]"!==U.call(r)&&(t.name=r=[r]),r.length>1)l.push(t);else{for(s=C(r[0]),i=0,n=d.length;i<n;i++)if(0===d[i].name[0].indexOf(s)){o=!0;break}o||d.push(t),t.expand&&a.push(t)}return a=a.concat(l),{root:d,expanded:a}}function M(e,t,i){var n,r="",s=I(e=e||[]),o=R(s.root),a=[],l=(s=s.expanded).length,d=0,c=[];if(o.length>1||t.length>1){for(a.push(D(o,t));d<l;d++)c=A(n=S(s[d].name,i),o).names,a.push(D(c,t));r+=a.join(",")}else{for(;d<l;d++)n=S(s[d].name,i),c.push(n[0]);r+=o.concat(c).join(",")}return r}function H(e){var t="",i=e.value,n=e.field,r=e.operator;return"in"==r?(t+="{",t+=i,t+="}"):(t+="Filter(",t+=n+".MEMBERS",t+=L.format(ne[r],n,i),t+=")"),t}function z(e,t,i){var n="";if(t){n+="<"+e+">";var r;for(var s in t)r=t[s],i&&(s=s.replace(/([A-Z]+(?=$|[A-Z][a-z])|[A-Z]?[a-z]+)/g,"$1_").toUpperCase().replace(/_$/,"")),n+="<"+s+">"+r+"</"+s+">";n+="</"+e+">"}else n+="<"+e+"/>";return n}function N(e){return null==e?[]:"[object Array]"!==U.call(e)?[e]:e}function P(e){for(var t={tuples:[]},i=N(L.getter("Tuples.Tuple",!0)(e)),n=L.getter("Caption['#text']"),r=L.getter("UName['#text']"),s=L.getter("LName['#text']"),o=L.getter("LNum['#text']"),a=L.getter("CHILDREN_CARDINALITY['#text']",!0),l=L.getter("['@Hierarchy']"),d=L.getter("PARENT_UNIQUE_NAME['#text']",!0),c=0;c<i.length;c++){for(var u=[],h=N(i[c].Member),f=0;f<h.length;f++)u.push({children:[],caption:n(h[f]),name:r(h[f]),levelName:s(h[f]),levelNum:o(h[f]),hasChildren:parseInt(a(h[f]),10)>0,parentName:d(h[f]),hierarchy:l(h[f])});t.tuples.push({members:u})}return t}var L=window.kendo,B=L.ui,O=L.Class,V=B.Widget,W=L.data.DataSource,U={}.toString,q=function(e){return e},$=e.map,j=e.extend,G=L.isFunction,Y="Measures",K=".kendoPivotGrid",Q="__row_total__",J="k-i-arrow-s",X="<span>#: data.member.caption || data.member.name #</span>",Z={sum:function(e,t){var i=t.accumulator;return l(i)?l(e)&&(i+=e):i=e,i},count:function(e,t){return(t.accumulator||0)+1},average:{aggregate:function(e,i){var n=i.accumulator;return i.count===t&&(i.count=0),l(n)?l(e)&&(n+=e):n=e,l(e)&&i.count++,n},result:function(e){var t=e.accumulator;return l(t)&&(t/=e.count),t}},max:function(e,t){var i=t.accumulator;return l(i)||d(i)||(i=e),i<e&&(l(e)||d(e))&&(i=e),i},min:function(e,t){var i=t.accumulator;return l(i)||d(i)||(i=e),i>e&&(l(e)||d(e))&&(i=e),i}},ee=O.extend({init:function(e){this.options=j({},this.options,e),this.dimensions=this._normalizeDescriptors("field",this.options.dimensions),this.measures=this._normalizeDescriptors("name",this.options.measures)},_normalizeDescriptors:function(e,t){t=t||{};var i,n={};if("[object Array]"===U.call(t)){for(var r=0,s=t.length;r<s;r++)"string"==typeof(i=t[r])?n[i]={}:i[e]&&(n[i[e]]=i);t=n}return t},_rootTuples:function(e,i){var n,r,s,o,a=i.length||1,l=this.dimensions||[],d=0,c=e.length,u=[],h=[];if(c||i.length){for(d=0;d<a;d++){for(n={members:[]},o=0;o<c;o++)s=(r=e[o]).split("&"),n.members[n.members.length]={children:[],caption:(l[r]||{}).caption||"All",name:r,levelName:r,levelNum:"0",hasChildren:!0,parentName:s.length>1?s[0]:t,hierarchy:r};a>1&&(n.members[n.members.length]={children:[],caption:i[d].caption,name:i[d].descriptor.name,levelName:"MEASURES",levelNum:"0",hasChildren:!1,parentName:t,hierarchy:"MEASURES"}),u[u.length]=n}h.push(Q)}return{keys:h,tuples:u}},_expandedTuples:function(e,i,n){var r,s,o,a,l,d,c,u,h,f,p,m=n.length||1,g=this.dimensions||[],v=[],_=[];for(o in e){for(a=e[o],l=v[(c=this._findExpandedMember(i,a.uniquePath)).index]||[],d=_[c.index]||[],u=c.member.names,r=0;r<m;r++){for(s={members:[]},p=0;p<u.length;p++)p===c.member.expandedIdx?(s.members[s.members.length]={children:[],caption:a.value,name:a.name,hasChildren:!1,levelNum:1,levelName:a.parentName+a.name,parentName:a.parentName,hierarchy:a.parentName+a.name},0===r&&d.push(pe(s,p).join(""))):(h=(f=u[p]).split("&"),s.members[s.members.length]={children:[],caption:(g[f]||{}).caption||"All",name:f,levelName:f,levelNum:"0",hasChildren:!0,parentName:h.length>1?h[0]:t,hierarchy:f});m>1&&(s.members[s.members.length]={children:[],caption:n[r].caption,name:n[r].descriptor.name,levelName:"MEASURES",levelNum:"0",hasChildren:!0,parentName:t,hierarchy:"MEASURES"}),l[l.length]=s}v[c.index]=l,_[c.index]=d}return{keys:_,tuples:v}},_findExpandedMember:function(e,t){for(var i=0;i<e.length;i++)if(e[i].uniquePath===t)return{member:e[i],index:i}},_asTuples:function(e,t,i){i=i||[];var n=this._rootTuples(t.root,i),r=this._expandedTuples(e,t.expanded,i);return{keys:[].concat.apply(n.keys,r.keys),tuples:[].concat.apply(n.tuples,r.tuples)}},_measuresInfo:function(e,t){for(var i,n,r=0,s=e&&e.length,o=[],a={},l={},d=this.measures||{};r<s;r++)i=d[n=e[r].descriptor.name]||{},o.push(n),i.result&&(a[n]=i.result),i.format&&(l[n]=i.format);return{names:o,formats:l,resultFuncs:a,rowAxis:t}},_toDataArray:function(e,t,i,n){var r,s,o,a,l,d,c,u,h,f,p=[],m=1,g=[],v=i.length||1,_=n.length||1;for(t.rowAxis?m=(g=t.names).length:f=t.names,o=0;o<v;o++)for(c=e[i[o]||Q],d=0;d<m;d++)for(t.rowAxis&&(f=[g[d]]),a=0;a<_;a++)for(h=n[a]||Q,u=c.items[h],r=h===Q?c.aggregates:u?u.aggregates:{},l=0;l<f.length;l++)s=f[l],this._addData(p,r[s],t.formats[s],t.resultFuncs[s]);return p},_addData:function(e,t,i,n){var r,s="";t&&(t=n?n(t):t.accumulator,s=i?L.format(i,t):t),e[r=e.length]={ordinal:r,value:t||"",fmtValue:s}},_matchDescriptors:function(e,i,n){for(var r,s,o,a,l=i.names,d=i.expandedIdx;d>0;)if((r=l[--d].split("&")).length>1&&(s=r[0],o=r[1],a=n[s](e),(a=a!==t&&null!==a?a.toString():a)!=o))return!1;return!0},_calculateAggregate:function(e,t,i){for(var n,r,s={},o=0;o<e.length;o++)r=e[o].descriptor.name,(n=i.aggregates[r]||{}).accumulator=e[o].aggregator(t,n),s[r]=n;return s},_processColumns:function(e,i,n,r,s,o,a,l){for(var d,c,u,h,f,p,m,g,v=s.dataItem,_=0;_<i.length;_++)c=i[_],this._matchDescriptors(v,c,n)&&(g=c.names.slice(0,c.expandedIdx).join(""),m=p=c.names[c.expandedIdx],u=r[f=g+(p=p+"&"+(d=(d=n[p](v))!==t&&null!==d?d.toString():d))]||{index:a.columnIndex,parentName:m,name:p,uniquePath:g+m,value:d},h=o.items[f]||{aggregates:{}},o.items[f]={index:u.index,aggregates:this._calculateAggregate(e,s,h)},l&&(r[f]||a.columnIndex++,r[f]=u))},_measureAggregators:function(e){var t,i,n,r,s,o,l=e.measures||[],d=this.measures||{},c=[];if(l.length){for(n=0,r=l.length;n<r;n++)if(t=l[n],i=d[t.name],s=null,i){if("string"==typeof(o=i.aggregate)){if(!(s=Z[o.toLowerCase()]))throw new Error("There is no such aggregate function");i.aggregate=s.aggregate||s,i.result=s.result}c.push({descriptor:t,caption:i.caption,result:i.result,aggregator:a(i)})}}else c.push({descriptor:{name:"default"},caption:"default",aggregator:function(){return 1}});return c},_buildGetters:function(e){for(var t,i,n={},s=0;s<e.length;s++)(t=(i=e[s]).split("&")).length>1?n[t[0]]=L.getter(t[0],!0):n[i]=L.getter(r(i),!0);return n},_parseDescriptors:function(e){for(var t=I(e),i=R(t.root),n=t.expanded,r=[],s=0;s<n.length;s++)r.push(A(n[s].name,i));return{root:i,expanded:r}},_filter:function(e,t){if(!t)return e;for(var i,n=0,r=t.filters;n<r.length;n++)"in"===(i=r[n]).operator&&(r[n]=this._normalizeFilter(i));return new L.data.Query(e).filter(t).data},_normalizeFilter:function(e){var t=e.value.split(","),i=[];if(!t.length)return t;for(var n=0;n<t.length;n++)i.push({field:e.field,operator:"eq",value:t[n]});return{logic:"or",filters:i}},process:function(e,i){e=e||[],i=i||{},e=this._filter(e,i.filter);var r=i.measures||[],s="rows"===i.measuresAxis,o=i.columns||[],a=i.rows||[];!o.length&&a.length&&(!r.length||r.length&&s)&&(o=a,a=[],s=!1),o.length||a.length||(s=!1),!o.length&&r.length&&(o=n(i.measures)),o=this._parseDescriptors(o),a=this._parseDescriptors(a);var l,d,c,u,h,f,p,m,g,v,_,b,k,w={},y={},x={},C={columnIndex:0},S=this._measureAggregators(i),T=this._buildGetters(o.root),D=this._buildGetters(a.root),F=!1,E=o.expanded,R=a.expanded,A=0!==R.length,I=e.length,M=0;if(o.root.length||a.root.length)for(F=!0,M=0;M<I;M++)for(c={dataItem:d=e[M],index:M},p=w[Q]||{items:{},aggregates:{}},this._processColumns(S,E,T,y,c,p,C,!A),p.aggregates=this._calculateAggregate(S,c,p),w[Q]=p,u=0;u<R.length;u++)h=R[u],this._matchDescriptors(d,h,D)?(g=h.names.slice(0,h.expandedIdx).join(""),v=f=h.names[h.expandedIdx],x[m=g+(f=f+"&"+(l=(l=D[f](d))!==t?l.toString():l))]={uniquePath:g+v,parentName:v,name:f,value:l},_=w[m]||{items:{},aggregates:{}},this._processColumns(S,E,T,y,c,_,C,!0),_.aggregates=this._calculateAggregate(S,c,_),w[m]=_):this._processColumns(S,E,T,y,c,{items:{},aggregates:{}},C,!0);return F&&I?(!(S.length>1)||i.columns&&i.columns.length||(o={root:[],expanded:[]}),b=this._asTuples(y,o,s?[]:S),k=this._asTuples(x,a,s?S:[]),y=b.tuples,x=k.tuples,w=this._toDataArray(w,this._measuresInfo(S,s),k.keys,b.keys)):w=y=x=[],{axes:{columns:{tuples:y},rows:{tuples:x}},data:w}}}),te=O.extend({init:function(e,t){this.transport=t,this.options=t.options||{},this.transport.discover||G(e.discover)&&(this.discover=e.discover)},read:function(e){return this.transport.read(e)},update:function(e){return this.transport.update(e)},create:function(e){return this.transport.create(e)},destroy:function(e){return this.transport.destroy(e)},discover:function(e){if(this.transport.discover)return this.transport.discover(e);e.success({})},catalog:function(i){var n=this.options||{};if(i===t)return(n.connection||{}).catalog;var r=n.connection||{};r.catalog=i,this.options.connection=r,e.extend(this.transport.options,{connection:r})},cube:function(e){var i=this.options||{};if(e===t)return(i.connection||{}).cube;var n=i.connection||{};n.cube=e,this.options.connection=n,j(!0,this.transport.options,{connection:n})}}),ie=W.extend({init:function(t){var r,s=((t||{}).schema||{}).cube,o="columns",a={axes:q,cubes:q,catalogs:q,measures:q,dimensions:q,hierarchies:q,levels:q,members:q};s&&(a=e.extend(a,this._cubeSchema(s)),this.cubeBuilder=new ee(s)),W.fn.init.call(this,j(!0,{},{schema:a},t)),this.transport=new te(this.options.transport||{},this.transport),this._columns=n(this.options.columns),this._rows=n(this.options.rows),r=this.options.measures||[],"[object Object]"===U.call(r)&&(o=r.axis||"columns",r=r.values||[]),this._measures=i(r),this._measuresAxis=o,this._skipNormalize=0,this._axes={}},_cubeSchema:function(t){return{dimensions:function(){var e=[],i=t.dimensions;for(var n in i)e.push({name:n,caption:i[n].caption||n,uniqueName:n,defaultHierarchy:n,type:1});return t.measures&&e.push({name:Y,caption:Y,uniqueName:Y,type:2}),e},hierarchies:function(){return[]},measures:function(){var e=[],i=t.measures;for(var n in i)e.push({name:n,caption:n,uniqueName:n,aggregator:n});return e},members:e.proxy(function(e,i){var n,s,o=i.levelUniqueName||i.memberUniqueName,a=L.getter(this.options.schema.data,!0)(this.options.data)||this._rawData||[],l=[],d=0,c={};if(o&&(o=o.split(".")[0]),!i.treeOp)return l.push({caption:t.dimensions[o].caption||o,childrenCardinality:"1",dimensionUniqueName:o,hierarchyUniqueName:o,levelUniqueName:o,name:o,uniqueName:o}),l;for(n=L.getter(r(o),!0);d<a.length;d++)!(s=n(a[d]))&&0!==s||c[s]||(c[s]=!0,l.push({caption:s,childrenCardinality:"0",dimensionUniqueName:o,hierarchyUniqueName:o,levelUniqueName:o,name:s,uniqueName:s}));return l},this)}},options:{serverSorting:!0,serverPaging:!0,serverFiltering:!0,serverGrouping:!0,serverAggregates:!0},catalog:function(e){if(e===t)return this.transport.catalog();this.transport.catalog(e),this._mergeState({}),this._axes={},this.data([])},cube:function(e){if(e===t)return this.transport.cube();this.transport.cube(e),this._axes={},this._mergeState({}),this.data([])},axes:function(){return this._axes},columns:function(e){if(e===t)return this._columns;this._skipNormalize+=1,this._clearAxesData=!0,this._columns=n(e),this.query({columns:e,rows:this.rowsAxisDescriptors(),measures:this.measures()})},rows:function(e){if(e===t)return this._rows;this._skipNormalize+=1,this._clearAxesData=!0,this._rows=n(e),this.query({columns:this.columnsAxisDescriptors(),rows:e,measures:this.measures()})},measures:function(e){if(e===t)return this._measures;this._skipNormalize+=1,this._clearAxesData=!0,this.query({columns:this.columnsAxisDescriptors(),rows:this.rowsAxisDescriptors(),measures:i(e)})},measuresAxis:function(){return this._measuresAxis||"columns"},_expandPath:function(e,t){var i="columns"===t?"columns":"rows",r="columns"===t?"rows":"columns",s=n(e),a=E(s[s.length-1]);this._lastExpanded=i,s=o(this.axes()[i],s,this.measures());for(var l=0;l<s.length;l++)if(E(s[l])===a){if(s[l].expand)return;s[l].expand=!0}else s[l].expand=!1;var d={};d[i]=s,d[r]=this._descriptorsForAxis(r),this._query(d)},_descriptorsForAxis:function(t){var i=this.axes(),n=this[t]()||[];return i&&i[t]&&i[t].tuples&&i[t].tuples[0]&&(n=function(t){var i={};t.length&&s(i,t[0]);var n=[];for(var r in i)n.push({name:e.parseJSON(r),expand:i[r]});return n}(i[t].tuples||[])),n},columnsAxisDescriptors:function(){return this._descriptorsForAxis("columns")},rowsAxisDescriptors:function(){return this._descriptorsForAxis("rows")},_process:function(e,t){this._view=e,(t=t||{}).items=t.items||this._view,this.trigger("change",t)},_query:function(e){return e||(this._skipNormalize+=1,this._clearAxesData=!0),this.query(j({},{page:this.page(),pageSize:this.pageSize(),sort:this.sort(),filter:this.filter(),group:this.group(),aggregate:this.aggregate(),columns:this.columnsAxisDescriptors(),rows:this.rowsAxisDescriptors(),measures:this.measures()},e))},query:function(t){var i=this._mergeState(t);return this._data.length&&this.cubeBuilder?(this._params(i),this._updateLocalData(this._pristineData),e.Deferred().resolve().promise()):this.read(i)},_mergeState:function(e){return(e=W.fn._mergeState.call(this,e))!==t&&(this._measures=i(e.measures),e.columns?e.columns=n(e.columns):e.columns||(this._columns=[]),e.rows?e.rows=n(e.rows):e.rows||(this._rows=[])),e},filter:function(e){if(e===t)return this._filter;this._skipNormalize+=1,this._clearAxesData=!0,this._query({filter:e,page:1})},expandColumn:function(e){this._expandPath(e,"columns")},expandRow:function(e){this._expandPath(e,"rows")},success:function(e){var t;this.cubeBuilder&&(t=(this.reader.data(e)||[]).slice(0)),W.fn.success.call(this,e),t&&(this._pristineData=t)},_processResult:function(e,t){if(this.cubeBuilder){var i=this.cubeBuilder.process(e,this._requestData);e=i.data,t=i.axes}var n,r,s,o,a,l,d=this.columns(),c=this.rows(),m=t.columns&&t.columns.tuples;d.length||!c.length||!m||!this._rowMeasures().length&&this.measures().length||(t={columns:{},rows:t.columns}),d.length||c.length||"rows"!==this.measuresAxis()||!m||(t={columns:{},rows:t.columns}),this._axes={columns:p(this._axes.columns),rows:p(this._axes.rows)},t={columns:p(t.columns),rows:p(t.rows)},n=this._normalizeTuples(t.columns.tuples,this._axes.columns.tuples,d,this._columnMeasures()),r=this._normalizeTuples(t.rows.tuples,this._axes.rows.tuples,c,this._rowMeasures()),this._skipNormalize-=1,this.cubeBuilder||(e=this._normalizeData({columnsLength:t.columns.tuples.length,rowsLength:t.rows.tuples.length,columnIndexes:n,rowIndexes:r,data:e})),"rows"==this._lastExpanded?(s=t.columns.tuples,a=this._columnMeasures(),(o=u(t.columns,this._axes.columns,a))&&(l="columns",t.columns=o,function(e,t,i,n,r){var s,o,a,l=e.length,d=f(t,n),c=n.length||1;for(o=0;o<i;o++)for(s=0;s<l;s++)a=h(e[s],t)*c,a+=s%c,r[o*l+s].ordinal=o*d+a}(s,o.tuples,t.rows.tuples.length,a,e),this.cubeBuilder||(e=this._normalizeData({columnsLength:f(t.columns.tuples,a),rowsLength:t.rows.tuples.length,data:e})))):"columns"==this._lastExpanded&&(s=t.rows.tuples,a=this._rowMeasures(),(o=u(t.rows,this._axes.rows,a))&&(l="rows",t.rows=o,function(e,t,i,n,r){var s,o,a,l=e.length,d=n.length||1;for(o=0;o<l;o++)for(a=h(e[o],t),a*=d,a+=o%d,s=0;s<i;s++)r[o*i+s].ordinal=a*i+s}(s,o.tuples,t.columns.tuples.length,a,e),this.cubeBuilder||(e=this._normalizeData({columnsLength:f(t.rows.tuples,a),rowsLength:t.columns.tuples.length,data:e})))),this._lastExpanded=null;var g=this._mergeAxes(t,e,l);return this._axes=g.axes,g.data},_readData:function(e){var t=this.reader.axes(e),i=this.reader.data(e);return this.cubeBuilder&&(this._rawData=i),this._processResult(i,t)},_createTuple:function(e,t,i){var n,r,s,o,a,l,d,c,u=e.members,h=u.length,f={members:[]},p=0;for(t&&(h-=1);p<h;p++)c=u[p],r=Number(c.levelNum),s=c.name,o=c.parentName,d=c.caption||s,a=c.hasChildren,l=c.hierarchy,n=c.levelName,i&&(d="All",0===r?o=c.name:r-=1,a=!0,s=l=n=o),f.members.push({name:s,children:[],caption:d,levelName:n,levelNum:r.toString(),hasChildren:a,hierarchy:l,parentName:i?"":o});return t&&f.members.push({name:t.name,children:[]}),f},_hasRoot:function(e,t,i){if(t.length)return _(t,e).tuple;for(var n,r,s,o=e.members,a=!0,l=0,d=o.length;l<d;l++)if(n=o[l],s=Number(n.levelNum)||0,r=i[l],!(0===s||r&&n.name===E(r))){a=!1;break}return a},_mergeAxes:function(e,t,i){var n,r,s=this._columnMeasures(),o=this._rowMeasures(),a=this.axes(),l=f(a.rows.tuples,o),d=e.rows.tuples.length,c=f(a.columns.tuples,s),u=e.columns.tuples.length;"columns"==i?(u=c,r=e.columns.tuples):t=function(e,t){if(!e||!e.length)return t;var i,n,r,s,o=[],a=x(e),l=a.length,d=Math.max(t.length/l,1);for(n=0;n<d;n++)for(r=l*n,i=0;i<l;i++)s=a[i]+r,o[r+i]=t[s]||{value:"",fmtValue:"",ordinal:s};return o}(r=y(e.columns.tuples,s),t);var h=g(a.columns.tuples,r,s);"rows"==i?(d=f(e.rows.tuples,o),r=e.rows.tuples):t=function(e,t){if(!e||!e.length)return t;var i,n,r,s,o,a=[],l=x(e),d=l.length,c=Math.max(t.length/d,1);for(i=0;i<d;i++)for(r=c*i,s=c*l[i],n=0;n<c;n++)o=parseInt(s+n,10),a[parseInt(r+n,10)]=t[o]||{value:"",fmtValue:"",ordinal:o};return a}(r=y(e.rows.tuples,o),t);var p=g(a.rows.tuples,r,o);if(a.columns.tuples=h.tuples,a.rows.tuples=p.tuples,c!==f(a.columns.tuples,s)){n=h.index+m(h.parsedRoot,h.memberIndex,s);var v=c+u;t=this._mergeColumnData(t,n,d,u,v)}else l!==f(a.rows.tuples,o)&&(n=p.index+m(p.parsedRoot,p.memberIndex,o),t=this._mergeRowData(t,n,d,u));return 0===a.columns.tuples.length&&0===a.rows.tuples.length&&(t=[]),{axes:a,data:t}},_mergeColumnData:function(e,t,i,n,r){var s,o,a,l=this.data().toJSON(),d=0,c=Math.max(this._columnMeasures().length,1);for(i=Math.max(i,1),l.length>0&&(d=c,r-=c),s=0;s<i;s++)o=t+s*r,(a=e.splice(0,n)).splice(0,d),[].splice.apply(l,[o,0].concat(a));return l},_mergeRowData:function(e,t,i,n){var r,s,o,a=this.data().toJSON(),l=Math.max(this._rowMeasures().length,1);for(n=Math.max(n,1),a.length>0&&(i-=l,e.splice(0,n*l)),r=0;r<i;r++)o=e.splice(0,n),s=t*n+r*n,[].splice.apply(a,[s,0].concat(o));return a},_columnMeasures:function(){var e=this.measures(),t=[];return"columns"===this.measuresAxis()&&(0===this.columns().length?t=e:e.length>1&&(t=e)),t},_rowMeasures:function(){var e=this.measures(),t=[];return"rows"===this.measuresAxis()&&(0===this.rows().length?t=e:e.length>1&&(t=e)),t},_updateLocalData:function(e,t){this.cubeBuilder&&(t&&(this._requestData=t),e=this._processResult(e)),this._data=this._observe(e),this._ranges=[],this._addRange(this._data),this._total=this._data.length,this._pristineTotal=this._total,this._process(this._data)},data:function(e){if(e===t)return this._data;this._pristineData=e.slice(0),this._updateLocalData(e,{columns:this.columns(),rows:this.rows(),measures:this.measures()})},_normalizeTuples:function(e,t,i,n){var r,s,o,a=n.length||1,l=0,d=[],c={},u=0;if(e.length){if(this._skipNormalize<=0&&!this._hasRoot(e[0],t,i)){for(this._skipNormalize=0;l<a;l++)d.push(this._createTuple(e[0],n[l],!0)),c[l]=l;e.splice.apply(e,[0,e.length].concat(d).concat(e)),l=a}if(n.length)for(o=r=e[l],s=r.members.length-1;r;){if(u>=a&&(u=0),r.members[s].name!==n[u].name&&(e.splice(l,0,this._createTuple(r,n[u])),c[l]=l),l+=1,u+=1,r=e[l],a>u&&(!r||me(o,s-1)!==me(r,s-1))){for(;u<a;u++)e.splice(l,0,this._createTuple(o,n[u])),c[l]=l,l+=1;r=e[l]}o=r}return c}},_addMissingDataItems:function(e,i){for(;i.rowIndexes[parseInt(e.length/i.columnsLength,10)]!==t;)for(var n=0;n<i.columnsLength;n++)e=c(e);for(;i.columnIndexes[e.length%i.columnsLength]!==t;)e=c(e);return e},_normalizeOrdinals:function(e,t,i){var n=i.lastOrdinal;if(!t)return c(e);if(t.ordinal-n>1)for(n+=1;n<t.ordinal&&e.length<i.length;)e=this._addMissingDataItems(c(e),i),n+=1;return t.ordinal=e.length,e[e.length]=t,e},_normalizeData:function(e){var t,i,n,r=e.data,s=0,o=[];if(e.lastOrdinal=0,e.columnIndexes=e.columnIndexes||{},e.rowIndexes=e.rowIndexes||{},e.columnsLength=e.columnsLength||1,e.rowsLength=e.rowsLength||1,e.length=e.columnsLength*e.rowsLength,n=e.length,r.length===n)return r;for(;o.length<n;)(t=r[s++])&&(i=t.ordinal),o=this._normalizeOrdinals(this._addMissingDataItems(o,e),t,e),e.lastOrdinal=i;return o},discover:function(t,i){var n=this,r=n.transport;return e.Deferred(function(e){r.discover(j({success:function(t){t=n.reader.parse(t),n._handleCustomErrors(t)||(i&&(t=i(t)),e.resolve(t))},error:function(t,i,r){e.reject(t),n.error(t,i,r)}},t))}).promise().done(function(){n.trigger("schemaChange")})},schemaMeasures:function(){var e=this;return e.discover({data:{command:"schemaMeasures",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}}},function(t){return e.reader.measures(t)})},schemaKPIs:function(){var e=this;return e.discover({data:{command:"schemaKPIs",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}}},function(t){return e.reader.kpis(t)})},schemaDimensions:function(){var e=this;return e.discover({data:{command:"schemaDimensions",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}}},function(t){return e.reader.dimensions(t)})},schemaHierarchies:function(e){var t=this;return t.discover({data:{command:"schemaHierarchies",restrictions:{catalogName:t.transport.catalog(),cubeName:t.transport.cube(),dimensionUniqueName:e}}},function(e){return t.reader.hierarchies(e)})},schemaLevels:function(e){var t=this;return t.discover({data:{command:"schemaLevels",restrictions:{catalogName:t.transport.catalog(),cubeName:t.transport.cube(),hierarchyUniqueName:e}}},function(e){return t.reader.levels(e)})},schemaCubes:function(){var e=this;return e.discover({data:{command:"schemaCubes",restrictions:{catalogName:e.transport.catalog()}}},function(t){return e.reader.cubes(t)})},schemaCatalogs:function(){var e=this;return e.discover({data:{command:"schemaCatalogs"}},function(t){return e.reader.catalogs(t)})},schemaMembers:function(e){var t=this,i=function(e){return function(i){return t.reader.members(i,e)}}(e);return t.discover({data:{command:"schemaMembers",restrictions:j({catalogName:t.transport.catalog(),cubeName:t.transport.cube()},e)}},i)},_params:function(e){this._clearAxesData&&(this._axes={},this._data=this._observe([]),this._clearAxesData=!1,this.trigger("stateReset"));var t=W.fn._params.call(this,e);return t=j({measures:this.measures(),measuresAxis:this.measuresAxis(),columns:this.columns(),rows:this.rows()},t),this.cubeBuilder&&(this._requestData=t),t}});ie.create=function(e){var t=(e=e&&e.push?{data:e}:e)||{},i=t.data;if(t.data=i,!(t instanceof ie)&&t instanceof L.data.DataSource)throw new Error("Incorrect DataSource type. Only PivotDataSource instances are supported");return t instanceof ie?t:new ie(t)};var ne={contains:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}") > 0',doesnotcontain:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}") = 0',startswith:', Left({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',endswith:', Right({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',eq:', {0}.CurrentMember.MEMBER_CAPTION = "{1}"',neq:', NOT {0}.CurrentMember.MEMBER_CAPTION = "{1}"'},re={schemaCubes:"MDSCHEMA_CUBES",schemaCatalogs:"DBSCHEMA_CATALOGS",schemaMeasures:"MDSCHEMA_MEASURES",schemaDimensions:"MDSCHEMA_DIMENSIONS",schemaHierarchies:"MDSCHEMA_HIERARCHIES",schemaLevels:"MDSCHEMA_LEVELS",schemaMembers:"MDSCHEMA_MEMBERS",schemaKPIs:"MDSCHEMA_KPIS"},se={read:function(e){var t='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Execute xmlns="urn:schemas-microsoft-com:xml-analysis"><Command><Statement>';t+="SELECT NON EMPTY {";var i=e.columns||[],n=e.rows||[],r=e.measures||[],s="rows"===e.measuresAxis,o=e.sort||[];return!i.length&&n.length&&(!r.length||r.length&&s)&&(i=n,n=[],s=!1),i.length||n.length||(s=!1),i.length?t+=M(i,s?[]:r,o):r.length&&!s&&(t+=F(r).join(",")),t+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON COLUMNS",(n.length||s&&r.length>1)&&(t+=", NON EMPTY {",n.length?t+=M(n,s?r:[],o):t+=F(r).join(","),t+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON ROWS"),e.filter?(t+=" FROM ",t+="(",t+=function(e,t){var i,n,r="",s=e.filters,o=s.length;for(n=o-1;n>=0;n--)i="SELECT (",i+=H(s[n]),i+=") ON 0",r=n==o-1?i+=" FROM ["+t+"]":i+" FROM ( "+r+" )";return r}(e.filter,e.connection.cube),t+=")"):t+=" FROM ["+e.connection.cube+"]",1==r.length&&i.length&&(t+=" WHERE ("+F(r).join(",")+")"),(t+="</Statement></Command><Properties><PropertyList><Catalog>"+e.connection.catalog+"</Catalog><Format>Multidimensional</Format></PropertyList></Properties></Execute></Body></Envelope>").replace(/\&/g,"&amp;")},discover:function(t){var i='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis">';return i+="<RequestType>"+(re[(t=t||{}).command]||t.command)+"</RequestType>",i+="<Restrictions>"+z("RestrictionList",t.restrictions,!0)+"</Restrictions>",t.connection&&t.connection.catalog&&(t.properties=e.extend({},{Catalog:t.connection.catalog},t.properties)),i+="<Properties>"+z("PropertyList",t.properties)+"</Properties>",i+="</Discover></Body></Envelope>"}},oe=L.data.RemoteTransport.extend({init:function(e){var t=e;e=this.options=j(!0,{},this.options,e),L.data.RemoteTransport.call(this,e),G(t.discover)?this.discover=t.discover:"string"==typeof t.discover?this.options.discover={url:t.discover}:t.discover||(this.options.discover=this.options.read)},setup:function(t,i){return t.data=t.data||{},e.extend(!0,t.data,{connection:this.options.connection}),L.data.RemoteTransport.fn.setup.call(this,t,i)},options:{read:{dataType:"text",contentType:"text/xml",type:"POST"},discover:{dataType:"text",contentType:"text/xml",type:"POST"},parameterMap:function(e,t){return se[t](e,t)}},discover:function(t){return e.ajax(this.setup(t,"discover"))}}),ae={cubes:{name:L.getter("CUBE_NAME['#text']",!0),caption:L.getter("CUBE_CAPTION['#text']",!0),description:L.getter("DESCRIPTION['#text']",!0),type:L.getter("CUBE_TYPE['#text']",!0)},catalogs:{name:L.getter("CATALOG_NAME['#text']",!0),description:L.getter("DESCRIPTION['#text']",!0)},measures:{name:L.getter("MEASURE_NAME['#text']",!0),caption:L.getter("MEASURE_CAPTION['#text']",!0),uniqueName:L.getter("MEASURE_UNIQUE_NAME['#text']",!0),description:L.getter("DESCRIPTION['#text']",!0),aggregator:L.getter("MEASURE_AGGREGATOR['#text']",!0),groupName:L.getter("MEASUREGROUP_NAME['#text']",!0),displayFolder:L.getter("MEASURE_DISPLAY_FOLDER['#text']",!0),defaultFormat:L.getter("DEFAULT_FORMAT_STRING['#text']",!0)},kpis:{name:L.getter("KPI_NAME['#text']",!0),caption:L.getter("KPI_CAPTION['#text']",!0),value:L.getter("KPI_VALUE['#text']",!0),goal:L.getter("KPI_GOAL['#text']",!0),status:L.getter("KPI_STATUS['#text']",!0),trend:L.getter("KPI_TREND['#text']",!0),statusGraphic:L.getter("KPI_STATUS_GRAPHIC['#text']",!0),trendGraphic:L.getter("KPI_TREND_GRAPHIC['#text']",!0),description:L.getter("KPI_DESCRIPTION['#text']",!0),groupName:L.getter("MEASUREGROUP_NAME['#text']",!0)},dimensions:{name:L.getter("DIMENSION_NAME['#text']",!0),caption:L.getter("DIMENSION_CAPTION['#text']",!0),description:L.getter("DESCRIPTION['#text']",!0),uniqueName:L.getter("DIMENSION_UNIQUE_NAME['#text']",!0),defaultHierarchy:L.getter("DEFAULT_HIERARCHY['#text']",!0),type:L.getter("DIMENSION_TYPE['#text']",!0)},hierarchies:{name:L.getter("HIERARCHY_NAME['#text']",!0),caption:L.getter("HIERARCHY_CAPTION['#text']",!0),description:L.getter("DESCRIPTION['#text']",!0),uniqueName:L.getter("HIERARCHY_UNIQUE_NAME['#text']",!0),dimensionUniqueName:L.getter("DIMENSION_UNIQUE_NAME['#text']",!0),displayFolder:L.getter("HIERARCHY_DISPLAY_FOLDER['#text']",!0),origin:L.getter("HIERARCHY_ORIGIN['#text']",!0),defaultMember:L.getter("DEFAULT_MEMBER['#text']",!0)},levels:{name:L.getter("LEVEL_NAME['#text']",!0),caption:L.getter("LEVEL_CAPTION['#text']",!0),description:L.getter("DESCRIPTION['#text']",!0),uniqueName:L.getter("LEVEL_UNIQUE_NAME['#text']",!0),dimensionUniqueName:L.getter("DIMENSION_UNIQUE_NAME['#text']",!0),displayFolder:L.getter("LEVEL_DISPLAY_FOLDER['#text']",!0),orderingProperty:L.getter("LEVEL_ORDERING_PROPERTY['#text']",!0),origin:L.getter("LEVEL_ORIGIN['#text']",!0),hierarchyUniqueName:L.getter("HIERARCHY_UNIQUE_NAME['#text']",!0)},members:{name:L.getter("MEMBER_NAME['#text']",!0),caption:L.getter("MEMBER_CAPTION['#text']",!0),uniqueName:L.getter("MEMBER_UNIQUE_NAME['#text']",!0),dimensionUniqueName:L.getter("DIMENSION_UNIQUE_NAME['#text']",!0),hierarchyUniqueName:L.getter("HIERARCHY_UNIQUE_NAME['#text']",!0),levelUniqueName:L.getter("LEVEL_UNIQUE_NAME['#text']",!0),childrenCardinality:L.getter("CHILDREN_CARDINALITY['#text']",!0)}},le=["axes","catalogs","cubes","dimensions","hierarchies","levels","measures"],de=L.data.XmlDataReader.extend({init:function(e){L.data.XmlDataReader.call(this,e),this._extend(e)},_extend:function(e){for(var t,i,n=0,r=le.length;n<r;n++)(i=e[t=le[n]])&&i!==q&&(this[t]=i)},parse:function(e){var t=L.data.XmlDataReader.fn.parse(e.replace(/<(\/?)(\w|-)+:/g,"<$1"));return L.getter("['Envelope']['Body']",!0)(t)},errors:function(e){var t=L.getter("['Fault']",!0)(e);return t?[{faultstring:L.getter("faultstring['#text']",!0)(t),faultcode:L.getter("faultcode['#text']",!0)(t)}]:null},axes:function(e){e=L.getter('ExecuteResponse["return"].root',!0)(e);for(var t,i=N(L.getter("Axes.Axis",!0)(e)),n={columns:{},rows:{}},r=0;r<i.length;r++)"sliceraxis"!==(t=i[r])["@name"].toLowerCase()&&(n.columns.tuples?n.rows=P(t):n.columns=P(t));return n},data:function(e){e=L.getter('ExecuteResponse["return"].root',!0)(e);for(var t=N(L.getter("CellData.Cell",!0)(e)),i=[],n=L.getter("['@CellOrdinal']"),r=L.getter("Value['#text']"),s=L.getter("FmtValue['#text']"),o=0;o<t.length;o++)i.push({value:r(t[o]),fmtValue:s(t[o]),ordinal:parseInt(n(t[o]),10)});return i},_mapSchema:function(e,t){e=L.getter('DiscoverResponse["return"].root',!0)(e);for(var i=N(L.getter("row",!0)(e)),n=[],r=0;r<i.length;r++){var s={};for(var o in t)s[o]=t[o](i[r]);n.push(s)}return n},measures:function(e){return this._mapSchema(e,ae.measures)},kpis:function(e){return this._mapSchema(e,ae.kpis)},hierarchies:function(e){return this._mapSchema(e,ae.hierarchies)},levels:function(e){return this._mapSchema(e,ae.levels)},dimensions:function(e){return this._mapSchema(e,ae.dimensions)},cubes:function(e){return this._mapSchema(e,ae.cubes)},catalogs:function(e){return this._mapSchema(e,ae.catalogs)},members:function(e){return this._mapSchema(e,ae.members)}});j(!0,L.data,{PivotDataSource:ie,XmlaTransport:oe,XmlaDataReader:de,PivotCubeBuilder:ee,transports:{xmla:oe},readers:{xmla:de}}),L.ui.PivotSettingTarget=V.extend({init:function(t,i){var n=this;V.fn.init.call(n,t,i),n.element.addClass("k-pivot-setting"),n.dataSource=L.data.PivotDataSource.create(i.dataSource),n._refreshHandler=e.proxy(n.refresh,n),n.dataSource.first("change",n._refreshHandler),i.template||(n.options.template="<div data-"+L.ns+'name="${data.name || data}">${data.name || data}'+(n.options.enabled?'<a class="k-button k-button-icon k-button-bare"><span class="k-icon k-setting-delete"></span></a>':"")+"</div>"),n.template=L.template(n.options.template),n.emptyTemplate=L.template(n.options.emptyTemplate),n._sortable(),n.element.on("click"+K,".k-button,.k-item",function(t){var i=e(t.target),r=i.closest("["+L.attr("name")+"]").attr(L.attr("name"));r&&(i.hasClass("k-setting-delete")?n.remove(r):n.options.sortable&&i[0]===t.currentTarget&&n.sort({field:r,dir:i.find(".k-i-sort-asc")[0]?"desc":"asc"}))}),(i.filterable||i.sortable)&&(n.fieldMenu=new B.PivotFieldMenu(n.element,{messages:n.options.messages.fieldMenu,filter:".k-setting-fieldmenu",filterable:i.filterable,sortable:i.sortable,dataSource:n.dataSource})),n.refresh()},options:{name:"PivotSettingTarget",template:null,filterable:!1,sortable:!1,emptyTemplate:"<div class='k-empty'>${data}</div>",setting:"columns",enabled:!0,messages:{empty:"Drop Fields Here"}},setDataSource:function(e){this.dataSource.unbind("change",this._refreshHandler),this.dataSource=this.options.dataSource=e,this.fieldMenu&&this.fieldMenu.setDataSource(e),e.first("change",this._refreshHandler),this.refresh()},_sortable:function(){var e=this;e.options.enabled&&(this.sortable=this.element.kendoSortable({connectWith:this.options.connectWith,filter:">:not(.k-empty)",hint:e.options.hint,cursor:"move",start:function(e){e.item.focus().blur()},change:function(t){var i=t.item.attr(L.attr("name"));"receive"==t.action?e.add(i):"remove"==t.action?e.remove(i):"sort"==t.action&&e.move(i,t.newIndex)}}).data("kendoSortable"))},_indexOf:function(e,t){var i,n,r=-1;for(i=0,n=t.length;i<n;i++)if(E(t[i])===e){r=i;break}return r},_isKPI:function(e){return"kpi"===e.type||e.measure},validate:function(e){var t=2==e.type||"aggregator"in e||this._isKPI(e);if(t)return"measures"===this.options.setting;if("measures"===this.options.setting)return t;var i=this.dataSource[this.options.setting](),n=e.defaultHierarchy||e.uniqueName;return!(this._indexOf(n,i)>-1||(i=this.dataSource["columns"===this.options.setting?"rows":"columns"](),this._indexOf(n,i)>-1))},add:function(t){var i,n,r=this.dataSource[this.options.setting]();for(i=0,n=(t=e.isArray(t)?t.slice(0):[t]).length;i<n;i++)-1!==this._indexOf(t[i],r)&&(t.splice(i,1),i-=1,n-=1);t.length&&(r=r.concat(t),this.dataSource[this.options.setting](r))},move:function(e,t){var i=this.dataSource[this.options.setting](),n=this._indexOf(e,i);n>-1&&(e=i.splice(n,1)[0],i.splice(t,0,e),this.dataSource[this.options.setting](i))},remove:function(e){var t=this.dataSource[this.options.setting](),i=this._indexOf(e,t);i>-1&&(t.splice(i,1),this.dataSource[this.options.setting](t))},sort:function(e){var t=this.options.sortable,i=(!0===t||t.allowUnsort)&&"asc"===e.dir,n=this.dataSource.sort()||[],r=function(e,t){for(var i=[],n=0,r=e.length;n<r;n++)e[n].field!==t&&i.push(e[n]);return i}(n,e.field);i&&n.length!==r.length&&(e=null),e&&r.push(e),this.dataSource.sort(r)},refresh:function(){var e,i="",n=this.dataSource[this.options.setting](),r=n.length,s=0;if(r)for(;s<r;s++)e=(e=n[s]).name===t?{name:e}:e,i+=this.template(j({sortIcon:this._sortIcon(e.name)},e));else i=this.emptyTemplate(this.options.messages.empty);this.element.html(i)},destroy:function(){V.fn.destroy.call(this),this.dataSource.unbind("change",this._refreshHandler),this.element.off(K),this.sortable&&this.sortable.destroy(),this.fieldMenu&&this.fieldMenu.destroy(),this.element=null,this._refreshHandler=null},_sortIcon:function(e){var t=function(e,t){if(!e)return null;for(var i=0,n=e.length;i<n;i++)if(e[i].field===t)return e[i];return null}(this.dataSource.sort(),E(e)),i="";return t&&(i="k-i-sort-"+t.dir),i}});var ce=V.extend({init:function(i,n){var r,s,o=this;V.fn.init.call(o,i,n),o._dataSource(),o._bindConfigurator(),o._wrapper(),o._createLayout(),o._columnBuilder=r=new ge,o._rowBuilder=s=new ve,o._contentBuilder=new _e,o._templates(),o.columnsHeader.add(o.rowsHeader).on("click","span.k-icon",function(){var i,n=e(this),a=r,l="expandColumn",d=n.attr(L.attr("path")),c={axis:"columns",path:e.parseJSON(d)};n.parent().is("td")&&(a=s,l="expandRow",c.axis="rows");var u=n.hasClass(J),h=a.metadata[d],f=h.expanded===t;i=u?"collapseMember":"expandMember",c.childrenLoaded=h.maxChildren>h.children,o.trigger(i,c)||(a.metadata[d].expanded=!u,n.toggleClass(J,!u).toggleClass("k-i-arrow-e",u),!u&&f?o.dataSource[l](c.path):o.refresh())}),o._scrollable(),o.options.autoBind&&o.dataSource.fetch(),L.notify(o)},events:["dataBinding","dataBound","expandMember","collapseMember"],options:{name:"PivotGrid",autoBind:!0,reorderable:!0,filterable:!1,sortable:!1,height:null,columnWidth:100,configurator:"",columnHeaderTemplate:null,rowHeaderTemplate:null,dataCellTemplate:null,kpiStatusTemplate:null,kpiTrendTemplate:null,messages:{measureFields:"Drop Data Fields Here",columnFields:"Drop Column Fields Here",rowFields:"Drop Rows Fields Here"}},_templates:function(){var e=this.options.columnHeaderTemplate,t=this.options.rowHeaderTemplate,i=this.options.dataCellTemplate,n=this.options.kpiStatusTemplate,r=this.options.kpiTrendTemplate;this._columnBuilder.template=L.template(e||X,{useWithBlock:!!e}),this._contentBuilder.dataTemplate=L.template(i||'#= data.dataItem ? kendo.htmlEncode(data.dataItem.fmtValue || data.dataItem.value) || "&nbsp;" : "&nbsp;" #',{useWithBlock:!!i}),this._contentBuilder.kpiStatusTemplate=L.template(n||'<span class="k-icon k-i-kpi-#=data.dataItem.value > 0 ? "open" : data.dataItem.value < 0 ? "denied" : "hold"#">#:data.dataItem.value#</span>',{useWithBlock:!!n}),this._contentBuilder.kpiTrendTemplate=L.template(r||'<span class="k-icon k-i-kpi-#=data.dataItem.value > 0 ? "increase" : data.dataItem.value < 0 ? "decrease" : "equal"#">#:data.dataItem.value#</span>',{useWithBlock:!!r}),this._rowBuilder.template=L.template(t||X,{useWithBlock:!!t})},_bindConfigurator:function(){var t=this.options.configurator;t&&e(t).kendoPivotConfigurator("setDataSource",this.dataSource)},cellInfoByElement:function(t){return t=e(t),this.cellInfo(t.index(),t.parent("tr").index())},cellInfo:function(e,t){var i,n=this._contentBuilder,r=n.columnIndexes[e||0],s=n.rowIndexes[t||0];return r&&s?(i=s.index*n.rowLength+r.index,{columnTuple:r.tuple,rowTuple:s.tuple,measure:r.measure||s.measure,dataItem:this.dataSource.view()[i]}):null},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.measuresTarget&&this.measuresTarget.setDataSource(e),this.rowsTarget&&this.rowsTarget.setDataSource(e),this.columnsTarget&&this.columnsTarget.setDataSource(e),this._bindConfigurator(),this.options.autoBind&&e.fetch()},setOptions:function(e){V.fn.setOptions.call(this,e),this._templates()},destroy:function(){V.fn.destroy.call(this),clearTimeout(this._headerReflowTimeout)},_dataSource:function(){var t=this.options.dataSource;t=e.isArray(t)?{data:t}:t,this.dataSource&&this._refreshHandler?this.dataSource.unbind("change",this._refreshHandler).unbind("stateReset",this._stateResetHandler).unbind("progress",this._progressHandler).unbind("error",this._errorHandler):(this._refreshHandler=e.proxy(this.refresh,this),this._progressHandler=e.proxy(this._requestStart,this),this._stateResetHandler=e.proxy(this._stateReset,this),this._errorHandler=e.proxy(this._error,this)),this.dataSource=L.data.PivotDataSource.create(t).bind("change",this._refreshHandler).bind("progress",this._progressHandler).bind("stateReset",this._stateResetHandler).bind("error",this._errorHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_stateReset:function(){this._columnBuilder.reset(),this._rowBuilder.reset()},_wrapper:function(){var e=this.options.height;this.wrapper=this.element.addClass("k-widget k-pivot"),e&&this.wrapper.css("height",e)},_measureFields:function(){this.measureFields=e("<div/>").addClass("k-pivot-toolbar k-header k-settings-measures"),this.measuresTarget=this._createSettingTarget(this.measureFields,{setting:"measures",messages:{empty:this.options.messages.measureFields}})},_createSettingTarget:function(t,i){var n='<span tabindex="0" class="k-button" data-'+L.ns+'name="${data.name}">${data.name}',r=i.sortable,s="";return r&&(s+="#if (data.sortIcon) {#",s+='<span class="k-icon ${data.sortIcon} k-setting-sort"></span>',s+="#}#"),(i.filterable||r)&&(s+='<span class="k-icon k-i-arrowhead-s k-setting-fieldmenu"></span>'),this.options.reorderable&&(s+='<span class="k-icon k-si-close k-setting-delete"></span>'),s&&(n+='<span class="k-field-actions">'+s+"</span>"),n+="</span>",new L.ui.PivotSettingTarget(t,e.extend({template:n,emptyTemplate:'<span class="k-empty">${data}</span>',enabled:this.options.reorderable,dataSource:this.dataSource},i))},_initSettingTargets:function(){this.columnsTarget=this._createSettingTarget(this.columnFields,{connectWith:this.rowFields,setting:"columns",filterable:this.options.filterable,sortable:this.options.sortable,messages:{empty:this.options.messages.columnFields,fieldMenu:this.options.messages.fieldMenu}}),this.rowsTarget=this._createSettingTarget(this.rowFields,{connectWith:this.columnFields,setting:"rows",filterable:this.options.filterable,sortable:this.options.sortable,messages:{empty:this.options.messages.rowFields,fieldMenu:this.options.messages.fieldMenu}})},_createLayout:function(){var t=e('<table class="k-pivot-layout"><tr><td><div class="k-pivot-rowheaders"></div></td><td><div class="k-pivot-table k-state-default"></div></td></tr></table>'),i=t.find(".k-pivot-rowheaders"),n=t.find(".k-pivot-table"),r=e("<div/>").addClass("k-grid k-widget");this._measureFields(),this.columnFields=e("<div/>").addClass("k-pivot-toolbar k-header k-settings-columns"),this.rowFields=e("<div/>").addClass("k-pivot-toolbar k-header k-settings-rows"),this.columnsHeader=e('<div class="k-grid-header-wrap" />').wrap('<div class="k-grid-header" />'),this.columnsHeader.parent().css("padding-right",L.support.scrollbar()),this.rowsHeader=e('<div class="k-grid k-widget k-alt"/>'),this.content=e('<div class="k-grid-content" />'),i.append(this.measureFields),i.append(this.rowFields),i.append(this.rowsHeader),r.append(this.columnsHeader.parent()),r.append(this.content),n.append(this.columnFields),n.append(r),this.wrapper.append(t),this.columnsHeaderTree=new L.dom.Tree(this.columnsHeader[0]),this.rowsHeaderTree=new L.dom.Tree(this.rowsHeader[0]),this.contentTree=new L.dom.Tree(this.content[0]),this._initSettingTargets()},_progress:function(e){L.ui.progress(this.wrapper,e)},_resize:function(){this.content[0].firstChild&&(this._setSectionsWidth(),this._setSectionsHeight(),this._setContentWidth(),this._setContentHeight(),this._columnHeaderReflow())},_columnHeaderReflow:function(){var e=this.columnsHeader.children("table");L.support.browser.mozilla&&(clearTimeout(this._headerReflowTimeout),e.css("table-layout","auto"),this._headerReflowTimeout=setTimeout(function(){e.css("table-layout","")}))},_setSectionsWidth:function(){var e,t=this.rowsHeader,i=t.parent(".k-pivot-rowheaders").width("auto");e=Math.max(this.measureFields.outerWidth(),this.rowFields.outerWidth()),e=Math.max(t.children("table").width(),e),i.width(e)},_setSectionsHeight:function(){var e=this.measureFields.height("auto").height(),t=this.columnFields.height("auto").height(),i=this.rowFields.height("auto").innerHeight(),n=this.columnsHeader.height("auto").innerHeight(),r=i-this.rowFields.height(),s=t>e?t:e,o=n>i?n:i;this.measureFields.height(s),this.columnFields.height(s),this.rowFields.height(o-r),this.columnsHeader.height(o)},_setContentWidth:function(){var e=this.content.find("table"),t=this.columnsHeader.children("table"),i=e.children("colgroup").children().length*this.options.columnWidth,n=Math.ceil(i/this.content.width()*100);n<100&&(n=100),e.add(t).css("width",n+"%"),this._resetColspan(t)},_setContentHeight:function(){var e=this.content,t=this.rowsHeader,i=this.wrapper.innerHeight(),n=L.support.scrollbar(),r=e[0].offsetHeight===e[0].clientHeight,s=this.options.height;if(this.wrapper.is(":visible")){if(!i||!s)return r&&(n=0),e.height("auto"),void t.height(e.height()-n);i-=this.columnFields.outerHeight(),(i-=this.columnsHeader.outerHeight())<=2*n&&(i=2*n+1,r||(i+=n)),e.height(i),r&&(n=0),t.height(i-n)}},_resetColspan:function(e){var i=this,n=e.children("tbody").children(":first").children(":first");i._colspan===t&&(i._colspan=n.attr("colspan")),n.attr("colspan",1),clearTimeout(i._layoutTimeout),i._layoutTimeout=setTimeout(function(){n.attr("colspan",i._colspan),i._colspan=t})},_axisMeasures:function(e){var t=[],i=this.dataSource,n=i.measures(),r=n.length>1||n[0]&&n[0].type;return i.measuresAxis()===e&&(0===i[e]().length||r)&&(t=n),t},items:function(){return[]},refresh:function(){var e=this,t=e.dataSource,i=t.axes(),n=(i.columns||{}).tuples||[],r=(i.rows||{}).tuples||[],s=e._columnBuilder,o=e._rowBuilder,a={},l={};if(!e.trigger("dataBinding",{action:"rebind"})){if(s.measures=e._axisMeasures("columns"),e.columnsHeaderTree.render(s.build(n)),e.rowsHeaderTree.render(o.build(r)),a={indexes:s._indexes,measures:s.measures,metadata:s.metadata},l={indexes:o._indexes,measures:this._axisMeasures("rows"),metadata:o.metadata},e.contentTree.render(e._contentBuilder.build(t.view(),a,l)),e._resize(),e.touchScroller)e.touchScroller.contentResized();else{var d=L.touchScroller(e.content);d&&d.movable&&(e.touchScroller=d,d.movable.bind("change",function(t){e.columnsHeader.scrollLeft(-t.sender.x),e.rowsHeader.scrollTop(-t.sender.y)}))}e._progress(!1),e.trigger("dataBound")}},_scrollable:function(){var t=this.columnsHeader,i=this.rowsHeader;this.content.scroll(function(){t.scrollLeft(this.scrollLeft),i.scrollTop(this.scrollTop)}),i.bind("DOMMouseScroll"+K+" mousewheel"+K,e.proxy(this._wheelScroll,this))},_wheelScroll:function(t){if(!t.ctrlKey){var i=L.wheelDeltaY(t),n=this.content.scrollTop();i&&(t.preventDefault(),e(t.currentTarget).one("wheel"+K,!1),this.rowsHeader.scrollTop(n+-i),this.content.scrollTop(n+-i))}}}),ue=L.dom.element,he=L.dom.html,fe=function(e,t){return{maxChildren:0,children:0,maxMembers:0,members:0,measures:1,levelNum:e,parentMember:0!==t}},pe=function(e,t){for(var i=[],n=0;n<=t;n++)i.push(e.members[n].name);return i},me=function(e,t){for(var i="",n=0;n<=t;n++)i+=e.members[n].name;return i},ge=O.extend({init:function(){this.measures=1,this.metadata={}},build:function(e){var t=this._tbody(e),i=this._colGroup();return[ue("table",null,[i,t])]},reset:function(){this.metadata={}},_colGroup:function(){for(var e=this._rowLength(),t=[],i=0;i<e;i++)t.push(ue("col",null));return ue("colgroup",null,t)},_tbody:function(e){var t=e[0];return this.map={},this.rows=[],this.rootTuple=t,this._indexes=[],t?(this._buildRows(t,0),this._normalize()):this.rows.push(ue("tr",null,[ue("th",null,[he("&nbsp;")])])),ue("tbody",null,this.rows)},_normalize:function(){for(var e,t,i,n,r,s=this.rows,o=s.length,a=0;a<o;a++)if(1!==(e=s[a]).rowSpan)for(i=0,t=(n=e.children).length;i<t;i++)(r=n[i]).tupleAll&&(r.attr.rowSpan=e.rowSpan)},_rowIndex:function(e){for(var t=this.rows,i=t.length,n=0;n<i&&t[n]!==e;n++);return n},_rowLength:function(){var e=this.rows[0]?this.rows[0].children:[],t=e.length,i=0,n=0;if(t)for(;n<t;n++)i+=e[n].attr.colSpan||1;return i||(i=this.measures),i},_row:function(e,t,i){var n,r,s=this.rootTuple.members[t].name,o=e.members[t].levelNum,a=s+o,l=this.map,d=l[a];return d?(d.notFirst=!1,d.parentMember&&d.parentMember===i||(d.parentMember=i,d.collapsed=0,d.colSpan=0)):((d=ue("tr",null,[])).parentMember=i,d.collapsed=0,d.colSpan=0,d.rowSpan=1,l[a]=d,(n=l[s+(Number(o)-1)])&&((r=n.children)[1]&&-1===r[1].attr.className.indexOf("k-alt")?d.notFirst=!0:d.notFirst=n.notFirst),this.rows.splice(this._rowIndex(n)+1,0,d)),d},_measures:function(e,t,i){var n,r=this.map,s=r.measureRow;s||(s=ue("tr",null,[]),r.measureRow=s,this.rows.push(s));for(var o=0,a=e.length;o<a;o++)n=e[o],s.children.push(this._cell(i||"",[this._content(n,t)],n));return a},_content:function(e,t){return he(this.template({member:e,tuple:t}))},_cell:function(e,t,i){var n=ue("th",{className:"k-header"+e},t);return n.value=i.caption||i.name,n},_buildRows:function(e,t,i){var n,r,s,o,a,l,d,c,u,h,f=e.members,p=f[t],m=f[t+1],g=[],v=0,_=0,b=0;if(!p.measure){if(c=L.stringify(pe(e,t)),n=this._row(e,t,i),s=p.children,o=s.length,(u=this.metadata[c])||(this.metadata[c]=u=fe(Number(p.levelNum),t),u.rootLevelNum=Number(this.rootTuple.members[t].levelNum)),this._indexes.push({path:c,tuple:e}),p.hasChildren&&(!1===u.expanded&&(_=u.maxChildren,n.collapsed+=_,u.children=0,o=0),(d={className:"k-icon "+(o?J:"k-i-arrow-e")})[L.attr("path")]=c,g.push(ue("span",d))),g.push(this._content(p,e)),a=this._cell(n.notFirst?" k-first":"",g,p),n.children.push(a),n.colSpan+=1,o){for(l=this._cell(" k-alt",[this._content(p,e)],p),n.children.push(l);v<o;v++)r=this._buildRows(s[v],t,p);h=r.colSpan,_=r.collapsed,a.attr.colSpan=h,u.children=h,u.members=1,n.colSpan+=h,n.collapsed+=_,n.rowSpan=r.rowSpan+1,m&&(m.measure?h=this._measures(m.children,e," k-alt"):(h=(r=this._buildRows(e,t+1)).colSpan,n.collapsed+=r.collapsed,b=r.collapsed),l.attr.colSpan=h,h-=1,u.members+=h,n.colSpan+=h)}else m&&(m.measure?h=this._measures(m.children,e):(h=(r=this._buildRows(e,t+1)).colSpan,n.collapsed+=r.collapsed,b=r.collapsed),u.members=h,h>1&&(a.attr.colSpan=h,n.colSpan+=h-1));return u.maxMembers<u.members+b&&(u.maxMembers=u.members+b),s=u.children+_,u.maxChildren<s&&(u.maxChildren=s),(l||a).tupleAll=!0,n}this._measures(p.children,e)}}),ve=O.extend({init:function(){this.metadata={}},build:function(e){var t=this._tbody(e),i=this._colGroup();return[ue("table",null,[i,t])]},reset:function(){this.metadata={}},_rowLength:function(){for(var e=this.rows[0].children,t=0,i=0,n=e[i];n;)t+=n.attr.colSpan||1,n=e[++i];return t},_colGroup:function(){for(var e=this._rowLength(),t=[],i=0;i<e;i++)t.push(ue("col",null));return ue("colgroup",null,t)},_tbody:function(e){var t=e[0];return this.rootTuple=t,this.rows=[],this.map={},this._indexes=[],t?(this._buildRows(t,0),this._normalize()):this.rows.push(ue("tr",null,[ue("td",null,[he("&nbsp;")])])),ue("tbody",null,this.rows)},_normalize:function(){for(var e,t,i,n,r=this.rows,s=r.length,o=0,a=this.rootTuple.members,l=a[0].name,d=a.length,c=0,u=this.map;o<s;o++)for(e=r[o],c=0;c<d;c++)i=this[a[c].name],(t=e.colSpan["dim"+c])&&t.colSpan<i&&(t.attr.colSpan=i-t.colSpan+1);e=u[l],n=u[l+"all"],e&&(e.children[0].attr.className="k-first"),n&&(n.children[0].attr.className+=" k-first")},_row:function(e){var t=ue("tr",null,e);return t.rowSpan=1,t.colSpan={},this.rows.push(t),t},_content:function(e,t){return he(this.template({member:e,tuple:t}))},_cell:function(e,t,i){var n=ue("td",{className:e},t);return n.value=i.caption||i.name,n},_buildRows:function(e,t){var i,n,r,s,o,a,l,d,c,u=this.map,h=e.members,f=h[t],p=h[t+1],m=f.children,g=m.length,v=Number(f.levelNum),_=this.rootTuple.members[t].name,b=pe(e,t-1).join(""),k=Number(this.rootTuple.members[t].levelNum),w=b+(k===v?"":f.parentName||""),y=u[w+"all"]||u[w],x=v+1,C=[];if(!y||y.hasChild?y=this._row():y.hasChild=!0,f.measure){for(l=y.allCell?"k-grid-footer":"",y.children.push(this._cell(l,[this._content(m[0],e)],m[0])),y.rowSpan=g,c=1;c<g;c++)this._row([this._cell(l,[this._content(m[c],e)],m[c])]);return y}if(u[b+f.name]=y,i=L.stringify(pe(e,t)),(a=this.metadata[i])||(this.metadata[i]=a=fe(v,t),a.rootLevelNum=k),this._indexes.push({path:i,tuple:e}),f.hasChildren&&(!1===a.expanded&&(g=0,a.children=0),(d={className:"k-icon "+(g?J:"k-i-arrow-e")})[L.attr("path")]=i,C.push(ue("span",d))),C.push(this._content(f,e)),l=y.allCell&&!g?"k-grid-footer":"",n=this._cell(l,C,f),n.colSpan=x,y.children.push(n),y.colSpan["dim"+t]=n,(!this[_]||this[_]<x)&&(this[_]=x),g){for(y.allCell=!1,y.hasChild=!1,c=0;c<g;c++)y!==(s=this._buildRows(m[c],t))&&(y.rowSpan+=s.rowSpan);y.rowSpan>1&&(n.attr.rowSpan=y.rowSpan),a.children=y.rowSpan,(r=this._cell("k-grid-footer",[this._content(f,e)],f)).colSpan=x,(o=this._row([r])).colSpan["dim"+t]=r,o.allCell=!0,u[b+f.name+"all"]=o,p&&(s=this._buildRows(e,t+1),r.attr.rowSpan=s.rowSpan),y.rowSpan+=o.rowSpan,a.members=o.rowSpan}else p&&(y.hasChild=!1,this._buildRows(e,t+1),(r||n).attr.rowSpan=y.rowSpan,a.members=y.rowSpan);return a.maxChildren<a.children&&(a.maxChildren=a.children),a.maxMembers<a.members&&(a.maxMembers=a.members),y}}),_e=O.extend({init:function(){this.columnAxis={},this.rowAxis={}},build:function(e,i,n){var r=i.indexes[0],s=i.metadata[r?r.path:t];this.columnAxis=i,this.rowAxis=n,this.data=e,this.rowLength=s?s.maxChildren+s.maxMembers:i.measures.length||1,this.rowLength||(this.rowLength=1);var o=this._tbody(),a=this._colGroup();return[ue("table",null,[a,o])]},_colGroup:function(){var e=this.columnAxis.measures.length||1,t=[],i=0;for(this.rows[0]&&(e=this.rows[0].children.length);i<e;i++)t.push(ue("col",null));return ue("colgroup",null,t)},_tbody:function(){return this.rows=[],this.data[0]?(this.columnIndexes=this._indexes(this.columnAxis,this.rowLength),this.rowIndexes=this._indexes(this.rowAxis,Math.ceil(this.data.length/this.rowLength)),this._buildRows()):this.rows.push(ue("tr",null,[ue("td",null,[he("&nbsp;")])])),ue("tbody",null,this.rows)},_indexes:function(e,i){var n,r,s,o,a,l=[],d=e.indexes,c=e.metadata,u=e.measures,h=u.length||1,f=0,p=0,m=0,g=d.length;if(!g){for(s=0;s<h;s++)l[s]={index:s,measure:u[s],tuple:null};return l}for(;m<g;m++){if(n=d[m],r=c[n.path],o=r.children+r.members,a=0,o&&(o-=h),!1===r.expanded&&r.children!==r.maxChildren&&(a=r.maxChildren),r.parentMember&&r.levelNum===r.rootLevelNum&&(o=-1),o>-1){for(s=0;s<h;s++)r.children,l[o+p+s]={children:o,index:f,measure:u[s],tuple:n.tuple},f+=1;for(;l[p]!==t;)p+=1}if(p===i)break;f+=a}return l},_buildRows:function(){for(var e=this.rowIndexes,t=e.length,i=0;i<t;i++)this.rows.push(this._buildRow(e[i]))},_buildRow:function(e){for(var t,i,n,r,s,o,a,l=e.index*this.rowLength,d=this.columnIndexes,c=d.length,u=[],h=0;h<c;h++)s={},(t=d[h]).children&&(s.className="k-alt"),r="",o=this.data[l+t.index],a=t.measure||e.measure,i={columnTuple:t.tuple,rowTuple:e.tuple,measure:a,dataItem:o},""!==o.value&&a&&a.type&&("status"===a.type?r=this.kpiStatusTemplate(i):"trend"===a.type&&(r=this.kpiTrendTemplate(i))),r||(r=this.dataTemplate(i)),(n=ue("td",s,[he(r)])).value=o.value,u.push(n);return s={},e.children&&(s.className="k-grid-footer"),ue("tr",s,u)}});B.plugin(ce),L.PivotExcelExporter=L.Class.extend({init:function(e){this.options=e,this.widget=e.widget,this.dataSource=this.widget.dataSource},_columns:function(){var e,t=this.widget.columnsHeaderTree.children[0],i=this.widget.rowsHeaderTree.children[0],n=t.children[0].children.length,r=i.children[0].children.length,s=this.widget.options.columnWidth,o=[];if(r&&this.dataSource.data()[0])for(e=0;e<r;e++)o.push({autoWidth:!0});for(e=0;e<n;e++)o.push({autoWidth:!1,width:s});return o},_cells:function(e,t,i){for(var n,r,s,o,a,l=[],d=0,c=e.length;d<c;d++){for(r=[],n=(s=e[d].children).length,o=0;o<n;o++)a=s[o],r.push({background:"#7a7a7a",color:"#fff",value:a.value,colSpan:a.attr.colSpan||1,rowSpan:a.attr.rowSpan||1});i&&i(r,d),l.push({cells:r,type:t})}return l},_rows:function(){var e=this.widget.columnsHeaderTree.children[0],t=this.widget.rowsHeaderTree.children[0],i=e.children[0].children.length,n=t.children[0].children.length,r=e.children[1].children,s=t.children[1].children,o=this.widget.contentTree.children[0].children[1].children,a=this._cells(r,"header");n&&a[0].cells.splice(0,0,{background:"#7a7a7a",color:"#fff",value:"",colSpan:n,rowSpan:r.length});var l=this._cells(s,"data",function(e,t){for(var n,r,s=0,a=o[t].children;s<i;s++)n=a[s],r=Number(n.value),isNaN(r)&&(r=n.value),e.push({background:"#dfdfdf",color:"#333",value:r,colSpan:1,rowSpan:1})});return a.concat(l)},_freezePane:function(){var e=this.widget.columnsHeaderTree.children[0];return{colSplit:this.widget.rowsHeaderTree.children[0].children[0].children.length,rowSplit:e.children[1].children.length}},workbook:function(){var t;return this.dataSource.view()[0]?(t=e.Deferred()).resolve():t=this.dataSource.fetch(),t.then(e.proxy(function(){return{sheets:[{columns:this._columns(),rows:this._rows(),freezePane:this._freezePane(),filter:null}]}},this))}});var be={extend:function(t){t.events.push("excelExport"),t.options.excel=e.extend(t.options.excel,this.options),t.saveAsExcel=this.saveAsExcel},options:{proxyURL:"",filterable:!1,fileName:"Export.xlsx"},saveAsExcel:function(){var t=this.options.excel||{};new L.PivotExcelExporter({widget:this}).workbook().then(e.proxy(function(e){if(!this.trigger("excelExport",{workbook:e})){var i=new L.ooxml.Workbook(e);L.saveAs({dataURI:i.toDataURL(),fileName:e.fileName||t.fileName,proxyURL:t.proxyURL,forceProxy:t.forceProxy})}},this))}};L.PivotExcelMixin=be,L.ooxml&&L.ooxml.Workbook&&be.extend(ce.prototype),L.PDFMixin&&(L.PDFMixin.extend(ce.prototype),ce.fn._drawPDF=function(){return this._drawPDFShadow({width:this.wrapper.width()},{avoidLinks:this.options.pdf.avoidLinks})})}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.treeview.draganddrop",["kendo.data","kendo.draganddrop"],function(){return function(e,t){var i=window.kendo,n=i.ui,r=e.proxy,s=e.extend,o="visibility",a="k-state-hover";n.HierarchicalDragAndDrop=i.Class.extend({init:function(t,o){this.element=t,this.hovered=t,this.options=s({dragstart:e.noop,drag:e.noop,drop:e.noop,dragend:e.noop},o),this._draggable=new n.Draggable(t,{ignore:"input,a,textarea,.k-multiselect-wrap,select,button,a.k-button>.k-icon,button.k-button>.k-icon,span.k-icon.k-i-expand,span.k-icon.k-i-collapse",filter:o.filter,autoScroll:o.autoScroll,cursorOffset:{left:10,top:i.support.mobileOS?-40/i.support.zoomLevel():10},hint:r(this._hint,this),dragstart:r(this.dragstart,this),dragcancel:r(this.dragcancel,this),drag:r(this.drag,this),dragend:r(this.dragend,this),$angular:o.$angular})},_hint:function(e){return"<div class='k-header k-drag-clue'><span class='k-icon k-drag-status' />"+this.options.hintText(e)+"</div>"},_removeTouchHover:function(){i.support.touch&&this.hovered&&(this.hovered.find("."+a).removeClass(a),this.hovered=!1)},_hintStatus:function(t){var i=this._draggable.hint.find(".k-drag-status")[0];if(!t)return e.trim(i.className.replace(/k-(icon|drag-status)/g,""));i.className="k-icon k-drag-status "+t},dragstart:function(t){this.source=t.currentTarget.closest(this.options.itemSelector),this.options.dragstart(this.source)&&t.preventDefault(),this.options.reorderable?this.dropHint=e("<div class='k-drop-hint' />").css(o,"hidden").appendTo(this.element):this.dropHint=e()},drag:function(t){var n,r,s,l,d,c,u,h,f,p,m,g=this.options,v=this.source,_=this.dropTarget=e(i.eventTarget(t)),b=_.closest(g.allowedContainers);b.length?v[0]==_[0]||g.contains(v[0],_[0])?m="k-denied":(m="k-insert-middle",(n=(f=g.itemFromTarget(_)).item).length?(this._removeTouchHover(),r=n.outerHeight(),l=f.content,g.reorderable?(d=r/(l.length>0?4:2),s=i.getOffset(n).top,c=t.y.location<s+d,u=s+r-d<t.y.location,h=l.length&&!c&&!u):(h=!0,c=!1,u=!1),this.hovered=!!h&&b,this.dropHint.css(o,h?"hidden":"visible"),this._lastHover&&this._lastHover[0]!=l[0]&&this._lastHover.removeClass(a),this._lastHover=l.toggleClass(a,h),h?m="k-add":((p=n.position()).top+=c?0:r,this.dropHint.css(p)[c?"prependTo":"appendTo"](g.dropHintContainer(n)),c&&f.first&&(m="k-insert-top"),u&&f.last&&(m="k-insert-bottom"))):_[0]!=this.dropHint[0]&&(this._lastHover&&this._lastHover.removeClass(a),m=e.contains(this.element[0],b[0])?"k-denied":"k-add")):(m="k-denied",this._removeTouchHover()),this.options.drag({originalEvent:t.originalEvent,source:v,target:_,pageY:t.y.location,pageX:t.x.location,status:m.substring(2),setStatus:function(e){m=e}}),0!==m.indexOf("k-insert")&&this.dropHint.css(o,"hidden"),this._hintStatus(m)},dragcancel:function(){this.dropHint.remove()},dragend:function(e){var t,i,n,r="over",s=this.source,l=this.dropHint,d=this.dropTarget;"visible"==l.css(o)?(r=this.options.dropPositionFrom(l),t=l.closest(this.options.itemSelector)):d&&((t=d.closest(this.options.itemSelector)).length||(t=d.closest(this.options.allowedContainers))),i={originalEvent:e.originalEvent,source:s[0],destination:t[0],valid:"k-denied"!=this._hintStatus(),setValid:function(e){this.valid=e},dropTarget:d[0],position:r},n=this.options.drop(i),l.remove(),this._removeTouchHover(),this._lastHover&&this._lastHover.removeClass(a),i.valid&&!n?(this._draggable.dropped=!0,this.options.dragend({originalEvent:e.originalEvent,source:s,destination:t,position:r})):this._draggable.dropped=i.valid},destroy:function(){this._lastHover=this.hovered=null,this._draggable.destroy()}})}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.treeview",["kendo.data","kendo.treeview.draganddrop"],function(){return function(e,t){function i(e){return function(t){var i=t.children(".k-animation-container");return i.length||(i=t),i.children(e)}}function n(e){return h.template(e,{useWithBlock:!1})}function r(e){return e.find("> div .k-checkbox-wrapper [type=checkbox]")}function s(e){return function(t,i){var n,r=(i=i.closest(F)).parent();return r.parent().is("li")&&(n=r.parent()),this._dataSourceMove(t,r,n,function(t,n){return this._insert(t.data(),n,i.index()+e)})}}function o(t){var i=t.children("div"),n=t.children("ul"),r=i.children(".k-icon"),s=t.children(":checkbox"),o=i.children(".k-in");t.hasClass("k-treeview")||(i.length||(i=e("<div />").prependTo(t)),!r.length&&n.length?r=e("<span class='k-icon' />").prependTo(i):n.length&&n.children().length||(r.remove(),n.remove()),s.length&&e("<span class='k-checkbox-wrapper' />").appendTo(i).append(s),o.length||((o=t.children("a").eq(0).addClass("k-in k-link")).length||(o=e("<span class='k-in' />")),o.appendTo(i),i.length&&function(t,i){for(var n;t&&"ul"!=t.nodeName.toLowerCase();)n=t,t=t.nextSibling,3==n.nodeType&&(n.nodeValue=e.trim(n.nodeValue)),u.test(n.className)?i.insertBefore(n,i.firstChild):i.appendChild(n)}(i[0].nextSibling,o[0])))}var a,l,d,c,u,h=window.kendo,f=h.ui,p=h.data,m=e.extend,g=h.template,v=e.isArray,_=f.Widget,b=p.HierarchicalDataSource,k=e.proxy,w=h.keys,y=".kendoTreeView",x="checked",C="indeterminate",S="dragend",T="undefined",D="k-treeview",F=".k-item",E={text:"dataTextField",url:"dataUrlField",spriteCssClass:"dataSpriteCssClassField",imageUrl:"dataImageUrlField"},R=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName};l=i(".k-group"),d=i(".k-group,.k-content"),c=function(e){return e.children("div").children(".k-icon")},u=/k-sprite/,a=h.ui.DataBoundWidget.extend({init:function(e,t){var i,n=!1,r=t&&!!t.dataSource;v(t)&&(t={dataSource:t}),t&&typeof t.loadOnDemand==T&&v(t.dataSource)&&(t.loadOnDemand=!1),_.prototype.init.call(this,e,t),e=this.element,t=this.options,i=e.is("ul")&&e||e.hasClass(D)&&e.children("ul"),(n=!r&&i.length)&&(t.dataSource.list=i),this._animation(),this._accessors(),this._templates(),e.hasClass(D)?(this.wrapper=e,this.root=e.children("ul").eq(0)):(this._wrapper(),i&&(this.root=e,this._group(this.wrapper))),this._tabindex(),this.root.attr("role","tree"),this._dataSource(n),this._attachEvents(),this._dragging(),n?this._syncHtmlAndDataSource():t.autoBind&&(this._progress(!0),this.dataSource.fetch()),t.checkboxes&&t.checkboxes.checkChildren&&this.updateIndeterminate(),this.element[0].id&&(this._ariaId=h.format("{0}_tv_active",this.element[0].id)),h.notify(this)},_attachEvents:function(){var t=this,i=".k-in:not(.k-state-selected,.k-state-disabled)";t.wrapper.on("mouseenter"+y,".k-in.k-state-selected",function(e){e.preventDefault()}).on("mouseenter"+y,i,function(){e(this).addClass("k-state-hover")}).on("mouseleave"+y,i,function(){e(this).removeClass("k-state-hover")}).on("click"+y,i,k(t._click,t)).on("dblclick"+y,".k-in:not(.k-state-disabled)",k(t._toggleButtonClick,t)).on("click"+y,".k-plus,.k-minus",k(t._toggleButtonClick,t)).on("keydown"+y,k(t._keydown,t)).on("focus"+y,k(t._focus,t)).on("blur"+y,k(t._blur,t)).on("mousedown"+y,".k-in,.k-checkbox-wrapper :checkbox,.k-plus,.k-minus",k(t._mousedown,t)).on("change"+y,".k-checkbox-wrapper :checkbox",k(t._checkboxChange,t)).on("click"+y,".k-checkbox-wrapper :checkbox",k(t._checkboxClick,t)).on("click"+y,".k-request-retry",k(t._retryRequest,t)).on("click"+y,function(i){e(i.target).is(":kendoFocusable")||t.focus()})},_checkboxClick:function(t){var i=e(t.target);i.data(C)&&(i.data(C,!1).prop(C,!1).prop(x,!0),this._checkboxChange(t))},_syncHtmlAndDataSource:function(e,t){e=e||this.root;var i,n,s,o,a,l=(t=t||this.dataSource).view(),d=h.attr("uid"),c=h.attr("expanded"),u=this.options.checkboxes,f=e.children("li");for(i=0;i<f.length;i++)o=(s=l[i]).uid,(n=f.eq(i)).attr("role","treeitem").attr(d,o),s.expanded="true"===n.attr(c),u&&(a=r(n),s.checked=a.prop(x),a.attr("id","_"+o),a.next(".k-checkbox-label").attr("for","_"+o)),this._syncHtmlAndDataSource(n.children("ul"),s.children)},_animation:function(){var e=this.options,t=e.animation;!1===t?t={expand:{effects:{}},collapse:{hide:!0,effects:{}}}:t.collapse&&"effects"in t.collapse||(t.collapse=m({reverse:!0},t.expand)),m(t.collapse,{hide:!0}),e.animation=t},_dragging:function(){var t=this.options.dragAndDrop,i=this.dragging;if(t&&!i){var n=this;this.dragging=new f.HierarchicalDragAndDrop(this.element,{reorderable:!0,$angular:this.options.$angular,autoScroll:this.options.autoScroll,filter:"div:not(.k-state-disabled) .k-in",allowedContainers:".k-treeview",itemSelector:".k-treeview .k-item",hintText:k(this._hintText,this),contains:function(t,i){return e.contains(t,i)},dropHintContainer:function(e){return e},itemFromTarget:function(e){var t=e.closest(".k-top,.k-mid,.k-bot");return{item:t,content:e.closest(".k-in"),first:t.hasClass("k-top"),last:t.hasClass("k-bot")}},dropPositionFrom:function(e){return e.prevAll(".k-in").length>0?"after":"before"},dragstart:function(e){return n.trigger("dragstart",{sourceNode:e[0]})},drag:function(e){n.trigger("drag",{originalEvent:e.originalEvent,sourceNode:e.source[0],dropTarget:e.target[0],pageY:e.pageY,pageX:e.pageX,statusClass:e.status,setStatusClass:e.setStatus})},drop:function(e){return n.trigger("drop",{originalEvent:e.originalEvent,sourceNode:e.source,destinationNode:e.destination,valid:e.valid,setValid:function(t){this.valid=t,e.setValid(t)},dropTarget:e.dropTarget,dropPosition:e.position})},dragend:function(e){function t(t){n.updateIndeterminate(),n.trigger(S,{originalEvent:e.originalEvent,sourceNode:t&&t[0],destinationNode:r[0],dropPosition:s})}var i=e.source,r=e.destination,s=e.position;"over"==s?n.append(i,r,t):("before"==s?i=n.insertBefore(i,r):"after"==s&&(i=n.insertAfter(i,r)),t(i))}})}else!t&&i&&(i.destroy(),this.dragging=null)},_hintText:function(e){return this.templates.dragClue({item:this.dataItem(e),treeview:this.options})},_templates:function(){var e=this.options,t=k(this._fieldAccessor,this);e.template&&"string"==typeof e.template?e.template=g(e.template):e.template||(e.template=n("# var text = "+t("text")+"(data.item); ## if (typeof data.item.encoded != 'undefined' && data.item.encoded === false) {##= text ## } else { ##: text ## } #")),this._checkboxes(),this.templates={wrapperCssClass:function(e,t){var i="k-item",n=t.index;return e.firstLevel&&0===n&&(i+=" k-first"),n==e.length-1&&(i+=" k-last"),i},cssClass:function(e,t){var i="",n=t.index,r=e.length-1;return e.firstLevel&&0===n&&(i+="k-top "),i+=0===n&&n!=r?"k-top":n==r?"k-bot":"k-mid"},textClass:function(e,t){var i="k-in";return t&&(i+=" k-link"),!1===e.enabled&&(i+=" k-state-disabled"),!0===e.selected&&(i+=" k-state-selected"),i},toggleButtonClass:function(e){var t="k-icon";return!0!==e.expanded?t+=" k-plus":t+=" k-minus",!1===e.enabled&&(t+="-disabled"),t},groupAttributes:function(e){var t="";return e.firstLevel||(t="role='group'"),t+(!0!==e.expanded?" style='display:none'":"")},groupCssClass:function(e){var t="k-group";return e.firstLevel&&(t+=" k-treeview-lines"),t},dragClue:n("#= data.treeview.template(data) #"),group:n("<ul class='#= data.r.groupCssClass(data.group) #'#= data.r.groupAttributes(data.group) #>#= data.renderItems(data) #</ul>"),itemContent:n("# var imageUrl = "+t("imageUrl")+"(data.item); ## var spriteCssClass = "+t("spriteCssClass")+"(data.item); ## if (imageUrl) { #<img class='k-image' alt='' src='#= imageUrl #'># } ## if (spriteCssClass) { #<span class='k-sprite #= spriteCssClass #' /># } ##= data.treeview.template(data) #"),itemElement:n("# var item = data.item, r = data.r; ## var url = "+t("url")+"(item); #<div class='#= r.cssClass(data.group, item) #'># if (item.hasChildren) { #<span class='#= r.toggleButtonClass(item) #' role='presentation' /># } ## if (data.treeview.checkboxes) { #<span class='k-checkbox-wrapper' role='presentation'>#= data.treeview.checkboxes.template(data) #</span># } ## var tag = url ? 'a' : 'span'; ## var textAttr = url ? ' href=\\'' + url + '\\'' : ''; #<#=tag# class='#= r.textClass(item, !!url) #'#= textAttr #>#= r.itemContent(data) #</#=tag#></div>"),item:n("# var item = data.item, r = data.r; #<li role='treeitem' class='#= r.wrapperCssClass(data.group, item) #' "+h.attr("uid")+"='#= item.uid #' aria-selected='#= item.selected ? \"true\" : \"false \" #' #=item.enabled === false ? \"aria-disabled='true'\" : ''## if (item.expanded) { #data-expanded='true' aria-expanded='true'# } #>#= r.itemElement(data) #</li>"),loading:n("<div class='k-icon k-loading' /> #: data.messages.loading #"),retry:n("#: data.messages.requestFailed # <button class='k-button k-request-retry'>#: data.messages.retry #</button>")}},items:function(){return this.element.find(".k-item > div:first-child")},setDataSource:function(t){var i=this.options;i.dataSource=t,this._dataSource(),i.checkboxes&&i.checkboxes.checkChildren&&this.dataSource.one("change",e.proxy(this.updateIndeterminate,this,null)),this.options.autoBind&&this.dataSource.fetch()},_bindDataSource:function(){this._refreshHandler=k(this.refresh,this),this._errorHandler=k(this._error,this),this.dataSource.bind("change",this._refreshHandler),this.dataSource.bind("error",this._errorHandler)},_unbindDataSource:function(){var e=this.dataSource;e&&(e.unbind("change",this._refreshHandler),e.unbind("error",this._errorHandler))},_dataSource:function(e){function t(e){for(var i=0;i<e.length;i++)e[i]._initChildren(),e[i].children.fetch(),t(e[i].children.view())}var i=this.options.dataSource;i=v(i)?{data:i}:i,this._unbindDataSource(),i.fields||(i.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]),this.dataSource=i=b.create(i),e&&(i.fetch(),t(i.view())),this._bindDataSource()},events:["dragstart","drag","drop",S,"dataBound","expand","collapse","select","change","navigate","check"],options:{name:"TreeView",dataSource:{},animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:100}},messages:{loading:"Loading...",requestFailed:"Request failed.",retry:"Retry"},dragAndDrop:!1,checkboxes:!1,autoBind:!0,autoScroll:!1,loadOnDemand:!0,template:"",dataTextField:null},_accessors:function(){var e,t,i,n=this.options,r=this.element;for(e in E)t=n[E[e]],i=r.attr(h.attr(e+"-field")),!t&&i&&(t=i),t||(t=e),v(t)||(t=[t]),n[E[e]]=t},_fieldAccessor:function(t){var i=this.options[E[t]],n=i.length,r="(function(item) {";return 0===n?r+="return item['"+t+"'];":(r+="var levels = ["+e.map(i,function(e){return"function(d){ return "+h.expr(e)+"}"}).join(",")+"];",r+="return levels[Math.min(item.level(), "+n+"-1)](item)"),r+="})"},setOptions:function(e){_.fn.setOptions.call(this,e),this._animation(),this._dragging(),this._templates()},_trigger:function(e,t){return this.trigger(e,{node:t.closest(F)[0]})},_setChecked:function(t,i){if(t&&e.isFunction(t.view))for(var n=0,r=t.view();n<r.length;n++)r[n][x]=i,r[n].children&&this._setChecked(r[n].children,i)},_setIndeterminate:function(e){var t,i,n,s=l(e),o=!0;if(s.length&&(t=r(s.children()),i=t.length)){if(i>1){for(n=1;n<i;n++)if(t[n].checked!=t[n-1].checked||t[n].indeterminate||t[n-1].indeterminate){o=!1;break}}else o=!t[0].indeterminate;return r(e).data(C,!o).prop(C,!o).prop(x,o&&t[0].checked)}},updateIndeterminate:function(e){e=e||this.wrapper;var t,i,n=l(e).children();if(n.length){for(t=0;t<n.length;t++)this.updateIndeterminate(n.eq(t));(i=this._setIndeterminate(e))&&i.prop(x)&&(this.dataItem(e).checked=!0)}},_bubbleIndeterminate:function(e){if(e.length){var t,i=this.parent(e);i.length&&(this._setIndeterminate(i),!1===(t=i.children("div").find(".k-checkbox-wrapper :checkbox")).prop(C)?this.dataItem(i).set(x,t.prop(x)):delete this.dataItem(i).checked,this._bubbleIndeterminate(i))}},_checkboxChange:function(t){var i=e(t.target),n=i.prop(x),r=i.closest(F),s=this.dataItem(r);s.checked!=n&&(s.set(x,n),this._trigger("check",r))},_toggleButtonClick:function(t){this.toggle(e(t.target).closest(F))},_mousedown:function(t){var i=e(t.currentTarget).closest(F);this._clickTarget=i,this.current(i)},_focusable:function(e){return e&&e.length&&e.is(":visible")&&!e.find(".k-in:first").hasClass("k-state-disabled")},_focus:function(){var t=this.select(),i=this._clickTarget;h.support.touch||(i&&i.length&&(t=i),this._focusable(t)||(t=this.current()),this._focusable(t)||(t=this._nextVisible(e())),this.current(t))},focus:function(){var e,t=this.wrapper,i=t[0],n=[],r=[],s=document.documentElement;do{(i=i.parentNode).scrollHeight>i.clientHeight&&(n.push(i),r.push(i.scrollTop))}while(i!=s);for(t.focus(),e=0;e<n.length;e++)n[e].scrollTop=r[e]},_blur:function(){this.current().find(".k-in:first").removeClass("k-state-focused")},_enabled:function(e){return!e.children("div").children(".k-in").hasClass("k-state-disabled")},parent:function(t){var i,n,r=/\bk-treeview\b/,s=/\bk-item\b/;"string"==typeof t&&(t=this.element.find(t)),R(t)||(t=t[0]),n=s.test(t.className);do{t=t.parentNode,s.test(t.className)&&(n?i=t:n=!0)}while(!r.test(t.className)&&!i);return e(i)},_nextVisible:function(e){function t(e){for(;e.length&&!e.next().length;)e=n.parent(e);return e.next().length?e.next():e}var i,n=this,r=n._expanded(e);return e.length&&e.is(":visible")?r?(i=l(e).children().first()).length||(i=t(e)):i=t(e):i=n.root.children().eq(0),n._enabled(i)||(i=n._nextVisible(i)),i},_previousVisible:function(e){var t,i;if(!e.length||e.prev().length)for(i=e.length?e.prev():this.root.children().last();this._expanded(i)&&(t=l(i).children().last()).length;)i=t;else i=this.parent(e)||e;return this._enabled(i)||(i=this._previousVisible(i)),i},_keydown:function(t){var i,n=t.keyCode,r=this.current(),s=this._expanded(r),o=r.find(".k-checkbox-wrapper:first :checkbox"),a=h.support.isRtl(this.element);t.target==t.currentTarget&&(!a&&n==w.RIGHT||a&&n==w.LEFT?s?i=this._nextVisible(r):this.expand(r):!a&&n==w.LEFT||a&&n==w.RIGHT?s?this.collapse(r):(i=this.parent(r),this._enabled(i)||(i=void 0)):n==w.DOWN?i=this._nextVisible(r):n==w.UP?i=this._previousVisible(r):n==w.HOME?i=this._nextVisible(e()):n==w.END?i=this._previousVisible(e()):n==w.ENTER?r.find(".k-in:first").hasClass("k-state-selected")||this._trigger("select",r)||this.select(r):n==w.SPACEBAR&&o.length&&(o.prop(x,!o.prop(x)).data(C,!1).prop(C,!1),this._checkboxChange({target:o}),i=r),i&&(t.preventDefault(),r[0]!=i[0]&&(this._trigger("navigate",i),this.current(i))))},_click:function(t){var i=e(t.currentTarget),n=d(i.closest(F)),r=i.attr("href");(r?"#"==r||r.indexOf("#"+this.element.id+"-")>=0:n.length&&!n.children().length)&&t.preventDefault(),i.hasClass(".k-state-selected")||this._trigger("select",i)||this.select(i)},_wrapper:function(){var e,t,i=this.element;i.is("ul")?(e=i.wrap("<div />").parent(),t=i):t=(e=i).children("ul").eq(0),this.wrapper=e.addClass("k-widget k-treeview"),this.root=t},_group:function(e){var t=e.hasClass(D),i={firstLevel:t,expanded:t||this._expanded(e)},n=e.children("ul");n.addClass(this.templates.groupCssClass(i)).css("display",i.expanded?"":"none"),this._nodes(n,i)},_nodes:function(t,i){var n,r=this,s=t.children("li");i=m({length:s.length},i),s.each(function(t,s){s=e(s),n={index:t,expanded:r._expanded(s)},o(s),r._updateNodeClasses(s,i,n),r._group(s)})},_checkboxes:function(){var e,t=this.options,i=t.checkboxes;i&&(e="<input type='checkbox' tabindex='-1' #= (item.enabled === false) ? 'disabled' : '' # #= item.checked ? 'checked' : '' #",i.name&&(e+=" name='"+i.name+"'"),"string"==typeof(i=m({template:e+=" id='_#= item.uid #' class='k-checkbox' /><label for='_#= item.uid #' class='k-checkbox-label'></label>"},t.checkboxes)).template&&(i.template=g(i.template)),t.checkboxes=i)},_updateNodeClasses:function(e,t,i){var n=e.children("div"),r=e.children("ul"),s=this.templates;if(!e.hasClass("k-treeview")){(i=i||{}).expanded=typeof i.expanded!=T?i.expanded:this._expanded(e),i.index=typeof i.index!=T?i.index:e.index(),i.enabled=typeof i.enabled!=T?i.enabled:!n.children(".k-in").hasClass("k-state-disabled"),(t=t||{}).firstLevel=typeof t.firstLevel!=T?t.firstLevel:e.parent().parent().hasClass(D),t.length=typeof t.length!=T?t.length:e.parent().children().length,e.removeClass("k-first k-last").addClass(s.wrapperCssClass(t,i)),n.removeClass("k-top k-mid k-bot").addClass(s.cssClass(t,i));var o=n.children(".k-in"),a=o[0]&&"a"==o[0].nodeName.toLowerCase();o.removeClass("k-in k-link k-state-default k-state-disabled").addClass(s.textClass(i,a)),(r.length||"true"==e.attr("data-hasChildren"))&&(n.children(".k-icon").removeClass("k-plus k-minus k-plus-disabled k-minus-disabled").addClass(s.toggleButtonClass(i)),r.addClass("k-group"))}},_processNodes:function(t,i){var n=this;n.element.find(t).each(function(t,r){i.call(n,t,e(r).closest(F))})},dataItem:function(t){var i=e(t).closest(F).attr(h.attr("uid")),n=this.dataSource;return n&&n.getByUid(i)},_insertNode:function(t,i,n,r,s){var a,d,c,u,h=l(n),f=h.children().length+1,p={firstLevel:n.hasClass(D),expanded:!s,length:f},m="",g=function(e,t){e.appendTo(t)};for(c=0;c<t.length;c++)(u=t[c]).index=i+c,m+=this._renderItem({group:p,item:u});if((d=e(m)).length){for(this.angular("compile",function(){return{elements:d.get(),data:t.map(function(e){return{dataItem:e}})}}),h.length||(h=e(this._renderGroup({group:p})).appendTo(n)),r(d,h),n.hasClass("k-item")&&(o(n),this._updateNodeClasses(n)),this._updateNodeClasses(d.prev().first()),this._updateNodeClasses(d.next().last()),c=0;c<t.length;c++)(u=t[c]).hasChildren&&(a=u.children.data()).length&&this._insertNode(a,u.index,d.eq(c),g,!this._expanded(d.eq(c)));return d}},_updateNodes:function(t,i){function n(e,t){e.find(".k-checkbox-wrapper :checkbox").prop(x,t).data(C,!1).prop(C,!1)}var r,s,o,a,l,c,u=this,h={treeview:u.options,item:a},p="expanded"!=i&&"checked"!=i;if("selected"==i)a=t[0],s=u.findByUid(a.uid).find(".k-in:first").removeClass("k-state-hover").toggleClass("k-state-selected",a[i]).end(),a[i]&&u.current(s),s.attr("aria-selected",!!a[i]);else{var m=e.map(t,function(e){return u.findByUid(e.uid).children("div")});for(p&&u.angular("cleanup",function(){return{elements:m}}),r=0;r<t.length;r++)h.item=a=t[r],s=(o=m[r]).parent(),p&&o.children(".k-in").html(u.templates.itemContent(h)),i==x?(n(o,l=a[i]),u.options.checkboxes.checkChildren&&(n(s.children(".k-group"),l),u._setChecked(a.children,l),u._bubbleIndeterminate(s))):"expanded"==i?u._toggle(s,a,a[i]):"enabled"==i&&(s.find(".k-checkbox-wrapper :checkbox").prop("disabled",!a[i]),c=!d(s).is(":visible"),s.removeAttr("aria-disabled"),a[i]||(a.selected&&a.set("selected",!1),a.expanded&&a.set("expanded",!1),c=!0,s.attr("aria-selected",!1).attr("aria-disabled",!0)),u._updateNodeClasses(s,{},{enabled:a[i],expanded:!c})),o.length&&this.trigger("itemChange",{item:o,data:a,ns:f});p&&u.angular("compile",function(){return{elements:m,data:e.map(t,function(e){return[{dataItem:e}]})}})}},_appendItems:function(e,t,i){var n=l(i).children(),r=!this._expanded(i);typeof e==T&&(e=n.length),this._insertNode(t,e,i,function(t,i){e>=n.length?t.appendTo(i):t.insertBefore(n.eq(e))},r),this._expanded(i)&&(this._updateNodeClasses(i),l(i).css("display","block"))},_refreshChildren:function(e,t,i){var n,r,s,a=this.options,d=a.loadOnDemand,c=a.checkboxes&&a.checkboxes.checkChildren;if(l(e).empty(),t.length)for(this._appendItems(i,t,e),r=l(e).children(),d&&c&&this._bubbleIndeterminate(r.last()),n=0;n<r.length;n++)s=r.eq(n),this.trigger("itemChange",{item:s.children("div"),data:this.dataItem(s),ns:f});else o(e)},_refreshRoot:function(t){var i=this._renderGroup({items:t,group:{firstLevel:!0,expanded:!0}});if(this.root.length){this._angularItems("cleanup");var n=e(i);this.root.attr("class",n.attr("class")).html(n.html())}else this.root=this.wrapper.html(i).children("ul");this.root.attr("role","tree");for(var r=this.root.children(".k-item"),s=0;s<t.length;s++)this.trigger("itemChange",{item:r.eq(s),data:t[s],ns:f});this._angularItems("compile")},refresh:function(e){var t,i=e.node,n=e.action,r=e.items,s=this.wrapper,o=this.options,a=o.loadOnDemand,l=o.checkboxes&&o.checkboxes.checkChildren;if(e.field){if(!r[0]||!r[0].level)return;return this._updateNodes(r,e.field)}if(i&&(s=this.findByUid(i.uid),this._progress(s,!1)),l&&"remove"!=n){var d=!1;for(t=0;t<r.length;t++)if("checked"in r[t]){d=!0;break}if(!d&&i&&i.checked)for(t=0;t<r.length;t++)r[t].checked=!0}if("add"==n?this._appendItems(e.index,r,s):"remove"==n?this._remove(this.findByUid(r[0].uid),!1):"itemchange"==n?this._updateNodes(r):"itemloaded"==n?this._refreshChildren(s,r,e.index):this._refreshRoot(r),"remove"!=n)for(t=0;t<r.length;t++)a&&!r[t].expanded||r[t].load();this.trigger("dataBound",{node:i?s:void 0})},_error:function(e){var t=e.node&&this.findByUid(e.node.uid),i=this.templates.retry({messages:this.options.messages});t?(this._progress(t,!1),this._expanded(t,!1),c(t).addClass("k-i-refresh"),e.node.loaded(!1)):(this._progress(!1),this.element.html(i))},_retryRequest:function(e){e.preventDefault(),this.dataSource.fetch()},expand:function(e){this._processNodes(e,function(e,t){this.toggle(t,!0)})},collapse:function(e){this._processNodes(e,function(e,t){this.toggle(t,!1)})},enable:function(e,t){t=2!=arguments.length||!!t,this._processNodes(e,function(e,i){this.dataItem(i).set("enabled",t)})},current:function(t){var i=this._current,n=this.element,r=this._ariaId;return arguments.length>0&&t&&t.length?(i&&(i[0].id===r&&i.removeAttr("id"),i.find(".k-in:first").removeClass("k-state-focused")),(i=this._current=e(t,n).closest(F)).find(".k-in:first").addClass("k-state-focused"),void((r=i[0].id||r)&&(this.wrapper.removeAttr("aria-activedescendant"),i.attr("id",r),this.wrapper.attr("aria-activedescendant",r)))):(i||(i=this._nextVisible(e())),i)},select:function(t){var i=this,n=i.element;if(!arguments.length)return n.find(".k-state-selected").closest(F);t=e(t,n).closest(F),n.find(".k-state-selected").each(function(){var t=i.dataItem(this);t?(t.set("selected",!1),delete t.selected):e(this).removeClass("k-state-selected")}),t.length&&(i.dataItem(t).set("selected",!0),i._clickTarget=t),i.trigger("change")},_toggle:function(e,t,i){var n,r=this.options,s=d(e),o=i?"expand":"collapse";s.data("animating")||this._trigger(o,e)||(this._expanded(e,i),n=t&&t.loaded(),i&&!n?(r.loadOnDemand&&this._progress(e,!0),s.remove(),t.load()):(this._updateNodeClasses(e,{},{expanded:i}),i||s.css("height",s.height()).css("height"),s.kendoStop(!0,!0).kendoAnimate(m({reset:!0},r.animation[o],{complete:function(){i&&s.css("height","")}}))))},toggle:function(t,i){t=e(t),c(t).is(".k-minus,.k-plus,.k-minus-disabled,.k-plus-disabled")&&(1==arguments.length&&(i=!this._expanded(t)),this._expanded(t,i))},destroy:function(){_.fn.destroy.call(this),this.wrapper.off(y),this._unbindDataSource(),this.dragging&&this.dragging.destroy(),h.destroy(this.element),this.root=this.wrapper=this.element=null},_expanded:function(e,t){var i=h.attr("expanded"),n=this.dataItem(e),r=t;if(1==arguments.length)return"true"===e.attr(i)||n&&n.expanded;d(e).data("animating")||(n&&(n.set("expanded",r),r=n.expanded),r?(e.attr(i,"true"),e.attr("aria-expanded","true")):(e.removeAttr(i),e.attr("aria-expanded","false")))},_progress:function(e,t){var i=this.element,n=this.templates.loading({messages:this.options.messages});1==arguments.length?(t=e)?i.html(n):i.empty():c(e).toggleClass("k-loading",t).removeClass("k-i-refresh")},text:function(e,t){var i=this.dataItem(e),n=this.options[E.text],r=i.level(),s=n.length,o=n[Math.min(r,s-1)];if(!t)return i[o];i.set(o,t)},_objectOrSelf:function(t){return e(t).closest("[data-role=treeview]").data("kendoTreeView")||this},_dataSourceMove:function(t,i,n,r){var s,o=this._objectOrSelf(n||i),a=o.dataSource,l=e.Deferred().resolve().promise();return n&&n[0]!=o.element[0]&&((s=o.dataItem(n)).loaded()||(o._progress(n,!0),l=s.load()),n!=this.root&&((a=s.children)&&a instanceof b||(s._initChildren(),s.loaded(!0),a=s.children))),t=this._toObservableData(t),r.call(o,a,t,l)},_toObservableData:function(t){var i,n,r=t;return(t instanceof window.jQuery||R(t))&&(i=this._objectOrSelf(t).dataSource,n=e(t).attr(h.attr("uid")),(r=i.getByUid(n))&&(r=i.remove(r))),r},_insert:function(e,t,i){t instanceof h.data.ObservableArray?t=t.toJSON():v(t)||(t=[t]);var n=e.parent();return n&&n._initChildren&&(n.hasChildren=!0,n._initChildren()),e.splice.apply(e,[i,0].concat(t)),this.findByUid(e[i].uid)},insertAfter:s(1),insertBefore:s(0),append:function(t,i,n){var r=this.root;return i&&(r=l(i)),this._dataSourceMove(t,r,i,function(t,r,s){var o,a=this;return s.then(function(){o=function(){i&&a._expanded(i,!0);var e=t.data(),n=Math.max(e.length,0);return a._insert(e,r,n)}(),(n=n||e.noop)(o)}),o||null})},_remove:function(t,i){var n,r,s;return t=e(t,this.element),this.angular("cleanup",function(){return{elements:t.get()}}),n=t.parent().parent(),r=t.prev(),s=t.next(),t[i?"detach":"remove"](),n.hasClass("k-item")&&(o(n),this._updateNodeClasses(n)),this._updateNodeClasses(r),this._updateNodeClasses(s),t},remove:function(e){var t=this.dataItem(e);t&&this.dataSource.remove(t)},detach:function(e){return this._remove(e,!0)},findByText:function(t){return e(this.element).find(".k-in").filter(function(i,n){return e(n).text()==t}).closest(F)},findByUid:function(t){for(var i,n=this.element.find(".k-item"),r=h.attr("uid"),s=0;s<n.length;s++)if(n[s].getAttribute(r)==t){i=n[s];break}return e(i)},expandPath:function(t,i){function n(){o.shift(),o.length?r(o[0]).then(n):a.call(s)}function r(t){var i=e.Deferred(),n=s.dataSource.get(t);return n?n.loaded()?(n.set("expanded",!0),i.resolve()):(s._progress(s.findByUid(n.uid),!0),n.load().then(function(){n.set("expanded",!0),i.resolve()})):i.resolve(),i.promise()}var s=this,o=t.slice(0),a=i||e.noop;r(o[0]).then(n)},_parentIds:function(e){for(var t=e&&e.parentNode(),i=[];t&&t.parentNode;)i.unshift(t.id),t=t.parentNode();return i},expandTo:function(e){e instanceof h.data.Node||(e=this.dataSource.get(e));var t=this._parentIds(e);this.expandPath(t)},_renderItem:function(e){return e.group||(e.group={}),e.treeview=this.options,e.r=this.templates,this.templates.item(e)},_renderGroup:function(e){var t=this;return e.renderItems=function(e){var i="",n=0,r=e.items,s=r?r.length:0,o=e.group;for(o.length=s;n<s;n++)e.group=o,e.item=r[n],e.item.index=n,i+=t._renderItem(e);return i},e.r=t.templates,t.templates.group(e)}}),f.plugin(a)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.pivot.fieldmenu",["kendo.pivotgrid","kendo.menu","kendo.window","kendo.treeview","kendo.dropdownlist"],function(){return function(e,t){function i(e,t,i){if(!e)return[];for(var n,r=0,s=[],o=(e=e.filters).length;r<o;r++)n=e[r].operator,(i||"in"===n)&&n!==i||e[r].field!==t||s.push(e[r]);return s}function n(e,t){var i,r=e.length;for(i=0;i<r;i++)e[i].checked&&0!==e[i].level()&&t.push(e[i].uniqueName),e[i].hasChildren&&n(e[i].children.view(),t)}var r=window.kendo,s=r.ui,o=e.proxy,a=".kendoPivotFieldMenu",l=s.Widget,d=l.extend({init:function(e,t){l.fn.init.call(this,e,t),this._dataSource(),this._layout(),r.notify(this)},events:[],options:{name:"PivotFieldMenu",filter:null,filterable:!0,sortable:!0,messages:{info:"Show items with value that:",sortAscending:"Sort Ascending",sortDescending:"Sort Descending",filterFields:"Fields Filter",filter:"Filter",include:"Include Fields...",title:"Fields to include",clear:"Clear",ok:"OK",cancel:"Cancel",operators:{contains:"Contains",doesnotcontain:"Does not contain",startswith:"Starts with",endswith:"Ends with",eq:"Is equal to",neq:"Is not equal to"}}},_layout:function(){var t=this.options;this.wrapper=e(r.template(c)({ns:r.ns,filterable:t.filterable,sortable:t.sortable,messages:t.messages})),this.menu=this.wrapper.kendoContextMenu({filter:t.filter,target:this.element,orientation:"vertical",showOn:"click",closeOnClick:!1,open:o(this._menuOpen,this),select:o(this._select,this),copyAnchorStyles:!1}).data("kendoContextMenu"),this._createWindow(),t.filterable&&this._initFilterForm()},_initFilterForm:function(){var e=this.menu.element.find(".k-filter-item"),t=o(this._filter,this);this._filterOperator=new r.ui.DropDownList(e.find("select")),this._filterValue=e.find(".k-textbox"),e.on("submit"+a,t).on("click"+a,".k-button-filter",t).on("click"+a,".k-button-clear",o(this._reset,this))},_setFilterForm:function(e){var t=this._filterOperator,i="",n="";e&&(i=e.operator,n=e.value),t.value(i),t.value()||t.select(0),this._filterValue.val(n)},_clearFilters:function(e){var t,n,r=this.dataSource.filter()||{},s=0;for(r.filters=r.filters||[],n=(t=i(r,e)).length;s<n;s++)r.filters.splice(r.filters.indexOf(t[s]),1);return r},_convert:function(t){var i=((this.dataSource.options.schema.model||{}).fields||{})[this.currentMember];return i&&("number"===i.type?t=parseFloat(t):"boolean"===i.type&&(t=Boolean(e.parseJSON(t)))),t},_filter:function(e){var t=this._convert(this._filterValue.val());if(e.preventDefault(),""!==t){var i={field:this.currentMember,operator:this._filterOperator.value(),value:t},n=this._clearFilters(this.currentMember);n.filters.push(i),this.dataSource.filter(n),this.menu.close()}else this.menu.close()},_reset:function(e){var t=this._clearFilters(this.currentMember);e.preventDefault(),t.filters[0]||(t={}),this.dataSource.filter(t),this._setFilterForm(null),this.menu.close()},_sort:function(e){var t=this.currentMember,i=this.dataSource.sort()||[];(i=function(e,t){for(var i=[],n=0,r=e.length;n<r;n++)e[n].field!==t&&i.push(e[n]);return i}(i,t)).push({field:t,dir:e}),this.dataSource.sort(i),this.menu.close()},setDataSource:function(e){this.options.dataSource=e,this._dataSource()},_dataSource:function(){this.dataSource=r.data.PivotDataSource.create(this.options.dataSource)},_createWindow:function(){var t=this.options.messages;this.includeWindow=e(r.template(u)({messages:t})).on("click"+a,".k-button-ok",o(this._applyIncludes,this)).on("click"+a,".k-button-cancel",o(this._closeWindow,this)),this.includeWindow=new s.Window(this.includeWindow,{title:t.title,visible:!1,resizable:!1,open:o(this._windowOpen,this)})},_applyIncludes:function(e){var t,r=[],s=this.treeView.dataSource.view(),o=s[0].checked,a=this.dataSource.filter(),l=i(a,this.currentMember,"in")[0];n(s,r),l&&(o?(a.filters.splice(a.filters.indexOf(l),1),a.filters.length||(a={})):l.value=r.join(","),t=a),r.length&&(t||o||(t={field:this.currentMember,operator:"in",value:r.join(",")},a&&(a.filters.push(t),t=a))),t&&this.dataSource.filter(t),this._closeWindow(e)},_closeWindow:function(e){e.preventDefault(),this.includeWindow.close()},_treeViewDataSource:function(){var t=this;return r.data.HierarchicalDataSource.create({schema:{model:{id:"uniqueName",hasChildren:function(e){return parseInt(e.childrenCardinality,10)>0}}},transport:{read:function(n){var r={},s=t.treeView.dataSource.get(n.data.uniqueName);n.data.uniqueName?(r.memberUniqueName=s.uniqueName.replace(/\&/g,"&amp;"),r.treeOp=1):r.levelUniqueName=t.currentMember+".[(ALL)]",t.dataSource.schemaMembers(r).done(function(r){!function(t,n,r){var s,o=0,a=r.length;if(t=i(t,n,"in")[0])for(s=t.value.split(",");o<a;o++)r[o].checked=e.inArray(r[o].uniqueName,s)>=0;else for(;o<a;o++)r[o].checked=!0}(t.dataSource.filter(),t.currentMember,r),n.success(r)}).fail(n.error)}}})},_createTreeView:function(e){var t=this;t.treeView=new s.TreeView(e,{autoBind:!1,dataSource:t._treeViewDataSource(),dataTextField:"caption",template:"#: data.item.caption || data.item.name #",checkboxes:{checkChildren:!0},dataBound:function(){s.progress(t.includeWindow.element,!1)}})},_menuOpen:function(t){if(t.event){var n=r.attr("name");this.currentMember=e(t.event.target).closest("["+n+"]").attr(n),this.options.filterable&&this._setFilterForm(i(this.dataSource.filter(),this.currentMember)[0])}},_select:function(t){var i=e(t.item);e(".k-pivot-filter-window").not(this.includeWindow.element).kendoWindow("close"),i.hasClass("k-include-item")?this.includeWindow.center().open():i.hasClass("k-sort-asc")?this._sort("asc"):i.hasClass("k-sort-desc")&&this._sort("desc")},_windowOpen:function(){this.treeView||this._createTreeView(this.includeWindow.element.find(".k-treeview")),s.progress(this.includeWindow.element,!0),this.treeView.dataSource.read()},destroy:function(){l.fn.destroy.call(this),this.menu&&(this.menu.destroy(),this.menu=null),this.treeView&&(this.treeView.destroy(),this.treeView=null),this.includeWindow&&(this.includeWindow.destroy(),this.includeWindow=null),this.wrapper=null,this.element=null}}),c='<ul class="k-pivot-fieldmenu"># if (sortable) {#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-icon k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-icon k-i-sort-desc"></span>${messages.sortDescending}</span></li># if (filterable) {#<li class="k-separator"></li># } ## } ## if (filterable) {#<li class="k-item k-include-item"><span class="k-link"><span class="k-icon k-filter"></span>${messages.include}</span></li><li class="k-separator"></li><li class="k-item k-filter-item"><span class="k-link"><span class="k-icon k-filter"></span>${messages.filterFields}</span><ul><li><div class="k-filterable k-content" tabindex="-1" data-role="fieldmenu"><form class="k-filter-menu"><div><div class="k-filter-help-text">#=messages.info#</div><select>#for(var op in messages.operators){#<option value="#=op#">#=messages.operators[op]#</option>#}#</select><input class="k-textbox" type="text" /><div><a class="k-button k-primary k-button-filter" href="\\#">#=messages.filter#</a><a class="k-button k-button-clear" href="\\#">#=messages.clear#</a></div></div></form></div></li></ul></li># } #</ul>',u='<div class="k-popup-edit-form k-pivot-filter-window"><div class="k-edit-form-container"><div class="k-treeview"></div><div class="k-edit-buttons k-state-default"><a class="k-button k-primary k-button-ok" href="\\#">${messages.ok}</a><a class="k-button k-button-cancel" href="\\#">${messages.cancel}</a></div></div>';s.plugin(d)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.filtercell",["kendo.autocomplete","kendo.datepicker","kendo.numerictextbox","kendo.combobox","kendo.dropdownlist"],function(){return function(e,t){function i(t){var i="string"==typeof t?t:t.operator;return e.inArray(i,h)>-1}function n(t,i){var r=[];if(e.isPlainObject(t))if(t.hasOwnProperty("filters"))r=t.filters;else if(t.field==i)return t;e.isArray(t)&&(r=t);for(var s=0;s<r.length;s++){var o=n(r[s],i);if(o)return o}}function r(t,i){t.filters&&(t.filters=e.grep(t.filters,function(e){return r(e,i),e.filters?e.filters.length:e.field!=i}))}var s=window.kendo,o=s.ui,a=s.data.DataSource,l=o.Widget,d="Is equal to",c="Is not equal to",u=e.proxy,h=["isnull","isnotnull","isempty","isnotempty"],f=l.extend({init:function(t,n){t=e(t).addClass("k-filtercell");var r,o,a,d,c=this.wrapper=e("<span/>").appendTo(t),h=this,f=n,p=h.operators=n.operators||{},m=h.input=e("<input/>").attr(s.attr("bind"),"value: value").appendTo(c);l.fn.init.call(h,t[0],n),n=h.options,r=h.dataSource=n.dataSource,h.model=r.reader.model,d=n.type="string";var g=(s.getter("reader.model.fields",!0)(r)||{})[n.field];if(g&&g.type&&(d=n.type=g.type),n.values&&(n.type=d="enums"),p=p[d]||n.operators[d],!f.operator)for(a in p){n.operator=a;break}if(h._parse=function(e){return null!=e?e+"":e},h.model&&h.model.fields){var v=h.model.fields[n.field];v&&v.parse&&(h._parse=u(v.parse,v))}h.defaultOperator=n.operator,h.viewModel=o=s.observable({operator:n.operator,value:null,operatorVisible:function(){var e=this.get("value");return null!==e&&void 0!==e&&"undefined"!=e||i(this.get("operator"))&&!h._clearInProgress}}),o.bind("change",u(h.updateDsFilter,h)),"string"==d&&h.initSuggestDataSource(n),null!==n.inputWidth&&m.width(n.inputWidth),h._setInputType(n,d),"boolean"!=d&&!1!==n.showOperators?h._createOperatorDropDown(p):c.addClass("k-operator-hidden"),h._createClearIcon(),s.bind(this.wrapper,o),"string"==d&&(n.template||h.setAutoCompleteSource()),"enums"==d&&h.setComboBoxSource(h.options.values),h._refreshUI(),h._refreshHandler=u(h._refreshUI,h),h.dataSource.bind("change",h._refreshHandler)},_setInputType:function(t,i){var n=this.input;if("function"==typeof t.template)t.template.call(this.viewModel,{element:this.input,dataSource:this.suggestDataSource}),this._angularItems("compile");else if("string"==i)n.attr(s.attr("role"),"autocomplete").attr(s.attr("text-field"),t.dataTextField||t.field).attr(s.attr("filter"),t.suggestionOperator).attr(s.attr("delay"),t.delay).attr(s.attr("min-length"),t.minLength).attr(s.attr("value-primitive"),!0);else if("date"==i)n.attr(s.attr("role"),"datepicker");else if("boolean"==i){n.remove();var r=e("<input type='radio'/>"),o=this.wrapper,a=s.guid(),l=e("<label/>").text(t.messages.isTrue).append(r);r.attr(s.attr("bind"),"checked:value").attr("name",a).val("true");var d=l.clone().text(t.messages.isFalse);r.clone().val("false").appendTo(d),o.append([l,d])}else"number"==i?n.attr(s.attr("role"),"numerictextbox"):"enums"==i&&n.attr(s.attr("role"),"combobox").attr(s.attr("text-field"),"text").attr(s.attr("suggest"),!0).attr(s.attr("filter"),"contains").attr(s.attr("value-field"),"value").attr(s.attr("value-primitive"),!0)},_createOperatorDropDown:function(t){var i=[];for(var n in t)i.push({text:t[n],value:n});var r=e('<input class="k-dropdown-operator" '+s.attr("bind")+'="value: operator"/>').appendTo(this.wrapper);this.operatorDropDown=r.kendoDropDownList({dataSource:i,dataTextField:"text",dataValueField:"value",open:function(){this.popup.element.width(150)},valuePrimitive:!0}).data("kendoDropDownList"),this.operatorDropDown.wrapper.find(".k-i-arrow-s").removeClass("k-i-arrow-s").addClass("k-filter")},initSuggestDataSource:function(e){var t=e.suggestDataSource;t instanceof a||(!e.customDataSource&&t&&(t.group=void 0),t=this.suggestDataSource=a.create(t)),e.customDataSource||(t._pageSize=void 0,t.reader.data=function(e,t){var i=s.getter(t,!0);return function(t){for(var n=e(t),r=[],s=0,o={};s<n.length;){var a=n[s++],l=i(a);o.hasOwnProperty(l)||(r.push(a),o[l]=!0)}return r}}(t.reader.data,this.options.field)),this.suggestDataSource=t},setAutoCompleteSource:function(){var e=this.input.data("kendoAutoComplete");e&&e.setDataSource(this.suggestDataSource)},setComboBoxSource:function(e){var t=a.create({data:e}),i=this.input.data("kendoComboBox");i&&i.setDataSource(t)},_refreshUI:function(){var t=n(this.dataSource.filter(),this.options.field)||{},i=this.viewModel;this.manuallyUpdatingVM=!0,t=e.extend(!0,{},t),"boolean"==this.options.type&&i.value!==t.value&&this.wrapper.find(":radio").prop("checked",!1),t.operator&&i.set("operator",t.operator),i.set("value",t.value),this.manuallyUpdatingVM=!1},updateDsFilter:function(t){var n=this.viewModel;if(!this.manuallyUpdatingVM&&("operator"!=t.field||void 0!==n.value||i(n))){var r=e.extend({},this.viewModel.toJSON(),{field:this.options.field}),s={logic:"and",filters:[]};(void 0!==r.value&&null!==r.value||i(r)&&!this._clearInProgress)&&s.filters.push(r);var o=this._merge(s);o.filters.length?this.dataSource.filter(o):this.dataSource.filter({})}},_merge:function(t){var n,s,o,a=t.logic||"and",l=t.filters,d=this.dataSource.filter()||{filters:[],logic:"and"};for(r(d,this.options.field),s=0,o=l.length;s<o;s++)(n=l[s]).value=this._parse(n.value);return(l=e.grep(l,function(e){return""!==e.value&&null!==e.value||i(e)})).length&&(d.filters.length?(t.filters=l,"and"!==d.logic&&(d.filters=[{logic:d.logic,filters:d.filters}],d.logic="and"),l.length>1?d.filters.push(t):d.filters.push(l[0])):(d.filters=l,d.logic=a)),d},_createClearIcon:function(){e("<button type='button' class='k-button k-button-icon' title = "+this.options.messages.clear+"/>").attr(s.attr("bind"),"visible:operatorVisible").html("<span class='k-icon k-i-close'/>").click(u(this.clearFilter,this)).appendTo(this.wrapper)},clearFilter:function(){this._clearInProgress=!0,i(this.viewModel.operator)&&this.viewModel.set("operator",this.defaultOperator),this.viewModel.set("value",null),this._clearInProgress=!1},_angularItems:function(e){var t=this.wrapper.closest("th").get(),i=this.options.column;this.angular(e,function(){return{elements:t,data:[{column:i}]}})},destroy:function(){this.filterModel=null,this.operatorDropDown=null,this._angularItems("cleanup"),this._refreshHandler&&(this.dataSource.bind("change",this._refreshHandler),this._refreshHandler=null),s.unbind(this.element),l.fn.destroy.call(this),s.destroy(this.element)},events:["change"],options:{name:"FilterCell",delay:200,minLength:1,inputWidth:null,values:void 0,customDataSource:!1,field:"",dataTextField:"",type:"string",suggestDataSource:null,suggestionOperator:"startswith",operator:"eq",showOperators:!0,template:null,messages:{isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",operator:"Operator"},operators:{string:{eq:d,neq:c,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with",isnull:"Is null",isnotnull:"Is not null",isempty:"Is empty",isnotempty:"Is not empty"},number:{eq:d,neq:c,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than",isnull:"Is null",isnotnull:"Is not null"},date:{eq:d,neq:c,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before",isnull:"Is null",isnotnull:"Is not null"},enums:{eq:d,neq:c,isnull:"Is null",isnotnull:"Is not null"}}}});o.plugin(f)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.panelbar",["kendo.core"],function(){return function(e,t){function i(t){(t=e(t)).children(p).children(".k-icon").remove(),t.filter(":has(.k-panel),:has(.k-content)").children(".k-link:not(:has([class*=k-i-arrow]))").each(function(){var t=e(this),i=t.parent();t.append("<span class='k-icon "+(i.hasClass(b)?"k-i-arrow-n k-panelbar-collapse":"k-i-arrow-s k-panelbar-expand")+"'/>")})}function n(t){(t=e(t)).filter(".k-first:not(:first-child)").removeClass(v),t.filter(".k-last:not(:last-child)").removeClass(f),t.filter(":first-child").addClass(v),t.filter(":last-child").addClass(f)}var r=window.kendo,s=r.ui,o=r.keys,a=e.extend,l=e.each,d=r.template,c=s.Widget,u=/^(ul|a|div)$/i,h=".kendoPanelBar",f="k-last",p=".k-link",m=".k-item",g=".k-group:visible",v="k-first",_="k-content",b="k-state-active",k="> .k-panel",w="> .k-content",y="k-state-disabled",x="k-state-selected",C="."+x,S="k-state-highlight",T=".k-item:not(.k-state-disabled)",D="> "+T+" > "+p+", .k-panel > "+T+" > "+p,F="> li > "+C+", .k-panel > li > "+C,E="aria-disabled",R="aria-expanded",A="aria-selected",I=":visible",M={content:d("<div role='region' class='k-content'#= contentAttributes(data) #>#= content(item) #</div>"),group:d("<ul role='group' aria-hidden='true' class='#= groupCssClass(group) #'#= groupAttributes(group) #>#= renderItems(data) #</ul>"),itemWrapper:d("<#= tag(item) # class='#= textClass(item, group) #' #= contentUrl(item) ##= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:d("<li role='menuitem' #=aria(item)#class='#= wrapperCssClass(group, item) #'>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, panelBar: panelBar, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"),image:d("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:d("<span class='#= arrowClass(item) #'></span>"),sprite:d("<span class='k-sprite #= spriteCssClass #'></span>"),empty:d("")},H={aria:function(e){var t="";return(e.items||e.content||e.contentUrl)&&(t+=R+"='"+(e.expanded?"true":"false")+"' "),!1===e.enabled&&(t+=E+"='true'"),t},wrapperCssClass:function(e,t){var i="k-item",n=t.index;return!1===t.enabled?i+=" "+y:!0===t.expanded?i+=" "+b:i+=" k-state-default",0===n&&(i+=" k-first"),n==e.length-1&&(i+=" k-last"),t.cssClass&&(i+=" "+t.cssClass),i},textClass:function(e,t){var i="k-link";return t.firstLevel&&(i+=" k-header"),i},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},arrowClass:function(e){var t="k-icon";return t+=e.expanded?" k-i-arrow-n k-panelbar-collapse":" k-i-arrow-s k-panelbar-expand"},text:function(e){return!1===e.encoded?e.text:r.htmlEncode(e.text)},tag:function(e){return e.url||e.contentUrl?"a":"span"},groupAttributes:function(e){return!0!==e.expanded?" style='display:none'":""},groupCssClass:function(){return"k-group k-panel"},contentAttributes:function(e){return!0!==e.item.expanded?" style='display:none'":""},content:function(e){return e.content?e.content:e.contentUrl?"":"&nbsp;"},contentUrl:function(e){return e.contentUrl?'href="'+e.contentUrl+'"':""}},z=c.extend({init:function(t,i){var n,s=this;c.fn.init.call(s,t,i),t=s.wrapper=s.element.addClass("k-widget k-reset k-header k-panelbar"),i=s.options,t[0].id&&(s._itemId=t[0].id+"_pb_active"),s._tabindex(),s._initData(i),s._updateClasses(),s._animations(i),t.on("click"+h,D,function(t){s._click(e(t.currentTarget))&&t.preventDefault()}).on("mouseenter"+h+" mouseleave"+h,D,s._toggleHover).on("click"+h,".k-item.k-state-disabled > .k-link",!1).on("keydown"+h,e.proxy(s._keydown,s)).on("focus"+h,function(){var e=s.select();s._current(e[0]?e:s._first())}).on("blur"+h,function(){s._current(null)}).attr("role","menu"),(n=t.find("li."+b+" > ."+_))[0]&&s.expand(n.parent(),!1),i.dataSource&&s._angularCompile(),r.notify(s)},events:["expand","collapse","select","activate","error","contentLoad"],options:{name:"PanelBar",animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:200}},expandMode:"multiple"},_angularCompile:function(){var e=this;e.angular("compile",function(){return{elements:e.element.children("li"),data:[{dataItem:e.options.$angular}]}})},_angularCleanup:function(){var e=this;e.angular("cleanup",function(){return{elements:e.element.children("li")}})},destroy:function(){c.fn.destroy.call(this),this.element.off(h),this._angularCleanup(),r.destroy(this.element)},_initData:function(e){e.dataSource&&(this.element.empty(),this.append(e.dataSource,this.element))},setOptions:function(e){var t=this.options.animation;this._animations(e),e.animation=a(!0,t,e.animation),"dataSource"in e&&this._initData(e),c.fn.setOptions.call(this,e)},expand:function(t,i){var n=this,r={};if(t=this.element.find(t),!n._animating||!t.find("ul").is(":visible"))return n._animating=!0,i=!1!==i,t.each(function(s,o){var a=(o=e(o)).find(k).add(o.find(w));if(!o.hasClass(y)&&a.length>0){if("single"==n.options.expandMode&&n._collapseAllExpanded(o))return n;t.find("."+S).removeClass(S),o.addClass(S),i||(r=n.options.animation,n.options.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}}),n._triggerEvent("expand",o)||n._toggleItem(o,!1),i||(n.options.animation=r)}}),n;n.one("complete",function(){setTimeout(function(){n.expand(t)})})},collapse:function(t,i){var n=this,r={};return n._animating=!0,i=!1!==i,(t=n.element.find(t)).each(function(t,s){var o=(s=e(s)).find(k).add(s.find(w));!s.hasClass(y)&&o.is(I)&&(s.removeClass(S),i||(r=n.options.animation,n.options.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}}),n._triggerEvent("collapse",s)||n._toggleItem(s,!0),i||(n.options.animation=r))}),n},_toggleDisabled:function(e,t){(e=this.element.find(e)).toggleClass("k-state-default",t).toggleClass(y,!t).attr(E,!t)},select:function(t){var i=this;return void 0===t?i.element.find(F).parent():((t=i.element.find(t)).length?t.each(function(){var t=e(this),n=t.children(p);if(t.hasClass(y))return i;i._triggerEvent("select",t)||i._updateSelected(n)}):this._updateSelected(t),i)},clearSelection:function(){this.select(e())},enable:function(e,t){return this._toggleDisabled(e,!1!==t),this},disable:function(e){return this._toggleDisabled(e,!1),this},append:function(e,t){t=this.element.find(t);var r=this._insert(e,t,t.length?t.find(k):null);return l(r.items,function(){r.group.append(this),n(this)}),i(t),n(r.group.find(".k-first, .k-last")),r.group.height("auto"),this},insertBefore:function(e,t){t=this.element.find(t);var i=this._insert(e,t,t.parent());return l(i.items,function(){t.before(this),n(this)}),n(t),i.group.height("auto"),this},insertAfter:function(e,t){t=this.element.find(t);var i=this._insert(e,t,t.parent());return l(i.items,function(){t.after(this),n(this)}),n(t),i.group.height("auto"),this},remove:function(e){var t=(e=this.element.find(e)).parentsUntil(this.element,m),r=e.parent("ul");return e.remove(),!r||r.hasClass("k-panelbar")||r.children(m).length||r.remove(),t.length&&(i(t=t.eq(0)),n(t)),this},reload:function(t){var i=this;(t=i.element.find(t)).each(function(){var t=e(this);i._ajaxRequest(t,t.children("."+_),!t.is(I))})},_first:function(){return this.element.children(T).first()},_last:function(){var e=this.element.children(T).last(),t=e.children(g);return t[0]?t.children(T).last():e},_current:function(t){var i=this._focused,n=this._itemId;if(void 0===t)return i;this.element.removeAttr("aria-activedescendant"),i&&i.length&&(i[0].id===n&&i.removeAttr("id"),i.children(p).removeClass("k-state-focused")),e(t).length&&(n=t[0].id||n,t.attr("id",n).children(p).addClass("k-state-focused"),this.element.attr("aria-activedescendant",n)),this._focused=t},_keydown:function(e){var t=e.keyCode,i=this._current();e.target==e.currentTarget&&(t==o.DOWN||t==o.RIGHT?(this._current(this._nextItem(i)),e.preventDefault()):t==o.UP||t==o.LEFT?(this._current(this._prevItem(i)),e.preventDefault()):t==o.ENTER||t==o.SPACEBAR?(this._click(i.children(p)),e.preventDefault()):t==o.HOME?(this._current(this._first()),e.preventDefault()):t==o.END&&(this._current(this._last()),e.preventDefault()))},_nextItem:function(e){if(!e)return this._first();var t=e.children(g),i=e.nextAll(":visible").first();return t[0]&&(i=t.children("."+v)),i[0]||(i=e.parent(g).parent(m).next()),i[0]||(i=this._first()),i.hasClass(y)&&(i=this._nextItem(i)),i},_prevItem:function(e){if(!e)return this._last();var t,i=e.prevAll(":visible").first();if(i[0])for(t=i;t[0];)(t=t.children(g).children("."+f))[0]&&(i=t);else(i=e.parent(g).parent(m))[0]||(i=this._last());return i.hasClass(y)&&(i=this._prevItem(i)),i},_insert:function(t,i,n){var s,o,l=e.isPlainObject(t),d=i&&i[0];return d||(n=this.element),o={firstLevel:n.hasClass("k-panelbar"),expanded:n.parent().hasClass(b),length:n.children().length},d&&!n.length&&(n=e(z.renderGroup({group:o})).appendTo(i)),t instanceof r.Observable&&(t=t.toJSON()),l||e.isArray(t)?(s=e.map(l?[t]:t,function(t,i){return e("string"==typeof t?t:z.renderItem({group:o,item:a(t,{index:i})}))}),d&&i.attr(R,!1)):(s="string"==typeof t&&"<"!=t.charAt(0)?this.element.find(t):e(t),this._updateItemsClasses(s)),{items:s,group:n}},_toggleHover:function(t){var i=e(t.currentTarget);i.parents("li."+y).length||i.toggleClass("k-state-hover","mouseenter"==t.type)},_updateClasses:function(){var t,r;(t=this.element.find("li > ul").not(function(){return e(this).parentsUntil(".k-panelbar","div").length}).addClass("k-group k-panel").attr("role","group")).parent().attr(R,!1).not("."+b).children("ul").attr("aria-hidden",!0).hide(),r=this.element.add(t).children(),this._updateItemsClasses(r),i(r),n(r)},_updateItemsClasses:function(e){for(var t=e.length,i=0;i<t;i++)this._updateItemClasses(e[i],i)},_updateItemClasses:function(t,i){var n,s,o=this._selected,a=this.options.contentUrls,l=a&&a[i],d=this.element[0];t=e(t).addClass("k-item").attr("role","menuitem"),r.support.browser.msie&&t.css("list-style-position","inside").css("list-style-position",""),t.children("img").addClass("k-image"),(s=t.children("a").addClass("k-link"))[0]&&(s.attr("href",l),s.children("img").addClass("k-image")),t.filter(":not([disabled]):not([class*=k-state])").addClass("k-state-default"),t.filter("li[disabled]").addClass("k-state-disabled").attr(E,!0).removeAttr("disabled"),t.children("div").addClass(_).attr("role","region").attr("aria-hidden",!0).hide().parent().attr(R,!1),(s=t.children(C))[0]&&(o&&o.removeAttr(A).children(C).removeClass(x),s.addClass(x),this._selected=t.attr(A,!0)),t.children(p)[0]||(n="<span class='k-link'/>",a&&a[i]&&t[0].parentNode==d&&(n='<a class="k-link k-header" href="'+a[i]+'"/>'),t.contents().filter(function(){return!(this.nodeName.match(u)||3==this.nodeType&&!e.trim(this.nodeValue))}).wrapAll(n)),t.parent(".k-panelbar")[0]&&t.children(p).addClass("k-header")},_click:function(e){var t,i,n,r,s=this.element;if(!e.parents("li."+y).length&&e.closest(".k-widget")[0]==s[0]){var o=e.closest(p),a=o.closest(m);if(this._updateSelected(o),i=a.find(k).add(a.find(w)),n=o.attr("href"),r=n&&("#"==n.charAt(n.length-1)||-1!=n.indexOf("#"+this.element[0].id+"-")),t=!(!r&&!i.length),i.data("animating"))return t;if(this._triggerEvent("select",a)&&(t=!0),!1!==t){if("single"==this.options.expandMode&&this._collapseAllExpanded(a))return t;if(i.length){var l=i.is(I);this._triggerEvent(l?"collapse":"expand",a)||(t=this._toggleItem(a,l))}return t}}},_toggleItem:function(e,t){var i,n,r=e.find(k),s=e.find(p).attr("href");return r.length?(this._toggleGroup(r,t),i=!0):(n=e.children("."+_)).length&&(i=!0,n.is(":empty")&&void 0!==s?this._ajaxRequest(e,n,t):this._toggleGroup(n,t)),i},_toggleGroup:function(e,t){var i=this,n=i.options.animation,r=n.expand,s=a({},n.collapse),o=s&&"effects"in s;e.is(I)==t?(e.parent().attr(R,!t).attr("aria-hidden",t).toggleClass(b,!t).find("> .k-link > .k-icon").toggleClass("k-i-arrow-n",!t).toggleClass("k-panelbar-collapse",!t).toggleClass("k-i-arrow-s",t).toggleClass("k-panelbar-expand",t),t?(r=a(o?s:a({reverse:!0},r),{hide:!0})).complete=function(){i._animationCallback()}:r=a({complete:function(e){i._triggerEvent("activate",e.closest(m)),i._animationCallback()}},r),e.kendoStop(!0,!0).kendoAnimate(r)):i._animating=!1},_animationCallback:function(){this.trigger("complete"),this._animating=!1},_collapseAllExpanded:function(t){var i,n=this,r=!1,s=t.find(k).add(t.find(w));return s.is(I)&&(r=!0),s.is(I)||0===s.length||(i=t.siblings()).find(k).add(i.find(w)).filter(function(){return e(this).is(I)}).each(function(t,i){i=e(i),(r=n._triggerEvent("collapse",i.closest(m)))||n._toggleGroup(i,!0)}),r},_ajaxRequest:function(t,i,n){var r=this,s=t.find(".k-panelbar-collapse, .k-panelbar-expand"),o=t.find(p),a=setTimeout(function(){s.addClass("k-loading")},100),l=o.attr("href");e.ajax({type:"GET",cache:!1,url:l,dataType:"html",data:{},error:function(e,t){s.removeClass("k-loading"),r.trigger("error",{xhr:e,status:t})&&this.complete()},complete:function(){clearTimeout(a),s.removeClass("k-loading")},success:function(e){function s(){return{elements:i.get()}}try{r.angular("cleanup",s),i.html(e),r.angular("compile",s)}catch(e){var o=window.console;o&&o.error&&o.error(e.name+": "+e.message+" in "+l),this.error(this.xhr,"error")}r._toggleGroup(i,n),r.trigger("contentLoad",{item:t[0],contentElement:i[0]})}})},_triggerEvent:function(e,t){return this.trigger(e,{item:t[0]})},_updateSelected:function(e){var t=this.element,i=e.parent(m),n=this._selected;n&&n.removeAttr(A),this._selected=i.attr(A,!0),t.find(F).removeClass(x),t.find("> ."+S+", .k-panel > ."+S).removeClass(S),e.addClass(x),e.parentsUntil(t,m).filter(":has(.k-header)").addClass(S),this._current(i[0]?i:null)},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}})}});a(z,{renderItem:function(e){e=a({panelBar:{},group:{}},e);var t=M.empty,i=e.item;return M.item(a(e,{image:i.imageUrl?M.image:t,sprite:i.spriteCssClass?M.sprite:t,itemWrapper:M.itemWrapper,renderContent:z.renderContent,arrow:i.items||i.content||i.contentUrl?M.arrow:t,subGroup:z.renderGroup},H))},renderGroup:function(e){return M.group(a({renderItems:function(e){for(var t="",i=0,n=e.items,r=n?n.length:0,s=a({length:r},e.group);i<r;i++)t+=z.renderItem(a(e,{group:s,item:a({index:i},n[i])}));return t}},e,H))},renderContent:function(e){return M.content(a(e,H))}}),r.ui.plugin(z)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.responsivepanel",["kendo.core"],function(){return function(e,t){var i=e.proxy,n=".kendoResponsivePanel",r="click"+n+" touchstart"+n,s=kendo.ui.Widget,o=s.extend({init:function(t,o){s.fn.init.call(this,t,o),this._guid="_"+kendo.guid(),this._toggleHandler=i(this._toggleButtonClick,this),this._closeHandler=i(this._close,this),e(document.documentElement).on(r,this.options.toggleButton,this._toggleHandler),this._registerBreakpoint(),this.element.addClass("k-rpanel k-rpanel-"+this.options.orientation+" "+this._guid),this._resizeHandler=i(this.resize,this,!0),e(window).on("resize"+n,this._resizeHandler)},_mediaQuery:"@media (max-width: #= breakpoint-1 #px) {.#= guid #.k-rpanel-animate.k-rpanel-left,.#= guid #.k-rpanel-animate.k-rpanel-right {-webkit-transition: -webkit-transform .2s ease-out;-ms-transition: -ms-transform .2s ease-out;transition: transform .2s ease-out;} .#= guid #.k-rpanel-top {overflow: hidden;}.#= guid #.k-rpanel-animate.k-rpanel-top {-webkit-transition: max-height .2s linear;-ms-transition: max-height .2s linear;transition: max-height .2s linear;}} @media (min-width: #= breakpoint #px) {#= toggleButton # { display: none; } .#= guid #.k-rpanel-left { float: left; } .#= guid #.k-rpanel-right { float: right; } .#= guid #.k-rpanel-left, .#= guid #.k-rpanel-right {position: relative;-webkit-transform: translateX(0);-ms-transform: translateX(0);transform: translateX(0);-webkit-transform: translateX(0) translateZ(0);-ms-transform: translateX(0) translateZ(0);transform: translateX(0) translateZ(0);} .#= guid #.k-rpanel-top { max-height: none; }}",_registerBreakpoint:function(){var e=this.options;this._registerStyle(kendo.template(this._mediaQuery)({breakpoint:e.breakpoint,toggleButton:e.toggleButton,guid:this._guid}))},_registerStyle:function(t){var i=e("head,body")[0],n=document.createElement("style");i.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))},options:{name:"ResponsivePanel",orientation:"left",toggleButton:".k-rpanel-toggle",breakpoint:640,autoClose:!0},events:["open","close"],_resize:function(){this.element.removeClass("k-rpanel-animate k-rpanel-expanded"),e(document.documentElement).off(r,this._closeHandler)},_toggleButtonClick:function(e){e.preventDefault(),this.element.hasClass("k-rpanel-expanded")?this.close():this.open()},open:function(){this.trigger("open")||(this.element.addClass("k-rpanel-animate k-rpanel-expanded"),this.options.autoClose&&e(document.documentElement).on(r,this._closeHandler))},close:function(){this.trigger("close")||(this.element.addClass("k-rpanel-animate").removeClass("k-rpanel-expanded"),e(document.documentElement).off(r,this._closeHandler))},_close:function(t){var i=t.isDefaultPrevented();e(t.target).closest(this.options.toggleButton+",.k-rpanel").length||i||this.close()},destroy:function(){s.fn.destroy.call(this),e(window).off("resize"+n,this._resizeHandler),e(document.documentElement).off(r,this._closeHandler)}});kendo.ui.plugin(o)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.tabstrip",["kendo.data"],function(){return function(e,t){function i(t){t.children(g).addClass(b),t.children("a").addClass(v).children(g).addClass(b),t.filter(":not([disabled]):not([class*=k-state-disabled])").addClass(x),t.filter("li[disabled]").addClass(y).removeAttr("disabled"),t.filter(":not([class*=k-state])").children("a").filter(":focus").parent().addClass(C+" "+T),t.attr("role","tab"),t.filter("."+C).attr("aria-selected",!0),t.each(function(){var t=e(this);t.children("."+v).length||t.contents().filter(function(){return!(this.nodeName.match(p)||3==this.nodeType&&!c(this.nodeValue))}).wrapAll("<span class='"+v+"'/>")})}function n(e){var t=e.children(".k-item");t.filter(".k-first:not(:first-child)").removeClass(k),t.filter(".k-last:not(:last-child)").removeClass(_),t.filter(":first-child").addClass(k),t.filter(":last-child").addClass(_)}function r(e,t){return"<span class='k-button k-button-icon k-button-bare k-tabstrip-"+e+"' unselectable='on'><span class='k-icon "+t+"'></span></span>"}var s=window.kendo,o=s.ui,a=s.keys,l=e.map,d=e.each,c=e.trim,u=e.extend,h=s.template,f=o.Widget,p=/^(a|div)$/i,m=".kendoTabStrip",g="img",v="k-link",_="k-last",b="k-image",k="k-first",w="contentUrl",y="k-state-disabled",x="k-state-default",C="k-state-active",S="k-state-hover",T="k-tab-on-top",D=".k-item:not(."+y+")",F=".k-tabstrip-items > "+D+":not(."+C+")",E={content:h("<div class='k-content'#= contentAttributes(data) # role='tabpanel'>#= content(item) #</div>"),itemWrapper:h("<#= tag(item) # class='k-link'#= contentUrl(item) ##= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) #</#= tag(item) #>"),item:h("<li class='#= wrapperCssClass(group, item) #' role='tab' #=item.active ? \"aria-selected='true'\" : ''#>#= itemWrapper(data) #</li>"),image:h("<img class='k-image' alt='' src='#= imageUrl #' />"),sprite:h("<span class='k-sprite #= spriteCssClass #'></span>"),empty:h("")},R={wrapperCssClass:function(e,t){var i="k-item",n=t.index;return!1===t.enabled?i+=" k-state-disabled":i+=" k-state-default",0===n&&(i+=" k-first"),n==e.length-1&&(i+=" k-last"),i},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},text:function(e){return!1===e.encoded?e.text:s.htmlEncode(e.text)},tag:function(e){return e.url?"a":"span"},contentAttributes:function(e){return!0!==e.active?" style='display:none' aria-hidden='true' aria-expanded='false'":""},content:function(e){return e.content?e.content:e.contentUrl?"":"&nbsp;"},contentUrl:function(e){return e.contentUrl?s.attr("content-url")+'="'+e.contentUrl+'"':""}},A=f.extend({init:function(t,i){var n,r=this;f.fn.init.call(r,t,i),r._animations(r.options),i=r.options,r._wrapper(),r._isRtl=s.support.isRtl(r.wrapper),r._tabindex(),r._updateClasses(),r._dataSource(),i.dataSource&&r.dataSource.fetch(),r._tabPosition(),r._scrollable(),r.options.contentUrls&&r.wrapper.find(".k-tabstrip-items > .k-item").each(function(t,i){e(i).find(">."+v).data(w,r.options.contentUrls[t])}),r.wrapper.on("mouseenter"+m+" mouseleave"+m,F,r._toggleHover).on("focus"+m,e.proxy(r._active,r)).on("blur"+m,function(){r._current(null)}),r._keyDownProxy=e.proxy(r._keydown,r),i.navigatable&&r.wrapper.on("keydown"+m,r._keyDownProxy),r.options.value&&(n=r.options.value),r.wrapper.children(".k-tabstrip-items").on("click"+m,".k-state-disabled .k-link",!1).on("click"+m," > "+D,function(t){var i=r.wrapper[0];if(i!==document.activeElement)if(s.support.browser.msie)try{i.setActive()}catch(e){i.focus()}else i.focus();r._click(e(t.currentTarget))&&t.preventDefault()});var o=r.tabGroup.children("li."+C),a=r.contentHolder(o.index());o[0]&&a.length>0&&0===a[0].childNodes.length&&r.activateTab(o.eq(0)),r.element.attr("role","tablist"),r.element[0].id&&(r._ariaId=r.element[0].id+"_ts_active"),r.value(n),s.notify(r)},_active:function(){var e=this.tabGroup.children().filter("."+C);(e=e[0]?e:this._endItem("first"))[0]&&this._current(e)},_endItem:function(e){return this.tabGroup.children(D)[e]()},_item:function(e,t){var i;return i="prev"===t?"last":"first",e?((e=e[t]())[0]||(e=this._endItem(i)),e.hasClass(y)&&(e=this._item(e,t)),e):this._endItem(i)},_current:function(e){var t=this._focused,i=this._ariaId;if(void 0===e)return t;t&&(t[0].id===i&&t.removeAttr("id"),t.removeClass("k-state-focused")),e&&(e.hasClass(C)||e.addClass("k-state-focused"),this.element.removeAttr("aria-activedescendant"),(i=e[0].id||i)&&(e.attr("id",i),this.element.attr("aria-activedescendant",i))),this._focused=e},_keydown:function(e){var t,i=e.keyCode,n=this._current(),r=this._isRtl;if(e.target==e.currentTarget){if(i==a.DOWN||i==a.RIGHT)t=r?"prev":"next";else if(i==a.UP||i==a.LEFT)t=r?"next":"prev";else if(i==a.ENTER||i==a.SPACEBAR)this._click(n),e.preventDefault();else{if(i==a.HOME)return this._click(this._endItem("first")),void e.preventDefault();if(i==a.END)return this._click(this._endItem("last")),void e.preventDefault()}t&&(this._click(this._item(n,t)),e.preventDefault())}},_dataSource:function(){this.dataSource&&this._refreshHandler?this.dataSource.unbind("change",this._refreshHandler):this._refreshHandler=e.proxy(this.refresh,this),this.dataSource=s.data.DataSource.create(this.options.dataSource).bind("change",this._refreshHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.dataSource.fetch()},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={open:{effects:{}},close:{effects:{}}})},refresh:function(e){var t,i,n,r=this.options,o=s.getter(r.dataTextField),a=s.getter(r.dataContentField),l=s.getter(r.dataContentUrlField),d=s.getter(r.dataImageUrlField),c=s.getter(r.dataUrlField),u=s.getter(r.dataSpriteCssClass),h=[],f=this.dataSource.view();for((e=e||{}).action&&(f=e.items),t=0,n=f.length;t<n;t++)i={text:o(f[t])},r.dataContentField&&(i.content=a(f[t])),r.dataContentUrlField&&(i.contentUrl=l(f[t])),r.dataUrlField&&(i.url=c(f[t])),r.dataImageUrlField&&(i.imageUrl=d(f[t])),r.dataSpriteCssClass&&(i.spriteCssClass=u(f[t])),h[t]=i;if("add"==e.action)e.index<this.tabGroup.children().length?this.insertBefore(h,this.tabGroup.children().eq(e.index)):this.append(h);else if("remove"==e.action)for(t=0;t<f.length;t++)this.remove(e.index);else"itemchange"==e.action?(t=this.dataSource.view().indexOf(f[0]),e.field===r.dataTextField&&this.tabGroup.children().eq(t).find(".k-link").text(f[0].get(e.field))):(this.trigger("dataBinding"),this.remove("li"),this.append(h),this.trigger("dataBound"))},value:function(t){var i=this;if(void 0===t)return i.select().text();t!=i.value()&&i.tabGroup.children().each(function(){e.trim(e(this).text())==t&&i.select(this)})},items:function(){return this.tabGroup[0].children},setOptions:function(e){var t=this.options.animation;this._animations(e),e.animation=u(!0,t,e.animation),e.navigatable?this.wrapper.on("keydown"+m,this._keyDownProxy):this.wrapper.off("keydown"+m,this._keyDownProxy),f.fn.setOptions.call(this,e)},events:["select","activate","show","error","contentLoad","change","dataBinding","dataBound"],options:{name:"TabStrip",dataTextField:"",dataContentField:"",dataImageUrlField:"",dataUrlField:"",dataSpriteCssClass:"",dataContentUrlField:"",tabPosition:"top",animation:{open:{effects:"expand:vertical fadeIn",duration:200},close:{duration:200}},collapsible:!1,navigatable:!0,contentUrls:!1,scrollable:{distance:200}},destroy:function(){var e=this.scrollWrap;f.fn.destroy.call(this),this._refreshHandler&&this.dataSource.unbind("change",this._refreshHandler),this.wrapper.off(m),this.wrapper.children(".k-tabstrip-items").off(m),this._scrollableModeActive&&(this._scrollPrevButton.off().remove(),this._scrollNextButton.off().remove()),s.destroy(this.wrapper),e.children(".k-tabstrip").unwrap()},select:function(t){var i=this;return 0===arguments.length?i.tabGroup.children("li."+C):(isNaN(t)||(t=i.tabGroup.children().get(t)),t=i.tabGroup.find(t),e(t).each(function(t,n){(n=e(n)).hasClass(C)||i.trigger("select",{item:n[0],contentElement:i.contentHolder(n.index())[0]})||i.activateTab(n)}),i)},enable:function(e,t){return this._toggleDisabled(e,!1!==t),this},disable:function(e){return this._toggleDisabled(e,!1),this},reload:function(t){var i=this;return(t=this.tabGroup.find(t)).each(function(){var t=e(this),n=t.find("."+v).data(w),r=i.contentHolder(t.index());n&&i.ajaxRequest(t,r,null,n)}),i},append:function(e){var t=this,i=t._create(e);return d(i.tabs,function(e){var n=i.contents[e];t.tabGroup.append(this),"bottom"==t.options.tabPosition?t.tabGroup.before(n):t._scrollableModeActive?t._scrollPrevButton.before(n):t.wrapper.append(n),t.angular("compile",function(){return{elements:[n]}})}),n(t.tabGroup),t._updateContentElements(),t.resize(!0),t},insertBefore:function(t,i){i=this.tabGroup.find(i);var r=this,s=r._create(t),o=e(r.contentElement(i.index()));return d(s.tabs,function(e){var t=s.contents[e];i.before(this),o.before(t),r.angular("compile",function(){return{elements:[t]}})}),n(r.tabGroup),r._updateContentElements(),r.resize(!0),r},insertAfter:function(t,i){i=this.tabGroup.find(i);var r=this,s=r._create(t),o=e(r.contentElement(i.index()));return d(s.tabs,function(e){var t=s.contents[e];i.after(this),o.after(t),r.angular("compile",function(){return{elements:[t]}})}),n(r.tabGroup),r._updateContentElements(),r.resize(!0),r},remove:function(t){var i,n=this,r=typeof t;return"string"===r?t=n.tabGroup.find(t):"number"===r&&(t=n.tabGroup.children().eq(t)),i=t.map(function(){var t=n.contentElement(e(this).index());return s.destroy(t),t}),t.remove(),i.remove(),n._updateContentElements(),n.resize(!0),n},_create:function(t){var n,r,s,o=this;return e.isPlainObject(t)||e.isArray(t)?(t=e.isArray(t)?t:[t],n=l(t,function(t,i){return e(A.renderItem({group:o.tabGroup,item:u(t,{index:i})}))}),r=l(t,function(t,i){if("string"==typeof t.content||t.contentUrl)return e(A.renderContent({item:u(t,{index:i})}))})):(n="string"==typeof t&&"<"!=t[0]?o.element.find(t):e(t),r=e(),n.each(function(){if(s=e("<div class='k-content'/>"),/k-tabstrip-items/.test(this.parentNode.className)){var t=parseInt(this.getAttribute("aria-controls").replace(/^.*-/,""),10)-1;s=e(o.contentElement(t))}r=r.add(s)}),i(n)),{tabs:n,contents:r}},_toggleDisabled:function(t,i){(t=this.tabGroup.find(t)).each(function(){e(this).toggleClass(x,i).toggleClass(y,!i)})},_updateClasses:function(){var t,r,s;this.wrapper.addClass("k-widget k-header k-tabstrip"),this.tabGroup=this.wrapper.children("ul").addClass("k-tabstrip-items k-reset"),this.tabGroup[0]||(this.tabGroup=e("<ul class='k-tabstrip-items k-reset'/>").appendTo(this.wrapper)),(t=this.tabGroup.find("li").addClass("k-item")).length&&(s=(r=t.filter("."+C).index())>=0?r:void 0,this.tabGroup.contents().filter(function(){return 3==this.nodeType&&!c(this.nodeValue)}).remove()),r>=0&&t.eq(r).addClass(T),this.contentElements=this.wrapper.children("div"),this.contentElements.addClass("k-content").eq(s).addClass(C).css({display:"block"}),t.length&&(i(t),n(this.tabGroup),this._updateContentElements())},_updateContentElements:function(){var t=this,i=t.options.contentUrls||[],n=t.tabGroup.find(".k-item"),r=(t.element.attr("id")||s.guid())+"-",o=t.wrapper.children("div");o.length&&n.length>o.length?(o.each(function(e){var t=parseInt(this.id.replace(r,""),10),i=n.filter("[aria-controls="+r+t+"]"),s=r+(e+1);i.data("aria",s),this.setAttribute("id",s)}),n.each(function(){var t=e(this);this.setAttribute("aria-controls",t.data("aria")),t.removeData("aria")})):n.each(function(n){var s=o.eq(n),a=r+(n+1);this.setAttribute("aria-controls",a),!s.length&&i[n]?e("<div class='k-content'/>").appendTo(t.wrapper).attr("id",a):(s.attr("id",a),e(this).children(".k-loading")[0]||i[n]||e("<span class='k-loading k-complete'/>").prependTo(this)),s.attr("role","tabpanel"),s.filter(":not(."+C+")").attr("aria-hidden",!0).attr("aria-expanded",!1),s.filter("."+C).attr("aria-expanded",!0)}),t.contentElements=t.contentAnimators=t.wrapper.children("div"),t.tabsHeight=t.tabGroup.outerHeight()+parseInt(t.wrapper.css("border-top-width"),10)+parseInt(t.wrapper.css("border-bottom-width"),10),s.kineticScrollNeeded&&s.mobile.ui.Scroller&&(s.touchScroller(t.contentElements),t.contentElements=t.contentElements.children(".km-scroll-container"))},_wrapper:function(){this.element.is("ul")?this.wrapper=this.element.wrapAll("<div />").parent():this.wrapper=this.element,this.scrollWrap=this.wrapper.parent(".k-tabstrip-wrapper"),this.scrollWrap[0]||(this.scrollWrap=this.wrapper.wrapAll("<div class='k-tabstrip-wrapper' />").parent())},_tabPosition:function(){var e=this.options.tabPosition;this.wrapper.addClass("k-floatwrap k-tabstrip-"+e),"bottom"==e&&this.tabGroup.appendTo(this.wrapper),this.resize(!0)},_setContentElementsDimensions:function(){var e=this.options.tabPosition;if("left"==e||"right"==e){var t=this.wrapper.children(".k-content"),i=t.filter(":visible"),n="margin-"+e,r=this.tabGroup,s=r.outerWidth(),o=Math.ceil(r.height())-parseInt(i.css("padding-top"),10)-parseInt(i.css("padding-bottom"),10)-parseInt(i.css("border-top-width"),10)-parseInt(i.css("border-bottom-width"),10);setTimeout(function(){t.css(n,s).css("min-height",o)})}},_resize:function(){this._setContentElementsDimensions(),this._scrollable()},_sizeScrollWrap:function(e){if(e.is(":visible")){var t=this.options.tabPosition,i=Math.floor(e.outerHeight(!0))+("left"===t||"right"===t?2:this.tabsHeight);this.scrollWrap.css("height",i).css("height")}},_toggleHover:function(t){e(t.currentTarget).toggleClass(S,"mouseenter"==t.type)},_click:function(e){var t,i,n=e.find("."+v),r=n.attr("href"),s=this.options.collapsible,o=this.contentHolder(e.index());if(e.closest(".k-widget")[0]==this.wrapper[0]){if(e.is("."+y+(s?"":",."+C)))return!0;if(i=n.data(w)||r&&("#"==r.charAt(r.length-1)||-1!=r.indexOf("#"+this.element[0].id+"-")),t=!r||i,this.tabGroup.children("[data-animating]").length)return t;if(this.trigger("select",{item:e[0],contentElement:o[0]}))return!0;if(!1!==t)return s&&e.is("."+C)?(this.deactivateTab(e),!0):(this.activateTab(e)&&(t=!0),t)}},_scrollable:function(){var e,t,i,n,o=this,a=o.options;o._scrollableAllowed()&&(o.wrapper.addClass("k-tabstrip-scrollable"),e=o.wrapper[0].offsetWidth,(t=o.tabGroup[0].scrollWidth)>e&&!o._scrollableModeActive?(o._nowScrollingTabs=!1,o._isRtl=s.support.isRtl(o.element),o.wrapper.append(r("prev","k-i-arrow-w")+r("next","k-i-arrow-e")),i=o._scrollPrevButton=o.wrapper.children(".k-tabstrip-prev"),n=o._scrollNextButton=o.wrapper.children(".k-tabstrip-next"),o.tabGroup.css({marginLeft:i.outerWidth()+9,marginRight:n.outerWidth()+12}),i.on("mousedown"+m,function(){o._nowScrollingTabs=!0,o._scrollTabsByDelta(a.scrollable.distance*(o._isRtl?1:-1))}),n.on("mousedown"+m,function(){o._nowScrollingTabs=!0,o._scrollTabsByDelta(a.scrollable.distance*(o._isRtl?-1:1))}),i.add(n).on("mouseup"+m,function(){o._nowScrollingTabs=!1}),o._scrollableModeActive=!0,o._toggleScrollButtons()):o._scrollableModeActive&&t<=e?(o._scrollableModeActive=!1,o.wrapper.removeClass("k-tabstrip-scrollable"),o._scrollPrevButton.off().remove(),o._scrollNextButton.off().remove(),o.tabGroup.css({marginLeft:"",marginRight:""})):o._scrollableModeActive?o._toggleScrollButtons():o.wrapper.removeClass("k-tabstrip-scrollable"))},_scrollableAllowed:function(){var e=this.options;return e.scrollable&&!isNaN(e.scrollable.distance)&&("top"==e.tabPosition||"bottom"==e.tabPosition)},_scrollTabsToItem:function(e){var t,i=this,n=i.tabGroup,r=n.scrollLeft(),s=e.outerWidth(),o=i._isRtl?e.position().left:e.position().left-n.children().first().position().left,a=n[0].offsetWidth,l=Math.ceil(parseFloat(n.css("padding-left")));i._isRtl?o<0?t=r+o-(a-r)-l:o+s>a&&(t=r+o-s+2*l):r+a<o+s?t=o+s-a+2*l:r>o&&(t=o-l),n.finish().animate({scrollLeft:t},"fast","linear",function(){i._toggleScrollButtons()})},_scrollTabsByDelta:function(e){var t=this,i=t.tabGroup,n=i.scrollLeft();i.finish().animate({scrollLeft:n+e},"fast","linear",function(){t._nowScrollingTabs?t._scrollTabsByDelta(e):t._toggleScrollButtons()})},_toggleScrollButtons:function(){var e=this.tabGroup,t=e.scrollLeft();this._scrollPrevButton.toggle(this._isRtl?t<e[0].scrollWidth-e[0].offsetWidth-1:0!==t),this._scrollNextButton.toggle(this._isRtl?0!==t:t<e[0].scrollWidth-e[0].offsetWidth-1)},deactivateTab:function(e){var t=this.options.animation,i=t.open,n=u({},t.close),r=n&&"effects"in n;e=this.tabGroup.find(e),n=u(r?n:u({reverse:!0},i),{hide:!0}),s.size(i.effects)?(e.kendoAddClass(x,{duration:i.duration}),e.kendoRemoveClass(C,{duration:i.duration})):(e.addClass(x),e.removeClass(C)),e.removeAttr("aria-selected"),this.contentAnimators.filter("."+C).kendoStop(!0,!0).kendoAnimate(n).removeClass(C).attr("aria-hidden",!0)},activateTab:function(e){if(!this.tabGroup.children("[data-animating]").length){e=this.tabGroup.find(e);var t=this,i=t.options.animation,n=i.open,r=u({},i.close),o=r&&"effects"in r,a=e.parent().children(),l=a.filter("."+C),d=a.index(e);r=u(o?r:u({reverse:!0},n),{hide:!0}),s.size(n.effects)?(l.kendoRemoveClass(C,{duration:r.duration}),e.kendoRemoveClass(S,{duration:r.duration})):(l.removeClass(C),e.removeClass(S));var c=t.contentAnimators;if(t.inRequest&&(t.xhr.abort(),t.inRequest=!1),0===c.length)return t.tabGroup.find("."+T).removeClass(T),e.addClass(T).css("z-index"),e.addClass(C),t._current(e),t.trigger("change"),t._scrollableModeActive&&t._scrollTabsToItem(e),!1;var h=c.filter("."+C),f=t.contentHolder(d),p=f.closest(".k-content");if(t.tabsHeight=t.tabGroup.outerHeight()+parseInt(t.wrapper.css("border-top-width"),10)+parseInt(t.wrapper.css("border-bottom-width"),10),t._sizeScrollWrap(h),0===f.length)return h.removeClass(C).attr("aria-hidden",!0).kendoStop(!0,!0).kendoAnimate(r),!1;e.attr("data-animating",!0);var m=!!e.children("."+v).data(w)&&f.is(":empty"),g=function(){t.tabGroup.find("."+T).removeClass(T),e.addClass(T).css("z-index"),s.size(n.effects)?(l.kendoAddClass(x,{duration:n.duration}),e.kendoAddClass(C,{duration:n.duration})):(l.addClass(x),e.addClass(C)),l.removeAttr("aria-selected"),e.attr("aria-selected",!0),t._current(e),t._sizeScrollWrap(p),p.addClass(C).removeAttr("aria-hidden").kendoStop(!0,!0).attr("aria-expanded",!0).kendoAnimate(u({init:function(){t.trigger("show",{item:e[0],contentElement:f[0]}),s.resize(f)}},n,{complete:function(){e.removeAttr("data-animating"),t.trigger("activate",{item:e[0],contentElement:f[0]}),s.resize(f),t.scrollWrap.css("height","").css("height")}}))},_=function(){m?(e.removeAttr("data-animating"),t.ajaxRequest(e,f,function(){e.attr("data-animating",!0),g(),t.trigger("change")})):(g(),t.trigger("change")),t._scrollableModeActive&&t._scrollTabsToItem(e)};return h.removeClass(C),h.attr("aria-hidden",!0),h.attr("aria-expanded",!1),h.length?h.kendoStop(!0,!0).kendoAnimate(u({complete:_},r)):_(),!0}},contentElement:function(e){if(!isNaN(e-0)){var t=this.contentElements&&this.contentElements[0]&&!s.kineticScrollNeeded?this.contentElements:this.contentAnimators;e=t&&e<0?t.length+e:e;var i=new RegExp("-"+(e+1)+"$");if(t)for(var n=0,r=t.length;n<r;n++)if(i.test(t.eq(n).closest(".k-content")[0].id))return t[n]}},contentHolder:function(t){var i=e(this.contentElement(t)),n=i.children(".km-scroll-container");return s.support.touch&&n[0]?n:i},ajaxRequest:function(t,i,n,r){t=this.tabGroup.find(t);var o=this,a=e.ajaxSettings.xhr,l=t.find("."+v),d=t.width()/2,c=!1,u=t.find(".k-loading").removeClass("k-complete");u[0]||(u=e("<span class='k-loading'/>").prependTo(t));var h=2*d-u.width(),f=function(){u.animate({marginLeft:(parseInt(u.css("marginLeft"),10)||0)<d?h:0},500,f)};s.support.browser.msie&&s.support.browser.version<10&&setTimeout(f,40),r=r||l.data(w)||l.attr("href"),o.inRequest=!0,o.xhr=e.ajax({type:"GET",cache:!1,url:r,dataType:"html",data:{},xhr:function(){var t=this,i=a(),n=t.progressUpload?"progressUpload":!!t.progress&&"progress";return i&&e.each([i,i.upload],function(){this.addEventListener&&this.addEventListener("progress",function(e){n&&t[n](e)},!1)}),t.noProgress=!(window.XMLHttpRequest&&"upload"in new XMLHttpRequest),i},progress:function(e){if(e.lengthComputable){var t=parseInt(e.loaded/e.total*100,10)+"%";u.stop(!0).addClass("k-progress").css({width:t,marginLeft:0})}},error:function(e,t){o.trigger("error",{xhr:e,status:t})&&this.complete()},stopProgress:function(){clearInterval(c),u.stop(!0).addClass("k-progress")[0].style.cssText=""},complete:function(e){o.inRequest=!1,this.noProgress?setTimeout(this.stopProgress,500):this.stopProgress(),"abort"==e.statusText&&u.remove()},success:function(e){u.addClass("k-complete");try{var a=this,l=10;a.noProgress&&(u.width(l+"%"),c=setInterval(function(){a.progress({lengthComputable:!0,loaded:Math.min(l,100),total:100}),l+=10},40)),o.angular("cleanup",function(){return{elements:i.get()}}),s.destroy(i),i.html(e)}catch(e){var d=window.console;d&&d.error&&d.error(e.name+": "+e.message+" in "+r),this.error(this.xhr,"error")}n&&n.call(o,i),o.angular("compile",function(){return{elements:i.get()}}),o.trigger("contentLoad",{item:t[0],contentElement:i[0]})}})}});u(A,{renderItem:function(e){e=u({tabStrip:{},group:{}},e);var t=E.empty,i=e.item;return E.item(u(e,{image:i.imageUrl?E.image:t,sprite:i.spriteCssClass?E.sprite:t,itemWrapper:E.itemWrapper},R))},renderContent:function(e){return E.content(u(e,R))}}),s.ui.plugin(A)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.timepicker",["kendo.popup"],function(){return function(e,t){function i(e){return 60*e.getHours()*k+e.getMinutes()*k+1e3*e.getSeconds()+e.getMilliseconds()}function n(e,t,n){var r,s=i(t),o=i(n);return!e||s==o||(r=i(e),s>r&&(r+=w),o<s&&(o+=w),r>=s&&r<=o)}function r(e){var t=e.parseFormats;e.format=c(e.format||o.getCulture(e.culture).calendars.standard.patterns.t),(t=C(t)?t:[t]).splice(0,0,e.format),e.parseFormats=t}function s(e){e.preventDefault()}var o=window.kendo,a=o.keys,l=o.parseDate,d=o._activeElement,c=o._extractFormat,u=o.support,h=u.browser,f=o.ui,p=f.Widget,m=".kendoTimePicker",g="click"+m,v="k-state-default",_="k-state-hover",b="mousedown"+m,k=6e4,w=864e5,y="k-state-disabled",x="aria-activedescendant",C=e.isArray,S=e.extend,T=e.proxy,D=Date,F=new D;F=new D(F.getFullYear(),F.getMonth(),F.getDate(),0,0,0);var E=function(t){var i=t.id;this.options=t,this._dates=[],this.ul=e('<ul tabindex="-1" role="listbox" aria-hidden="true" unselectable="on" class="k-list k-reset"/>').css({overflow:u.kineticScrollNeeded?"":"auto"}).on(g,"li",T(this._click,this)).on("mouseenter"+m,"li",function(){e(this).addClass(_)}).on("mouseleave"+m,"li",function(){e(this).removeClass(_)}),this.list=e("<div class='k-list-container k-list-scroller' unselectable='on'/>").append(this.ul).on(b,s),i&&(this._timeViewID=i+"_timeview",this._optionID=i+"_option_selected",this.ul.attr("id",this._timeViewID)),this._popup(),this._heightHandler=T(this._height,this),this.template=o.template('<li tabindex="-1" role="option" class="k-item" unselectable="on">#=data#</li>',{useWithBlock:!1})};E.prototype={current:function(t){var i=this.options.active;if(void 0===t)return this._current;this._current&&this._current.removeClass("k-state-selected").removeAttr("aria-selected").removeAttr("id"),t&&(t=e(t).addClass("k-state-selected").attr("id",this._optionID).attr("aria-selected",!0),this.scroll(t[0])),this._current=t,i&&i(t)},close:function(){this.popup.close()},destroy:function(){this.ul.off(m),this.list.off(m),this.popup.destroy()},open:function(){this.ul[0].firstChild||this.bind(),this.popup.open(),this._current&&this.scroll(this._current[0])},dataBind:function(e){for(var t,i=this.options,r=i.format,s=o.toString,a=this.template,l=e.length,d=0,c="";d<l;d++)n(t=e[d],i.min,i.max)&&(c+=a(s(t,r,i.culture)));this._html(c)},refresh:function(){var e,t,n,r=this.options,s=r.format,a=function(){var e=new D,t=new D(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),i=new D(e.getFullYear(),e.getMonth(),e.getDate(),12,0,0);return-1*(t.getTimezoneOffset()-i.getTimezoneOffset())}(),l=a<0,d=r.min,c=r.max,u=i(d),h=i(c),f=r.interval*k,p=o.toString,m=this.template,g=new D(+d),v=g.getDate(),_=0,b="";for(n=l?(w+a*k)/f:w/f,u!=h&&(u>h&&(h+=w),n=(h-u)/f+1),t=parseInt(n,10);_<n;_++)_&&function(e,t,i){var n,r=e.getTimezoneOffset();e.setTime(e.getTime()+t),i||(n=e.getTimezoneOffset()-r,e.setTime(e.getTime()+n*k))}(g,f,l),h&&t==_&&(e=i(g),v<g.getDate()&&(e+=w),e>h&&(g=new D(+c))),this._dates.push(i(g)),b+=m(p(g,s,r.culture));this._html(b)},bind:function(){var e=this.options.dates;e&&e[0]?this.dataBind(e):this.refresh()},_html:function(e){this.ul[0].innerHTML=e,this.popup.unbind("open",this._heightHandler),this.popup.one("open",this._heightHandler),this.current(null),this.select(this._value)},scroll:function(e){if(e){var t=this.list[0],i=e.offsetTop,n=e.offsetHeight,r=t.scrollTop,s=t.clientHeight,o=i+n;r>i?r=i:o>r+s&&(r=o-s),t.scrollTop=r}},select:function(t){var i,n=this.options,r=this._current;t instanceof Date&&(t=o.toString(t,n.format,n.culture)),"string"==typeof t&&(t=r&&r.text()===t?r:(t=e.grep(this.ul[0].childNodes,function(e){return(e.textContent||e.innerText)==t}))[0]?t:null),i=this._distinctSelection(t),this.current(i)},_distinctSelection:function(t){var n,r;return t&&t.length>1&&(n=i(this._value),r=e.inArray(n,this._dates),t=this.ul.children()[r]),t},setOptions:function(e){var t=this.options;e.min=l(e.min),e.max=l(e.max),this.options=S(t,e,{active:t.active,change:t.change,close:t.close,open:t.open}),this.bind()},toggle:function(){this.popup.visible()?this.close():this.open()},value:function(e){this._value=e,this.ul[0].firstChild&&this.select(e)},_click:function(t){var i=e(t.currentTarget),n=i.text(),r=this.options.dates;r&&r.length>0&&(n=r[i.index()]),t.isDefaultPrevented()||(this.select(i),this.options.change(n,!0),this.close())},_height:function(){var e=this.list,t=e.parent(".k-animation-container"),i=this.options.height;this.ul[0].children.length&&e.add(t).show().height(this.ul[0].scrollHeight>i?i:"auto").hide()},_parse:function(e){var t=this.options,i=this._value||F;return e instanceof D?e:((e=l(e,t.parseFormats,t.culture))&&(e=new D(i.getFullYear(),i.getMonth(),i.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())),e)},_adjustListWidth:function(){var e,t,i=this.list,n=i[0].style.width,r=this.options.anchor;!i.data("width")&&n||(t=(e=window.getComputedStyle?window.getComputedStyle(r[0],null):0)?parseFloat(e.width):r.outerWidth(),e&&(h.mozilla||h.msie)&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),n=t-(i.outerWidth()-i.width()),i.css({fontFamily:r.css("font-family"),width:n}).data("width",n))},_popup:function(){var e=this.list,t=this.options,i=t.anchor;this.popup=new f.Popup(e,S(t.popup,{anchor:i,open:t.open,close:t.close,animation:t.animation,isRtl:u.isRtl(t.anchor)}))},move:function(e){var t=e.keyCode,i=this.ul[0],n=this._current,r=t===a.DOWN;if(t===a.UP||r){if(e.altKey)return void this.toggle(r);(n=r?n?n[0].nextSibling:i.firstChild:n?n[0].previousSibling:i.lastChild)&&this.select(n),this.options.change(this._current.text()),e.preventDefault()}else t!==a.ENTER&&t!==a.TAB&&t!==a.ESC||(e.preventDefault(),n&&this.options.change(n.text(),!0),this.close())}},E.getMilliseconds=i,o.TimeView=E;var R=p.extend({init:function(t,i){var n,s,a=this;p.fn.init.call(a,t,i),t=a.element,(i=a.options).min=l(t.attr("min"))||l(i.min),i.max=l(t.attr("max"))||l(i.max),r(i),a._initialOptions=S({},i),a._wrapper(),a.timeView=s=new E(S({},i,{id:t.attr("id"),anchor:a.wrapper,format:i.format,change:function(e,i){i?a._change(e):t.val(e)},open:function(e){a.timeView._adjustListWidth(),a.trigger("open")?e.preventDefault():(t.attr("aria-expanded",!0),n.attr("aria-hidden",!1))},close:function(e){a.trigger("close")?e.preventDefault():(t.attr("aria-expanded",!1),n.attr("aria-hidden",!0))},active:function(e){t.removeAttr(x),e&&t.attr(x,s._optionID)}})),n=s.ul,a._icon(),a._reset();try{t[0].setAttribute("type","text")}catch(e){t[0].type="text"}t.addClass("k-input").attr({role:"combobox","aria-expanded":!1,"aria-owns":s._timeViewID}),t.is("[disabled]")||e(a.element).parents("fieldset").is(":disabled")?a.enable(!1):a.readonly(t.is("[readonly]")),a._old=a._update(i.value||a.element.val()),a._oldText=t.val(),o.notify(a)},options:{name:"TimePicker",min:F,max:F,format:"",dates:[],parseFormats:[],value:null,interval:30,height:200,animation:{}},events:["open","close","change"],setOptions:function(e){var t=this._value;p.fn.setOptions.call(this,e),r(e=this.options),this.timeView.setOptions(e),t&&this.element.val(o.toString(t,e.format,e.culture))},dataBind:function(e){C(e)&&this.timeView.dataBind(e)},_editable:function(e){var t=this,i=e.disable,n=e.readonly,r=t._arrow.off(m),o=t.element.off(m),a=t._inputWrapper.off(m);n||i?(a.addClass(i?y:v).removeClass(i?v:y),o.attr("disabled",i).attr("readonly",n).attr("aria-disabled",i).attr("aria-readonly",n)):(a.addClass(v).removeClass(y).on("mouseenter.kendoTimePicker mouseleave.kendoTimePicker",t._toggleHover),o.removeAttr("disabled").removeAttr("readonly").attr("aria-disabled",!1).attr("aria-readonly",!1).on("keydown"+m,T(t._keydown,t)).on("focusout"+m,T(t._blur,t)).on("focus"+m,function(){t._inputWrapper.addClass("k-state-focused")}),r.on(g,T(t._click,t)).on(b,s))},readonly:function(e){this._editable({readonly:void 0===e||e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=void 0===e||e)})},destroy:function(){p.fn.destroy.call(this),this.timeView.destroy(),this.element.off(m),this._arrow.off(m),this._inputWrapper.off(m),this._form&&this._form.off("reset",this._resetHandler)},close:function(){this.timeView.close()},open:function(){this.timeView.open()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},value:function(e){if(void 0===e)return this._value;this._old=this._update(e),null===this._old&&this.element.val(""),this._oldText=this.element.val()},_blur:function(){var e=this.element.val();this.close(),e!==this._oldText&&this._change(e),this._inputWrapper.removeClass("k-state-focused")},_click:function(){var e=this.element;this.timeView.toggle(),u.touch||e[0]===d()||e.focus()},_change:function(e){e=this._update(e),+this._old!=+e&&(this._old=e,this._oldText=this.element.val(),this._typing||this.element.trigger("change"),this.trigger("change")),this._typing=!1},_icon:function(){var t,i=this.element;(t=i.next("span.k-select"))[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-clock">select</span></span>').insertAfter(i)),this._arrow=t.attr({role:"button","aria-controls":this.timeView._timeViewID})},_keydown:function(e){var t=e.keyCode,i=this.timeView,n=this.element.val();i.popup.visible()||e.altKey?i.move(e):t===a.ENTER&&n!==this._oldText?this._change(n):this._typing=!0},_option:function(e,t){var i=this.options;if(void 0===t)return i[e];(t=this.timeView._parse(t))&&(t=new D(+t),i[e]=t,this.timeView.options[e]=t,this.timeView.bind())},_toggleHover:function(t){e(t.currentTarget).toggleClass(_,"mouseenter"===t.type)},_update:function(e){var t=this.options,i=this.timeView,r=i._parse(e);return n(r,t.min,t.max)||(r=null),this._value=r,this.element.val(r?o.toString(r,t.format,t.culture):e),i.value(r),r},_wrapper:function(){var t,i=this.element;(t=i.parents(".k-timepicker"))[0]||(t=(t=i.wrap("<span/>").parent().addClass("k-picker-wrap k-state-default")).wrap("<span/>").parent()),t[0].style.cssText=i[0].style.cssText,this.wrapper=t.addClass("k-widget k-timepicker k-header").addClass(i[0].className),i.css({width:"100%",height:i[0].style.height}),this._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,i=t.element,n=i.attr("form"),r=n?e("#"+n):i.closest("form");r[0]&&(t._resetHandler=function(){t.value(i[0].defaultValue),t.max(t._initialOptions.max),t.min(t._initialOptions.min)},t._form=r.on("reset",t._resetHandler))}});f.plugin(R)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.toolbar",["kendo.core","kendo.userevents","kendo.popup"],function(){return function(e,t){function i(){var e,t=this.options.anchor,i=t.outerWidth();a.wrap(this.element).addClass("k-split-wrapper"),e="border-box"!==this.element.css("box-sizing")?i-(this.element.outerWidth()-this.element.width()):i,this.element.css({fontFamily:t.css("font-family"),"min-width":e})}function n(e){e.target.is(".k-toggle-button")||e.target.toggleClass(v,"press"==e.type)}function r(t){return(t=e(t)).hasClass("km-actionsheet")?t.closest(".km-popup-wrapper"):t.addClass("km-widget km-actionsheet").wrap('<div class="km-actionsheet-wrapper km-actionsheet-tablet km-widget km-popup"></div>').parent().wrap('<div class="km-popup-wrapper k-popup"></div>').parent()}function s(e){e.preventDefault()}function o(t,i){var n="next"===i?e.fn.next:e.fn.prev,r="next"===i?e.fn.first:e.fn.last,s=n.call(t);return s.is(":kendoFocusable")||!s.length?s:s.find(":kendoFocusable").length?r.call(s.find(":kendoFocusable")):o(s,i)}var a=window.kendo,l=a.Class,d=a.ui.Widget,c=e.proxy,u=a.isFunction,h=a.keys,f="k-button",p="k-overflow-button",m="k-button-group",g="k-split-button",v="k-state-active",_="k-state-disabled",b="k-state-hidden",k="k-icon",w="k-i-",y="k-split-button-arrow",x="k-overflow-anchor",C="k-overflow-container",S="k-toolbar-first-visible",T="k-toolbar-last-visible",D="k-overflow-hidden",F=a.attr("uid");a.toolbar={};var E={overflowAnchor:'<div tabindex="0" class="k-overflow-anchor"></div>',overflowContainer:'<ul class="k-overflow-container k-list-container"></ul>'};a.toolbar.registerComponent=function(e,t,i){E[e]={toolbar:t,overflow:i}};var R=a.Class.extend({addOverflowAttr:function(){this.element.attr(a.attr("overflow"),this.options.overflow||"auto")},addUidAttr:function(){this.element.attr(F,this.options.uid)},addIdAttr:function(){this.options.id&&this.element.attr("id",this.options.id)},addOverflowIdAttr:function(){this.options.id&&this.element.attr("id",this.options.id+"_overflow")},attributes:function(){this.options.attributes&&this.element.attr(this.options.attributes)},show:function(){this.element.removeClass(b).show(),this.options.hidden=!1},hide:function(){this.element.addClass(b).hide(),this.options.hidden=!0},remove:function(){this.element.remove()},enable:function(e){void 0===e&&(e=!0),this.element.toggleClass(_,!e),this.options.enable=e},twin:function(){var e=this.element.attr(F);return this.overflow?this.toolbar.element.find("["+F+"='"+e+"']").data(this.options.type):this.toolbar.options.resizable?this.toolbar.popup.element.find("["+F+"='"+e+"']").data(this.options.type):void 0}});a.toolbar.Item=R;var A=R.extend({init:function(t,i){var n=t.useButtonTag?e('<button tabindex="0"></button>'):e('<a href tabindex="0"></a>');this.element=n,this.options=t,this.toolbar=i,this.attributes(),t.primary&&n.addClass("k-primary"),t.togglable&&(n.addClass("k-toggle-button"),this.toggle(t.selected)),void 0===t.url||t.useButtonTag||(n.attr("href",t.url),t.mobile&&n.attr(a.attr("role"),"button")),t.group&&(n.attr(a.attr("group"),t.group),this.group=this.toolbar.addToGroup(this,t.group)),!t.togglable&&t.click&&u(t.click)&&(this.clickHandler=t.click),t.togglable&&t.toggle&&u(t.toggle)&&(this.toggleHandler=t.toggle)},toggle:function(e,t){e=!!e,this.group&&e?this.group.select(this):this.group||this.select(e),t&&this.twin()&&this.twin().toggle(e)},getParentGroup:function(){if(this.options.isChild)return this.element.closest("."+m).data("buttonGroup")},_addGraphics:function(){var t,i,n,r=this.element,s=this.options.icon,o=this.options.spriteCssClass,a=this.options.imageUrl;(o||a||s)&&(t=!0,r.contents().not("span.k-sprite,span."+k+",img.k-image").each(function(i,n){(1==n.nodeType||3==n.nodeType&&e.trim(n.nodeValue).length>0)&&(t=!1)}),t?r.addClass("k-button-icon"):r.addClass("k-button-icontext")),s?((i=r.children("span."+k).first())[0]||(i=e('<span class="'+k+'"></span>').prependTo(r)),i.addClass(w+s)):o?((i=r.children("span.k-sprite").first())[0]||(i=e('<span class="k-sprite"></span>').prependTo(r)),i.addClass(o)):a&&((n=r.children("img.k-image").first())[0]||(n=e('<img alt="icon" class="k-image" />').prependTo(r)),n.attr("src",a))}});a.toolbar.Button=A;var I=A.extend({init:function(e,t){A.fn.init.call(this,e,t);var i=this.element;i.addClass(f),this.addIdAttr(),e.align&&i.addClass("k-align-"+e.align),"overflow"!=e.showText&&e.text&&(e.mobile?i.html('<span class="km-text">'+e.text+"</span>"):i.html(e.text)),e.hasIcon="overflow"!=e.showIcon&&(e.icon||e.spriteCssClass||e.imageUrl),e.hasIcon&&this._addGraphics(),this.addUidAttr(),this.addOverflowAttr(),this.enable(e.enable),e.hidden&&this.hide(),this.element.data({type:"button",button:this})},select:function(e){void 0===e&&(e=!1),this.element.toggleClass(v,e),this.options.selected=e}});a.toolbar.ToolBarButton=I;var M=A.extend({init:function(e,t){this.overflow=!0,A.fn.init.call(this,e,t);var i=this.element;"toolbar"!=e.showText&&e.text&&(e.mobile?i.html('<span class="km-text">'+e.text+"</span>"):i.html('<span class="k-text">'+e.text+"</span>")),e.hasIcon="toolbar"!=e.showIcon&&(e.icon||e.spriteCssClass||e.imageUrl),e.hasIcon&&this._addGraphics(),e.isChild||this._wrap(),this.addOverflowIdAttr(),this.attributes(),this.addUidAttr(),this.addOverflowAttr(),this.enable(e.enable),i.addClass(p+" "+f),e.hidden&&this.hide(),this.element.data({type:"button",button:this})},_wrap:function(){this.element=this.element.wrap("<li></li>").parent()},overflowHidden:function(){this.element.addClass(D)},select:function(e){void 0===e&&(e=!1),this.options.isChild?this.element.toggleClass(v,e):this.element.find(".k-button").toggleClass(v,e),this.options.selected=e}});a.toolbar.OverflowButton=M,a.toolbar.registerComponent("button",I,M);var H=R.extend({createButtons:function(t){for(var i=this.options,n=i.buttons||[],r=0;r<n.length;r++)n[r].uid||(n[r].uid=a.guid()),new t(e.extend({mobile:i.mobile,isChild:!0,type:"button"},n[r]),this.toolbar).element.appendTo(this.element)},refresh:function(){this.element.children().filter(":not('."+b+"'):first").addClass("k-group-start"),this.element.children().filter(":not('."+b+"'):last").addClass("k-group-end")}});a.toolbar.ButtonGroup=H;var z=H.extend({init:function(t,i){var n=this.element=e("<div></div>");this.options=t,this.toolbar=i,this.addIdAttr(),t.align&&n.addClass("k-align-"+t.align),this.createButtons(I),this.attributes(),this.addUidAttr(),this.addOverflowAttr(),this.refresh(),n.addClass(m),this.element.data({type:"buttonGroup",buttonGroup:this})}});a.toolbar.ToolBarButtonGroup=z;var N=H.extend({init:function(t,i){var n=this.element=e("<li></li>");this.options=t,this.toolbar=i,this.overflow=!0,this.addOverflowIdAttr(),this.createButtons(M),this.attributes(),this.addUidAttr(),this.addOverflowAttr(),this.refresh(),n.addClass((t.mobile?"":m)+" k-overflow-group"),this.element.data({type:"buttonGroup",buttonGroup:this})},overflowHidden:function(){this.element.addClass(D)}});a.toolbar.OverflowButtonGroup=N,a.toolbar.registerComponent("buttonGroup",z,N);var P=R.extend({init:function(t,i){var n=this.element=e('<div class="'+g+'" tabindex="0"></div>');this.options=t,this.toolbar=i,this.mainButton=new I(e.extend({},t,{hidden:!1}),i),this.arrowButton=e('<a class="'+f+" "+y+'"><span class="'+(t.mobile?"km-icon km-arrowdown":"k-icon k-i-arrow-s")+'"></span></a>'),this.popupElement=e('<ul class="k-list-container k-split-container"></ul>'),this.mainButton.element.removeAttr("href tabindex").appendTo(n),this.arrowButton.appendTo(n),this.popupElement.appendTo(n),t.align&&n.addClass("k-align-"+t.align),t.id||(t.id=t.uid),n.attr("id",t.id+"_wrapper"),this.addOverflowAttr(),this.addUidAttr(),this.createMenuButtons(),this.createPopup(),this._navigatable(),this.mainButton.main=!0,this.enable(t.enable),t.hidden&&this.hide(),n.data({type:"splitButton",splitButton:this,kendoPopup:this.popup})},_navigatable:function(){var t=this;t.popupElement.on("keydown","."+f,function(i){var n=e(i.target).parent();i.preventDefault(),i.keyCode===h.ESC||i.keyCode===h.TAB||i.altKey&&i.keyCode===h.UP?(t.toggle(),t.focus()):i.keyCode===h.DOWN?o(n,"next").focus():i.keyCode===h.UP?o(n,"prev").focus():i.keyCode!==h.SPACEBAR&&i.keyCode!==h.ENTER||t.toolbar.userEvents.trigger("tap",{target:e(i.target)})})},createMenuButtons:function(){for(var t=this.options,i=t.menuButtons,n=0;n<i.length;n++)new I(e.extend({mobile:t.mobile,type:"button",click:t.click},i[n]),this.toolbar).element.wrap("<li></li>").parent().appendTo(this.popupElement)},createPopup:function(){var t=this.options,n=this.element;this.popupElement.attr("id",t.id+"_optionlist").attr(F,t.rootUid),t.mobile&&(this.popupElement=r(this.popupElement)),this.popup=this.popupElement.kendoPopup({appendTo:t.mobile?e(t.mobile).children(".km-pane"):null,anchor:n,isRtl:this.toolbar._isRtl,copyAnchorStyles:!1,animation:t.animation,open:i,activate:function(){this.element.find(":kendoFocusable").first().focus()},close:function(){n.focus()}}).data("kendoPopup"),this.popup.element.on("click","a.k-button",s)},remove:function(){this.popup.element.off("click","a.k-button"),this.popup.destroy(),this.element.remove()},toggle:function(){this.popup.toggle()},enable:function(e){void 0===e&&(e=!0),this.mainButton.enable(e),this.options.enable=e},focus:function(){this.element.focus()},hide:function(){this.popup&&this.popup.close(),this.element.addClass(b).hide(),this.options.hidden=!0},show:function(){this.element.removeClass(b).hide(),this.options.hidden=!1}});a.toolbar.ToolBarSplitButton=P;var L=R.extend({init:function(t,i){var n=this.element=e('<li class="'+g+'"></li>'),r=t.menuButtons;this.options=t,this.toolbar=i,this.overflow=!0,this.mainButton=new M(e.extend({isChild:!0},t)),this.mainButton.element.appendTo(n);for(var s=0;s<r.length;s++)new M(e.extend({mobile:t.mobile,isChild:!0},r[s]),this.toolbar).element.appendTo(n);this.addUidAttr(),this.addOverflowAttr(),this.mainButton.main=!0,n.data({type:"splitButton",splitButton:this})},overflowHidden:function(){this.element.addClass(D)}});a.toolbar.OverflowSplitButton=L,a.toolbar.registerComponent("splitButton",P,L);var B=R.extend({init:function(t,i){var n=this.element=e("<div>&nbsp;</div>");this.element=n,this.options=t,this.toolbar=i,this.attributes(),this.addIdAttr(),this.addUidAttr(),this.addOverflowAttr(),n.addClass("k-separator"),n.data({type:"separator",separator:this})}}),O=R.extend({init:function(t,i){var n=this.element=e("<li>&nbsp;</li>");this.element=n,this.options=t,this.toolbar=i,this.overflow=!0,this.attributes(),this.addUidAttr(),this.addOverflowIdAttr(),n.addClass("k-separator"),n.data({type:"separator",separator:this})},overflowHidden:function(){this.element.addClass(D)}});a.toolbar.registerComponent("separator",B,O);var V=R.extend({init:function(t,i,n){var r=u(t)?t(i):t;r=r instanceof jQuery?r.wrap("<div></div>").parent():e("<div></div>").html(r),this.element=r,this.options=i,this.options.type="template",this.toolbar=n,this.attributes(),this.addUidAttr(),this.addIdAttr(),this.addOverflowAttr(),r.data({type:"template",template:this})}});a.toolbar.TemplateItem=V;var W=R.extend({init:function(t,i,n){var r=u(t)?e(t(i)):e(t);r=r instanceof jQuery?r.wrap("<li></li>").parent():e("<li></li>").html(r),this.element=r,this.options=i,this.options.type="template",this.toolbar=n,this.overflow=!0,this.attributes(),this.addUidAttr(),this.addOverflowIdAttr(),this.addOverflowAttr(),r.data({type:"template",template:this})},overflowHidden:function(){this.element.addClass(D)}});a.toolbar.OverflowTemplateItem=W;var U=l.extend({init:function(e){this.name=e,this.buttons=[]},add:function(e){this.buttons[this.buttons.length]=e},remove:function(t){var i=e.inArray(t,this.buttons);this.buttons.splice(i,1)},select:function(e){for(var t=0;t<this.buttons.length;t++)this.buttons[t].select(!1);e.select(!0),e.twin()&&e.twin().select(!0)}}),q=d.extend({init:function(t,i){var r=this;if(d.fn.init.call(r,t,i),i=r.options,(t=r.wrapper=r.element).addClass("k-toolbar k-widget"),this.uid=a.guid(),this._isRtl=a.support.isRtl(t),this._groups={},t.attr(F,this.uid),r.isMobile="boolean"==typeof i.mobile?i.mobile:r.element.closest(".km-root")[0],r.animation=r.isMobile?{open:{effects:"fade"}}:{},r.isMobile&&(t.addClass("km-widget"),k="km-icon",w="km-",f="km-button",m="km-buttongroup km-widget",v="km-state-active",_="km-state-disabled"),i.resizable?(r._renderOverflow(),t.addClass("k-toolbar-resizable"),r.overflowUserEvents=new a.UserEvents(r.element,{threshold:5,allowSelection:!0,filter:"."+x,tap:c(r._toggleOverflow,r)}),r._resizeHandler=a.onResize(function(){r.resize()})):r.popup={element:e([])},i.items&&i.items.length)for(var o=0;o<i.items.length;o++)r.add(i.items[o]);r.userEvents=new a.UserEvents(document,{threshold:5,allowSelection:!0,filter:"["+F+"="+this.uid+"] a."+f+", ["+F+"="+this.uid+"] ."+p,tap:c(r._buttonClick,r),press:n,release:n}),r.element.on("click","a.k-button",s),r._navigatable(),i.resizable&&r.popup.element.on("click",NaN,s),i.resizable&&this._toggleOverflowAnchor(),a.notify(r)},events:["click","toggle","open","close","overflowOpen","overflowClose"],options:{name:"ToolBar",items:[],resizable:!0,mobile:null},addToGroup:function(e,t){var i;return(i=this._groups[t]?this._groups[t]:this._groups[t]=new U).add(e),i},destroy:function(){this.element.find("."+g).each(function(t,i){e(i).data("kendoPopup").destroy()}),this.element.off("click","a.k-button"),this.userEvents.destroy(),this.options.resizable&&(a.unbindResize(this._resizeHandler),this.overflowUserEvents.destroy(),this.popup.element.off("click","a.k-button"),this.popup.destroy()),d.fn.destroy.call(this)},add:function(t){var i,n,r=E[t.type],s=t.template,o=this.isMobile?"":"k-item k-state-default",l=t.overflowTemplate;if(e.extend(t,{uid:a.guid(),animation:this.animation,mobile:this.isMobile,rootUid:this.uid}),t.menuButtons)for(var d=0;d<t.menuButtons.length;d++)e.extend(t.menuButtons[d],{uid:a.guid()});s&&!l?t.overflow="never":t.overflow||(t.overflow="auto"),"never"!==t.overflow&&this.options.resizable&&(l?n=new W(l,t,this):r&&(n=new r.overflow(t,this)).element.addClass(o),n&&("auto"===t.overflow&&n.overflowHidden(),n.element.appendTo(this.popup.container),this.angular("compile",function(){return{elements:n.element.get()}}))),"always"!==t.overflow&&(s?i=new V(s,t,this):r&&(i=new r.toolbar(t,this)),i&&(this.options.resizable?(i.element.appendTo(this.element).css("visibility","hidden"),this._shrink(this.element.innerWidth()),i.element.css("visibility","visible")):i.element.appendTo(this.element),this.angular("compile",function(){return{elements:i.element.get()}})))},_getItem:function(t){var i,n,r,s,o=this.options.resizable;return(i=this.element.find(t)).length||(i=e(".k-split-container[data-uid="+this.uid+"]").find(t)),s=i.length?i.data("type"):"",(n=i.data(s))?(n.main&&(s="splitButton",n=(i=i.parent("."+g)).data(s)),o&&(r=n.twin())):o&&(s=(i=this.popup.element.find(t)).length?i.data("type"):"",(r=i.data(s))&&r.main&&(s="splitButton",r=(i=i.parent("."+g)).data(s))),{type:s,toolbar:n,overflow:r}},remove:function(e){var t=this._getItem(e);t.toolbar&&t.toolbar.remove(),t.overflow&&t.overflow.remove(),this.resize(!0)},hide:function(e){var t=this._getItem(e);t.toolbar&&("button"===t.toolbar.options.type&&t.toolbar.options.isChild?(t.toolbar.hide(),t.toolbar.getParentGroup().refresh()):t.toolbar.options.hidden||t.toolbar.hide()),t.overflow&&("button"===t.overflow.options.type&&t.overflow.options.isChild?(t.overflow.hide(),t.overflow.getParentGroup().refresh()):t.toolbar.options.hidden||t.overflow.hide()),this.resize(!0)},show:function(e){var t=this._getItem(e);t.toolbar&&("button"===t.toolbar.options.type&&t.toolbar.options.isChild?(t.toolbar.show(),t.toolbar.getParentGroup().refresh()):t.toolbar.options.hidden&&t.toolbar.show()),t.overflow&&("button"===t.overflow.options.type&&t.overflow.options.isChild?(t.toolbar.show(),t.overflow.getParentGroup().refresh()):t.overflow.options.hidden&&t.overflow.show()),this.resize(!0)},enable:function(e,t){var i=this._getItem(e);void 0===t&&(t=!0),i.toolbar&&i.toolbar.enable(t),i.overflow&&i.overflow.enable(t)},getSelectedFromGroup:function(e){return this.element.find(".k-toggle-button[data-group='"+e+"']").filter("."+v)},toggle:function(t,i){var n=e(t).data("button");n.options.togglable&&(void 0===i&&(i=!0),n.toggle(i,!0))},_renderOverflow:function(){var t=this,i=E.overflowContainer,n=t._isRtl,s=n?"left":"right";t.overflowAnchor=e(E.overflowAnchor).addClass(f),t.element.append(t.overflowAnchor),t.isMobile?(t.overflowAnchor.append('<span class="km-icon km-more"></span>'),i=r(i)):t.overflowAnchor.append('<span class="k-icon k-i-arrow-s"></span>'),t.popup=new a.ui.Popup(i,{origin:"bottom "+s,position:"top "+s,anchor:t.overflowAnchor,isRtl:n,animation:t.animation,appendTo:t.isMobile?e(t.isMobile).children(".km-pane"):null,copyAnchorStyles:!1,open:function(i){var r=a.wrap(t.popup.element).addClass("k-overflow-wrapper");t.isMobile?t.popup.container.css("max-height",parseFloat(e(".km-content:visible").innerHeight())-15+"px"):r.css("margin-left",(n?-1:1)*((r.outerWidth()-r.width())/2+1)),t.trigger("overflowOpen")&&i.preventDefault()},activate:function(){this.element.find(":kendoFocusable").first().focus()},close:function(e){t.trigger("overflowClose")&&e.preventDefault(),this.element.focus()}}),t.popup.element.on("keydown","."+f,function(i){var n=e(i.target),r=n.parent(),s=r.is("."+m)||r.is("."+g);i.preventDefault(),i.keyCode===h.ESC||i.keyCode===h.TAB||i.altKey&&i.keyCode===h.UP?(t._toggleOverflow(),t.overflowAnchor.focus()):i.keyCode===h.DOWN?o(!s||s&&n.is(":last-child")?r:n,"next").focus():i.keyCode===h.UP?o(!s||s&&n.is(":first-child")?r:n,"prev").focus():i.keyCode!==h.SPACEBAR&&i.keyCode!==h.ENTER||t.userEvents.trigger("tap",{target:e(i.target)})}),t.isMobile?t.popup.container=t.popup.element.find("."+C):t.popup.container=t.popup.element,t.popup.container.attr(F,this.uid)},_toggleOverflowAnchor:function(){(this.options.mobile?this.popup.element.find("."+C).children(":not(."+D+", .k-popup)").length>0:this.popup.element.children(":not(."+D+", .k-popup)").length>0)?this.overflowAnchor.css({visibility:"visible",width:""}):this.overflowAnchor.css({visibility:"hidden",width:"1px"})},_buttonClick:function(t){var i,n,r,s,o,a,l=t.target.closest("."+y).length;t.preventDefault(),l?this._toggle(t):(i=e(t.target).closest("."+f,this.element)).hasClass(x)||(!(n=i.data("button"))&&this.popup&&(n=(i=e(t.target).closest("."+p,this.popup.container)).parent("li").data("button")),n&&n.options.enable&&(n.options.togglable?(s=u(n.toggleHandler)?n.toggleHandler:null,n.toggle(!n.options.selected,!0),o={target:i,group:n.options.group,checked:n.options.selected,id:n.options.id},s&&s.call(this,o),this.trigger("toggle",o)):(s=u(n.clickHandler)?n.clickHandler:null,o={sender:this,target:i,id:n.options.id},s&&s.call(this,o),this.trigger("click",o)),n.options.url&&(n.options.attributes&&n.options.attributes.target&&(a=n.options.attributes.target),window.open(n.options.url,a||"_self")),i.hasClass(p)&&this.popup.close(),(r=i.closest(".k-split-container"))[0]&&(r.data("kendoPopup")||r.parents(".km-popup-wrapper").data("kendoPopup")).close()))},_navigatable:function(){this.element.attr("tabindex",0).focus(function(){var t=e(this).find(":kendoFocusable:first");t.is("."+x)&&(t=o(t,"next")),t[0].focus()}).on("keydown",c(this._keydown,this))},_keydown:function(t){var i=e(t.target),n=t.keyCode,r=this.element.children(":not(.k-separator):visible");if(n===h.TAB){var s=i.parentsUntil(this.element).last(),o=!1,a=!1;s.length||(s=i),s.is("."+x)&&(t.shiftKey&&t.preventDefault(),r.last().is(":kendoFocusable")?r.last().focus():r.last().find(":kendoFocusable").last().focus()),t.shiftKey||r.index(s)!==r.length-1||(o=!s.is("."+m)||i.is(":last-child")),t.shiftKey&&1===r.index(s)&&(a=!s.is("."+m)||i.is(":first-child")),o&&this.overflowAnchor&&"hidden"!==this.overflowAnchor.css("visibility")&&(t.preventDefault(),this.overflowAnchor.focus()),a&&(t.preventDefault(),this.wrapper.prev(":kendoFocusable").focus())}if(t.altKey&&n===h.DOWN){var l=e(document.activeElement).data("splitButton"),d=e(document.activeElement).is("."+x);l?l.toggle():d&&this._toggleOverflow()}else if((n===h.SPACEBAR||n===h.ENTER)&&!i.is("input, checkbox"))return t.preventDefault(),i.is("."+g)&&(i=i.children().first()),void this.userEvents.trigger("tap",{target:i})},_toggle:function(t){var i=e(t.target).closest("."+g).data("splitButton");t.preventDefault(),i.options.enable&&((i.popup.element.is(":visible")?this.trigger("close",{target:i.element}):this.trigger("open",{target:i.element}))||i.toggle())},_toggleOverflow:function(){this.popup.toggle()},_resize:function(e){var t=e.width;this.options.resizable&&(this.popup.close(),this._shrink(t),this._stretch(t),this._markVisibles(),this._toggleOverflowAnchor())},_childrenWidth:function(){var t=0;return this.element.children(":visible:not('."+b+"')").each(function(){t+=e(this).outerWidth(!0)}),Math.ceil(t)},_shrink:function(e){var t,i;if(e<this._childrenWidth())for(var n=(i=this.element.children(":visible:not([data-overflow='never'], ."+x+")")).length-1;n>=0&&(t=i.eq(n),!(e>this._childrenWidth()));n--)this._hideItem(t)},_stretch:function(e){var t,i;if(e>this._childrenWidth()){i=this.element.children(":hidden:not('."+b+"')");for(var n=0;n<i.length&&(t=i.eq(n),!(e<this._childrenWidth())&&this._showItem(t,e));n++);}},_hideItem:function(e){e.hide(),this.popup&&this.popup.container.find(">li[data-uid='"+e.data("uid")+"']").removeClass(D)},_showItem:function(e,t){return!!(e.length&&t>this._childrenWidth()+e.outerWidth(!0))&&(e.show(),this.popup&&this.popup.container.find(">li[data-uid='"+e.data("uid")+"']").addClass(D),!0)},_markVisibles:function(){var e=this.popup.container.children(),t=this.element.children(":not(.k-overflow-anchor)"),i=e.filter(":not(.k-overflow-hidden)"),n=t.filter(":visible");e.add(t).removeClass(S+" "+T),i.first().add(n.first()).addClass(S),i.last().add(n.last()).addClass(T)}});a.ui.plugin(q)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.datetimepicker",["kendo.datepicker","kendo.timepicker"],function(){return function(e,t){function i(e){var t=new Date(2100,0,1);return t.setMinutes(-e),t}function n(e){e.preventDefault()}function r(t){var i,n=s.getCulture(t.culture).calendars.standard.patterns,r=!t.parseFormats.length;t.format=d(t.format||n.g),t.timeFormat=i=d(t.timeFormat||n.t),s.DateView.normalize(t),r&&t.parseFormats.unshift("yyyy-MM-ddTHH:mm:ss"),-1===e.inArray(i,t.parseFormats)&&t.parseFormats.splice(1,0,i)}var s=window.kendo,o=s.TimeView,a=s.parseDate,l=s._activeElement,d=s._extractFormat,c=s.calendar,u=c.isInRange,h=c.restrictValue,f=c.isEqualDatePart,p=o.getMilliseconds,m=s.ui,g=m.Widget,v=".kendoDateTimePicker",_="click"+v,b="k-state-default",k="k-state-disabled",w="mousedown"+v,y="aria-activedescendant",x="aria-expanded",C="aria-hidden",S="aria-owns",T=Date,D=new T(1800,0,1),F=new T(2099,11,31),E={view:"date"},R={view:"time"},A=e.extend,I=g.extend({init:function(t,i){g.fn.init.call(this,t,i),t=this.element,(i=this.options).disableDates=s.calendar.disabled(i.disableDates),i.min=a(t.attr("min"))||a(i.min),i.max=a(t.attr("max"))||a(i.max),r(i),this._initialOptions=A({},i),this._wrapper(),this._views(),this._icons(),this._reset(),this._template();try{t[0].setAttribute("type","text")}catch(e){t[0].type="text"}t.addClass("k-input").attr({role:"combobox","aria-expanded":!1}),this._midnight=this._calculateMidnight(i.min,i.max),t.is("[disabled]")||e(this.element).parents("fieldset").is(":disabled")?this.enable(!1):this.readonly(t.is("[readonly]")),this._old=this._update(i.value||this.element.val()),this._oldText=t.val(),s.notify(this)},options:{name:"DateTimePicker",value:null,format:"",timeFormat:"",culture:"",parseFormats:[],dates:[],min:new T(D),max:new T(F),interval:30,height:200,footer:"",start:"month",depth:"month",animation:{},month:{},ARIATemplate:'Current focused date is #=kendo.toString(data.current, "d")#'},events:["open","close","change"],setOptions:function(e){var t,i,n,o=this._value;g.fn.setOptions.call(this,e),(e=this.options).min=t=a(e.min),e.max=i=a(e.max),r(e),this._midnight=this._calculateMidnight(e.min,e.max),n=e.value||this._value||this.dateView._current,t&&!f(t,n)&&(t=new T(D)),i&&!f(i,n)&&(i=new T(F)),this.dateView.setOptions(e),this.timeView.setOptions(A({},e,{format:e.timeFormat,min:t,max:i})),o&&(this.element.val(s.toString(o,e.format,e.culture)),this._updateARIA(o))},_editable:function(t){var i=this,r=i.element.off(v),o=i._dateIcon.off(v),a=i._timeIcon.off(v),d=i._inputWrapper.off(v),c=t.readonly,u=t.disable;c||u?(d.addClass(u?k:b).removeClass(u?b:k),r.attr("disabled",u).attr("readonly",c).attr("aria-disabled",u).attr("aria-readonly",c)):(d.addClass(b).removeClass(k).on("mouseenter.kendoDateTimePicker mouseleave.kendoDateTimePicker",i._toggleHover),r.removeAttr("disabled").removeAttr("readonly").attr("aria-disabled",!1).attr("aria-readonly",!1).on("keydown"+v,e.proxy(i._keydown,i)).on("focus"+v,function(){i._inputWrapper.addClass("k-state-focused")}).on("focusout"+v,function(){i._inputWrapper.removeClass("k-state-focused"),r.val()!==i._oldText&&i._change(r.val()),i.close("date"),i.close("time")}),o.on(w,n).on(_,function(){i.toggle("date"),s.support.touch||r[0]===l()||r.focus()}),a.on(w,n).on(_,function(){i.toggle("time"),s.support.touch||r[0]===l()||r.focus()}))},readonly:function(e){this._editable({readonly:void 0===e||e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=void 0===e||e)})},destroy:function(){g.fn.destroy.call(this),this.dateView.destroy(),this.timeView.destroy(),this.element.off(v),this._dateIcon.off(v),this._timeIcon.off(v),this._inputWrapper.off(v),this._form&&this._form.off("reset",this._resetHandler)},close:function(e){"time"!==e&&(e="date"),this[e+"View"].close()},open:function(e){"time"!==e&&(e="date"),this[e+"View"].open()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},toggle:function(e){var t="timeView";"time"!==e?e="date":t="dateView",this[e+"View"].toggle(),this[t].close()},value:function(e){if(void 0===e)return this._value;this._old=this._update(e),null===this._old&&this.element.val(""),this._oldText=this.element.val()},_change:function(e){var t,i=this.element.val();e=this._update(e);var n=(t=+this._old!=+e)&&!this._typing,r=i!==this.element.val();(n||r)&&this.element.trigger("change"),t&&(this._old=e,this._oldText=this.element.val(),this.trigger("change")),this._typing=!1},_option:function(e,t){var n,r,s=this.options,o=this.timeView,l=o.options,d=this._value||this._old;if(void 0===t)return s[e];if(t=a(t,s.parseFormats,s.culture)){if(s.min.getTime()===s.max.getTime()&&(l.dates=[]),s[e]=new T(t.getTime()),this.dateView[e](t),this._midnight=this._calculateMidnight(s.min,s.max),d&&(n=f(s.min,d),r=f(s.max,d)),n||r){if(l[e]=t,n&&!r&&(l.max=i(s.interval)),r){if(this._midnight)return void o.dataBind([F]);n||(l.min=D)}}else l.max=F,l.min=D;o.bind()}},_toggleHover:function(t){e(t.currentTarget).toggleClass("k-state-hover","mouseenter"===t.type)},_update:function(t){var n,r,o,l,d,c=this.options,p=c.min,m=c.max,g=c.dates,v=this.timeView,_=this._value,b=a(t,c.parseFormats,c.culture),k=null===b&&null===_||b instanceof Date&&_ instanceof Date;return c.disableDates&&c.disableDates(b)&&(b=null,this._old||(t=null)),+b==+_&&k?((d=s.toString(b,c.format,c.culture))!==t&&(this.element.val(null===b?t:d),t instanceof String&&this.element.trigger("change")),b):(null!==b&&f(b,p)?b=h(b,p,m):u(b,p,m)||(b=null),this._value=b,v.value(b),this.dateView.value(b),b&&(o=this._old,r=v.options,g[0]&&(g=e.grep(g,function(e){return f(b,e)}))[0]&&(v.dataBind(g),l=!0),l||(f(b,p)&&(r.min=p,r.max=i(c.interval),n=!0),f(b,m)&&(this._midnight?(v.dataBind([F]),l=!0):(r.max=m,n||(r.min=D),n=!0))),!l&&(!o&&n||o&&!f(o,b))&&(n||(r.max=F,r.min=D),v.bind())),this.element.val(b?s.toString(b,c.format,c.culture):t),this._updateARIA(b),b)},_keydown:function(e){var t=this.dateView,i=this.timeView,n=this.element.val(),r=t.popup.visible();e.altKey&&e.keyCode===s.keys.DOWN?this.toggle(r?"time":"date"):r?(t.move(e),this._updateARIA(t._current)):i.popup.visible()?i.move(e):e.keyCode===s.keys.ENTER&&n!==this._oldText?this._change(n):this._typing=!0},_views:function(){var e,t,i,n,r,l,d=this,c=d.element,h=d.options,f=c.attr("id");d.dateView=e=new s.DateView(A({},h,{id:f,anchor:d.wrapper,change:function(){var t,i,n=e.calendar.value(),r=+n,o=+h.min,a=+h.max;r!==o&&r!==a||(t=r===o?o:a,(t=new T(d._value||t)).setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),u(t,o,a)&&(n=t)),d._value&&(i=s.date.setHours(new Date(n),d._value),u(i,o,a)&&(n=i)),d._change(n),d.close("date")},close:function(e){d.trigger("close",E)?e.preventDefault():(c.attr(x,!1),i.attr(C,!0),t.popup.visible()||c.removeAttr(S))},open:function(t){d.trigger("open",E)?t.preventDefault():(c.val()!==d._oldText&&(l=a(c.val(),h.parseFormats,h.culture),d.dateView[l?"current":"value"](l)),i.attr(C,!1),c.attr(x,!0).attr(S,e._dateViewID),d._updateARIA(l))}})),i=e.div,r=h.min.getTime(),d.timeView=t=new o({id:f,value:h.value,anchor:d.wrapper,animation:h.animation,format:h.timeFormat,culture:h.culture,height:h.height,interval:h.interval,min:new T(D),max:new T(F),dates:r===h.max.getTime()?[new Date(r)]:[],parseFormats:h.parseFormats,change:function(i,n){(i=t._parse(i))<h.min?(i=new T(+h.min),t.options.min=i):i>h.max&&(i=new T(+h.max),t.options.max=i),n?(d._timeSelected=!0,d._change(i)):(c.val(s.toString(i,h.format,h.culture)),e.value(i),d._updateARIA(i))},close:function(t){d.trigger("close",R)?t.preventDefault():(n.attr(C,!0),c.attr(x,!1),e.popup.visible()||c.removeAttr(S))},open:function(e){t._adjustListWidth(),d.trigger("open",R)?e.preventDefault():(c.val()!==d._oldText&&(l=a(c.val(),h.parseFormats,h.culture),d.timeView.value(l)),n.attr(C,!1),c.attr(x,!0).attr(S,t._timeViewID),t.options.active(t.current()))},active:function(e){c.removeAttr(y),e&&c.attr(y,t._optionID)}}),n=t.ul},_icons:function(){var t,i=this.element;(t=i.next("span.k-select"))[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-calendar">select</span><span unselectable="on" class="k-icon k-i-clock">select</span></span>').insertAfter(i)),t=t.children(),this._dateIcon=t.eq(0).attr({role:"button","aria-controls":this.dateView._dateViewID}),this._timeIcon=t.eq(1).attr({role:"button","aria-controls":this.timeView._timeViewID})},_wrapper:function(){var t,i=this.element;(t=i.parents(".k-datetimepicker"))[0]||(t=(t=i.wrap("<span/>").parent().addClass("k-picker-wrap k-state-default")).wrap("<span/>").parent()),t[0].style.cssText=i[0].style.cssText,i.css({width:"100%",height:i[0].style.height}),this.wrapper=t.addClass("k-widget k-datetimepicker k-header").addClass(i[0].className),this._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,i=t.element,n=i.attr("form"),r=n?e("#"+n):i.closest("form");r[0]&&(t._resetHandler=function(){t.value(i[0].defaultValue),t.max(t._initialOptions.max),t.min(t._initialOptions.min)},t._form=r.on("reset",t._resetHandler))},_template:function(){this._ariaTemplate=s.template(this.options.ARIATemplate)},_calculateMidnight:function(e,t){return p(e)+p(t)===0},_updateARIA:function(e){var t,i=this.dateView.calendar;this.element.removeAttr(y),i&&((t=i._cell).attr("aria-label",this._ariaTemplate({current:e||i.current()})),this.element.attr(y,t.attr("id")))}});m.plugin(I)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.splitter",["kendo.resizable"],function(){return function(e,t){function i(e){return m.test(e)}function n(e){return p.test(e)||/^\d+$/.test(e)}function r(e){return!i(e)&&!n(e)}function s(e,t){var n=parseInt(e,10);return i(e)&&(n=Math.floor(n*t/100)),n}function o(e,t){return function(i,n){var r=this.element.find(i).data(b);if(1==arguments.length)return r[e];r[e]=n,t&&this.element.data("kendo"+this.options.name).resize(!0)}}function a(e){var t=e.orientation;this.owner=e,this._element=e.element,this.orientation=t,u(this,t===_?C:x),this._resizable=new l.ui.Resizable(e.element,{orientation:t,handle:".k-splitbar-draggable-"+t+"[data-marker="+e._marker+"]",hint:h(this._createHint,this),start:h(this._start,this),max:h(this._max,this),min:h(this._min,this),invalidClass:"k-restricted-size-"+t,resizeend:h(this._stop,this)})}var l=window.kendo,d=l.ui,c=l.keys,u=e.extend,h=e.proxy,f=d.Widget,p=/^\d+(\.\d+)?px$/i,m=/^\d+(\.\d+)?%$/i,g=".kendoSplitter",v="collapse",_="horizontal",b="pane",k="k-"+b,w="."+k,y=f.extend({init:function(e,t){var i;f.fn.init.call(this,e,t),this.wrapper=this.element,i="vertical"!=this.options.orientation.toLowerCase(),this.orientation=i?_:"vertical",this._dimension=i?"width":"height",this._keys={decrease:i?c.LEFT:c.UP,increase:i?c.RIGHT:c.DOWN},this._resizeStep=10,this._marker=l.guid().substring(0,8),this._initPanes(),this.resizing=new a(this),this.element.triggerHandler("init"+g)},events:["expand",v,"contentLoad","error","resize","layoutChange"],_addOverlays:function(){this._panes().append("<div class='k-splitter-overlay k-overlay' />")},_removeOverlays:function(){this._panes().children(".k-splitter-overlay").remove()},_attachEvents:function(){var t=this,i=t.options.orientation;t.element.children(".k-splitbar-draggable-"+i).on("keydown"+g,h(t._keydown,t)).on("mousedown"+g,function(e){e.currentTarget.focus()}).on("focus"+g,function(t){e(t.currentTarget).addClass("k-state-focused")}).on("blur"+g,function(i){e(i.currentTarget).removeClass("k-state-focused"),t.resizing&&t.resizing.end()}).on("mouseenter"+g,function(){e(this).addClass("k-splitbar-"+t.orientation+"-hover")}).on("mouseleave"+g,function(){e(this).removeClass("k-splitbar-"+t.orientation+"-hover")}).on("mousedown"+g,h(t._addOverlays,t)).end().children(".k-splitbar").on("dblclick"+g,h(t._togglePane,t)).children(".k-collapse-next, .k-collapse-prev").on("click"+g,t._arrowClick(v)).end().children(".k-expand-next, .k-expand-prev").on("click"+g,t._arrowClick("expand")).end().end(),e(window).on("resize"+g+t._marker,h(t.resize,t,!1)),e(document).on("mouseup"+g+t._marker,h(t._removeOverlays,t))},_detachEvents:function(){this.element.children(".k-splitbar-draggable-"+this.orientation).off(g).end().children(".k-splitbar").off("dblclick"+g).children(".k-collapse-next, .k-collapse-prev, .k-expand-next, .k-expand-prev").off(g),e(window).off(g+this._marker),e(document).off(g+this._marker)},options:{name:"Splitter",orientation:_,panes:[]},destroy:function(){f.fn.destroy.call(this),this._detachEvents(),this.resizing&&this.resizing.destroy(),l.destroy(this.element),this.wrapper=this.element=null},_keydown:function(t){var i,n=t.keyCode,r=this.resizing,s=e(t.currentTarget),o=this._keys,a=n===o.increase,l=n===o.decrease;a||l?(t.ctrlKey?(i=s[l?"next":"prev"](),r&&r.isResizing()&&r.end(),i[this._dimension]()?this._triggerAction(v,s[l?"prev":"next"]()):this._triggerAction("expand",i)):r&&r.move((l?-1:1)*this._resizeStep,s),t.preventDefault()):n===c.ENTER&&r&&(r.end(),t.preventDefault())},_initPanes:function(){var e=this.options.panes||[],t=this;this.element.addClass("k-widget").addClass("k-splitter").children().each(function(i,n){"script"!=n.nodeName.toLowerCase()&&t._initPane(n,e[i])}),this.resize()},_initPane:function(t,i){(t=e(t).attr("role","group").addClass(k)).data(b,i||{}).toggleClass("k-scrollable",!i||!1!==i.scrollable),this.ajaxRequest(t)},ajaxRequest:function(e,t,i){var n,r=this;n=(e=r.element.find(e)).data(b),(t=t||n.contentUrl)&&(e.append("<span class='k-icon k-loading k-pane-loading' />"),l.isLocalUrl(t)?jQuery.ajax({url:t,data:i||{},type:"GET",dataType:"html",success:function(t){r.angular("cleanup",function(){return{elements:e.get()}}),e.html(t),r.angular("compile",function(){return{elements:e.get()}}),r.trigger("contentLoad",{pane:e[0]})},error:function(t,i){r.trigger("error",{pane:e[0],status:i,xhr:t})}}):e.removeClass("k-scrollable").html("<iframe src='"+t+"' frameborder='0' class='k-content-frame'>This page requires frames in order to show content</iframe>"))},_triggerAction:function(e,t){this.trigger(e,{pane:t[0]})||this[e](t[0])},_togglePane:function(t){var i,n=e(t.target);n.closest(".k-splitter")[0]==this.element[0]&&1===(i=n.children(".k-icon:not(.k-resize-handle)")).length&&(i.is(".k-collapse-prev")?this._triggerAction(v,n.prev()):i.is(".k-collapse-next")?this._triggerAction(v,n.next()):i.is(".k-expand-prev")?this._triggerAction("expand",n.prev()):i.is(".k-expand-next")&&this._triggerAction("expand",n.next()))},_arrowClick:function(t){var i=this;return function(n){var r,s=e(n.target);s.closest(".k-splitter")[0]==i.element[0]&&(r=s.is(".k-"+t+"-prev")?s.parent().prev():s.parent().next(),i._triggerAction(t,r))}},_updateSplitBar:function(e,t,i){var n=function(e,t){return t?"<div class='k-icon "+e+"' />":""},r=this.orientation,s=!1!==t.resizable&&!1!==i.resizable,o=t.collapsible,a=t.collapsed,l=i.collapsible,d=i.collapsed;e.addClass("k-splitbar k-state-default k-splitbar-"+r).attr("role","separator").attr("aria-expanded",!(a||d)).removeClass("k-splitbar-"+r+"-hover").toggleClass("k-splitbar-draggable-"+r,s&&!a&&!d).toggleClass("k-splitbar-static-"+r,!s&&!o&&!l).html(n("k-collapse-prev",o&&!a&&!d)+n("k-expand-prev",o&&a&&!d)+n("k-resize-handle",s)+n("k-collapse-next",l&&!d&&!a)+n("k-expand-next",l&&d&&!a)),s||o||l||e.removeAttr("tabindex")},_updateSplitBars:function(){var t=this;this.element.children(".k-splitbar").each(function(){var i=e(this),n=i.prevAll(w).first().data(b),r=i.nextAll(w).first().data(b);r&&t._updateSplitBar(i,n,r)})},_removeSplitBars:function(){this.element.children(".k-splitbar").remove()},_panes:function(){return this.element?this.element.children(w):e()},_resize:function(){var t=this.element,i=t.children(w),n=this.orientation==_,o=t.children(".k-splitbar"),a=o.length,d=n?"width":"height",c=t[d]();this.wrapper.addClass("k-splitter-resizing"),0===a?(a=i.length-1,i.slice(0,a).after("<div tabindex='0' class='k-splitbar' data-marker='"+this._marker+"' />"),this._updateSplitBars(),o=t.children(".k-splitbar")):this._updateSplitBars(),o.each(function(){c-=this[n?"offsetWidth":"offsetHeight"]});var u=0,h=e();i.css({position:"absolute",top:0})[d](function(){var t,i=e(this),n=i.data(b)||{};if(i.removeClass("k-state-collapsed"),n.collapsed)t=n.collapsedSize?s(n.collapsedSize,c):0,i.css("overflow","hidden").addClass("k-state-collapsed");else{if(r(n.size))return void(h=h.add(this));t=s(n.size,c)}return u+=t,t}),c-=u;var f=h.length,p=Math.floor(c/f);h.slice(0,f-1).css(d,p).end().eq(f-1).css(d,c-(f-1)*p);var m=0,g=n?"height":"width",v=n?"left":"top",k=n?"offsetWidth":"offsetHeight";if(0===f){var y=i.filter(function(){return!(e(this).data(b)||{}).collapsed}).last();y[d](c+y[0][k])}t.children().css(g,t[g]()).each(function(e,t){"script"!=t.tagName.toLowerCase()&&(t.style[v]=Math.floor(m)+"px",m+=t[k])}),this._detachEvents(),this._attachEvents(),this.wrapper.removeClass("k-splitter-resizing"),l.resize(i),this.trigger("layoutChange")},toggle:function(e,t){var i;i=(e=this.element.find(e)).data(b),(t||i.collapsible)&&(1==arguments.length&&(t=void 0!==i.collapsed&&i.collapsed),i.collapsed=!t,i.collapsed?e.css("overflow","hidden"):e.css("overflow",""),this.resize(!0))},collapse:function(e){this.toggle(e,!1)},expand:function(e){this.toggle(e,!0)},_addPane:function(e,t,i){return i.length&&(this.options.panes.splice(t,0,e),this._initPane(i,e),this._removeSplitBars(),this.resize(!0)),i},append:function(t){t=t||{};var i=e("<div />").appendTo(this.element);return this._addPane(t,this.options.panes.length,i)},insertBefore:function(t,i){i=e(i),t=t||{};var n=this.wrapper.children(".k-pane").index(i),r=e("<div />").insertBefore(e(i));return this._addPane(t,n,r)},insertAfter:function(t,i){i=e(i),t=t||{};var n=this.wrapper.children(".k-pane").index(i),r=e("<div />").insertAfter(e(i));return this._addPane(t,n+1,r)},remove:function(t){var i=this;return(t=e(t)).length&&(l.destroy(t),t.each(function(t,n){i.options.panes.splice(i.wrapper.children(".k-pane").index(n),1),e(n).remove()}),i._removeSplitBars(),i.options.panes.length&&i.resize(!0)),i},size:o("size",!0),min:o("min"),max:o("max")});d.plugin(y);var x={sizingProperty:"height",sizingDomProperty:"offsetHeight",alternateSizingProperty:"width",positioningProperty:"top",mousePositioningProperty:"pageY"},C={sizingProperty:"width",sizingDomProperty:"offsetWidth",alternateSizingProperty:"height",positioningProperty:"left",mousePositioningProperty:"pageX"};a.prototype={press:function(e){this._resizable.press(e)},move:function(e,t){this.pressed||(this.press(t),this.pressed=!0),this._resizable.target||this._resizable.press(t),this._resizable.move(e)},end:function(){this._resizable.end(),this.pressed=!1},destroy:function(){this._resizable.destroy(),this._resizable=this._element=this.owner=null},isResizing:function(){return this._resizable.resizing},_createHint:function(t){return e("<div class='k-ghost-splitbar k-ghost-splitbar-"+this.orientation+" k-state-default' />").css(this.alternateSizingProperty,t[this.alternateSizingProperty]())},_start:function(t){var i=e(t.currentTarget),r=i.prev(),s=i.next(),o=r.data(b),a=s.data(b),l=parseInt(r[0].style[this.positioningProperty],10),d=parseInt(s[0].style[this.positioningProperty],10)+s[0][this.sizingDomProperty]-i[0][this.sizingDomProperty],c=parseInt(this._element.css(this.sizingProperty),10),u=function(e){var t=parseInt(e,10);return(n(e)?t:c*t/100)||0},h=u(o.min),f=u(o.max)||d-l,p=u(a.min),m=u(a.max)||d-l;this.previousPane=r,this.nextPane=s,this._maxPosition=Math.min(d-p,l+f),this._minPosition=Math.max(l+h,d-m)},_max:function(){return this._maxPosition},_min:function(){return this._minPosition},_stop:function(t){var i=e(t.currentTarget),n=this.owner;if(n._panes().children(".k-splitter-overlay").remove(),t.keyCode!==l.keys.ESC){var s=t.position,o=i.prev(),a=i.next(),d=o.data(b),c=a.data(b),u=s-parseInt(o[0].style[this.positioningProperty],10),h=parseInt(a[0].style[this.positioningProperty],10)+a[0][this.sizingDomProperty]-s-i[0][this.sizingDomProperty],f=this._element.children(w).filter(function(){return r(e(this).data(b).size)}).length;(!r(d.size)||f>1)&&(r(d.size)&&f--,d.size=u+"px"),(!r(c.size)||f>1)&&(c.size=h+"px"),n.resize(!0)}return!1}}}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.virtuallist",["kendo.data"],function(){return function(e,t){function i(e){return e[e.length-1]}function n(e){return e instanceof Array?e:[e]}function r(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}function s(e,t,i){var n=document.createElement(i||"div");return t&&(n.className=t),e.appendChild(n),n}function o(i,n,r){var s=r.template;i=e(i),n.item||(s=r.placeholderTemplate),this.angular("cleanup",function(){return{elements:[i]}}),i.attr("data-uid",n.item?n.item.uid:"").attr("data-offset-index",n.index).html(s(n.item||{})),i.toggleClass(m,n.current),i.toggleClass(p,n.selected),i.toggleClass("k-first",n.newGroup),i.toggleClass("k-loading-item",!n.item),0!==n.index&&n.newGroup&&e("<div class="+f+"></div>").appendTo(i).html(r.groupTemplate(n.group)),n.top!==t&&function(e,t){a.support.browser.msie&&a.support.browser.version<10?e.style.top=t+"px":(e.style.webkitTransform="translateY("+t+"px)",e.style.transform="translateY("+t+"px)")}(i[0],n.top),this.angular("compile",function(){return{elements:[i],data:[{dataItem:n.item,group:n.group,newGroup:n.newGroup}]}})}var a=window.kendo,l=a.ui,d=l.Widget,c=l.DataBoundWidget,u=e.proxy,h="k-virtual-item",f="k-group",p="k-state-selected",m="k-state-focused",g="itemChange",v=".VirtualList",_=c.extend({init:function(t,i){var r=this;r.bound(!1),r._fetching=!1,d.fn.init.call(r,t,i),r.options.itemHeight||(r.options.itemHeight=function(){var t,i=e('<div class="k-popup"><ul class="k-list"><li class="k-item"><li></ul></div>');return i.css({position:"absolute",left:"-200000px",visibility:"hidden"}),i.appendTo(document.body),t=parseFloat(a.getComputedStyles(i.find(".k-item")[0],["line-height"])["line-height"]),i.remove(),t}()),i=r.options,r.element.addClass("k-list k-virtual-list").attr("role","listbox"),r.content=r.element.wrap("<div unselectable='on' class='k-virtual-content'></div>").parent(),r.wrapper=r.content.wrap("<div class='k-virtual-wrap'></div>").parent(),r.header=r.content.before("<div class='k-group-header'></div>").prev(),r.element.on("mouseenter"+v,"li:not(.k-loading-item)",function(){e(this).addClass("k-state-hover")}).on("mouseleave"+v,"li",function(){e(this).removeClass("k-state-hover")}),r._values=n(r.options.value),r._selectedDataItems=[],r._selectedIndexes=[],r._rangesList={},r._activeDeferred=null,r._promisesList=[],r._optionID=a.guid(),r.setDataSource(i.dataSource),r.content.on("scroll"+v,a.throttle(function(){r._renderItems(),r._triggerListBound()},i.delay)),r._selectable()},options:{name:"VirtualList",autoBind:!0,delay:100,height:null,listScreens:4,threshold:.5,itemHeight:null,oppositeBuffer:1,type:"flat",selectable:!1,value:[],dataValueField:null,template:"#:data#",placeholderTemplate:"loading...",groupTemplate:"#:data#",fixedGroupTemplate:"fixed header template",valueMapper:null},events:["change","click","listBound",g,"activate","deactivate"],setOptions:function(e){d.fn.setOptions.call(this,e),this._selectProxy&&!1===this.options.selectable?this.element.off("click","."+h,this._selectProxy):!this._selectProxy&&this.options.selectable&&this._selectable(),this.refresh()},items:function(){return e(this._items)},destroy:function(){this.wrapper.off(v),this.dataSource.unbind("change",this._refreshHandler),d.fn.destroy.call(this)},setDataSource:function(t){var i,n=this,r=t||{};r=e.isArray(r)?{data:r}:r,r=a.data.DataSource.create(r),n.dataSource?(n.dataSource.unbind("change",n._refreshHandler),n._clean(),n.bound(!1),n._deferValueSet=!0,i=n.value(),n.value([]),n.mute(function(){n.value(i)})):n._refreshHandler=e.proxy(n.refresh,n),n.dataSource=r.bind("change",n._refreshHandler),n.setDSFilter(r.filter()),0!==r.view().length?n.refresh():n.options.autoBind&&r.fetch()},skip:function(){return this.dataSource.currentRangeStart()},_triggerListBound:function(){var e=this.skip();this.bound()&&!this._selectingValue&&this._skip!==e&&(this._skip=e,this.trigger("listBound"))},_getValues:function(t){var i=this._valueGetter;return e.map(t,function(e){return i(e)})},refresh:function(e){var t,i=this,n=e&&e.action,r="itemchange"===n,s=this.isFiltered();i._mute||(i._deferValueSet=!1,i._fetching?(i._renderItems&&i._renderItems(!0),i._triggerListBound()):(s&&i.focus(0),i._createList(),n||!i._values.length||s||i.options.skipUpdateOnBind?(i.bound(!0),i._triggerListBound()):(i._selectingValue=!0,i.value(i._values,!0).done(function(){i.bound(!0),i._selectingValue=!1,i._triggerListBound()}))),(r||"remove"===n)&&(t=function(e,t){var i,n,r,s,o=t.length,a=e.length,l=[],d=[];if(a)for(r=0;r<a;r++){for(i=e[r],n=!1,s=0;s<o;s++)if(i===t[s]){n=!0,l.push({index:r,item:i});break}n||d.push(i)}return{changed:l,unchanged:d}}(i._selectedDataItems,e.items)).changed.length&&(r?i.trigger("selectedItemChange",{items:t.changed}):i.value(i._getValues(t.unchanged))),i._fetching=!1)},removeAt:function(e){return this._selectedIndexes.splice(e,1),this._values.splice(e,1),{position:e,dataItem:this._selectedDataItems.splice(e,1)[0]}},setValue:function(e){this._values=n(e)},value:function(i,r){return i===t?this._values.slice():(null===i&&(i=[]),i=n(i),"multiple"===this.options.selectable&&this.select().length&&i.length&&this.select(-1),this._valueDeferred&&"resolved"!==this._valueDeferred.state()||(this._valueDeferred=e.Deferred()),i.length||this.select(-1),this._values=i,(this.bound()&&!this._mute&&!this._deferValueSet||r)&&this._prefetchByValue(i),this._valueDeferred)},_prefetchByValue:function(e){for(var t,i=this,s=i._dataView,o=i._valueGetter,a=[],l=0;l<e.length;l++)for(var d=0;d<s.length;d++)(t=s[d].item)&&(r(t)?e[l]===t:e[l]===o(t))&&a.push(s[d].index);if(a.length===e.length)return i._values=[],void i.select(a);if("function"!=typeof i.options.valueMapper)throw new Error("valueMapper is not provided");i.options.valueMapper({value:"multiple"===this.options.selectable?e:e[0],success:function(e){i._values=[],i._selectedIndexes=[],i._selectedDataItems=[],(e=n(e)).length||(e=[-1]),i.select(e)}})},deferredRange:function(t){var i=this.dataSource,n=this.itemCount,r=this._rangesList,s=e.Deferred(),o=[],a=Math.floor(t/n)*n,l=Math.ceil(t/n)*n,d=l===a?[l]:[a,l];return e.each(d,function(t,s){var a,l=s+n,d=r[s];d&&d.end===l?a=d.deferred:(a=e.Deferred(),r[s]={end:l,deferred:a},i._multiplePrefetch(s,n,function(){a.resolve()})),o.push(a)}),e.when.apply(e,o).then(function(){s.resolve()}),s},prefetch:function(t){var i=this,n=this.itemCount,r=!i._promisesList.length;return i._activeDeferred||(i._activeDeferred=e.Deferred(),i._promisesList=[]),e.each(t,function(e,t){var r=Math.floor(t/n)*n;i._promisesList.push(i.deferredRange(r))}),r&&e.when.apply(e,i._promisesList).done(function(){i._activeDeferred.resolve(),i._activeDeferred=null,i._promisesList=[]}),i._activeDeferred},_findDataItem:function(e){var t,i=this.dataSource.view();if("group"===this.options.type)for(var n=0;n<i.length;n++){if(!((t=i[n].items).length<=e))return t[e];e-=t.length}return i[e]},selectedDataItems:function(){return this._selectedDataItems.slice()},scrollTo:function(e){this.content.scrollTop(e)},scrollToIndex:function(e){this.scrollTo(e*this.options.itemHeight)},focus:function(n){var r,s,o,a,l=this.options.itemHeight,d=this._optionID,c=!0;if(n===t)return(a=this.element.find("."+m)).length?a:null;if("function"==typeof n){o=this.dataSource.flatView();for(var u=0;u<o.length;u++)if(n(o[u])){n=u;break}}if(n instanceof Array&&(n=i(n)),isNaN(n)?(r=e(n),s=parseInt(e(r).attr("data-offset-index"),10)):(s=n,r=this._getElementByIndex(s)),-1===s)return this.element.find("."+m).removeClass(m),void(this._focusedIndex=t);if(r.length){r.hasClass(m)&&(c=!1),this._focusedIndex!==t&&((a=this._getElementByIndex(this._focusedIndex)).removeClass(m).removeAttr("id"),c&&this.trigger("deactivate")),this._focusedIndex=s,r.addClass(m).attr("id",d);var h=this._getElementLocation(s);"top"===h?this.scrollTo(s*l):"bottom"===h?this.scrollTo(s*l+l-this.screenHeight):"outScreen"===h&&this.scrollTo(s*l),c&&this.trigger("activate")}else this._focusedIndex=s,this.items().removeClass(m),this.scrollToIndex(s)},focusIndex:function(){return this._focusedIndex},focusFirst:function(){this.scrollTo(0),this.focus(0)},focusLast:function(){var e=this.dataSource.total();this.scrollTo(this.heightContainer.offsetHeight),this.focus(e)},focusPrev:function(){var e,t=this._focusedIndex;return!isNaN(t)&&t>0?(t-=1,this.focus(t),(e=this.focus())&&e.hasClass("k-loading-item")&&(t+=1,this.focus(t)),t):(t=this.dataSource.total()-1,this.focus(t),t)},focusNext:function(){var e,t=this._focusedIndex,i=this.dataSource.total()-1;return!isNaN(t)&&t<i?(t+=1,this.focus(t),(e=this.focus())&&e.hasClass("k-loading-item")&&(t-=1,this.focus(t)),t):(t=0,this.focus(t),t)},_triggerChange:function(e,t){e=e||[],t=t||[],(e.length||t.length)&&this.trigger("change",{removed:e,added:t})},select:function(e){var n,r,s,o,a=this,l="multiple"!==a.options.selectable,d=!!a._activeDeferred,c=this.isFiltered(),u=[];if(e===t)return a._selectedIndexes.slice();if(n=a._getIndecies(e),r=l&&!c&&i(n)===i(this._selectedIndexes),(u=a._deselectCurrentValues(n)).length||!n.length||r)return a._triggerChange(u),void(a._valueDeferred&&a._valueDeferred.resolve());1===n.length&&-1===n[0]&&(n=[]),o=a._deselect(n),u=o.removed,n=o.indices,l&&(a._activeDeferred=null,d=!1,n.length&&(n=[i(n)]));var h=function(){var e=a._select(n);a.focus(n),a._triggerChange(u,e),a._valueDeferred&&a._valueDeferred.resolve()};s=a.prefetch(n),d||(s?s.done(h):h())},bound:function(e){if(e===t)return this._listCreated;this._listCreated=e},mute:function(e){this._mute=!0,u(e(),this),this._mute=!1},setDSFilter:function(t){this._lastDSFilter=e.extend({},t)},isFiltered:function(){return this._lastDSFilter||this.setDSFilter(this.dataSource.filter()),!a.data.Query.compareFilters(this.dataSource.filter(),this._lastDSFilter)},skipUpdate:e.noop,_getElementByIndex:function(t){return this.items().filter(function(i,n){return t===parseInt(e(n).attr("data-offset-index"),10)})},_clean:function(){this.result=t,this._lastScrollTop=t,this._skip=t,e(this.heightContainer).remove(),this.heightContainer=t,this.element.empty()},_height:function(){var e=!!this.dataSource.view().length,t=this.options.height,i=this.options.itemHeight,n=this.dataSource.total();return e?t/i>n&&(t=n*i):t=0,t},_screenHeight:function(){var e=this._height();this.content.height(e),this.screenHeight=e},_getElementLocation:function(e){var t=this.content.scrollTop(),i=this.screenHeight,n=this.options.itemHeight,r=e*n,s=r+n,o=t+i;return r===t-n||s>t&&r<t?"top":r===o||r<o&&o<s?"bottom":r>=t&&r<=t+(i-n)?"inScreen":"outScreen"},_templates:function(){var e={template:this.options.template,placeholderTemplate:this.options.placeholderTemplate,groupTemplate:this.options.groupTemplate,fixedGroupTemplate:this.options.fixedGroupTemplate};for(var t in e)"function"!=typeof e[t]&&(e[t]=a.template(e[t]));this.templates=e},_generateItems:function(e,t){for(var i,n=[],r=this.options.itemHeight+"px";t-- >0;)(i=document.createElement("li")).tabIndex=-1,i.className=h+" k-item",i.setAttribute("role","option"),i.style.height=r,i.style.minHeight=r,e.appendChild(i),n.push(i);return n},_saveInitialRanges:function(){var t=this.dataSource._ranges,i=e.Deferred();i.resolve(),this._rangesList={};for(var n=0;n<t.length;n++)this._rangesList[t[n].start]={end:t[n].end,deferred:i}},_createList:function(){var t=this,i=t.content.get(0),n=t.options,r=t.dataSource;t.bound()&&t._clean(),t._saveInitialRanges(),t._screenHeight(),t._buildValueGetter(),t.itemCount=function(e,t,i){return Math.ceil(e*t/i)}(t.screenHeight,n.listScreens,n.itemHeight),t.itemCount>r.total()&&(t.itemCount=r.total()),t._templates(),t._items=t._generateItems(t.element[0],t.itemCount),t._setHeight(n.itemHeight*r.total()),t.options.type=(r.group()||[]).length?"group":"flat","flat"===t.options.type?t.header.hide():t.header.show(),t.getter=t._getter(function(){t._renderItems(!0)}),t._onScroll=function(e,i){var n=t._listItems(t.getter);return t._fixedHeader(e,n(e,i))},t._renderItems=t._whenChanged(function(e,t){return function(i){return t(e.scrollTop,i)}}(i,t._onScroll),function(e){return function(t,i){return e(t.items,t.index,i),t}}(t._reorderList(t._items,e.proxy(o,t)))),t._renderItems(),t._calculateGroupPadding(t.screenHeight)},_setHeight:function(e){var t,i=this.heightContainer;if(i?t=i.offsetHeight:i=this.heightContainer=s(this.content[0],"k-height-container"),e!==t)for(i.innerHTML="";e>0;){var n=Math.min(e,25e4);s(i).style.height=n+"px",e-=n}},_getter:function(){var e=null,t=this.dataSource,i=t.skip(),n=this.options.type,r=this.itemCount,s={};return t.pageSize()<r&&this.mute(function(){t.pageSize(r)}),function(o,a){var l=this;if(t.inRange(a,r)){i!==a&&this.mute(function(){t.range(a,r),i=a});var d;if("group"===n){if(!s[a])for(var c=s[a]=[],u=t.view(),h=0,f=u.length;h<f;h++)for(var p=u[h],m=0,g=p.items.length;m<g;m++)c.push({item:p.items[m],group:p.value});d=s[a][o-a]}else d=t.view()[o-a];return d}return e!==a&&(e=a,i=a,l._getterDeferred&&l._getterDeferred.reject(),l._getterDeferred=l.deferredRange(a),l._getterDeferred.then(function(){var e=l._indexConstraint(l.content[0].scrollTop);l._getterDeferred=null,a<=e&&e<=a+r&&(l._fetching=!0,t.range(a,r))})),null}},_fixedHeader:function(e,t){var i=this.currentVisibleGroup,n=this.options.itemHeight,r=Math.floor((e-t.top)/n),s=t.items[r];if(s&&s.item){var o=s.group;o!==i&&(this.header[0].innerHTML=o||"",this.currentVisibleGroup=o)}return t},_itemMapper:function(e,t,i){var n=this.options.type,s=this.options.itemHeight,o=this._focusedIndex,a=!1,l=!1,d=!1,c=null,u=this._valueGetter;if("group"===n&&(e&&(d=0===t||this._currentGroup&&this._currentGroup!==e.group,this._currentGroup=e.group),c=e?e.group:null,e=e?e.item:null),!this.isFiltered()&&i.length&&e)for(var h=0;h<i.length;h++)if(r(e)?i[h]===e:i[h]===u(e)){i.splice(h,1),a=!0;break}return o===t&&(l=!0),{item:e||null,group:c,newGroup:d,selected:a,current:l,index:t,top:t*s}},_range:function(e){var t,i=this.itemCount,n=this._values.slice(),r=[];this._view={},this._currentGroup=null;for(var s=e,o=e+i;s<o;s++)t=this._itemMapper(this.getter(s,e),s,n),r.push(t),this._view[t.index]=t;return this._dataView=r,r},_getDataItemsCollection:function(e,t){var i=this._range(this._listIndex(e,t));return{index:i.length?i[0].index:0,top:i.length?i[0].top:0,items:i}},_listItems:function(){var t=this.screenHeight,i=function(e,t){var i=(e.listScreens-1-e.threshold)*t,n=e.threshold*t;return function(e,t,r){return t>r?t-e.top<i:0===e.top||t-e.top>n}}(this.options,t);return e.proxy(function(e,t){var n=this.result,r=this._lastScrollTop;return!t&&n&&i(n,e,r)||(n=this._getDataItemsCollection(e,r)),this._lastScrollTop=e,this.result=n,n},this)},_whenChanged:function(e,t){var i;return function(n){var r=e(n);r!==i&&(i=r,t(r,n))}},_reorderList:function(t,i){var n=this,r=t.length,s=-1/0;return i=e.proxy(function(t,i){return function(n,r){for(var s=0,o=n.length;s<o;s++)t(n[s],r[s],i),r[s].item&&this.trigger(g,{item:e(n[s]),data:r[s].item,ns:a.ui})}}(i,this.templates),this),function(e,o,a){var l,d,c=o-s;a||Math.abs(c)>=r?(l=t,d=e):(l=function(e,t){var i;return t>0?(i=e.splice(0,t),e.push.apply(e,i)):(i=e.splice(t,-t),e.unshift.apply(e,i)),i}(t,c),d=c>0?e.slice(-c):e.slice(0,-c)),i(l,d,n.bound()),s=o}},_bufferSizes:function(){var e=this.options;return function(e,t,i){return{down:e*i,up:e*(t-1-i)}}(this.screenHeight,e.listScreens,e.oppositeBuffer)},_indexConstraint:function(e){var t=this.itemCount,i=this.options.itemHeight,n=this.dataSource.total();return Math.min(Math.max(n-t,0),Math.max(0,Math.floor(e/i)))},_listIndex:function(e,t){var i,n=this._bufferSizes();return i=e-(e>t?n.down:n.up),this._indexConstraint(i)},_selectable:function(){this.options.selectable&&(this._selectProxy=e.proxy(this,"_clickHandler"),this.element.on("click"+v,"."+h,this._selectProxy))},_getIndecies:function(e){var t,i=[];if("function"==typeof e){t=this.dataSource.flatView();for(var n=0;n<t.length;n++)if(e(t[n])){i.push(n);break}}return"number"==typeof e&&i.push(e),e instanceof jQuery&&(e=parseInt(e.attr("data-offset-index"),10),isNaN(e)||i.push(e)),e instanceof Array&&(i=e),i},_deselect:function(i){var n,r,s,o=[],a=this._selectedIndexes,l=0,d=this.options.selectable,c=0;if(i=i.slice(),!0!==d&&i.length){if("multiple"===d)for(var u=0;u<i.length;u++)if(l=e.inArray(i[u],a),(n=a[l])!==t){if(!(s=this._getElementByIndex(n)).hasClass("k-state-selected"))continue;s.removeClass(p),this._values.splice(l,1),this._selectedIndexes.splice(l,1),r=this._selectedDataItems.splice(l,1)[0],i.splice(u,1),o.push({index:n,position:l+c,dataItem:r}),c++,u--}}else{for(var h=0;h<a.length;h++)a[h]!==t&&(this._getElementByIndex(a[h]).removeClass(p),o.push({index:a[h],position:h,dataItem:this._selectedDataItems[h]}));this._values=[],this._selectedDataItems=[],this._selectedIndexes=[]}return{indices:i,removed:o}},_deselectCurrentValues:function(t){var i,n,r,s,o=this.element[0].children,a=this._values,l=[],d=0;if("multiple"!==this.options.selectable||!this.isFiltered())return[];for(;d<t.length;d++){for(r=-1,n=t[d],i=this._valueGetter(this._view[n].item),s=0;s<a.length;s++)if(i==a[s]){r=s;break}r>-1&&(l.push(this.removeAt(r)),e(o[n]).removeClass("k-state-selected"))}return l},_select:function(t){var i,n,s=this,o="multiple"!==this.options.selectable,a=this.dataSource,l=this.itemCount,d=this._valueGetter,c=[];return o&&(s._selectedIndexes=[],s._selectedDataItems=[],s._values=[]),n=a.skip(),e.each(t,function(e,t){var o=((t<l?1:Math.floor(t/l)+1)-1)*l;s.mute(function(){a.range(o,l),i=s._findDataItem([t-o]),s._selectedIndexes.push(t),s._selectedDataItems.push(i),s._values.push(r(i)?i:d(i)),c.push({index:t,dataItem:i}),s._getElementByIndex(t).addClass(p),a.range(n,l)})}),c},_clickHandler:function(t){var i=e(t.currentTarget);!t.isDefaultPrevented()&&i.attr("data-uid")&&this.trigger("click",{item:i})},_buildValueGetter:function(){this._valueGetter=a.getter(this.options.dataValueField)},_calculateGroupPadding:function(e){var t=this.items().first(),i=this.header,n=0;i[0]&&"none"!==i[0].style.display&&("auto"!==e&&(n=a.support.scrollbar()),n+=parseFloat(t.css("border-right-width"),10)+parseFloat(t.children(".k-group").css("right"),10),i.css("padding-right",n))}});a.ui.VirtualList=_,a.ui.plugin(_)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.scheduler.view",["kendo.core"],function(){return function(e){function t(e,t){function i(e,r){if(r=r[t])for(var s=n[e]=n[e]||[],o=0;o<r.length;o++)s.push(r[o]),i(e+1,r[o])}var n=[];return i(0,e),n}function i(){return l.support.cssBorderSpacing?"":'cellspacing="0"'}function n(t,n){return t.length?"<table "+i()+' class="'+e.trim("k-scheduler-table "+(n||""))+'"><tr>'+t.join("</tr><tr>")+"</tr></table>":""}function r(t,i,r){for(var s,o=[],a=0;a<t.length;a++){var l=t[a],d=[],c=i/l.length;for(s=0;s<l.length;s++){var u=l[s];d.push('<th colspan="'+(u.colspan||c)+'" class="'+(u.className||"")+'">'+u.text+"</th>")}o.push(d.join(""))}var h=[];if(r){var f=t[t.length-1],p=[],m=r.cellContent;for(s=0;s<f.length;s++)p.push('<td class="'+(f[s].className||"")+'">'+(m?m(s):"&nbsp;")+"</th>");h.push(p.join(""))}return e('<div class="k-scheduler-header k-state-default"><div class="k-scheduler-header-wrap">'+n(o)+function(e,t){return e.length?"<div style='position:relative'>"+n(e,t)+"</div>":""}(h,"k-scheduler-header-all-day")+"</div></div>")}function s(e){return{start:e.start,end:e.end}}function o(e){for(var t=[],i=0;i<e.length;i++){for(var n=e[i],r=s(n),o=null,a=0,l=t.length;a<l;a++){var d=r.start>t[a].end;if(r.start<t[a].start||d){(o=t[a]).end<r.end&&(o.end=r.end);break}}o||(o={start:r.start,end:r.end,events:[]},t.push(o)),o.events.push(n)}return t}function a(e,t,i,n){var r=t[0];if(r){for(var s=[],o=r.dataSource.view(),d=0;d<o.length;d++){var c={text:n({text:l.htmlEncode(l.getter(r.dataTextField)(o[d])),color:l.getter(r.dataColorField)(o[d]),field:r.field,title:r.title,name:r.name,value:l.getter(r.dataValueField)(o[d])}),className:"k-slot-cell"};c[e]=a(e,t.slice(1),i,n),s.push(c)}return s}return i}var l=window.kendo,d=l.ui,c=d.Widget,u=l.keys,h=Math;l.ui.scheduler={};var f,p=l.Class.extend({init:function(e,t){this._index=e,this._timeSlotCollections=[],this._daySlotCollections=[],this._isRtl=t},addTimeSlotCollection:function(e,t){return this._addCollection(e,t,this._timeSlotCollections)},addDaySlotCollection:function(e,t){return this._addCollection(e,t,this._daySlotCollections)},_addCollection:function(e,t,i){var n=new _(e,t,this._index,i.length);return i.push(n),n},timeSlotCollectionCount:function(){return this._timeSlotCollections.length},daySlotCollectionCount:function(){return this._daySlotCollections.length},daySlotByPosition:function(e,t){return this._slotByPosition(e,t,this._daySlotCollections)},timeSlotByPosition:function(e,t){return this._slotByPosition(e,t,this._timeSlotCollections)},_slotByPosition:function(e,t,i){for(var n=0;n<i.length;n++)for(var r=i[n],s=0;s<r.count();s++){var o=r.at(s),a=o.offsetWidth,l=o.offsetHeight,d=o.offsetLeft+a,c=o.offsetTop+l,u=r.at(s+1);if(u&&(u.offsetLeft!=o.offsetLeft?d=this._isRtl?o.offsetLeft+(o.offsetLeft-u.offsetLeft):u.offsetLeft:c=u.offsetTop),e>=o.offsetLeft&&e<d&&t>=o.offsetTop&&t<c)return o}},refresh:function(){var e;for(e=0;e<this._daySlotCollections.length;e++)this._daySlotCollections[e].refresh();for(e=0;e<this._timeSlotCollections.length;e++)this._timeSlotCollections[e].refresh()},timeSlotRanges:function(e,t){var i=this._timeSlotCollections,n=this._startSlot(e,i);!n.inRange&&e>=n.slot.end&&(n=null);var r=n;return e<t&&(r=this._endSlot(t,i)),r&&!r.inRange&&t<=r.slot.start&&(r=null),null===n&&null===r?[]:(null===n&&(n={inRange:!0,slot:i[r.slot.collectionIndex].first()}),null===r&&(r={inRange:!0,slot:i[n.slot.collectionIndex].last()}),this._continuousRange(g,i,n,r))},daySlotRanges:function(e,t,i){var n=this._daySlotCollections,r=this._startSlot(e,n,i);!r.inRange&&e>=r.slot.end&&(r=null);var s=r;if(e<t&&(s=this._endSlot(t,n,i)),s&&!s.inRange&&t<=s.slot.start&&(s=null),null===r&&null===s)return[];if(null===r)do{e+=l.date.MS_PER_DAY,r=this._startSlot(e,n,i)}while(!r.inRange&&e>=r.slot.end);if(null===s)do{t-=l.date.MS_PER_DAY,s=this._endSlot(t,n,i)}while(!s.inRange&&t<=s.slot.start);return this._continuousRange(v,n,r,s)},_continuousRange:function(e,t,i,n){for(var r=i.slot,s=n.slot,o=r.collectionIndex,a=s.collectionIndex,l=[],d=o;d<=a;d++){var c=t[d],u=c.first(),h=c.last(),f=!1,p=!1;d==o&&(p=!i.inRange),d==a&&(f=!n.inRange),u.start<r.start&&(u=r),h.start>s.start&&(h=s),o<a&&(d==o?f=!0:d==a?p=!0:f=p=!0),l.push(new e({start:u,end:h,collection:c,head:f,tail:p}))}return l},slotRanges:function(e,t){var i=e._startTime||l.date.toUtcTime(e.start),n=e._endTime||l.date.toUtcTime(e.end);return void 0===t&&(t=e.isMultiDay()),t?this.daySlotRanges(i,n,e.isAllDay):this.timeSlotRanges(i,n)},ranges:function(e,t,i,n){return"number"!=typeof e&&(e=l.date.toUtcTime(e)),"number"!=typeof t&&(t=l.date.toUtcTime(t)),i?this.daySlotRanges(e,t,n):this.timeSlotRanges(e,t)},_startCollection:function(e,t){for(var i=0;i<t.length;i++){var n=t[i];if(n.startInRange(e))return n}return null},_endCollection:function(e,t,i){for(var n=0;n<t.length;n++){var r=t[n];if(r.endInRange(e,i))return r}return null},_getCollections:function(e){return e?this._daySlotCollections:this._timeSlotCollections},continuousSlot:function(e,t){var i=t?-1:1,n=this._getCollections(e.isDaySlot)[e.collectionIndex+i];return n?n[t?"last":"first"]():void 0},firstSlot:function(){return this._getCollections(this.daySlotCollectionCount())[0].first()},lastSlot:function(){var e=this._getCollections(this.daySlotCollectionCount());return e[e.length-1].last()},upSlot:function(e,t){var i=this;return this.timeSlotCollectionCount()||(t=!0),this._verticalSlot(e,-1,function(e,n,r){if(!t&&!e&&0===r&&i.daySlotCollectionCount())return i._daySlotCollections[0].at(n)})},downSlot:function(e,t){var i=this;return this.timeSlotCollectionCount()||(t=!0),this._verticalSlot(e,1,function(e,n,r){if(!t&&e&&i.timeSlotCollectionCount())return i._timeSlotCollections[r].at(0)})},leftSlot:function(e){return this._horizontalSlot(e,-1)},rightSlot:function(e){return this._horizontalSlot(e,1)},_horizontalSlot:function(e,t){var i=e.index,n=e.isDaySlot,r=e.collectionIndex,s=this._getCollections(n);n?i+=t:r+=t;var o=s[r];return o?o.at(i):void 0},_verticalSlot:function(e,t,i){var n=e.index,r=e.isDaySlot,s=e.collectionIndex,o=this._getCollections(r);if(e=i(r,s,n))return e;r?s+=t:n+=t;var a=o[s];return a?a.at(n):void 0},_collection:function(e,t){return(t?this._daySlotCollections:this._timeSlotCollections)[e]},_startSlot:function(e,t,i){var n=this._startCollection(e,t),r=!0;n||(n=t[0],r=!1);var s=n.slotByStartDate(e,i);return s||(s=n.first(),r=!1),{slot:s,inRange:r}},_endSlot:function(e,t,i){var n=this._endCollection(e,t,i),r=!0;n||(n=t[t.length-1],r=!1);var s=n.slotByEndDate(e,i);return s||(s=n.last(),r=!1),{slot:s,inRange:r}},getSlotCollection:function(e,t){return this[t?"getDaySlotCollection":"getTimeSlotCollection"](e)},getTimeSlotCollection:function(e){return this._timeSlotCollections[e]},getDaySlotCollection:function(e){return this._daySlotCollections[e]}}),m=l.Class.extend({init:function(t){e.extend(this,t)},innerHeight:function(){for(var e=this.collection,t=this.start.index,i=this.end.index,n=0,r=t;r<=i;r++)n+=e.at(r).offsetHeight;return n},events:function(){return this.collection.events()},addEvent:function(e){this.events().push(e)},startSlot:function(){return this.start.offsetLeft>this.end.offsetLeft?this.end:this.start},endSlot:function(){return this.start.offsetLeft>this.end.offsetLeft?this.start:this.end}}),g=m.extend({innerHeight:function(){for(var e=this.collection,t=this.start.index,i=this.end.index,n=0,r=t;r<=i;r++)n+=e.at(r).offsetHeight;return n},outerRect:function(e,t,i){return this._rect("offset",e,t,i)},_rect:function(e,t,i,n){var r,s,o,a,d=this.start,c=this.end,u=l.support.isRtl(d.element);if("number"!=typeof t&&(t=l.date.toUtcTime(t)),"number"!=typeof i&&(i=l.date.toUtcTime(i)),n)r=d.offsetTop,s=c.offsetTop+c[e+"Height"],u?(o=c.offsetLeft,a=d.offsetLeft+d[e+"Width"]):(o=d.offsetLeft,a=c.offsetLeft+c[e+"Width"]);else{var h=t-d.start;h<0&&(h=0);var f=d.end-d.start;r=d.offsetTop+d[e+"Height"]*h/f;var p=c.end-i;p<0&&(p=0);var m=c.end-c.start;s=c.offsetTop+c[e+"Height"]-c[e+"Height"]*p/m,u?(o=Math.round(c.offsetLeft+c[e+"Width"]*p/m),a=Math.round(d.offsetLeft+d[e+"Width"]-d[e+"Width"]*h/f)):(o=Math.round(d.offsetLeft+d[e+"Width"]*h/f),a=Math.round(c.offsetLeft+c[e+"Width"]-c[e+"Width"]*p/m))}return{top:r,bottom:s,left:0===o?o:o+1,right:a}},innerRect:function(e,t,i){return this._rect("client",e,t,i)}}),v=m.extend({innerWidth:function(){for(var e=this.collection,t=this.start.index,i=this.end.index,n=0,r=t!==i?"offsetWidth":"clientWidth",s=t;s<=i;s++)n+=e.at(s)[r];return n}}),_=l.Class.extend({init:function(e,t,i,n){this._slots=[],this._events=[],this._start=l.date.toUtcTime(e),this._end=l.date.toUtcTime(t),this._groupIndex=i,this._collectionIndex=n},refresh:function(){for(var e=0;e<this._slots.length;e++)this._slots[e].refresh()},startInRange:function(e){return this._start<=e&&e<this._end},endInRange:function(e,t){var i=t?e<this._end:e<=this._end;return this._start<=e&&i},slotByStartDate:function(e){var t=e;"number"!=typeof t&&(t=l.date.toUtcTime(e));for(var i=0;i<this._slots.length;i++){var n=this._slots[i];if(n.startInRange(t))return n}return null},slotByEndDate:function(e,t){var i=e;if("number"!=typeof i&&(i=l.date.toUtcTime(e)),t)return this.slotByStartDate(e,!1);for(var n=0;n<this._slots.length;n++){var r=this._slots[n];if(r.endInRange(i))return r}return null},count:function(){return this._slots.length},events:function(){return this._events},addTimeSlot:function(e,t,i,n){var r=new k(e,t,i,this._groupIndex,this._collectionIndex,this._slots.length,n);this._slots.push(r)},addDaySlot:function(e,t,i,n){var r=new w(e,t,i,this._groupIndex,this._collectionIndex,this._slots.length,n);this._slots.push(r)},first:function(){return this._slots[0]},last:function(){return this._slots[this._slots.length-1]},at:function(e){return this._slots[e]}}),b=l.Class.extend({init:function(e,t,i,n,r,s){this.element=e,this.clientWidth=e.clientWidth,this.clientHeight=e.clientHeight,this.offsetWidth=e.offsetWidth,this.offsetHeight=e.offsetHeight,this.offsetTop=e.offsetTop,this.offsetLeft=e.offsetLeft,this.start=t,this.end=i,this.element=e,this.groupIndex=n,this.collectionIndex=r,this.index=s,this.isDaySlot=!1},startDate:function(){return l.timezone.toLocalDate(this.start)},endDate:function(){return l.timezone.toLocalDate(this.end)},startInRange:function(e){return this.start<=e&&e<this.end},endInRange:function(e){return this.start<e&&e<=this.end},startOffset:function(){return this.start},endOffset:function(){return this.end}}),k=b.extend({init:function(e,t,i,n,r,s,o){b.fn.init.apply(this,arguments),this.isHorizontal=!!o},refresh:function(){var e=this.element;this.clientWidth=e.clientWidth,this.clientHeight=e.clientHeight,this.offsetWidth=e.offsetWidth,this.offsetHeight=e.offsetHeight,this.offsetTop=e.offsetTop,this.offsetLeft=e.offsetLeft},offsetX:function(e,t){return this.offsetLeft+t},startInRange:function(e){return this.start<=e&&e<this.end},endInRange:function(e){return this.start<e&&e<=this.end},startOffset:function(t,i,n){if(n)return this.start;var r,s,o=e(this.element).offset(),a=this.end-this.start;if(this.isHorizontal){var d=l.support.isRtl(this.element);if(r=t-o.left,s=Math.floor(a*(r/this.offsetWidth)),d)return this.start+a-s}else r=i-o.top,s=Math.floor(a*(r/this.offsetHeight));return this.start+s},endOffset:function(t,i,n){if(n)return this.end;var r,s,o=e(this.element).offset(),a=this.end-this.start;if(this.isHorizontal){var d=l.support.isRtl(this.element);if(r=t-o.left,s=Math.floor(a*(r/this.offsetWidth)),d)return this.start+a-s}else r=i-o.top,s=Math.floor(a*(r/this.offsetHeight));return this.start+s}}),w=b.extend({init:function(e,t,i,n,r,s,o){b.fn.init.apply(this,arguments),this.eventCount=o,this.isDaySlot=!0,this.element.children.length?(this.firstChildHeight=this.element.children[0].offsetHeight+3,this.firstChildTop=this.element.children[0].offsetTop):(this.firstChildHeight=3,this.firstChildTop=0)},refresh:function(){this.clientHeight=this.element.clientHeight,this.offsetTop=this.element.offsetTop},startDate:function(){var e=new Date(this.start);return l.timezone.apply(e,"Etc/UTC")},endDate:function(){var e=new Date(this.end);return l.timezone.apply(e,"Etc/UTC")},startInRange:function(e){return this.start<=e&&e<this.end},endInRange:function(e){return this.start<e&&e<=this.end}});l.ui.SchedulerView=c.extend({init:function(t,i){c.fn.init.call(this,t,i),this._normalizeOptions(),this._scrollbar=f=f||l.support.scrollbar(),this._isRtl=l.support.isRtl(t),this._resizeHint=e(),this._moveHint=e(),this._cellId=l.guid(),this._resourcesForGroups(),this._selectedSlots=[]},_normalizeOptions:function(){var e=this.options;e.startTime&&e.startTime.setMilliseconds(0),e.endTime&&e.endTime.setMilliseconds(0),e.workDayStart&&e.workDayStart.setMilliseconds(0),e.workDayEnd&&e.workDayEnd.setMilliseconds(0)},_isMobile:function(){var e=this.options;return!0===e.mobile&&l.support.mobileOS||"phone"===e.mobile||"tablet"===e.mobile},_isMobilePhoneView:function(){var e=this.options;return!0===e.mobile&&l.support.mobileOS&&!l.support.mobileOS.tablet||"phone"===e.mobile},_addResourceView:function(){var e=new p(this.groups.length,this._isRtl);return this.groups.push(e),e},dateForTitle:function(){return l.format(this.options.selectedDateFormat,this.startDate(),this.endDate())},shortDateForTitle:function(){return l.format(this.options.selectedShortDateFormat,this.startDate(),this.endDate())},_changeGroup:function(e,t){var i=this[t?"prevGroupSlot":"nextGroupSlot"](e.start,e.groupIndex,e.isAllDay);return i&&(e.groupIndex+=t?-1:1),i},_changeGroupContinuously:function(){return null},_changeViewPeriod:function(){return!1},_horizontalSlots:function(e,t,i,n){var r=n?"leftSlot":"rightSlot",s=t[0].start,o=t[t.length-1].end,a=this.groups[e.groupIndex];if(!i){var l=this._normalizeHorizontalSelection(e,t,n);l&&(s=o=l)}s=a[r](s),o=a[r](o),i||this._isVerticallyGrouped()||s&&o||(s=o=this._changeGroup(e,n));var d;return s&&o||(d=this._continuousSlot(e,t,n),(d=this._changeGroupContinuously(e,d,i,n))&&(s=o=d)),{startSlot:s,endSlot:o}},_verticalSlots:function(e,t,i,n){var r=t[0].start,s=t[t.length-1].end,o=this.groups[e.groupIndex];if(!i){var a=this._normalizeVerticalSelection(e,t,n);a&&(r=s=a)}var l=n?"upSlot":"downSlot";return r=o[l](r,i),s=o[l](s,i),i||!this._isVerticallyGrouped()||r&&s||(r=s=this._changeGroup(e,n)),{startSlot:r,endSlot:s}},_normalizeHorizontalSelection:function(){return null},_normalizeVerticalSelection:function(e,t,i){return i?t[0].start:t[t.length-1].end},_continuousSlot:function(){return null},constrainSelection:function(e){var t,i=this.groups[0];this.inRange(e)?i.daySlotCollectionCount()||(e.isAllDay=!1):(t=i.firstSlot(),e.isAllDay=t.isDaySlot,e.start=t.startDate(),e.end=t.endDate()),this.groups[e.groupIndex]||(e.groupIndex=0)},move:function(e,t,i){var n=!1,r=this.groups[e.groupIndex];r.timeSlotCollectionCount()||(e.isAllDay=!0);var s,o,a,l,d=r.ranges(e.start,e.end,e.isAllDay,!1);if(t===u.DOWN||t===u.UP){if(n=!0,a=t===u.UP,this._updateDirection(e,d,i,a,!0),!(l=this._verticalSlots(e,d,i,a)).startSlot&&!i&&this._changeViewPeriod(e,a,!0))return n}else if((t===u.LEFT||t===u.RIGHT)&&(n=!0,a=t===u.LEFT,this._updateDirection(e,d,i,a,!1),!(l=this._horizontalSlots(e,d,i,a)).startSlot&&!i&&this._changeViewPeriod(e,a,!1)))return n;if(n){if(s=l.startSlot,o=l.endSlot,i){var c=e.backward;c&&s?e.start=s.startDate():!c&&o&&(e.end=o.endDate())}else s&&o&&(e.isAllDay=s.isDaySlot,e.start=s.startDate(),e.end=o.endDate());e.events=[]}return n},moveToEventInGroup:function(t,i,n,r){for(var s,o=t._continuousEvents||[],a=r?-1:1,l=o.length,d=r?l-1:0;d<l&&d>-1&&(s=o[d],!(!r&&s.start.startDate()>=i.startDate()||r&&s.start.startDate()<=i.startDate())||(n.length&&(s=o[d+a]),!s||-1!==e.inArray(s.uid,n)));)d+=a;return s},moveToEvent:function(e,t){for(var i,n=e.groupIndex,r=this.groups[n],s=r.ranges(e.start,e.end,e.isAllDay,!1)[0].start,o=this.groups.length,a=t?-1:1,l=e.events;n<o&&n>-1&&(i=this.moveToEventInGroup(r,s,l,t),n+=a,(r=this.groups[n])&&!i);)l=[],s=t?r.lastSlot():r.firstSlot(!0);return i&&(e.events=[i.uid],e.start=i.start.startDate(),e.end=i.end.endDate(),e.isAllDay=i.start.isDaySlot,e.groupIndex=i.start.groupIndex),!!i},current:function(e){if(void 0===e)return this._current;this._current=e,this.content.has(e)&&this._scrollTo(e,this.content[0])},select:function(e){this.clearSelection(),this._selectEvents(e)||this._selectSlots(e)},_selectSlots:function(e){var t=e.isAllDay,i=this.groups[e.groupIndex];i.timeSlotCollectionCount()||(t=!0),this._selectedSlots=[];for(var n,r,s=i.ranges(e.start,e.end,t,!1),o=0;o<s.length;o++)for(var a=s[o],l=a.collection,d=a.start.index;d<=a.end.index;d++)(n=(r=l.at(d)).element).setAttribute("aria-selected",!0),function(e){e.className=e.className.replace(x,"")+" k-state-selected"}(n),this._selectedSlots.push({start:r.startDate(),end:r.endDate(),element:n});e.backward&&(n=s[0].start.element),this.current(n)},_selectEvents:function(t){var i,n=!1,r=t.events,s=this.groups[t.groupIndex]._continuousEvents||[],o=s.length;if(!r[0]||!s[0])return n;var a=e();for(t.events=[],i=0;i<o;i++)e.inArray(s[i].uid,r)>-1&&(a=a.add(s[i].element),t.events.push(s[i].uid));return a[0]&&(a.addClass("k-state-selected").attr("aria-selected",!0),this.current(a.last()[0]),this._selectedSlots=[],n=!0),n},inRange:function(e){var t=this.startDate(),i=l.date.addDays(this.endDate(),1),n=e.start,r=e.end;return t<=n&&n<i&&t<r&&r<=i},_resourceValue:function(e,t){return e.valuePrimitive&&(t=l.getter(e.dataValueField)(t)),t},_resourceBySlot:function(e){var t=this.groupedResources,i={};if(t.length)for(var n=e.groupIndex,r=t.length-1;r>=0;r--){var s=t[r],o=this._resourceValue(s,s.dataSource.view()[n%s.dataSource.total()]);s.multiple&&(o=[o]),l.setter(s.field)(i,o),n=Math.floor(n/s.dataSource.total())}return i},_createResizeHint:function(t,i,n,r){return e('<div class="k-marquee k-scheduler-marquee"><div class="k-marquee-color"></div><div class="k-marquee-text"><div class="k-label-top"></div><div class="k-label-bottom"></div></div></div>').css({left:t,top:i,width:n,height:r})},_removeResizeHint:function(){this._resizeHint.remove(),this._resizeHint=e()},_removeMoveHint:function(){this._moveHint.remove(),this._moveHint=e()},_scrollTo:function(e,t){var i=e.offsetTop,n=e.offsetHeight,r=t.scrollTop,s=t.clientHeight,o=i+n,a=0;a=r>i?i:o>r+s?n<=s?o-s:i:r,t.scrollTop=a},_shouldInverseResourceColor:function(e){var t=new y(e.color).isDark(),i=this.element.css("color");return t==new y(i).isDark()},_eventTmpl:function(t,i){var n=this.options,r=e.extend({},l.Template,n.templateSettings),s=r.paramName,o="",a=typeof t,d={storage:{},count:0};"function"===a?(d.storage["tmpl"+d.count]=t,o+="#=this.tmpl"+d.count+"("+s+")#",d.count++):"string"===a&&(o+=t);var c=l.template(l.format(i,o),r);return d.count>0&&(c=e.proxy(c,d.storage)),c},eventResources:function(e){var t=[],i=this.options;if(!i.resources)return t;for(var n=0;n<i.resources.length;n++){var r=i.resources[n],s=r.field,o=l.getter(s)(e);if(null!=o){r.multiple||(o=[o]);for(var a=r.dataSource.view(),d=0;d<o.length;d++){var c=null,u=o[d];r.valuePrimitive||(u=l.getter(r.dataValueField)(u));for(var h=0;h<a.length;h++)if(a[h].get(r.dataValueField)==u){c=a[h];break}if(null!==c){var f=l.getter(r.dataColorField)(c);t.push({field:r.field,title:r.title,name:r.name,text:l.getter(r.dataTextField)(c),value:u,color:f})}}}}return t},createLayout:function(n){var r=-1;n.rows||(n.rows=[]);for(var s=0;s<n.rows.length;s++)if(n.rows[s].allDay){r=s;break}var o=n.rows[r];r>=0&&n.rows.splice(r,1);var a=this.columnLevels=t(n,"columns"),l=this.rowLevels=t(n,"rows");this.table=e("<table "+i()+' class="k-scheduler-layout k-scheduler-'+this.name+'view"/>');var d=l[l.length-1].length;this.table.append(this._topSection(a,o,d)),this.table.append(this._bottomSection(a,l,d)),this.element.append(this.table),this._scroller()},refreshLayout:function(){for(var t=this.element.find(">.k-scheduler-toolbar"),i=this.element.innerHeight(),n=this._scrollbar,r=0,s=this._isRtl?"left":"right",o=0;o<t.length;o++)i-=t.eq(o).outerHeight();if(this.datesHeader&&(r=this.datesHeader.outerHeight()),this.timesHeader&&this.timesHeader.outerHeight()>r&&(r=this.timesHeader.outerHeight()),this.datesHeader&&this.timesHeader){var a=this.datesHeader.find("table:first tr");this.timesHeader.find("tr").height(function(t){e(this).height(a.eq(t).height())})}r&&(i-=r),this.footer&&(i-=this.footer.outerHeight());var d=this.content[0],c=l.support.kineticScrollNeeded?0:n;if(function(e){var t,i;return!!e[0].style.height||(t=e.height(),e.height("auto"),i=e.height(),t!=i?(e.height(""),!0):(e.height(""),!1))}(this.element)){i>2*n?this.content.height(i):this.content.height(2*n+1),this.times.height(d.clientHeight);var u=this.times.find("table");u.length&&u.height(this.content.find("table")[0].clientHeight)}d.offsetWidth-d.clientWidth>0?(this.table.addClass("k-scrollbar-v"),this.datesHeader.css("padding-"+s,c-parseInt(this.datesHeader.children().css("border-"+s+"-width"),10))):this.datesHeader.css("padding-"+s,""),d.offsetHeight-d.clientHeight>0||d.clientHeight>this.content.children(".k-scheduler-table").height()?this.table.addClass("k-scrollbar-h"):this.table.removeClass("k-scrollbar-h")},_topSection:function(t,i,s){this.timesHeader=function(t,i,r){var s=[];if(r>0)for(var o=0;o<t;o++)s.push("<th>&nbsp;</th>");return i&&s.push('<th class="k-scheduler-times-all-day">'+i.text+"</th>"),r<1?e():e('<div class="k-scheduler-times">'+n(s)+"</div>")}(t.length,i,s);var o=t[t.length-1].length;return this.datesHeader=r(t,o,i),e("<tr>").append(this.timesHeader.add(this.datesHeader).wrap("<td>").parent())},_bottomSection:function(t,r,s){return this.times=function(t,i){for(var r,s=new Array(i).join().split(","),o=[],a=0;a<t.length;a++){var l,d=t[a],c=i/d.length;for(r=0;r<d.length;r++)l=d[r].className||"",d[r].allDay&&(l="k-scheduler-times-all-day"),s[c*r]+='<th class="'+l+'" rowspan="'+c+'">'+d[r].text+"</th>"}for(r=0;r<i;r++)o.push(s[r]);return i<1?e():e('<div class="k-scheduler-times">'+n(o)+"</div>")}(r,s),this.content=(t[t.length-1],r[r.length-1],e('<div class="k-scheduler-content"><table '+i()+' class="k-scheduler-table"/></div>')),e("<tr>").append(this.times.add(this.content).wrap("<td>").parent())},_scroller:function(){var t=this;this.content.bind("scroll.kendoSchedulerView",function(){t.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(this.scrollLeft),t.times.scrollTop(this.scrollTop)});var i=l.touchScroller(this.content,{avoidScrolling:function(t){return e(t.event.target).closest(".k-event.k-event-active").length>0}});i&&i.movable&&(this._touchScroller=i,this.content=i.scrollElement,i.movable.bind("change",function(e){t.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(-e.sender.x),t.times.scrollTop(-e.sender.y)}))},_resourcesForGroups:function(){var e=[],t=this.options.group,i=this.options.resources;if(t=t&&t.resources?t.resources:[],i&&t.length)for(var n=0,r=i.length;n<r;n++)for(var s=0,o=t.length;s<o;s++)i[n].name===t[s]&&e.push(i[n]);this.groupedResources=e},_createColumnsLayout:function(e,t,i){return a("columns",e,t,i)},_groupOrientation:function(){var e=this.options.group;return e&&e.resources?e.orientation:"horizontal"},_isVerticallyGrouped:function(){return this.groupedResources.length&&"vertical"===this._groupOrientation()},_createRowsLayout:function(e,t,i){return a("rows",e,t,i)},selectionByElement:function(){return null},clearSelection:function(){this.content.find(".k-state-selected").removeAttr("id").attr("aria-selected",!1).removeClass("k-state-selected")},destroy:function(){c.fn.destroy.call(this),this.table&&(l.destroy(this.table),this.table.remove()),this.groups=null,this.table=null,this.content=null,this.times=null,this.datesHeader=null,this.timesHeader=null,this.footer=null,this._resizeHint=null,this._moveHint=null},calendarInfo:function(){return l.getCulture().calendars.standard},prevGroupSlot:function(e,t,i){var n,r=this.groups[t],s=r.ranges(e,e,i,!1)[0].start;if(!(t<=0))return this._isVerticallyGrouped()?r.timeSlotCollectionCount()?(n=r._collection(i?s.index:s.collectionIndex,!1)).last():(n=r._collection(r.daySlotCollectionCount()-1,!0)).at(s.index):r.timeSlotCollectionCount()?(n=r._collection(i?0:r.timeSlotCollectionCount()-1,i),i?n.last():n.at(s.index)):(n=r._collection(s.collectionIndex,!0)).last()},nextGroupSlot:function(e,t,i){var n,r,s=this.groups[t],o=s.ranges(e,e,i,!1)[0].start;if(!(t>=this.groups.length-1))return this._isVerticallyGrouped()?s.timeSlotCollectionCount()?(r=s.daySlotCollectionCount(),n=s._collection(r?0:o.collectionIndex,r),i?n.first():n.at(o.collectionIndex)):(n=s._collection(0,!0)).at(o.index):s.timeSlotCollectionCount()?(n=s._collection(0,i),i?n.first():n.at(o.index)):(n=s._collection(o.collectionIndex,!0)).first()},_eventOptionsForMove:function(){return{}},_updateEventForResize:function(){},_updateEventForSelection:function(e){return e}});var y=function(e){var t,i,n,r,s,o=y.formats;if(1===arguments.length)for(e=this.resolveColor(e),r=0;r<o.length;r++)t=o[r].re,i=o[r].process,(n=t.exec(e))&&(s=i(n),this.r=s[0],this.g=s[1],this.b=s[2]);else this.r=arguments[0],this.g=arguments[1],this.b=arguments[2];this.r=this.normalizeByte(this.r),this.g=this.normalizeByte(this.g),this.b=this.normalizeByte(this.b)};y.prototype={resolveColor:function(e){return"#"==(e=e||"#000").charAt(0)&&(e=e.substr(1,6)),e=e.replace(/ /g,""),e=e.toLowerCase(),e=y.namedColors[e]||e},normalizeByte:function(e){return e<0||isNaN(e)?0:e>255?255:e},percBrightness:function(){return h.sqrt(.241*this.r*this.r+.691*this.g*this.g+.068*this.b*this.b)},isDark:function(){return this.percBrightness()<180}},y.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],y.namedColors={aqua:"00ffff",azure:"f0ffff",beige:"f5f5dc",black:"000000",blue:"0000ff",brown:"a52a2a",coral:"ff7f50",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgray:"a9a9a9",darkgreen:"006400",darkorange:"ff8c00",darkred:"8b0000",dimgray:"696969",fuchsia:"ff00ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lightblue:"add8e6",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumblue:"0000cd",navy:"000080",olive:"808000",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",pink:"ffc0cb",plum:"dda0dd",purple:"800080",red:"ff0000",royalblue:"4169e1",salmon:"fa8072",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",steelblue:"4682b4",tan:"d2b48c",teal:"008080",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};var x=/\s*k-state-selected/;e.extend(d.SchedulerView,{createColumns:function(e){return o(e)},createRows:function(e){return o(e)},rangeIndex:s,collidingEvents:function(e,t,i){var n,r,o,a;for(n=e.length-1;n>=0;n--)o=(r=s(e[n])).start,a=r.end,(o<=t&&a>=t||o>=t&&a<=i||t<=o&&i>=o)&&(o<t&&(t=o),a>i&&(i=a));return function(e,t,i){for(var n=[],r=0;r<e.length;r++){var o=s(e[r]);(o.start<t&&o.end>t||o.start>=t&&o.end<=i)&&n.push(e[r])}return n}(e,t,i)},groupEqFilter:function(t){return function(i){if(e.isArray(i)||i instanceof l.data.ObservableArray){for(var n=0;n<i.length;n++)if(i[n]==t)return!0;return!1}return i==t}}})}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.scheduler.dayview",["kendo.scheduler.view"],function(){return function(e,t){function i(e){var t=new Date(1980,1,1,0,0,0);return l(t,v(e)),t}function n(e,t,i){return e>=t&&e<=i}function r(e,t,i,n){return n=n?e<=i:e<i,e>t&&n}function s(e,t,i,n){var r=e._continuousEvents,s=r[r.length-1],a=h(t.start.startDate()).getTime();if(n&&s&&h(s.start.startDate()).getTime()==a){for(var l=r.length-1;l>-1&&!(r[l].isAllDay||h(r[l].start.startDate()).getTime()<a);l--);r.splice(l+1,0,{element:i,isAllDay:!0,uid:i.attr(o.attr("uid")),start:t.start,end:t.end})}else r.push({element:i,isAllDay:n,uid:i.attr(o.attr("uid")),start:t.start,end:t.end})}var o=window.kendo,a=o.ui,l=o.date.setTime,d=a.SchedulerView,c=e.extend,u=e.proxy,h=o.date.getDate,f=o.date.MS_PER_MINUTE,p=o.date.MS_PER_DAY,m="k-current-time",g="k-current-time-arrow",v=o.date.getMilliseconds,_=".kendoMultiDayView",b=o.template('<div title="(#=kendo.format("{0:t} - {1:t}", start, end)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div><div class="k-event-template">${title}</div></div>'),k=o.template('<div title="(#=kendo.format("{0:t}", start)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template">${title}</div></div>'),w=o.template("<span class='k-link k-nav-day'>#=kendo.toString(date, 'ddd M/dd')#</span>"),y=d.extend({init:function(e,t){d.fn.init.call(this,e,t),this.title=this.options.title||this.options.name,this._workDays=function(e){var t=[],i=e.workWeekStart;for(t.push(i);e.workWeekEnd!=i;)i>6?i-=7:i++,t.push(i);return t}(this.options),this._templates(),this._editable(),this.calculateDateRange(),this._groups(),this._currentTime()},_currentTimeMarkerUpdater:function(){var t=new Date,i=this.options;if(!1===i.currentTimeMarker.useLocalTimezone){var n=i.dataSource.options.schema.timezone;if(i.dataSource&&n){var r=o.timezone.offset(t,n);t=o.timezone.convert(t,t.getTimezoneOffset(),r)}}this.times.find("."+m).remove(),this.content.find("."+m).remove();for(var s=i.group&&"horizontal"!=i.group.orientation?this.groups.length:1,a=this.times.find("tr:first th:first"),l=this.times.find("tr:first th:last"),d=0;d<s;d++){var c=this.groups[d],u=o.date.toUtcTime(t),h=c.timeSlotRanges(u,u+1);if(0===h.length)return;if(h[0].collection.slotByStartDate(t)){var f="<div class='"+m+"'></div>",p=e(f).prependTo(this.times),v=Math.round(h[0].innerRect(t,new Date(t.getTime()+1),!1).top),_={};this._isRtl?(_.right=a.position().left+a.outerHeight()-l.outerHeight(),p.addClass(g+"-left")):(_.left=l.position().left,p.addClass(g+"-right")),_.top=v-.8666*p.outerWidth()/2,p.css(_),e(f).prependTo(this.content).css({top:v,height:"1px",right:"1px",left:0})}}},_currentTime:function(){var e=this.options.currentTimeMarker;if(!1!==e&&void 0!==e.updateInterval){var t=e.updateInterval;this._currentTimeMarkerUpdater(),this._currentTimeUpdateTimer=setInterval(u(this._currentTimeMarkerUpdater,this),t)}},_updateResizeHint:function(e,t,i,n){var r=e.isMultiDay(),s=this.groups[t].ranges(i,n,r,e.isAllDay);this._removeResizeHint();for(var a=0;a<s.length;a++){var l=s[a],c=l.startSlot(),u=c.offsetWidth,h=c.clientHeight,f=c.offsetTop;if(r)u=l.innerWidth();else{var p=l.outerRect(i,n,this.options.snap);f=p.top,h=p.bottom-p.top}var m=d.fn._createResizeHint.call(this,c.offsetLeft,f,u,h);this._resizeHint=this._resizeHint.add(m)}var g="t",v=this.content;r&&(g="M/dd",(v=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div")).length||(v=this.content)),this._resizeHint.appendTo(v),this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(o.toString(o.timezone.toLocalDate(i),g)),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(o.toString(o.timezone.toLocalDate(n),g))},_updateMoveHint:function(e,t,i){var n=e.isMultiDay(),r=this.groups[t],s=o.date.toUtcTime(e.start)+i,a=s+e.duration(),l=r.ranges(s,a,n,e.isAllDay);s=o.timezone.toLocalDate(s),a=o.timezone.toLocalDate(a),this._removeMoveHint(),!n&&(0===v(a)||v(a)<v(this.startTime()))&&l.length>1&&l.pop();for(var d=0;d<l.length;d++){var c=l[d],u=c.start,h=this._createEventElement(e.clone({start:s,end:a}),!n);h.addClass("k-event-drag-hint");var f={left:u.offsetLeft+2,top:u.offsetTop};if(this._isRtl&&(f.left=.1*u.clientWidth+u.offsetLeft+2),n)f.width=c.innerWidth()-4;else{var p=c.outerRect(s,a,this.options.snap);f.top=p.top,f.height=p.bottom-p.top,f.width=.9*u.clientWidth-4}h.css(f),this._moveHint=this._moveHint.add(h)}var m=this.content;n&&((m=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div")).length||(m=this.content)),this._moveHint.appendTo(m)},_slotByPosition:function(e,t){var i,n;this._isVerticallyGrouped()?(n=this.content.offset(),t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft):n=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day)").find(">div").offset(),n&&(e-=n.left,t-=n.top),e=Math.ceil(e),t=Math.ceil(t);var r,s;for(s=0;s<this.groups.length;s++)if(r=this.groups[s],i=r.daySlotByPosition(e,t))return i;for(n&&(e+=n.left,t+=n.top),e-=(n=this.content.offset()).left,t-=n.top,this._isVerticallyGrouped()||(t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft),e=Math.ceil(e),t=Math.ceil(t),s=0;s<this.groups.length;s++)if(r=this.groups[s],i=r.timeSlotByPosition(e,t))return i;return null},_groupCount:function(){var e=this.groupedResources;return e.length?"vertical"===this._groupOrientation()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length)/this._columnOffsetForResource(e.length):1},_columnCountInResourceView:function(){var e=this.groupedResources;return!e.length||this._isVerticallyGrouped()?this._columnCountForLevel(0):this._columnOffsetForResource(e.length)},_timeSlotGroups:function(e,t){var i=this._timeSlotInterval(),n=this.content.find("tr:not(.k-scheduler-header-all-day)");n.attr("role","row");var r=n.length;this._isVerticallyGrouped()&&(r=Math.floor(r/e));for(var s=0;s<e;s++){var o=0;this._isVerticallyGrouped()&&(o=s);var a,l=o*r,d=0;for(this._isVerticallyGrouped()||(d=s);l<(o+1)*r;){var c=n[l].children,u=this.groups[s];l%r==0&&(a=v(new Date(+this.startTime())));for(var h=d*t;h<(d+1)*t;h++){var f=c[h],p=h%t,m=u.getTimeSlotCollection(p),g=this._dates[p],_=Date.UTC(g.getFullYear(),g.getMonth(),g.getDate())+a,b=_+i;f.setAttribute("role","gridcell"),f.setAttribute("aria-selected",!1),m.addTimeSlot(f,_,b)}a+=i,l++}}},_daySlotGroups:function(e,t){var i;(i=this._isVerticallyGrouped()?this.element.find(".k-scheduler-header-all-day"):this.element.find(".k-scheduler-header-all-day tr")).attr("role","row");for(var n=0;n<e;n++){var r=0;this._isVerticallyGrouped()&&(r=n);var s=this.groups[n].getDaySlotCollection(0),a=i[r].children,l=0;this._isVerticallyGrouped()||(l=n);for(var d=0,c=l*t;c<(l+1)*t;c++){var u=a[c];c%t==0&&(d=0);var h=this._dates[d],f=Date.UTC(h.getFullYear(),h.getMonth(),h.getDate());d++,u.setAttribute("role","gridcell"),u.setAttribute("aria-selected",!1),s.addDaySlot(u,f,f+o.date.MS_PER_DAY)}}},_groups:function(){var e=this._groupCount(),t=this._columnCountInResourceView();this.groups=[];for(var i=0;i<e;i++){for(var n=this._addResourceView(i),r=0;r<t;r++)n.addTimeSlotCollection(this._dates[r],o.date.addDays(this._dates[r],1));this.options.allDaySlot&&n.addDaySlotCollection(this._dates[0],o.date.addDays(this._dates[this._dates.length-1],1))}this._timeSlotGroups(e,t),this.options.allDaySlot&&this._daySlotGroups(e,t)},options:{name:"MultiDayView",selectedDateFormat:"{0:D}",selectedShortDateFormat:"{0:d}",allDaySlot:!0,showWorkHours:!1,title:"",startTime:o.date.today(),endTime:o.date.today(),minorTickCount:2,majorTick:60,majorTimeHeaderTemplate:"#=kendo.toString(date, 't')#",minorTimeHeaderTemplate:"&nbsp;",groupHeaderTemplate:"#=text#",slotTemplate:"&nbsp;",allDaySlotTemplate:"&nbsp;",eventTemplate:b,allDayEventTemplate:k,dateHeaderTemplate:w,editable:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,footer:{command:"workDay"},messages:{allDay:"all day",showFullDay:"Show full day",showWorkDay:"Show business hours"},currentTimeMarker:{updateInterval:1e4,useLocalTimezone:!0}},events:["remove","add","edit"],_templates:function(){var e=this.options,t=c({},o.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,'<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#" #if (resources[0]) { #style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#"#} else {#class="k-event"#}#><span class="k-event-actions"># if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}#</span><span class="k-event-top-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-n"></span># } #</span><span class="k-event-bottom-actions"># if(data.head || data.middle) {#<span class="k-icon k-i-arrow-s"></span># } #</span># if(resizable && !data.tail && !data.middle) {#<span class="k-resize-handle k-resize-n"></span># } ## if(resizable && !data.head && !data.middle) {#<span class="k-resize-handle k-resize-s"></span># } #</div>'),this.allDayEventTemplate=this._eventTmpl(e.allDayEventTemplate,'<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#" #} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head || data.middle) {#<span class="k-icon k-i-arrow-e"></span>#}#</span>#if(resizable && !singleDay && !data.tail && !data.middle){#<span class="k-resize-handle k-resize-w"></span>#}##if(resizable && !singleDay && !data.head && !data.middle){#<span class="k-resize-handle k-resize-e"></span>#}#</div>'),this.majorTimeHeaderTemplate=o.template(e.majorTimeHeaderTemplate,t),this.minorTimeHeaderTemplate=o.template(e.minorTimeHeaderTemplate,t),this.dateHeaderTemplate=o.template(e.dateHeaderTemplate,t),this.slotTemplate=o.template(e.slotTemplate,t),this.allDaySlotTemplate=o.template(e.allDaySlotTemplate,t),this.groupHeaderTemplate=o.template(e.groupHeaderTemplate,t)},_editable:function(){this.options.editable&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+_,".k-event a:has(.k-si-close)",function(i){t.trigger("remove",{uid:e(this).closest(".k-event").attr(o.attr("uid"))}),i.preventDefault()}),!1!==t.options.editable.create&&t.element.on("dblclick"+_,".k-scheduler-content td",function(i){if(!e(this).parent().hasClass("k-scheduler-header-all-day")){var n=t._slotByPosition(i.pageX,i.pageY);if(n){var r=t._resourceBySlot(n);t.trigger("add",{eventInfo:c({start:n.startDate(),end:n.endDate()},r)})}i.preventDefault()}}).on("dblclick"+_,".k-scheduler-header-all-day td",function(e){var i=t._slotByPosition(e.pageX,e.pageY);if(i){var n=t._resourceBySlot(i);t.trigger("add",{eventInfo:c({},{isAllDay:!0,start:o.date.getDate(i.startDate()),end:o.date.getDate(i.startDate())},n)})}e.preventDefault()}),!1!==t.options.editable.update&&t.element.on("dblclick"+_,".k-event",function(i){t.trigger("edit",{uid:e(this).closest(".k-event").attr(o.attr("uid"))}),i.preventDefault()})},_touchEditable:function(){var t=this,i=0;o.support.mobileOS.android&&(i=5),!1!==t.options.editable.create&&(t._addUserEvents=new o.UserEvents(t.element,{threshold:i,filter:".k-scheduler-content td",tap:function(i){if(!e(i.target).parent().hasClass("k-scheduler-header-all-day")){var n=void 0!==i.x.location?i.x.location:i.x,r=void 0!==i.y.location?i.y.location:i.y,s=t._slotByPosition(n,r);if(s){var o=t._resourceBySlot(s);t.trigger("add",{eventInfo:c({start:s.startDate(),end:s.endDate()},o)})}i.preventDefault()}}}),t._allDayUserEvents=new o.UserEvents(t.element,{threshold:i,filter:".k-scheduler-header-all-day td",tap:function(e){var i=void 0!==e.x.location?e.x.location:e.x,n=void 0!==e.y.location?e.y.location:e.y,r=t._slotByPosition(i,n);if(r){var s=t._resourceBySlot(r);t.trigger("add",{eventInfo:c({},{isAllDay:!0,start:o.date.getDate(r.startDate()),end:o.date.getDate(r.startDate())},s)})}e.preventDefault()}})),!1!==t.options.editable.update&&(t._editUserEvents=new o.UserEvents(t.element,{threshold:i,filter:".k-event",tap:function(i){var n=e(i.target).closest(".k-event");n.hasClass("k-event-active")||t.trigger("edit",{uid:n.attr(o.attr("uid"))}),i.preventDefault()}}))},_layout:function(e){for(var t=[],i=[],n=this.options,r=this,s=0;s<e.length;s++){var a={};a.text=r.dateHeaderTemplate({date:e[s]}),o.date.isToday(e[s])&&(a.className="k-today"),t.push(a)}var l=this.groupedResources;return n.allDaySlot&&i.push({text:n.messages.allDay,allDay:!0,cellContent:function(t){var i=t;return t=l.length&&"vertical"!==r._groupOrientation()?t%e.length:t,r.allDaySlotTemplate({date:e[t],resources:function(){return r._resourceBySlot({groupIndex:i})}})}}),this._forTimeRange(this.startTime(),this.endTime(),function(e,t,n,s){var o={text:(t?r.majorTimeHeaderTemplate:r.minorTimeHeaderTemplate)({date:e}),className:s?"k-slot-cell":""};i.push(o)}),l.length&&("vertical"===this._groupOrientation()?i=this._createRowsLayout(l,i,this.groupHeaderTemplate):t=this._createColumnsLayout(l,t,this.groupHeaderTemplate)),{columns:t,rows:i}},_footer:function(){var t=this.options;if(!1!==t.footer){var i='<div class="k-header k-scheduler-footer">',n=t.footer.command;n&&"workDay"===n?(i+='<ul class="k-reset k-header">',i+='<li class="k-state-default k-scheduler-fullday"><a href="#" class="k-link"><span class="k-icon k-i-clock"></span>',i+=(t.showWorkHours?t.messages.showFullDay:t.messages.showWorkDay)+"</a></li>",i+="</ul>"):i+="&nbsp;",i+="</div>",this.footer=e(i).appendTo(this.element);var r=this;this.footer.on("click"+_,".k-scheduler-fullday",function(e){e.preventDefault(),r.trigger("navigate",{view:r.name||t.name,date:r.startDate(),isWorkDay:!t.showWorkHours})})}},_forTimeRange:function(e,t,n,r){e=i(e),t=i(t);var s,o,a=v(e),d=v(t),c=this.options.minorTickCount,u=this.options.majorTick*f,h=u/c||1,m=new Date(+e),g=m.getDate(),_=0,b="";for(o=p/h,a!=d&&(a>d&&(d+=p),o=(d-a)/h),o=Math.round(o);_<o;_++){var k=_%(u/h);b+=n(m,0===k,k<c-1,k===c-1),l(m,h,!1)}return d&&(s=v(m),g<m.getDate()&&(s+=p),s>d&&(m=new Date(+t))),r&&(b+=r(m)),b},_content:function(e){var t,i=this,n=i.options,r=i.startTime(),s=this.endTime(),a=1,l=1,d=e.length,c="",u=this.groupedResources,h=this.slotTemplate,f=this.allDaySlotTemplate,p=!1;u.length&&((p="vertical"===i._groupOrientation())?(l=this._rowCountForLevel(this.rowLevels.length-2),n.allDaySlot&&(t=function(t){for(var n='<tr class="k-scheduler-header-all-day">',r=function(){return i._resourceBySlot({groupIndex:t})},s=0,o=e.length;s<o;s++)n+="<td>"+f({date:e[s],resources:r})+"</td>";return n+"</tr>"})):a=this._columnCountForLevel(this.columnLevels.length-2)),c+="<tbody>";for(var m=function(t,n){var r,s,l,c="",u="",f=0;c="<tr"+(n?' class="k-middle-row"':"")+">";for(var m=function(e){return function(){return i._resourceBySlot({groupIndex:e})}};f<a;f++)for(r=0,s=d;r<s;r++)u="",o.date.isToday(e[r])&&(u+="k-today"),(o.date.getMilliseconds(t)<o.date.getMilliseconds(i.options.workDayStart)||o.date.getMilliseconds(t)>=o.date.getMilliseconds(i.options.workDayEnd)||!i._isWorkDay(e[r]))&&(u+=" k-nonwork-hour"),c+="<td"+(""!==u?' class="'+u+'"':"")+">",l=o.date.getDate(e[r]),o.date.setTime(l,o.date.getMilliseconds(t)),c+=h({date:l,resources:m(p?g:f)}),c+="</td>";return c+="</tr>"},g=0;g<l;g++)c+=t?t(g):"",c+=this._forTimeRange(r,s,m);c+="</tbody>",this.content.find("table").append(c)},_isWorkDay:function(e){for(var t=e.getDay(),i=this._workDays,n=0;n<i.length;n++)if(i[n]===t)return!0;return!1},_render:function(t){var i=this;t=t||[],this._dates=t,this._startDate=t[0],this._endDate=t[t.length-1||0],this.createLayout(this._layout(t)),this._content(t),this._footer(),this.refreshLayout();var n=this.element.find(".k-scheduler-header-all-day td");n.length&&(this._allDayHeaderHeight=n.first()[0].clientHeight),i.datesHeader.on("click"+_,".k-nav-day",function(t){var n=e(t.currentTarget).closest("th"),r=n.offset(),s=i._slotByPosition(r.left,r.top+n.outerHeight());i.trigger("navigate",{view:"day",date:s.startDate()})})},startTime:function(){var e=this.options;return e.showWorkHours?e.workDayStart:e.startTime},endTime:function(){var e=this.options;return e.showWorkHours?e.workDayEnd:e.endTime},startDate:function(){return this._startDate},endDate:function(){return this._endDate},_end:function(e){var t=v(this.endTime())||p;return e&&(t=0),new Date(this._endDate.getTime()+t)},nextDate:function(){return o.date.nextDay(this.endDate())},previousDate:function(){return o.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},destroy:function(){this._currentTimeUpdateTimer&&clearInterval(this._currentTimeUpdateTimer),this.datesHeader&&this.datesHeader.off(_),this.element&&this.element.off(_),this.footer&&this.footer.remove(),d.fn.destroy.call(this),this._isMobile()&&this.options.editable&&(!1!==this.options.editable.create&&(this._addUserEvents.destroy(),this._allDayUserEvents.destroy()),!1!==this.options.editable.update&&this._editUserEvents.destroy())},inRange:function(e){var t=d.fn.inRange.call(this,e),i=v(this.startTime()),n=v(this.endTime())||o.date.MS_PER_DAY,r=v(e.start),s=v(e.end)||o.date.MS_PER_DAY;return t&&i<=r&&s<=n},selectionByElement:function(e){var t=e.offset();return this._slotByPosition(t.left,t.top)},_timeSlotInterval:function(){var e=this.options;return e.majorTick/e.minorTickCount*f},_timeSlotIndex:function(e){var t=this.options;return(v(e)-v(this.startTime()))/(t.majorTick/t.minorTickCount*f)},_slotIndex:function(e,t){return t?this._dateSlotIndex(e):this._timeSlotIndex(e)},_dateSlotIndex:function(e,t){var i,r,s,a,l=this._dates||[];for(i=0,r=l.length;i<r;i++)if(s=o.date.getDate(l[i]),a=new Date(o.date.getDate(l[i]).getTime()+p-(t?0:1)),n(e,s,a))return 1*i;return-1},_positionAllDayEvent:function(t,i){var n=i.innerWidth(),r=i.start.index,s=i.end.index,o=d.collidingEvents(i.events(),r,s),a=this._headerColumnCount||0,l=r!==s?5:4,c=this._allDayHeaderHeight,u=i.startSlot();t.css({left:u.offsetLeft+2,width:n-l}),i.addEvent({slotIndex:r,start:r,end:s,element:t}),o.push({slotIndex:r,start:r,end:s,element:t});var h=d.createRows(o);h.length&&h.length>a&&(this._headerColumnCount=h.length);for(var f=i.start.offsetTop,p=0,m=h.length;p<m;p++)for(var g=h[p].events,v=0,_=g.length;v<_;v++)e(g[v].element).css({top:f+p*c})},_arrangeColumns:function(e,t,i,n){var r=n.start;e={element:e,slotIndex:r.index,start:t,end:t+i};var s,o,a=r.clientWidth,l=.1*a,c=n.events(),u=d.collidingEvents(c,e.start,e.end);n.addEvent(e),u.push(e);for(var h=(a-l)/(s=d.createColumns(u)).length,f=0,p=s.length;f<p;f++)for(var m=0,g=(o=s[f].events).length;m<g;m++)o[m].element[0].style.width=h-4+"px",o[m].element[0].style.left=(this._isRtl?l:0)+r.offsetLeft+f*h+2+"px"},_positionEvent:function(e,t,i){var n=e._startTime||e.start,r=e._endTime||e.end,s=i.innerRect(n,r,!1),o=s.bottom-s.top-2;o<0&&(o=0),t.css({top:s.top,height:o}),this._arrangeColumns(t,s.top,t[0].clientHeight,i)},_createEventElement:function(t,i,r,s){var a,l=i?this.eventTemplate:this.allDayEventTemplate,d=this.options.editable,u=this._isMobile(),f=d&&!1!==d.destroy&&!u,m=d&&!1!==d.resize,g=h(this.startDate()),_=h(this.endDate()),b=v(this.startTime()),k=v(this.endTime()),w=t._time("start"),y=t._time("end");b>=k&&(k=v(new Date(this.endTime().getTime()+p-1))),i||t.isAllDay||(_=new Date(_.getTime()+p));var x=t.start,C=t.end;t.isAllDay&&(C=h(t.end)),!n(h(x),g,_)&&!n(C,g,_)||i&&w<b&&y>k?a=!0:h(x)<g||i&&w<b?s=!0:(C>_&&!i||i&&y>k)&&(r=!0);var S=this.eventResources(t);t._startTime&&w!==o.date.getMilliseconds(t.start)&&(x=new Date(w),x=o.timezone.apply(x,"Etc/UTC")),t._endTime&&y!==o.date.getMilliseconds(t.end)&&(C=new Date(y),C=o.timezone.apply(C,"Etc/UTC"));var T=c({},{ns:o.ns,resizable:m,showDelete:f,middle:a,head:r,tail:s,singleDay:1==this._dates.length,resources:S,inverseColor:!(!S||!S[0])&&this._shouldInverseResourceColor(S[0])},t,{start:x,end:C}),D=e(l(T));return this.angular("compile",function(){return{elements:D,data:[{dataItem:T}]}}),D},_isInTimeSlot:function(e){var t=this.startTime(),i=this.endTime(),n=e._startTime||e.start,s=e._endTime||e.end;if(v(i)===v(o.date.getDate(i))&&(i=o.date.getDate(i),l(i,p-1)),e._date("end")>e._date("start")&&(s=+e._date("end")+(p-1)),s-=e._date("end"),n-=e._date("start"),i=v(i),(t=v(t))===n&&n===s)return!0;var a=n!==i;return r(n,t,i,a)||r(s,t,i,a)||r(t,n,s)||r(i,n,s)},_isInDateSlot:function(e){var t=this.groups[0],i=t.firstSlot().start,r=t.lastSlot().end-1,s=o.date.toUtcTime(e.start),a=o.date.toUtcTime(e.end);return(n(s,i,r)||n(a,i,r)||n(i,s,a)||n(r,s,a))&&(!n(a,i,i)||n(a,s,s)||e.isAllDay)},_updateAllDayHeaderHeight:function(e){if(this._height!==e){this._height=e;var t=this.element.find(".k-scheduler-header-all-day td");if(t.length){t.parent().add(this.element.find(".k-scheduler-times-all-day").parent()).height(e);for(var i=0;i<this.groups.length;i++)this.groups[i].refresh()}}},_renderEvents:function(e,t){var i,n,r,o=this.datesHeader.find(".k-scheduler-header-wrap > div");for(n=0,r=e.length;n<r;n++)if(i=e[n],this._isInDateSlot(i)){var a,l,d,c=i.isAllDay||i.end.getTime()-i.start.getTime()>=p,u=c&&!this._isVerticallyGrouped()?o:this.content;if(c)this.options.allDaySlot&&((d=this.groups[t])._continuousEvents||(d._continuousEvents=[]),(l=d.slotRanges(i)).length&&(a=this._createEventElement(i,!c),this._positionAllDayEvent(a,l[0]),s(d,l[0],a,!0),a.appendTo(u)));else if(this._isInTimeSlot(i)){(d=this.groups[t])._continuousEvents||(d._continuousEvents=[]);for(var h=(l=d.slotRanges(i)).length,f=0;f<h;f++){var m=l[f],g=i.start,v=i.end;h>1&&(0===f?v=m.end.endDate():f==h-1?g=m.start.startDate():(g=m.start.startDate(),v=m.end.endDate()));var _=i.clone({start:g,end:v,_startTime:i._startTime,_endTime:i.endTime});if(this._isInTimeSlot(_)){var b=m.head;(a=this._createEventElement(i,!c,b,m.tail)).appendTo(u),this._positionEvent(_,a,m),s(d,m,a,!1)}}}}},render:function(t){this._headerColumnCount=0,this._groups(),this.element.find(".k-event").remove(),t=new o.data.Query(t).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray();var i=[];this._eventsByResource(t,this.groupedResources,i);var r=e.map(this._dates,function(t){return Math.max.apply(null,e.map(i,function(i){return e.grep(i,function(e){return e.isMultiDay()&&n(t,h(e.start),h(e.end))}).length}))}),s=Math.max.apply(null,r);this._updateAllDayHeaderHeight((s+1)*this._allDayHeaderHeight);for(var a=0;a<i.length;a++)this._renderEvents(i[a],a);this.refreshLayout(),this.trigger("activate")},_eventsByResource:function(e,t,i){var n=t[0];if(n)for(var r=n.dataSource.view(),s=0;s<r.length;s++){var a=this._resourceValue(n,r[s]),l=new o.data.Query(e).filter({field:n.field,operator:d.groupEqFilter(a)}).toArray();t.length>1?this._eventsByResource(l,t.slice(1),i):i.push(l)}else i.push(e)},_columnOffsetForResource:function(e){return this._columnCountForLevel(e)/this._columnCountForLevel(e-1)},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},clearSelection:function(){this.content.add(this.datesHeader).find(".k-state-selected").removeAttr("id").attr("aria-selected",!1).removeClass("k-state-selected")},_updateDirection:function(e,t,i,n,r){var s=e.isAllDay,o=t[0].start,a=t[t.length-1].end;i&&(r?s||o.index!==a.index||o.collectionIndex!==a.collectionIndex||(e.backward=n):(s&&o.index===a.index||!s&&o.collectionIndex===a.collectionIndex)&&(e.backward=n))},_changeViewPeriod:function(e,t,i){if(!i){var n=t?this.previousDate():this.nextDate(),r=e.start,s=e.end;e.start=new Date(n),e.end=new Date(n);var o=e.isAllDay?p:v(s);return l(e.start,v(r)),l(e.end,o),this._isVerticallyGrouped()||(e.groupIndex=t?this.groups.length-1:0),e.events=[],!0}}});c(!0,a,{MultiDayView:y,DayView:y.extend({options:{name:"DayView",title:"Day"},name:"day"}),WeekView:y.extend({options:{name:"WeekView",title:"Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}"},name:"week",calculateDateRange:function(){var e,t=this.options.date,i=o.date.dayOfWeek(t,this.calendarInfo().firstDay,-1),n=[];for(e=0;e<7;e++)n.push(i),i=o.date.nextDay(i);this._render(n)}}),WorkWeekView:y.extend({options:{name:"WorkWeekView",title:"Work Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}"},name:"workWeek",nextDate:function(){return o.date.dayOfWeek(o.date.nextDay(this.startDate()),this.calendarInfo().firstDay,1)},previousDate:function(){var e=o.date.dayOfWeek(this.startDate(),this.calendarInfo().firstDay,-1);return o.date.previousDay(e)},calculateDateRange:function(){for(var e=this.options.date,t=o.date.dayOfWeek,i=t(t(e,this.calendarInfo().firstDay,-1),this.options.workWeekStart,1),n=t(i,this.options.workWeekEnd,1),r=[];i<=n;)r.push(i),i=o.date.nextDay(i);this._render(r)}})})}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.scheduler.agendaview",["kendo.scheduler.view"],function(){return function(e){function t(e){for(var t=[].concat(e),i=t.shift(),n=[],r=[].push;i;)i.groups?r.apply(t,i.groups):i.items?r.apply(t,i.items):r.call(n,i),i=t.shift();return n}var i=window.kendo,n=i.ui,r=".kendoAgendaView";n.AgendaView=n.SchedulerView.extend({init:function(t,s){n.SchedulerView.fn.init.call(this,t,s),(s=this.options).editable&&(s.editable=e.extend({delete:!0},s.editable,{create:!1,update:!1})),this.title=s.title,this._eventTemplate=this._eventTmpl(s.eventTemplate,'<div class="k-task" title="#:title.replace(/"/g,"\'")#" data-#=kendo.ns#uid="#=uid#"># if (resources[0]) {#<span class="k-scheduler-mark" style="background-color:#=resources[0].color#"></span># } ## if (data.isException()) { #<span class="k-icon k-i-exception"></span># } else if (data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #{0}#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}#</div>'),this._dateTemplate=i.template(s.eventDateTemplate),this._groupTemplate=i.template(s.eventGroupTemplate),this._timeTemplate=i.template(s.eventTimeTemplate),this.element.on("mouseenter"+r,".k-scheduler-agenda .k-scheduler-content tr","_mouseenter").on("mouseleave"+r,".k-scheduler-agenda .k-scheduler-content tr","_mouseleave").on("click"+r,".k-scheduler-agenda .k-scheduler-content .k-link:has(.k-si-close)","_remove"),this._renderLayout(s.date)},name:"agenda",_mouseenter:function(t){e(t.currentTarget).addClass("k-state-hover")},_mouseleave:function(t){e(t.currentTarget).removeClass("k-state-hover")},_remove:function(t){t.preventDefault(),this.trigger("remove",{uid:e(t.currentTarget).closest(".k-task").attr(i.attr("uid"))})},nextDate:function(){return i.date.nextDay(this.startDate())},startDate:function(){return this._startDate},endDate:function(){return this._endDate},previousDate:function(){return i.date.previousDay(this.startDate())},_renderLayout:function(e){this._startDate=e,this._endDate=i.date.addDays(e,7),this.createLayout(this._layout()),this.table.addClass("k-scheduler-agenda")},_layout:function(){var e=[{text:this.options.messages.time,className:"k-scheduler-timecolumn"},{text:this.options.messages.event}];this._isMobilePhoneView()||e.splice(0,0,{text:this.options.messages.date,className:"k-scheduler-datecolumn"});var t=this.groupedResources;if(t.length){for(var i=[],n=0;n<t.length;n++)i.push({text:"",className:"k-scheduler-groupcolumn"});e=i.concat(e)}return{columns:e}},_tasks:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],s=r.start,o=r.end,a=Math.ceil((o-i.date.getDate(s))/i.date.MS_PER_DAY),l=r.clone();if(l.startDate=i.date.getDate(s),l.startDate>=this.startDate()&&t.push(l),a>1){l.end=i.date.nextDay(s),l.head=!0;for(var d=1;d<a;d++)s=l.end,(l=r.clone()).start=s,l.startDate=i.date.getDate(s),l.end=i.date.nextDay(s),d==a-1?(l.end=new Date(l.start.getFullYear(),l.start.getMonth(),l.start.getDate(),o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()),l.tail=!0):(l.isAllDay=!0,l.middle=!0),(i.date.getDate(l.end)<=this.endDate()&&l.start>=this.startDate()||i.date.getDate(l.start).getTime()==this.endDate().getTime())&&t.push(l)}}return new i.data.Query(t).sort([{field:"start",dir:"asc"},{field:"end",dir:"asc"}]).groupBy({field:"startDate"}).toArray()},_renderTaskGroups:function(e,t){for(var n=[],r=this.options.editable,s=r&&!1!==r.destroy&&!this._isMobile(),o=this._isMobilePhoneView(),a=0;a<e.length;a++)for(var l=e[a].value,d=e[a].items,c=i.date.isToday(l),u=0;u<d.length;u++){var h=d[u],f=[],p=o?[]:f;if(0===a&&0===u&&t.length)for(var m=0;m<t.length;m++)p.push(i.format('<td class="k-scheduler-groupcolumn{2}" rowspan="{0}">{1}</td>',t[m].rowSpan,this._groupTemplate({value:t[m].text}),t[m].className));0===u&&(o?(p.push(i.format('<td class="k-scheduler-datecolumn" colspan="2">{0}</td>',this._dateTemplate({date:l}))),n.push('<tr role="row" aria-selected="false"'+(c?' class="k-today">':">")+p.join("")+"</tr>")):f.push(i.format('<td class="k-scheduler-datecolumn{3}{2}" rowspan="{0}">{1}</td>',d.length,this._dateTemplate({date:l}),a!=e.length-1||t.length?"":" k-last",t.length?"":" k-first"))),h.head?h.format="{0:t}":h.tail?h.format="{1:t}":h.format="{0:t}-{1:t}",h.resources=this.eventResources(h),f.push(i.format('<td class="k-scheduler-timecolumn"><div>{0}{1}{2}</div></td><td>{3}</td>',h.tail||h.middle?'<span class="k-icon k-i-arrow-w"></span>':"",this._timeTemplate(h.clone({start:h._startTime||h.start,end:h.endTime||h.end})),h.head||h.middle?'<span class="k-icon k-i-arrow-e"></span>':"",this._eventTemplate(h.clone({showDelete:s})))),n.push('<tr role="row" aria-selected="false"'+(c?' class="k-today">':">")+f.join("")+"</tr>")}return n.join("")},render:function(e){var i=this.content.find("table").empty(),n=[];if(e.length>0){var r=this.groupedResources;r.length?(n=this._createGroupConfiguration(e,r,null),this._renderGroups(n,i,[])):(n=this._tasks(e),i.append(this._renderTaskGroups(n,[])))}var s=this._eventsList=function(e){for(var i,n=0,r=e.length,s=[];n<r;n++)(i=e[n]).groups?(i=t(i.groups),s=s.concat(i)):s=s.concat(t(i.items));return s}(n);this._angularItems(i,s),this.refreshLayout(),this.trigger("activate")},_angularItems:function(e,t){this.angular("compile",function(){var n=[];return{elements:t.map(function(t){return n.push({dataItem:t}),e.find(".k-task["+i.attr("uid")+"="+t.uid+"]")}),data:n}})},_renderGroups:function(e,t,i){for(var n=0,r=e.length;n<r;n++){var s=i.splice(0);s.push(e[n]),e[n].groups?this._renderGroups(e[n].groups,t,s):t.append(this._renderTaskGroups(e[n].items,s))}},_createGroupConfiguration:function(e,t,r){for(var s=t[0],o=[],a=s.dataSource.view(),l=this._isMobilePhoneView(),d=0;d<a.length;d++){var c=function(e,t){return e.valuePrimitive&&(t=i.getter(e.dataValueField)(t)),t}(s,a[d]),u=new i.data.Query(e).filter({field:s.field,operator:n.SchedulerView.groupEqFilter(c)}).toArray();if(u.length){var h=this._tasks(u),f=r?"":" k-first";d===a.length-1&&(!r||r.className.indexOf("k-last")>-1)&&(f+=" k-last");var p={text:i.getter(s.dataTextField)(a[d]),value:c,rowSpan:0,className:f};if(t.length>1)p.groups=this._createGroupConfiguration(u,t.slice(1),p),r&&(r.rowSpan+=p.rowSpan);else{p.items=h;var m=function(e){for(var t=0,i=0,n=e.length;i<n;i++)t+=e[i].items.length;return t}(p.items);l&&(m+=p.items.length),p.rowSpan=m,r&&(r.rowSpan+=m)}o.push(p)}}return o},selectionByElement:function(t){var i,n;if(!(t=e(t)).hasClass("k-scheduler-datecolumn")&&this._eventsList.length){if(t.is(".k-task")&&(t=t.closest("td")),this._isMobile()){var r=t.parent();i=r.parent().children().filter(function(){return e(this).children(":not(.k-scheduler-datecolumn)").length}).index(r)}else i=t.parent().index();return n=this._eventsList[i],{index:i,start:n.start,end:n.end,isAllDay:n.isAllDay,uid:n.uid}}},select:function(e){this.clearSelection();var t=this.table.find(".k-task").eq(e.index).closest("tr").addClass("k-state-selected").attr("aria-selected",!0)[0];this.current(t)},move:function(e,t){var n=!1,r=e.index;if(t==i.keys.UP?(r--,n=!0):t==i.keys.DOWN&&(r++,n=!0),n){var s=this._eventsList[r];s&&(e.start=s.start,e.end=s.end,e.isAllDay=s.isAllDay,e.events=[s.uid],e.index=r)}return n},moveToEvent:function(){return!1},constrainSelection:function(e){var t=this._eventsList[0];t&&(e.start=t.start,e.end=t.end,e.isAllDay=t.isAllDay,e.events=[t.uid],e.index=0)},isInRange:function(){return!0},destroy:function(){this.element&&this.element.off(r),n.SchedulerView.fn.destroy.call(this)},options:{title:"Agenda",name:"agenda",editable:!0,selectedDateFormat:"{0:D}-{1:D}",selectedShortDateFormat:"{0:d} - {1:d}",eventTemplate:"#:title#",eventTimeTemplate:"#if(data.isAllDay) {##=this.options.messages.allDay##} else { ##=kendo.format(format, start, end)## } #",eventDateTemplate:'<strong class="k-scheduler-agendaday">#=kendo.toString(date, "dd")#</strong><em class="k-scheduler-agendaweek">#=kendo.toString(date,"dddd")#</em><span class="k-scheduler-agendadate">#=kendo.toString(date, "y")#</span>',eventGroupTemplate:'<strong class="k-scheduler-adgendagroup">#=value#</strong>',messages:{event:"Event",date:"Date",time:"Time",allDay:"all day"}}})}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.scheduler.monthview",["kendo.scheduler.view"],function(){return function(e){function t(e,t,i){var n;return(n=e)>=t&&n<=i}var i=window.kendo,n=i.ui,r=n.SchedulerView,s=".kendoMonthView",o=e.extend,a=i.date.getDate,l=i.date.MS_PER_DAY,d=i.template('<span class="k-link k-nav-day">#:kendo.toString(date, "dd")#</span>'),c=i.template('<div title="#=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template">#:title#</div></div>'),u=i.template('<div style="width:#=width#px;left:#=left#px;top:#=top#px" class="k-more-events k-button"><span>...</span></div>');n.MonthView=r.extend({init:function(e,t){r.fn.init.call(this,e,t),this.title=this.options.title,this._templates(),this._editable(),this._renderLayout(this.options.date),this._groups()},name:"month",_updateDirection:function(e,t,i,n,r){if(i){var s=t[0].start,o=t[t.length-1].end,a=s.index===o.index,l=s.collectionIndex===o.collectionIndex;(r?a&&l||l:a&&l)&&(e.backward=n)}},_changeViewPeriod:function(e,t,n){var r=n?7:1;return t&&(r*=-1),e.start=i.date.addDays(e.start,r),e.end=i.date.addDays(e.end,r),(!n||n&&this._isVerticallyGrouped())&&(e.groupIndex=t?this.groups.length-1:0),e.events=[],!0},_continuousSlot:function(e,t,i){var n=e.backward?0:t.length-1;return this.groups[e.groupIndex].continuousSlot(t[n].start,i)},_changeGroupContinuously:function(e,t,i,n){if(!i){var r=e.groupIndex,s=this.groups.length-1,o=this._isVerticallyGrouped(),a=this.groups[r];!t&&o?(t=a[n?"lastSlot":"firstSlot"](),r+=n?-1:1):t&&!o&&(r=n?s:0),(r<0||r>s)&&(r=n?s:0,t=null),e.groupIndex=r}return t},_normalizeHorizontalSelection:function(e,t,i){return i?t[0].start:t[t.length-1].end},_normalizeVerticalSelection:function(e,t){return e.backward?t[0].start:t[t.length-1].end},_templates:function(){var e=this.options,t=o({},i.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,'<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#"#} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span>#}#</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head || data.middle) {#<span class="k-icon k-i-arrow-e"></span>#}#</span># if(resizable && !data.tail && !data.middle) {#<span class="k-resize-handle k-resize-w"></span>#}## if(resizable && !data.head && !data.middle) {#<span class="k-resize-handle k-resize-e"></span>#}#</div>'),this.dayTemplate=i.template(e.dayTemplate,t),this.groupHeaderTemplate=i.template(e.groupHeaderTemplate,t)},dateForTitle:function(){return i.format(this.options.selectedDateFormat,this._firstDayOfMonth,this._lastDayOfMonth)},shortDateForTitle:function(){return i.format(this.options.selectedShortDateFormat,this._firstDayOfMonth,this._lastDayOfMonth)},nextDate:function(){return i.date.nextDay(this._lastDayOfMonth)},previousDate:function(){return i.date.previousDay(this._firstDayOfMonth)},startDate:function(){return this._startDate},endDate:function(){return this._endDate},_renderLayout:function(t){var n=this;this._firstDayOfMonth=i.date.firstDayOfMonth(t),this._lastDayOfMonth=i.date.lastDayOfMonth(t),this._startDate=function(e,t){for(var n=t.firstDay,r=new Date(e.getFullYear(),e.getMonth(),0,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());r.getDay()!=n;)i.date.setTime(r,-1*l);return r}(t,this.calendarInfo()),this.createLayout(this._layout()),this._content(),this.refreshLayout(),this.content.on("click"+s,".k-nav-day,.k-more-events",function(t){var i=e(t.currentTarget).offset(),r=n._slotByPosition(i.left,i.top);t.preventDefault(),n.trigger("navigate",{view:"day",date:r.startDate()})})},_editable:function(){this.options.editable&&!this._isMobilePhoneView()&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+s,".k-scheduler-monthview .k-event a:has(.k-si-close)",function(n){t.trigger("remove",{uid:e(this).closest(".k-event").attr(i.attr("uid"))}),n.preventDefault()}),!1!==t.options.editable.create&&t.element.on("dblclick"+s,".k-scheduler-monthview .k-scheduler-content td",function(i){var n=e(i.currentTarget).offset(),r=t._slotByPosition(n.left,n.top);if(r){var s=t._resourceBySlot(r);t.trigger("add",{eventInfo:o({isAllDay:!0,start:r.startDate(),end:r.startDate()},s)})}i.preventDefault()}),!1!==t.options.editable.update&&t.element.on("dblclick"+s,".k-scheduler-monthview .k-event",function(n){t.trigger("edit",{uid:e(this).closest(".k-event").attr(i.attr("uid"))}),n.preventDefault()})},_touchEditable:function(){var t=this,n=0;i.support.mobileOS.android&&(n=5),!1!==t.options.editable.create&&(t._addUserEvents=new i.UserEvents(t.element,{threshold:n,filter:".k-scheduler-monthview .k-scheduler-content td",tap:function(i){var n=e(i.target).offset(),r=t._slotByPosition(n.left,n.top);if(r){var s=t._resourceBySlot(r);t.trigger("add",{eventInfo:o({isAllDay:!0,start:r.startDate(),end:r.startDate()},s)})}i.preventDefault()}})),!1!==t.options.editable.update&&(t._editUserEvents=new i.UserEvents(t.element,{threshold:n,filter:".k-scheduler-monthview .k-event",tap:function(n){0===e(n.event.target).closest("a:has(.k-si-close)").length&&(t.trigger("edit",{uid:e(n.target).closest(".k-event").attr(i.attr("uid"))}),n.preventDefault())}}))},selectionByElement:function(t){var i=e(t).offset();return this._slotByPosition(i.left,i.top)},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},_content:function(){var e="<tbody>",t=1,i=this.groupedResources;i.length&&this._isVerticallyGrouped()&&(t=this._rowCountForLevel(i.length-1));for(var n=0;n<t;n++)e+=this._createCalendar(n);e+="</tbody>",this.content.find("table").html(e)},_createCalendar:function(e){var t=this.startDate(),n=[t],r="",s=1,o=this._isVerticallyGrouped(),a=this.groupedResources;a.length&&(o||(s=this._columnCountForLevel(a.length-1))),this._slotIndices={};for(var l=0;l<6;l++){r+="<tr>",n.push(t);for(var d=7*l,c=0;c<s;c++)r+=this._createRow(t,d,7,o?e:c);t=i.date.addDays(t,7),r+="</tr>"}return this._weekStartDates=n,this._endDate=i.date.previousDay(t),r},_createRow:function(e,t,n,r){for(var s=this,o=s._firstDayOfMonth,l=s._lastDayOfMonth,d=s.dayTemplate,c="",u="",h=function(){return s._resourceBySlot({groupIndex:r})},f=0;f<n;f++)c="",i.date.isToday(e)&&(c+="k-today"),i.date.isInDateRange(e,o,l)||(c+=" k-other-month"),u+="<td ",""!==c&&(u+='class="'+c+'"'),u+=">",u+=d({date:e,resources:h}),u+="</td>",s._slotIndices[a(e).getTime()]=t+f,e=i.date.nextDay(e);return u},_layout:function(){var t,i=this.calendarInfo(),n=function(e,t){return e.slice(t).concat(e.slice(0,t))}(this._isMobile()?i.days.namesShort:i.days.names,i.firstDay),r=e.map(n,function(e){return{text:e}}),s=this.groupedResources;if(s.length)if(this._isVerticallyGrouped()){for(var o=[],a=0;a<6;a++)o.push({text:"<div>&nbsp;</div>",className:"k-hidden k-slot-cell"});t=this._createRowsLayout(s,o,this.groupHeaderTemplate)}else r=this._createColumnsLayout(s,r,this.groupHeaderTemplate);return{columns:r,rows:t}},_createEventElement:function(t){var n=this.options.editable,r=this._isMobile();t.showDelete=n&&!1!==n.destroy&&!r,t.resizable=n&&!1!==n.resize&&!r,t.ns=i.ns,t.resources=this.eventResources(t),t.inverseColor=!(!t.resources||!t.resources[0])&&this._shouldInverseResourceColor(t.resources[0]);var s=e(this.eventTemplate(t));return this.angular("compile",function(){return{elements:s,data:[{dataItem:t}]}}),s},_isInDateSlot:function(e){var n=this.groups[0],r=n.firstSlot().start,s=n.lastSlot().end-1,o=i.date.toUtcTime(e.start),a=i.date.toUtcTime(e.end);return(t(o,r,s)||t(a,r,s)||t(r,o,a)||t(s,o,a))&&(!t(a,r,r)||t(a,o,o)||e.isAllDay)},_slotIndex:function(e){return this._slotIndices[a(e).getTime()]},_positionMobileEvent:function(t,n,s){var o=t.start;t.start.offsetLeft>t.end.offsetLeft&&(o=t.end);var a=t.start.index,l=a,d=r.collidingEvents(t.events(),a,l);d.push({element:n,start:a,end:l});var c=r.createRows(d),u=t.collection.at(a),h=u.container;h||(h=e(i.format('<div class="k-events-container" style="top:{0};left:{1};width:{2}"/>',o.offsetTop+o.firstChildTop+o.firstChildHeight-3+"px",o.offsetLeft+"px",o.offsetWidth+"px")),u.container=h,this.content[0].appendChild(h[0])),c.length<=3&&(t.addEvent({element:n,start:a,end:l,groupIndex:o.groupIndex}),s._continuousEvents.push({element:n,uid:n.attr(i.attr("uid")),start:t.start,end:t.end}),h[0].appendChild(n[0]))},_positionEvent:function(t,n,s){var o=this.options.eventHeight,a=t.start;t.start.offsetLeft>t.end.offsetLeft&&(a=t.end);var l=t.start.index,d=t.end.index,c=a.eventCount,h=r.collidingEvents(t.events(),l,d),f=l!==d?5:4;h.push({element:n,start:l,end:d});for(var p=r.createRows(h),m=0,g=Math.min(p.length,c);m<g;m++)for(var v=p[m].events,_=a.offsetTop+a.firstChildHeight+m*o+3*m+"px",b=0,k=v.length;b<k;b++)v[b].element[0].style.top=_;if(p.length>c)for(var w=l;w<=d;w++){var y=t.collection.at(w);if(y.more)return;y.more=e(u({ns:i.ns,start:w,end:w,width:y.clientWidth-2,left:y.offsetLeft+2,top:y.offsetTop+y.firstChildHeight+c*o+3*c})),this.content[0].appendChild(y.more[0])}else t.addEvent({element:n,start:l,end:d,groupIndex:a.groupIndex}),n[0].style.width=t.innerWidth()-f+"px",n[0].style.left=a.offsetLeft+2+"px",n[0].style.height=o+"px",s._continuousEvents.push({element:n,uid:n.attr(i.attr("uid")),start:t.start,end:t.end}),n.appendTo(this.content)},_slotByPosition:function(e,t){var i=this.content.offset();e-=i.left,t-=i.top,t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft,e=Math.ceil(e),t=Math.ceil(t);for(var n=0;n<this.groups.length;n++){var r=this.groups[n].daySlotByPosition(e,t);if(r)return r}return null},_createResizeHint:function(e){var t=e.startSlot().offsetLeft,i=e.start.offsetTop,n=e.innerWidth(),s=e.start.clientHeight-2,o=r.fn._createResizeHint.call(this,t,i,n,s);o.appendTo(this.content),this._resizeHint=this._resizeHint.add(o)},_updateResizeHint:function(e,t,n,r){this._removeResizeHint();for(var s=this.groups[t].ranges(n,r,!0,e.isAllDay),o=0;o<s.length;o++)this._createResizeHint(s[o]);this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(i.toString(i.timezone.toLocalDate(n),"M/dd")),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(i.toString(i.timezone.toLocalDate(r),"M/dd"))},_updateMoveHint:function(e,t,n){var r=i.date.toUtcTime(e.start)+n,s=r+e.duration(),o=this.groups[t].ranges(r,s,!0,e.isAllDay);this._removeMoveHint();for(var a=0;a<o.length;a++){var l=o[a],d=l.startSlot(),c=l.endSlot(),u=this._createEventElement(e.clone({head:l.head,tail:l.tail}));u.css({left:d.offsetLeft+2,top:d.offsetTop+d.firstChildHeight,height:this.options.eventHeight,width:l.innerWidth()-(d.index!==c.index?5:4)}),u.addClass("k-event-drag-hint"),u.appendTo(this.content),this._moveHint=this._moveHint.add(u)}},_groups:function(){var e=this._groupCount();this.groups=[];for(var t=0;t<e;t++)this._addResourceView(t);for(var n=this.content[0].getElementsByTagName("tr"),r=this.startDate(),s=0;s<e;s++){var o=0,a=0;this._isVerticallyGrouped()&&(a=s);for(var l=6*a;l<6*(a+1);l++){var d=this.groups[s].addDaySlotCollection(i.date.addDays(r,o),i.date.addDays(this.startDate(),o+7)),c=n[l],u=c.children,h=0;c.setAttribute("role","row"),this._isVerticallyGrouped()||(h=s);for(var f=7*h;f<7*(h+1);f++){var p=u[f],m=p.clientHeight,g=p.children.length?p.children[0].offsetHeight+3:0,v=i.date.addDays(r,o),_=i.date.MS_PER_DAY;r.getHours()!==v.getHours()&&(_+=(r.getHours()-v.getHours())*i.date.MS_PER_HOUR),_+=v=i.date.toUtcTime(v),o++;var b=Math.floor((m-g-this.options.moreButtonHeight)/(this.options.eventHeight+3));p.setAttribute("role","gridcell"),p.setAttribute("aria-selected",!1),d.addDaySlot(p,v,_,b)}}}},render:function(e){this.content.children(".k-event,.k-more-events,.k-events-container").remove(),this._groups(),e=new i.data.Query(e).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray();var t=this.groupedResources;t.length?this._renderGroups(e,t,0,1):this._renderEvents(e,0),this.refreshLayout(),this.trigger("activate")},_renderEvents:function(e,t){var i,n,r,s=this._isMobilePhoneView();for(n=0,r=e.length;n<r;n++)if(i=e[n],this._isInDateSlot(i)){var o=this.groups[t];o._continuousEvents||(o._continuousEvents=[]);for(var a=o.slotRanges(i,!0),l=a.length,d=0;d<l;d++){var c=a[d],u=i.start,h=i.end;l>1&&(0===d?h=c.end.endDate():d==l-1?u=c.start.startDate():(u=c.start.startDate(),h=c.end.endDate()));var f=i.clone({start:u,end:h,head:c.head,tail:c.tail});s?this._positionMobileEvent(c,this._createEventElement(f),o):this._positionEvent(c,this._createEventElement(f),o)}}},_renderGroups:function(e,t,n,s){var o=t[0];if(o)for(var a=o.dataSource.view(),l=0;l<a.length;l++){var d=this._resourceValue(o,a[l]),c=new i.data.Query(e).filter({field:o.field,operator:r.groupEqFilter(d)}).toArray();t.length>1?n=this._renderGroups(c,t.slice(1),n++,s+1):this._renderEvents(c,n++)}return n},_groupCount:function(){var e=this.groupedResources;return e.length?this._isVerticallyGrouped()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length)/this._columnOffsetForResource(e.length):1},_columnOffsetForResource:function(e){return this._columnCountForLevel(e)/this._columnCountForLevel(e-1)},destroy:function(){this.table&&this.table.removeClass("k-scheduler-monthview"),this.content&&this.content.off(s),this.element&&this.element.off(s),r.fn.destroy.call(this),this._isMobile()&&!this._isMobilePhoneView()&&this.options.editable&&(!1!==this.options.editable.create&&this._addUserEvents.destroy(),!1!==this.options.editable.update&&this._editUserEvents.destroy())},events:["remove","add","edit","navigate"],options:{title:"Month",name:"month",eventHeight:25,moreButtonHeight:13,editable:!0,selectedDateFormat:"{0:y}",selectedShortDateFormat:"{0:y}",groupHeaderTemplate:"#=text#",dayTemplate:d,eventTemplate:c}})}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.scheduler.recurrence",["kendo.dropdownlist","kendo.datepicker","kendo.numerictextbox"],function(){return function(e,t){function i(e,t){var i;return 0!==e&&e<t?i=t-e:(i=e%t)&&(i=t-i),i}function n(e){var t=e.getMonth();return(h(e)?P[t]:L[t])+e.getDate()}function r(e,i){var n,r;return e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),H(e,0),n=e.getFullYear(),i!==t?(M(e,i,-1),e.setDate(e.getDate()+4)):e.setDate(e.getDate()+(4-(e.getDay()||7))),H(e,0),r=Math.floor((e.getTime()-new Date(n,0,1,-6))/864e5),1+Math.floor(r/7)}function s(e,t){var i=7-(z(e).getDay()+7-(t||7))||7;return i<0&&(i+=7),Math.ceil((e.getDate()-i)/7)+1}function o(e,t){return e+(e<t?7:0)}function a(e,t,i){var n=t.offset;if(!n)return s(e,i);var r=new Date(e.getFullYear(),e.getMonth()+1,0),a=s(r,i),l=o(t.day,i),d=l<o(new Date(e.getFullYear(),e.getMonth(),1).getDay(),i),c=l>o(r.getDay(),i);return n<0?n=a+(n+1-(c?1:0)):d&&(n+=1),a-=c?1:0,n<(d?1:0)||n>a?null:n}function l(e,t){return s(new Date(e.getFullYear(),e.getMonth()+1,0),t)}function d(e,t,i){for(var n,r=0,s=e.length,o=[];r<s;r++){if(n=e[r],i&&(n=i(n)),t===n)return null;t<n&&o.push(n)}return o}function c(e,t){for(var i,n=0,r=e.length;n<r;n++){if(i=parseInt(e[n],10),isNaN(i)||i<t.start||i>t.end||0===i&&t.start<0)return null;e[n]=i}return e.sort(f)}function u(e){for(var i,n,r,s=0,o=e.length;s<o;s++){if(i=e[s],n=i.length,r=i.substring(n-2).toUpperCase(),(r=V[r])===t)return null;e[s]={offset:parseInt(i.substring(0,n-2),10)||0,day:r}}return e}function h(e){return(e=e.getFullYear())%4==0&&e%100!=0||e%400==0}function f(e,t){return e-t}function p(e,t){var i,n,r=0,s=[];if(e)for(i=(e=e.split(-1!==e.indexOf(";")?";":",")).length;r<i;r++)(n=k(e[r],t))&&s.push(n);return s}function m(t,i,n){for(var r=e.isArray(t)?t:p(t,n),s=i.getTime()-i.getMilliseconds(),o=0,a=r.length;o<a;o++)if(r[o].getTime()===s)return!0;return!1}function g(e,t){var i,n,r=0,s=[].concat(e);for(i=s.length;r<i;r++)n=s[r],n=S.timezone.convert(n,t||n.getTimezoneOffset(),"Etc/UTC"),s[r]=S.toString(n,$);return s.join(",")}function v(e,t){var i=new Date(e);switch(t.freq){case"yearly":i.setFullYear(i.getFullYear(),11,31);break;case"monthly":i.setFullYear(i.getFullYear(),i.getMonth()+1,0);break;case"weekly":M(i,t.weekStart,-1),i.setDate(i.getDate()+6)}return t.hours&&i.setHours(23),t.minutes&&i.setMinutes(59),t.seconds&&i.setSeconds(59),i}function _(e,t,i){for(var n,r,s=e.length,o=[],a=0,l=i.length;a<l;a++)(n=i[a])<0?n=s+n:n-=1,(r=e[n])&&r.start>=t&&o.push(r);return o}function b(e,t,i){for(var n,r=[],s=0;s<e.length;s++)m(t,(n=e[s]).start,i)||r.push(n);return r}function k(e,t){return(e=S.parseDate(e,W))&&t&&(e=T.convert(e,e.getTimezoneOffset(),t)),e}function w(e,t){for(var i,n,r,s,o,a,l=e.split(";"),d=0,c=l.length;d<c;d++)if(i=l[d].split(":"),n=i[0],r=i[1],-1!==n.indexOf("TZID")&&(s=n.substring(n.indexOf("TZID")).split("=")[1]),r)for(o=0,a=(r=r.split(",")).length;o<a;o++)r[o]=k(r[o],s||t);if(r)return{value:r,tzid:s}}function y(i,n){var r,s,o,a,l,d,h,f,p,m={},g=0,v=!1;if(!i)return null;for((d=i.split("\n"))[1]||-1===i.indexOf("DTSTART")&&-1===i.indexOf("DTEND")&&-1===i.indexOf("EXDATE")||(d=i.split(" ")),g=0,o=d.length;g<o;g++)-1!==(l=e.trim(d[g])).indexOf("DTSTART")?m.start=w(l,n):-1!==l.indexOf("DTEND")?m.end=w(l,n):-1!==l.indexOf("EXDATE")?m.exdates=w(l,n):-1!==l.indexOf("RRULE")?a=l.substring(6):e.trim(l)&&(a=l);for(g=0,o=(a=a.split(";")).length;g<o;g++)switch(h=a[g],r=h.split("="),s=e.trim(r[1]).split(","),e.trim(r[0]).toUpperCase()){case"FREQ":m.freq=s[0].toLowerCase();break;case"UNTIL":m.until=k(s[0],n);break;case"COUNT":m.count=parseInt(s[0],10);break;case"INTERVAL":m.interval=parseInt(s[0],10);break;case"BYSECOND":m.seconds=c(s,{start:0,end:60}),v=!0;break;case"BYMINUTE":m.minutes=c(s,{start:0,end:59}),v=!0;break;case"BYHOUR":m.hours=c(s,{start:0,end:23}),v=!0;break;case"BYMONTHDAY":m.monthDays=c(s,{start:-31,end:31}),v=!0;break;case"BYYEARDAY":m.yearDays=c(s,{start:-366,end:366}),v=!0;break;case"BYMONTH":m.months=c(s,{start:1,end:12}),v=!0;break;case"BYDAY":m.weekDays=p=u(s),v=!0;break;case"BYWEEKNO":m.weeks=c(s,{start:-53,end:53}),v=!0;break;case"BYSETPOS":m.positions=c(s,{start:-366,end:366});break;case"WKST":m.weekStart=f=V[s[0]]}return m.freq===t||m.count!==t&&m.until?null:(m.interval||(m.interval=1),f===t&&(m.weekStart=f=S.culture().calendar.firstDay),p&&(m.weekDays=p.sort(function(e,t){var i=e.day,n=t.day;return i<f&&(i+=7),n<f&&(n+=7),i-n})),m.positions&&!v&&(m.positions=null),m._hasRuleValue=v,m)}function x(e,t){for(var i,n=e.value,r=e.tzid||"",s=n.length,o=0;o<s;o++)i=n[o],i=T.convert(i,r||t||i.getTimezoneOffset(),"Etc/UTC"),n[o]=S.toString(i,"yyyyMMddTHHmmssZ");return r&&(r=";TZID="+r),r+":"+n.join(",")+" "}function C(e,i){var n=e.weekStart,r="FREQ="+e.freq.toUpperCase(),s=e.exdates||"",o=e.start||"",a=e.end||"",l=e.until;return e.interval>1&&(r+=";INTERVAL="+e.interval),e.count&&(r+=";COUNT="+e.count),l&&(l=T.convert(l,i||l.getTimezoneOffset(),"Etc/UTC"),r+=";UNTIL="+S.toString(l,"yyyyMMddTHHmmssZ")),e.months&&(r+=";BYMONTH="+e.months),e.weeks&&(r+=";BYWEEKNO="+e.weeks),e.yearDays&&(r+=";BYYEARDAY="+e.yearDays),e.monthDays&&(r+=";BYMONTHDAY="+e.monthDays),e.weekDays&&(r+=";BYDAY="+function(e){for(var t,i,n=0,r=e.length,s=[];n<r;n++)"string"==typeof(t=e[n])?i=t:(i=""+O[t.day],t.offset&&(i=t.offset+i)),s.push(i);return s.toString()}(e.weekDays)),e.hours&&(r+=";BYHOUR="+e.hours),e.minutes&&(r+=";BYMINUTE="+e.minutes),e.seconds&&(r+=";BYSECOND="+e.seconds),e.positions&&(r+=";BYSETPOS="+e.positions),n!==t&&(r+=";WKST="+O[n]),o&&(o="DTSTART"+x(o,i)),a&&(a="DTEND"+x(a,i)),s&&(s="EXDATE"+x(s,i)),(o||a||s)&&(r=o+a+s+"RRULE:"+r),r}var S=window.kendo,T=S.timezone,D=S.Class,F=S.ui,E=F.Widget,R=F.DropDownList,A=S.date,I=A.setTime,M=A.setDayOfWeek,H=A.adjustDST,z=A.firstDayOfMonth,N=A.getMilliseconds,P=[0,31,60,91,121,152,182,213,244,274,305,335,366],L=[0,31,59,90,120,151,181,212,243,273,304,334,365],B=[31,28,30,31,30,31,30,31,30,31,30,31],O={0:"SU",1:"MO",2:"TU",3:"WE",4:"TH",5:"FR",6:"SA"},V={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6},W=["yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-ddTHH","yyyy-MM-dd","yyyyMMddTHHmmssfffzzz","yyyyMMddTHHmmsszzz","yyyyMMddTHHmmss","yyyyMMddTHHmm","yyyyMMddTHH","yyyyMMdd"],U=["months","weeks","yearDays","monthDays","weekDays","hours","minutes","seconds"],q=U.length,$="yyyyMMddTHHmmssZ",j={months:function(e,t,i){var n=i.months,r=d(n,e.getMonth()+1),s=!1;return null!==r&&(r.length?e.setMonth(r[0]-1,1):e.setFullYear(e.getFullYear()+1,n[0]-1,1),s=!0),s},monthDays:function(e,t,i){for(var n,r,s,o=!1,a=e.getHours(),l=function(e){return e<0&&(e=n+e),e};e<=t;){if(r=e.getMonth(),n=function(e){var t=e.getMonth();return 1===t?1===new Date(e.getFullYear(),1,29).getMonth()?29:28:B[t]}(e),null===(s=d(i.monthDays,e.getDate(),l)))return o;if(o=!0,s.length){if(e.setMonth(r,s.sort(f)[0]),H(e,a),r===e.getMonth())break}else e.setMonth(r+1,1)}return o},yearDays:function(e,t,i){for(var r,s,o=!1,a=e.getHours(),l=function(e){return e<0&&(e=r+e),e};e<t;){if(r=h(e)?366:365,null===(s=d(i.yearDays,n(e),l)))return o;if(o=!0,r=e.getFullYear(),s.length){e.setFullYear(r,0,s.sort(f)[0]),H(e,a);break}e.setFullYear(r+1,0,1)}return o},weeks:function(e,t,i){for(var n,s,o,a=i.weekStart,l=!1,c=e.getHours(),u=function(e){return e<0&&(e=53+e),e};e<t;){if(null===(s=d(i.weeks,r(e,a),u)))return l;if(l=!0,n=e.getFullYear(),s.length){o=7*s.sort(f)[0]-1,e.setFullYear(n,0,o),M(e,a,-1),H(e,c);break}e.setFullYear(n+1,0,1)}return l},weekDays:function(e,t,i){var n,r,d=i.weekDays,c=i.weekStart,u=function(e,t,i){for(var n,r,l,d,c=o(t.getDay(),i),u=e.length,h=[],f=0;f<u;f++)if(r=e[f],d=s(t,i),null!==(n=a(t,r,i)))if(d<n)h.push(r);else if(d===n)if(l=o(r.day,i),c<l)h.push(r);else if(c===l)return null;return h}(d,e,c),h=e.getHours();if(null===u)return!1;if((n=u[0])||(n=d[0],M(e,c)),r=n.day,n.offset)for(;e<=t&&!function(e,t,i){return s(e,i)===a(e,t,i)}(e,n,c);)s(e,c)===l(e,c)?(e.setMonth(e.getMonth()+1,1),H(e,h)):(e.setDate(e.getDate()+7),H(e,h),M(e,c,-1));return e.getDay()!==r&&M(e,r),!0},hours:function(e,t,i){var n=i.hours,r=i._startTime,s=r.getHours(),o=d(n,s),a=!1;return null!==o&&(a=!0,e.setHours(s),H(e,s),o.length?(o=o[0],e.setHours(o)):(o=e.getHours(),e.setDate(e.getDate()+1),H(e,o),o=n[0],e.setHours(o),H(e,o)),i.minutes&&e.setMinutes(0),r.setHours(o,e.getMinutes())),a},minutes:function(e,t,i){var n=i.minutes,r=d(n,e.getMinutes()),s=i._startTime.getHours(),o=!1;return null!==r&&(o=!0,r.length?r=r[0]:(s+=1,r=n[0]),i.seconds&&e.setSeconds(0),e.setHours(s,r),H(e,s%=24),i._startTime.setHours(s,r,e.getSeconds())),o},seconds:function(e,t,i){var n=i.seconds,r=i._startTime.getHours(),s=d(n,e.getSeconds()),o=e.getMinutes(),a=!1;return null!==s&&(a=!0,s.length?e.setSeconds(s[0]):(o+=1,e.setMinutes(o,n[0]),o>59&&(o%=60,r=(r+1)%24)),i._startTime.setHours(r,o,e.getSeconds())),a}},G=D.extend({next:function(e,t){var i,n,r=t._startTime,s=r.getDate();if(t.seconds)n=e.getSeconds()+1,e.setSeconds(n),r.setSeconds(n),r.setDate(s);else{if(!t.minutes)return!1;i=e.getMinutes()+1,e.setMinutes(i),r.setMinutes(i),r.setDate(s)}return!0},normalize:function(e){var t=e.rule;4===e.idx&&t.hours&&(t._startTime.setHours(0),this._hour(e.date,t))},limit:function(e,i,n){for(var r,s,o,a,l,d=n.interval;e<=i;){for(o=s=t,l=e.getDate(),a=0;a<q;a++){if(r=U[a],n[r]){if(o=j[r](e,i,n),s!==t&&o)break;s=o}o&&this.normalize({date:e,rule:n,day:l,idx:a})}if((1===d||!this.interval(n,e))&&a===q)break}},interval:function(e,t){var n,s,o=new Date(e._startPeriod),a=new Date(t),l=t.getHours(),d=e.weekStart,c=e.interval,u=e.freq,h=!1,f=0,p=0,m=1;return"hourly"===u?(n=a.getTimezoneOffset()-o.getTimezoneOffset(),s=e._startTime.getHours(),a=a.getTime(),l!==s&&(a+=(s-l)*A.MS_PER_HOUR),a-=o,n&&(a-=n*A.MS_PER_MINUTE),0!==(f=i(n=Math.floor(a/A.MS_PER_HOUR),c))&&(this._hour(t,e,f),h=!0)):"daily"===u?(A.setTime(a,-o,!0),0!==(f=i(n=Math.ceil(a/A.MS_PER_DAY),c))&&(this._date(t,e,f),h=!0)):"weekly"===u?(n=52*(t.getFullYear()-o.getFullYear()),0!==(f=i(f=r(t,d)-r(o,d)+n,c))&&(A.setDayOfWeek(t,e.weekStart,-1),t.setDate(t.getDate()+7*f),H(t,l),h=!0)):"monthly"===u?(n=t.getFullYear()-o.getFullYear(),0!==(f=i(n=t.getMonth()-o.getMonth()+12*n,c))&&(m=e._hasRuleValue?1:t.getDate(),t.setFullYear(t.getFullYear(),t.getMonth()+f,m),H(t,l),h=!0)):"yearly"===u&&(f=i(n=t.getFullYear()-o.getFullYear(),c),e.months||(p=t.getMonth()),e.yearDays||e.monthDays||e.weekDays||(m=t.getDate()),0!==f&&(t.setFullYear(t.getFullYear()+f,p,m),H(t,l),h=!0)),h},_hour:function(e,t,i){var n=t._startTime,r=n.getHours();i&&(r+=i),e.setHours(r),r%=24,n.setHours(r),H(e,r)},_date:function(e,t,i){var n=e.getHours();e.setDate(e.getDate()+i),H(e,n)||this._hour(e,t)}}),Y=G.extend({next:function(e,t){G.fn.next(e,t)||this._hour(e,t,1)},normalize:function(e){var t=e.rule;4===e.idx&&(t._startTime.setHours(0),this._hour(e.date,t))}}),K=G.extend({next:function(e,t){G.fn.next(e,t)||this[t.hours?"_hour":"_date"](e,t,1)}}),Q=K.extend({setup:function(e,t){e.weekDays||(e.weekDays=[{day:t.getDay(),offset:0}])}}),J=G.extend({next:function(e,t){var i,n;if(!G.fn.next(e,t))if(t.hours)this._hour(e,t,1);else if(t.monthDays||t.weekDays||t.yearDays||t.weeks)this._date(e,t,1);else{for(i=e.getDate(),n=e.getHours(),e.setMonth(e.getMonth()+1),H(e,n);e.getDate()!==i;)e.setDate(i),H(e,n);this._hour(e,t)}},normalize:function(e){var t=e.rule,i=e.date,n=i.getHours();0!==e.idx||t.monthDays||t.weekDays?G.fn.normalize(e):(i.setDate(e.day),H(i,n))},setup:function(e,t,i){e.monthDays||e.weekDays||i.setDate(t.getDate())}}),X=J.extend({next:function(e,t){var i,n=e.getHours();if(!G.fn.next(e,t))if(t.hours)this._hour(e,t,1);else if(t.monthDays||t.weekDays||t.yearDays||t.weeks)this._date(e,t,1);else if(t.months){for(i=e.getDate(),e.setMonth(e.getMonth()+1),H(e,n);e.getDate()!==i;)e.setDate(i),H(e,n);this._hour(e,t)}else e.setFullYear(e.getFullYear()+1),H(e,n),this._hour(e,t)},setup:function(){}}),Z={hourly:new Y,daily:new K,weekly:new Q,monthly:new J,yearly:new X};S.recurrence={rule:{parse:y,serialize:C},expand:function(e,i,n,r){var s,o,a,l,d,c,u,h,f,k,w,x,C,S,T,D,F,E,R,H,z,P=y(e.recurrenceRule,r),L=[];if(!P)return[e];for(R=P.positions,H=R?0:1,f=P.start,k=P.end,(f||k)&&(e=e.clone({start:f?new Date(f.value[0]):t,end:k?new Date(k.value[0]):t})),D=e.start,T=D.getTime(),S=N(D),!(C=p(e.recurrenceException,r))[0]&&P.exdates&&(C=P.exdates.value,e.set("recurrenceException",g(C,r))),h=i=new Date(i),n=new Date(n),x=P.freq,E=Z[x],F=P.count,P.until&&P.until<n&&(n=new Date(P.until)),w="yearly"===x||"monthly"===x||"weekly"===x,i<T||F||P.interval>1||w?i=new Date(T):(l=i.getHours(),d=i.getMinutes(),c=i.getSeconds(),P.hours||(l=D.getHours()),P.minutes||(d=D.getMinutes()),P.seconds||(c=D.getSeconds()),i.setHours(l,d,c,D.getMilliseconds())),P._startPeriod=new Date(i),R&&(i=function(e,t){var i=new Date(e);switch(t.freq){case"yearly":i.setFullYear(i.getFullYear(),0,1);break;case"monthly":i.setFullYear(i.getFullYear(),i.getMonth(),1);break;case"weekly":M(i,t.weekStart,-1)}return t.hours&&i.setHours(0),t.minutes&&i.setMinutes(0),t.seconds&&i.setSeconds(0),i}(i,P),n=v(n,P),N(n)-N(i)<0&&(l=i.getHours(),n.setHours(l,i.getMinutes(),i.getSeconds(),i.getMilliseconds()),A.adjustDST(n,l)),P._startPeriod=new Date(i),P._endPeriod=v(i,P)),u=e.duration(),P._startTime=s=A.toInvariantTime(i),E.setup&&E.setup(P,D,i),E.limit(i,n,P);i<=n;)if(a=new Date(i),I(a,u),((i>=h||a>h)&&!m(C,i,r)||R)&&(o=(s=A.toUtcTime(A.getDate(i))+N(P._startTime))+u,T!==i.getTime()||S!==N(P._startTime)?L.push(e.toOccurrence({start:new Date(i),end:a,_startTime:s,_endTime:o})):(e._startTime=s,e._endTime=o,L.push(e))),R){if(E.next(i,P),E.limit(i,n,P),i>P._endPeriod&&(z=b(z=_(L.slice(H),D,R),C,r),L=L.slice(0,H).concat(z),P._endPeriod=v(i,P),H=L.length),F&&F===H)break}else{if(F&&F===H)break;H+=1,E.next(i,P),E.limit(i,n,P)}return L},dayInYear:n,weekInYear:r,weekInMonth:s,numberOfWeeks:l,isException:m,toExceptionString:g};var ee=function(e){for(var t=S.culture().calendar.days.namesShort,i=t.length,n="",r=0,s=[];r<i;r++)s.push(r);for(t=t.slice(e).concat(t.slice(0,e)),s=s.slice(e).concat(s.slice(0,e)),r=0;r<i;r++)n+='<label class="k-check"><input class="k-recur-weekday-checkbox" type="checkbox" value="'+s[r]+'" /> '+t[r]+"</label>";return n},te=S.template('# if (frequency !== "never") { #<div class="k-edit-label"><label>#:messages.repeatEvery#</label></div><div class="k-edit-field"><input class="k-recur-interval"/>#:messages.interval#</div># } ## if (frequency === "weekly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field">#=weekDayCheckBoxes(firstWeekDay)#</div># } else if (frequency === "monthly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field"><ul class="k-reset"><li><label><input class="k-recur-month-radio" type="radio" name="month" value="monthday" />#:messages.day#</label><input class="k-recur-monthday" /></li><li><input class="k-recur-month-radio" type="radio" name="month" value="weekday" /><input class="k-recur-weekday-offset" /><input class="k-recur-weekday" /></li></ul></div># } else if (frequency === "yearly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field"><ul class="k-reset"><li><input class="k-recur-year-radio" type="radio" name="year" value="monthday" /><input class="k-recur-month" /><input class="k-recur-monthday" /></li><li><input class="k-recur-year-radio" type="radio" name="year" value="weekday" /><input class="k-recur-weekday-offset" /><input class="k-recur-weekday" />#:messages.of#<input class="k-recur-month" /></li></ul></div># } ## if (frequency !== "never") { #<div class="k-edit-label"><label>#:end.label#</label></div><div class="k-edit-field"><ul class="k-reset"><li><label><input class="k-recur-end-never" type="radio" name="end" value="never" />#:end.never#</label></li><li><label><input class="k-recur-end-count" type="radio" name="end" value="count" />#:end.after#</label><input class="k-recur-count" />#:end.occurrence#</li><li><label><input class="k-recur-end-until" type="radio" name="end" value="until" />#:end.on#</label><input class="k-recur-until" /></li></ul></div># } #'),ie=[{day:0,offset:0},{day:1,offset:0},{day:2,offset:0},{day:3,offset:0},{day:4,offset:0},{day:5,offset:0},{day:6,offset:0}],ne=[{day:1,offset:0},{day:2,offset:0},{day:3,offset:0},{day:4,offset:0},{day:5,offset:0}],re=[{day:0,offset:0},{day:6,offset:0}],se=E.extend({init:function(e,t){var i,n=t&&t.frequencies;E.fn.init.call(this,e,t),this.wrapper=this.element,(t=this.options).start=i=t.start||A.today(),n&&(t.frequencies=n),"string"==typeof i&&(t.start=S.parseDate(i,"yyyyMMddTHHmmss")),null===t.firstWeekDay&&(t.firstWeekDay=S.culture().calendar.firstDay),this._namespace="."+t.name},options:{value:"",start:"",timezone:"",spinners:!0,firstWeekDay:null,frequencies:["never","daily","weekly","monthly","yearly"],mobile:!1,messages:{frequencies:{never:"Never",hourly:"Hourly",daily:"Daily",weekly:"Weekly",monthly:"Monthly",yearly:"Yearly"},hourly:{repeatEvery:"Repeat every: ",interval:" hour(s)"},daily:{repeatEvery:"Repeat every: ",interval:" day(s)"},weekly:{interval:" week(s)",repeatEvery:"Repeat every: ",repeatOn:"Repeat on: "},monthly:{repeatEvery:"Repeat every: ",repeatOn:"Repeat on: ",interval:" month(s)",day:"Day "},yearly:{repeatEvery:"Repeat every: ",repeatOn:"Repeat on: ",interval:" year(s)",of:" of "},end:{label:"End:",mobileLabel:"Ends",never:"Never",after:"After ",occurrence:" occurrence(s)",on:"On "},offsetPositions:{first:"first",second:"second",third:"third",fourth:"fourth",last:"last"},weekdays:{day:"day",weekday:"weekday",weekend:"weekend day"}}},events:["change"],_initInterval:function(){var e=this,t=e._value;e._container.find(".k-recur-interval").kendoNumericTextBox({spinners:e.options.spinners,value:t.interval||1,decimals:0,format:"#",min:1,change:function(){t.interval=this.value(),e._trigger()}})},_weekDayRule:function(e){var t=(this._weekDay.element||this._weekDay).val(),i=Number((this._weekDayOffset.element||this._weekDayOffset).val()),n=null,r=null;e||("day"===t?(n=ie,r=i):"weekday"===t?(n=ne,r=i):"weekend"===t?(n=re,r=i):n=[{offset:i,day:Number(t)}]),this._value.weekDays=n,this._value.positions=r},_weekDayView:function(){var e,t,i,n,r=this._value.weekDays,s=this._value.positions,o=this._weekDayOffset;r&&(i=r.length,s&&(7===i?(t="day",e=s):5===i?(t="weekday",e=s):2===i&&(t="weekend",e=s)),t||(t=(r=r[0]).day,e=r.offset||""),o[n=o.value?"value":"val"](e),this._weekDay[n](t))},_initWeekDay:function(){var t,i=this,n=i.options.messages.weekdays,r=i.options.messages.offsetPositions,s=i._container.find(".k-recur-weekday"),o=function(){i._weekDayRule(),i._trigger()};s[0]&&(i._weekDayOffset=new R(i._container.find(".k-recur-weekday-offset"),{change:o,dataTextField:"text",dataValueField:"value",dataSource:[{text:r.first,value:"1"},{text:r.second,value:"2"},{text:r.third,value:"3"},{text:r.fourth,value:"4"},{text:r.last,value:"-1"}]}),t=[{text:n.day,value:"day"},{text:n.weekday,value:"weekday"},{text:n.weekend,value:"weekend"}],i._weekDay=new R(s,{value:i.options.start.getDay(),change:o,dataTextField:"text",dataValueField:"value",dataSource:t.concat(e.map(S.culture().calendar.days.names,function(e,t){return{text:e,value:t}}))}),i._weekDayView())},_initWeekDays:function(){var t=this,i=t._value,n=t._container.find(".k-recur-weekday-checkbox");if(n[0]&&(n.on("click"+t._namespace,function(){i.weekDays=e.map(n.filter(":checked"),function(e){return{day:Number(e.value),offset:0}}),t.options.mobile||t._trigger()}),i.weekDays))for(var r,s,o=0,a=n.length,l=i.weekDays.length;o<a;o++)for(s=n[o],r=0;r<l;r++)s.value==i.weekDays[r].day&&(s.checked=!0)},_initMonthDay:function(){var e=this,t=e._value,i=e._container.find(".k-recur-monthday");i[0]&&(e._monthDay=new S.ui.NumericTextBox(i,{spinners:e.options.spinners,min:1,max:31,decimals:0,format:"#",value:t.monthDays?t.monthDays[0]:e.options.start.getDate(),change:function(){var i=this.value();t.monthDays=i?[i]:i,e._trigger()}}))},_initCount:function(){var e=this,t=e._container.find(".k-recur-count"),i=e._value;e._count=t.kendoNumericTextBox({spinners:e.options.spinners,value:i.count||1,decimals:0,format:"#",min:1,change:function(){i.count=this.value(),e._trigger()}}).data("kendoNumericTextBox")},_initUntil:function(){var e=this,t=e._container.find(".k-recur-until"),i=e.options.start,n=e._value,r=n.until;e._until=t.kendoDatePicker({min:r&&r<i?r:i,value:r||new Date(i.getFullYear(),i.getMonth(),i.getDate(),23,59,59),change:function(){var t=this.value();n.until=new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59),e._trigger()}}).data("kendoDatePicker")},_trigger:function(){this.options.mobile||this.trigger("change")}}),oe=se.extend({init:function(e,t){se.fn.init.call(this,e,t),this._initFrequency(),this._initContainer(),this.value(this.options.value)},options:{name:"RecurrenceEditor"},events:["change"],destroy:function(){this._frequency.destroy(),this._container.find("input[type=radio],input[type=checkbox]").off("click"+this._namespace),S.destroy(this._container),se.fn.destroy.call(this)},value:function(e){var i,n=this.options.timezone;if(e===t)return this._value.freq?C(this._value,n):"";this._value=y(e,n)||{},(i=this._value.freq)?this._frequency.value(i):this._frequency.select(0),this._initView(this._frequency.value())},_initContainer:function(){var t=this.element,i=e('<div class="k-recur-view" />'),n=t.parent(".k-edit-field");n[0]?i.insertAfter(n):t.append(i),this._container=i},_initFrequency:function(){var t,i=this,n=i.options,r=n.frequencies,s=n.messages.frequencies,o=e("<input />");(t=(r=e.map(r,function(e){return{text:s[e],value:e}}))[0])&&"never"===t.value&&(t.value=""),i.element.append(o),i._frequency=new R(o,{dataTextField:"text",dataValueField:"value",dataSource:r,change:function(){i._value={},i._initView(i._frequency.value()),i.trigger("change")}})},_initView:function(e){var t=this._value,i=this.options,n={frequency:e||"never",weekDayCheckBoxes:ee,firstWeekDay:i.firstWeekDay,messages:i.messages[e],end:i.messages.end};S.destroy(this._container),this._container.html(te(n)),e?(t.freq=e,"weekly"!==e||t.weekDays||(t.weekDays=[{day:i.start.getDay(),offset:0}]),this._initInterval(),this._initWeekDays(),this._initMonthDay(),this._initWeekDay(),this._initMonth(),this._initCount(),this._initUntil(),this._period(),this._end()):this._value={}},_initMonth:function(){var t,i=this,n=i._value,r=n.months||[i.options.start.getMonth()+1],s=i._container.find(".k-recur-month");s[0]&&(t={change:function(){n.months=[Number(this.value())],i.trigger("change")},dataTextField:"text",dataValueField:"value",dataSource:e.map(S.culture().calendar.months.names,function(e,t){return{text:e,value:t+1}})},i._month1=new R(s[0],t),i._month2=new R(s[1],t),r&&(r=r[0],i._month1.value(r),i._month2.value(r)))},_end:function(){var e,t=this,i=t._value,n=t._container,r=t._namespace,s=function(e){t._toggleEnd(e.currentTarget.value),t.trigger("change")};t._buttonNever=n.find(".k-recur-end-never").on("click"+r,s),t._buttonCount=n.find(".k-recur-end-count").on("click"+r,s),t._buttonUntil=n.find(".k-recur-end-until").on("click"+r,s),i.count?e="count":i.until&&(e="until"),t._toggleEnd(e)},_period:function(){var e=this,t=e._value,i="monthly"===t.freq,n=i?e._toggleMonthDay:e._toggleYear,r=".k-recur-"+(i?"month":"year")+"-radio",s=e._container.find(r);(i||"yearly"===t.freq)&&(s.on("click"+e._namespace,function(t){n.call(e,t.currentTarget.value),e.trigger("change")}),e._buttonMonthDay=s.eq(0),e._buttonWeekDay=s.eq(1),n.call(e,t.weekDays?"weekday":"monthday"))},_toggleEnd:function(e){var t,i,n,r;"count"===e?(this._buttonCount.prop("checked",!0),n=!0,r=!1,t=this._count.value(),i=null):"until"===e?(this._buttonUntil.prop("checked",!0),n=!1,r=!0,t=null,i=this._until.value()):(this._buttonNever.prop("checked",!0),n=r=!1,t=i=null),this._count.enable(n),this._until.enable(r),this._value.count=t,this._value.until=i},_toggleMonthDay:function(e){var t,i=!1,n=!0,r=!1;"monthday"===e?(this._buttonMonthDay.prop("checked",!0),t=[this._monthDay.value()],i=!0,n=!1,r=!0):(this._buttonWeekDay.prop("checked",!0),t=null),this._weekDay.enable(n),this._weekDayOffset.enable(n),this._monthDay.enable(i),this._value.monthDays=t,this._weekDayRule(r)},_toggleYear:function(e){var t,i=!1,n=!0;"monthday"===e?(i=!0,n=!1,t=this._month1.value()):t=this._month2.value(),this._month1.enable(i),this._month2.enable(n),this._value.months=[t],this._toggleMonthDay(e)}});F.plugin(oe);var ae=S.template('<div class="k-edit-label"><label>#:headerTitle#</label></div><div class="k-edit-field k-recur-pattern k-scheduler-toolbar"></div><div class="k-recur-view"></div>'),le=S.template('# if (frequency !== "never") { #<div class="k-edit-label"><label>#:messages.repeatEvery#</label></div><div class="k-edit-field"><input class="k-recur-interval" pattern="\\\\d*"/>#:messages.interval#</div># } ## if (frequency === "weekly") { #<div class="k-edit-label"><label>#:messages.repeatOn#</label></div><div class="k-edit-field">#=weekDayCheckBoxes(firstWeekDay)#</div># } else if (frequency === "monthly") { #<div class="k-edit-label"><label>#:messages.repeatBy#</label></div><div class="k-edit-field k-scheduler-toolbar k-repeat-rule"></div><div class="k-monthday-view" style="display:none"><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><input class="k-recur-monthday" pattern="\\\\d*"/></div></div><div class="k-weekday-view" style="display:none"><div class="k-edit-label"><label>#:messages.every#</label></div><div class="k-edit-field"><select class="k-recur-weekday-offset"></select></div><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><select class="k-recur-weekday"></select></div></div># } else if (frequency === "yearly") { #<div class="k-edit-label"><label>#:messages.repeatBy#</label></div><div class="k-edit-field k-scheduler-toolbar k-repeat-rule"></div><div class="k-monthday-view" style="display:none"><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><input class="k-recur-monthday" pattern="\\\\d*"/></div></div><div class="k-weekday-view" style="display:none"><div class="k-edit-label"><label>#:messages.every#</label></div><div class="k-edit-field"><select class="k-recur-weekday-offset"></select></div><div class="k-edit-label"><label>#:messages.day#</label></div><div class="k-edit-field"><select class="k-recur-weekday"></select></div></div><div class="k-edit-label"><label>#:messages.month#</label></div><div class="k-edit-field"><select class="k-recur-month"></select></div># } #'),de=S.template('# if (endPattern === "count") { #<div class="k-edit-label"><label>#:messages.after#</label></div><div class="k-edit-field"><input class="k-recur-count" pattern="\\\\d*" /></div># } else if (endPattern === "until") { #<div class="k-edit-label"><label>#:messages.on#</label></div><div class="k-edit-field"><input type="date" class="k-recur-until" /></div># } #'),ce=S.template('<ul class="k-reset k-header k-scheduler-navigation">#for (var i = 0, length = dataSource.length; i < length; i++) {#<li class="k-state-default #= value === dataSource[i].value ? "k-state-selected" : "" #"><a role="button" href="\\#" class="k-link" data-#=ns#value="#=dataSource[i].value#">#:dataSource[i].text#</a></li>#}#</ul>'),ue=se.extend({init:function(e,t){se.fn.init.call(this,e,t),t=this.options,this._optionTemplate=S.template('<option value="#:value#">#:text#</option>'),this.value(t.value),this._pane=t.pane,this._initRepeatButton(),this._initRepeatEnd(),this._defaultValue=this._value},options:{name:"MobileRecurrenceEditor",animations:{left:"slide",right:"slide:right"},mobile:!0,messages:{cancel:"Cancel",update:"Save",endTitle:"Repeat ends",repeatTitle:"Repeat pattern",headerTitle:"Repeat event",end:{patterns:{never:"Never",after:"After...",on:"On..."},never:"Never",after:"End repeat after",on:"End repeat on"},daily:{interval:""},hourly:{interval:""},weekly:{interval:""},monthly:{interval:"",repeatBy:"Repeat by: ",dayOfMonth:"Day of the month",dayOfWeek:"Day of the week",repeatEvery:"Repeat every",every:"Every",day:"Day "},yearly:{interval:"",repeatBy:"Repeat by: ",dayOfMonth:"Day of the month",dayOfWeek:"Day of the week",repeatEvery:"Repeat every: ",every:"Every",month:"Month",day:"Day"}}},events:["change"],value:function(e){var i=this.options.timezone;if(e===t)return this._value.freq?C(this._value,i):"";this._value=y(e,i)||{}},destroy:function(){this._destroyView(),S.destroy(this._endFields),this._repeatButton.off("click"+this._namespace),se.fn.destroy.call(this)},_initRepeatButton:function(){var t=this,i=t.options.messages.frequencies[this._value.freq||"never"];t._repeatButton=e('<a href="#" class="k-button k-scheduler-recur">'+i+"</a>").on("click"+t._namespace,function(e){e.preventDefault(),t._createView("repeat"),t._pane.navigate("recurrence",t.options.animations.left)}),t.element.append(t._repeatButton)},_initRepeatEnd:function(){var t=this,i=e('<div class="k-edit-label"><label>'+t.options.messages.end.mobileLabel+"</label></div>").insertAfter(t.element.parent(".k-edit-field")),n=e('<div class="k-edit-field"><a href="#" class="k-button k-scheduler-recur-end"></a></div>').on("click"+t._namespace,function(e){e.preventDefault(),t._value.freq&&(t._createView("end"),t._pane.navigate("recurrence",t.options.animations.left))}).insertAfter(i);t._endFields=i.add(n).toggleClass("k-state-disabled",!t._value.freq),t._endButton=n.find(".k-scheduler-recur-end").text(t._endText())},_endText:function(){var e=this._value,t=this.options.messages.end,i=t.never;return e.count?i=S.format("{0} {1}",t.after,e.count):e.until&&(i=S.format("{0} {1:d}",t.on,e.until)),i},_initFrequency:function(){var t=this,i=t.options.messages.frequencies,n=ce({dataSource:e.map(this.options.frequencies,function(e){return{text:i[e],value:"never"!==e?e:""}}),value:t._value.freq||"",ns:S.ns});t._view.element.find(".k-recur-pattern").append(n).on("click"+t._namespace,".k-scheduler-navigation li",function(i){var n=e(this);i.preventDefault(),n.addClass("k-state-selected").siblings().removeClass("k-state-selected"),t._value={freq:n.children("a").attr(S.attr("value"))},t._initRepeatView()})},_initEndNavigation:function(){var t=this,i=t.options.messages.end.patterns,n=t._value,r="";n.count?r="count":n.until&&(r="until");var s=ce({dataSource:[{text:i.never,value:""},{text:i.after,value:"count"},{text:i.on,value:"until"}],value:r,ns:S.ns});t._view.element.find(".k-recur-pattern").append(s).on("click"+t._namespace,".k-scheduler-navigation li",function(i){var r=e(this),s=null,o=null;i.preventDefault(),r.addClass("k-state-selected").siblings().removeClass("k-state-selected"),t._initEndView(r.children("a").attr(S.attr("value"))),t._count?(s=t._count.value(),o=null):t._until&&(s=null,o=t._until.val?S.parseDate(t._until.val(),"yyyy-MM-dd"):t._until.value()),n.count=s,n.until=o})},_createView:function(t){var i=this,n=i.options.messages,r=n["repeat"===t?"repeatTitle":"endTitle"],s='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list" id="recurrence"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">'+n.cancel+"</a>"+n.headerTitle+'<a href="#" class="k-button k-scheduler-update">'+n.update+"</a></div>",o=i._pane.view().id;i._view=i._pane.append(s+ae({headerTitle:r})),i._view.element.on("click"+i._namespace,"a.k-scheduler-cancel, a.k-scheduler-update",function(t){t.preventDefault(),t.stopPropagation(),e(this).hasClass("k-scheduler-update")?(i.trigger("change"),i._defaultValue=e.extend({},i._value)):i._value=i._defaultValue;var r=i._value.freq;i._endButton.text(i._endText()),i._endFields.toggleClass("k-state-disabled",!r),i._repeatButton.text(n.frequencies[r||"never"]),i._pane.one("viewShow",function(){i._destroyView()}),i._pane.navigate(o,i.options.animations.right)}),i._container=i._view.element.find(".k-recur-view"),"repeat"===t?(i._initFrequency(),i._initRepeatView()):(i._initEndNavigation(),i._initEndView())},_destroyView:function(){this._view&&(this._view.destroy(),this._view.element.remove()),this._view=null},_initRepeatView:function(){var e=this._value.freq||"never",t={frequency:e,weekDayCheckBoxes:ee,firstWeekDay:this.options.firstWeekDay,messages:this.options.messages[e]},i=le(t),n=this._container,r=this._value;S.destroy(n),n.html(i),i?("weekly"!==e||r.weekDays||(r.weekDays=[{day:this.options.start.getDay(),offset:0}]),this._initInterval(),this._initMonthDay(),this._initWeekDays(),this._initWeekDay(),this._initMonth(),this._period()):this._value={}},_initEndView:function(e){var i=this._value;e===t&&(i.count?e="count":i.until&&(e="until"));var n={endPattern:e,messages:this.options.messages.end};S.destroy(this._container),this._container.html(de(n)),this._initCount(),this._initUntil()},_initWeekDay:function(){var t,i=this,n=i.options.messages.weekdays,r=i.options.messages.offsetPositions,s=i._container.find(".k-recur-weekday"),o=function(){i._weekDayRule(),i.trigger("change")};s[0]&&(i._weekDayOffset=i._container.find(".k-recur-weekday-offset").html(i._options([{text:r.first,value:"1"},{text:r.second,value:"2"},{text:r.third,value:"3"},{text:r.fourth,value:"4"},{text:r.last,value:"-1"}])).change(o),t=(t=[{text:n.day,value:"day"},{text:n.weekday,value:"weekday"},{text:n.weekend,value:"weekend"}]).concat(e.map(S.culture().calendar.days.names,function(e,t){return{text:e,value:t}})),i._weekDay=s.html(i._options(t)).change(o).val(i.options.start.getDay()),i._weekDayView())},_initMonth:function(){var t=this._value,i=this.options.start,n=t.months||[i.getMonth()+1],r=this._container.find(".k-recur-month"),s=S.culture().calendar.months.names;if(r[0]){var o=e.map(s,function(e,t){return{text:e,value:t+1}});r.html(this._options(o)).change(function(){t.months=[Number(this.value)]}),this._monthSelect=r,n&&r.val(n[0])}},_period:function(){var t=this,i=t._value,n=t._container,r=t.options.messages[i.freq],s=n.find(".k-repeat-rule"),o=n.find(".k-weekday-view"),a=n.find(".k-monthday-view");if(s[0]){var l=i.weekDays?"weekday":"monthday",d=ce({value:l,dataSource:[{text:r.dayOfMonth,value:"monthday"},{text:r.dayOfWeek,value:"weekday"}],ns:S.ns}),c=function(e){var n=t._weekDay.val(),r=t._weekDayOffset.val(),s=t._monthDay.value(),l=t._monthSelect?t._monthSelect.val():null;"monthday"===e?(i.weekDays=null,i.monthDays=s?[s]:s,i.months=l?[Number(l)]:l,o.hide(),a.show()):(i.monthDays=null,i.months=l?[Number(l)]:l,i.weekDays=[{offset:Number(r),day:Number(n)}],o.show(),a.hide())};s.append(d).on("click"+t._namespace,".k-scheduler-navigation li",function(t){var i=e(this).addClass("k-state-selected");t.preventDefault(),i.siblings().removeClass("k-state-selected");var n=i.children("a").attr(S.attr("value"));c(n)}),c(l)}},_initUntil:function(){var e=this._container.find(".k-recur-until"),t=this.options.start,i=this._value,n=i.until,r=n&&n<t?n:t;S.support.input.date?this._until=e.attr("min",S.toString(r,"yyyy-MM-dd")).val(S.toString(n||t,"yyyy-MM-dd")).on("change",function(){i.until=S.parseDate(this.value,"yyyy-MM-dd")}):this._until=e.kendoDatePicker({min:r,value:n||t,change:function(){i.until=this.value()}}).data("kendoDatePicker")},_options:function(e,t){var i=0,n="",r=e.length,s=this._optionTemplate;for(t&&(n+=s({value:"",text:t}));i<r;i++)n+=s(e[i]);return n}});F.plugin(ue)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.scheduler.timelineview",["kendo.scheduler.view"],function(){return function(e,t){function i(e){var t=new Date(1980,1,1,0,0,0);return o(t,u(e)),t}function n(e){var t=0;if(e.columns){for(var i=0;i<e.columns.length;i++)t+=n(e.columns[i]);return e.colspan=t,t}return e.colspan=1,1}var r=window.kendo,s=r.ui,o=r.date.setTime,a=s.SchedulerView,l=e.extend,d=e.proxy,c=r.date.getDate,u=r.date.getMilliseconds,h=r.date.MS_PER_DAY,f=r.date.MS_PER_MINUTE,p="k-current-time",m=".kendoTimelineView",g=r.template('<div><div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div><div class="k-event-template">${title}</div></div>'),v=r.template("<span class='k-link k-nav-day'>#=kendo.format('{0:m}', date)#</span>"),_=a.extend({init:function(e,t){a.fn.init.call(this,e,t),this.title=this.options.title||this.options.name,this._workDays=function(e){var t=[],i=e.workWeekStart;for(t.push(i);e.workWeekEnd!=i;)i>6?i-=7:i++,t.push(i);return t}(this.options),this._templates(),this._editable(),this.calculateDateRange(),this._groups(),this._currentTime()},name:"timeline",_currentTimeMarkerUpdater:function(){var t=new Date,i=this.options;if(this.datesHeader.find("."+p).remove(),this.content.find("."+p).remove(),this._isInDateSlot({start:t,end:t})){if(!1===i.currentTimeMarker.useLocalTimezone){var n=i.dataSource.options.schema.timezone;if(i.dataSource&&n){var s=r.timezone.offset(t,n);t=r.timezone.convert(t,t.getTimezoneOffset(),s)}}for(var o=i.group&&"vertical"!=i.group.orientation?this.groups.length:1,a=0;a<o;a++){var l=this.groups[a];if(!l)return;var d=r.date.toUtcTime(t),c=l.timeSlotRanges(d,d+1);if(0===c.length)return;if(c[0].collection.slotByStartDate(t)){var u="<div class='"+p+"'></div>",h=this.datesHeader.find(".k-scheduler-header-wrap"),f=Math.round(c[0].innerRect(t,new Date(t.getTime()+1),!1).left),m=e(u).prependTo(h).addClass("k-current-time-arrow-down");m.css({left:this._adjustLeftPosition(f-.8666*m.outerWidth()/2),top:h.find("tr:last").prev().position().top}),e(u).prependTo(this.content).css({left:this._adjustLeftPosition(f),width:"1px",bottom:"1px",top:0})}}}},_adjustLeftPosition:function(e){return this._isRtl&&(e-=this.content[0].scrollWidth-this.content[0].offsetWidth),e},_currentTime:function(){var e=this.options.currentTimeMarker;if(!1!==e&&void 0!==e.updateInterval){var t=e.updateInterval;this._currentTimeMarkerUpdater(),this._currentTimeUpdateTimer=setInterval(d(this._currentTimeMarkerUpdater,this),t)}},_editable:function(){this.options.editable&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+m,".k-event a:has(.k-si-close)",function(i){t.trigger("remove",{uid:e(this).closest(".k-event").attr(r.attr("uid"))}),i.preventDefault()}),!1!==t.options.editable.create&&t.element.on("dblclick"+m,".k-scheduler-content td",function(e){var i=t._slotByPosition(e.pageX,e.pageY);if(i){var n=t._resourceBySlot(i);t.trigger("add",{eventInfo:l({start:i.startDate(),end:i.endDate()},n)})}e.preventDefault()}),!1!==t.options.editable.update&&t.element.on("dblclick"+m,".k-event",function(i){t.trigger("edit",{uid:e(this).closest(".k-event").attr(r.attr("uid"))}),i.preventDefault()})},_touchEditable:function(){var t=this,i=0;r.support.mobileOS.android&&(i=5),!1!==t.options.editable.create&&(t._addUserEvents=new r.UserEvents(t.element,{threshold:i,filter:".k-scheduler-content td",tap:function(e){var i=void 0!==e.x.location?e.x.location:e.x,n=void 0!==e.y.location?e.y.location:e.y,r=t._slotByPosition(i,n);if(r){var s=t._resourceBySlot(r);t.trigger("add",{eventInfo:l({start:r.startDate(),end:r.endDate()},s)})}e.preventDefault()}})),!1!==t.options.editable.update&&(t._editUserEvents=new r.UserEvents(t.element,{threshold:i,filter:".k-event",tap:function(i){var n=e(i.target).closest(".k-event");n.hasClass("k-event-active")||t.trigger("edit",{uid:n.attr(r.attr("uid"))}),i.preventDefault()}}))},_slotByPosition:function(e,t){var i,n,s,o=this.content,a=o.offset();if(e-=a.left,t-=a.top,this._isRtl){var l=r.support.browser;l.mozilla?(e+=o[0].scrollWidth-o[0].offsetWidth,e+=o[0].scrollLeft):l.msie?(e-=o.scrollLeft(),e+=o[0].scrollWidth-o[0].offsetWidth):l.webkit&&(e+=o[0].scrollLeft)}else e+=o[0].scrollLeft;for(t+=o[0].scrollTop,e=Math.ceil(e),t=Math.ceil(t),s=0;s<this.groups.length;s++)if(n=this.groups[s],i=n.timeSlotByPosition(e,t))return i;return null},options:{name:"TimelineView",title:"Timeline",selectedDateFormat:"{0:D}",selectedShortDateFormat:"{0:d}",date:r.date.today(),startTime:r.date.today(),endTime:r.date.today(),showWorkHours:!1,minorTickCount:2,editable:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,majorTick:60,eventHeight:25,eventMinWidth:0,columnWidth:100,groupHeaderTemplate:"#=text#",majorTimeHeaderTemplate:"#=kendo.toString(date, 't')#",slotTemplate:"&nbsp;",eventTemplate:g,dateHeaderTemplate:v,footer:{command:"workDay"},currentTimeMarker:{updateInterval:1e4,useLocalTimezone:!0},messages:{defaultRowText:"All events",showFullDay:"Show full day",showWorkDay:"Show business hours"}},events:["remove","add","edit"],_templates:function(){var e=this.options,t=l({},r.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,'<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#" #} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head) {#<span class="k-icon k-i-arrow-e"></span>#}#</span>#if(resizable && !data.tail){#<span class="k-resize-handle k-resize-w"></span>#}##if(resizable && !data.head){#<span class="k-resize-handle k-resize-e"></span>#}#</div>'),this.majorTimeHeaderTemplate=r.template(e.majorTimeHeaderTemplate,t),this.dateHeaderTemplate=r.template(e.dateHeaderTemplate,t),this.slotTemplate=r.template(e.slotTemplate,t),this.groupHeaderTemplate=r.template(e.groupHeaderTemplate,t)},_render:function(t){var i=this;t=t||[],i._dates=t,i._startDate=t[0],i._endDate=t[t.length-1||0],i._calculateSlotRanges(),i.createLayout(i._layout(t)),i._content(t),i._footer(),i._setContentWidth(),i.refreshLayout(),i.datesHeader.on("click"+m,".k-nav-day",function(t){var n=e(t.currentTarget).closest("th"),r=i._slotByPosition(n.offset().left,i.content.offset().top);i.trigger("navigate",{view:"timeline",date:r.startDate()})}),i.timesHeader.find("table tr:last").hide(),i.datesHeader.find("table tr:last").hide()},_setContentWidth:function(){var e=this.content.width(),t=this.content.find("table"),i=100,n=t.find("tr:first").children().length*this.options.columnWidth;e<n&&(i=Math.ceil(n/e*100)),t.add(this.datesHeader.find("table")).css("width",i+"%")},_calculateSlotRanges:function(){var e=this._dates,t=this.startTime(),i=this.endTime();u(i)===u(r.date.getDate(i))&&(i=r.date.getDate(i),o(i,h-1)),i=u(i),t=u(t);for(var n=[],s=0;s<e.length;s++){var a=c(e[s]);o(a,t);var l=c(e[s]);o(l,i),n.push({start:r.date.toUtcTime(a),end:r.date.toUtcTime(l)})}this._slotRanges=n},_forTimeRange:function(e,t,n,r){e=i(e),t=i(t);var s,a,l=u(e),d=u(t),c=this.options.minorTickCount,p=this.options.majorTick*f,m=p/c||1,g=new Date(+e),v=g.getDate(),_=0,b="";for(a=h/m,l!=d&&(l>d&&(d+=h),a=(d-l)/m),a=Math.round(a);_<a;_++){var k=_%(p/m),w=0===k,y=c;a%c!=0&&w&&a-(_+1)<c&&(y=a%c),b+=n(g,w,k<c-1,k===c-1,y),o(g,m,!1)}return d&&(s=u(g),v<g.getDate()&&(s+=h),s>d&&(g=new Date(+t))),r&&(b+=r(g)),b},_layout:function(e){for(var t=[],i=[],r=this,s=[{text:r.options.messages.defaultRowText}],o=[],a=0;a<r.options.minorTickCount;a++)o.push({text:"",className:""});this._forTimeRange(r.startTime(),r.endTime(),function(e,i,s,a,l){var d=r.majorTimeHeaderTemplate;if(i){var c={text:d({date:e}),className:a?"k-slot-cell":"",columns:o.slice(0,l)};n(c),t.push(c)}});for(var l=0;l<e.length;l++)i.push({text:r.dateHeaderTemplate({date:e[l]}),className:"k-slot-cell",columns:t.slice(0)});var d=this.groupedResources;return d.length&&("vertical"===this._groupOrientation()?s=r._createRowsLayout(d,null,this.groupHeaderTemplate):i=r._createColumnsLayout(d,i,this.groupHeaderTemplate)),{columns:i,rows:s}},_footer:function(){var t=this.options;if(!1!==t.footer){var i='<div class="k-header k-scheduler-footer">',n=t.footer.command;n&&"workDay"===n?(i+='<ul class="k-reset k-header">',i+='<li class="k-state-default k-scheduler-fullday"><a href="#" class="k-link"><span class="k-icon k-i-clock"></span>',i+=(t.showWorkHours?t.messages.showFullDay:t.messages.showWorkDay)+"</a></li>",i+="</ul>"):i+="&nbsp;",i+="</div>",this.footer=e(i).appendTo(this.element);var r=this;this.footer.on("click"+m,".k-scheduler-fullday",function(e){e.preventDefault(),r.trigger("navigate",{view:r.name||t.name,date:r.startDate(),isWorkDay:!t.showWorkHours})})}},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},_isWorkDay:function(e){for(var t=e.getDay(),i=this._workDays,n=0;n<i.length;n++)if(i[n]===t)return!0;return!1},_content:function(e){var t=this,i=t.options,n=t.startTime(),s=this.endTime(),o=1,a=1,l=e.length,d="",c=this.groupedResources,u=this.slotTemplate,h=!1;c.length&&((h="vertical"===t._groupOrientation())?a=t._groupCount():o=t._groupCount()),d+="<tbody>";for(var f=function(n){var s,o="",a="";return r.date.isToday(e[g])&&(a+="k-today"),(r.date.getMilliseconds(n)<r.date.getMilliseconds(i.workDayStart)||r.date.getMilliseconds(n)>=r.date.getMilliseconds(i.workDayEnd)||!t._isWorkDay(e[g]))&&(a+=" k-nonwork-hour"),o+="<td"+(""!==a?' class="'+a+'"':"")+">",s=r.date.getDate(e[g]),r.date.setTime(s,r.date.getMilliseconds(n)),o+=u({date:s,resources:function(e){return function(){return t._resourceBySlot({groupIndex:e})}}(h?p:m)}),o+="</td>"},p=0;p<a;p++){d+="<tr>";for(var m=0;m<o;m++)for(var g=0,v=l;g<v;g++)d+=this._forTimeRange(n,s,f);d+="</tr>"}d+="</tbody>",this.content.find("table").append(d)},_groups:function(){var e=this._groupCount(),t=this._dates,i=t.length;this.groups=[];for(var n=0;n<e;n++){var s=this._addResourceView(n),o=t[0],a=t[t.length-1||0];s.addTimeSlotCollection(o,r.date.addDays(a,1))}this._timeSlotGroups(e,i)},_isVerticallyGrouped:function(){return this.groupedResources.length&&"vertical"===this._groupOrientation()},_isHorizontallyGrouped:function(){return this.groupedResources.length&&"horizontal"===this._groupOrientation()},_timeSlotGroups:function(e,t){var i=this._timeSlotInterval(),n=this._isVerticallyGrouped(),r=this.content.find("tr"),s=r.length;r.attr("role","row"),n&&(s=Math.floor(s/e));for(var o=0;o<e;o++){var a,l=0,d=this.groups[o];n&&(l=o);var c=0;n||(c=o);for(var h=r[l*s].children,f=h.length/(n?1:e),p=f/t,m=0;m<t;m++){var g=m*p+f*c;a=u(new Date(+this.startTime()));for(var v=0;v<p;v++){var _=h[v+g],b=d.getTimeSlotCollection(0),k=this._dates[m],w=Date.UTC(k.getFullYear(),k.getMonth(),k.getDate())+a,y=w+i;_.setAttribute("role","gridcell"),_.setAttribute("aria-selected",!1),b.addTimeSlot(_,w,y,!0),a+=i}}}},startDate:function(){return this._startDate},endDate:function(){return this._endDate},startTime:function(){var e=this.options;return e.showWorkHours?e.workDayStart:e.startTime},endTime:function(){var e=this.options;return e.showWorkHours?e.workDayEnd:e.endTime},_timeSlotInterval:function(){var e=this.options;return e.majorTick/e.minorTickCount*f},nextDate:function(){return r.date.nextDay(this.endDate())},previousDate:function(){return r.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},render:function(e){this._headerColumnCount=0,this._groups(),this.element.find(".k-event").remove(),e=new r.data.Query(e).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray();var t=[];this._eventsByResource(e,this.groupedResources,t);for(var i=[],n=0,s=0;s<t.length;s++){var o={groupIndex:s,maxRowCount:0,events:{}};i.push(o),this._renderEvents(t[s],s,o),n<o.maxRowCount&&(n=o.maxRowCount)}this._setRowsHeight(i,t.length,n),this._positionEvents(i,t.length),this.trigger("activate")},_positionEvents:function(e,t){for(var i=0;i<t;i++){var n=e[i].events;for(var r in n){var s=n[r];this._positionEvent(s)}}},_setRowsHeight:function(t,i,n){var r=this.options.eventHeight+2,s=this._getBottomRowOffset();i=this._isVerticallyGrouped()?i:1;for(var o=0;o<i;o++){var a=this._isVerticallyGrouped()?t[o].maxRowCount:n,l=(r+2)*(a=a||1)+s,d=e(this.times.find("tr")[o]),c=e(this.content.find("tr")[o]);d.height(l),c.height(l)}this._setContentWidth(),this.refreshLayout(),this._refreshSlots()},_getBottomRowOffset:function(){var e,t,i=.5*this.options.eventHeight;return this._isMobile()?(e=30,t=60):(e=15,t=30),i>t?i=t:i<e&&(i=e),i},_positionEvent:function(e){var t=this.options.eventHeight+2,i=e.slotRange.innerRect(e.start,e.end,!1),n=this._adjustLeftPosition(i.left),r=i.right-i.left-2;if(r<0&&(r=0),r<this.options.eventMinWidth){var s=e.slotRange.collection,o=s._slots[s._slots.length-1],a=o.offsetLeft+o.offsetWidth;a<n+(r=this.options.eventMinWidth)&&(r=a-i.left-2)}e.element.css({top:e.slotRange.start.offsetTop+e.rowIndex*(t+2)+"px",left:n,width:r})},_refreshSlots:function(){for(var e=0;e<this.groups.length;e++)this.groups[e].refresh()},_eventsByResource:function(e,t,i){var n=t[0];if(n)for(var s=n.dataSource.view(),o=0;o<s.length;o++){var l=this._resourceValue(n,s[o]),d=new r.data.Query(e).filter({field:n.field,operator:a.groupEqFilter(l)}).toArray();t.length>1?this._eventsByResource(d,t.slice(1),i):i.push(d)}else i.push(e)},_isInDateSlot:function(e){var t=e.start,i=e.end,n=c(this._startDate);return t<r.date.addDays(c(this._endDate),1)&&n<=i},_isInTimeSlot:function(e){var t=e._startTime||r.date.toUtcTime(e.start),i=e._endTime||r.date.toUtcTime(e.end),n=this._slotRanges;t===i&&(i+=1);for(var s=0;s<n.length;s++)if(t<n[s].end&&n[s].start<i)return!0;return!1},_adjustEvent:function(e){var t,i=e.start,n=e.end,s=e._time("start"),a=e._time("end"),l=u(this.startTime()),d=u(this.endTime()),f=null,p=null,m=!1,g=!1;return e.isAllDay?(f=c(i),l>s&&(o(f,l),g=!0),p=c(n),d===u(c(this.endTime()))?p=r.date.addDays(p,1):(o(p,d),m=!0)):(d=0===d?h:d,l>s?(f=c(i),o(f,l),g=!0):d<s&&(f=c(i),f=r.date.addDays(f,1),o(f,l),g=!0),d<a?(p=c(n),o(p,d),m=!0):l>a&&(p=c(n),p=r.date.addDays(p,-1),o(p,d),m=!0)),t=e.clone({start:f||i,end:p||n,_startTime:f?r.date.toUtcTime(f):e._startTime,_endTime:p?r.date.toUtcTime(p):e._endTime,isAllDay:!1}),{occurrence:t,head:m,tail:g}},_renderEvents:function(e,t,i){var n,r,s;for(r=0,s=e.length;r<s;r++)if(n=e[r],this._isInDateSlot(n)){var o=n.isAllDay||n.end.getTime()-n.start.getTime()>=h,a=this.content;if(o||this._isInTimeSlot(n)){var l=this._adjustEvent(n),d=this.groups[t];d._continuousEvents||(d._continuousEvents=[]);var c,u=d.slotRanges(l.occurrence,!1)[0];if(this._isInTimeSlot(l.occurrence)){(c=this._createEventElement(l.occurrence,n,u.head||l.head,u.tail||l.tail)).appendTo(a).css({top:0,height:this.options.eventHeight});var f={start:l.occurrence._startTime||l.occurrence.start,end:l.occurrence._endTime||l.occurrence.end,element:c,uid:n.uid,slotRange:u,rowIndex:0,offsetTop:0};i.events[n.uid]=f,this.addContinuousEvent(d,u,c,n.isAllDay),this._arrangeRows(f,u,i)}}}},addContinuousEvent:function(e,t,i,n){e._continuousEvents.push({element:i,isAllDay:n,uid:i.attr(r.attr("uid")),start:t.start,end:t.end})},_createEventElement:function(t,i,n,s){var o=this.eventTemplate,a=this.options.editable,d=this._isMobile(),c=a&&!1!==a.destroy&&!d,u=a&&!1!==a.resize,h=i._time("start"),f=i._time("end"),p=i.start,m=i.end,g=this.eventResources(i);i._startTime&&h!==r.date.getMilliseconds(i.start)&&(p=new Date(h),p=r.timezone.apply(p,"Etc/UTC")),i._endTime&&f!==r.date.getMilliseconds(i.end)&&(m=new Date(f),m=r.timezone.apply(m,"Etc/UTC"));var v=l({},{ns:r.ns,resizable:u,showDelete:c,head:n,tail:s,singleDay:1==this._dates.length,resources:g,inverseColor:!(!g||!g[0])&&this._shouldInverseResourceColor(g[0])},i,{start:p,end:m}),_=e(o(v));return this.angular("compile",function(){return{elements:_,data:[{dataItem:v}]}}),_},_arrangeRows:function(e,t,i){var n=t.start.index,r=t.end.index,s=e.slotRange.innerRect(e.start,e.end,!1),o=s.right+this.options.eventMinWidth,l=function(e,t,i){var n,r,s;for(n=e.length-1;n>=0;n--)r=e[n].rectLeft,s=e[n].rectRight,(r<=t&&s>=t||r>=t&&s<=i||t<=r&&i>=r)&&(r<t&&(t=r),s>i&&(i=s));return function(e,t,i){for(var n=[],r=0;r<e.length;r++){var s={rectLeft:e[r].rectLeft,rectRight:e[r].rectRight};(s.rectLeft<t&&s.rectRight>t||s.rectLeft>=t&&s.rectRight<=i)&&n.push(e[r])}return n}(e,t,i)}(t.events(),s.left,o);t.addEvent({slotIndex:n,start:n,end:r,rectLeft:s.left,rectRight:o,element:e.element,uid:e.uid}),l.push({start:n,end:r,uid:e.uid});var d=a.createRows(l);i.maxRowCount<d.length&&(i.maxRowCount=d.length);for(var c=0,u=d.length;c<u;c++)for(var h=d[c].events,f=0,p=h.length;f<p;f++)i.events[h[f].uid].rowIndex=c},_groupCount:function(){var e=this.groupedResources;return e.length?"vertical"===this._groupOrientation()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length-1):1},_updateEventForSelection:function(e){return this._adjustEvent(e.clone()).occurrence},_eventOptionsForMove:function(e){return e.isAllDay?{isAllDay:!1}:{}},_updateEventForResize:function(e){e.isAllDay&&e.set("isAllDay",!1)},_updateMoveHint:function(e,t,i){var n=this.groups[t],r=e.clone({start:e.start,end:e.end}),s=r.duration();r.start=new Date(r.start.getTime()+i),r.end=new Date(+r.start+s);var o=this._adjustEvent(r),a=n.slotRanges(o.occurrence,!1);this._removeMoveHint();for(var l=0;l<a.length;l++){var d=a[l],c=d.start,u=this._createEventElement(o.occurrence,o.occurrence,!1,!1);u.addClass("k-event-drag-hint");var h=d.innerRect(o.occurrence.start,o.occurrence.end,this.options.snap),f=h.right-h.left-2;f<0&&(f=0);var p={left:this._adjustLeftPosition(h.left),top:c.offsetTop,height:c.offsetHeight-2,width:f};u.css(p),this._moveHint=this._moveHint.add(u)}var m=this.content;this._moveHint.appendTo(m)},_updateResizeHint:function(e,t,i,n){var s=this.groups[t].ranges(i,n,!1,!1);this._removeResizeHint();for(var o=0;o<s.length;o++){var l=s[o],d=l.startSlot(),c=l.innerRect(i,n,!1);c.top=d.offsetTop;var u=c.right-c.left,h=d.offsetHeight,f=this._adjustLeftPosition(c.left),p=a.fn._createResizeHint.call(this,f,c.top,u,h);this._resizeHint=this._resizeHint.add(p)}var m=this.content;this._resizeHint.appendTo(m),this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(r.toString(r.timezone.toLocalDate(i),"t")),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(r.toString(r.timezone.toLocalDate(n),"t"))},selectionByElement:function(e){var t=e.offset();return this._slotByPosition(t.left,t.top)},_updateDirection:function(e,t,i,n,r){var s=t[0].start,o=t[t.length-1].end;i&&!r&&s.index===o.index&&s.collectionIndex===o.collectionIndex&&(e.backward=n)},_changeGroup:function(e,t){var i=this[t?"prevGroupSlot":"nextGroupSlot"](e.start,e.groupIndex,!1);return i&&(e.groupIndex+=t?-1:1),i},prevGroupSlot:function(e,t,i){var n=this.groups[t],r=n.ranges(e,e,i,!1)[0].start;if(!(t<=0))return this._isVerticallyGrouped()?r:n._collection(0,i).last()},nextGroupSlot:function(e,t,i){var n=this.groups[t],r=n.ranges(e,e,i,!1)[0].start;if(!(t>=this.groups.length-1))return this._isVerticallyGrouped()?r:n._collection(0,i).first()},_verticalSlots:function(e,t,i,n){var r=n?"leftSlot":"rightSlot",s=t[0].start,o=t[t.length-1].end,a=this.groups[e.groupIndex];return s=a[r](s),o=a[r](o),i||!this._isVerticallyGrouped()||s&&o||(s=o=this._changeGroup(e,n)),{startSlot:s,endSlot:o}},_horizontalSlots:function(e,t,i,n){var r=n?"upSlot":"downSlot",s=t[0].start,o=t[t.length-1].end,a=this.groups[e.groupIndex];return s=a[r](s),o=a[r](o),i||!this._isHorizontallyGrouped()||s&&o||(s=o=this._changeGroup(e,n)),{startSlot:s,endSlot:o}},_changeViewPeriod:function(e,t){var i=t?this.previousDate():this.nextDate(),n=e.start,r=e.end;e.start=new Date(i),e.end=new Date(i),this._isHorizontallyGrouped()&&(e.groupIndex=t?this.groups.length-1:0);var s=r-n;return t?(r=0===(r=u(this.endTime()))?h:r,o(e.start,r-s),o(e.end,r)):(n=u(this.startTime()),o(e.start,n),o(e.end,n+s)),e.events=[],!0},move:function(e,t,i){var n,s,o,a,l=!1,d=this.groups[e.groupIndex],c=r.keys,u=d.ranges(e.start,e.end,!1,!1);if(t===c.DOWN||t===c.UP)l=!0,o=t===c.UP,this._updateDirection(e,u,i,o,!0),a=this._verticalSlots(e,u,i,o);else if((t===c.LEFT||t===c.RIGHT)&&(l=!0,o=t===c.LEFT,this._updateDirection(e,u,i,o,!1),(!(a=this._horizontalSlots(e,u,i,o)).startSlot||!a.endSlot)&&!i&&this._changeViewPeriod(e,o,!1)))return l;if(l){if(n=a.startSlot,s=a.endSlot,i){var h=e.backward;h&&n?e.start=n.startDate():!h&&s&&(e.end=s.endDate())}else n&&s&&(e.start=n.startDate(),e.end=s.endDate());e.events=[]}return l},destroy:function(){this.element&&this.element.off(m),this.footer&&this.footer.remove(),this._currentTimeUpdateTimer&&clearInterval(this._currentTimeUpdateTimer),a.fn.destroy.call(this),this._isMobile()&&this.options.editable&&(!1!==this.options.editable.create&&this._addUserEvents.destroy(),!1!==this.options.editable.update&&this._editUserEvents.destroy())}});l(!0,s,{TimelineView:_,TimelineWeekView:_.extend({options:{name:"TimelineWeekView",title:"Timeline Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",majorTick:120},name:"timelineWeek",calculateDateRange:function(){var e,t=this.options.date,i=r.date.dayOfWeek(t,this.calendarInfo().firstDay,-1),n=[];for(e=0;e<7;e++)n.push(i),i=r.date.nextDay(i);this._render(n)}}),TimelineWorkWeekView:_.extend({options:{name:"TimelineWorkWeekView",title:"Timeline Work Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",majorTick:120},name:"timelineWorkWeek",nextDate:function(){return r.date.dayOfWeek(r.date.nextDay(this.endDate()),this.options.workWeekStart,1)},previousDate:function(){return r.date.previousDay(this.startDate())},calculateDateRange:function(){for(var e=this.options.date,t=r.date.dayOfWeek(e,this.options.workWeekStart,-1),i=r.date.dayOfWeek(t,this.options.workWeekEnd,1),n=[];t<=i;)n.push(t),t=r.date.nextDay(t);this._render(n)}}),TimelineMonthView:_.extend({options:{name:"TimelineMonthView",title:"Timeline Month",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",workDayStart:new Date(1980,1,1,0,0,0),workDayEnd:new Date(1980,1,1,23,59,59),footer:!1,majorTick:1440,minorTickCount:1},name:"timelineMonth",calculateDateRange:function(){var e,t,i=this.options.date,n=r.date.firstDayOfMonth(i),s=[];for(e=0,t=r.date.lastDayOfMonth(i).getDate();e<t;e++)s.push(n),n=r.date.nextDay(n);this._render(s)}})})}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.scheduler",["kendo.dropdownlist","kendo.editable","kendo.multiselect","kendo.window","kendo.datetimepicker","kendo.scheduler.recurrence","kendo.scheduler.view","kendo.scheduler.dayview","kendo.scheduler.agendaview","kendo.scheduler.monthview","kendo.scheduler.timelineview","kendo.mobile.actionsheet","kendo.mobile.pane","kendo.pdf"],function(){return function(e,t){function i(e,t){return t=t||"",e.startTimezone&&(t=e.startTimezone,e.endTimezone&&(t+=" | "+e.endTimezone)),t}function n(e,t){var i=t.timezone;i&&(e[h.attr("timezone")]=i)}function r(e,t){var i=t.model.fields[t.field].validation;if(i){var n=i.dateCompare;n&&T(n)&&n.message&&(e[h.attr("dateCompare-msg")]=n.message)}}function s(e,t,i,n){var r,s,o;for(s=0,o=(e=e||[]).length;s<o;s++)r=e[s],n?r.startTimezone||r.endTimezone?i?(r.start=h.timezone.convert(r.start,r.startTimezone||r.endTimezone,i),r.end=h.timezone.convert(r.end,r.endTimezone||r.startTimezone,i),r.start=h.timezone[t](r.start,i),r.end=h.timezone[t](r.end,i)):(r.start=h.timezone[t](r.start,r.startTimezone||r.endTimezone),r.end=h.timezone[t](r.end,r.endTimezone||r.startTimezone)):i&&(r.start=h.timezone[t](r.start,i),r.end=h.timezone[t](r.end,i)):r.startTimezone||r.endTimezone?(r.start=h.timezone[t](r.start,r.startTimezone||r.endTimezone),r.end=h.timezone[t](r.end,r.endTimezone||r.startTimezone),i&&(r.start=h.timezone.convert(r.start,r.startTimezone||r.endTimezone,i),r.end=h.timezone.convert(r.end,r.endTimezone||r.startTimezone,i))):i&&(r.start=h.timezone[t](r.start,i),r.end=h.timezone[t](r.end,i)),n&&delete r.uid;return e}function o(e,t){for(var i,n=e.length,r=0;r<n;r++)if((i=e[r]).uid===t)return i}function a(e,t,i){return e=i?h.timezone.convert(e,t,i):h.timezone.remove(e,t)}function l(t,i){var n,r,s=(t.fields||t)[i],o=["url","email","number","date","boolean"],a=s?s.validation:{},l=h.attr("type"),d=e.inArray,c={};for(n in a)r=a[n],d(n,o)>=0?c[l]=n:h.isFunction(r)||(c[n]=T(r)?r.value||n:r),c[h.attr(n+"-msg")]=r.message;return c}function d(t,i){var n=l(i,t.field);return function(i){e(h.format('<select data-{0}bind="value:{1}">',h.ns,t.field)).appendTo(i).attr(n).kendoDropDownList({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource,valuePrimitive:t.valuePrimitive,optionLabel:"None",template:h.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField)})}}function c(t){var i=l(t.model,t.field);return function(t){e('<textarea name="description" class="k-textbox"/>').attr(i).appendTo(t)}}function u(e,t){var i=e.end.getTime()-e.start.getTime(),n=new Date(e.start.getTime());h.date.setTime(n,t);var r=new Date(n.getTime());return h.date.setTime(r,i,!0),{start:n,end:r}}var h=window.kendo,f=h.date,p=h.support.input,m=f.MS_PER_DAY,g=f.getDate,v=h.date.getMilliseconds,_=h.recurrence,b=h.keys,k=h.ui,w=k.Widget,y=k.DataBoundWidget,x=k.Popup,C=k.Calendar,S=h.data.DataSource,T=e.isPlainObject,D=e.extend,F=e.proxy,E=Object.prototype.toString,R=e.isArray,A=".kendoScheduler",I=/(?:value:start|value:end)(?:,|$)/,M=g(new Date),H="recurrenceException",z="Do you want to edit only this event occurrence or the whole series?",N=h.template('<li class="k-current-view" data-#=ns#name="#=view#"><a role="button" href="\\#" class="k-link">${views[view].title}</a></li>'),P=h.template('<div class="k-floatwrap k-header k-scheduler-toolbar"># if (pdf) { #<ul class="k-reset k-scheduler-tools"><li><a role="button" href="\\#" class="k-button k-pdf"><span class="k-icon k-i-pdf"></span>${messages.pdf}</a></li></ul># } #<ul class="k-reset k-scheduler-navigation"><li class="k-state-default k-header k-nav-today"><a role="button" href="\\#" class="k-link">${messages.today}</a></li><li class="k-state-default k-header k-nav-prev"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-w"></span></a></li><li class="k-state-default k-header k-nav-next"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-e"></span></a></li><li class="k-state-default k-nav-current"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-calendar"></span><span class="k-sm-date-format" data-#=ns#bind="text: formattedShortDate"></span><span class="k-lg-date-format" data-#=ns#bind="text: formattedDate"></span></a></li></ul>#if(viewsCount === 1){#<a role="button" data-#=ns#name="#=view#" href="\\#" class="k-link k-scheduler-refresh"><span class="k-icon k-i-refresh"></span></a>#}else{#<ul class="k-reset k-header k-scheduler-views">#for(var view in views){#<li class="k-state-default k-view-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a role="button" href="\\#" class="k-link">${views[view].title}</a></li>#}#</ul>#}#</div>'),L=h.template('<div class="k-floatwrap k-header k-scheduler-toolbar"><ul class="k-reset k-header k-scheduler-navigation"><li class="k-state-default k-nav-today"><a role="button" href="\\#" class="k-link">${messages.today}</a></li></ul>#if(viewsCount === 1){#<a role="button" data-#=ns#name="#=view#" href="\\#" class="k-link k-scheduler-refresh"><span class="k-icon k-i-refresh"></span></a>#}else{#<ul class="k-reset k-header k-scheduler-views">#for(var view in views){#<li class="k-state-default k-view-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a role="button" href="\\#" class="k-link">${views[view].title}</a></li>#}#</ul>#}#</div><div class="k-floatwrap k-header k-scheduler-toolbar"><ul class="k-reset k-header k-scheduler-navigation"><li class="k-state-default k-nav-prev"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-w"></span></a></li><li class="k-state-default k-nav-current"><span class="k-sm-date-format" data-#=ns#bind="text: formattedShortDate"></span><span class="k-lg-date-format" data-#=ns#bind="text: formattedDate"></span></li><li class="k-state-default k-nav-next"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-e"></span></a></li></ul></div>'),B=h.Class.extend({init:function(t,i){var n=t.timezone;this.reader=i,i.model&&(this.model=i.model),this.timezone=n,this.data=function(e,t){return function(i){return i=e(i),s(i,"apply",t),i||[]}}(e.proxy(this.data,this),n),this.serialize=function(e,t){return function(i){return i&&("[object Array]"===E.call(i)||i instanceof h.data.ObservableArray||(i=[i])),s(i,"remove",t,!0),(i=e(i))||[]}}(e.proxy(this.serialize,this),n)},errors:function(e){return this.reader.errors(e)},parse:function(e){return this.reader.parse(e)},data:function(e){return this.reader.data(e)},total:function(e){return this.reader.total(e)},groups:function(e){return this.reader.groups(e)},aggregates:function(e){return this.reader.aggregates(e)},serialize:function(e){return this.reader.serialize(e)}}),O=h.data.Model.define({init:function(e){h.data.Model.fn.init.call(this,e),this._defaultId=this.defaults[this.idField]},_time:function(e){var t=this[e],i="_"+e+"Time";return this[i]?this[i]-h.date.toUtcTime(h.date.getDate(t)):v(t)},_date:function(e){var t="_"+e+"Time";return this[t]?this[t]-this._time(e):h.date.getDate(this[e])},clone:function(t,i){var n=this.uid,r=new this.constructor(e.extend({},this.toJSON(),t));return i||(r.uid=n),r},duration:function(){var e=this.end,t=this.start;return e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*h.date.MS_PER_MINUTE},expand:function(e,t,i){return _?_.expand(this,e,t,i):[this]},update:function(e){for(var t in e)this.set(t,e[t]);this._startTime&&this.set("_startTime",h.date.toUtcTime(this.start)),this._endTime&&this.set("_endTime",h.date.toUtcTime(this.end))},isMultiDay:function(){return this.isAllDay||this.duration()>=h.date.MS_PER_DAY},isException:function(){return!this.isNew()&&this.recurrenceId},isOccurrence:function(){return this.isNew()&&this.recurrenceId},isRecurring:function(){return!(!this.recurrenceRule&&!this.recurrenceId)},isRecurrenceHead:function(){return!(!this.id||!this.recurrenceRule)},toOccurrence:function(t){return t=e.extend(t,{recurrenceException:null,recurrenceRule:null,recurrenceId:this.id||this.recurrenceId}),t[this.idField]=this.defaults[this.idField],this.clone(t,!0)},toJSON:function(){var e=h.data.Model.fn.toJSON.call(this);return e.uid=this.uid,delete e._startTime,delete e._endTime,e},shouldSerialize:function(e){return h.data.Model.fn.shouldSerialize.call(this,e)&&"_defaultId"!==e},set:function(e,t){var i=this.isAllDay||!1;if(h.data.Model.fn.set.call(this,e,t),"isAllDay"==e&&t!=i){var n=h.date.getDate(this.start),r=new Date(this.end),s=h.date.getMilliseconds(r);0===s&&t&&(s=m),this.set("start",n),!0===t?(h.date.setTime(r,-s),r<n&&(r=n)):h.date.setTime(r,m-s),this.set("end",r)}},id:"id",fields:{id:{type:"number"},title:{defaultValue:"",type:"string"},start:{type:"date",validation:{required:!0}},startTimezone:{type:"string"},end:{type:"date",validation:{required:!0,dateCompare:{value:function(e){if(e.filter("[name=end]").length){var t=e.closest(".k-scheduler-edit-form"),i=t.find("[name=start]:visible"),n=t.find("[name=end]:visible");if(n[0]&&i[0]){var r,s,o=h.widgetInstance(i,h.ui),l=h.widgetInstance(n,h.ui),d=t.data("kendoEditable"),c=d?d.options.model:null;if(o&&l?(r=o.value(),s=l.value()):(r=h.parseDate(i.val()),s=h.parseDate(n.val())),r&&s){if(c){var u=i.attr(h.attr("timezone")),f=c.startTimezone,p=c.endTimezone;f=f||p,p=p||f,f&&(r=a(r,f,u),s=a(s,p,u))}return r<=s}}}return!0}}}},endTimezone:{type:"string"},recurrenceRule:{defaultValue:"",type:"string"},recurrenceException:{defaultValue:"",type:"string"},isAllDay:{type:"boolean",defaultValue:!1},description:{type:"string"}}}),V=S.extend({init:function(e){S.fn.init.call(this,D(!0,{},{schema:{modelBase:O,model:O}},e)),this.reader=new B(this.options.schema,this.reader)},expand:function(e,t){var i=this.view(),n={};return e&&t&&(n={logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lte",value:t=new Date(t.getTime()+m-1)}]},{logic:"and",filters:[{field:"start",operator:"lte",value:new Date(e.getTime()+m-1)},{field:"end",operator:"gte",value:e}]}]},i=new h.data.Query(function(e,t,i,n){for(var r=e.length,s=[],o=0;o<r;o++)s=s.concat(e[o].expand(t,i,n));return s}(i,e,t,this.reader.timezone)).filter(n).toArray()),i},cancelChanges:function(e){e&&e.isOccurrence()&&this._removeExceptionDate(e),S.fn.cancelChanges.call(this,e)},insert:function(e,t){if(t){if(!(t instanceof O)){var i=t;(t=this._createNewModel()).accept(i)}return(!this._pushCreated&&t.isRecurrenceHead()||t.recurrenceId)&&(t=t.recurrenceId?t:t.toOccurrence(),this._addExceptionDate(t)),S.fn.insert.call(this,e,t)}},pushCreate:function(e){this._pushCreated=!0,S.fn.pushCreate.call(this,e),this._pushCreated=!1},remove:function(e){return e.isRecurrenceHead()?this._removeExceptions(e):e.isRecurring()&&this._addExceptionDate(e),S.fn.remove.call(this,e)},_removeExceptions:function(e){for(var t=this.data().slice(0),i=t.shift(),n=e.id;i;)i.recurrenceId===n&&S.fn.remove.call(this,i),i=t.shift();e.set(H,"")},_removeExceptionDate:function(e){if(e.recurrenceId){var t=this.get(e.recurrenceId);if(t){var i=e.start,n=new RegExp("(\\,?)"+_.toExceptionString(i,this.reader.timezone));t.set(H,t.recurrenceException.replace(n,""))}}},_addExceptionDate:function(e){var t,i=e.start,n=this.reader.timezone,r=this.get(e.recurrenceId),s=r.recurrenceException||"";_.isException(s,i,n)||(t=_.toExceptionString(i,n),r.set(H,s+(s&&t?",":"")+t))}});V.create=function(e){(R(e)||e instanceof h.data.ObservableArray)&&(e={data:e});var t=e||{},i=t.data;if(t.data=i,!(t instanceof V)&&t instanceof h.data.DataSource)throw new Error("Incorrect DataSource type. Only SchedulerDataSource instances are supported");return t instanceof V?t:new V(t)},D(!0,h.data,{SchedulerDataSource:V,SchedulerDataReader:B,SchedulerEvent:O});var W={update:{text:"Save",className:"k-primary k-scheduler-update"},canceledit:{text:"Cancel",className:"k-scheduler-cancel"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-primary k-scheduler-delete",iconClass:"k-icon"}},U={mobile:{dateRange:function(t,i){var s={name:i.field},o=p.date?"":h.attr("role")+'="datepicker" ',a=h.attr("role")+'="datetimepicker" ',l=i.model.isAllDay,d=h.attr("validate")+"='"+!l+"'",c=h.attr("validate")+"='"+l+"'";n(s,i),r(s,i),e('<input type="datetime-local" required '+h.attr("type")+'="date" '+a+h.attr("bind")+'="value:'+i.field+',invisible:isAllDay" '+d+"/>").attr(s).appendTo(t),e('<input type="date" required '+h.attr("type")+'="date" '+o+h.attr("bind")+'="value:'+i.field+',visible:isAllDay" '+c+"/>").attr(s).appendTo(t),e("<span "+h.attr("for")+'="'+i.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},timezonePopUp:function(t,n){var r=i(n.model,n.messages.noTimezone);e('<a href="#" class="k-button k-timezone-button" data-bind="invisible:isAllDay">'+r+"</a>").click(n.click).appendTo(t)},timezone:function(t,i){e("<div "+h.attr("bind")+'="value:'+i.field+'" />').attr({name:i.field}).toggle(i.visible).appendTo(t).kendoMobileTimezoneEditor({optionLabel:i.noTimezone})},recurrence:function(t,i){e("<div "+h.attr("bind")+'="value:'+i.field+'" />').attr({name:i.field}).appendTo(t).kendoMobileRecurrenceEditor({start:i.model.start,timezone:i.timezone,messages:i.messages,pane:i.pane,value:i.model[i.field]})},description:c,multipleResources:function(t,i){var n=l(i,t.field);return function(i){for(var r="",s=t.dataSource.view(),o=0,a=s.length;o<a;o++)r+=h.format('<option value="{0}">{1}</option>',h.getter(t.dataValueField)(s[o]),h.getter(t.dataTextField)(s[o]));e(h.format('<select data-{0}bind="value:{1}" multiple="multiple" data-{0}value-primitive="{3}">{2}</select>',h.ns,t.field,r,t.valuePrimitive)).appendTo(i).attr(n)}},resources:d},desktop:{dateRange:function(t,i){var s={name:i.field},o=i.model.isAllDay,a=h.attr("validate")+"='"+!o+"' ",l=h.attr("validate")+"='"+o+"' ";n(s,i),r(s,i),e('<input type="text" required '+h.attr("type")+'="date" '+h.attr("role")+'="datetimepicker" '+h.attr("bind")+'="value:'+i.field+',invisible:isAllDay" '+a+"/>").attr(s).appendTo(t),e('<input type="text" required '+h.attr("type")+'="date" '+h.attr("role")+'="datepicker" '+h.attr("bind")+'="value:'+i.field+',visible:isAllDay" '+l+"/>").attr(s).appendTo(t),e("<span "+h.attr("bind")+'="text: '+i.field+'Timezone"></span>').appendTo(t),"end"===i.field&&e("<span "+h.attr("bind")+'="text: startTimezone, invisible: endTimezone"></span>').appendTo(t),e("<span "+h.attr("for")+'="'+i.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},timezonePopUp:function(t,i){e('<a href="#" class="k-button" data-bind="invisible:isAllDay">'+i.messages.timezoneEditorButton+"</a>").click(i.click).appendTo(t)},timezone:function(t,i){e("<div "+h.attr("bind")+'="value:'+i.field+'" />').attr({name:i.field}).toggle(i.visible).appendTo(t).kendoTimezoneEditor({optionLabel:i.noTimezone})},recurrence:function(t,i){e("<div "+h.attr("bind")+'="value:'+i.field+'" />').attr({name:i.field}).appendTo(t).kendoRecurrenceEditor({start:i.model.start,timezone:i.timezone,messages:i.messages})},description:c,multipleResources:function(t,i){var n=l(i,t.field);return function(i){e(h.format('<select data-{0}bind="value:{1}">',h.ns,t.field)).appendTo(i).attr(n).kendoMultiSelect({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource,valuePrimitive:t.valuePrimitive,itemTemplate:h.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField),tagTemplate:h.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField)})}},resources:d}},q=h.Observable.extend({init:function(e,t){h.Observable.fn.init.call(this),this.element=e,this.options=D(!0,{},this.options,t),this.createButton=this.options.createButton,this.toggleDateValidationHandler=F(this._toggleDateValidation,this)},_toggleDateValidation:function(t){if("isAllDay"==t.field){var i,n,r,s=this.container,o=this.editable.options.model.isAllDay,a=h.attr("bind");s.find("["+a+"*=end],["+a+"*=start]").each(function(){i=e(this),I.test(i.attr(a))&&(n=i.is("["+h.attr("role")+"=datetimepicker],[type*=datetime]"),r=o!==n,i.attr(h.attr("validate"),r))})}},fields:function(e,t){var i=this,n=i.options.messages,r=i.options.timezone,s=[{field:"title",title:n.editor.title},{field:"start",title:n.editor.start,editor:e.dateRange,timezone:r},{field:"end",title:n.editor.end,editor:e.dateRange,timezone:r},{field:"isAllDay",title:n.editor.allDayEvent}];h.timezone.windows_zones&&(s.push({field:"timezone",title:n.editor.timezone,editor:e.timezonePopUp,click:function(e){e.preventDefault(),i._initTimezoneEditor(t,this)},messages:n.editor,model:t}),s.push({field:"startTimezone",title:n.editor.startTimezone,editor:e.timezone,noTimezone:n.editor.noTimezone}),s.push({field:"endTimezone",title:n.editor.endTimezone,editor:e.timezone,noTimezone:n.editor.noTimezone})),t.recurrenceId||s.push({field:"recurrenceRule",title:n.editor.repeat,editor:e.recurrence,timezone:r,messages:n.recurrenceEditor,pane:this.pane}),"description"in t&&s.push({field:"description",title:n.editor.description,editor:e.description({model:t,field:"description"})});for(var o=0;o<this.options.resources.length;o++){var a=this.options.resources[o];s.push({field:a.field,title:a.title,editor:a.multiple?e.multipleResources(a,t):e.resources(a,t)})}return s},end:function(){return this.editable.end()},_buildEditTemplate:function(e,t,i){var n=this.options.messages,r=D({},h.Template,this.options.templateSettings),s=r.paramName,o=this.options.editable.template,a="";if(o)"string"==typeof o&&(o=window.unescape(o)),a+=h.template(o,r)(e);else for(var l=0,d=t.length;l<d;l++){var c=t[l];if("startTimezone"===c.field&&(a+='<div class="k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones" style="display:none">',a+='<div class="k-edit-form-container">',a+='<div class="k-edit-label"></div>',a+='<div class="k-edit-field"><label class="k-check"><input class="k-timezone-toggle" type="checkbox" />'+n.editor.separateTimezones+"</label></div>"),a+='<div class="k-edit-label"><label for="'+c.field+'">'+(c.title||c.field||"")+"</label></div>",!e.editable||e.editable(c.field))i.push(c),a+="<div "+h.attr("container-for")+'="'+c.field+'" class="k-edit-field"></div>';else{var u="#:";c.field?u+=(c=h.expr(c.field,s))+"==null?'':"+c:u+="''",u+="#",a+='<div class="k-edit-field">'+(u=h.template(u,r))(e)+"</div>"}"endTimezone"===c.field&&(a+=this._createEndTimezoneButton())}return a},_createEndTimezoneButton:function(){return"</div></div>"},_revertTimezones:function(e){e.set("startTimezone",this._startTimezone),e.set("endTimezone",this._endTimezone),delete this._startTimezone,delete this._endTimezone}}),$=q.extend({init:function(){q.fn.init.apply(this,arguments),this.pane=h.mobile.ui.Pane.wrap(this.element),this.pane.element.parent().css("height",this.options.height),this.view=this.pane.view(),this._actionSheetButtonTemplate=h.template('<li><a #=attr# class="k-button #=className#" href="\\#">#:text#</a></li>'),this._actionSheetPopupOptions=e(document.documentElement).hasClass("km-root")?{modal:!1}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"}},options:{animations:{left:"slide",right:"slide:right"}},destroy:function(){this.close(),this.unbind(),this.pane.destroy()},_initTimezoneEditor:function(t){var n=this,r=n.pane,s=n.options.messages,o=n.timezoneView,a=n.container.find(".k-scheduler-timezones"),l=a.find(".k-timezone-toggle"),d=a.find(".k-edit-label:last").add(a.find(".k-edit-field:last")),c=function(e){if("startTimezone"===e.field){var i=t.startTimezone;l.prop("disabled",!i),i||(d.hide(),t.set("endTimezone",""),l.prop("checked",!1))}};if(n._startTimezone=t.startTimezone||"",n._endTimezone=t.endTimezone||"",!o){var u='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">'+s.cancel+"</a>"+s.editor.timezoneTitle+'<a href="#" class="k-button k-scheduler-update">'+s.save+"</a></div></div>";this.timezoneView=o=r.append(u),o.contentElement().append(a.show()),o.element.on("click"+A,".k-scheduler-cancel, .k-scheduler-update",function(o){o.preventDefault(),o.stopPropagation(),e(this).hasClass("k-scheduler-cancel")&&n._revertTimezones(t),t.unbind("change",c);var a=r.element.find("#edit").data("kendoMobileView"),l=i(t,s.editor.noTimezone);a.contentElement().find(".k-timezone-button").text(l),r.navigate(a,n.options.animations.right)}),l.click(function(){d.toggle(l.prop("checked")),t.set("endTimezone","")}),t.bind("change",c)}l.prop("checked",t.endTimezone).prop("disabled",!t.startTimezone),t.endTimezone?d.show():d.hide(),r.navigate(o,n.options.animations.left)},_createActionSheetButton:function(e){return e.template=this._actionSheetButtonTemplate,this.createButton(e)},showDialog:function(t){var i="",n='<ul><li class="km-actionsheet-title">'+t.title+"</li>",r=this.element.find(".k-event["+h.attr("uid")+"='"+t.model.uid+"']");this.container&&(r=this.container.find(".k-scheduler-delete"))[0]&&(i="phone");for(var s=0;s<t.buttons.length;s++)n+=this._createActionSheetButton(t.buttons[s]);var o=e(n+="</ul>").appendTo(this.pane.view().element).kendoMobileActionSheet({type:i,cancel:this.options.messages.cancel,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy()},command:function(i){var n=o.element.find("li:not(.km-actionsheet-cancel) > .k-button").index(e(i.currentTarget));n>-1&&(o.close(),t.buttons[n].click())},popup:this._actionSheetPopupOptions}).data("kendoMobileActionSheet");o.open(r)},editEvent:function(t){var i=this.pane,n="",r=this.options.messages,s=r.save,o=r.destroy,a=r.cancel,l=r.editor.editorTitle;n+='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form k-mobile-list" id="edit" '+h.attr("uid")+'="'+t.uid+'"><div data-role="header" class="k-header"><a href="#" class="k-button k-scheduler-cancel">'+a+"</a>"+l+'<a href="#" class="k-button k-scheduler-update">'+s+"</a></div>";var d=this.fields(U.mobile,t),c=this,u=[];n+=this._buildEditTemplate(t,d,u),!t.isNew()&&this.options.editable&&!1!==this.options.editable.destroy&&(n+='<div class="k-edit-buttons"><a href="#" class="k-scheduler-delete k-button">'+o+"</a></div>"),n+="</div>";var f=i.append(n),p=this.container=f.element;return this.editable=p.kendoEditable({fields:u,model:t,clearContainer:!1,target:c.options.target,validateOnBlur:!0}).data("kendoEditable"),p.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){e(this).next().children("input").click()}),this.trigger("edit",{container:p,model:t})?this.trigger("cancel",{container:p,model:t}):(p.on("click"+A,"a.k-scheduler-edit, a.k-scheduler-cancel, a.k-scheduler-update, a.k-scheduler-delete",function(n){n.preventDefault(),n.stopPropagation();var r=e(this);if(r.hasClass("k-scheduler-edit"))i.navigate("#edit",c.options.animations.right);else{var s="cancel";r.hasClass("k-scheduler-update")?s="save":r.hasClass("k-scheduler-delete")&&(s="remove"),c.trigger(s,{container:p,model:t})}}),i.navigate(f,c.options.animations.left),t.bind("change",c.toggleDateValidationHandler)),this.editable},_views:function(){return this.pane.element.find(h.roleSelector("view")).not(this.view.element)},close:function(){if(this.container){this.pane.navigate("",this.options.animations.right);for(var e,t=this._views(),i=0,n=t.length;i<n;i++)(e=t.eq(i).data("kendoMobileView"))&&e.purge();t.remove(),this.container=null,this.editable&&(this.editable.options.model.unbind("change",this.toggleDateValidationHandler),this.editable.destroy(),this.editable=null),this.timezoneView=null}}}),j=q.extend({destroy:function(){this.close(),this.unbind()},editEvent:function(t){var i=this,n=i.options.editable,r="<div "+h.attr("uid")+'="'+t.uid+'" class="k-popup-edit-form k-scheduler-edit-form"><div class="k-edit-form-container">',s=i.options.messages,o=s.save,a=s.cancel,l=s.destroy,d=this.fields(U.desktop,t),c=[];r+=this._buildEditTemplate(t,d,c);var u=T(n)?n.window:{};r+='<div class="k-edit-buttons k-state-default">',r+=this.createButton({name:"update",text:o,attr:void 0})+this.createButton({name:"canceledit",text:a,attr:void 0}),t.isNew()||!1===n.destroy||(r+=this.createButton({name:"delete",text:l,attr:void 0})),r+="</div></div></div>";var f=this.container=e(r).appendTo(i.element).eq(0).kendoWindow(D({modal:!0,resizable:!1,draggable:!0,title:s.editor.editorTitle,visible:!1,close:function(e){e.userTriggered&&i.trigger("cancel",{container:f,model:t})&&e.preventDefault()}},u));return i.editable=f.kendoEditable({fields:c,model:t,clearContainer:!1,validateOnBlur:!0,target:i.options.target}).data("kendoEditable"),i.trigger("edit",{container:f,model:t})?i.trigger("cancel",{container:f,model:t}):(f.data("kendoWindow").center().open(),f.on("click"+A,"a.k-scheduler-cancel",function(e){e.preventDefault(),e.stopPropagation(),i.trigger("cancel",{container:f,model:t})}),f.on("click"+A,"a.k-scheduler-update",function(e){e.preventDefault(),e.stopPropagation(),i.trigger("save",{container:f,model:t})}),f.on("click"+A,"a.k-scheduler-delete",function(e){e.preventDefault(),e.stopPropagation(),i.trigger("remove",{container:f,model:t})}),h.cycleForm(f),t.bind("change",i.toggleDateValidationHandler)),i.editable},close:function(){var e=this,t=function(){e.editable&&(e.editable.options.model.unbind("change",e.toggleDateValidationHandler),e.editable.destroy(),e.editable=null,e.container=null),e.popup&&(e.popup.destroy(),e.popup=null)};e.editable?(e._timezonePopup&&e._timezonePopup.data("kendoWindow")&&(e._timezonePopup.data("kendoWindow").destroy(),e._timezonePopup=null),e.container.is(":visible")?e.container.data("kendoWindow").bind("deactivate",t).close():t()):t()},_createEndTimezoneButton:function(){var e=this.options.messages,t="";return t+='<div class="k-edit-buttons k-state-default">',t+=this.createButton({name:"savetimezone",text:e.save})+this.createButton({name:"canceltimezone",text:e.cancel}),t+="</div></div></div>"},showDialog:function(t){var i=h.format("<div class='k-popup-edit-form'><div class='k-edit-form-container'><p class='k-popup-message'>{0}</p>",t.text);i+='<div class="k-edit-buttons k-state-default">';for(var n=0;n<t.buttons.length;n++)i+=this.createButton(t.buttons[n]);i+="</div></div></div>";var r=this.element;this.popup&&this.popup.destroy();var s=this.popup=e(i).appendTo(r).eq(0).on("click",".k-button",function(i){i.preventDefault(),s.close();var n=e(i.currentTarget).index();t.buttons[n].click()}).kendoWindow({modal:!0,resizable:!1,draggable:!1,title:t.title,visible:!1,close:function(){this.destroy(),r.focus()}}).getKendoWindow();s.center().open()},_initTimezoneEditor:function(e,t){var i,n=this,r=n.container.find(".k-scheduler-timezones"),s=r.find(".k-timezone-toggle"),o=r.find(".k-edit-label:last").add(r.find(".k-edit-field:last")),a=r.find(".k-scheduler-savetimezone"),l=r.find(".k-scheduler-canceltimezone"),d=n._timezonePopup,c=function(t){if("startTimezone"===t.field){var i=e.startTimezone;s.prop("disabled",!i),i||(o.hide(),e.set("endTimezone",""),s.prop("checked",!1))}};n._startTimezone=e.startTimezone,n._endTimezone=e.endTimezone,d||(n._timezonePopup=d=r.kendoWindow({modal:!0,resizable:!1,draggable:!0,title:n.options.messages.editor.timezoneEditorTitle,visible:!1,close:function(i){e.unbind("change",c),i.userTriggered&&n._revertTimezones(e),t&&t.focus()}}),s.click(function(){o.toggle(s.prop("checked")),e.set("endTimezone","")}),a.click(function(e){e.preventDefault(),i.close()}),l.click(function(t){t.preventDefault(),n._revertTimezones(e),i.close()}),e.bind("change",c)),s.prop("checked",e.endTimezone).prop("disabled",!e.startTimezone),e.endTimezone?o.show():o.hide(),(i=d.data("kendoWindow")).center().open()}}),G=y.extend({init:function(t,i){var n=this;w.fn.init.call(n,t,i),n.options.views&&n.options.views.length||(n.options.views=["day","week"]),n.resources=[],n._initModel(),n._wrapper(),n._views(),n._toolbar(),n._dataSource(),n._resources(),n._resizeHandler=function(){n.resize()},n.wrapper.on("mousedown"+A+" selectstart"+A,function(t){e(t.target).is(":kendoFocusable")||t.preventDefault()}),n.options.editable&&!1!==n.options.editable.resize&&n._resizable(),n._movable(),n._bindResize(),n.options.messages&&n.options.messages.recurrence&&(_.options=n.options.messages.recurrence),n._selectable(),n._ariaId=h.guid(),n._createEditor()},_bindResize:function(){e(window).on("resize"+A,this._resizeHandler)},_unbindResize:function(){e(window).off("resize"+A,this._resizeHandler)},dataItems:function(){var t,i,n=this.items(),r=this._data,s=e.map(n,function(t){return e(t).attr("data-uid")}),o={},a=s.length;for(t=0;t<a;t++)o[s[t]]=null;var l=r.length;for(t=0;t<l;t++){var d=r[t];void 0!==o[d.uid]&&(o[d.uid]=d)}var c=[];for(i in o)c.push(o[i]);return c},_isMobile:function(){var e=this.options;return!0===e.mobile&&h.support.mobileOS||"phone"===e.mobile||"tablet"===e.mobile},_isMobilePhoneView:function(){var e=this.options;return!0===e.mobile&&h.support.mobileOS&&!h.support.mobileOS.tablet||"phone"===e.mobile},_groupsByResource:function(e,t,i,n,r){i||(i=[]);var s=e[0];if(s){for(var o,a=s.dataSource.view(),l=0,d=0;d<a.length;d++){var c=h.getter(s.dataValueField)(a[d]),u=t+l+d;(o=this._groupsByResource(e.slice(1),u,i,c,s.field))[s.field]=c,l=o.groupIndex,r&&n&&(o[r]=n),1===e.length&&(o.groupIndex=t+d,i.push(o))}return o}return{}},data:function(){return this._data},select:function(t){var i,n=this.view(),r=this._selection,s=n.groups;if(void 0===t){var o,a=n._selectedSlots;return r?(r&&r.events&&(o=this._selectedEvents()),{start:r.start,end:r.end,events:o,slots:a,resources:n._resourceBySlot(r)}):[]}if(!t)return this._selection=null,this._old=null,void n.clearSelection();if(e.isArray(t)&&(t={events:t.splice(0)}),t.resources){var l,d=[],c=[];n.groupedResources&&this._groupsByResource(n.groupedResources,0,c);for(l in t.resources)d.push({field:l,operator:"eq",value:t.resources[l]});i=new h.data.Query(c).filter(d).toArray()}if(t.events&&t.events.length)return this._selectEvents(t.events,i),void this._select();if(s&&t.start&&t.end){var u,f=g(n._startDate),p=h.date.addDays(g(n._endDate),1);t.start<p&&f<=t.end&&(u=(i&&i.length?s[i[0].groupIndex]:s[0]).ranges(t.start,t.end,t.isAllDay,!1)).length&&(this._selection={start:h.timezone.toLocalDate(u[0].start.start),end:h.timezone.toLocalDate(u[u.length-1].end.end),groupIndex:u[0].start.groupIndex,index:u[0].start.index,isAllDay:u[0].start.isDaySlot,events:[]},this._select())}},_selectEvents:function(e,t){var i,n=this.view(),r=n.groups,s=e.length,o=t&&t.length;for(i=0;i<s;i++)if(r&&o){for(var a=r[t[0].groupIndex],l=[],d=a.timeSlotCollectionCount(),c=a.daySlotCollectionCount(),u=0;u<d;u++)l=l.concat(a.getTimeSlotCollection(u).events());for(var f=0;f<c;f++)l=l.concat(a.getDaySlotCollection(f).events());(l=new h.data.Query(l).filter({field:"element[0].getAttribute('data-uid')",operator:"eq",value:e[i]}).toArray())[0]&&this._createSelection(l[0].element)}else{var p=n.element.find(h.format(".k-event[data-uid={0}], .k-task[data-uid={0}]",e[i]));p.length&&this._createSelection(p[0])}},_selectable:function(){var t=this,i=t.wrapper,n=h.support.mobileOS?"touchend":"mousedown";if(t.options.selectable){t._tabindex(),i.on(n+A,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event",function(e){var n=e.which,r=e.button,s=h.support.browser,o=n&&3===n||r&&2==r;h.support.mobileOS&&e.isDefaultPrevented()||(o||t._createSelection(e.currentTarget),i.focus(),s.msie&&s.version<9&&setTimeout(function(){i.focus()}))});var r=e.proxy(t._mouseMove,t);i.on("mousedown"+A,".k-scheduler-header-all-day td, .k-scheduler-content td",function(e){var t=e.which,n=e.button;t&&3===t||n&&2==n||i.on("mousemove"+A,".k-scheduler-header-all-day td, .k-scheduler-content td",r)}),i.on("mouseup"+A+" mouseleave"+A,function(){i.off("mousemove"+A,".k-scheduler-header-all-day td, .k-scheduler-content td",r)}),i.on("focus"+A,function(){t._selection||t._createSelection(t.wrapper.find(".k-scheduler-content").find("td:first")),t._select()}),i.on("focusout"+A,function(){t._ctrlKey=t._shiftKey=!1}),i.on("keydown"+A,F(t._keydown,t)),i.on("keyup"+A,function(e){t._ctrlKey=e.ctrlKey,t._shiftKey=e.shiftKey})}},_select:function(){var t=this.view(),i=this.wrapper,n=t.current(),r=this._selection;if(n&&(n.removeAttribute("id"),n.removeAttribute("aria-label"),i.removeAttr("aria-activedescendant")),t.select(r),(n=t.current())&&this._old!==n){var s=e(n).data("uid");if(this._old&&s&&s===e(this._old).data("uid"))return;var o,a=r,l=this._selectedEvents(),d=t._selectedSlots;l[0]?(a=l[0]||r,o=h.format(this.options.messages.ariaEventLabel,a.title,a.start,a.start)):o=h.format(this.options.messages.ariaSlotLabel,a.start,a.end),n.setAttribute("id",this._ariaId),n.setAttribute("aria-label",o),i.attr("aria-activedescendant",this._ariaId),this._old=n,this.trigger("change",{start:r.start,end:r.end,events:l,slots:d,resources:t._resourceBySlot(r)})}},_selectedEvents:function(){for(var e,t=this._selection.events,i=t.length,n=0,r=[];n<i;n++)(e=this.occurrenceByUid(t[n]))&&r.push(e);return r},_mouseMove:function(t){var i=this;clearTimeout(i._moveTimer),i._moveTimer=setTimeout(function(){var n=i.view(),r=i._selection;if(r){var s=n.selectionByElement(e(t.currentTarget));if(s&&r.groupIndex===s.groupIndex){var o=s.startDate(),a=s.endDate();o>=r.end?r.backward=!1:a<=r.start&&(r.backward=!0),r.backward?r.start=o:r.end=a,i._select()}}},5)},_viewByIndex:function(e){var t,i=this.views;for(t in i){if(!e)return t;e--}},_keydown:function(t){var i=t.keyCode,n=this.view(),r=n.options.editable,s=this._selection,o=t.shiftKey;this._ctrlKey=t.ctrlKey,this._shiftKey=t.shiftKey,i===b.TAB?n.moveToEvent(s,o)&&(this._select(),t.preventDefault()):r&&i===b.ENTER?s.events.length?!1!==r.update&&this.editEvent(s.events[0]):!1!==r.create&&(s.isAllDay&&(s=e.extend({},s,{end:h.date.addDays(s.end,-1)})),this.addEvent(D({},s,n._resourceBySlot(s)))):i===b.DELETE&&!1!==r&&!1!==r.destroy?this.removeEvent(s.events[0]):i>=49&&i<=57?this.view(this._viewByIndex(i-49)):n.move(s,i,o)&&(n.inRange(s)?this._select():this.date(s.start),t.preventDefault()),this._adjustSelectedDate()},_createSelection:function(t){var i,n,r;this._selection&&(this._ctrlKey||this._shiftKey)||(this._selection={events:[],groupIndex:0}),t=e(t),r=this._selection,t.is(".k-event")&&(i=t.attr(h.attr("uid"))),(n=this.view().selectionByElement(t))&&(r.groupIndex=n.groupIndex||0),i&&(n=o(this._data,i)),n&&n.uid&&(i=[n.uid]),this._updateSelection(n,i),this._adjustSelectedDate()},_updateSelection:function(e,t){var i=this._selection;if(e&&i){var n=this.view();if(e.uid&&(e=n._updateEventForSelection(e)),this._shiftKey&&i.start&&i.end){var r=e.end<i.end;i.end=e.endDate?e.endDate():e.end,r&&n._timeSlotInterval&&h.date.setTime(i.end,-n._timeSlotInterval())}else i.start=e.startDate?e.startDate():e.start,i.end=e.endDate?e.endDate():e.end;i.isAllDay="isDaySlot"in e?e.isDaySlot:e.isAllDay,i.index=e.index,this._ctrlKey?i.events=i.events.concat(t||[]):i.events=t||[]}},options:{name:"Scheduler",date:M,editable:!0,autoBind:!0,snap:!0,mobile:!1,timezone:"",allDaySlot:!0,min:new Date(1900,0,1),max:new Date(2099,11,31),toolbar:null,messages:{today:"Today",pdf:"Export to PDF",save:"Save",cancel:"Cancel",destroy:"Delete",deleteWindowTitle:"Delete event",ariaSlotLabel:"Selected from {0:t} to {1:t}",ariaEventLabel:"{0} on {1:D} at {2:t}",views:{day:"Day",week:"Week",workWeek:"Work Week",agenda:"Agenda",month:"Month",timeline:"Timeline",timelineWeek:"Timeline Week",timelineWorkWeek:"Timeline Work Week",timelineMonth:"Timeline Month"},recurrenceMessages:{deleteWindowTitle:"Delete Recurring Item",deleteWindowOccurrence:"Delete current occurrence",deleteWindowSeries:"Delete the series",editWindowTitle:"Edit Recurring Item",editWindowOccurrence:"Edit current occurrence",editWindowSeries:"Edit the series"},editable:{confirmation:"Are you sure you want to delete this event?"},editor:{title:"Title",start:"Start",end:"End",allDayEvent:"All day event",description:"Description",repeat:"Repeat",timezone:" ",startTimezone:"Start timezone",endTimezone:"End timezone",separateTimezones:"Use separate start and end time zones",timezoneEditorTitle:"Timezones",timezoneEditorButton:"Time zone",timezoneTitle:"Time zones",noTimezone:"No timezone",editorTitle:"Event"}},height:null,width:null,resources:[],group:{resources:[],direction:"horizontal"},views:[],selectable:!1},events:["remove","edit","cancel","save","add","dataBinding","dataBound","moveStart","move","moveEnd","resizeStart","resize","resizeEnd","navigate","change"],destroy:function(){w.fn.destroy.call(this),this.dataSource&&(this.dataSource.unbind("change",this._refreshHandler),this.dataSource.unbind("progress",this._progressHandler),this.dataSource.unbind("error",this._errorHandler)),this.calendar&&(this.calendar.destroy(),this.popup.destroy()),this.view()&&this.view().destroy(),this._editor&&this._editor.destroy(),this._moveDraggable&&this._moveDraggable.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),this.element.add(this.wrapper).add(this.toolbar).add(this.popup).off(A),clearTimeout(this._moveTimer),this._model=null,this.toolbar=null,this.element=null,e(window).off("resize"+A,this._resizeHandler),h.destroy(this.wrapper)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&e.fetch()},items:function(){return this.wrapper.find(".k-scheduler-content").children(".k-event, .k-task")},_movable:function(){var t,i,n,r,s,o,a,l=this,d=0,c=l._isMobile(),f=l.options.editable&&!1!==l.options.editable.move,p=l.options.editable&&!1!==l.options.editable.resize;(f||p&&c)&&(c&&h.support.mobileOS.android&&(d=5),l._moveDraggable=new h.ui.Draggable(l.element,{distance:d,filter:".k-event",ignore:".k-resize-handle",holdToDrag:c}),f&&l._moveDraggable.bind("dragstart",function(e){var r=l.view(),d=e.currentTarget;if(r.options.editable&&!1!==r.options.editable.move){if(c&&!d.hasClass("k-event-active"))return l.element.find(".k-event-active").removeClass("k-event-active"),void e.preventDefault();s=l.occurrenceByUid(d.attr(h.attr("uid"))),(o=s.clone()).update(r._eventOptionsForMove(o)),t=r._slotByPosition(e.x.startLocation,e.y.startLocation),n=t.startOffset(e.x.startLocation,e.y.startLocation,l.options.snap),i=t,a=t,t&&!l.trigger("moveStart",{event:s})||e.preventDefault()}else e.preventDefault()}).bind("drag",function(e){var a,d,c=l.view(),f=c._slotByPosition(e.x.location,e.y.location);f&&(r=f.startOffset(e.x.location,e.y.location,l.options.snap),f.isDaySlot!==t.isDaySlot?(t=c._slotByPosition(e.x.location,e.y.location),n=t.startOffset(e.x.location,e.y.location,l.options.snap),a=r-n,o.isAllDay=f.isDaySlot,o.start=h.timezone.toLocalDate(n),o.end=h.timezone.toLocalDate(r),c._updateMoveHint(o,f.groupIndex,a),d={start:o.start,end:o.end}):(a=r-n,c._updateMoveHint(o,f.groupIndex,a),d=u(o,a)),l.trigger("move",{event:s,slot:{element:f.element,start:f.startDate(),end:f.endDate(),isDaySlot:f.isDaySlot},resources:c._resourceBySlot(f),start:d.start,end:d.end})?c._updateMoveHint(o,f.groupIndex,a):i=f)}).bind("dragend",function(d){l.view()._removeMoveHint();var c=u(o,r-n),f=c.start,p=c.end,m=l.view()._resourceBySlot(i),g=l.view()._resourceBySlot(t);if(!l.trigger("moveEnd",{event:s,slot:{element:i.element,start:i.startDate(),end:i.endDate()},start:f,end:p,resources:m})&&(s.start.getTime()!==f.getTime()||s.end.getTime()!==p.getTime()||a.isDaySlot!==i.isDaySlot||h.stringify(m)!==h.stringify(g))){var v,_=l.view()._eventOptionsForMove(s);v=a.isDaySlot!==i.isDaySlot?i.isDaySlot?e.extend({start:i.startDate(),end:i.startDate(),isAllDay:i.isDaySlot},_,m):e.extend({isAllDay:i.isDaySlot,start:f,end:p},_,m):e.extend({isAllDay:s.isAllDay,start:f,end:p},_,m),l._updateEvent(null,s,v)}d.currentTarget.removeClass("k-event-active"),this.cancelHold()}).bind("dragcancel",function(){l.view()._removeMoveHint(),this.cancelHold()}),c&&(l._moveDraggable.bind("hold",function(e){l.element.find(".k-scheduler-monthview").length&&e.preventDefault(),l.element.find(".k-event-active").removeClass("k-event-active"),e.currentTarget.addClass("k-event-active")}),h.support.mobileOS.android||l._moveDraggable.userEvents.bind("press",function(e){e.preventDefault()})))},_resizable:function(){function t(e){var t={"k-resize-e":"east","k-resize-w":"west","k-resize-n":"north","k-resize-s":"south"};for(var i in t)if(e.hasClass(i))return t[i]}var i,n,r,s,o,a=this,l=0;a._isMobile()&&h.support.mobileOS.android&&(l=5),a._resizeDraggable=new h.ui.Draggable(a.element,{distance:l,filter:".k-resize-handle",dragstart:function(t){var l=e(t.currentTarget).closest(".k-event").attr(h.attr("uid")),d=a.view();r=a.occurrenceByUid(l),s=r.clone(),d._updateEventForResize(s),o=d._slotByPosition(t.x.startLocation,t.y.startLocation),a.trigger("resizeStart",{event:r})&&t.preventDefault(),i=h.date.toUtcTime(s.start),n=h.date.toUtcTime(s.end)},drag:function(l){if(o){var d=t(e(l.currentTarget)),c=a.view(),u=c._slotByPosition(l.x.location,l.y.location);if(u&&o.groupIndex==u.groupIndex){o=u;var f=i,p=n;"south"==d?!o.isDaySlot&&o.end-h.date.toUtcTime(s.start)>=c._timeSlotInterval()&&(n=s.isAllDay?o.startOffset(l.x.location,l.y.location,a.options.snap):o.endOffset(l.x.location,l.y.location,a.options.snap)):"north"==d?!o.isDaySlot&&h.date.toUtcTime(s.end)-o.start>=c._timeSlotInterval()&&(i=o.startOffset(l.x.location,l.y.location,a.options.snap)):"east"==d?o.isDaySlot&&h.date.toUtcTime(h.date.getDate(o.endDate()))>=h.date.toUtcTime(h.date.getDate(s.start))?n=s.isAllDay?o.startOffset(l.x.location,l.y.location,a.options.snap):o.endOffset(l.x.location,l.y.location,a.options.snap):!o.isDaySlot&&o.end-h.date.toUtcTime(s.start)>=c._timeSlotInterval()&&(n=o.endOffset(l.x.location,l.y.location,a.options.snap)):"west"==d&&(o.isDaySlot&&h.date.toUtcTime(h.date.getDate(s.end))>=h.date.toUtcTime(h.date.getDate(o.startDate()))?i=o.startOffset(l.x.location,l.y.location,a.options.snap):!o.isDaySlot&&h.date.toUtcTime(s.end)-o.start>=c._timeSlotInterval()&&(i=o.startOffset(l.x.location,l.y.location,a.options.snap))),a.trigger("resize",{event:r,slot:{element:o.element,start:o.startDate(),end:o.endDate()},start:h.timezone.toLocalDate(i),end:h.timezone.toLocalDate(n),resources:c._resourceBySlot(o)})?(i=f,n=p):c._updateResizeHint(s,o.groupIndex,i,n)}}},dragend:function(l){var d=e(l.currentTarget),c=new Date(s.start.getTime()),u=new Date(s.end.getTime()),f=t(d);a.view()._removeResizeHint(),"south"==f?u=h.timezone.toLocalDate(n):"north"==f?c=h.timezone.toLocalDate(i):"east"==f?u=o.isDaySlot?h.date.getDate(h.timezone.toLocalDate(n)):h.timezone.toLocalDate(n):"west"==f&&(o.isDaySlot?((c=new Date(h.timezone.toLocalDate(i))).setHours(0),c.setMinutes(0)):c=h.timezone.toLocalDate(i)),!a.trigger("resizeEnd",{event:r,slot:{element:o.element,start:o.startDate(),end:o.endDate()},start:c,end:u,resources:a.view()._resourceBySlot(o)})&&u.getTime()>=c.getTime()&&(s.start.getTime()==c.getTime()&&s.end.getTime()==u.getTime()||(a.view()._updateEventForResize(r),a._updateEvent(f,r,{start:c,end:u}))),o=null,r=null},dragcancel:function(){a.view()._removeResizeHint(),o=null,r=null}})},_updateEvent:function(e,t,i){var n=this,r=function(e,t){try{n._preventRefresh=!0,e.update(i),n._convertDates(e)}finally{n._preventRefresh=!1}n.trigger("save",{event:e})||(t&&t(),n._updateSelection(e),n.dataSource.sync())},s=function(e){return e.recurrenceRule?n.dataSource.getByUid(e.uid):n.dataSource.get(e.recurrenceId)};if(t.recurrenceRule||t.isOccurrence()){var o=n.options.messages.recurrenceMessages;n._showRecurringDialog(t,function(){var e=s(t),i=e.toOccurrence({start:t.start,end:t.end});r(n.dataSource.add(i),function(){n._convertDates(e)})},function(){var o=s(t);if("south"==e||"north"==e){if(i.start){var a=h.date.getDate(o.start);h.date.setTime(a,v(i.start)),i.start=a}if(i.end){var l=h.date.getDate(o.end);h.date.setTime(l,v(i.end)),i.end=l}}n.dataSource._removeExceptions(o),r(o)},{title:o.editWindowTitle,text:o.editRecurring?o.editRecurring:z,occurrenceText:o.editWindowOccurrence,seriesText:o.editWindowSeries})}else r(n.dataSource.getByUid(t.uid))},_modelForContainer:function(t){return t=e(t).closest("["+h.attr("uid")+"]"),this.dataSource.getByUid(t.attr(h.attr("uid")))},showDialog:function(e){this._editor.showDialog(e)},focus:function(){this.wrapper.focus()},_confirmation:function(e,t){var i=this.options.editable;if(!0===i||!1!==i.confirmation){var n=this.options.messages,r=n.deleteWindowTitle,s="string"==typeof i.confirmation?i.confirmation:n.editable.confirmation;if(this._isEditorOpened()&&t.isRecurring()){var o=this.options.messages.recurrenceMessages;r=o.deleteWindowTitle,s=t.isException()?o.deleteRecurringConfirmation?o.deleteRecurringConfirmation:"Are you sure you want to delete this event occurrence?":o.deleteSeriesConfirmation?o.deleteSeriesConfirmation:"Are you sure you want to delete the whole series?"}var a=[{name:"destroy",text:n.destroy,click:function(){e()}}];this._isMobile()&&h.mobile.ui.Pane||a.push({name:"canceledit",text:n.cancel,click:function(){e(!0)}}),this._unbindResize(),this.showDialog({model:t,text:s,title:r,buttons:a}),this._bindResize()}else e()},addEvent:function(e){var t,i=this._editor.editable,n=this.dataSource;e=e||{},!this.trigger("add",{event:e})&&(i&&i.end()||!i)&&(this.cancelEvent(),e&&e.toJSON&&(e=e.toJSON()),(t=n.add(e))&&(this.cancelEvent(),this._editEvent(t)))},saveEvent:function(){var e=this._editor;if(e){var t=e.editable,i=e.container,n=this._modelForContainer(i);i&&t&&t.end()&&!this.trigger("save",{container:i,event:n})&&(n.isRecurrenceHead()&&this.dataSource._removeExceptions(n),n.dirty||n.isOccurrence()||this._convertDates(n,"remove"),this.dataSource.sync())}},cancelEvent:function(){var e,t=this._editor,i=t.container;i&&((e=this._modelForContainer(i))&&e.isOccurrence()&&(this._convertDates(e,"remove"),this._convertDates(this.dataSource.get(e.recurrenceId),"remove")),this.dataSource.cancelChanges(e),t.close())},editEvent:function(e){var t="string"==typeof e?this.occurrenceByUid(e):e;t&&(this.cancelEvent(),t.isRecurring()?this._editRecurringDialog(t):this._editEvent(t))},_editEvent:function(e){this._unbindResize(),this._createPopupEditor(e),this._bindResize()},_editRecurringDialog:function(e){var t=this,i=t.options.messages.recurrenceMessages;t._showRecurringDialog(e,function(){e.isException()?t._editEvent(e):t.addEvent(e)},function(){e.recurrenceId&&(e=t.dataSource.get(e.recurrenceId)),t._editEvent(e)},{title:i.editWindowTitle,text:i.editRecurring?i.editRecurring:z,occurrenceText:i.editWindowOccurrence,seriesText:i.editWindowSeries})},_showRecurringDialog:function(e,t,i,n){var r=this.options.editable,s=T(r)?r.editRecurringMode:"dialog";"series"===s?i():"occurrence"===s?t():(this._unbindResize(),this.showDialog({model:e,title:n.title,text:n.text,buttons:[{text:n.occurrenceText,click:t},{text:n.seriesText,click:i}]}),this._bindResize())},_createButton:function(e){var t=e.template||'<a class="k-button #=className#" #=attr# href="\\#">#=text#</a>',i="string"==typeof e?e:e.name||e.text,n={className:"k-scheduler-"+(i||"").replace(/\s/g,""),text:i,attr:""};if(!(i||T(e)&&e.template))throw new Error("Custom commands should have name specified");return T(e)?(e.className&&(e.className+=" "+n.className),"edit"===i&&T(e.text)&&((e=D(!0,{},e)).text=e.text.edit),n=D(!0,n,W[i],e)):n=D(!0,n,W[i]),h.template(t)(n)},_convertDates:function(e,t){var i=this.dataSource.reader.timezone,n=e.startTimezone,r=e.endTimezone,s=e.start,o=e.start;t=t||"apply",n=n||r,r=r||n,n&&(i?"apply"===t?(s=h.timezone.convert(e.start,i,n),o=h.timezone.convert(e.end,i,r)):(s=h.timezone.convert(e.start,n,i),o=h.timezone.convert(e.end,r,i)):(s=h.timezone[t](e.start,n),o=h.timezone[t](e.end,r)),e._set("start",s),e._set("end",o))},_createEditor:function(){var e,t=this;(e=this._isMobile()&&h.mobile.ui.Pane?t._editor=new $(this.wrapper,D({},this.options,{target:this,timezone:t.dataSource.reader.timezone,resources:t.resources,createButton:F(this._createButton,this)})):t._editor=new j(this.wrapper,D({},this.options,{target:this,createButton:F(this._createButton,this),timezone:t.dataSource.reader.timezone,resources:t.resources}))).bind("cancel",function(e){t.trigger("cancel",{container:e.container,event:e.model})?e.preventDefault():(t.cancelEvent(),t.focus())}),e.bind("edit",function(e){t.trigger("edit",{container:e.container,event:e.model})&&e.preventDefault()}),e.bind("save",function(){t.saveEvent()}),e.bind("remove",function(e){t.removeEvent(e.model)})},_createPopupEditor:function(e){var t=this._editor;e.isNew()&&!e.isOccurrence()||(e.isOccurrence()&&this._convertDates(e.recurrenceId?this.dataSource.get(e.recurrenceId):e),this._convertDates(e)),this.editable=t.editEvent(e)},removeEvent:function(e){var t=this,i="string"==typeof e?t.occurrenceByUid(e):e;i&&(i.isRecurring()?t._deleteRecurringDialog(i):t._confirmation(function(e){e||t._removeEvent(i)},i))},occurrenceByUid:function(e){var t=this.dataSource.getByUid(e);return t||(t=o(this._data,e)),t},occurrencesInRange:function(e,t){return new h.data.Query(this._data).filter({logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lt",value:t}]},{logic:"and",filters:[{field:"start",operator:"lte",value:e},{field:"end",operator:"gt",value:e}]}]}).toArray()},_removeEvent:function(e){this.trigger("remove",{event:e})||this.dataSource.remove(e)&&this.dataSource.sync()},_deleteRecurringDialog:function(e){var t,i,n,r,s=this,o=e,a=s.options.editable,l=T(a)?a.editRecurringMode:"dialog";t=function(){var e=o.recurrenceId?o:o.toOccurrence(),t=s.dataSource.get(e.recurrenceId);s._convertDates(t),s._removeEvent(e)},i=function(){o.recurrenceId&&(o=s.dataSource.get(o.recurrenceId)),s._removeEvent(o)},("dialog"!=l||s._isEditorOpened())&&(n=function(){s._confirmation(function(e){e||t()},o)},r=function(){s._confirmation(function(e){e||i()},o)});var d=r||i,c=n||t;if(s._isEditorOpened())e.isException()?c():d();else{var u=s.options.messages.recurrenceMessages;s._showRecurringDialog(e,c,d,{title:u.deleteWindowTitle,text:u.deleteRecurring?u.deleteRecurring:"Do you want to delete only this event occurrence or the whole series?",occurrenceText:u.deleteWindowOccurrence,seriesText:u.deleteWindowSeries})}},_isEditorOpened:function(){return!!this._editor.container},_unbindView:function(e){var t=this;t.angular("cleanup",function(){return{elements:t.items()}}),e.destroy()},_bindView:function(e){var t=this;t.options.editable&&(t._viewRemoveHandler&&e.unbind("remove",t._viewRemoveHandler),t._viewRemoveHandler=function(e){t.removeEvent(e.uid)},e.bind("remove",t._viewRemoveHandler),t._viewAddHandler&&e.unbind("add",t._viewAddHandler),t._viewAddHandler=function(e){t.addEvent(e.eventInfo)},e.bind("add",this._viewAddHandler),t._viewEditHandler&&e.unbind("edit",t._viewEditHandler),t._viewEditHandler=function(e){t.editEvent(e.uid)},e.bind("edit",this._viewEditHandler)),t._viewNavigateHandler&&e.unbind("navigate",t._viewNavigateHandler),t._viewNavigateHandler=function(e){if(e.view){var i="isWorkDay"in e,n=i?"changeWorkDay":"changeView";t.trigger("navigate",{view:e.view,isWorkDay:e.isWorkDay,action:n,date:e.date})||(i&&(t._workDayMode=e.isWorkDay),t._selectView(e.view),t.date(e.date))}},e.bind("navigate",t._viewNavigateHandler),t._viewActivateHandler&&e.unbind("activate",t._viewActivateHandler),t._viewActivateHandler=function(){t._selection&&(this.constrainSelection(t._selection),t._select(),t._adjustSelectedDate())},e.bind("activate",t._viewActivateHandler)},_selectView:function(e){if(e&&this.views[e]&&(this._selectedView&&this._unbindView(this._selectedView),this._selectedView=this._renderView(e),this._selectedViewName=e,this._viewsCount>1)){var t=N({views:this.views,view:e,ns:h.ns}),i=this.toolbar.find(".k-scheduler-views li:first-child");i.is(".k-current-view")?i.replaceWith(t):this.toolbar.find(".k-scheduler-views").prepend(t),this.toolbar.find(".k-scheduler-views li").removeClass("k-state-selected").end().find(".k-view-"+e.replace(/\./g,"\\.").toLowerCase()).addClass("k-state-selected")}},view:function(e){return e?(this._selectView(e),void this.rebind()):this._selectedView},viewName:function(){return this.view().name},_renderView:function(e){var t=this._initializeView(e);return this._bindView(t),this._model.set("formattedDate",t.dateForTitle()),this._model.set("formattedShortDate",t.shortDateForTitle()),t},resize:function(e){var t=this.getSize(),i=this._size,n=this.view();n&&n.groups&&(!e&&i&&t.width===i.width&&t.height===i.height||(this.refresh({action:"resize"}),this._size=t))},_adjustSelectedDate:function(){var e=this._model.selectedDate,t=this._selection,i=t.start;i&&!h.date.isInDateRange(e,g(i),g(t.end))&&e.setFullYear(i.getFullYear(),i.getMonth(),i.getDate())},_initializeView:function(e){var t=this.views[e];if(t){var i=T(t),n=t.type;if("string"==typeof n&&(n=h.getter(t.type)(window)),!n)throw new Error("There is no such view");t=new n(this.wrapper,function(e){return delete e.name,delete e.prefix,delete e.remove,delete e.edit,delete e.add,delete e.navigate,e}(D(!0,{},this.options,i?t:{},{resources:this.resources,date:this.date(),showWorkHours:this._workDayMode})))}return t},_views:function(){var e,t,i,n,r,s,o,a=this.options.views;for(this.views={},this._viewsCount=0,s=0,o=a.length;s<o;s++){var l=!1;e=a[s],(n=T(e))?"string"!=typeof(r=e.type?e.type:e)&&(r=e.name||e.title,l=!0):r=e,(t=Y[r])&&!l&&(e.type=t.type,t.title=this.options.messages.views[r],"day"===t.type?t.messages={allDay:this.options.messages.allDay}:"agenda"===t.type&&(t.messages={event:this.options.messages.event,date:this.options.messages.date,time:this.options.messages.time})),e=D({title:r},t,n?e:{}),r&&(this.views[r]=e,this._viewsCount++,i&&!e.selected||(i=r))}i&&(this._selectedViewName=i)},rebind:function(){this.dataSource.fetch()},_dataSource:function(){var e=this.options,t=e.dataSource;t=R(t)?{data:t}:t,!e.timezone||t instanceof V?t instanceof V&&(e.timezone=t.options.schema?t.options.schema.timezone:""):t=D(!0,t,{schema:{timezone:e.timezone}}),this.dataSource&&this._refreshHandler?this.dataSource.unbind("change",this._refreshHandler).unbind("progress",this._progressHandler).unbind("error",this._errorHandler):(this._refreshHandler=F(this.refresh,this),this._progressHandler=F(this._requestStart,this),this._errorHandler=F(this._error,this)),this.dataSource=h.data.SchedulerDataSource.create(t).bind("change",this._refreshHandler).bind("progress",this._progressHandler).bind("error",this._errorHandler),this.options.dataSource=this.dataSource},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_progress:function(e){var t=this.element.find(".k-scheduler-content");h.ui.progress(t,e)},_resources:function(){for(var t=this,i=t.options.resources,n=0;n<i.length;n++){var r=i[n],s=r.field,o=r.dataSource;if(!s||!o)throw new Error('The "field" and "dataSource" options of the scheduler resource are mandatory.');t.resources.push({field:s,name:r.name||s,title:r.title||s,dataTextField:r.dataTextField||"text",dataValueField:r.dataValueField||"value",dataColorField:r.dataColorField||"color",valuePrimitive:null==r.valuePrimitive||r.valuePrimitive,multiple:r.multiple||!1,dataSource:h.data.DataSource.create(o)})}var a=e.map(t.resources,function(e){return e.dataSource.fetch()});e.when.apply(null,a).then(function(){t.options.autoBind?t.view(t._selectedViewName):t._selectView(t._selectedViewName)})},_initModel:function(){var e=this;e._model=h.observable({selectedDate:new Date(this.options.date),formattedDate:"",formattedShortDate:""}),e._model.bind("change",function(t){"selectedDate"===t.field&&e.view(e._selectedViewName)})},_wrapper:function(){var e=this.options,t=e.height,i=e.width;this.wrapper=this.element.addClass("k-widget k-scheduler k-floatwrap").attr("role","grid").attr("aria-multiselectable",!0),this._isMobile()&&this.wrapper.addClass("k-scheduler-mobile"),this._isMobilePhoneView()&&this.wrapper.addClass("k-scheduler-phone"),t&&this.wrapper.height(t),i&&this.wrapper.width(i)},date:function(e){return null!=e&&g(e)>=g(this.options.min)&&g(e)<=g(this.options.max)&&this._model.set("selectedDate",e),g(this._model.get("selectedDate"))},_toolbar:function(){var t=this,i=t.options,n=[];i.toolbar&&(n=e.isArray(i.toolbar)?i.toolbar:[i.toolbar]);var r=this._isMobilePhoneView()?L:P,s=e(r({messages:i.messages,pdf:e.grep(n,function(e){return"pdf"==e||"pdf"==e.name}).length>0,ns:h.ns,views:t.views,viewsCount:t._viewsCount}));t.wrapper.append(s),t.toolbar=s,h.bind(t.toolbar,t._model),s.on("click"+A,".k-pdf",function(e){e.preventDefault(),t.saveAsPDF()}),s.on("click"+A,".k-scheduler-navigation li",function(i){var n=e(this),r=new Date(t.date()),s="";if(i.preventDefault(),n.hasClass("k-nav-today"))s="today",r=new Date;else if(n.hasClass("k-nav-next"))s="next",r=t.view().nextDate();else if(n.hasClass("k-nav-prev"))s="previous",r=t.view().previousDate();else if(n.hasClass("k-nav-current")&&!t._isMobilePhoneView())return void t._showCalendar();t.trigger("navigate",{view:t._selectedViewName,action:s,date:r})||t.date(r)}),s.on("click"+A,".k-scheduler-views li, .k-scheduler-refresh",function(i){i.preventDefault();var n=e(this).attr(h.attr("name"));t.trigger("navigate",{view:n,action:"changeView",date:t.date()})||(t.view(n),t.element.find(".k-state-expanded").removeClass("k-state-expanded"))}),s.on("click"+A,".k-scheduler-views li.k-current-view",function(){t.element.find(".k-scheduler-views").toggleClass("k-state-expanded")}),s.find("li").hover(function(){e(this).addClass("k-state-hover")},function(){e(this).removeClass("k-state-hover")})},_showCalendar:function(){var t=this,i=t.toolbar.find(".k-nav-current"),n=e('<div class="k-calendar-container"><div class="k-scheduler-calendar"/></div>');t.popup||(t.popup=new x(n,{anchor:i,activate:function(){t.calendar||(t.calendar=new C(this.element.find(".k-scheduler-calendar"),{change:function(){var e=this.value();t.trigger("navigate",{view:t._selectedViewName,action:"changeDate",date:e})||(t.date(e),t.popup.close())},min:t.options.min,max:t.options.max})),t.calendar.value(t.date())},copyAnchorStyles:!1})),t.popup.open()},refresh:function(e){var t=this,i=this.view();this._progress(!1),this.angular("cleanup",function(){return{elements:t.items()}}),e=e||{},i&&(e&&"itemchange"===e.action&&(this._editor.editable||this._preventRefresh)||this.trigger("dataBinding",{action:e.action||"rebind",index:e.index,items:e.items})||(e&&"resize"===e.action||!this._editor||this._editor.close(),this._data=this.dataSource.expand(i.startDate(),i.endDate()),i.refreshLayout(),i.render(this._data),this.trigger("dataBound")))},slotByPosition:function(e,t){var i=this.view();if(!i._slotByPosition)return null;var n=i._slotByPosition(e,t);return n?{startDate:n.startDate(),endDate:n.endDate(),groupIndex:n.groupIndex,element:n.element,isDaySlot:n.isDaySlot}:null},slotByElement:function(t){var i=e(t).offset();return this.slotByPosition(i.left,i.top)},resourcesBySlot:function(e){return this.view()._resourceBySlot(e)}}),Y={day:{type:"kendo.ui.DayView"},week:{type:"kendo.ui.WeekView"},workWeek:{type:"kendo.ui.WorkWeekView"},agenda:{type:"kendo.ui.AgendaView"},month:{type:"kendo.ui.MonthView"},timeline:{type:"kendo.ui.TimelineView"},timelineWeek:{type:"kendo.ui.TimelineWeekView"},timelineWorkWeek:{type:"kendo.ui.TimelineWorkWeekView"},timelineMonth:{type:"kendo.ui.TimelineMonthView"}};if(k.plugin(G),h.PDFMixin){h.PDFMixin.extend(G.prototype);var K="k-scheduler-pdf-export";G.fn._drawPDF=function(t){var i=this.wrapper,n=i[0].style.cssText;i.css({width:i.width(),height:i.height()}),i.addClass(K);var r=this,s=new e.Deferred,o=i.find(".k-scheduler-content").find("table").css("table-layout","auto");return setTimeout(function(){o.css("table-layout","fixed"),r.resize(!0),r._drawPDFShadow({},{avoidLinks:r.options.pdf.avoidLinks}).done(function(e){var i={page:e,pageNumber:1,progress:1,totalPages:1};t.notify(i),s.resolve(i.page)}).fail(function(e){s.reject(e)}).always(function(){i[0].style.cssText=n,i.removeClass(K),r.resize(!0),r.resize(!0)})}),s}}var Q=w.extend({init:function(e,t){var i=this,n=h.timezone.windows_zones;if(!n||!h.timezone.zones_titles)throw new Error("kendo.timezones.min.js is not included.");w.fn.init.call(i,e,t),i.wrapper=i.element,i._zonesQuery=new h.data.Query(n),i._zoneTitleId=h.guid(),i._zoneTitlePicker(),i._zonePicker(),i._zoneTitle.bind("cascade",function(){this.value()||i._zone.wrapper.hide()}),i._zone.bind("cascade",function(){i._value=this.value(),i.trigger("change")}),i.value(i.options.value)},options:{name:"TimezoneEditor",value:"",optionLabel:"No timezone"},events:["change"],_zoneTitlePicker:function(){var t=e('<input id="'+this._zoneTitleId+'"/>').appendTo(this.wrapper);this._zoneTitle=new h.ui.DropDownList(t,{dataSource:h.timezone.zones_titles,dataValueField:"other_zone",dataTextField:"name",optionLabel:this.options.optionLabel})},_zonePicker:function(){var t=this,i=e("<input />").appendTo(this.wrapper);t._zone=new h.ui.DropDownList(i,{dataValueField:"zone",dataTextField:"territory",dataSource:t._zonesQuery.data,cascadeFrom:t._zoneTitleId,dataBound:function(){t._value=this.value(),this.wrapper.toggle(this.dataSource.view().length>1)}}),t._zone.wrapper.hide()},destroy:function(){w.fn.destroy.call(this),h.destroy(this.wrapper)},value:function(e){var t;if(void 0===e)return this._value;(t=this._zonesQuery.filter({field:"zone",operator:"eq",value:e}).data[0])?(this._zoneTitle.value(t.other_zone),this._zone.value(t.zone)):this._zoneTitle.select(0)}});k.plugin(Q);var J=h.template('<option value="#=other_zone#">#=name#</option>'),X=h.template('<option value="#=zone#">#=territory#</option>'),Z=w.extend({init:function(e,t){var i=h.timezone.windows_zones;if(!i||!h.timezone.zones_titles)throw new Error("kendo.timezones.min.js is not included.");w.fn.init.call(this,e,t),this.wrapper=this.element,this._zonesQuery=new h.data.Query(i),this._zoneTitlePicker(),this._zonePicker(),this.value(this.options.value)},options:{name:"MobileTimezoneEditor",optionLabel:"No timezone",value:""},events:["change"],_bindZones:function(e){var t=e?this._filter(e):[];this._zone.html(this._options(t,X))},_filter:function(e){return this._zonesQuery.filter({field:"other_zone",operator:"eq",value:e}).data},_options:function(e,t,i){var n=0,r="",s=e.length;for(i&&(r+=t({other_zone:"",name:i}));n<s;n++)r+=t(e[n]);return r},_zoneTitlePicker:function(){var t=this,i=t._options(h.timezone.zones_titles,J,t.options.optionLabel);t._zoneTitle=e("<select>"+i+"</select>").appendTo(t.wrapper).change(function(){var e=this.value,i=t._zone;t._bindZones(e),e&&i[0].children.length>1?i.show():i.hide(),t._value=i[0].value,t.trigger("change")})},_zonePicker:function(){var t=this;t._zone=e('<select style="display:none"></select>').appendTo(this.wrapper).change(function(){t._value=this.value,t.trigger("change")}),t._bindZones(t._zoneTitle.val()),t._value=t._zone[0].value},destroy:function(){w.fn.destroy.call(this),h.destroy(this.wrapper)},value:function(e){var t,i=this._zone,n="",r="";if(void 0===e)return this._value;(t=this._zonesQuery.filter({field:"zone",operator:"eq",value:e}).data[0])&&(r=t.zone,n=t.other_zone),this._zoneTitle.val(n),this._bindZones(n),i.val(r),(r=i[0].value)&&i[0].children.length>1?i.show():i.hide(),this._value=r}});k.plugin(Z)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.touch",["kendo.core","kendo.userevents"],function(){return function(e,t){var i=window.kendo,n=i.ui.Widget,r=e.proxy,s=Math.abs,o=n.extend({init:function(e,t){function s(e){return function(t){a._triggerTouch(e,t)}}function o(e){return function(t){a.trigger(e,{touches:t.touches,distance:t.distance,center:t.center,event:t.event})}}var a=this;n.fn.init.call(a,e,t),t=a.options,e=a.element,a.wrapper=e,a.events=new i.UserEvents(e,{filter:t.filter,surface:t.surface,minHold:t.minHold,multiTouch:t.multiTouch,allowSelection:!0,fastTap:t.fastTap,press:s("touchstart"),hold:s("hold"),tap:r(a,"_tap"),gesturestart:o("gesturestart"),gesturechange:o("gesturechange"),gestureend:o("gestureend")}),t.enableSwipe?(a.events.bind("start",r(a,"_swipestart")),a.events.bind("move",r(a,"_swipemove"))):(a.events.bind("start",r(a,"_dragstart")),a.events.bind("move",s("drag")),a.events.bind("end",s("dragend"))),i.notify(a)},events:["touchstart","dragstart","drag","dragend","tap","doubletap","hold","swipe","gesturestart","gesturechange","gestureend"],options:{name:"Touch",surface:null,global:!1,fastTap:!1,filter:null,multiTouch:!1,enableSwipe:!1,minXDelta:30,maxYDelta:20,maxDuration:1e3,minHold:800,doubleTapTimeout:800},cancel:function(){this.events.cancel()},_triggerTouch:function(e,t){this.trigger(e,{touch:t.touch,event:t.event})&&t.preventDefault()},_tap:function(e){var t=this.lastTap,n=e.touch;t&&n.endTime-t.endTime<this.options.doubleTapTimeout&&i.touchDelta(n,t).distance<20?(this._triggerTouch("doubletap",e),this.lastTap=null):(this._triggerTouch("tap",e),this.lastTap=n)},_dragstart:function(e){this._triggerTouch("dragstart",e)},_swipestart:function(e){2*s(e.x.velocity)>=s(e.y.velocity)&&e.sender.capture()},_swipemove:function(e){var t=this.options,i=e.touch,n=e.event.timeStamp-i.startTime,r=i.x.initialDelta>0?"right":"left";s(i.x.initialDelta)>=t.minXDelta&&s(i.y.initialDelta)<t.maxYDelta&&n<t.maxDuration&&(this.trigger("swipe",{direction:r,touch:e.touch}),i.cancel())}});i.ui.plugin(o)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.gantt.list",["kendo.dom","kendo.touch","kendo.draganddrop","kendo.columnsorter","kendo.datetimepicker","kendo.editable"],function(){return function(e){function t(){var t=i._activeElement();"body"!==t.nodeName.toLowerCase()&&e(t).blur()}var i=window.kendo,n=i.dom,r=n.element,s=n.text,o=i.support.browser,a=i.support.mobileOS,l=i.ui,d=l.Widget,c=e.extend,u=e.map,h=e.isFunction,f=o.msie&&o.version<9,p=i.keys,m={title:"Title",start:"Start Time",end:"End Time",percentComplete:"% Done",parentId:"Predecessor ID",id:"ID",orderId:"Order ID"},g=".kendoGanttList",v=l.GanttList=d.extend({init:function(t,i){d.fn.init.call(this,t,i),0===this.options.columns.length&&this.options.columns.push("title"),this.dataSource=this.options.dataSource,this._columns(),this._layout(),this._domTrees(),this._header(),this._sortable(),this._editable(),this._selectable(),this._draggable(),this._resizable(),this._attachEvents(),this._adjustHeight(),this.bind("render",function(){var t,i;this.options.resizable&&(t=this.header.find("col"),i=this.content.find("col"),this.header.find("th").not(":last").each(function(n){var r=e(this).outerWidth();t.eq(n).width(r),i.eq(n).width(r)}),t.last().css("width","auto"),i.last().css("width","auto"))},!0)},_adjustHeight:function(){this.content.height(this.element.height()-this.header.parent().outerHeight())},destroy:function(){d.fn.destroy.call(this),this._reorderDraggable&&this._reorderDraggable.destroy(),this._tableDropArea&&this._tableDropArea.destroy(),this._contentDropArea&&this._contentDropArea.destroy(),this._columnResizable&&this._columnResizable.destroy(),this.touch&&this.touch.destroy(),this.timer&&clearTimeout(this.timer),this.content.off(g),this.header.find("thead").off(g),this.header.find("."+v.link).off(g),this.header=null,this.content=null,this.levels=null,i.destroy(this.element)},options:{name:"GanttList",selectable:!0,editable:!0,resizable:!1},_attachEvents:function(){var t=this,i=v.styles;t.content.on("click"+g,"td > span."+i.icon+":not(."+i.iconHidden+")",function(i){var n=e(this),r=t._modelFromElement(n);r.set("expanded",!r.get("expanded")),i.stopPropagation()})},_domTrees:function(){this.headerTree=new n.Tree(this.header[0]),this.contentTree=new n.Tree(this.content[0])},_columns:function(){var e=this.options.columns;this.columns=u(e,function(e){return e="string"==typeof e?{field:e,title:m[e]}:e,c(new function(){this.field="",this.title="",this.editable=!1,this.sortable=!1},e)})},_layout:function(){var t=this,n=this.options,r=this.element,s=v.styles;r.addClass(s.wrapper).append("<div class='"+s.gridHeader+"'><div class='"+s.gridHeaderWrap+"'></div></div>").append("<div class='"+s.gridContentWrap+"'></div>"),this.header=r.find("."+s.gridHeaderWrap),this.content=r.find("."+s.gridContent),n.rowHeight&&(this._rowHeight=function(){var r,s="string"==typeof n.rowHeight?n.rowHeight:n.rowHeight+"px",o=e(i.format("<table style='visibility: hidden;'><tbody><tr style='height:{0}'><td>&nbsp;</td></tr></tbody></table>",s));return t.content.append(o),r=o.find("tr").outerHeight(),o.remove(),r}())},_header:function(){var e,t,i,n=this.headerTree;e=r("colgroup",null,this._cols()),t=r("thead",{role:"rowgroup"},[r("tr",{role:"row"},this._ths())]),i=r("table",{style:{minWidth:this.options.listWidth+"px"},role:"grid"},[e,t]),n.render([i])},_render:function(e){var t,i,n,s={style:{minWidth:this.options.listWidth+"px"},tabIndex:0,role:"treegrid"};this._rowHeight&&(s.style.height=e.length*this._rowHeight+"px"),this.levels=[{field:null,value:0}],t=r("colgroup",null,this._cols()),i=r("tbody",{role:"rowgroup"},this._trs(e)),n=r("table",s,[t,i]),this.contentTree.render([n]),this.trigger("render")},_ths:function(){for(var e,t,i=this.columns,n=[],o=0,a=i.length;o<a;o++)t={"data-field":(e=i[o]).field,"data-title":e.title,className:v.styles.header,role:"columnheader"},n.push(r("th",t,[s(e.title)]));return this.options.resizable&&n.push(r("th",{className:v.styles.header,role:"columnheader"})),n},_cols:function(){for(var e,t,i=this.columns,n=[],s=0,o=i.length;s<o;s++)e=(t=i[s].width)&&0!==parseInt(t,10)?{style:{width:"string"==typeof t?t:t+"px"}}:null,n.push(r("col",e,[]));return this.options.resizable&&n.push(r("col",{style:{width:"1px"}})),n},_trs:function(e){for(var t,i,n,r=[],s=[],o=v.styles,a=0,l=e.length;a<l;a++)t=e[a],n=this._levels({idx:t.parentId,id:t.id,summary:t.summary}),i={"data-uid":t.uid,"data-level":n,role:"row"},t.summary&&(i["aria-expanded"]=t.expanded),a%2!=0&&s.push(o.alt),t.summary&&s.push(o.group),s.length&&(i.className=s.join(" ")),r.push(this._tds({task:t,attr:i,level:n})),s=[];return r},_tds:function(e){for(var t,i=[],n=this.columns,s=0,o=n.length;s<o;s++)t=n[s],i.push(this._td({task:e.task,column:t,level:e.level}));return this.options.resizable&&i.push(r("td",{role:"gridcell"})),r("tr",e.attr,i)},_td:function(e){var t,n,o=[],a=this.options.resourcesField,l=v.styles,d=e.task,c=e.column,u=d.get(c.field);if(c.field==a){u=u||[],t=[];for(var h=0;h<u.length;h++)t.push(i.format("{0} [{1}]",u[h].get("name"),u[h].get("formatedValue")));t=t.join(", ")}else t=c.format?i.format(c.format,u):u;return"title"===c.field&&((o=function(e){for(var t=[],i=e.className,n=0,s=e.level;n<s;n++)t.push(r("span",{className:i}));return t}({level:e.level,className:l.iconPlaceHolder})).push(r("span",{className:l.icon+" "+(d.summary?d.expanded?l.iconCollapse:l.iconExpand:l.iconHidden)})),n=i.format("{0}, {1:P0}",t,d.percentComplete)),o.push(r("span",{"aria-label":n},[s(t)])),r("td",{role:"gridcell"},o)},_levels:function(e){for(var t,i=this.levels,n=e.summary,r=e.idx,s=e.id,o=0,a=i.length;o<a;o++)if((t=i[o]).field==r)return n&&i.push({field:s,value:t.value+1}),t.value},_sortable:function(){for(var e,t,n,r=this,s=this.options.resourcesField,o=this.columns,a=this.header.find("th["+i.attr("field")+"]"),l=function(e){(0===r.dataSource.total()||r.editable&&r.editable.trigger("validate"))&&(e.preventDefault(),e.stopImmediatePropagation())},d=0,c=a.length;d<c;d++)(e=o[d]).sortable&&e.field!==s&&((t=(n=a.eq(d)).data("kendoColumnSorter"))&&t.destroy(),n.attr("data-"+i.ns+"field",e.field).kendoColumnSorter({dataSource:this.dataSource}).find("."+v.styles.link).on("click"+g,l));a=null},_selectable:function(){var t=this;this.options.selectable&&this.content.on("click"+g,"tr",function(i){var n=e(this);t.editable&&t.editable.trigger("validate"),i.ctrlKey?t.clearSelection():t.select(n)})},select:function(e){var t=this.content.find(e),i=v.styles.selected;return t.length?(t.siblings("."+i).removeClass(i).attr("aria-selected",!1).end().addClass(i).attr("aria-selected",!0),void this.trigger("change")):this.content.find("."+i)},clearSelection:function(){var e=this.select();e.length&&(e.removeClass(v.styles.selected),this.trigger("change"))},_setDataSource:function(e){this.dataSource=e},_editable:function(){var i=this,n=v.styles,r="span."+n.icon+":not("+n.iconHidden+")",s=function(){var e=i.editable;e&&(e.end()?i._closeCell():e.trigger("validate"))},o=function(i){e(i.currentTarget).hasClass(n.editCell)||t()};this.options.editable&&(this._startEditHandler=function(t){var n=t.currentTarget?e(t.currentTarget):t,r=i._columnFromElement(n);i.editable||r&&r.editable&&i._editCell({cell:n,column:r})},i.content.on("focusin"+g,function(){clearTimeout(i.timer),i.timer=null}).on("focusout"+g,function(){i.timer=setTimeout(s,1)}).on("keydown"+g,function(e){e.keyCode===p.ENTER&&e.preventDefault()}).on("keyup"+g,function(e){var n,r;switch(e.keyCode){case p.ENTER:t(),s();break;case p.ESC:i.editable&&(n=i._editableContainer,r=i._modelFromElement(n),i.trigger("cancel",{model:r,cell:n})||i._closeCell(!0))}}),a?i.touch=i.content.kendoTouch({filter:"td",touchstart:function(e){o(e.touch)},doubletap:function(t){e(t.touch.initialTouch).is(r)||i._startEditHandler(t.touch)}}).data("kendoTouch"):i.content.on("mousedown"+g,"td",function(e){o(e)}).on("dblclick"+g,"td",function(t){e(t.target).is(r)||i._startEditHandler(t)}))},_editCell:function(t){var n,r=this.options.resourcesField,s=v.styles,o=t.cell,a=t.column,l=this._modelFromElement(o),d=this.dataSource._createNewModel(l.toJSON()),c=d.fields[a.field]||d[a.field],u=c.validation,p=i.attr("type"),m=i.attr("bind"),g=i.attr("format"),_={name:a.field,required:!!c.validation&&!0===c.validation.required};a.field!==r?(this._editableContent=o.children().detach(),this._editableContainer=o,o.data("modelCopy",d),"date"!==c.type&&"date"!==e.type(c)||a.format&&!/H|m|s|F|g|u/.test(a.format)||(_[m]="value:"+a.field,_[p]="date",a.format&&(_[g]=i._extractFormat(a.format)),n=function(t,i){e('<input type="text"/>').attr(_).appendTo(t).kendoDateTimePicker({format:i.format})}),this.editable=o.addClass(s.editCell).kendoEditable({fields:{field:a.field,format:a.format,editor:a.editor||n},model:d,clearContainer:!1}).data("kendoEditable"),u&&u.dateCompare&&h(u.dateCompare)&&u.message&&(e("<span "+i.attr("for")+'="'+a.field+'" class="k-invalid-msg"/>').hide().appendTo(o),o.find("[name="+a.field+"]").attr(i.attr("dateCompare-msg"),u.message)),this.editable.bind("validate",function(e){var t=this.element.find(":kendoFocusable:first").focus();f&&t.focus(),e.preventDefault()}),this.trigger("edit",{model:l,cell:o})&&this._closeCell(!0)):a.editor(o,d)},_closeCell:function(e){var t=v.styles,i=this._editableContainer,n=this._modelFromElement(i),r=this._columnFromElement(i).field,s=i.data("modelCopy"),o={};o[r]=s.get(r),i.empty().removeData("modelCopy").removeClass(t.editCell).append(this._editableContent),this.editable.unbind(),this.editable.destroy(),this.editable=null,this._editableContainer=null,this._editableContent=null,e||("start"===r&&(o.end=new Date(o.start.getTime()+n.duration())),this.trigger("update",{task:n,updateInfo:o}))},_draggable:function(){var t,n=this,r=null,s=!0,o=v.styles,l=i.support.isRtl(this.element),d="tr["+i.attr("level")+" = 0]:last",u={},h=function(){r=null,t=null,s=!0,u={}},f=function(){return n._reorderDraggable.hint.children("."+o.dragStatus).removeClass(o.dropPositions)};this.options.editable&&(this._reorderDraggable=this.content.kendoDraggable({distance:10,holdToDrag:a,group:"listGroup",filter:"tr[data-uid]",ignore:"."+o.input,hint:function(t){return e('<div class="'+o.header+" "+o.dragClue+'"/>').css({width:300,paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).append('<span class="'+o.icon+" "+o.dragStatus+'" /><span class="'+o.dragClueText+'"/>')},cursorOffset:{top:-20,left:0},container:this.content,dragstart:function(e){n.editable&&n.editable.trigger("validate")?e.preventDefault():(r=n._modelFromElement(e.currentTarget),this.hint.children("."+o.dragClueText).text(r.get("title")),l&&this.hint.addClass(o.rtl))},drag:function(e){s&&(function(e){if(t){var n,r=e.location,s=o.dropAdd,a="add",l=parseInt(t.attr(i.attr("level")),10);r<=t.beforeLimit?(n=t.prev(),s=o.dropTop,a="insert-before"):r>=t.afterLimit&&(n=t.next(),s=o.dropBottom,a="insert-after"),n&&parseInt(n.attr(i.attr("level")),10)===l&&(s=o.dropMiddle),u.className=s,u.command=a}}(e.y),f().addClass(u.className))},dragend:function(){h()},dragcancel:function(){h()}}).data("kendoDraggable"),this._tableDropArea=this.content.kendoDropTargetArea({distance:0,group:"listGroup",filter:"tr[data-uid]",dragenter:function(a){t=a.dropTarget,function(e){for(var t=e;t;){if(r.get("id")===t.get("id")){s=!1;break}t=n.dataSource.taskParent(t)}}(n._modelFromElement(t)),function(){var n=e(t).height(),r=i.getOffset(t).top;c(t,{beforeLimit:r+.25*n,afterLimit:r+.75*n})}(),f().toggleClass(o.dropDenied,!s)},dragleave:function(){s=!0,f()},drop:function(){var e=n._modelFromElement(t),i=e.orderId,o={parentId:e.parentId};if(s){switch(u.command){case"add":o.parentId=e.id;break;case"insert-before":e.parentId===r.parentId&&e.orderId>r.orderId?o.orderId=i-1:o.orderId=i;break;case"insert-after":e.parentId===r.parentId&&e.orderId>r.orderId?o.orderId=i:o.orderId=i+1}n.trigger("update",{task:r,updateInfo:o})}}}).data("kendoDropTargetArea"),this._contentDropArea=this.element.kendoDropTargetArea({distance:0,group:"listGroup",filter:"."+o.gridContent,drop:function(){var e=n._modelFromElement(n.content.find(d)).orderId,t={parentId:null,orderId:null!==r.parentId?e+1:e};n.trigger("update",{task:r,updateInfo:t})}}).data("kendoDropTargetArea"))},_resizable:function(){var t=this,i=v.styles;this.options.resizable&&(this._columnResizable&&this._columnResizable.destroy(),this.header.find("thead").on("mousemove"+g,"th",function(n){var r=e(n.currentTarget),s=t.resizeHandle,o=r.position(),a=o.left,l=r.outerWidth(),d=r.closest("div"),c=n.clientX+e(window).scrollLeft(),u=t.options.columnResizeHandleWidth;a+=d.scrollLeft(),s||(s=t.resizeHandle=e('<div class="'+i.resizeHandle+'"><div class="'+i.resizeHandleInner+'" /></div>'));var h=r.offset().left+l;c>h-u&&c<h+u?(d.append(s),s.show().css({top:o.top,left:a+l-u-1,height:r.outerHeight(),width:3*u}).data("th",r)):s.hide()}),this._columnResizable=this.header.kendoResizable({handle:"."+i.resizeHandle,start:function(i){var n=e(i.currentTarget).data("th"),r="col:eq("+n.index()+")",s=t.header.find("table"),o=t.content.find("table");t.element.addClass("k-grid-column-resizing"),this.col=o.children("colgroup").find(r).add(s.find(r)),this.th=n,this.startLocation=i.x.location,this.columnWidth=n.outerWidth(),this.table=s.add(o),this.totalWidth=this.table.width()-s.find("th:last").outerWidth()},resize:function(e){var t=e.x.location-this.startLocation;this.columnWidth+t<11&&(t=11-this.columnWidth),this.table.css({minWidth:this.totalWidth+t}),this.col.width(this.columnWidth+t)},resizeend:function(){t.element.removeClass("k-grid-column-resizing");var e=Math.floor(this.columnWidth),i=Math.floor(this.th.outerWidth()),n=t.columns[this.th.index()];t.trigger("columnResize",{column:n,oldWidth:e,newWidth:i}),this.table=this.col=this.th=null}}).data("kendoResizable"))},_modelFromElement:function(e){var t=e.closest("tr");return this.dataSource.getByUid(t.attr(i.attr("uid")))},_columnFromElement:function(e){var t=e.closest("td"),i=t.parent().children().index(t);return this.columns[i]}});c(!0,l.GanttList,{styles:{wrapper:"k-treelist k-grid k-widget",header:"k-header",alt:"k-alt",rtl:"k-rtl",editCell:"k-edit-cell",group:"k-treelist-group",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",selected:"k-state-selected",icon:"k-icon",iconCollapse:"k-i-collapse",iconExpand:"k-i-expand",iconHidden:"k-i-none",iconPlaceHolder:"k-icon k-i-none",input:"k-input",link:"k-link",resizeHandle:"k-resize-handle",resizeHandleInner:"k-resize-handle-inner",dropPositions:"k-insert-top k-insert-bottom k-add k-insert-middle",dropTop:"k-insert-top",dropBottom:"k-insert-bottom",dropAdd:"k-add",dropMiddle:"k-insert-middle",dropDenied:"k-denied",dragStatus:"k-drag-status",dragClue:"k-drag-clue",dragClueText:"k-clue-text"}})}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.gantt.timeline",["kendo.dom","kendo.touch","kendo.draganddrop"],function(){return function(e){function t(){var t=kendo._activeElement();t&&"body"!==t.nodeName.toLowerCase()&&e(t).blur()}var i=kendo.ui.Widget,n=kendo.dom.element,r=kendo.dom.text,s=kendo.dom.html,o=e.isPlainObject,a=e.extend,l=e.proxy,d=kendo.support.browser,c=!1,u=kendo.keys,h=kendo.data.Query,f=".kendoGanttTimeline",p=kendo.template("#=kendo.toString(start, 't')#"),m=kendo.template("#=kendo.toString(start, 'ddd M/dd')#"),g=kendo.template("#=kendo.toString(start, 'ddd M/dd')# - #=kendo.toString(kendo.date.addDays(end, -1), 'ddd M/dd')#"),v=kendo.template("#=kendo.toString(start, 'MMM')#"),_=kendo.template("#=kendo.toString(start, 'yyyy')#"),b=kendo.template('<div class="#=styles.marquee#"><div class="#=styles.marqueeColor#"></div></div>'),k=kendo.template('<div style="z-index: 100002;" class="#=styles.tooltipWrapper#"><div class="#=styles.tooltipContent#"><div>#=messages.start#: #=kendo.toString(start, format)#</div><div>#=messages.end#: #=kendo.toString(end, format)#</div></div></div>'),w=kendo.template('<div style="z-index: 100002;" class="#=styles.tooltipWrapper#" ><div class="#=styles.tooltipContent#">#=text#%</div><div class="#=styles.tooltipCallout#" style="left:13px;"></div></div>'),y=kendo.template('<div class="#=styles.taskDetails#"><strong>#=task.title#</strong><div class="#=styles.taskDetailsPercent#">#=kendo.toString(task.percentComplete, "p0")#</div><ul class="#=styles.reset#"><li>#=messages.start#: #=kendo.toString(task.start, "h:mm tt ddd, MMM d")#</li><li>#=messages.end#: #=kendo.toString(task.end, "h:mm tt ddd, MMM d")#</li></ul></div>'),x={day:{type:"kendo.ui.GanttDayView"},week:{type:"kendo.ui.GanttWeekView"},month:{type:"kendo.ui.GanttMonthView"},year:{type:"kendo.ui.GanttYearView"}},C=kendo.ui.GanttView=i.extend({init:function(e,t){i.fn.init.call(this,e,t),this.title=this.options.title||this.options.name,this.header=this.element.find("."+C.styles.gridHeader),this.content=this.element.find("."+C.styles.gridContent),this.contentWidth=this.content.width(),this._workDays=function(e){var t=[],i=e.workWeekStart;for(t.push(i);e.workWeekEnd!=i;)i>6?i-=7:i++,t.push(i);return t}(this.options),this._headerTree=t.headerTree,this._taskTree=t.taskTree,this._taskTemplate=t.taskTemplate?kendo.template(t.taskTemplate,a({},kendo.Template,t.templateSettings)):null,this._dependencyTree=t.dependencyTree,this._taskCoordinates={},this._currentTime()},destroy:function(){i.fn.destroy.call(this),clearTimeout(this._tooltipTimeout),this.headerRow=null,this.header=null,this.content=null,this._dragHint=null,this._resizeHint=null,this._resizeTooltip=null,this._taskTooltip=null,this._percentCompleteResizeTooltip=null,this._headerTree=null,this._taskTree=null,this._dependencyTree=null},options:{showWorkHours:!1,showWorkDays:!1,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,hourSpan:1,slotSize:100,currentTimeMarker:{updateInterval:1e4}},renderLayout:function(){this._slots=this._createSlots(),this._tableWidth=this._calculateTableWidth(),this.createLayout(this._layout()),this._slotDimensions(),this._adjustHeight(),this.content.find("."+C.styles.dependenciesWrapper).width(this._tableWidth)},_adjustHeight:function(){this.content.height(this.element.height()-this.header.outerHeight())},createLayout:function(e){var t=this._headers(e),i=this._colgroup(),r=this._headerTree,s=n("thead",null,t),o=n("table",{style:{width:this._tableWidth+"px"}},[i,s]);r.render([o]),this.headerRow=this.header.find("table:first tr").last()},_slotDimensions:function(){for(var e,t,i=this.headerRow[0].children,n=this._timeSlots(),r=0,s=i.length;r<s;r++)t=i[r],(e=n[r]).offsetLeft=t.offsetLeft,e.offsetWidth=t.offsetWidth},render:function(e){var t,i,n=e.length,r=C.styles,s=this._rowsTable(n),o=this._columnsTable(n),a=this._tasksTable(e),l=this.options.currentTimeMarker,d=this.options.calculatedSize;this._taskTree.render([s,o,a]),t=this.content.find("."+r.rowsTable),d&&(i=d.row*e.length,this.content.find("."+r.tasksTable).height(i),t.height(i)),this._contentHeight=t.height(),this._rowHeight=d?d.row:this._contentHeight/t.find("tr").length,this.content.find("."+r.columnsTable).height(this._contentHeight),!1!==l&&void 0!==l.updateInterval&&this._renderCurrentTime()},_rowsTable:function(e){for(var t,i=[],s=C.styles,o=[null,{className:s.alt}],a=0;a<e;a++)t=n("tr",o[a%2],[n("td",null,[r("")])]),i.push(t);return this._createTable(1,i,{className:s.rowsTable})},_columnsTable:function(){for(var e,t,i,s,o=[],a=C.styles,l=this._timeSlots(),d=l.length,c=0,u=0;u<d;u++)s={},c+=i=(t=l[u]).span,1!==i&&(s.colspan=i),t.isNonWorking&&(s.className=a.nonWorking),o.push(n("td",s,[r("")]));return e=n("tr",null,o),this._createTable(c,[e],{className:a.columnsTable})},_tasksTable:function(e){for(var t,i,r,s,o,a,l=[],d=C.styles,u=this._taskCoordinates={},h=this._calculateMilestoneWidth(),f=Math.round(h.width),p=this.options.resourcesField,m=[d.resource,d.resourceAlt],g=this.options.calculatedSize,v=this._calculateResourcesMargin(),_=this._calculateTaskBorderWidth(),b=function(e){var t,i;i=(t=r.left)+r.width,s.isMilestone()&&(i=(t-=f/2)+f),u[s.id]={start:t,end:i,rowIndex:e}},k=0,w=e.length;k<w;k++)s=e[k],(r=this._taskPosition(s)).borderWidth=_,t=n("tr",null),i=n("td",null,[this._renderTask(e[k],r)]),s[p]&&s[p].length&&(o=c?this._tableWidth-r.left:Math.max(r.width||h.clientWidth,0)+r.left,(a={width:this._tableWidth-(o+v)+"px"})[c?"right":"left"]=o+"px",g&&(a.height=g.cell+"px"),i.children.push(n("div",{className:d.resourcesWrap,style:a},this._renderResources(s[p],m[k%2])))),t.children.push(i),l.push(t),b(k);return this._createTable(1,l,{className:C.styles.tasksTable})},_createTable:function(e,t,i){for(var r,s,o=[],a=0;a<e;a++)o.push(n("col"));return r=n("colgroup",null,o),s=n("tbody",null,t),i.style||(i.style={}),i.style.width=this._tableWidth+"px",n("table",i,[r,s])},_calculateTableWidth:function(){for(var e,t=this._timeSlots(),i=0,n=0,r=0,s=t.length;r<s;r++)n+=e=t[r].span,e>i&&(i=e);return Math.round(n*this.options.slotSize/i)},_calculateMilestoneWidth:function(){var t,i,n=C.styles.task+" "+C.styles.taskMilestone,r=e("<div class='"+n+"' style='visibility: hidden; position: absolute'>");return this.content.append(r),i=r[0].getBoundingClientRect(),t={width:i.right-i.left,clientWidth:r[0].clientWidth},r.remove(),t},_calculateResourcesMargin:function(){var t,i=e("<div class='"+C.styles.resourcesWrap+"' style='visibility: hidden; position: absolute'>");return this.content.append(i),t=parseInt(i.css(c?"margin-right":"margin-left"),10),i.remove(),t},_calculateTaskBorderWidth:function(){var t,i,n=C.styles.task+" "+C.styles.taskSingle,r=e("<div class='"+n+"' style='visibility: hidden; position: absolute'>");return this.content.append(r),i=kendo.getComputedStyles(r[0],["border-left-width"]),t=parseFloat(i["border-left-width"],10),r.remove(),t},_renderTask:function(e,t){var i,r,s,o=this.options.editable,a=t.left,l=C.styles,d=l.taskWrap,u=this.options.calculatedSize,h={},f={className:d,style:{left:a+"px"}};return u&&(f.style.height=u.cell+"px"),e.summary?r=this._renderSummary(e,t):e.isMilestone()?(r=this._renderMilestone(e,t),f.className+=" "+l.taskMilestoneWrap):r=this._renderSingleTask(e,t),i=n("div",f,[r]),o&&(i.children.push(n("div",{className:l.taskDot+" "+l.taskDotStart})),i.children.push(n("div",{className:l.taskDot+" "+l.taskDotEnd}))),e.summary||e.isMilestone()||!o||null!==this._taskTemplate||(s=Math.round(t.width*e.percentComplete),h[c?"right":"left"]=s+"px",i.children.push(n("div",{className:l.taskDragHandle,style:h}))),i},_renderSingleTask:function(e,t){var i,o=C.styles,a=Math.round(t.width*e.percentComplete),l=[];null!==this._taskTemplate?i=s(this._taskTemplate(e)):(i=r(e.title),l.push(n("div",{className:o.taskComplete,style:{width:a+"px"}})));var d=n("div",{className:o.taskContent},[n("div",{className:o.taskTemplate},[i])]);return l.push(d),this.options.editable&&(d.children.push(n("span",{className:o.taskActions},[n("a",{className:o.link+" "+o.taskDelete,href:"#"},[n("span",{className:o.icon+" "+o.iconDelete})])])),d.children.push(n("span",{className:o.taskResizeHandle+" "+o.taskResizeHandleWest})),d.children.push(n("span",{className:o.taskResizeHandle+" "+o.taskResizeHandleEast}))),n("div",{className:o.task+" "+o.taskSingle,"data-uid":e.uid,style:{width:Math.max(t.width-2*t.borderWidth,0)+"px"}},l)},_renderMilestone:function(e){var t=C.styles;return n("div",{className:t.task+" "+t.taskMilestone,"data-uid":e.uid})},_renderSummary:function(e,t){var i=C.styles,r=Math.round(t.width*e.percentComplete);return n("div",{className:i.task+" "+i.taskSummary,"data-uid":e.uid,style:{width:t.width+"px"}},[n("div",{className:i.taskSummaryProgress,style:{width:r+"px"}},[n("div",{className:i.taskSummaryComplete,style:{width:t.width+"px"}})])])},_renderResources:function(e,t){for(var i,s=[],o=0,a=e.length;o<a;o++)i=e[o],s.push(n("span",{className:t,style:{color:i.get("color")}},[r(i.get("name"))]));return c&&s.reverse(),s},_taskPosition:function(e){var t=Math.round,i=t(this._offset(c?e.end:e.start));return{left:i,width:t(this._offset(c?e.start:e.end))-i}},_offset:function(e){var t,i,n=this._timeSlots(),r=0;return n.length?(i=this._slotIndex("start",e),(t=n[i]).end<e?r=t.offsetWidth:t.start<=e&&(r=(e-t.start)/(t.end-t.start)*t.offsetWidth),c&&(r=t.offsetWidth+1-r),t.offsetLeft+r):0},_slotIndex:function(e,t,i){var n,r=this._timeSlots(),s=0,o=r.length-1;i&&(r=[].slice.call(r).reverse());do{r[n=Math.ceil((o+s)/2)][e]<t?s=n:(n===o&&n--,o=n)}while(s!==o);return i&&(s=r.length-1-s),s},_timeByPosition:function(t,i,n){var r=this._slotByPosition(t);if(i)return n?r.end:r.start;var s=t-e("."+C.styles.tasksTable).offset().left,o=r.end-r.start,a=s-r.offsetLeft;return c&&(a=r.offsetWidth-a),new Date(r.start.getTime()+o*(a/r.offsetWidth))},_slotByPosition:function(t){var i=t-e("."+C.styles.tasksTable).offset().left,n=this._slotIndex("offsetLeft",i,c);return this._timeSlots()[n]},_renderDependencies:function(e){for(var t=[],i=this._dependencyTree,n=0,r=e.length;n<r;n++)t.push.apply(t,this._renderDependency(e[n]));i.render(t)},_renderDependency:function(e){var t,i=this._taskCoordinates[e.predecessorId],n=this._taskCoordinates[e.successorId];if(!i||!n)return[];for(var r=0,s=(t=this["_render"+["FF","FS","SF","SS"][c?3-e.type:e.type]](i,n)).length;r<s;r++)t[r].attr["data-uid"]=e.uid;return t},_renderFF:function(e,t){var i=this._dependencyFF(e,t,!1);return i[i.length-1].children[0]=this._arrow(!0),i},_renderSS:function(e,t){var i=this._dependencyFF(t,e,!0);return i[0].children[0]=this._arrow(!1),i.reverse()},_renderFS:function(e,t){var i=this._dependencyFS(e,t,!1);return i[i.length-1].children[0]=this._arrow(!1),i},_renderSF:function(e,t){var i=this._dependencyFS(t,e,!0);return i[0].children[0]=this._arrow(!0),i.reverse()},_dependencyFF:function(e,t,i){var n,r=this,s=[],o=0,a=0,l=0,d=0,c=i?"start":"end",u=this._rowHeight,h=e.rowIndex*u+Math.floor(u/2)-1,f=t.rowIndex*u+Math.floor(u/2)-1,p=C.styles,m=function(){s.push(r._line(p.line+" "+p.lineHorizontal,{left:o+"px",top:a+"px",width:l+"px"}))},g=function(){s.push(r._line(p.line+" "+p.lineVertical,{left:o+"px",top:a+"px",height:d+"px"}))};return o=e[c],a=h,l=10,(n=t[c]-e[c])>0!==i&&(l=Math.abs(n)+10),i?(o-=l,l-=1,m()):(m(),o+=l-2),f<a?(d=a-f,d+=2,a=f,g()):(d=f-a,d+=2,g(),a+=d-2),l=Math.abs(o-t[c]),i||(o-=l-=1),m(),s},_dependencyFS:function(e,t,i){var n=this,r=[],s=0,o=0,a=0,l=0,d=this._rowHeight,c=Math.floor(d/2),u=t.start-e.end,h=e.rowIndex*d+Math.floor(d/2)-1,f=t.rowIndex*d+Math.floor(d/2)-1,p=C.styles,m=function(){r.push(n._line(p.line+" "+p.lineHorizontal,{left:s+"px",top:o+"px",width:a+"px"}))},g=function(){r.push(n._line(p.line+" "+p.lineVertical,{left:s+"px",top:o+"px",height:l+"px"}))};return s=e.end,o=h,a=10,i&&(s+=1,u>20&&(a=u-8),a-=1),m(),s+=a-2,u<=20&&(l=i?Math.abs(f-h)-c:c,f<h?(o-=l,l+=2,g()):(g(),o+=l),(a=e.end-t.start+20)<10&&(a=10),s-=a-2,m()),f<h?(l=o-f,o=f,l+=2,g()):(l=f-o,g(),o+=l),a=t.start-s,i||(a-=1),m(),r},_line:function(e,t){return n("div",{className:e,style:t})},_arrow:function(e){return n("span",{className:e?C.styles.arrowWest:C.styles.arrowEast})},_colgroup:function(){for(var e=this._timeSlots(),t=e.length,i=[],r=0;r<t;r++)for(var s=0,o=e[r].span;s<o;s++)i.push(n("col"));return n("colgroup",null,i)},_createDragHint:function(e){this._dragHint=e.clone().addClass(C.styles.dragHint).css("cursor","move"),e.parent().append(this._dragHint)},_updateDragHint:function(e){var t=this._offset(e);this._dragHint.css({left:t})},_removeDragHint:function(){this._dragHint.remove(),this._dragHint=null},_createResizeHint:function(t){var i,n=C.styles,r=this._taskCoordinates[t.id].rowIndex*this._rowHeight,s=this.options,o=s.messages;this._resizeHint=e(b({styles:n})).css({top:0,height:this._contentHeight}),this.content.append(this._resizeHint),this._resizeTooltip=e(k({styles:n,start:t.start,end:t.end,messages:o.views,format:s.resizeTooltipFormat})).css({top:0,left:0}),this.content.append(this._resizeTooltip),this._resizeTooltipWidth=this._resizeTooltip.outerWidth(),(i=r-this._resizeTooltip.outerHeight())<0&&(i=r+this._rowHeight),this._resizeTooltipTop=i},_updateResizeHint:function(t,i,n){var r=this._offset(c?i:t),s=this._offset(c?t:i),o=s-r,a=n!==c?r:s,l=this._tableWidth-kendo.support.scrollbar(),d=this._resizeTooltipWidth,u=this.options,h=u.messages,f=e("."+C.styles.tasksTable).offset().left-e("."+C.styles.tasksWrapper).offset().left;c&&(r+=f),this._resizeHint.css({left:r,width:o}),this._resizeTooltip&&this._resizeTooltip.remove(),(a-=Math.round(d/2))<0?a=0:a+d>l&&(a=l-d),c&&(a+=f),this._resizeTooltip=e(k({styles:C.styles,start:t,end:i,messages:h.views,format:u.resizeTooltipFormat})).css({top:this._resizeTooltipTop,left:a,"min-width":d}).appendTo(this.content)},_removeResizeHint:function(){this._resizeHint.remove(),this._resizeHint=null,this._resizeTooltip.remove(),this._resizeTooltip=null},_updatePercentCompleteTooltip:function(t,i,n){this._removePercentCompleteTooltip();var r=this._percentCompleteResizeTooltip=e(w({styles:C.styles,text:n})).appendTo(this.element),s=Math.round(r.outerWidth()/2),o=r.find("."+C.styles.callout),a=Math.round(o.outerWidth()/2);r.css({top:t-(r.outerHeight()+a),left:i-s}),o.css("left",s-a)},_removePercentCompleteTooltip:function(){this._percentCompleteResizeTooltip&&this._percentCompleteResizeTooltip.remove(),this._percentCompleteResizeTooltip=null},_updateDependencyDragHint:function(e,t,i){this._removeDependencyDragHint(),i?this._creteVmlDependencyDragHint(e,t):this._creteDependencyDragHint(e,t)},_creteDependencyDragHint:function(t,i){var n=C.styles,r=i.x-t.x,s=i.y-t.y,o=Math.sqrt(r*r+s*s),a=Math.atan(s/r);r<0&&(a+=Math.PI),e("<div class='"+n.line+" "+n.lineHorizontal+" "+n.dependencyHint+"'></div>").css({top:t.y,left:t.x,width:o,"transform-origin":"0% 0","-ms-transform-origin":"0% 0","-webkit-transform-origin":"0% 0",transform:"rotate("+a+"rad)","-ms-transform":"rotate("+a+"rad)","-webkit-transform":"rotate("+a+"rad)"}).appendTo(this.content)},_creteVmlDependencyDragHint:function(t,i){var n=e("<kvml:line class='"+C.styles.dependencyHint+"' style='position:absolute; top: 0px; left: 0px;' strokecolor='black' strokeweight='2px' from='"+t.x+"px,"+t.y+"px' to='"+i.x+"px,"+i.y+"px'></kvml:line>").appendTo(this.content);n[0].outerHTML=n[0].outerHTML},_removeDependencyDragHint:function(){this.content.find("."+C.styles.dependencyHint).remove()},_createTaskTooltip:function(t,i,n){var r,s=C.styles,o=this.options,a=this.content,l=a.offset(),d=a.width(),u=kendo.scrollLeft(a),h=e(i).parents("tr").first(),f=h.offset(),p=o.tooltip&&o.tooltip.template?kendo.template(o.tooltip.template):y,m=c?n-(l.left+u+kendo.support.scrollbar()):n-(l.left-u),g=f.top+h.outerHeight()-l.top+a.scrollTop(),v=this._taskTooltip=e('<div style="z-index: 100002;" class="'+s.tooltipWrapper+'" ><div class="'+s.taskContent+'"></div></div>');v.css({left:m,top:g}).appendTo(a).find("."+s.taskContent).append(p({styles:s,task:t,messages:o.messages.views})),v.outerHeight()<f.top-l.top&&v.css("top",f.top-l.top-v.outerHeight()+a.scrollTop()),(r=v.outerWidth())+m-u>d&&((m-=r)<u&&(m=u+d-(r+17)),v.css("left",m))},_removeTaskTooltip:function(){this._taskTooltip&&this._taskTooltip.remove(),this._taskTooltip=null},_scrollTo:function(e){var t=e.offset().left,i=e.width(),n=t+i,r=e.closest("tr"),s=r.offset().top,o=s+r.height(),a=this.content,l=a.offset(),d=l.top,c=d+a.height(),u=l.left,h=a.width(),f=u+h,p=kendo.support.scrollbar();s<d?a.scrollTop(a.scrollTop()+(s-d)):o>c&&a.scrollTop(a.scrollTop()+(o+p-c)),t<u&&i>h&&n<f||n>f&&i<h?a.scrollLeft(a.scrollLeft()+(n+p-f)):(n>f&&i>h&&t>u||t<u&&i<h)&&a.scrollLeft(a.scrollLeft()+(t-u))},_timeSlots:function(){return this._slots&&this._slots.length?this._slots[this._slots.length-1]:[]},_headers:function(e){for(var t,i,s,o,a=[],l=C.styles,d=0,c=e.length;d<c;d++){i=[];for(var u=0,h=(t=e[d]).length;u<h;u++)s=t[u],o=r(s.text),i.push(n("th",{colspan:s.span,className:l.header+(s.isNonWorking?" "+l.nonWorking:"")},[o]));a.push(n("tr",null,i))}return a},_hours:function(e,t){var i,n,r,s=[],o=this.options,a=o.workDayStart.getHours(),l=o.workDayEnd.getHours(),d=o.hourSpan;for(e=new Date(e),t=new Date(t);e<t;)n=(r=(i=new Date(e)).getHours())>=a&&r<l,i.setHours(i.getHours()+d),r==i.getHours()&&i.setHours(i.getHours()+2*d),o.showWorkHours&&!n||s.push({start:e,end:i,isNonWorking:!n,span:1}),e=i;return s},_days:function(e,t){var i,n,r=[];for(e=new Date(e),t=new Date(t);e<t;)i=kendo.date.nextDay(e),n=this._isWorkDay(e),this.options.showWorkDays&&!n||r.push({start:e,end:i,isNonWorking:!n,span:1}),e=i;return r},_weeks:function(e,t){var i,n,r,s=[],o=this.calendarInfo().firstDay;for(e=new Date(e),t=new Date(t);e<t;)(i=kendo.date.dayOfWeek(kendo.date.addDays(e,1),o,1))>t&&(i=t),(r=(n=this._days(e,i)).length)>0&&s.push({start:n[0].start,end:n[r-1].end,span:r}),e=i;return s},_months:function(e,t){var i,n,r,s=[];for(e=new Date(e),t=new Date(t);e<t;)(i=new Date(e)).setMonth(i.getMonth()+1),(r=(n=this._days(e,i)).length)>0&&s.push({start:n[0].start,end:n[r-1].end,span:r}),e=i;return s},_years:function(e,t){var i,n=[];for(e=new Date(e),t=new Date(t);e<t;)(i=new Date(e)).setFullYear(i.getFullYear()+1),n.push({start:e,end:i,span:12}),e=i;return n},_slotHeaders:function(e,t){for(var i,n=[],r=0,s=e.length;r<s;r++)i=e[r],n.push({text:t(i),isNonWorking:!!i.isNonWorking,span:i.span});return n},_isWorkDay:function(e){for(var t=e.getDay(),i=this._workDays,n=0,r=i.length;n<r;n++)if(i[n]===t)return!0;return!1},calendarInfo:function(){return kendo.getCulture().calendars.standard},_renderCurrentTime:function(){var t,i=this._getCurrentTime(),n=this._offset(i),r=e("<div class='k-current-time'></div>"),s=C.styles,o=e("."+s.tasksWrapper),a=e("."+s.tasksTable);this.content&&this._timeSlots().length&&(this.content.find(".k-current-time").remove(),i<(t=this._timeSlots()[this._slotIndex("start",i)]).start||i>t.end||(o.length&&a.length&&(n+=a.offset().left-o.offset().left),r.css({left:n+"px",top:"0px",width:"1px",height:this._contentHeight+"px"}).appendTo(this.content)))},_getCurrentTime:function(){return new Date},_currentTime:function(){var e=this.options.currentTimeMarker;!1!==e&&void 0!==e.updateInterval&&(this._renderCurrentTime(),this._currentTimeUpdateTimer=setInterval(l(this._renderCurrentTime,this),e.updateInterval))}});a(!0,C,{styles:{alt:"k-alt",reset:"k-reset",nonWorking:"k-nonwork-hour",header:"k-header",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",tasksWrapper:"k-gantt-tables",rowsTable:"k-gantt-rows",columnsTable:"k-gantt-columns",tasksTable:"k-gantt-tasks",dependenciesWrapper:"k-gantt-dependencies",resource:"k-resource",resourceAlt:"k-resource k-alt",task:"k-task",taskSingle:"k-task-single",taskMilestone:"k-task-milestone",taskSummary:"k-task-summary",taskWrap:"k-task-wrap",taskMilestoneWrap:"k-milestone-wrap",resourcesWrap:"k-resources-wrap",taskDot:"k-task-dot",taskDotStart:"k-task-start",taskDotEnd:"k-task-end",taskDragHandle:"k-task-draghandle",taskContent:"k-task-content",taskTemplate:"k-task-template",taskActions:"k-task-actions",taskDelete:"k-task-delete",taskComplete:"k-task-complete",taskDetails:"k-task-details",taskDetailsPercent:"k-task-pct",link:"k-link",icon:"k-icon",iconDelete:"k-si-close",taskResizeHandle:"k-resize-handle",taskResizeHandleWest:"k-resize-w",taskResizeHandleEast:"k-resize-e",taskSummaryProgress:"k-task-summary-progress",taskSummaryComplete:"k-task-summary-complete",line:"k-line",lineHorizontal:"k-line-h",lineVertical:"k-line-v",arrowWest:"k-arrow-w",arrowEast:"k-arrow-e",dragHint:"k-drag-hint",dependencyHint:"k-dependency-hint",tooltipWrapper:"k-widget k-tooltip k-popup k-group k-reset",tooltipContent:"k-tooltip-content",tooltipCallout:"k-callout k-callout-s",callout:"k-callout",marquee:"k-marquee k-gantt-marquee",marqueeColor:"k-marquee-color"}}),kendo.ui.GanttDayView=C.extend({name:"day",options:{timeHeaderTemplate:p,dayHeaderTemplate:m,resizeTooltipFormat:"h:mm tt ddd, MMM d"},range:function(e){this.start=kendo.date.getDate(e.start),this.end=kendo.date.getDate(e.end),(kendo.date.getMilliseconds(e.end)>0||this.end.getTime()===this.start.getTime())&&(this.end=kendo.date.addDays(this.end,1))},_createSlots:function(){var e,t,i,n,r=[];i=[];for(var s=0,o=(e=this._days(this.start,this.end)).length;s<o;s++)t=e[s],n=this._hours(t.start,t.end),t.span=n.length,i.push.apply(i,n);return r.push(e),r.push(i),r},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.dayHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.timeHeaderTemplate))),e}}),kendo.ui.GanttWeekView=C.extend({name:"week",options:{dayHeaderTemplate:m,weekHeaderTemplate:g,resizeTooltipFormat:"h:mm tt ddd, MMM d"},range:function(e){var t=this.calendarInfo().firstDay,i=e.end;t===i.getDay()&&i.setDate(i.getDate()+7),this.start=kendo.date.getDate(kendo.date.dayOfWeek(e.start,t,-1)),this.end=kendo.date.getDate(kendo.date.dayOfWeek(i,t,1))},_createSlots:function(){var e=[];return e.push(this._weeks(this.start,this.end)),e.push(this._days(this.start,this.end)),e},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.weekHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.dayHeaderTemplate))),e}}),kendo.ui.GanttMonthView=C.extend({name:"month",options:{weekHeaderTemplate:g,monthHeaderTemplate:v,resizeTooltipFormat:"dddd, MMM d, yyyy"},range:function(e){this.start=kendo.date.firstDayOfMonth(e.start),this.end=kendo.date.addDays(kendo.date.getDate(kendo.date.lastDayOfMonth(e.end)),1)},_createSlots:function(){var e=[];return e.push(this._months(this.start,this.end)),e.push(this._weeks(this.start,this.end)),e},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.monthHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.weekHeaderTemplate))),e}}),kendo.ui.GanttYearView=C.extend({name:"year",options:{yearHeaderTemplate:_,monthHeaderTemplate:v,resizeTooltipFormat:"dddd, MMM d, yyyy"},range:function(e){this.start=kendo.date.firstDayOfMonth(new Date(e.start.setMonth(0))),this.end=kendo.date.firstDayOfMonth(new Date(e.end.setMonth(12)))},_createSlots:function(){var t=[],i=this._months(this.start,this.end);return e(i).each(function(e,t){t.span=1}),t.push(this._years(this.start,this.end)),t.push(i),t},_layout:function(){var e=[],t=this.options;return e.push(this._slotHeaders(this._slots[0],kendo.template(t.yearHeaderTemplate))),e.push(this._slotHeaders(this._slots[1],kendo.template(t.monthHeaderTemplate))),e}});var S=kendo.ui.GanttTimeline=i.extend({init:function(e,t){i.fn.init.call(this,e,t),this.options.views&&this.options.views.length||(this.options.views=["day","week","month"]),c=kendo.support.isRtl(e),this._wrapper(),this._domTrees(),this._views(),this._selectable(),this._draggable(),this._resizable(),this._percentResizeDraggable(),this._createDependencyDraggable(),this._attachEvents(),this._tooltip()},options:{name:"GanttTimeline",messages:{views:{day:"Day",week:"Week",month:"Month",year:"Year",start:"Start",end:"End"}},snap:!0,selectable:!0,editable:!0},destroy:function(){i.fn.destroy.call(this),clearTimeout(this._tooltipTimeout),this._currentTimeUpdateTimer&&clearInterval(this._currentTimeUpdateTimer),this._unbindView(this._selectedView),this._moveDraggable&&this._moveDraggable.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),this._percentDraggable&&this._percentDraggable.destroy(),this._dependencyDraggable&&this._dependencyDraggable.destroy(),this.touch&&this.touch.destroy(),this._headerTree=null,this._taskTree=null,this._dependencyTree=null,this.wrapper.off(f),kendo.destroy(this.wrapper)},_wrapper:function(){var t=S.styles,i=this,n=this.options;this.wrapper=this.element.addClass(t.wrapper).append("<div class='"+t.gridHeader+"'><div class='"+t.gridHeaderWrap+"'></div></div>").append("<div class='"+t.gridContentWrap+"'><div class='"+t.tasksWrapper+"'></div><div class='"+t.dependenciesWrapper+"'></div></div>"),n.rowHeight&&(this._calculatedSize=function(){var r,s,o="string"==typeof n.rowHeight?n.rowHeight:n.rowHeight+"px",a=e(kendo.format("<table style='visibility: hidden;'><tbody><tr style='height:{0}'><td>&nbsp;</td></tr></tbody></table>",o));return i.wrapper.find("."+t.tasksWrapper).append(a),r=a.find("tr").outerHeight(),s=a.find("td").height(),a.remove(),{row:r,cell:s}}())},_domTrees:function(){var e=S.styles,t=kendo.dom.Tree,i=this.wrapper;this._headerTree=new t(i.find("."+e.gridHeaderWrap)[0]),this._taskTree=new t(i.find("."+e.tasksWrapper)[0]),this._dependencyTree=new t(i.find("."+e.dependenciesWrapper)[0])},_views:function(){var e,t,i,n,r,s=this.options.views;this.views={};for(var l=0,d=s.length;l<d;l++)e=s[l],(t=o(e))&&!1===e.selectable||(i=t?"string"!=typeof e.type?e.title:e.type:e,(n=x[i])&&(t&&(e.type=n.type),n.title=this.options.messages.views[i]),e=a({title:i},n,t?e:{}),i&&(this.views[i]=e,r&&!e.selected||(r=i)));r&&(this._selectedViewName=r)},view:function(e){return e&&(this._selectView(e),this.trigger("navigate",{view:e,action:"changeView"})),this._selectedView},_selectView:function(e){e&&this.views[e]&&(this._selectedView&&this._unbindView(this._selectedView),this._selectedView=this._initializeView(e),this._selectedViewName=e)},_viewByIndex:function(e){var t,i=this.views;for(t in i){if(!e)return t;e--}},_initializeView:function(e){var t=this.views[e];if(t){var i=t.type;if("string"==typeof i&&(i=kendo.getter(t.type)(window)),!i)throw new Error("There is no such view");t=new i(this.wrapper,function(e){return delete e.name,delete e.prefix,delete e.views,e}(a(!0,{headerTree:this._headerTree,taskTree:this._taskTree,dependencyTree:this._dependencyTree,calculatedSize:this._calculatedSize},t,this.options)))}return t},_unbindView:function(e){e&&e.destroy()},_range:function(e){if(!e||!e.length)return{start:new Date,end:new Date};var t=new h(e).sort({field:"start",dir:"asc"}).toArray()[0].start||new Date,i=new h(e).sort({field:"end",dir:"desc"}).toArray()[0].end||new Date;return{start:new Date(t),end:new Date(i)}},_render:function(e){var t=this.view(),i=this._range(e);this._tasks=e,t.range(i),t.renderLayout(),t.render(e)},_renderDependencies:function(e){this.view()._renderDependencies(e)},_taskByUid:function(e){for(var t,i=this._tasks,n=i.length,r=0;r<n;r++)if((t=i[r]).uid===e)return t},_draggable:function(){var e,i,n,r,s=this,o=this.options.snap,a=S.styles,l=function(){s.view()._removeDragHint(),e&&e.css("opacity",1),e=null,i=null,s.dragInProgress=!1};this.options.editable&&(this._moveDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:"."+a.task,holdToDrag:kendo.support.mobileOS,ignore:"."+a.taskResizeHandle}),this._moveDraggable.bind("dragstart",function(t){var a=s.view();e=t.currentTarget.parent(),i=s._taskByUid(t.currentTarget.attr("data-uid")),s.trigger("moveStart",{task:i})?t.preventDefault():(n=i.start,r=a._timeByPosition(t.x.location,o)-n,a._createDragHint(e),e.css("opacity",.5),clearTimeout(s._tooltipTimeout),s.dragInProgress=!0)}).bind("drag",kendo.throttle(function(e){if(s.dragInProgress){var t=s.view(),a=new Date(t._timeByPosition(e.x.location,o)-r),l=a;s.trigger("move",{task:i,start:a})||(n=a,c&&(l=new Date(n.getTime()+i.duration())),t._updateDragHint(l))}},15)).bind("dragend",function(){s.trigger("moveEnd",{task:i,start:n}),l()}).bind("dragcancel",function(){l()}).userEvents.bind("select",function(){t()}))},_resizable:function(){var e,i,n,r,s,o=this,a=this.options.snap,l=S.styles,d=function(){o.view()._removeResizeHint(),e=null,i=null,o.dragInProgress=!1};this.options.editable&&(this._resizeDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:"."+l.taskResizeHandle,holdToDrag:!1}),this._resizeDraggable.bind("dragstart",function(t){s=t.currentTarget.hasClass(l.taskResizeHandleWest),c&&(s=!s),e=t.currentTarget.closest("."+l.task),i=o._taskByUid(e.attr("data-uid")),o.trigger("resizeStart",{task:i})?t.preventDefault():(n=i.start,r=i.end,o.view()._createResizeHint(i),clearTimeout(o._tooltipTimeout),o.dragInProgress=!0)}).bind("drag",kendo.throttle(function(e){if(o.dragInProgress){var t=o.view(),l=t._timeByPosition(e.x.location,a,!s);s?n=l<r?l:r:r=l>n?l:n,o.trigger("resize",{task:i,start:n,end:r})||t._updateResizeHint(n,r,s)}},15)).bind("dragend",function(){o.trigger("resizeEnd",{task:i,resizeStart:s,start:n,end:r}),d()}).bind("dragcancel",function(){d()}).userEvents.bind("select",function(){t()}))},_percentResizeDraggable:function(){var e,i,n,r,s,o,a,l,d,u,h=this,f=S.styles,p=function(){h.view()._removePercentCompleteTooltip(),i=null,e=null,h.dragInProgress=!1},m=function(e){i.find("."+f.taskComplete).width(e).end().siblings("."+f.taskDragHandle).css(c?"right":"left",e)};this.options.editable&&(this._percentDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:"."+f.taskDragHandle,holdToDrag:!1}),this._percentDraggable.bind("dragstart",function(t){h.trigger("percentResizeStart")?t.preventDefault():(i=t.currentTarget.siblings("."+f.task),e=h._taskByUid(i.attr("data-uid")),a=e.percentComplete,n=i.offset(),r=this.element.offset(),s=i.find("."+f.taskComplete).width(),o=i.outerWidth(),clearTimeout(h._tooltipTimeout),h.dragInProgress=!0)}).bind("drag",kendo.throttle(function(e){if(h.dragInProgress){u=c?-e.x.initialDelta:e.x.initialDelta;var t=Math.max(0,Math.min(o,s+u));a=Math.round(t/o*100),m(t),l=n.top-r.top,d=n.left+t-r.left,c&&(d+=o-2*t),h.view()._updatePercentCompleteTooltip(l,d,a)}},15)).bind("dragend",function(){h.trigger("percentResizeEnd",{task:e,percentComplete:a/100}),p()}).bind("dragcancel",function(){m(s),p()}).userEvents.bind("select",function(){t()}))},_createDependencyDraggable:function(){var i,n,r,s=this,o=e(),a=e(),l=d.msie&&d.version<9,c=S.styles,u=function(){i.css("display","").removeClass(c.hovered),i.parent().removeClass(c.origin),i=null,h(!1),a=e(),o=e(),s.view()._removeDependencyDragHint(),s.dragInProgress=!1},h=function(e){a.hasClass(c.origin)||(a.find("."+c.taskDot).css("display",e?"block":""),o.toggleClass(c.hovered,e))};this.options.editable&&(l&&document.namespaces&&document.namespaces.add("kvml","urn:schemas-microsoft-com:vml","#default#VML"),this._dependencyDraggable=new kendo.ui.Draggable(this.wrapper,{distance:0,filter:"."+c.taskDot,holdToDrag:!1}),this._dependencyDraggable.bind("dragstart",function(e){if(s.trigger("dependencyDragStart"))e.preventDefault();else{(i=e.currentTarget.css("display","block").addClass(c.hovered)).parent().addClass(c.origin);var t=i.offset(),o=s.wrapper.find("."+c.tasksWrapper).offset();n=Math.round(t.left-o.left+i.outerHeight()/2),r=Math.round(t.top-o.top+i.outerWidth()/2),clearTimeout(s._tooltipTimeout),s.dragInProgress=!0}}).bind("drag",kendo.throttle(function(t){if(s.dragInProgress){s.view()._removeDependencyDragHint();var i=e(kendo.elementUnderCursor(t)),d=s.wrapper.find("."+c.tasksWrapper).offset(),u=t.x.location-d.left,f=t.y.location-d.top;s.view()._updateDependencyDragHint({x:n,y:r},{x:u,y:f},l),h(!1),o=i.hasClass(c.taskDot)?i:e(),a=i.closest("."+c.taskWrap),h(!0)}},15)).bind("dragend",function(){if(o.length){var e=i.hasClass(c.taskDotStart),t=o.hasClass(c.taskDotStart),n=e?t?3:2:t?1:0,r=s._taskByUid(i.siblings("."+c.task).attr("data-uid")),a=s._taskByUid(o.siblings("."+c.task).attr("data-uid"));r!==a&&s.trigger("dependencyDragEnd",{type:n,predecessor:r,successor:a})}u()}).bind("dragcancel",function(){u()}).userEvents.bind("select",function(){t()}))},_selectable:function(){var t=this,i=S.styles;this.options.selectable&&this.wrapper.on("click"+f,"."+i.task,function(i){i.stopPropagation(),i.ctrlKey?t.trigger("clear"):t.trigger("select",{uid:e(this).attr("data-uid")})}).on("click"+f,"."+i.taskWrap,function(t){t.stopPropagation(),e(this).css("z-index","0");var n=e(document.elementFromPoint(t.clientX,t.clientY));n.hasClass(i.line)&&n.click(),e(this).css("z-index","")}).on("click"+f,"."+i.tasksWrapper,function(){t.selectDependency().length>0?t.clearSelection():t.trigger("clear")}).on("click"+f,"."+i.line,function(e){e.stopPropagation(),t.selectDependency(this)})},select:function(e){var t=this.wrapper.find(e),i=S.styles;return t.length?(this.clearSelection(),t.addClass(i.selected),void(kendo.support.mobileOS&&t.parent().addClass(i.taskWrapActive))):this.wrapper.find("."+i.task+"."+i.selected)},selectDependency:function(t){var i,n=this.wrapper.find(t),r=S.styles;return n.length?(this.clearSelection(),this.trigger("clear"),i=e(n).attr("data-uid"),void this.wrapper.find("."+r.line+"[data-uid='"+i+"']").addClass(r.selected)):this.wrapper.find("."+r.line+"."+r.selected)},clearSelection:function(){var e=S.styles;this.wrapper.find("."+e.selected).removeClass(e.selected),kendo.support.mobileOS&&this.wrapper.find("."+e.taskWrapActive).removeClass(e.taskWrapActive)},_attachEvents:function(){var t=this,i=S.styles;this.options.editable&&(this._tabindex(),this.wrapper.on("click"+f,"."+i.taskDelete,function(n){t.trigger("removeTask",{uid:e(this).closest("."+i.task).attr("data-uid")}),n.stopPropagation(),n.preventDefault()}).on("keydown"+f,function(e){var i;e.keyCode===u.DELETE&&(i=t.selectDependency()).length&&(t.trigger("removeDependency",{uid:i.attr("data-uid")}),t.clearSelection())}),kendo.support.mobileOS?this.touch=this.wrapper.kendoTouch({filter:"."+i.task,doubletap:function(i){t.trigger("editTask",{uid:e(i.touch.currentTarget).attr("data-uid")})}}).data("kendoTouch"):this.wrapper.on("dblclick"+f,"."+i.task,function(i){t.trigger("editTask",{uid:e(this).attr("data-uid")}),i.stopPropagation(),i.preventDefault()}))},_tooltip:function(){var t,i=this,n=this.options.tooltip,r=S.styles,s=function(e){t=e.clientX};n&&!1===n.visible||(kendo.support.mobileOS?(this.wrapper.on("click"+f,"."+r.taskDelete,function(e){e.stopPropagation(),i.view()._removeTaskTooltip()}).on("mouseleave"+f,"."+r.task,function(t){0===e(t.relatedTarget).parents("."+r.taskWrap,"."+r.task).length&&i.view()._removeTaskTooltip()}),this.touch.bind("tap",function(t){var n=t.touch.target,r=i._taskByUid(e(n).attr("data-uid")),s=t.touch.x.client;i.view()._taskTooltip&&i.view()._removeTaskTooltip(),i.view()._createTaskTooltip(r,n,s)}).bind("doubletap",function(){i.view()._removeTaskTooltip()})):this.wrapper.on("mouseenter"+f,"."+r.task,function(){var n=this,r=i._taskByUid(e(this).attr("data-uid"));i.dragInProgress||(i._tooltipTimeout=setTimeout(function(){i.view()._createTaskTooltip(r,n,t)},800),e(this).on("mousemove",s))}).on("mouseleave"+f,"."+r.task,function(){clearTimeout(i._tooltipTimeout),i.view()._removeTaskTooltip(),e(this).off("mousemove",s)}))}});a(!0,S,{styles:{wrapper:"k-timeline k-grid k-widget",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",tasksWrapper:"k-gantt-tables",dependenciesWrapper:"k-gantt-dependencies",task:"k-task",line:"k-line",taskResizeHandle:"k-resize-handle",taskResizeHandleWest:"k-resize-w",taskDragHandle:"k-task-draghandle",taskComplete:"k-task-complete",taskDelete:"k-task-delete",taskWrapActive:"k-task-wrap-active",taskWrap:"k-task-wrap",taskDot:"k-task-dot",taskDotStart:"k-task-start",taskDotEnd:"k-task-end",hovered:"k-state-hover",selected:"k-state-selected",origin:"k-origin"}})}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.gantt",["kendo.data","kendo.popup","kendo.window","kendo.resizable","kendo.gantt.list","kendo.gantt.timeline","kendo.grid","kendo.pdf"],function(){return function(e,t){function i(e){return"["+s.attr("uid")+(e?"='"+e+"']":"]")}function n(t,i){var n=[],r=function(t){return e(t).parentsUntil("body").filter(function(e,t){var i=s.getComputedStyles(t,["overflow"]);return"visible"!=i.overflow}).add(window)}(t.parents("["+s.attr("role")+'="gantt"]'));t.attr(C,0),i&&r.each(function(t,i){n[t]=e(i).scrollTop()});try{t[0].setActive()}catch(e){t[0].focus()}i&&r.each(function(t,i){e(i).scrollTop(n[t])})}var r,s=window.kendo,o="matchMedia"in window,a=s.support.browser,l=s.support.mobileOS,d=s.Observable,c=s.ui.Widget,u=s.data.DataSource,h=s.data.ObservableObject,f=s.data.ObservableArray,p=s.data.Query,m=e.isArray,g=e.inArray,v=s.isFunction,_=e.proxy,b=e.extend,k=e.isPlainObject,w=e.map,y=s.keys,x=".kendoGantt",C="tabIndex",S={down:{origin:"bottom left",position:"top left"},up:{origin:"top left",position:"bottom left"}},T="aria-activedescendant",D="action-option-focused",F=s.template('<button class="#=styles.buttonToggle#"><span class="#=styles.iconToggle#">&nbps;</span></button>'),E='<button class="#=styles.button# #=className#" #if (action) {#data-action="#=action#"#}#><span class="#=iconClass#"></span><span>#=text#</span></button>',R=s.template('<li class="#=styles.currentView# #=styles.viewButtonDefault#"><a href="\\#" class="#=styles.link#">&nbps;</a></li>'),A=s.template('<ul class="#=styles.viewsWrapper#">#for(var view in views){#<li class="#=styles.viewButtonDefault# #=styles.viewButton#-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a href="\\#" class="#=styles.link#">#=views[view].title#</a></li>#}#</ul>'),I=s.template('<div class="#=styles.popupWrapper#"><ul class="#=styles.popupList#" role="listbox">#for(var i = 0, l = actions.length; i < l; i++){#<li class="#=styles.item#" data-action="#=actions[i].data#" role="option">#=actions[i].text#</span>#}#</ul></div>'),M=d.extend({init:function(e,t){d.fn.init.call(this),this.element=e,this.options=b(!0,{},this.options,t),this._popup()},options:{direction:"down",navigatable:!1},_current:function(e){var t=W.styles,i=this.list.find("."+t.focused),n=i[e]();n.length&&(i.removeClass(t.focused).removeAttr("id"),n.addClass(t.focused).attr("id",D),this.list.find("ul").removeAttr(T).attr(T,D))},_popup:function(){var t=this,i=W.styles,n="li."+i.item,r="."+i.toolbar.appendButton,o=this.options.messages.actions,a=this.options.navigatable;this.list=e(I({styles:i,actions:[{data:"add",text:o.addChild},{data:"insert-before",text:o.insertBefore},{data:"insert-after",text:o.insertAfter}]})),this.element.append(this.list),this.popup=new s.ui.Popup(this.list,b({anchor:this.element.find(r),open:function(){t._adjustListWidth()},animation:this.options.animation},S[this.options.direction])),this.element.on("click"+x,r,function(n){var r=e(this).attr(s.attr("action"));n.preventDefault(),r?t.trigger("command",{type:r}):(t.popup.open(),a&&t.list.find("li:first").addClass(i.focused).attr("id",D).end().find("ul").attr({TABINDEX:0,"aria-activedescendant":D}).focus())}),this.list.find(n).hover(function(){e(this).addClass(i.hovered)},function(){e(this).removeClass(i.hovered)}).end().on("click"+x,n,function(){t.trigger("command",{type:e(this).attr(s.attr("action"))}),t.popup.close()}),a&&(this.popup.bind("close",function(){t.list.find(n).removeClass(i.focused).end().find("ul").attr(C,0),t.element.parents("["+s.attr("role")+'="gantt"]').find("."+i.gridContent+" > table:first").focus()}),this.list.find("ul").on("keydown"+x,function(e){switch(e.keyCode){case y.UP:e.preventDefault(),t._current("prev");break;case y.DOWN:e.preventDefault(),t._current("next");break;case y.ENTER:t.list.find("."+i.focused).click();break;case y.ESC:e.preventDefault(),t.popup.close()}}))},_adjustListWidth:function(){var e,t,i=this.list,n=W.styles,r=i[0].style.width,s=this.element.find("."+n.toolbar.appendButton),o=i.outerWidth();!i.data("width")&&r||(t=(e=window.getComputedStyle?window.getComputedStyle(s[0],null):0)?parseFloat(e.width):s.outerWidth(),e&&(a.mozilla||a.msie)&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),o>(r="border-box"!==i.css("box-sizing")?t-(i.outerWidth()-i.width()):t)&&(r=o),i.css({fontFamily:s.css("font-family"),width:r}).data("width",r))},destroy:function(){clearTimeout(this._focusTimeout),this.popup.destroy(),this.element.off(x),this.list.off(x),this.unbind()}}),H=function(e,t){return function(i){var n=(i=m(i)?{data:i}:i)||{},r=n.data;if(n.data=r,!(n instanceof e)&&n instanceof u)throw new Error("Incorrect DataSource type. Only "+t+" instances are supported");return n instanceof e?n:new e(n)}},z=s.data.Model.define({id:"id",fields:{id:{type:"number"},predecessorId:{type:"number"},successorId:{type:"number"},type:{type:"number"}}}),N=u.extend({init:function(e){u.fn.init.call(this,b(!0,{},{schema:{modelBase:z,model:z}},e))},successors:function(e){return this._dependencies("predecessorId",e)},predecessors:function(e){return this._dependencies("successorId",e)},dependencies:function(e){var t=this.predecessors(e),i=this.successors(e);return t.push.apply(t,i),t},_dependencies:function(e,t){var i=this.view(),n={field:e,operator:"eq",value:t};return i=new p(i).filter(n).toArray()}});N.create=H(N,"GanttDependencyDataSource");var P=s.data.Model.define({duration:function(){return this.end-this.start},isMilestone:function(){return 0===this.duration()},_offset:function(e){for(var t,i=["start","end"],n=0;n<i.length;n++)t=new Date(this.get(i[n]).getTime()+e),this.set(i[n],t)},id:"id",fields:{id:{type:"number"},parentId:{type:"number",defaultValue:null,validation:{required:!0}},orderId:{type:"number",validation:{required:!0}},title:{type:"string",defaultValue:"New task"},start:{type:"date",validation:{required:!0}},end:{type:"date",validation:{required:!0,dateCompare:function(e){if(e.filter("[name=end], [name=start]").length){for(var t,i,n=e.attr("name"),r=s.widgetInstance(e,s.ui),o={},a=e;a!==window&&!t;)t=(a=a.parent()).data("kendoEditable");return!(i=t?t.options.model:null)||(o.start=i.start,o.end=i.end,o[n]=r?r.value():s.parseDate(e.value()),o.start<=o.end)}return!0},message:"End date should be after or equal to the start date"}},percentComplete:{type:"number",validation:{required:!0,min:0,max:1,step:.01}},summary:{type:"boolean"},expanded:{type:"boolean",defaultValue:!0}}}),L=u.extend({init:function(e){u.fn.init.call(this,b(!0,{},{schema:{modelBase:P,model:P}},e))},remove:function(e){var t=e.get("parentId"),i=this.taskAllChildren(e);return this._removeItems(i),e=u.fn.remove.call(this,e),this._childRemoved(t,e.get("orderId")),e},add:function(e){if(e)return e=this._toGanttTask(e),this.insert(this.taskSiblings(e).length,e)},insert:function(e,t){if(t)return(t=this._toGanttTask(t)).set("orderId",e),t=u.fn.insert.call(this,e,t),this._reorderSiblings(t,this.taskSiblings(t).length-1),this._resolveSummaryFields(this.taskParent(t)),t},taskChildren:function(e){var t,i=this.view(),n={field:"parentId",operator:"eq",value:null},r=this._sort&&this._sort.length?this._sort:{field:"orderId",dir:"asc"};if(e){if(void 0===(t=e.get("id"))||null===t||""===t)return[];n.value=t}return i=new p(i).filter(n).sort(r).toArray()},taskAllChildren:function(e){var t=[],i=this,n=function(e){var r=i.taskChildren(e);t.push.apply(t,r),w(r,n)};return e?n(e):t=this.view(),t},taskSiblings:function(e){if(!e)return null;var t=this.taskParent(e);return this.taskChildren(t)},taskParent:function(e){return e&&null!==e.get("parentId")?this.get(e.parentId):null},taskLevel:function(e){for(var t=0,i=this.taskParent(e);null!==i;)t+=1,i=this.taskParent(i);return t},taskTree:function(e){for(var t,i=[],n=this.taskChildren(e),r=0,s=n.length;r<s;r++)if(t=n[r],i.push(t),t.get("expanded")){var o=this.taskTree(t);i.push.apply(i,o)}return i},update:function(e,t){var i,n=this,r=function(e){var t=e.field,r=e.sender;switch(t){case"start":n._resolveSummaryStart(n.taskParent(r)),function(e,t){for(var i=n.taskAllChildren(e),r=0,s=i.length;r<s;r++)i[r]._offset(t)}(r,r.get(t).getTime()-i.getTime());break;case"end":n._resolveSummaryEnd(n.taskParent(r));break;case"percentComplete":n._resolveSummaryPercentComplete(n.taskParent(r));break;case"orderId":n._reorderSiblings(r,i)}};void 0!==t.parentId&&((i=e.get("parentId"))!==t.parentId&&(e.set("parentId",t.parentId),n._childRemoved(i,e.get("orderId")),e.set("orderId",n.taskSiblings(e).length-1),n._resolveSummaryFields(n.taskParent(e))),delete t.parentId),e.bind("change",r);for(var s in t)i=e.get(s),e.set(s,t[s]);e.unbind("change",r)},_resolveSummaryFields:function(e){e&&(this._updateSummary(e),this.taskChildren(e).length&&(this._resolveSummaryStart(e),this._resolveSummaryEnd(e),this._resolveSummaryPercentComplete(e)))},_resolveSummaryStart:function(e){var t=this;this._updateSummaryRecursive(e,"start",function(e){for(var i,n=t.taskChildren(e),r=n[0].start.getTime(),s=1,o=n.length;s<o;s++)(i=n[s].start.getTime())<r&&(r=i);return new Date(r)})},_resolveSummaryEnd:function(e){var t=this;this._updateSummaryRecursive(e,"end",function(e){for(var i,n=t.taskChildren(e),r=n[0].end.getTime(),s=1,o=n.length;s<o;s++)(i=n[s].end.getTime())>r&&(r=i);return new Date(r)})},_resolveSummaryPercentComplete:function(e){var t=this;this._updateSummaryRecursive(e,"percentComplete",function(e){var i=t.taskChildren(e);return new p(i).aggregate([{field:"percentComplete",aggregate:"average"}]).percentComplete.average})},_updateSummaryRecursive:function(e,t,i){if(e){var n=i(e);e.set(t,n);var r=this.taskParent(e);r&&this._updateSummaryRecursive(r,t,i)}},_childRemoved:function(e,t){for(var i=null===e?null:this.get(e),n=this.taskChildren(i),r=t,s=n.length;r<s;r++)n[r].set("orderId",r);this._resolveSummaryFields(i)},_reorderSiblings:function(e,t){var i=e.get("orderId"),n=i>t,r=n?t:i,s=n?i:t,o=n?r:r+1,a=this.taskSiblings(e);s=Math.min(s,a.length-1);for(var l=r;l<=s;l++)a[l]!==e&&(a[l].set("orderId",o),o+=1)},_updateSummary:function(e){if(null!==e){var t=this.taskChildren(e).length;e.set("summary",t>0)}},_toGanttTask:function(e){if(!(e instanceof P)){var t=e;(e=this._createNewModel()).accept(t)}return e}});L.create=H(L,"GanttDataSource"),b(!0,s.data,{GanttDataSource:L,GanttTask:P,GanttDependencyDataSource:N,GanttDependency:z});var B={desktop:{dateRange:function(t,i){var n={name:i.field},r=i.model.fields[i.field].validation;r&&k(r)&&r.message&&(n[s.attr("dateCompare-msg")]=r.message),e('<input type="text" required '+s.attr("type")+'="date" '+s.attr("role")+'="datetimepicker" '+s.attr("bind")+'="value:'+i.field+'" '+s.attr("validate")+"='true' />").attr(n).appendTo(t),e("<span "+s.attr("for")+'="'+i.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},resources:function(t,i){e('<a href="#" class="'+i.styles.button+'">'+i.messages.assignButton+"</a>").click(i.click).appendTo(t)}}},O=s.Observable.extend({init:function(e,t){s.Observable.fn.init.call(this),this.element=e,this.options=b(!0,{},this.options,t),this.createButton=this.options.createButton},fields:function(t,i){var n,r=this,s=this.options,o=s.messages.editor,a=s.resources;return s.editable.template?n=e.map(i.fields,function(e,t){return{field:t}}):(n=[{field:"title",title:o.title},{field:"start",title:o.start,editor:t.dateRange},{field:"end",title:o.end,editor:t.dateRange},{field:"percentComplete",title:o.percentComplete,format:"p0"}],i.get(a.field)&&n.push({field:a.field,title:o.resources,messages:o,editor:t.resources,click:function(e){e.preventDefault(),a.editor(r.container.find("."+W.styles.popup.resourcesField),i)},styles:W.styles.popup})),n},_buildEditTemplate:function(e,t,i){var n=this.options.resources,r=this.options.editable.template,o=b({},s.Template,this.options.templateSettings),a=o.paramName,l=W.styles.popup,d="";if(r)"string"==typeof r&&(r=window.unescape(r)),d+=s.template(r,o)(e);else for(var c=0,u=t.length;c<u;c++){var h=t[c];if(d+='<div class="'+l.editLabel+'"><label for="'+h.field+'">'+(h.title||h.field||"")+"</label></div>",h.field===n.field&&(d+='<div class="'+l.resourcesField+'" style="display:none"></div>'),!e.editable||e.editable(h.field))i.push(h),d+="<div "+s.attr("container-for")+'="'+h.field+'" class="'+l.editField+'"></div>';else{var f="#:";h.field?f+=(h=s.expr(h.field,a))+"==null?'':"+h:f+="''",f+="#",f=s.template(f,o),d+='<div class="'+l.editField+'">'+f(e)+"</div>"}}return d}}).extend({destroy:function(){this.close(),this.unbind()},editTask:function(e){this.editable=this._createPopupEditor(e)},close:function(){var e=this,t=function(){e.editable&&(e.editable.destroy(),e.editable=null,e.container=null),e.popup&&(e.popup.destroy(),e.popup=null)};this.editable&&this.container.is(":visible")?(e.trigger("close",{window:e.container}),this.container.data("kendoWindow").bind("deactivate",t).close()):t()},showDialog:function(t){for(var i=t.buttons,n=W.styles.popup,r=s.format('<div class="{0}"><div class="{1}"><p class="{2}">{3}</p><div class="{4}">',n.form,n.formContainer,n.message,t.text,n.buttonsContainer),o=0,a=i.length;o<a;o++)r+=this.createButton(i[o]);r+="</div></div></div>";var l=this.element;this.popup&&this.popup.destroy();var d=this.popup=e(r).appendTo(l).eq(0).on("click","."+n.button,function(t){t.preventDefault(),d.close();var n=e(t.currentTarget).index();i[n].click()}).kendoWindow({modal:!0,resizable:!1,draggable:!1,title:t.title,visible:!1,deactivate:function(){this.destroy(),l.focus()}}).getKendoWindow();d.center().open()},_createPopupEditor:function(t){var i=this,n=this.options.messages,r=W.styles,o=r.popup,a=s.format('<div {0}="{1}" class="{2} {3}"><div class="{4}">',s.attr("uid"),t.uid,o.form,o.editForm,o.formContainer),l=this.fields(B.desktop,t),d=[];a+=this._buildEditTemplate(t,l,d),a+='<div class="'+o.buttonsContainer+'">',a+=this.createButton({name:"update",text:n.save,className:W.styles.primary}),a+=this.createButton({name:"cancel",text:n.cancel}),a+=this.createButton({name:"delete",text:n.destroy}),a+="</div></div></div>";var c=this.container=e(a).appendTo(this.element).eq(0).kendoWindow(b({modal:!0,resizable:!1,draggable:!0,title:n.editor.editorTitle,visible:!1,close:function(e){e.userTriggered&&i.trigger("cancel",{container:c,model:t})&&e.preventDefault()}},{})),u=c.kendoEditable({fields:d,model:t,clearContainer:!1,validateOnBlur:!0,target:i.options.target}).data("kendoEditable");return s.cycleForm(c),this.trigger("edit",{container:c,model:t})?i.trigger("cancel",{container:c,model:t}):(c.data("kendoWindow").center().open(),c.on("click"+x,"."+r.buttonCancel,function(e){e.preventDefault(),e.stopPropagation(),i.trigger("cancel",{container:c,model:t})}),c.on("click"+x,"."+r.buttonSave,function(e){e.preventDefault(),e.stopPropagation();for(var n,r=i.fields(B.desktop,t),s={},o=0,a=r.length;o<a;o++)s[n=r[o].field]=t.get(n);i.trigger("save",{container:c,model:t,updateInfo:s})}),c.on("click"+x,"."+r.buttonDelete,function(e){e.preventDefault(),e.stopPropagation(),i.trigger("remove",{container:c,model:t})})),u}}),V=c.extend({init:function(e,t){c.fn.init.call(this,e,t),this.wrapper=this.element,this.model=this.options.model,this.resourcesField=this.options.resourcesField,this.createButton=this.options.createButton,this._initContainer(),this._attachHandlers()},events:["save"],open:function(){this.window.center().open(),this.grid.resize(!0)},close:function(){this.window.bind("deactivate",_(this.destroy,this)).close()},destroy:function(){this._dettachHandlers(),this.grid.destroy(),this.grid=null,this.window.destroy(),this.window=null,c.fn.destroy.call(this),s.destroy(this.wrapper),this.element=this.wrapper=null},_attachHandlers:function(){var t=W.styles,i=this.grid,n=this._cancelProxy=_(this._cancel,this);this.container.on("click"+x,"."+t.buttonCancel,this._cancelProxy),this._saveProxy=_(this._save,this),this.container.on("click"+x,"."+t.buttonSave,this._saveProxy),this.window.bind("close",function(e){e.userTriggered&&n(e)}),i.wrapper.on("click"+x,"input[type='checkbox']",function(){var t=e(this),n=e(t).closest("tr"),r=i.dataSource.getByUid(n.attr(s.attr("uid"))),o=e(t).is(":checked")?1:"";r.set("value",o)})},_dettachHandlers:function(){this._cancelProxy=null,this._saveProxy=null,this.container.off(x),this.grid.wrapper.off()},_cancel:function(e){e.preventDefault(),this.close()},_save:function(e){e.preventDefault(),this._updateModel(),this.wrapper.is("."+W.styles.popup.resourcesField)||this.trigger("save",{container:this.wrapper,model:this.model}),this.close()},_initContainer:function(){var t=W.styles.popup,i=s.format('<div class="{0} {1}"><div class="{2} {3}"/></div>"',t.form,t.editForm,t.formContainer,t.resourcesFormContainer);i=e(i),this.container=i.find("."+t.resourcesFormContainer),this.window=i.kendoWindow({modal:!0,resizable:!1,draggable:!0,visible:!1,title:this.options.messages.resourcesEditorTitle}).data("kendoWindow"),this._resourceGrid(),this._createButtons()},_resourceGrid:function(){var t=this.options.messages,i=e('<div id="resources-grid"/>').appendTo(this.container);this.grid=new s.ui.Grid(i,{columns:[{field:"name",title:t.resourcesHeader,template:"<label><input type='checkbox' value='#=name#'# if (value > 0 && value !== null) {#checked='checked'# } #/>#=name#</labe>"},{field:"value",title:t.unitsHeader,template:function(e){var t=e.format,i=null!==e.value?e.value:"";return t?s.toString(i,t):i}}],height:280,sortable:!0,editable:!0,filterable:!0,dataSource:{data:this.options.data,schema:{model:{id:"id",fields:{id:{from:"id"},name:{from:"name",type:"string",editable:!1},value:{from:"value",type:"number",defaultValue:""},format:{from:"format",type:"string"}}}}},save:function(e){var t=!!e.values.value;e.container.parent().find("input[type='checkbox']").prop("checked",t)}})},_createButtons:function(){for(var e=this.options.buttons,t='<div class="'+W.styles.popup.buttonsContainer+'">',i=0,n=e.length;i<n;i++)t+=this.createButton(e[i]);t+="</div>",this.container.append(t)},_updateModel:function(){for(var e,t=[],i=this.grid.dataSource.data(),n=0,r=i.length;n<r;n++)null!==(e=i[n].get("value"))&&e>0&&t.push(i[n]);this.model[this.resourcesField]=t}}),W=c.extend({init:function(e,t,i){m(t)&&(t={dataSource:t}),r={append:{text:"Add Task",action:"add",className:W.styles.toolbar.appendButton,iconClass:W.styles.toolbar.iconPlus},pdf:{text:"Export to PDF",className:W.styles.toolbar.pdfButton,iconClass:W.styles.toolbar.iconPdf}},c.fn.init.call(this,e,t),i&&(this._events=i),this._wrapper(),this._resources(),this.options.views&&this.options.views.length||(this.options.views=["day","week","month"]),this._timeline(),this._toolbar(),this._footer(),this._adjustDimensions(),this._preventRefresh=!0,this.view(this.timeline._selectedViewName),this._preventRefresh=!1,this._dataSource(),this._assignments(),this._dropDowns(),this._list(),this._dependencies(),this._resizable(),this._scrollable(),this._dataBind(),this._attachEvents(),this._createEditor(),s.notify(this)},events:["dataBinding","dataBound","add","edit","remove","cancel","save","change","navigate","moveStart","move","moveEnd","resizeStart","resize","resizeEnd","columnResize"],options:{name:"Gantt",autoBind:!0,navigatable:!1,selectable:!0,editable:!0,resizable:!1,columnResizeHandleWidth:3,columns:[],views:[],dataSource:{},dependencies:{},resources:{},assignments:{},taskTemplate:null,messages:{save:"Save",cancel:"Cancel",destroy:"Delete",deleteTaskConfirmation:"Are you sure you want to delete this task?",deleteDependencyConfirmation:"Are you sure you want to delete this dependency?",deleteTaskWindowTitle:"Delete task",deleteDependencyWindowTitle:"Delete dependency",views:{day:"Day",week:"Week",month:"Month",year:"Year",start:"Start",end:"End"},actions:{append:"Add Task",addChild:"Add Child",insertBefore:"Add Above",insertAfter:"Add Below",pdf:"Export to PDF"},editor:{editorTitle:"Task",resourcesEditorTitle:"Resources",title:"Title",start:"Start",end:"End",percentComplete:"Complete",resources:"Resources",assignButton:"Assign",resourcesHeader:"Resources",unitsHeader:"Units"}},showWorkHours:!0,showWorkDays:!0,toolbar:null,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,hourSpan:1,snap:!0,height:600,listWidth:"30%",rowHeight:null},select:function(e){var t=this.list;if(!e)return t.select();t.select(e)},clearSelection:function(){this.list.clearSelection()},destroy:function(){c.fn.destroy.call(this),this.dataSource&&(this.dataSource.unbind("change",this._refreshHandler),this.dataSource.unbind("progress",this._progressHandler),this.dataSource.unbind("error",this._errorHandler)),this.dependencies&&(this.dependencies.unbind("change",this._dependencyRefreshHandler),this.dependencies.unbind("error",this._dependencyErrorHandler)),this.timeline&&(this.timeline.unbind(),this.timeline.destroy()),this.list&&(this.list.unbind(),this.list.destroy()),this.footerDropDown&&this.footerDropDown.destroy(),this.headerDropDown&&this.headerDropDown.destroy(),this._editor&&this._editor.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),this.toolbar.off(x),o&&(this._mediaQuery.removeListener(this._mediaQueryHandler),this._mediaQuery=null),e(window).off("resize"+x,this._resizeHandler),e(this.wrapper).off(x),this.toolbar=null,this.footer=null},setOptions:function(t){var i=s.deepExtend({},this.options,t),n=this._events;if(!t.views){var r=this.view().name;i.views=e.map(this.options.views,function(e){var t=k(e),i=t?"string"!=typeof e.type?e.title:e.type:e;return r===i?t?e.selected=!0:e={type:i,selected:!0}:t&&(e.selected=!1),e})}t.dataSource||(i.dataSource=this.dataSource),t.dependencies||(i.dependencies=this.dependencies),t.resources||(i.resources=this.resources),t.assignments||(i.assignments=this.assignments),this.destroy(),this.element.empty(),this.options=null,this.init(this.element,i,n),c.fn._setEvents.call(this,i)},_attachEvents:function(){this._resizeHandler=_(this.resize,this,!1),e(window).on("resize"+x,this._resizeHandler)},_wrapper:function(){var e=W.styles,t=[e.icon,e.resizeHandle].join(" "),i=this.options,n=i.height,r=i.width;this.wrapper=this.element.addClass(e.wrapper).append("<div class='"+e.listWrapper+"'><div></div></div>").append("<div class='"+e.splitBarWrapper+"'><div class='"+t+"'></div></div>").append("<div class='"+e.timelineWrapper+"'><div></div></div>"),this.wrapper.find("."+e.list).width(i.listWidth),n&&this.wrapper.height(n),r&&this.wrapper.width(r),i.rowHeight&&this.wrapper.addClass(e.rowHeight)},_toolbar:function(){var t,i,n,r=this,a=W.styles,l="."+a.toolbar.views+" > li",d="."+a.toolbar.pdfButton,c="."+a.buttonToggle,u="."+a.gridContent,h=e("."+a.list),f=e("."+a.timeline),p=a.hovered,m=this.options.toolbar,g=e("<div class='"+a.toolbar.actions+"'>");v(m)||(m="string"==typeof m?m:this._actions(m),m=_(s.template(m),this)),n=e(F({styles:a.toolbar})),i=e(A({ns:s.ns,views:this.timeline.views,styles:a.toolbar})),g.append(m({})),t=e("<div class='"+a.toolbar.headerWrapper+"'>").append(n).append(i).append(g),i.find("li").length>1&&i.prepend(R({styles:a.toolbar})),this.wrapper.prepend(t),this.toolbar=t,o&&(this._mediaQueryHandler=_(function(e){e.matches?h.css({display:"none","max-width":0}):(h.css({display:"inline-block",width:"30%","max-width":"none"}),f.css("display","inline-block"),r.refresh(),f.find(u).scrollTop(r.scrollTop)),r._resize()},this),this._mediaQuery=window.matchMedia("(max-width: 480px)"),this._mediaQuery.addListener(this._mediaQueryHandler)),t.on("click"+x,l,function(t){t.preventDefault();var n=r.list,o=e(this).attr(s.attr("name")),l=i.find("."+a.toolbar.currentView);l.is(":visible")&&l.parent().toggleClass(a.toolbar.expanded),n.editable&&n.editable.trigger("validate")||r.trigger("navigate",{view:o})||r.view(o)}).on("click"+x,d,function(e){e.preventDefault(),r.saveAsPDF()}).on("click"+x,c,function(e){e.preventDefault(),h.is(":visible")?(h.css({display:"none",width:"0"}),f.css({display:"inline-block",width:"100%"}),r.refresh(),f.find(u).scrollTop(r.scrollTop)):(f.css({display:"none",width:0}),h.css({display:"inline-block",width:"100%","max-width":"none"}).find(u).scrollTop(r.scrollTop)),r._resize()}),this.wrapper.find("."+a.toolbar.toolbar+" li").hover(function(){e(this).addClass(p)},function(){e(this).removeClass(p)})},_actions:function(){var e=this.options,t=e.toolbar,i="";if(!m(t)){if(!e.editable)return i;t=["append"]}for(var n=0,r=t.length;n<r;n++)i+=this._createButton(t[n]);return i},_footer:function(){if(this.options.editable){var t=W.styles.toolbar,i=this.options.messages.actions,n=e(s.template(E)(b(!0,{styles:t},r.append,{text:i.append}))),o=e("<div class='"+t.actions+"'>").append(n),a=e("<div class='"+t.footerWrapper+"'>").append(o);this.wrapper.append(a),this.footer=a}},_createButton:function(e){var t=e.template||E,i=this.options.messages.actions,n="string"==typeof e?e:e.name||e.text,o={iconClass:"",action:"",text:n,className:r[n]?r[n].className:"k-gantt-"+(n||"").replace(/\s/g,""),styles:W.styles.toolbar};if(!(n||k(e)&&e.template))throw new Error("Custom commands should have name specified");return o=b(!0,o,r[n],{text:i[n]}),k(e)&&(e.className&&g(o.className,e.className.split(" "))<0&&(e.className+=" "+o.className),o=b(!0,o,e)),s.template(t)(o)},_adjustDimensions:function(){var e=this.element,t=W.styles,i="."+t.list,n="."+t.timeline,r="."+t.splitBar,s=this.toolbar.outerHeight(),o=this.footer?this.footer.outerHeight():0,a=e.height(),l=e.width(),d=e.find(r).outerWidth(),c=e.find(i).outerWidth();e.children([i,n,r].join(",")).height(a-(s+o)).end().children(n).width(l-(d+c)),l<c+d&&e.find(i).width(l-d)},_scrollTo:function(e){var t,n,r=this.timeline.view(),o=this.list,a=s.attr("uid"),l="string"==typeof e?e:e.closest("tr"+i()).attr(a);r.content.is(":visible")?(n=r.content.find(i(l)),t=function(){r._scrollTo(n)}):(n=o.content.find(i(l)),t=function(){n.get(0).scrollIntoView()}),0!==n.length&&t()},_dropDowns:function(){var e=this,t="."+W.styles.toolbar.actions,i=this.options.messages.actions,n=this.timeline,r=function(t){var i,r=t.type,s=e.dataSource,o=s._createNewModel(),a=e.dataItem(e.select()),l=s.taskParent(a),d=n.view()._timeSlots()[0],c="add"===r?a:l,u=e.list.editable;u&&u.trigger("validate")||(o.set("title","New task"),c?(o.set("parentId",c.get("id")),o.set("start",c.get("start")),o.set("end",c.get("end"))):(o.set("start",d.start),o.set("end",d.end)),"add"!==r&&(i=a.get("orderId"),i="insert-before"===r?i:i+1),e._createTask(o,i))};this.options.editable&&(this.footerDropDown=new M(this.footer.children(t).eq(0),{messages:{actions:i},direction:"up",animation:{open:{effects:"slideIn:up"}},navigatable:e.options.navigatable}),this.headerDropDown=new M(this.toolbar.children(t).eq(0),{messages:{actions:i},navigatable:e.options.navigatable}),this.footerDropDown.bind("command",r),this.headerDropDown.bind("command",r))},_list:function(){for(var e,t=this,i=t.options.navigatable,r=W.styles,o=this.wrapper.find("."+r.list),a=o.find("> div"),l=this.wrapper.find("."+r.toolbar.actions+" > button"),d={columns:this.options.columns||[],dataSource:this.dataSource,selectable:this.options.selectable,editable:this.options.editable,resizable:this.options.resizable,columnResizeHandleWidth:this.options.columnResizeHandleWidth,listWidth:o.outerWidth(),resourcesField:this.resources.field,rowHeight:this.options.rowHeight},c=d.columns,u=function(){i&&(t._current(t._cachedCurrent),n(t.list.content.find("table"),!0)),delete t._cachedCurrent},h=0;h<c.length;h++)(e=c[h]).field===this.resources.field&&"function"!=typeof e.editor&&(e.editor=_(this._createResourceEditor,this));this.list=new s.ui.GanttList(a,d),this.list.bind("render",function(){t._navigatable()},!0).bind("edit",function(e){t._cachedCurrent=e.cell,t.trigger("edit",{task:e.model,container:e.cell})&&e.preventDefault()}).bind("cancel",function(e){t.trigger("cancel",{task:e.model,container:e.cell})&&e.preventDefault(),u()}).bind("update",function(e){t._updateTask(e.task,e.updateInfo),u()}).bind("change",function(){t.trigger("change");var e=t.list.select();e.length?(l.removeAttr("data-action","add"),t.timeline.select("[data-uid='"+e.attr("data-uid")+"']")):(l.attr("data-action","add"),t.timeline.clearSelection())}).bind("columnResize",function(e){t.trigger("columnResize",{column:e.column,oldWidth:e.oldWidth,newWidth:e.newWidth})})},_timeline:function(){var e=this,t=W.styles,i=function(e){return delete e.name,delete e.prefix,delete e.remove,delete e.edit,delete e.add,delete e.navigate,e}(b(!0,{resourcesField:this.resources.field},this.options)),n=this.wrapper.find("."+t.timeline+" > div"),r="."+t.toolbar.currentView+" > ."+t.toolbar.link;this.timeline=new s.ui.GanttTimeline(n,i),this.timeline.bind("navigate",function(i){var n=i.view.replace(/\./g,"\\.").toLowerCase(),s=e.toolbar.find("."+t.toolbar.views+" > li").removeClass(t.selected).end().find("."+t.toolbar.viewButton+"-"+n).addClass(t.selected).find("."+t.toolbar.link).text();e.toolbar.find(r).text(s),e.refresh()}).bind("moveStart",function(t){var i=e.list.editable;i&&i.trigger("validate")?t.preventDefault():e.trigger("moveStart",{task:t.task})&&t.preventDefault()}).bind("move",function(t){var i=t.task,n=t.start,r=new Date(n.getTime()+i.duration());e.trigger("move",{task:i,start:n,end:r})&&t.preventDefault()}).bind("moveEnd",function(t){var i=t.task,n=t.start,r=new Date(n.getTime()+i.duration());e.trigger("moveEnd",{task:i,start:n,end:r})||e._updateTask(e.dataSource.getByUid(i.uid),{start:n,end:r})}).bind("resizeStart",function(t){var i=e.list.editable;i&&i.trigger("validate")?t.preventDefault():e.trigger("resizeStart",{task:t.task})&&t.preventDefault()}).bind("resize",function(t){e.trigger("resize",{task:t.task,start:t.start,end:t.end})&&t.preventDefault()}).bind("resizeEnd",function(t){var i=t.task,n={};t.resizeStart?n.start=t.start:n.end=t.end,e.trigger("resizeEnd",{task:i,start:t.start,end:t.end})||e._updateTask(e.dataSource.getByUid(i.uid),n)}).bind("percentResizeStart",function(t){var i=e.list.editable;i&&i.trigger("validate")&&t.preventDefault()}).bind("percentResizeEnd",function(t){e._updateTask(e.dataSource.getByUid(t.task.uid),{percentComplete:t.percentComplete})}).bind("dependencyDragStart",function(t){var i=e.list.editable;i&&i.trigger("validate")&&t.preventDefault()}).bind("dependencyDragEnd",function(t){var i=e.dependencies._createNewModel({type:t.type,predecessorId:t.predecessor.id,successorId:t.successor.id});e._createDependency(i)}).bind("select",function(t){var i=e.list.editable;i&&i.trigger("validate"),e.select("[data-uid='"+t.uid+"']")}).bind("editTask",function(t){var i=e.list.editable;i&&i.trigger("validate")||e.editTask(t.uid)}).bind("clear",function(){e.clearSelection()}).bind("removeTask",function(t){var i=e.list.editable;i&&i.trigger("validate")||e.removeTask(e.dataSource.getByUid(t.uid))}).bind("removeDependency",function(t){var i=e.list.editable;i&&i.trigger("validate")||e.removeDependency(e.dependencies.getByUid(t.uid))})},_dataSource:function(){var e=this.options.dataSource;e=m(e)?{data:e}:e,this.dataSource&&this._refreshHandler?this.dataSource.unbind("change",this._refreshHandler).unbind("progress",this._progressHandler).unbind("error",this._errorHandler):(this._refreshHandler=_(this.refresh,this),this._progressHandler=_(this._requestStart,this),this._errorHandler=_(this._error,this)),this.dataSource=s.data.GanttDataSource.create(e).bind("change",this._refreshHandler).bind("progress",this._progressHandler).bind("error",this._errorHandler)},_dependencies:function(){var e=this.options.dependencies||{},t=m(e)?{data:e}:e;this.dependencies&&this._dependencyRefreshHandler?this.dependencies.unbind("change",this._dependencyRefreshHandler).unbind("error",this._dependencyErrorHandler):(this._dependencyRefreshHandler=_(this.refreshDependencies,this),this._dependencyErrorHandler=_(this._error,this)),this.dependencies=s.data.GanttDependencyDataSource.create(t).bind("change",this._dependencyRefreshHandler).bind("error",this._dependencyErrorHandler)},_resources:function(){var e=this.options.resources,t=e.dataSource||{};this.resources={field:"resources",dataTextField:"name",dataColorField:"color",dataFormatField:"format"},b(this.resources,e),this.resources.dataSource=s.data.DataSource.create(t)},_assignments:function(){var e=this.options.assignments,t=e.dataSource||{};this.assignments?this.assignments.dataSource.unbind("change",this._assignmentsRefreshHandler):this._assignmentsRefreshHandler=_(this.refresh,this),this.assignments={dataTaskIdField:"taskId",dataResourceIdField:"resourceId",dataValueField:"value"},b(this.assignments,e),this.assignments.dataSource=s.data.DataSource.create(t),this.assignments.dataSource.bind("change",this._assignmentsRefreshHandler)},_createEditor:function(){var e=this;(this._editor=new O(this.wrapper,b({},this.options,{target:this,resources:{field:this.resources.field,editor:_(this._createResourceEditor,this)},createButton:_(this._createPopupButton,this)}))).bind("cancel",function(t){var i=e.dataSource.getByUid(t.model.uid);e.trigger("cancel",{container:t.container,task:i})?t.preventDefault():e.cancelTask()}).bind("edit",function(t){var i=e.dataSource.getByUid(t.model.uid);e.trigger("edit",{container:t.container,task:i})&&t.preventDefault()}).bind("save",function(t){var i=e.dataSource.getByUid(t.model.uid);e.saveTask(i,t.updateInfo)}).bind("remove",function(t){e.removeTask(t.model.uid)}).bind("close",e._onDialogClose)},_onDialogClose:function(){},_createResourceEditor:function(e,t){var i=this,n=t instanceof h?t:t.model,r=n.get("id"),s=this.options.messages,o=i.resources.field;(this._resourceEditor=new V(e,{resourcesField:o,data:this._wrapResourceData(r),model:n,messages:b({},s.editor),buttons:[{name:"update",text:s.save,className:W.styles.primary},{name:"cancel",text:s.cancel}],createButton:_(this._createPopupButton,this),save:function(e){i._updateAssignments(e.model.get("id"),e.model.get(o))}})).open()},_createPopupButton:function(e){var t=e.name||e.text,i={className:W.styles.popup.button+" k-gantt-"+(t||"").replace(/\s/g,""),text:t,attr:""};if(!(t||k(e)&&e.template))throw new Error("Custom commands should have name specified");return k(e)&&(e.className&&(e.className+=" "+i.className),i=b(!0,i,e)),s.template('<a class="#=className#" #=attr# href="\\#">#=text#</a>')(i)},view:function(e){return this.timeline.view(e)},dataItem:function(e){if(!e)return null;var t=this.list,i=t.content.find(e);return t._modelFromElement(i)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.list._setDataSource(this.dataSource),this.options.autoBind&&e.fetch()},setDependenciesDataSource:function(e){this.options.dependencies=e,this._dependencies(),this.options.autoBind&&e.fetch()},items:function(){return this.wrapper.children(".k-task")},_updateAssignments:function(e,t){for(var i,n,r,s=this.assignments.dataSource,o=this.assignments.dataTaskIdField,a=this.assignments.dataResourceIdField,l=!1,d=new p(s.view()).filter({field:o,operator:"eq",value:e}).toArray();d.length;){i=d[0];for(var c=0,u=t.length;c<u;c++)if(n=t[c],i.get(a)===n.get("id")){r=t[c].get("value"),this._updateAssignment(i,r),t.splice(c,1),l=!0;break}l||this._removeAssignment(i),l=!1,d.shift()}for(var h=0,f=t.length;h<f;h++)n=t[h],this._createAssignment(n,e);s.sync()},cancelTask:function(){var e=this._editor;e.container&&e.close()},editTask:function(e){var t="string"==typeof e?this.dataSource.getByUid(e):e;if(t){var i=this.dataSource._createNewModel(t.toJSON());i.uid=t.uid,this.cancelTask(),this._editTask(i)}},_editTask:function(e){this._editor.editTask(e)},saveTask:function(e,t){var i=this._editor,n=i.container,r=i.editable;n&&r&&r.end()&&this._updateTask(e,t)},_updateTask:function(e,t){var i=this.resources.field;this.trigger("save",{task:e,values:t})||(this._preventRefresh=!0,this.dataSource.update(e,t),t[i]&&this._updateAssignments(e.get("id"),t[i]),this._syncDataSource())},_updateAssignment:function(e,t){var i=this.assignments.dataValueField;e.set(i,t)},removeTask:function(e){var t=this,i="string"==typeof e?this.dataSource.getByUid(e):e;i&&this._taskConfirm(function(e){e||t._removeTask(i)},i)},_createTask:function(e,t){if(!this.trigger("add",{task:e,dependency:null})){var i=this.dataSource;this._preventRefresh=!0,void 0===t?i.add(e):i.insert(t,e),this._scrollToUid=e.uid,this._syncDataSource()}},_createDependency:function(e){this.trigger("add",{task:null,dependency:e})||(this._preventDependencyRefresh=!0,this.dependencies.add(e),this._preventDependencyRefresh=!1,this.dependencies.sync())},_createAssignment:function(e,t){var i=this.assignments,n=i.dataSource,r=i.dataTaskIdField,s=i.dataResourceIdField,o=i.dataValueField,a=n._createNewModel();a[r]=t,a[s]=e.get("id"),a[o]=e.get("value"),n.add(a)},removeDependency:function(e){var t=this,i="string"==typeof e?this.dependencies.getByUid(e):e;i&&this._dependencyConfirm(function(e){e||t._removeDependency(i)},i)},_removeTaskDependencies:function(e,t){this._preventDependencyRefresh=!0;for(var i=0,n=t.length;i<n;i++)this.dependencies.remove(t[i]);this._preventDependencyRefresh=!1,this.dependencies.sync()},_removeTaskAssignments:function(e){var t=this.assignments.dataSource,i=t.view(),n={field:this.assignments.dataTaskIdField,operator:"eq",value:e.get("id")};i=new p(i).filter(n).toArray(),this._preventRefresh=!0;for(var r=0,s=i.length;r<s;r++)t.remove(i[r]);this._preventRefresh=!1,t.sync()},_removeTask:function(e){var t=this.dependencies.dependencies(e.id);this.trigger("remove",{task:e,dependencies:t})||(this._removeTaskDependencies(e,t),this._removeTaskAssignments(e),this._preventRefresh=!0,this.dataSource.remove(e)&&this._syncDataSource(),this._preventRefresh=!1)},_removeDependency:function(e){this.trigger("remove",{task:null,dependencies:[e]})||this.dependencies.remove(e)&&this.dependencies.sync()},_removeAssignment:function(e){this.assignments.dataSource.remove(e)},_taskConfirm:function(e,t){var i=this.options.messages;this._confirm(e,{model:t,text:i.deleteTaskConfirmation,title:i.deleteTaskWindowTitle})},_dependencyConfirm:function(e,t){var i=this.options.messages;this._confirm(e,{model:t,text:i.deleteDependencyConfirmation,title:i.deleteDependencyWindowTitle})},_confirm:function(e,t){var i,n,r=this.options.editable;!0===r||!1!==r.confirmation?(n=[{name:"delete",text:(i=this.options.messages).destroy,className:W.styles.primary,click:function(){e()}},{name:"cancel",text:i.cancel,click:function(){e(!0)}}],this.showDialog(b(!0,{},t,{buttons:n}))):e()},showDialog:function(e){this._editor.showDialog(e)},refresh:function(){if(!this._preventRefresh&&!this.list.editable){this._progress(!1);var e,t,n=this.dataSource.taskTree(),r=this._scrollToUid,o=-1;this.current&&(t=this.current.closest("tr").attr(s.attr("uid")),o=this.current.index()),this.trigger("dataBinding")||(0!==this.resources.dataSource.data().length&&this._assignResources(n),this._editor&&this._editor.close(),this.clearSelection(),this.list._render(n),this.timeline._render(n),this.timeline._renderDependencies(this.dependencies.view()),r&&(this._scrollTo(r),this.select(i(r))),(r||t)&&o>=0&&(e=this.list.content.find("tr"+i(r||t)+" > td:eq("+o+")"),this._current(e)),this._scrollToUid=null,this.trigger("dataBound"))}},refreshDependencies:function(){this._preventDependencyRefresh||this.trigger("dataBinding")||(this.timeline._renderDependencies(this.dependencies.view()),this.trigger("dataBound"))},_assignResources:function(e){for(var t=this.resources,i=this.assignments,n=function(){var e=i.dataSource.view(),t={field:i.dataTaskIdField};return e=new p(e).group(t).toArray()}(),r=function(e,i){var r=e.get("id");s.setter(t.field)(e,new f([]));for(var o=0,a=n.length;o<a;o++)n[o].value===r&&i(e,n[o].items)},o=function(e,n){for(var r=0,o=n.length;r<o;r++){var a=n[r],l=t.dataSource.get(a.get(i.dataResourceIdField)),d=a.get(i.dataValueField),c=a.get(i.dataResourceIdField),u=l.get(t.dataFormatField)||"p0",f=s.toString(d,u);e[t.field].push(new h({id:c,name:l.get(t.dataTextField),color:l.get(t.dataColorField),value:d,formatedValue:f}))}},a=0,l=e.length;a<l;a++)r(e[a],o)},_wrapResourceData:function(e){for(var t,i=this,n=[],r=this.resources.dataSource.view(),s=this.assignments.dataSource.view(),o=new p(s).filter({field:i.assignments.dataTaskIdField,operator:"eq",value:e}).toArray(),a=function(e){var t=null;return new p(o).filter({field:i.assignments.dataResourceIdField,operator:"eq",value:e}).select(function(e){t+=e.get(i.assignments.dataValueField)}),t},l=0,d=r.length;l<d;l++)t=r[l],n.push({id:t.get("id"),name:t.get(i.resources.dataTextField),format:t.get(i.resources.dataFormatField)||"p0",value:a(t.id)});return n},_syncDataSource:function(){this._preventRefresh=!1,this._requestStart(),this.dataSource.sync()},_requestStart:function(){this._progress(!0)},_error:function(){this._progress(!1)},_progress:function(e){s.ui.progress(this.element,e)},_resizable:function(){var t,i,n,r=this,o=this.wrapper,a=W.styles,l="."+a.gridContent,d=o.find("."+a.list),c=o.find("."+a.timeline);this._resizeDraggable=o.find("."+a.splitBar).height(d.height()).hover(function(){e(this).addClass(a.splitBarHover)},function(){e(this).removeClass(a.splitBarHover)}).end().kendoResizable({orientation:"horizontal",handle:"."+a.splitBar,start:function(){t=d.width(),i=c.width(),n=c.find(l).scrollLeft()},resize:function(e){var a=e.x.initialDelta;s.support.isRtl(o)&&(a*=-1),t+a<0||i-a<0||(d.width(t+a),c.width(i-a),c.find(l).scrollLeft(n+a),r.timeline.view()._renderCurrentTime())}}).data("kendoResizable")},_scrollable:function(){var t=this,i=W.styles,n="."+i.gridContent,r="."+i.gridHeaderWrap,o=this.timeline.element.find(r),a=this.timeline.element.find(n),d=this.list.element.find(r),c=this.list.element.find(n);l&&c.css("overflow-y","auto"),a.on("scroll",function(){t.scrollTop=this.scrollTop,o.scrollLeft(this.scrollLeft),c.scrollTop(this.scrollTop)}),c.on("scroll",function(){t.scrollTop=this.scrollTop,d.scrollLeft(this.scrollLeft),a.scrollTop(this.scrollTop)}).on("DOMMouseScroll"+x+" mousewheel"+x,function(t){var i=a.scrollTop(),n=s.wheelDeltaY(t);n&&(t.preventDefault(),e(t.currentTarget).one("wheel"+x,!1),a.scrollTop(i+-n))})},_navigatable:function(){var t,r=this,o=this.options.navigatable,a=this.options.editable,l=this.list.header.find("table"),d=this.list.content.find("table"),c=W.styles,u=s.support.isRtl(this.wrapper),h=this.timeline.element.find("."+c.gridContent),f=l.add(d),p=i(),m=!1,g=!0,v=function(e){var t=r.timeline.view()._timeSlots()[0].offsetWidth;h.scrollLeft(h.scrollLeft()+(e?-t:t))},_=function(e){var t=r.current.parent("tr"+i()),s=r.current.index(),o=t[e]();0!==r.select().length&&r.clearSelection(),0!==o.length?(r._current(o.children("td:eq("+s+")")),r._scrollTo(r.current)):r.current.is("td")&&"prev"==e?n(l):r.current.is("th")&&"next"==e&&n(d)},b=function(e){var i=r.current[e]();0!==i.length&&(r._current(i),t=r.current.index())},k=function(e){var t=r.dataItem(r.current);t.summary&&t.expanded!==e&&t.set("expanded",e)},w=function(){if(r.options.editable&&!r.list.editable){var e=r.select(),t=s.attr("uid");e.length&&r.removeTask(e.attr(t))}};e(this.wrapper).on("mousedown"+x,"tr"+p+", div"+p+":not(."+c.line+")",function(t){var l,d=e(t.currentTarget),c=e(t.target).is(":button,a,:input,a>.k-icon,textarea,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap");t.ctrlKey||(o&&(l=d.is("tr")?e(t.target).closest("td"):r.list.content.find("tr"+i(d.attr(s.attr("uid")))+" > td:first"),r._current(l)),!o&&!a||c||(r._focusTimeout=setTimeout(function(){n(r.list.content.find("table"),!0)},2)))}),!0===o?f.on("focus"+x,function(){var i=this===d.get(0)?"td":"th",n=r.select(),s=r.current||e(n.length?n:this).find(i+":eq("+(t||0)+")");r._current(s)}).on("blur"+x,function(){r._current(),this==l&&e(this).attr(C,-1)}).on("keydown"+x,function(t){var i,n=t.keyCode;if(r.current)switch(i=r.current.is("td"),n){case y.RIGHT:t.preventDefault(),t.altKey?v():t.ctrlKey?k(u?m:g):b(u?"prev":"next");break;case y.LEFT:t.preventDefault(),t.altKey?v(!0):t.ctrlKey?k(u?g:m):b(u?"next":"prev");break;case y.UP:t.preventDefault(),_("prev");break;case y.DOWN:t.preventDefault(),_("next");break;case y.SPACEBAR:t.preventDefault(),i&&r.select(r.current.closest("tr"));break;case y.ENTER:t.preventDefault(),i?r.options.editable&&(r._cachedCurrent=r.current,r.list._startEditHandler(r.current),e(this).one("keyup",function(e){e.stopPropagation()})):r.current.children("a.k-link").click();break;case y.ESC:t.stopPropagation();break;case y.DELETE:i&&w();break;default:n>=49&&n<=57&&r.view(r.timeline._viewByIndex(n-49))}}):d.on("keydown"+x,function(e){e.keyCode==y.DELETE&&w()})},_current:function(t){var i,n=W.styles;this.current&&this.current.length&&this.current.removeClass(n.focused).removeAttr("id"),t&&t.length?(this.current=t.addClass(n.focused).attr("id","gantt_active_cell"),(i=e(s._activeElement())).is("table")&&this.wrapper.find(i).length>0&&i.removeAttr(T).attr(T,"gantt_active_cell")):this.current=null},_dataBind:function(){var t=this;if(t.options.autoBind){this._preventRefresh=!0,this._preventDependencyRefresh=!0;var i=e.map([this.dataSource,this.dependencies,this.resources.dataSource,this.assignments.dataSource],function(e){return e.fetch()});e.when.apply(null,i).done(function(){t._preventRefresh=!1,t._preventDependencyRefresh=!1,t.refresh()})}},_resize:function(){this._adjustDimensions(),this.timeline.view()._adjustHeight(),this.timeline.view()._renderCurrentTime(),this.list._adjustHeight()}});s.PDFMixin&&(s.PDFMixin.extend(W.fn),W.fn._drawPDF=function(){var e="."+W.styles.list,t=this.wrapper.find(e).width(),i=this.wrapper.clone();return i.find(e).css("width",t),this._drawPDFShadow({content:i},{avoidLinks:this.options.pdf.avoidLinks})}),s.ui.plugin(W),b(!0,W,{styles:{wrapper:"k-widget k-gantt",rowHeight:"k-gantt-rowheight",listWrapper:"k-gantt-layout k-gantt-treelist",list:"k-gantt-treelist",timelineWrapper:"k-gantt-layout k-gantt-timeline",timeline:"k-gantt-timeline",splitBarWrapper:"k-splitbar k-state-default k-splitbar-horizontal k-splitbar-draggable-horizontal k-gantt-layout",splitBar:"k-splitbar",splitBarHover:"k-splitbar-horizontal-hover",popupWrapper:"k-list-container",popupList:"k-list k-reset",resizeHandle:"k-resize-handle",icon:"k-icon",item:"k-item",line:"k-line",buttonDelete:"k-gantt-delete",buttonCancel:"k-gantt-cancel",buttonSave:"k-gantt-update",buttonToggle:"k-gantt-toggle",primary:"k-primary",hovered:"k-state-hover",selected:"k-state-selected",focused:"k-state-focused",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",popup:{form:"k-popup-edit-form",editForm:"k-gantt-edit-form",formContainer:"k-edit-form-container",resourcesFormContainer:"k-resources-form-container",message:"k-popup-message",buttonsContainer:"k-edit-buttons k-state-default",button:"k-button",editField:"k-edit-field",editLabel:"k-edit-label",resourcesField:"k-gantt-resources"},toolbar:{headerWrapper:"k-floatwrap k-header k-gantt-toolbar",footerWrapper:"k-floatwrap k-header k-gantt-toolbar",toolbar:"k-gantt-toolbar",expanded:"k-state-expanded",views:"k-gantt-views",viewsWrapper:"k-reset k-header k-gantt-views",actions:"k-gantt-actions",button:"k-button k-button-icontext",buttonToggle:"k-button k-button-icon k-gantt-toggle",iconPlus:"k-icon k-i-plus",iconPdf:"k-icon k-i-pdf",iconToggle:"k-icon k-i-gantt-toggle",viewButtonDefault:"k-state-default",viewButton:"k-view",currentView:"k-current-view",link:"k-link",pdfButton:"k-gantt-pdf",appendButton:"k-gantt-create"}}})}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.treelist",["kendo.dom","kendo.data","kendo.columnsorter","kendo.editable","kendo.window","kendo.filtermenu","kendo.selectable","kendo.resizable","kendo.treeview.draganddrop"],function(){return function(e,t){function i(e){return function(t){return t[e]}}function n(e){return function(t){return!e(t)}}function r(){return"none"!==this.style.display}function s(e){for(var t=[],i=e.className,n=0,r=e.level;n<r;n++)t.push(c("span",{className:i}));return t}function o(e){for(var t,i=0,n=0,r=e.length;n<r;n++)(t=e[n].style.width)&&-1==t.indexOf("%")&&(i+=parseInt(t,10));return i}var a=kendo.data,l=e.extend,d=kendo.dom,c=d.element,u=d.text,h=d.html,f=kendo.ui,p=f.DataBoundWidget,m=a.DataSource,g=a.ObservableArray,v=a.Query,_=a.Model,b=e.proxy,k=e.map,w=e.grep,y=e.inArray,x=e.isPlainObject,C=Array.prototype.push,S=".kendoTreeList",T="columnResize",D="parentId",F={wrapper:"k-treelist k-grid k-widget",header:"k-header",button:"k-button",alt:"k-alt",editCell:"k-edit-cell",group:"k-treelist-group",gridToolbar:"k-grid-toolbar",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",gridContentWrap:"k-grid-content",gridFilter:"k-grid-filter",footerTemplate:"k-footer-template",loading:"k-loading",refresh:"k-i-refresh",retry:"k-request-retry",selected:"k-state-selected",status:"k-status",link:"k-link",withIcon:"k-with-icon",filterable:"k-filterable",icon:"k-icon",iconFilter:"k-filter",iconCollapse:"k-i-collapse",iconExpand:"k-i-expand",iconHidden:"k-i-none",iconPlaceHolder:"k-icon k-i-none",input:"k-input",dropPositions:"k-insert-top k-insert-bottom k-add k-insert-middle",dropTop:"k-insert-top",dropBottom:"k-insert-bottom",dropAdd:"k-add",dropMiddle:"k-insert-middle",dropDenied:"k-denied",dragStatus:"k-drag-status",dragClue:"k-drag-clue",dragClueText:"k-clue-text"},E={create:{imageClass:"k-add",className:"k-grid-add",methodName:"addRow"},createchild:{imageClass:"k-add",className:"k-grid-add",methodName:"addRow"},destroy:{imageClass:"k-delete",className:"k-grid-delete",methodName:"removeRow"},edit:{imageClass:"k-edit",className:"k-grid-edit",methodName:"editRow"},update:{imageClass:"k-update",className:"k-primary k-grid-update",methodName:"saveRow"},canceledit:{imageClass:"k-cancel",className:"k-grid-cancel",methodName:"_cancelEdit"},excel:{imageClass:"k-i-excel",className:"k-grid-excel",methodName:"saveAsExcel"},pdf:{imageClass:"k-i-pdf",className:"k-grid-pdf",methodName:"saveAsPDF"}},R=_.define({id:"id",parentId:D,fields:{id:{type:"number"},parentId:{type:"number",nullable:!0}},init:function(e){_.fn.init.call(this,e),this._loaded=!1,this.parentIdField||(this.parentIdField=D),this.parentId=this.get(this.parentIdField)},accept:function(e){_.fn.accept.call(this,e),this.parentId=this.get(this.parentIdField)},set:function(e,t,i){e==D&&this.parentIdField!=D&&(this[this.parentIdField]=t),_.fn.set.call(this,e,t,i),e==this.parentIdField&&(this.parentId=this.get(this.parentIdField))},loaded:function(e){if(e===t)return this._loaded;this._loaded=e},shouldSerialize:function(e){return _.fn.shouldSerialize.call(this,e)&&"_loaded"!==e&&"_error"!=e&&"_edit"!=e&&!("parentId"!==this.parentIdField&&"parentId"===e)}});R.parentIdField=D,R.define=function(e,i){i===t&&(i=e,e=R);var n=i.parentId||D;i.parentIdField=n;var r=_.define(e,i);return n&&(r.parentIdField=n),r};var A=m.extend({init:function(e){m.fn.init.call(this,l(!0,{},{schema:{modelBase:R,model:R}},e))},_createNewModel:function(e){var t={},i=e instanceof _;return i&&(t=e),t=m.fn._createNewModel.call(this,t),i||(e.parentId&&(e[t.parentIdField]=e.parentId),t.accept(e)),t},_shouldWrap:function(){return!0},_push:function(e,t){var i=m.fn._readData.call(this,e);i||(i=e),this[t](i)},_readData:function(e){var t=this.data();return e=m.fn._readData.call(this,e),this._concat(e,t),e instanceof g?e:t},_concat:function(e,t){for(var i=t.length,n=0;n<e.length;n++)t[i++]=e[n];t.length=i},_readAggregates:function(e){var t=l(this._aggregateResult,this.reader.aggregates(e));return""in t&&(t[this._defaultParentId()]=t[""],delete t[""]),t},remove:function(e){var t=this._subtree(this._childrenMap(this.data()),e.id);this._removeItems(t),m.fn.remove.call(this,e)},_filterCallback:function(e){var t,i,n={},r=[],s=e.toArray();for(t=0;t<s.length;t++)for(i=s[t];i&&(n[i.id]||(n[i.id]=!0,r.push(i)),!n[i.parentId]);)n[i.parentId]=!0,(i=this.parentNode(i))&&r.push(i);return new v(r)},_subtree:function(e,t){for(var i=e[t]||[],n=this._defaultParentId(),r=0,s=i.length;r<s;r++)i[r].id!==n&&(i=i.concat(this._subtree(e,i[r].id)));return i},_childrenMap:function(e){var t,i,n,r,s={};for(e=this._observeView(e),t=0;t<e.length;t++)n=(i=e[t]).id,r=i.parentId,s[n]=s[n]||[],s[r]=s[r]||[],s[r].push(i);return s},_calculateAggregates:function(e,t){var i,n,r,s={},o=(t=t||{}).filter;o&&(e=v.process(e,{filter:o,filterCallback:b(this._filterCallback,this)}).data);var a=this._childrenMap(e);for(s[this._defaultParentId()]=new v(this._subtree(a,this._defaultParentId())).aggregate(t.aggregate),r=0;r<e.length;r++)i=e[r],n=this._subtree(a,i.id),s[i.id]=new v(n).aggregate(t.aggregate);return s},_queryProcess:function(e,t){(t=t||{}).filterCallback=b(this._filterCallback,this);var i,n,r,s,o=this._defaultParentId(),a=v.process(e,t),l=this._childrenMap(a.data);for(e=l[o]||[],n=0;n<e.length;n++)(r=e[n]).id!==o&&(i=!(!(s=l[r.id])||!s.length),r.loaded()||r.loaded(i||!r.hasChildren),(r.loaded()||!0!==r.hasChildren)&&(r.hasChildren=i),i&&(e=e.slice(0,n+1).concat(s,e.slice(n+1))));return a.data=e,a},_queueRequest:function(e,t){t.call(this)},_modelLoaded:function(e){var t=this.get(e);t.loaded(!0),t.hasChildren=this.childNodes(t).length>0},_modelError:function(e,t){this.get(e)._error=t},success:function(e,t){return t&&void 0!==t.id||(this._data=this._observe([])),m.fn.success.call(this,e,t)},load:function(t){var i="_query",n=this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates,r=e.Deferred().resolve().promise();if(t.loaded()){if(n)return r}else t.hasChildren&&(i="read");return this[i]({id:t.id}).then(b(this._modelLoaded,this,t.id),b(this._modelError,this,t.id))},contains:function(e,t){for(var i=e.id;t;){if(t.parentId===i)return!0;t=this.parentNode(t)}return!1},_byParentId:function(e,t){var i,n=[],r=this.view();if(e===t)return[];for(var s=0;s<r.length;s++)(i=r.at(s)).parentId==e&&n.push(i);return n},_defaultParentId:function(){return this.reader.model.fn.defaults[this.reader.model.parentIdField]},childNodes:function(e){return this._byParentId(e.id,this._defaultParentId())},rootNodes:function(){return this._byParentId(this._defaultParentId())},parentNode:function(e){return this.get(e.parentId)},level:function(e){var t=-1;e instanceof R||(e=this.get(e));do{e=this.parentNode(e),t++}while(e);return t},filter:function(e){var i=m.fn.filter;if(e===t)return i.call(this,e);i.call(this,e)}});A.create=function(t){return e.isArray(t)?t={data:t}:t instanceof g&&(t={data:t.toJSON()}),t instanceof A?t:new A(t)};var I=kendo.Observable.extend({init:function(e,t){kendo.Observable.fn.init.call(this),t=this.options=l(!0,{},this.options,t),this.element=e,this.bind(this.events,t),this.model=this.options.model,this.fields=this._fields(this.options.columns),this._initContainer(),this.createEditable()},events:[],_initContainer:function(){this.wrapper=this.element},createEditable:function(){var e=this.options;this.editable=new f.Editable(this.wrapper,{fields:this.fields,target:e.target,clearContainer:e.clearContainer,model:this.model})},_isEditable:function(e){return e.field&&this.model.editable(e.field)},_fields:function(e){var t,i,n,r=[];for(t=0,i=e.length;t<i;t++)n=e[t],this._isEditable(n)&&r.push({field:n.field,format:n.format,editor:n.editor});return r},end:function(){return this.editable.end()},close:function(){this.destroy()},destroy:function(){this.editable.destroy(),this.editable.element.find("["+kendo.attr("container-for")+"]").empty().end().removeAttr(kendo.attr("role")),this.model=this.wrapper=this.element=this.columns=this.editable=null}}),M=I.extend({init:function(e,t){I.fn.init.call(this,e,t),this._attachHandlers(),kendo.cycleForm(this.wrapper),this.open()},events:["cancel","save"],options:{window:{modal:!0,resizable:!1,draggable:!0,title:"Edit",visible:!1}},_initContainer:function(){var t=this.options,i=[];this.wrapper=e('<div class="k-popup-edit-form"/>').attr(kendo.attr("uid"),this.model.uid).append('<div class="k-edit-form-container"/>'),t.template?(this._appendTemplate(i),this.fields=[]):this._appendFields(i),this._appendButtons(i),new d.Tree(this.wrapper.children()[0]).render(i),this.wrapper.appendTo(t.appendTo),this.window=new f.Window(this.wrapper,t.window)},_appendTemplate:function(e){var t=this.options.template;"string"==typeof t&&(t=window.unescape(t)),t=kendo.template(t)(this.model),e.push(h(t))},_appendFields:function(e){var t,i,n,r=this.options.columns;for(t=0,i=r.length;t<i;t++)(n=r[t]).command||(e.push(h('<div class="k-edit-label"><label for="'+n.field+'">'+(n.title||n.field||"")+"</label></div>")),this._isEditable(n)?e.push(h("<div "+kendo.attr("container-for")+'="'+n.field+'" class="k-edit-field"></div>')):e.push(c("div",{class:"k-edit-field"},[this.options.fieldRenderer(n,this.model)])))},_appendButtons:function(e){e.push(c("div",{class:"k-edit-buttons k-state-default"},this.options.commandRenderer()))},_attachHandlers:function(){var e=this._cancelProxy=b(this._cancel,this);this.wrapper.on("click"+S,".k-grid-cancel",this._cancelProxy),this._saveProxy=b(this._save,this),this.wrapper.on("click"+S,".k-grid-update",this._saveProxy),this.window.bind("close",function(t){t.userTriggered&&e(t)})},_dettachHandlers:function(){this._cancelProxy=null,this._saveProxy=null,this.wrapper.off(S)},_cancel:function(e){this.trigger("cancel",e)},_save:function(){this.trigger("save")},open:function(){this.window.center().open()},close:function(){this.window.bind("deactivate",b(this.destroy,this)).close()},destroy:function(){this.window.destroy(),this.window=null,this._dettachHandlers(),I.fn.destroy.call(this)}}),H=p.extend({init:function(t,i){if(p.fn.init.call(this,t,i),this._dataSource(this.options.dataSource),this._columns(),this._layout(),this._selectable(),this._sortable(),this._resizable(),this._filterable(),this._attachEvents(),this._toolbar(),this._scrollable(),this._reorderable(),this._columnMenu(),this._minScreenSupport(),this._draggable(),this.options.autoBind&&this.dataSource.fetch(),this._hasLockedColumns){var n=this;this.wrapper.addClass("k-grid-lockedcolumns"),this._resizeHandler=function(){n.resize()},e(window).on("resize"+S,this._resizeHandler)}kendo.notify(this)},_draggable:function(){var t=this.options.editable;t&&t.move&&(this._dragging=new kendo.ui.HierarchicalDragAndDrop(this.wrapper,{$angular:this.$angular,autoScroll:!0,filter:"tbody>tr",itemSelector:"tr",allowedContainers:this.wrapper,hintText:function(t){return t.children("td").map(function(){return e(this).text()}).toArray().join("<span class='k-header k-drag-separator' />")},contains:b(function(e,t){var i=this.dataItem(t),n=this.dataItem(e);return n==i||this.dataSource.contains(n,i)},this),itemFromTarget:function(e){var t=e.closest("tr");return{item:t,content:t}},dragstart:b(function(e){this.wrapper.addClass("k-treelist-dragging");var t=this.dataItem(e);return this.trigger("dragstart",{source:t})},this),drag:b(function(e){e.source=this.dataItem(e.source),this.trigger("drag",e)},this),drop:b(function(e){return e.source=this.dataItem(e.source),e.destination=this.dataItem(e.destination),this.wrapper.removeClass("k-treelist-dragging"),this.trigger("drop",e)},this),dragend:b(function(e){var t=this.dataItem(e.destination),i=this.dataItem(e.source);i.set("parentId",t?t.id:null),e.source=i,e.destination=t,this.trigger("dragend",e)},this),reorderable:!1,dropHintContainer:function(e){return e.children("td:eq(1)")},dropPositionFrom:function(e){return e.prevAll(".k-i-none").length>0?"after":"before"}}))},itemFor:function(e){return"number"==typeof e&&(e=this.dataSource.get(e)),this.tbody.find("["+kendo.attr("uid")+"="+e.uid+"]")},_scrollable:function(){if(this.options.scrollable){var t=this.thead.closest(".k-grid-header-wrap"),i=e(this.lockedContent).bind("DOMMouseScroll"+S+" mousewheel"+S,b(this._wheelScroll,this));this.content.bind("scroll"+S,function(){t.scrollLeft(this.scrollLeft),i.scrollTop(this.scrollTop)});var n=kendo.touchScroller(this.content);n&&n.movable&&(this._touchScroller=n,n.movable.bind("change",function(e){t.scrollLeft(-e.sender.x),i&&i.scrollTop(-e.sender.y)}))}},_wheelScroll:function(t){if(!t.ctrlKey){var i=kendo.wheelDeltaY(t);i&&(t.preventDefault(),e(t.currentTarget).one("wheel"+S,!1),this.content.scrollTop(this.content.scrollTop()+-i))}},_progress:function(){var e=this.options.messages;this.tbody.find("tr").length||this._showStatus(kendo.template("<span class='#= className #' /> #: messages.loading #")({className:F.icon+" "+F.loading,messages:e}))},_error:function(e){this.dataSource.rootNodes().length||this._render({error:e})},refresh:function(e){"itemchange"==(e=e||{}).action&&this.editor||this.trigger("dataBinding")||(this._cancelEditor(),this._render(),this._adjustHeight(),this.trigger("dataBound"))},_angularFooters:function(e){var t,i,n,r=this.dataSource.aggregates(),s=this._footerItems();for(t=0;t<s.length;t++)n=r[(i=s.eq(t)).attr("data-parentId")],this._angularFooter(e,i.find("td").get(),n)},_angularFooter:function(e,t,i){var n=this.columns;this.angular(e,function(){return{elements:t,data:k(n,function(e){return{column:e,aggregate:i&&i[e.field]}})}})},items:function(){return this._hasLockedColumns?this._items(this.tbody).add(this._items(this.lockedTable)):this._items(this.tbody)},_items:function(t){return t.find("tr").filter(function(){return!e(this).hasClass(F.footerTemplate)})},_footerItems:function(){var t=this.tbody;return this._hasLockedColumns&&(t=t.add(this.lockedTable)),t.find("tr").filter(function(){return e(this).hasClass(F.footerTemplate)})},dataItems:function(){var e=kendo.ui.DataBoundWidget.fn.dataItems.call(this);if(this._hasLockedColumns){for(var t=e.length,i=new Array(2*t),n=t;--n>=0;)i[n]=i[n+t]=e[n];e=i}return e},_showStatus:function(t){var i=this.element.find(".k-status"),n=e(this.content).add(this.lockedContent);i.length||(i=e("<div class='k-status' />").appendTo(this.element)),this._contentTree.render([]),this._hasLockedColumns&&this._lockedContentTree.render([]),n.hide(),i.html(t)},_hideStatus:function(){this.element.find(".k-status").remove(),e(this.content).add(this.lockedContent).show()},_adjustHeight:function(){var e,t=this.element,i=t.find("."+F.gridContentWrap),n=t.find("."+F.gridHeader),r=t.find("."+F.gridToolbar),s=kendo.support.scrollbar();t.height(this.options.height),function(e){var t,i;return!!e[0].style.height||(t=e.height(),e.height("auto"),i=e.height(),e.height(""),t!=i)}(t)&&(e=t.height()-n.outerHeight()-r.outerHeight(),i.height(e),this._hasLockedColumns&&(s=this.table[0].offsetWidth>this.table.parent()[0].clientWidth?s:0,this.lockedContent.height(e-s)))},_resize:function(){this._applyLockedContainersWidth(),this._adjustHeight()},_minScreenSupport:function(){this.hideMinScreenCols()&&(this.minScreenResizeHandler=b(this.hideMinScreenCols,this),e(window).on("resize",this.minScreenResizeHandler))},hideMinScreenCols:function(){for(var e=this.columns,i=!1,n=window.innerWidth>0?window.innerWidth:screen.width,r=0;r<e.length;r++){var s=e[r],o=s.minScreenWidth;o!==t&&null!==o&&(i=!0,o>n?this.hideColumn(s):this.showColumn(s))}return i},destroy:function(){p.fn.destroy.call(this);var t=this.dataSource;t.unbind("change",this._refreshHandler),t.unbind("error",this._errorHandler),t.unbind("progress",this._progressHandler),this._resizeHandler&&e(window).off("resize"+S,this._resizeHandler),this._dragging&&(this._dragging.destroy(),this._dragging=null),this.resizable&&(this.resizable.destroy(),this.resizable=null),this.reorderable&&(this.reorderable.destroy(),this.reorderable=null),this._draggableInstance&&this._draggableInstance.element&&(this._draggableInstance.destroy(),this._draggableInstance=null),this.minScreenResizeHandler&&e(window).off("resize",this.minScreenResizeHandler),this._destroyEditor(),this.element.off(S),this._touchScroller&&this._touchScroller.destroy(),this._autoExpandable=null,this._refreshHandler=this._errorHandler=this._progressHandler=null,this.thead=this.content=this.tbody=this.table=this.element=this.lockedHeader=this.lockedContent=null,this._statusTree=this._headerTree=this._contentTree=this._lockedHeaderColsTree=this._lockedContentColsTree=this._lockedHeaderTree=this._lockedContentTree=null},options:{name:"TreeList",columns:[],autoBind:!0,scrollable:!0,selectable:!1,sortable:!1,toolbar:null,height:null,columnMenu:!1,messages:{noRows:"No records to display",loading:"Loading...",requestFailed:"Request failed.",retry:"Retry",commands:{edit:"Edit",update:"Update",canceledit:"Cancel",create:"Add new record",createchild:"Add child record",destroy:"Delete",excel:"Export to Excel",pdf:"Export to PDF"}},excel:{hierarchy:!0},resizable:!1,filterable:!1,editable:!1,reorderable:!1},events:["change","edit","save","remove","expand","collapse","dataBinding","dataBound","cancel","dragstart","drag","drop","dragend","filterMenuInit","columnHide","columnShow","columnReorder",T,"columnMenuInit","columnLock","columnUnlock"],_toggle:function(i,n){var r=e.Deferred().resolve().promise(),s=i.loaded();return i._error&&(i.expanded=!1,i._error=t),!s&&i.expanded?r:(void 0===n&&(n=!i.expanded),i.expanded=n,s||(r=this.dataSource.load(i).always(b(function(){this._render(),this._syncLockedContentHeight()},this))),this._render(),this._syncLockedContentHeight(),r)},expand:function(e){return this._toggle(this.dataItem(e),!0)},collapse:function(e){return this._toggle(this.dataItem(e),!1)},_toggleChildren:function(t){var i=e(t.currentTarget),n=this.dataItem(i),r=n.expanded?"collapse":"expand";this.trigger(r,{model:n})||this._toggle(n),t.preventDefault()},_attachEvents:function(){var e="."+F.iconCollapse+", ."+F.iconExpand+", ."+F.refresh,t="."+F.retry,i=this.dataSource;this.element.on("mousedown"+S,e,b(this._toggleChildren,this)).on("click"+S,t,b(i.fetch,i)).on("click"+S,".k-button[data-command]",b(this._commandClick,this))},_commandByName:function(t){var i,n,r,s,o=this.columns,a=e.isArray(this.options.toolbar)?this.options.toolbar:[];if(t=t.toLowerCase(),E[t])return E[t];for(i=0;i<o.length;i++)if(r=o[i].command)for(n=0;n<r.length;n++)if((s=r[n].name)&&s.toLowerCase()==t)return r[n];for(i=0;i<a.length;i++)if((s=a[i].name)&&s.toLowerCase()==t)return a[i]},_commandClick:function(i){var n=e(i.currentTarget),r=n.attr("data-command"),s=this._commandByName(r),o=n.parentsUntil(this.wrapper,"tr");o=o.length?o:t,s&&(s.methodName?this[s.methodName](o):s.click&&s.click.call(this,i),i.preventDefault())},_ensureExpandableColumn:function(){this._autoExpandable&&delete this._autoExpandable.expandable;var e=w(this.columns,n(i("hidden"))),t=w(e,i("expandable"));this.columns.length&&!t.length&&(this._autoExpandable=e[0],e[0].expandable=!0)},_columns:function(){var e=this.options.columns||[];this.columns=k(e,function(e){return e="string"==typeof e?{field:e}:e,l({encoded:!0},e)});var t=this._lockedColumns();t.length>0&&(this._hasLockedColumns=!0,this.columns=t.concat(this._nonLockedColumns())),this._ensureExpandableColumn(),this._columnTemplates(),this._columnAttributes()},_columnTemplates:function(){var e,t,i,n=this.columns;for(e=0,t=n.length;e<t;e++)(i=n[e]).template&&(i.template=kendo.template(i.template)),i.headerTemplate&&(i.headerTemplate=kendo.template(i.headerTemplate)),i.footerTemplate&&(i.footerTemplate=kendo.template(i.footerTemplate))},_columnAttributes:function(){function t(t){var i,n,r;if(t&&t.style)for(i=t.style.split(";"),t.style={},n=0;n<i.length;n++){r=i[n].split(":");var s=e.trim(r[0]);s&&(t.style[e.camelCase(s)]=e.trim(r[1]))}}var i,n,r=this.columns;for(i=0,n=r.length;i<n;i++)t(r[i].attributes),t(r[i].headerAttributes)},_layout:function(){var e=this.columns,t=this.element,i="";this.wrapper=t.addClass(F.wrapper),i="<div class='#= gridHeader #'>",this._hasLockedColumns&&(i+="<div class='k-grid-header-locked'><table role='grid'><colgroup></colgroup><thead role='rowgroup' /></table></div>"),i+="<div class='#= gridHeaderWrap #'><table role='grid'><colgroup></colgroup><thead role='rowgroup' /></table></div></div>",this._hasLockedColumns&&(i+="<div class='k-grid-content-locked'><table role='treegrid' tabindex='0'><colgroup></colgroup><tbody /></table></div>"),i+="<div class='#= gridContentWrap # k-auto-scrollable'><table role='treegrid' tabindex='0'><colgroup></colgroup><tbody /></table></div>",this.options.scrollable||(i="<table role='treegrid' tabindex='0'><colgroup></colgroup><thead class='#= gridHeader #' role='rowgroup' /><tbody /></table>"),this.options.toolbar&&(i="<div class='#= header # #= gridToolbar #' />"+i),t.append(kendo.template(i)(F)+"<div class='k-status' />"),this.toolbar=t.find("."+F.gridToolbar);var n=t.find("."+F.gridHeader).find("thead").addBack().filter("thead");if(this.thead=n.last(),this.options.scrollable){var r=kendo.support.isRtl(t);t.find("div."+F.gridHeader).css(r?"padding-left":"padding-right",kendo.support.scrollbar())}var s=t.find("."+F.gridContentWrap);s.length?this.content=s:s=t,this.table=s.find(">table"),this.tbody=this.table.find(">tbody"),this._hasLockedColumns&&(this.lockedHeader=n.first().closest(".k-grid-header-locked"),this.lockedContent=t.find(".k-grid-content-locked"),this.lockedTable=this.lockedContent.children()),this._initVirtualTrees(),this._renderCols(),this._renderHeader(),this.angular("compile",function(){return{elements:n.find("th.k-header").get(),data:k(e,function(e){return{column:e}})}})},_initVirtualTrees:function(){this._headerColsTree=new d.Tree(this.thead.prev()[0]),this._contentColsTree=new d.Tree(this.tbody.prev()[0]),this._headerTree=new d.Tree(this.thead[0]),this._contentTree=new d.Tree(this.tbody[0]),this._statusTree=new d.Tree(this.element.children(".k-status")[0]),this.lockedHeader&&(this._lockedHeaderColsTree=new d.Tree(this.lockedHeader.find("colgroup")[0]),this._lockedContentColsTree=new d.Tree(this.lockedTable.find(">colgroup")[0]),this._lockedHeaderTree=new d.Tree(this.lockedHeader.find("thead")[0]),this._lockedContentTree=new d.Tree(this.lockedTable.find(">tbody")[0]))},_toolbar:function(){var t=this.options.toolbar,i=this.toolbar;if(t){if(e.isArray(t)){var n=this._buildCommands(t);new d.Tree(i[0]).render(n)}else i.append(kendo.template(t)({}));this.angular("compile",function(){return{elements:i.get()}})}},_lockedColumns:function(){return w(this.columns,i("locked"))},_nonLockedColumns:function(){return w(this.columns,n(i("locked")))},_templateColumns:function(){return w(this.columns,i("template"))},_flushCache:function(){this.options.$angular&&this._templateColumns().length&&(this._contentTree.render([]),this._hasLockedColumns&&this._lockedContentTree.render([]))},_render:function(t){t=t||{};var i=this.options.messages,n=this.dataSource.rootNodes(),r=this.select().removeClass("k-state-selected").map(function(t,i){return e(i).attr(kendo.attr("uid"))});this._absoluteIndex=0,this._angularItems("cleanup"),this._angularFooters("cleanup"),this._flushCache(),t.error?this._showStatus(kendo.template("#: messages.requestFailed # <button class='#= buttonClass #'>#: messages.retry #</button>")({buttonClass:[F.button,F.retry].join(" "),messages:i})):n.length?(this._hideStatus(),this._contentTree.render(this._trs({columns:this._nonLockedColumns(),aggregates:t.aggregates,selected:r,data:n,visible:!0,level:0})),this._hasLockedColumns&&(this._absoluteIndex=0,this._lockedContentTree.render(this._trs({columns:this._lockedColumns(),aggregates:t.aggregates,selected:r,data:n,visible:!0,level:0})))):this._showStatus(kendo.htmlEncode(i.noRows)),this._touchScroller&&this._touchScroller.contentResized(),this._muteAngularRebind(function(){this._angularItems("compile"),this._angularFooters("compile")}),this._adjustRowsHeight()},_adjustRowsHeight:function(){if(this._hasLockedColumns){var e,t=this.table,i=this.lockedTable,n=t[0].rows,r=n.length,s=i[0].rows,o=t.add(i),a=o.length,l=[],d=this.lockedHeader.find("tr"),c=this.thead.find("tr");for(d.add(c).height("auto").height(Math.max(d.height(),c.height())),e=0;e<r&&s[e];e++){n[e].style.height&&(n[e].style.height=s[e].style.height="");var u=n[e].offsetHeight,h=s[e].offsetHeight,f=0;u>h?f=u:u<h&&(f=h),l.push(f)}for(e=0;e<a;e++)o[e].style.display="none";for(e=0;e<r;e++)l[e]&&(n[e].style.height=s[e].style.height=l[e]+1+"px");for(e=0;e<a;e++)o[e].style.display=""}},_ths:function(e){for(var t,i,n,r,s,o,a=[],d=0,f=e.length;d<f;d++)t=e[d],n=[],r=[F.header],i=t.headerTemplate?t.headerTemplate({}):t.title||t.field||"",o=t.headerTemplate?h(i):u(i),t.sortable?n.push(c("a",{href:"#",className:F.link},[o])):n.push(o),s={"data-field":t.field,"data-title":t.title,style:!0===t.hidden?{display:"none"}:{},className:r.join(" "),role:"columnheader"},s=l(!0,{},s,t.headerAttributes),a.push(c("th",s,n));return a},_cols:function(e){for(var t,i,n=[],r=0;r<e.length;r++)!0!==e[r].hidden&&(i={},(t=e[r].width)&&0!==parseInt(t,10)&&(i.style={width:"string"==typeof t?t:t+"px"}),n.push(c("col",i)));return n},_renderCols:function(){var e=this._nonLockedColumns();this._headerColsTree.render(this._cols(e)),this.options.scrollable&&this._contentColsTree.render(this._cols(e)),this._hasLockedColumns&&(e=this._lockedColumns(),this._lockedHeaderColsTree.render(this._cols(e)),this._lockedContentColsTree.render(this._cols(e)))},_renderHeader:function(){var e=this._nonLockedColumns();this._headerTree.render([c("tr",{role:"row"},this._ths(e))]),this._hasLockedColumns&&(e=this._lockedColumns(),this._lockedHeaderTree.render([c("tr",{role:"row"},this._ths(e))]),this._applyLockedContainersWidth())},_applyLockedContainersWidth:function(){if(this._hasLockedColumns){var e=o(this.lockedHeader.find(">table>colgroup>col")),t=this.thead.parent(),i=o(t.find(">colgroup>col")),n=this.wrapper[0].clientWidth,r=kendo.support.scrollbar();e>=n&&(e=n-3*r),this.lockedHeader.add(this.lockedContent).width(e),t.add(this.table).width(i);var s=n-e-2;this.content.width(s),t.parent().width(s-r)}},_trs:function(t){var i,n,r,s,o,a,l,d=[],c=t.level,u=t.data,h=this.dataSource,f=h.aggregates()||{},p=t.columns;for(a=0,l=u.length;a<l;a++)r=[],s=(o=(i=u[a]).loaded()&&h.childNodes(i))&&o.length,(n={role:"row"})[kendo.attr("uid")]=i.uid,s&&(n["aria-expanded"]=!!i.expanded),t.visible?(this._absoluteIndex%2!=0&&r.push(F.alt),this._absoluteIndex++):n.style={display:"none"},e.inArray(i.uid,t.selected)>=0&&r.push(F.selected),s&&r.push(F.group),i._edit&&r.push("k-grid-edit-row"),n.className=r.join(" "),d.push(this._tds({model:i,attr:n,level:c},p,b(this._td,this))),s&&(d=d.concat(this._trs({columns:p,aggregates:f,selected:t.selected,visible:t.visible&&!!i.expanded,data:o,level:c+1})));return this._hasFooterTemplate()&&(n={className:F.footerTemplate,"data-parentId":i.parentId},t.visible||(n.style={display:"none"}),d.push(this._tds({model:f[i.parentId],attr:n,level:c},p,this._footerTd))),d},_footerTd:function(t){var i=[],n=t.column,r=t.column.footerTemplate||e.noop,o=t.model[n.field]||{},a={role:"gridcell",style:!0===n.hidden?{display:"none"}:{}};return n.expandable&&(i=i.concat(s({level:t.level+1,className:F.iconPlaceHolder}))),n.attributes&&l(a,n.attributes),i.push(h(r(o)||"")),c("td",a,i)},_hasFooterTemplate:function(){return!!w(this.columns,function(e){return e.footerTemplate}).length},_tds:function(e,t,i){for(var n,r=[],s=0,o=t.length;s<o;s++)n=t[s],r.push(i({model:e.model,column:n,level:e.level}));return c("tr",e.attr,r)},_td:function(e){var t,i=[],n=e.model,r=e.column,o={role:"gridcell",style:!0===r.hidden?{display:"none"}:{}};return n._edit&&r.field&&n.editable(r.field)?o[kendo.attr("container-for")]=r.field:(r.expandable&&(i=s({level:e.level,className:F.iconPlaceHolder}),t=[F.icon],n.hasChildren?t.push(n.expanded?F.iconCollapse:F.iconExpand):t.push(F.iconHidden),n._error?t.push(F.refresh):!n.loaded()&&n.expanded&&t.push(F.loading),i.push(c("span",{className:t.join(" ")})),o.style["white-space"]="nowrap"),r.attributes&&l(!0,o,r.attributes),r.command?i=n._edit?this._buildCommands(["update","canceledit"]):this._buildCommands(r.command):i.push(this._cellContent(r,n))),c("td",o,i)},_cellContent:function(e,t){var i;return e.template?i=e.template(t):e.field&&null!==(i=t.get(e.field))&&e.format&&(i=kendo.format(e.format,i)),null!==i&&void 0!==i||(i=""),e.template||!e.encoded?h(i):u(i)},_buildCommands:function(e){var t,i=[];for(t=0;t<e.length;t++)i.push(this._button(e[t]));return i},_button:function(e){var t=(e.name||e).toLowerCase(),i=this.options.messages.commands[t],n=[];return(e=l({},E[t],{text:i},e)).imageClass&&n.push(c("span",{className:["k-icon",e.imageClass].join(" ")})),c("button",{type:"button","data-command":t,className:["k-button","k-button-icontext",e.className].join(" ")},n.concat([u(e.text||e.name)]))},_positionResizeHandle:function(t){var i=e(t.currentTarget),n=this.resizeHandle,r=i.position(),s=r.left,o=i.outerWidth(),a=i.closest("div"),l=t.clientX+e(window).scrollLeft(),d=this.options.columnResizeHandleWidth||3;s+=a.scrollLeft(),n||(n=this.resizeHandle=e('<div class="k-resize-handle"><div class="k-resize-handle-inner" /></div>'));var c=i.offset().left+o;if(l>c-d&&l<c+d){a.append(n),n.show().css({top:r.top,left:s+o-d-1,height:i.outerHeight(),width:3*d}).data("th",i);var u=this;n.off("dblclick"+S).on("dblclick"+S,function(){var t=i.index();e.contains(u.thead[0],i[0])&&(t+=w(u.columns,function(e){return e.locked&&!e.hidden}).length),u.autoFitColumn(t)})}else n.hide()},autoFitColumn:function(i){var n,s,o,a,l,d=this.options,c=this.columns,u=kendo.support.browser,h=this.lockedHeader?function(i){var n=i.find(">tr:not(.k-filter-row)"),r=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},s=e();n.length>1&&(s=n.find("th").filter(r).filter(function(){return this.rowSpan>1})),s=s.add(n.last().find("th").filter(r));var o=kendo.attr("index");return s.sort(function(i,n){i=e(i),n=e(n);var r=i.attr(o),s=n.attr(o);return r===t&&(r=e(i).index()),s===t&&(s=e(n).index()),r=parseInt(r,10),s=parseInt(s,10),r>s?1:r<s?-1:0}),s}(this.lockedHeader.find(">table>thead")).filter(r).length:0;if((i="number"==typeof i?c[i]:x(i)?w(c,function(e){return e===i})[0]:w(c,function(e){return e.field===i})[0])&&!i.hidden){n=y(i,c),s=(o=(a=i.locked)?this.lockedHeader.children("table"):this.thead.parent()).find("[data-index='"+n+"']");var f=a?this.lockedTable:this.table,p=this.footer||e();this.footer&&this.lockedContent&&(p=a?this.footer.children(".k-grid-footer-locked"):this.footer.children(".k-grid-footer-wrap"));var m=p.find("table").first();this.lockedHeader&&h>=n&&!a&&(n-=h);for(var g=0;g<c.length&&c[g]!==i;g++)c[g].hidden&&n--;l=d.scrollable?o.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+n+")").add(f.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+n+")")).add(m.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+n+")")):f.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+n+")");var v=o.add(f).add(m),_=s.outerWidth();l.width(""),v.css("table-layout","fixed"),l.width("auto"),v.addClass("k-autofitting"),v.css("table-layout","");var b=Math.ceil(Math.max(s.outerWidth(),f.find("tr").eq(0).children("td:visible").eq(n).outerWidth(),m.find("tr").eq(0).children("td:visible").eq(n).outerWidth()));if(l.width(b),i.width=b,d.scrollable){for(var k,C=o.find("col"),S=0,D=0,F=C.length;D<F;D+=1){if(!(k=C[D].style.width)||-1!=k.indexOf("%")){S=0;break}S+=parseInt(k,10)}S&&v.each(function(){this.style.width=S+"px"})}u.msie&&8==u.version&&(v.css("display","inline-table"),setTimeout(function(){v.css("display","table")},1)),v.removeClass("k-autofitting"),this.trigger(T,{column:i,oldWidth:_,newWidth:b}),this._applyLockedContainersWidth(),this._syncLockedContentHeight(),this._syncLockedHeaderHeight()}},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent(),i=e[0].offsetWidth>t[0].clientWidth?kendo.support.scrollbar():0;this.lockedContent.height(t.height()-i)},_syncLockedContentHeight:function(){this.lockedTable&&(this._touchScroller||this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){if(this.lockedHeader){var e=this.lockedHeader.children("table"),t=this.thead.parent();this._adjustRowsHeight(e,t),function(e,t){if(e=e[0],t=t[0],e.rows.length!==t.rows.length){var i,n,r=e.offsetHeight,s=t.offsetHeight;r>s?(i=t.rows[t.rows.length-1],n=r-s):(i=e.rows[e.rows.length-1],n=s-r),i.style.height=i.offsetHeight+n+"px"}}(e,t)}},_resizable:function(){if(this.options.resizable){this.resizable&&this.resizable.destroy();var t=this;e(this.lockedHeader).find("thead").add(this.thead).on("mousemove"+S,"th",e.proxy(this._positionResizeHandle,this)),this.resizable=new kendo.ui.Resizable(this.wrapper,{handle:".k-resize-handle",start:function(i){var n,r,s=e(i.currentTarget).data("th"),o="col:eq("+e.inArray(s[0],s.parent().children().filter(":visible"))+")";t.wrapper.addClass("k-grid-column-resizing"),t.lockedHeader&&e.contains(t.lockedHeader[0],s[0])?(n=t.lockedHeader,r=t.lockedTable):(n=t.thead.parent(),r=t.table),this.col=r.children("colgroup").find(o).add(n.find(o)),this.th=s,this.startLocation=i.x.location,this.columnWidth=s.outerWidth(),this.table=this.col.closest("table"),this.totalWidth=this.table.width()},resize:function(e){var t=e.x.location-this.startLocation;this.columnWidth+t<11&&(t=11-this.columnWidth),this.table.width(this.totalWidth+t),this.col.width(this.columnWidth+t)},resizeend:function(){t.wrapper.removeClass("k-grid-column-resizing");var e=this.th.attr("data-field"),i=w(t.columns,function(t){return t.field==e}),n=Math.floor(this.th.outerWidth());i[0].width=n,t._resize(),t._adjustRowsHeight(),t.trigger(T,{column:i,oldWidth:this.columnWidth,newWidth:n}),this.table=this.col=this.th=null}})}},_sortable:function(){var t,i,n,r,s,o=this.columns,a=e(this.lockedHeader).add(this.thead).find("th"),d=kendo.attr("field"),c=this.options.sortable;if(c)for(r=0,s=a.length;r<s;r++)!1!==(t=o[r]).sortable&&!t.command&&t.field&&((i=(n=a.eq(r)).data("kendoColumnSorter"))&&i.destroy(),n.attr(d,t.field).kendoColumnSorter(l({},c,t.sortable,{dataSource:this.dataSource})))},_filterable:function(){var t,i,n,r,s,o=e(this.lockedHeader).add(this.thead).find("th"),a=this.options.filterable;if(a&&!this.options.columnMenu){var d=b(function(e){this.trigger("filterMenuInit",{field:e.field,container:e.container})},this);for(t=0,i=o.length;t<i;t++)n=this.columns[t],(s=(r=o.eq(t)).data("kendoFilterMenu"))&&s.destroy(),n.command||!1===n.filterable||r.kendoFilterMenu(l(!0,{},a,n.filterable,{dataSource:this.dataSource,init:d}))}},_change:function(){this.trigger("change")},_selectable:function(){var e,i,n=this.options.selectable,r=this.table;n&&(n=kendo.ui.Selectable.parseOptions(n),this._hasLockedColumns&&(r=r.add(this.lockedTable),i=n.multiple&&n.cell),e=">tbody>tr:not(.k-footer-template)",n.cell&&(e+=">td"),this.selectable=new kendo.ui.Selectable(r,{filter:e,aria:!0,multiple:n.multiple,change:b(this._change,this),useAllItems:i,continuousItems:b(this._continuousItems,this,e,n.cell),relatedTarget:!n.cell&&this._hasLockedColumns?b(this._selectableTarget,this):t}))},_continuousItems:function(t,i){if(this.lockedContent){for(var n=e(t,this.lockedTable),r=e(t,this.table),s=i?this._lockedColumns().length:1,o=i?this.columns.length-s:1,a=[],l=0;l<n.length;l+=s)C.apply(a,n.slice(l,l+s)),C.apply(a,r.splice(0,o));return a}},_selectableTarget:function(t){for(var i,n=e(),r=0,s=t.length;r<s;r++)i=this._relatedRow(t[r]),y(i[0],t)<0&&(n=n.add(i));return n},_relatedRow:function(t){var i=this.lockedTable;if(t=e(t),!i)return t;var n=t.closest(this.table.add(this.lockedTable)),r=n.find(">tbody>tr").index(t);return(n=n[0]===this.table[0]?i:this.table).find(">tbody>tr").eq(r)},select:function(t){var i=this.selectable;return i?(void 0!==t&&(i.options.multiple||(i.clear(),t=t.first()),this._hasLockedColumns&&(t=t.add(e.map(t,b(this._relatedRow,this))))),i.value(t)):e()},clearSelection:function(){this.select().length&&(this.selectable.clear(),this.trigger("change"))},_dataSource:function(e){var t=this.dataSource;t&&(t.unbind("change",this._refreshHandler),t.unbind("error",this._errorHandler),t.unbind("progress",this._progressHandler)),this._refreshHandler=b(this.refresh,this),this._errorHandler=b(this._error,this),this._progressHandler=b(this._progress,this),(t=this.dataSource=A.create(e)).bind("change",this._refreshHandler),t.bind("error",this._errorHandler),t.bind("progress",this._progressHandler)},setDataSource:function(e){this._dataSource(e),this._sortable(),this._filterable(),this._contentTree.render([]),this.options.autoBind&&this.dataSource.fetch()},dataItem:function(t){if(t instanceof R)return t;var i=e(t).closest("tr");return this.dataSource.getByUid(i.attr(kendo.attr("uid")))},editRow:function(e){var t;"string"==typeof e&&(e=this.tbody.find(e)),(t=this.dataItem(e))&&("popup"!=this._editMode()&&(t._edit=!0),this._cancelEditor(),this._render(),this._createEditor(t),this.trigger("edit",{container:this.editor.wrapper,model:t}))},_cancelEdit:function(e){e=l(e,{container:this.editor.wrapper,model:this.editor.model}),this.trigger("cancel",e)||this.cancelRow()},cancelRow:function(){this._cancelEditor(),this._render()},saveRow:function(){var e,t=this.editor;t&&(e={model:t.model,container:t.wrapper},t.end()&&!this.trigger("save",e)&&this.dataSource.sync())},addRow:function(e){var t=this.editor,i=0,n={};if(!t||t.end())return e?(e instanceof R||(e=this.dataItem(e)),n[e.parentIdField]=e.id,i=this.dataSource.indexOf(e)+1,void this.expand(e).then(b(this._insertAt,this,n,i))):void this._insertAt(n,i)},_insertAt:function(e,t){e=this.dataSource.insert(t,e);var i=this.itemFor(e);this.editRow(i)},removeRow:function(e){var t=this.dataItem(e),i={model:t,row:e};t&&!this.trigger("remove",i)&&(this.dataSource.remove(t),this.dataSource.sync())},_cancelEditor:function(){var e,t=this.editor;t&&(e=t.model,this._destroyEditor(),this.dataSource.cancelChanges(e),e._edit=!1)},_destroyEditor:function(){this.editor&&(this.editor.close(),this.editor=null)},_createEditor:function(e){var t=this.itemFor(e);t=t.add(this._relatedRow(t));var i=this._editMode(),n={columns:this.columns,model:e,target:this,clearContainer:!1,template:this.options.editable.template};"inline"==i?this.editor=new I(t,n):(l(n,{window:this.options.editable.window,commandRenderer:b(function(){return this._buildCommands(["update","canceledit"])},this),fieldRenderer:this._cellContent,save:b(this.saveRow,this),cancel:b(this._cancelEdit,this),appendTo:this.wrapper}),this.editor=new M(t,n))},_editMode:function(){var e="inline",t=this.options.editable;return!0!==t&&(e="string"==typeof t?t:t.mode||e),e.toLowerCase()},hideColumn:function(e){this._toggleColumnVisibility(e,!0)},showColumn:function(e){this._toggleColumnVisibility(e,!1)},_toggleColumnVisibility:function(e,t){(e=this._findColumn(e))&&e.hidden!==t&&(e.hidden=t,this._ensureExpandableColumn(),this._renderCols(),this._renderHeader(),this._render(),this._adjustTablesWidth(),this.trigger(t?"columnHide":"columnShow",{column:e}),t||e.width||this.table.add(this.thead.closest("table")).width(""))},_findColumn:function(e){return e="number"==typeof e?this.columns[e]:x(e)?w(this.columns,function(t){return t===e})[0]:w(this.columns,function(t){return t.field===e})[0]},_adjustTablesWidth:function(){var e,t,i,n=this.thead.prev().children(),r=0;for(e=0,t=n.length;e<t;e++){if(!(i=n[e].style.width)||-1!=i.indexOf("%")){r=0;break}r+=parseInt(i,10)}r&&this.table.add(this.thead.closest("table")).width(r)},_reorderable:function(){if(this.options.reorderable){var t=(!0===this.options.scrollable?".k-grid-header:first ":"table:first>.k-grid-header ")+"th.k-header",i=this;this._draggableInstance=new f.Draggable(this.wrapper,{group:kendo.guid(),filter:t,hint:function(t){return e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(t.attr(kendo.attr("title"))||t.attr(kendo.attr("field"))||t.text()).prepend('<span class="k-icon k-drag-status k-denied" />')}}),this.reorderable=new f.Reorderable(this.wrapper,{draggable:this._draggableInstance,dragOverContainers:b(this._allowDragOverContainers,this),inSameContainer:function(t){return e(t.source).parent()[0]===e(t.target).parent()[0]},change:function(e){var t=e.newIndex,n=e.oldIndex,r="before"===e.position,s=i.columns[n];i.trigger("columnReorder",{newIndex:t,oldIndex:n,column:s}),i.reorderColumn(t,s,r)}})}},_allowDragOverContainers:function(e){return!1!==this.columns[e].lockable},reorderColumn:function(i,n,r){var s,o=this.columns,a=y(n,o),l=!!o[i].locked,d=this._nonLockedColumns().length;if(a!==i&&(!l||n.locked||1!=d)&&(l||!n.locked||o.length-d!=1)){r===t&&(r=i<a),s=(s=!!n.locked)!=l,n.locked=l,o.splice(r?i:i+1,0,n),o.splice(a<i?a:a+1,1),this._renderCols();var c=e(this.lockedHeader).add(this.thead).find("th");c.eq(a)[r?"insertBefore":"insertAfter"](c.eq(i));var u=this._headerTree.children[0].children;this._hasLockedColumns&&(u=this._lockedHeaderTree.children[0].children.concat(u)),u.splice(r?i:i+1,0,u[a]),u.splice(a<i?a:a+1,1),this._hasLockedColumns&&(this._lockedHeaderTree.children[0].children=u.splice(0,this._lockedColumns().length),this._headerTree.children[0].children=u),this._applyLockedContainersWidth(),this.refresh(),s&&(l?this.trigger("columnLock",{column:n}):this.trigger("columnUnlock",{column:n}))}},lockColumn:function(e){var t=this.columns;if((e="number"==typeof e?t[e]:w(t,function(t){return t.field===e})[0])&&!e.hidden){var i=this._lockedColumns().length-1;this.reorderColumn(i,e,!1)}},unlockColumn:function(e){var t=this.columns;if((e="number"==typeof e?t[e]:w(t,function(t){return t.field===e})[0])&&!e.hidden){var i=this._lockedColumns().length;this.reorderColumn(i,e,!0)}},_columnMenu:function(){var t,i,n,r,s,o=e(this.lockedHeader).add(this.thead).find("th"),a=this.columns,d=this.options,c=d.columnMenu,u=b(this._columnMenuInit,this),h=this._lockedColumns().length;if(c){"boolean"==typeof c&&(c={});for(var f=0;f<o.length;f++)(t=a[f]).field&&((i=o.eq(f).data("kendoColumnMenu"))&&i.destroy(),r=!1,!1!==t.sortable&&!1!==c.sortable&&!1!==d.sortable&&(r=l({},d.sortable,{compare:(t.sortable||{}).compare})),s=!1,d.filterable&&!1!==t.filterable&&!1!==c.filterable&&(s=l({pane:this.pane},t.filterable,d.filterable)),n={dataSource:this.dataSource,values:t.values,columns:c.columns,sortable:r,filterable:s,messages:c.messages,owner:this,closeCallback:e.noop,init:u,pane:this.pane,lockedColumns:!1!==t.lockable&&h>0},d.$angular&&(n.$angular=d.$angular),o.eq(f).kendoColumnMenu(n))}},_columnMenuInit:function(e){this.trigger("columnMenuInit",{field:e.field,container:e.container})}});kendo.ExcelMixin&&kendo.ExcelMixin.extend(H.prototype),kendo.PDFMixin&&(kendo.PDFMixin.extend(H.prototype),H.fn._drawPDF=function(t){var i=new e.Deferred;return this._drawPDFShadow({width:this.wrapper.width()},{avoidLinks:this.options.pdf.avoidLinks}).done(function(e){var n={page:e,pageNumber:1,progress:1,totalPages:1};t.notify(n),i.resolve(n.page)}).fail(function(e){i.reject(e)}),i}),l(!0,kendo.data,{TreeListDataSource:A,TreeListModel:R}),l(!0,kendo.ui,{TreeList:H}),f.plugin(H)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("util/parse-xml",["kendo.core","util/main"],function(){"use strict";function e(e){for(var t=[],i=0;i<e.length;++i)t.push(e.charCodeAt(i));return t}function t(e,t){t>65535?(t-=65536,e.push(t>>>10&1023|55296,56320|1023&t)):e.push(t)}function i(e,i){function C(i){var n=e[W++];240&n^240?224&n^224?192&n^192?i.push(n):t(i,(31&n)<<6|63&e[W++]):t(i,(15&n)<<12|(63&e[W++])<<6|63&e[W++]):t(i,(3&n)<<18|(63&e[W++])<<12|(63&e[W++])<<6|63&e[W++])}function S(e){throw new Error(e+", at "+W)}function T(t){for(var i=[];W<e.length&&t(e[W]);)i.push(e[W++]);return i}function D(e){return n.apply(0,T(e))}function F(){T(A)}function E(t){for(var i=W,n=0;n<t.length;++n)if(e[W++]!=t[n])return W=i,!1;return t}function R(e){E(e)||S("Expecting "+e.join(", "))}function A(e){return 9==e||10==e||13==e||32==e}function I(e){return e>=48&&e<=57}function M(e){return e>=48&&e<=57||(e|=32)>=97&&e<=102}function H(e){return 58==e||95==e||(e|=32)>=97&&e<=122}function z(e){return 45==e||I(e)||H(e)}function N(){var t,i;E(h)?(V("decl",P(),O()),R(u)):E(l)?function(){var t=[];for(;W<e.length;){if(E(a))return V("comment",n.apply(0,t));C(t)}}():(t=P(),i=O(t),U.push(i),E(d)?V("enter",t,i,!0):(R(p),V("enter",t,i),function(t){var i=[];for(;W<e.length;){if(E(c))return i.length&&V("text",n.apply(0,i));if(E(s))for(;W<e.length&&!E(o);)C(i);else E(f)?(i.length&&V("text",n.apply(0,i)),N(),i=[]):E(v)?B(i):C(i)}S("Unclosed tag "+t)}(t),t!=P()&&S("Bad closing tag"),V("leave",t,i),F(),R(p)),U.pop())}function P(){return H(e[W])||S("Expecting XML name"),D(z)}function L(){var t=E(_)||E(b);t||S("Expecting string");for(var i=[];W<e.length;){if(E(t))return n.apply(0,i);E(v)?B(i):C(i)}S("Unfinished string")}function B(e){var i;if(E(k))i=E(w)||E(y)?parseInt(D(M),16):parseInt(D(I),10),isNaN(i)&&S("Bad numeric entity");else{var n=P();void 0===(i=r[n])&&S("Unknown entity "+n)}t(e,i),R(m)}function O(t){for(var i={$tag:t};W<e.length;){F();var n=e[W];if(63==n||62==n||47==n)break;i[P()]=(R(g),L())}return i}function V(e,t,n,r){var s=i&&i[e];s&&s.call(q,t,n,r)}var W=0,U=[],q={is:function(e){for(var t=U.length,i=e.length;--t>=0&&--i>=0;)if(U[t].$tag!=e[i]&&"*"!=e[i])return!1;return i<0?U[U.length-1]:null},exit:function(){throw x},stack:U},$=[];for(C($),65279!=$[0]&&(W=0);W<e.length;)F(),R(f),N(),F()}var n=String.fromCharCode,r={amp:38,lt:60,gt:62,quot:34,nbsp:160};var s=e("<![CDATA["),o=e("]]>"),a=e("--\x3e"),l=e("!--"),d=e("/>"),c=e("</"),u=e("?>"),h=e("?"),f=e("<"),p=e(">"),m=e(";"),g=e("="),v=e("&"),_=e('"'),b=e("'"),k=e("#"),w=e("x"),y=e("X"),x={};kendo.util.parseXML=function(){try{return i.apply(this,arguments)}catch(e){if(e!==x)throw e}}}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/commands",["kendo.core","kendo.binder","kendo.window","kendo.list","kendo.tabstrip"],function(){!function(e){if(!(e.support.browser.msie&&e.support.browser.version<9)){var t=e.jQuery,i=e.spreadsheet.Command=e.Class.extend({init:function(e){this.options=e,this._workbook=e.workbook,this._property=e&&e.property,this._state={}},range:function(e){return void 0!==e&&this._setRange(e),this._range},_setRange:function(e){this._range=e},redo:function(){this.exec()},undo:function(){this.range().setState(this._state)},getState:function(){this._state=this.range().getState(this._property)},_forEachCell:function(e){var t=this.range(),i=t._ref;i.forEach(function(i){t.sheet().forEach(i.toRangeRef(),e.bind(this))}.bind(this))}}),n=e.spreadsheet.PropertyChangeCommand=i.extend({_setRange:function(e){i.prototype._setRange.call(this,e.skipHiddenCells())},init:function(e){i.fn.init.call(this,e),this._value=e.value},exec:function(){var e=this.range();e.enable()&&(this.getState(),e[this._property](this._value))}});e.spreadsheet.ClearContentCommand=i.extend({exec:function(){this.getState(),this.range().clearContent()}}),e.spreadsheet.EditCommand=n.extend({init:function(e){e.property="input",n.fn.init.call(this,e)},rejectState:function(e){return this.undo(),{title:e.title,body:e.message,reason:"error",type:"validationError"}},exec:function(){var t=this.range(),i=this._value;this.getState();try{t.link(null),t.input(i);var n=t._getValidationState();if(n)return this.rejectState(n)}catch(r){if(!(r instanceof e.spreadsheet.calc.ParseError))throw r;try{t.input(i+")");var n=t._getValidationState();if(n)return this.rejectState(n)}catch(n){if(n instanceof e.spreadsheet.calc.ParseError)return t.input("'"+i),{title:"Error in formula",body:r+"",reason:"error"}}}}}),e.spreadsheet.TextWrapCommand=n.extend({init:function(e){e.property="wrap",n.fn.init.call(this,e),this._value=e.value},getState:function(){var e={};this.range().forEachRow(function(t){var i=t.topLeft().row;e[i]=t.sheet().rowHeight(i)}),this._state=this.range().getState(this._property),this._rowHeight=e},undo:function(){var e=this.range().sheet(),t=this._rowHeight;this.range().setState(this._state);for(var i in t)e.rowHeight(i,t[i])}}),e.spreadsheet.AdjustDecimalsCommand=i.extend({init:function(e){this._decimals=e.value,e.property="format",i.fn.init.call(this,e)},exec:function(){var t=this.range().sheet(),i=this._decimals,n=e.spreadsheet.formatting;this.getState(),t.batch(function(){this.range().forEachCell(function(e,r,s){var o=s.format;(o||i>0)&&(o=n.adjustDecimals(o||"#",i),t.range(e,r).format(o))})}.bind(this))}}),e.spreadsheet.BorderChangeCommand=i.extend({init:function(e){e.property="border",i.fn.init.call(this,e),this._type=e.border,this._style=e.style},exec:function(){this.getState(),this[this._type](this._style)},noBorders:function(){var e=this.range();e.sheet().batch(function(){e.borderLeft(null).borderTop(null).borderRight(null).borderBottom(null)}.bind(this),{})},allBorders:function(e){var t=this.range();t.sheet().batch(function(){t.borderLeft(e).borderTop(e).borderRight(e).borderBottom(e)}.bind(this),{})},leftBorder:function(e){this.range().leftColumn().borderLeft(e)},rightBorder:function(e){this.range().rightColumn().borderRight(e)},topBorder:function(e){this.range().topRow().borderTop(e)},bottomBorder:function(e){this.range().bottomRow().borderBottom(e)},outsideBorders:function(e){var t=this.range();t.sheet().batch(function(){t.leftColumn().borderLeft(e),t.topRow().borderTop(e),t.rightColumn().borderRight(e),t.bottomRow().borderBottom(e)}.bind(this),{})},insideBorders:function(e){this.range().sheet().batch(function(){this.allBorders(e),this.outsideBorders(null)}.bind(this),{})},insideHorizontalBorders:function(e){var t=this.range();t.sheet().batch(function(){t.borderBottom(e),t.bottomRow().borderBottom(null)}.bind(this),{})},insideVerticalBorders:function(e){var t=this.range();t.sheet().batch(function(){t.borderRight(e),t.rightColumn().borderRight(null)}.bind(this),{})}}),e.spreadsheet.MergeCellCommand=i.extend({init:function(e){i.fn.init.call(this,e),this._type=e.value},exec:function(){this.getState(),this[this._type]()},activate:function(e){this.range().sheet().activeCell(e)},getState:function(){this._state=this.range().getState()},undo:function(){"unmerge"!==this._type&&(this.range().unmerge(),this.activate(this.range().topLeft())),this.range().setState(this._state)},cells:function(){var e=this.range(),t=e._ref;e.merge(),this.activate(t)},horizontally:function(){var e=this.range().topRow()._ref;this.range().forEachRow(function(e){e.merge()}),this.activate(e)},vertically:function(){var e=this.range().leftColumn()._ref;this.range().forEachColumn(function(e){e.merge()}),this.activate(e)},unmerge:function(){var e=this.range(),t=e._ref.topLeft;e.unmerge(),this.activate(t)}}),e.spreadsheet.FreezePanesCommand=i.extend({init:function(e){i.fn.init.call(this,e),this._type=e.value},exec:function(){this.getState(),this._topLeft=this.range().topLeft(),this[this._type]()},getState:function(){this._state=this.range().sheet().getState()},undo:function(){this.range().sheet().setState(this._state)},panes:function(){var e=this._topLeft,t=this.range().sheet();t.frozenColumns(e.col).frozenRows(e.row)},rows:function(){var e=this._topLeft,t=this.range().sheet();t.frozenRows(e.row)},columns:function(){var e=this._topLeft,t=this.range().sheet();t.frozenColumns(e.col)},unfreeze:function(){var e=this.range().sheet();e.frozenRows(0).frozenColumns(0)}}),e.spreadsheet.PasteCommand=i.extend({init:function(e){i.fn.init.call(this,e),this._clipboard=this._workbook.clipboard()},getState:function(){this._range=this._workbook.activeSheet().range(this._clipboard.pasteRef()),this._state=this._range.getState()},exec:function(){var e=this._clipboard.canPaste();if(this._clipboard.menuInvoked=!0,!e.canPaste)return e.menuInvoked?{reason:"error",type:"useKeyboard"}:e.pasteOnMerged?{reason:"error",type:"modifyMerged"}:e.overflow?{reason:"error",type:"overflow"}:{reason:"error"};this.getState(),this._clipboard.paste();var t=this._workbook.activeSheet().range(this._clipboard.pasteRef());t._adjustRowHeight()}}),e.spreadsheet.AdjustRowHeightCommand=i.extend({exec:function(){var e=this.options,t=this._workbook.activeSheet(),i=e.range||t.range(e.rowIndex);i._adjustRowHeight()}}),e.spreadsheet.ToolbarPasteCommand=i.extend({exec:function(){if(!e.support.clipboard.paste)return{reason:"error",type:"useKeyboard"};this._workbook._view.clipboard.focus().select(),document.execCommand("paste")}}),e.spreadsheet.CopyCommand=i.extend({init:function(e){i.fn.init.call(this,e),this._clipboard=e.workbook.clipboard()},undo:t.noop,exec:function(){var e=this._clipboard.canCopy();if(this._clipboard.menuInvoked=!0,e.canCopy)this._clipboard.copy();else{if(e.menuInvoked)return{reason:"error",type:"useKeyboard"};if(e.multiSelection)return{reason:"error",type:"unsupportedSelection"}}}}),e.spreadsheet.ToolbarCopyCommand=i.extend({init:function(e){i.fn.init.call(this,e),this._clipboard=e.workbook.clipboard()},undo:t.noop,exec:function(){if(!e.support.clipboard.copy)return{reason:"error",type:"useKeyboard"};var i=this._workbook._view.clipboard,n=document.createElement("textarea");t(n).addClass("k-spreadsheet-clipboard").val(i.html()).appendTo(document.body).focus().select(),document.execCommand("copy"),i.trigger("copy"),t(n).remove()}}),e.spreadsheet.CutCommand=i.extend({init:function(e){i.fn.init.call(this,e),this._clipboard=e.workbook.clipboard()},exec:function(){this._clipboard.canCopy()&&(this.getState(),this._clipboard.cut())}}),e.spreadsheet.AutoFillCommand=i.extend({init:function(e){i.fn.init.call(this,e)},origin:function(e){this._origin=e},exec:function(){this.getState();try{this.range().fillFrom(this._origin)}catch(t){if(t instanceof e.spreadsheet.Range.FillError)return{reason:"error",body:t+""};throw t}}}),e.spreadsheet.ToolbarCutCommand=i.extend({init:function(e){i.fn.init.call(this,e),this._clipboard=e.workbook.clipboard()},exec:function(){if(!e.support.clipboard.copy)return{reason:"error",type:"useKeyboard"};var i=this._workbook._view.clipboard,n=document.createElement("textarea");t(n).val(i.html()).appendTo(document.body).focus().select(),document.execCommand("copy"),i.trigger("cut"),t(n).remove()}}),e.spreadsheet.FilterCommand=i.extend({undo:function(){this.range().filter(this._state)},exec:function(){var e=this.range();if(this._state=e.hasFilter(),e.hasFilter())e.filter(!1);else{if(e.intersectingMerged().length)return{reason:"error",type:"filterRangeContainingMerges"};e.filter(!0)}}}),e.spreadsheet.SortCommand=i.extend({undo:function(){var e=this.range().sheet();e.setState(this._state)},exec:function(){var e=this.range(),t=e.sheet(),i=t.activeCell(),n=this.options.sheet?i.topLeft.col:this.options.column||0,r="asc"===this.options.value;if(this._state=t.getState(),this.options.sheet&&(e=this.expandRange()),e.intersectingMerged().length)return{reason:"error",type:"sortRangeContainingMerges"};e.sort({column:n,ascending:r})},expandRange:function(){var t=this.range().sheet();return new e.spreadsheet.Range(t._sheetRef,t)}});var r=e.spreadsheet.ApplyFilterCommand=i.extend({column:function(){return this.options.column||0},undo:function(){var e=this.range().sheet();e.clearFilter(this.column()),this._state.length&&this.range().filter(this._state)},getState:function(){var e=this.range().sheet(),t=e.filter();t&&(this._state=t.columns.filter(function(e){return e.index==this.column()}.bind(this)))},exec:function(){var t,i,n=this.range(),r=this.column(),s=n.sheet().filter(),o=!1;this.options.valueFilter?i={column:r,filter:new e.spreadsheet.ValueFilter(this.options.valueFilter)}:this.options.customFilter&&(i={column:r,filter:new e.spreadsheet.CustomFilter(this.options.customFilter)}),this.getState(),s&&s.ref.eq(n._ref)&&s.columns.length?(s.columns.forEach(function(e){e.index===r&&(o=!0)}),t=s.columns.map(function(e){return e.index===r?i:{column:e.index,filter:e.filter}}),o||t.push(i)):t=i,n.filter(t)}});e.spreadsheet.ClearFilterCommand=r.extend({exec:function(){var e=this.range(),t=this.column();this.getState(),e.clearFilter(t)}}),e.spreadsheet.HideLineCommand=i.extend({init:function(e){i.fn.init.call(this,e),this.axis=e.axis},undo:function(){var e=this.range().sheet();e.setAxisState(this._state)},exec:function(){var e=this.range().sheet();this._state=e.getAxisState(),"row"==this.axis?e.axisManager().hideSelectedRows():e.axisManager().hideSelectedColumns()}}),e.spreadsheet.UnHideLineCommand=e.spreadsheet.HideLineCommand.extend({exec:function(){var e=this.range().sheet();this._state=e.getAxisState(),"row"==this.axis?e.axisManager().unhideSelectedRows():e.axisManager().unhideSelectedColumns()}});var s=e.spreadsheet.DeleteCommand=i.extend({undo:function(){var e=this.range().sheet();e.setState(this._state)}});e.spreadsheet.DeleteRowCommand=s.extend({exec:function(){var e=this.range().sheet();this._state=e.getState(),e.axisManager().deleteSelectedRows()}}),e.spreadsheet.DeleteColumnCommand=s.extend({exec:function(){var e=this.range().sheet();this._state=e.getState(),e.axisManager().deleteSelectedColumns()}});var o=i.extend({init:function(e){i.fn.init.call(this,e),this._value=e.value},undo:function(){var e=this.range().sheet();e.setState(this._state)}});e.spreadsheet.AddColumnCommand=o.extend({exec:function(){var e=this.range().sheet();this._state=e.getState(),"left"===this._value?e.axisManager().addColumnLeft():e.axisManager().addColumnRight()}}),e.spreadsheet.AddRowCommand=o.extend({exec:function(){var e=this.range().sheet();if(!e.axisManager().canAddRow())return{reason:"error",type:"shiftingNonblankCells"};this._state=e.getState(),"above"===this._value?e.axisManager().addRowAbove():e.axisManager().addRowBelow()}}),e.spreadsheet.EditValidationCommand=i.extend({init:function(e){i.fn.init.call(this,e),this._value=e.value},exec:function(){this.range().validation(this._value)}}),e.spreadsheet.OpenCommand=i.extend({exec:function(){var e=this.options.file;if(null===e.name.match(/.xlsx$/i))return{reason:"error",type:"openUnsupported"};this.options.workbook.fromFile(this.options.file)}}),e.spreadsheet.SaveAsCommand=i.extend({exec:function(){var e=this.options.name+this.options.extension;".xlsx"===this.options.extension?this.options.workbook.saveAsExcel({fileName:e}):".pdf"===this.options.extension&&this.options.workbook.saveAsPDF(t.extend(this.options.pdf,{workbook:this.options.workbook,fileName:e}))}})}}(kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/formulabar",["kendo.core"],function(){!function(e){if(!(e.support.browser.msie&&e.support.browser.version<9)){var t=e.jQuery,i=e.ui.Widget.extend({init:function(n,r){e.ui.Widget.call(this,n,r),n=this.element.addClass(i.classNames.wrapper),this.formulaInput=new e.spreadsheet.FormulaInput(t("<div/>").appendTo(n))},destroy:function(){this.formulaInput&&this.formulaInput.destroy(),this.formulaInput=null}});e.spreadsheet.FormulaBar=i,t.extend(!0,i,{classNames:{wrapper:"k-spreadsheet-formula-bar"}})}}(window.kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/formulainput",["kendo.core"],function(){!function(e,t){function i(e){return"("==e||"["==e||"{"==e}function n(e,t){return e.begin<=t.begin&&e.end>=t.end}if(!(e.support.browser.msie&&e.support.browser.version<9)){var r=e.jQuery,s=e.ui.Widget,o=".kendoFormulaInput",a=e.keys,l=["font-family","font-size","font-stretch","font-style","font-weight","letter-spacing","text-transform","line-height"],d={27:"esc",37:"left",39:"right",35:"end",36:"home",32:"spacebar"},c=/(^_|[^a-z0-9]$)/i,u=s.extend({init:function(e,t){s.call(this,e,t),(e=this.element).addClass(u.classNames.wrapper).attr("contenteditable",!0).attr("spellcheck",!1).css("white-space","pre"),this.options.autoScale&&e.on("input",this.scale.bind(this)),this._highlightedRefs=[],this._staticTokens=[],this._formulaSource(),this._formulaList(),this._popup(),this._tooltip(),e.on("keydown",this._keydown.bind(this)).on("keyup",this._keyup.bind(this)).on("blur",this._blur.bind(this)).on("input click",this._input.bind(this)).on("focus",this._focus.bind(this))},options:{name:"FormulaInput",autoScale:!1,filterOperator:"startswith",scalePadding:30,minLength:1},events:["keyup","focus"],enable:function(e){if(void 0===e)return"false"!==this.element.attr("contenteditable");this.element.attr("contenteditable",e).toggleClass("k-state-disabled",!e)},getPos:function(){function e(e,t){try{!function i(n){if(n===e)throw t;if(1==n.nodeType)for(var r=n.firstChild;r;r=r.nextSibling)i(r);else 3==n.nodeType&&(t+=n.nodeValue.length)}(i)}catch(e){return e}}var i=this.element[0],n=t.getSelection(),r=e(n.focusNode,n.focusOffset),s=e(n.anchorNode,n.anchorOffset);if(null!=r&&null!=s){if(r>s){var o=r;r=s,s=o}return{begin:r,end:s,collapsed:r==s}}},setPos:function(e,i){function n(e,t){try{!function e(i){if(3==i.nodeType){var n=i.nodeValue.length;if(n>=t)throw i;t-=n}else if(1==i.nodeType)for(var r=i.firstChild;r;r=r.nextSibling)e(r)}(e)}catch(e){return{node:e,pos:t}}}var r=this.element[0];if(e=n(r,e),i=null!=i?n(r,i):e,e&&i){var s=document.createRange();s.setStart(e.node,e.pos),s.setEnd(i.node,i.pos);var o=t.getSelection(),a=o.getRangeAt(0);(function(e,t){return e.startOffset!=t.startOffset||e.endOffset!=t.endOffset||e.startContainer!=t.endContainer||e.endContainer!=t.endContainer})(s,a)&&(o.removeAllRanges(),o.addRange(s))}},end:function(){this.setPos(this.length())},home:function(){this.setPos(0)},length:function(){return this.value().length},_formulaSource:function(){var t,i=[];for(var n in e.spreadsheet.calc.runtime.FUNCS)c.test(n)||(t=n.toUpperCase(),i.push({value:t,text:t}));this.formulaSource=new e.data.DataSource({data:i})},_formulaList:function(){this.list=new e.ui.StaticList(r("<ul />").addClass(u.classNames.listWrapper).insertAfter(this.element),{autoBind:!1,selectable:!0,change:this._formulaListChange.bind(this),dataSource:this.formulaSource,dataValueField:"value",template:"#:data.value#"}),this.list.element.on("mousedown",function(e){e.preventDefault()})},_formulaListChange:function(){var e=this._tokenContext();if(e&&!this._mute){var t=e.token,i=this.list.value()[0],n={replace:!0,token:t,end:t.end};e.nextToken&&"("==e.nextToken.value||(i+="("),this._replaceAt(n,i),this.popup.close()}},_popup:function(){this.popup=new e.ui.Popup(this.list.element,{anchor:this.element})},_blur:function(){this.popup.close(),clearTimeout(this._focusId)},_isFormula:function(){return/^=/.test(this.value())},_keydown:function(e){var t=e.keyCode;d[t]?(this.popup.close(),this._navigated=!0):this._move(t)&&(this._navigated=!0,e.preventDefault()),this._keyDownTimeout=setTimeout(this._syntaxHighlight.bind(this))},_keyup:function(){var e,t=this.popup;this._isFormula()&&!this._navigated&&(e=((this._tokenContext()||{}).token||{}).value,this.filter(e),e&&this.formulaSource.view().length?(t[t.visible()?"position":"open"](),this.list.focusFirst()):t.close()),this._navigated=!1,this._syntaxHighlight(),this.trigger("keyup")},_input:function(){this._syntaxHighlight()},_focus:function(){this._focusTimeout=setTimeout(this._syntaxHighlight.bind(this)),this.trigger("focus")},_move:function(e){var t=this.list,i=!1,n=this.popup;return e===a.DOWN?(t.focusNext(),t.focus()||t.focusFirst(),i=!0):e===a.UP?(t.focusPrev(),t.focus()||t.focusLast(),i=!0):e===a.ENTER?(n.visible()&&t.select(t.focus()),n.close(),i=!0):e===a.TAB?(t.select(t.focus()),n.close(),i=!0):e===a.PAGEUP?(t.focusFirst(),i=!0):e===a.PAGEDOWN&&(t.focusLast(),i=!0),i},_tokenContext:function(){var t=this.getPos(),i=this.value();if(!i||!t||!t.collapsed)return null;for(var r,s=e.spreadsheet.calc.tokenize(i,this.row(),this.col()),o=0;o<s.length;++o)if(r=s[o],n(r,t)&&/^(?:str|sym|func)$/.test(r.type))return{token:r,nextToken:s[o+1]};return null},_sync:function(){this._editorToSync&&this.isActive()&&this._editorToSync.value(this.value())},_textContainer:function(){var t=e.getComputedStyles(this.element[0],l);t.position="absolute",t.visibility="hidden",t.whiteSpace="pre",t.top=-3333,t.left=-3333,this._span=r("<span style='white-space: pre'/>").css(t).insertAfter(this.element)},_tooltip:function(){this._cellTooltip=r('<div class="k-widget k-tooltip" style="position:absolute; display:none">A1</div>').insertAfter(this.element)},tooltip:function(e){this._cellTooltip.text(e)},toggleTooltip:function(e){this._cellTooltip.toggle(e)},isActive:function(){return this.element[0]===e._activeElement()},filter:function(e){!e||e.length<this.options.minLength||(this._mute=!0,this.list.select(-1),this._mute=!1,this.formulaSource.filter({field:this.list.options.dataValueField,operator:this.options.filterOperator,value:e}))},hide:function(){this.element.hide(),this._cellTooltip.hide()},show:function(){this.element.show()},row:function(){if(this.activeCell)return this.activeCell.row},col:function(){if(this.activeCell)return this.activeCell.col},position:function(e){e&&(this.element.show().css({top:e.top+1+"px",left:e.left+1+"px"}),this._cellTooltip.css({top:e.top-this._cellTooltip.height()-10+"px",left:e.left}))},resize:function(e){e&&this.element.css({width:e.width-1,height:e.height-1})},canInsertRef:function(e){var t,i=this._canInsertRef(e),n=i&&i.token;if(n)for(t=0;t<this._staticTokens.length;t++)if(function(e,t){if(!e||!t)return!1;return"ref"==e.type&&"ref"==t.type?e.ref.eq(t.ref):e.value===t.value}(n,this._staticTokens[t]))return null;return i},_canInsertRef:function(t){function r(e,t){if(null==e)return null;if(null==t)return/^(?:op|startexp)$/.test(e.type)||i(e.value)?{token:e,end:l.end}:null;if(a){if("op"==e.type&&/^(?:punc|op)$/.test(t.type))return{token:e,end:l.end}}else{if("startexp"==e.type)return{token:e,end:l.end};if(/^(?:ref|op|punc)$/.test(e.type))return{token:e,end:l.end};if(/^(?:punc|op)$/.test(e.type))return/^[,;({]$/.test(e.value)?{token:e,end:l.end}:null}return!1}if(this.popup.visible())return null;var s,o,a=t,l=this.getPos();if(l&&this._isFormula()){if(0===l.begin)return null;s=e.spreadsheet.calc.tokenize(this.value(),this.row(),this.col());for(var d=0;d<s.length;++d){if(o=s[d],n(o,l))return function(e){if(e){if(/^(?:num|str|bool|sym|ref)$/.test(e.type))return{replace:!0,token:e,end:e.end};if(/^(?:op|punc|startexp)$/.test(e.type))return e.end==l.end?r(e,s[d+1]):r(s[d-1],e)}}(o);if(function(e){return e.begin>l.begin}(o))return r(s[d-1],o)}return r(o,null)}return null},refAtPoint:function(e){var t=this._canInsertRef();t&&this._replaceAt(t,e.simplify().toString())},_replaceAt:function(e,t){var i=this.value(),n=e.token,r=i.substr(e.end),s=(i=i.substr(0,e.replace?n.begin:e.end)+t).length;i+=r,this._value(i),this.setPos(s),this.scale(),this._syntaxHighlight(),this._sync()},syncWith:function(t){var i,n="input"+o,r=this._sync.bind(this);e.support.browser.msie&&(n="keydown"+o,i=function(){setTimeout(r)}),this._editorToSync=t,this.element.off(n).on(n,i||r)},scale:function(){var e,t,i=this.element;this._span||this._textContainer(),this._span.html(i.html()),e=this._span.width()+this.options.scalePadding,t=this._span.height(),e>i.width()&&i.width(e),t>i.height()&&i.height(t)},_value:function(e){this.element.text(e)},value:function(e){if(void 0===e)return this.element[0].innerText;this._value(e),this._syntaxHighlight()},highlightedRefs:function(){return this._highlightedRefs.slice()},_syntaxHighlight:function(){var t,r=this.getPos(),s=this.value(),o=e.spreadsheet.Pane.classNames.series,a=[],l=0,d=[],c=[];if(!r||r.collapsed){if(!/^=/.test(s))return(this._staticTokens.length||this._highlightedRefs.length)&&(this._staticTokens=[],this._highlightedRefs=[],this.element.text(s)),void(this.popup&&this.popup.close());(c=e.spreadsheet.calc.tokenize(s,this.row(),this.col())).forEach(function(s){if(s.active=!1,s.cls=["k-syntax-"+s.type],"ref"==s.type&&(s.colorClass=o[l++%o.length],s.cls.push(s.colorClass),a.push(s)),r&&"punc"==s.type)if(i(s.value))d.unshift(s);else if(function(e){return")"==e||"]"==e||"}"==e}(s.value)){var c=d.shift();c?!function(e,t){return"("==t?")"==e:"["==t?"]"==e:"{"==t&&"}"==e}(s.value,c.value)?(s.cls.push("k-syntax-error"),c.cls.push("k-syntax-error")):(n(s,r)||n(c,r))&&(s.cls.push("k-syntax-paren-match"),c.cls.push("k-syntax-paren-match")):s.cls.push("k-syntax-error")}r&&n(s,r)&&(s.cls.push("k-syntax-at-point"),s.active=!0,t=s),"func"!=s.type||function(t){return e.spreadsheet.calc.runtime.FUNCS[t.toLowerCase()]}(s.value)||r&&n(s,r)||s.cls.push("k-syntax-error")}),c.reverse().forEach(function(t){var i=t.begin,n=t.end,r=e.htmlEncode(s.substring(i,n));s=s.substr(0,i)+"<span class='"+t.cls.join(" ")+"'>"+r+"</span>"+s.substr(n)}),this.element.html(s),r&&this.setPos(r.begin,r.end),t&&/^(?:startexp|op|punc)$/.test(t.type)&&this._setStaticTokens(c),this._highlightedRefs=a}},_setStaticTokens:function(e){var t,i;for(this._staticTokens=[],t=0;t<e.length;t++)i=e[t],/^(?:num|str|bool|sym|ref)$/.test(i.type)&&this._staticTokens.push(i)},destroy:function(){this._editorToSync=null,this.element.off(o),clearTimeout(this._focusTimeout),clearTimeout(this._keyDownTimeout),this._cellTooltip=null,this._span=null,this.popup.destroy(),this.popup=null,s.fn.destroy.call(this)},insertNewline:function(){var e=this.value(),t=this.getPos(),i=t.end==e.length;e=e.substr(0,t.begin)+(i?"\n\n":"\n"+e.substr(t.end)),this.value(e),this.setPos(t.begin+1)}});e.spreadsheet.FormulaInput=u,r.extend(!0,u,{classNames:{wrapper:"k-spreadsheet-formula-input",listWrapper:"k-spreadsheet-formula-list"}})}}(kendo,window)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/eventlistener",["kendo.core"],function(){!function(e){if(!(e.support.browser.msie&&e.support.browser.version<9)){var t=e.jQuery,i={8:"backspace",9:"tab",13:"enter",27:"esc",37:"left",38:"up",39:"right",40:"down",35:"end",36:"home",32:"spacebar",33:"pageup",34:"pagedown",46:"delete",113:":edit"},n=navigator.platform.toUpperCase().indexOf("MAC")>=0,r=e.Class.extend({init:function(e,i,n){if(this._handlers={},this.target=e,this._observer=i||window,this.keyDownProxy=this.keyDown.bind(this),this.mouseProxy=this.mouse.bind(this),this.threshold=5,this._pressLocation=null,e.on("keydown",this.keyDownProxy),e.on("contextmenu mousedown cut copy paste scroll wheel click dblclick focus",this.mouseProxy),t(document.documentElement).on("mousemove mouseup",this.mouseProxy),n)for(var r in n)this.on(r,n[r])},keyDown:function(e){this.handleEvent(e,function(e){var t=i[e];!t&&function(e){if(e>47&&e<58||e>64&&e<91||e>95&&e<112||e>185&&e<193||e>218&&e<223)return!0;return!1}(e)&&(t=":alphanum");return t}(e.keyCode))},mouse:function(e){var t;e.which?t=3==e.which:e.button&&(t=2==e.button);var i=e.type;if("mousedown"===i&&(t?i="rightmousedown":this._pressLocation={x:e.pageX,y:e.pageY}),"mouseup"===i&&(t||(this._pressLocation=null)),"mousemove"===i&&this._pressLocation){var n=this._pressLocation.x-e.pageX,r=this._pressLocation.y-e.pageY,s=Math.sqrt(n*n+r*r);s>this.threshold&&(i="mousedrag")}this.handleEvent(e,i)},handleEvent:function(e,t){var i="";e.mod=n?e.metaKey:e.ctrlKey,e.altKey&&(i+="alt+"),e.shiftKey&&(i+="shift+"),e.ctrlKey&&(i+="ctrl+"),i+=t;var r=this._handlers["*+"+t];r&&r.call(this._observer,e,i);var s=this._handlers[i];s&&s.call(this._observer,e,i)},on:function(e,t){var i=this._handlers;"string"==typeof t&&(t=this._observer[t]),"string"==typeof e&&(e=e.split(",")),e.forEach(function(e){i[e]=t})},destroy:function(){this.target.off("keydown",this.keyDownProxy),this.target.off("keydown",this.mouseProxy),t(document.documentElement).off("mousemove mouseup",this.mouseProxy)}});e.spreadsheet.EventListener=r}}(window.kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/rangelist",["kendo.core"],function(){!function(e){function t(e){return e}function i(e){if(e.left.level===e.level){var t=e;e=e.left,t.left=e.right,e.right=t}return e}function n(e){if(e.right.right.level===e.level){var t=e;e=e.right,t.right=e.left,e.left=t,e.level+=1}return e}function r(e,t){return e===c?new d(1,t,c,c):(e.value.start-t.start>0?e.left=r(e.left,t):e.right=r(e.right,t),n(i(e)))}function s(e,t){if(e===c)return e;var r=e.value.start-t.start;if(0===r)if(e.left!==c&&e.right!==c){for(var o=e.left;o.right!==c;)o=o.right;e.value=o.value,e.left=s(e.left,e.value)}else e=e.left===c?e.right:e.left;else r>0?e.left=s(e.left,t):e.right=s(e.right,t);return(e.left.level<e.level-1||e.right.level<e.level-1)&&(e.level-=1,e.right.level>e.level&&(e.right.level=e.level),(e=i(e)).right=i(e.right),e.right.right=i(e.right.right),(e=n(e)).right=n(e.right)),e}function o(e,t){e!==c&&(o(e.left,t),t.push(e.value),o(e.right,t))}function a(e,t,i){if(e!==c){var n=e.value;t.start<n.start&&a(e.left,t,i),n.intersects(t)&&i.push(n),t.end>n.end&&a(e.right,t,i)}}function l(e,t,i){t!==c&&(l(e,t.left,i),e.insert(i(t.value)),l(e,t.right,i))}if(!(e.support.browser.msie&&e.support.browser.version<9)){var d=e.Class.extend({init:function(e,t,i,n){this.level=e,this.value=t,this.left=i,this.right=n}}),c=new function(){this.left=this,this.right=this,this.level=0},u=e.Class.extend({init:function(e,t,i){this.start=e,this.end=t,this.value=i},intersects:function(e){return e.start<=this.end&&e.end>=this.start}}),h=e.Class.extend({init:function(){this.root=c},insert:function(e){this.root=r(this.root,e)},remove:function(e){this.root=s(this.root,e)},findrange:function(e){for(var t=this.root;t!=c;)if(e<t.value.start)t=t.left;else{if(!(e>t.value.end))return t.value;t=t.right}return null},values:function(){var e=[];return o(this.root,e),e},intersecting:function(e,t){var i=[];return a(this.root,new u(e,t),i),i},map:function(e){var t=new h;return l(t,this.root,e),t},clone:function(){return this.map(t)},first:function(){for(var e=this.root;e.left!=c;)e=e.left;return e},last:function(){for(var e=this.root;e.right!=c;)e=e.right;return e}}),f=e.Class.extend({init:function(e,t,i){void 0===t?this.tree=e:(this.tree=new h,this.tree.insert(new u(e,t,i)))},values:function(){return this.tree.values()},map:function(e){return new f(this.tree.map(e))},intersecting:function(e,t){return this.tree.intersecting(e,t)},first:function(){return this.tree.first().value},last:function(){return this.tree.last().value},insert:function(e,t,i){return this.tree.insert(new u(e,t,i))},value:function(e,t,i){if(void 0===i)return void 0===t&&(t=e),this.intersecting(e,t)[0].value;var n=this.tree.intersecting(e-1,t+1);if(n.length){var r=n[0],s=n[n.length-1];r.end<e&&(r.value===i?e=r.start:n.shift()),s.start>t&&(s.value===i?t=s.end:n.pop());for(var o=0,a=n.length;o<a;o++){var l=n[o],d=l.value,c=l.start,u=l.end;this.tree.remove(l),c<e&&(d!==i?this.insert(c,e-1,d):e=c),u>t&&(d!==i?this.insert(t+1,u,d):t=u)}}this.insert(e,t,i)},expandedValues:function(e,t){for(var i=this.intersecting(e,t),n=[],r=0,s=e;s<=t;s++)i[r].end<s&&r++,n.push({index:s-e,value:i[r].value});return n},sortedIndices:function(e,t,i,n){var r=this.expandedValues(e,t),s=function(e,t){return e.value===t.value?e.index-t.index:i(e.value,t.value)};return n&&(s=function(e,t){var r=n[e.index],s=n[t.index];return r.value===s.value?i(e.value,t.value):e.index-t.index}),r.sort(s),r},sort:function(e,t,i){if(1!==this.intersecting(e,t).length)for(var n=this.expandedValues(e,t),r=0,s=i.length;r<s;r++)this.value(r+e,r+e,n[i[r].index].value)},copy:function(e,t,i){for(var n,r=this.intersecting(e,t),s=i,o=0,a=r.length;o<a;o++){var l=r[o].start;l<e&&(l=e);var d=r[o].end;d>t&&(d=t),n=s+(d-l),this.value(s,n,r[o].value),s=++n}},iterator:function(e,t){return new p(e,t,this.intersecting(e,t))},getState:function(){return this.tree.clone()},setState:function(e){this.tree=e}}),p=e.Class.extend({init:function(e,t,i){this.start=e,this.end=t,this.index=0,this.ranges=i},unique:function(){return this.ranges.map(function(e){return e.value})},at:function(e){for(;this.ranges[this.index].end<e;)this.index++;return this.ranges[this.index].value},forEach:function(e){for(var t=this.start;t<=this.end;t++)e(this.at(t),t);this.index=0}}),m=f.extend({init:function(e,t,i){this.tree=new h,this.range=new u(e,t,i)},intersecting:function(e,t){var i,n=this.tree.intersecting(e,t),r=[];if(!n.length)return[this.range];for(var s=0,o=n.length;s<o;s++)(i=n[s]).start>e&&r.push(new u(e,i.start-1,this.range.value)),r.push(i),e=i.end+1;return i.end<t&&r.push(new u(i.end+1,t,this.range.value)),r},insert:function(e,t,i){i!==this.range.value&&this.tree.insert(new u(e,t,i))},lastRangeStart:function(){var e=this.tree.root;if(e===c)return this.range.start;for(;e.right!==c;)e=e.right;return e.value.end+1}});e.spreadsheet.RangeTree=h,e.spreadsheet.RangeList=f,e.spreadsheet.SparseRangeList=m,e.spreadsheet.ValueRange=u}}(kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/propertybag",["kendo.core"],function(){!function(e){if(!(e.support.browser.msie&&e.support.browser.version<9)){var t=e.jQuery,i=e.Class.extend({init:function(e){this.list=e},get:function(e){return this.parse(this.list.value(e,e))},set:function(e,t,i){void 0===i&&(i=t,t=e),this.list.value(e,t,i)},parse:function(e){return e},copy:function(e,t,i){this.list.copy(e,t,i)},iterator:function(e,t){return this.list.iterator(e,t)}}),n=i.extend({set:function(e,t,i){this.list.value(e,t,JSON.stringify(i))},parse:function(e){return JSON.parse(e)}}),r=i.extend({init:function(e,t,n){i.prototype.init.call(this,e),this.validations=n,this.formats=t},set:function(t,i,n){n instanceof Date&&(n=e.spreadsheet.dateToNumber(n),this.formats.value(t,i,function(e){return e.replace(/M/g,"m").replace(/'/g,'"').replace(/tt/,"am/pm")}(e.culture().calendar.patterns.d))),this.list.value(t,i,n)}});e.spreadsheet.PropertyBag=e.Class.extend({specs:[{property:r,name:"value",value:null,sortable:!0,serializable:!0,depends:"format"},{property:i,name:"format",value:null,sortable:!0,serializable:!0},{property:i,name:"formula",value:null,sortable:!0,serializable:!0},{property:i,name:"background",value:null,sortable:!0,serializable:!0},{property:n,name:"borderBottom",value:null,sortable:!1,serializable:!0},{property:n,name:"borderRight",value:null,sortable:!1,serializable:!0},{property:n,name:"borderLeft",value:null,sortable:!1,serializable:!0},{property:n,name:"borderTop",value:null,sortable:!1,serializable:!0},{property:i,name:"color",value:null,sortable:!0,serializable:!0},{property:i,name:"fontFamily",value:null,sortable:!0,serializable:!0},{property:i,name:"underline",value:null,sortable:!0,serializable:!0},{property:i,name:"fontSize",value:null,sortable:!0,serializable:!0},{property:i,name:"italic",value:null,sortable:!0,serializable:!0},{property:i,name:"bold",value:null,sortable:!0,serializable:!0},{property:i,name:"textAlign",value:null,sortable:!0,serializable:!0},{property:i,name:"verticalAlign",value:null,sortable:!0,serializable:!0},{property:i,name:"wrap",value:null,sortable:!0,serializable:!0},{property:i,name:"validation",value:null,sortable:!1,serializable:!0},{property:i,name:"enable",value:null,sortable:!1,serializable:!0},{property:i,name:"link",value:null,sortable:!1,serializable:!0}],init:function(t){this.properties={},this.lists={},this.specs.forEach(function(i){this.lists[i.name]=new e.spreadsheet.SparseRangeList(0,t,i.value)},this),this.specs.forEach(function(e){this.properties[e.name]=new e.property(this.lists[e.name],this.lists[e.depends])},this)},getState:function(){var e={};return this.specs.forEach(function(t){e[t.name]=this.lists[t.name].getState()},this),e},setState:function(e){this.specs.forEach(function(t){this.lists[t.name].setState(e[t.name])},this)},get:function(e,t){return void 0===t?this.lists[e]:this.properties[e].get(t)},set:function(e,t,i,n){this.properties[e].set(t,i,n)},fromJSON:function(e,t){for(var i=0;i<this.specs.length;i++){var n=this.specs[i];n.serializable&&void 0!==t[n.name]&&this.set(n.name,e,e,t[n.name],!1)}},copy:function(e,t,i){this.specs.forEach(function(n){this.properties[n.name].copy(e,t,i)},this)},iterator:function(e,t,i){return this.properties[e].iterator(t,i)},sortable:function(){return this.specs.filter(function(e){return e.sortable}).map(function(e){return this.lists[e.name]},this)},iterators:function(e,t){var i=this.specs.filter(function(e){return e.serializable});return i.map(function(i){var n=this.iterator(i.name,e,t);return{name:i.name,value:i.value,at:function(e){return i.property.fn.parse(n.at(e))}}},this)},forEach:function(e,t,i){for(var n=this.iterators(e,t),r=e;r<=t;r++){for(var s={},o=0;o<n.length;o++){var a=n[o],l=a.at(r);l!==a.value&&(s[a.name]=l)}i(s)}},forEachProperty:function(e){for(var t in this.properties)e(this.properties[t])}}),e.spreadsheet.ALL_PROPERTIES=t.map(e.spreadsheet.PropertyBag.prototype.specs,function(e){return e.name})}}(window.kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/references",["kendo.core"],function(){"use strict";function e(t){var i=Math.floor(t/26)-1;return(i>=0?e(i):"")+String.fromCharCode(65+t%26)}function t(e){return/^[a-z0-9_]*$/i.test(e)?e:"'"+e.replace(/\x27/g,"\\'")+"'"}function i(i,n,r,s){var o="";return++n,isFinite(n)?null==s||2&s||(n="$"+n):n="",isFinite(r)?(o=e(r),null==s||1&s||(o="$"+o)):r="",i?t(i)+"!"+o+n:o+n}if(kendo.support.browser.msie&&kendo.support.browser.version<9)return;var n=kendo.spreadsheet;var r=kendo.Class.extend({type:"ref",hasSheet:function(){return this._hasSheet},simplify:function(){return this},setSheet:function(e,t){return this.sheet=e,null!=t&&(this._hasSheet=t),this},absolute:function(){return this},relative:function(){return this},adjust:function(){return this},toString:function(){return this.relative(0,0,3,3).print(0,0)},forEach:function(e,t){e.call(t,this)},map:function(e,t){return e.call(t,this)},intersects:function(e){return this.intersect(e)!==s},isCell:function(){return!1},toRow:function(){return this},toColumn:function(){return this},first:function(){return this},lastRange:function(){return this},size:function(){return 1},rangeAt:function(){return this},nextRangeIndex:function(){return 0},previousRangeIndex:function(){return 0},eq:function(e){var t=this,i=e;if(t===s||i===s)return t===i;if((i instanceof a||i instanceof l&&!(t instanceof a))&&(t=e,i=this),t instanceof a)return(i=i.simplify())instanceof a&&t.row==i.row&&t.col==i.col&&t.sheet==i.sheet;if(t instanceof l){if(i instanceof l)return i.topLeft.eq(t.topLeft)&&i.bottomRight.eq(t.bottomRight);if(i instanceof d)return i.single()&&t.eq(i.refs[0])}else if(t instanceof d&&i instanceof d){var n=t.refs,r=i.refs;if(n.length!=r.length)return!1;for(var o=0,c=n.length;o<c;o++)if(!n[o].eq(r[o]))return!1;return!0}return t===i},concat:function(e){return new d([this,e])},replaceAt:function(e,t){return t},forEachColumnIndex:function(e){this.forEachAxisIndex("col",e)},forEachRowIndex:function(e){this.forEachAxisIndex("row",e)},forEachAxisIndex:function(e,t){var i=[],n="row"===e?"forEachRow":"forEachColumn";this[n](function(t){var n=t.first()[e];-1===i.indexOf(n)&&i.push(n)}),i.sort(function(e,t){return e>t?1:e<t?-1:0}).forEach(t)},valid:function(){return!1}});r.display=i;var s=new(r.extend({init:function(){},print:function(){return"#NULL!"},clone:function(){return this},eq:function(e){return e===this},forEach:function(){}})),o=r.extend({ref:"name",init:function(e){this.name=e},print:function(){var e=t(this.name);return this.hasSheet()&&(e=t(this.sheet)+"!"+e),e}}),a=r.extend({ref:"cell",init:function(e,t,i){this.row=e,this.col=t,this.rel=i||0},clone:function(){return new a(this.row,this.col,this.rel).setSheet(this.sheet,this.hasSheet())},intersect:function(e){return e instanceof a?this.eq(e)?this:s:e.intersect(this)},print:function(e,n){var r,s=this.col,o=this.row,a=this.rel;if(null==e){var l=this.hasSheet()?t(this.sheet)+"!":"";return s=isFinite(s)?1&a?"C["+s+"]":"C"+(s+1):"",o=isFinite(o)?2&a?"R["+o+"]":"R"+(o+1):"",l+o+s}return(r=this.absolute(e,n)).valid()?i(this._hasSheet&&this.sheet,r.row,r.col,a):"#REF!"},absolute:function(e,t){var i=this.clone();return!1&i.rel?i:(1&i.rel&&(i.col+=t),2&i.rel&&(i.row+=e),i.rel=0,i)},toRangeRef:function(){return new l(this,this)},relative:function(e,t,i){null==i&&(i=this.rel);var n=2&i?this.row-e:this.row,r=1&i?this.col-t:this.col;return new a(n,r,i).setSheet(this.sheet,this.hasSheet())},height:function(){return 1},width:function(){return 1},toString:function(){return i(null,this.row,this.col,3)},isCell:function(){return!0},leftColumn:function(){return this},rightColumn:function(){return this},topRow:function(){return this},bottomRow:function(){return this},forEachRow:function(e){e(this.toRangeRef())},forEachColumn:function(e){e(this.toRangeRef())},adjust:function(e,t,i,n,r,o,a){var l=this.absolute(e,t);if(r){if(l.row>=o){if(a<0&&l.row<o-a)return s;l.row+=a}}else if(l.col>=o){if(a<0&&l.col<o-a)return s;l.col+=a}return null!=i&&null!=n&&(l=l.relative(i,n,this.rel)),l},valid:function(){if(this.rel)throw new Error("valid() called on relative reference");var e=this.col,t=this.row;return!(isFinite(e)&&e<0||isFinite(t)&&t<0)}}),l=r.extend({ref:"range",init:function(e,t){e._hasSheet&&t._hasSheet&&e.sheet.toLowerCase()!=t.sheet.toLowerCase()&&(this.endSheet=t.sheet),this.topLeft=new a(e.row,e.col,e.rel),this.bottomRight=new a(t.row,t.col,t.rel),this.normalize()},clone:function(){return new l(this.topLeft.clone(),this.bottomRight.clone()).setSheet(this.sheet,this.hasSheet())},_containsRange:function(e){return this._containsCell(e.topLeft)&&this._containsCell(e.bottomRight)},_containsCell:function(e){return e.sheet==this.sheet&&e.row>=this.topLeft.row&&e.col>=this.topLeft.col&&e.row<=this.bottomRight.row&&e.col<=this.bottomRight.col},contains:function(e){if(e instanceof Array){var t=this;return e.some(function(e){return t.contains(e)})}return e instanceof a?this._containsCell(e):e instanceof l&&this._containsRange(e)},_intersectRange:function(e){if(this.sheet!=e.sheet)return s;var t=this.topLeft.col,i=this.topLeft.row,n=this.bottomRight.col,r=this.bottomRight.row,o=e.topLeft.col,d=e.topLeft.row,c=e.bottomRight.col,u=e.bottomRight.row;return t<=c&&o<=n&&i<=u&&d<=r?new l(new a(Math.max(i,d),Math.max(t,o)),new a(Math.min(r,u),Math.min(n,c))).setSheet(this.sheet,this.hasSheet()):s},intersect:function(e){if(e===s)return e;if(e instanceof a)return this._containsCell(e)?e:s;if(e instanceof l)return this._intersectRange(e).simplify();if(e instanceof d)return e.intersect(this);throw new Error("Unknown reference")},simplify:function(){return this.isCell()?new a(this.topLeft.row,this.topLeft.col,this.topLeft.rel).setSheet(this.sheet,this.hasSheet()):this},normalize:function(){var e,t=this.topLeft,i=this.bottomRight,n=t.row,r=t.col,s=i.row,o=i.col,l=2&t.rel,d=1&t.rel,c=2&i.rel,u=1&i.rel,h=!1;return n>s&&(h=!0,e=n,n=s,s=e,e=l,l=c,c=e),r>o&&(h=!0,e=r,r=o,o=e,e=d,d=u,u=e),h&&(this.topLeft=new a(n,r,d|l),this.bottomRight=new a(s,o,u|c)),this},print:function(e,i){var n=this.absolute(e,i);if(n.valid()){var r=this.topLeft.print(e,i)+":"+this.bottomRight.print(e,i);return this.hasSheet()&&(r=t(this.sheet)+(this.endSheet?":"+t(this.endSheet):"")+"!"+r),r}return"#REF!"},absolute:function(e,t){return new l(this.topLeft.absolute(e,t),this.bottomRight.absolute(e,t)).setSheet(this.sheet,this.hasSheet())},relative:function(e,t,i,n){return null==n&&(n=i),new l(this.topLeft.relative(e,t,i),this.bottomRight.relative(e,t,n)).setSheet(this.sheet,this.hasSheet())},height:function(){if(this.topLeft.rel!=this.bottomRight.rel)throw new Error("Mixed relative/absolute references");return this.bottomRight.row-this.topLeft.row+1},width:function(){if(this.topLeft.rel!=this.bottomRight.rel)throw new Error("Mixed relative/absolute references");return this.bottomRight.col-this.topLeft.col+1},collapse:function(){return this.topLeft.toRangeRef()},leftColumn:function(){return new l(this.topLeft,new a(this.bottomRight.row,this.topLeft.col))},rightColumn:function(){return new l(new a(this.topLeft.row,this.bottomRight.col),this.bottomRight)},topRow:function(){return new l(this.topLeft,new a(this.topLeft.row,this.bottomRight.col))},bottomRow:function(){return new l(new a(this.bottomRight.row,this.topLeft.col),this.bottomRight)},toRangeRef:function(){return this},toRow:function(e){return new l(new a(this.topLeft.row+e,this.topLeft.col),new a(this.topLeft.row+e,this.bottomRight.col))},toColumn:function(e){return new l(new a(this.topLeft.row,this.topLeft.col+e),new a(this.bottomRight.row,this.topLeft.col+e))},forEachRow:function(e){for(var t=this.topLeft.row,i=this.bottomRight.row,n=this.topLeft.col,r=this.bottomRight.col,s=t;s<=i;s++)e(new l(new a(s,n),new a(s,r)))},forEachColumn:function(e){for(var t=this.topLeft.row,i=this.bottomRight.row,n=this.topLeft.col,r=this.bottomRight.col,s=n;s<=r;s++)e(new l(new a(t,s),new a(i,s)))},intersecting:function(e){return e.filter(function(e){return e.toRangeRef().intersects(this)},this)},union:function(e,t){var i=this.intersecting(e),n=this.topLeft.row,r=this.topLeft.col,s=this.bottomRight.row,o=this.bottomRight.col,d=!1;i.forEach(function(e){(e=e.toRangeRef()).topLeft.row<n&&(d=!0,n=e.topLeft.row),e.topLeft.col<r&&(d=!0,r=e.topLeft.col),e.bottomRight.row>s&&(d=!0,s=e.bottomRight.row),e.bottomRight.col>o&&(d=!0,o=e.bottomRight.col),t&&t(e)});var c=new l(new a(n,r),new a(s,o));return d?c.union(e,t):c},resize:function(e){function t(e){return e||0}var i=Math.max.bind(Math,0),n=this.topLeft.row+t(e.top),r=this.topLeft.col+t(e.left),o=this.bottomRight.row+t(e.bottom),d=this.bottomRight.col+t(e.right);return r<0&&d<0||n<0&&o<0?s:n<=o&&r<=d?new l(new a(i(n),i(r)),new a(i(o),i(d))):s},move:function(e,t){return new l(new a(this.topLeft.row+e,this.topLeft.col+t),new a(this.bottomRight.row+e,this.bottomRight.col+t))},first:function(){return this.topLeft},isCell:function(){return!this.endSheet&&this.topLeft.eq(this.bottomRight)},toString:function(){return this.topLeft+":"+this.bottomRight},adjust:function(e,t,i,n,r,o,a){var d=this.topLeft.adjust(e,t,i,n,r,o,a),c=this.bottomRight.adjust(e,t,i,n,r,o,a);return d===s&&c===s?s:(d===s?(d=this.topLeft.absolute(e,t),r?d.row=o:d.col=o,null!=i&&null!=n&&(d=d.relative(i,n,this.topLeft.rel))):c===s&&(c=this.bottomRight.absolute(e,t),r?c.row=o-1:c.col=o-1,null!=i&&null!=n&&(c=c.relative(i,n,this.bottomRight.rel))),new l(d,c).setSheet(this.sheet,this.hasSheet()).simplify())},valid:function(){return this.topLeft.valid()&&this.bottomRight.valid()}}),d=r.extend({init:function(e){this.refs=e,this.length=e.length},clone:function(){return new d(this.refs.slice())},intersect:function(e){for(var t=[],i=0;i<this.length;++i){var n=e.intersect(this.refs[i]);n!==s&&t.push(n)}return t.length>0?new d(t).simplify():s},simplify:function(){var e=new d(this.refs.reduce(function(e,t){return(t=t.simplify())!==s&&e.push(t),e},[]));return e.empty()?s:e.single()?e.refs[0]:e},absolute:function(e,t){return new d(this.refs.map(function(i){return i.absolute(e,t)}))},forEach:function(e,t){this.refs.forEach(e,t)},toRangeRef:function(){return this.refs[0].toRangeRef()},contains:function(e){return this.refs.some(function(t){return t.contains(e)})},map:function(e,t){return new d(this.refs.map(e,t))},first:function(){return this.refs[0].first()},lastRange:function(){return this.refs[this.length-1]},size:function(){return this.length},single:function(){return 1==this.length},empty:function(){return 0===this.length},isCell:function(){return this.single()&&this.refs[0].isCell()},rangeAt:function(e){return this.refs[e]},nextRangeIndex:function(e){return e===this.length-1?0:e+1},previousRangeIndex:function(e){return 0===e?this.length-1:e-1},concat:function(e){return new d(this.refs.concat([e]))},print:function(e,t){return this.refs.map(function(i){return i.print(e,t)}).join(",")},replaceAt:function(e,t){var i=this.refs.slice();return i.splice(e,1,t),new d(i)},leftColumn:function(){return this.map(function(e){return e.leftColumn()})},rightColumn:function(){return this.map(function(e){return e.rightColumn()})},topRow:function(){return this.map(function(e){return e.topRow()})},bottomRow:function(){return this.map(function(e){return e.bottomRow()})},forEachRow:function(e){this.forEach(function(t){t.forEachRow(e)})},forEachColumn:function(e){this.forEach(function(t){t.forEachColumn(e)})},adjust:function(e,t,i,n,r,s,o){return this.map(function(a){return a.adjust(e,t,i,n,r,s,o)}).simplify()},toString:function(){return this.refs.map(function(e){return e.toString()}).join(", ")},valid:function(){for(var e=this.refs.length;--e>=0;)if(this.refs[e].valid())return!1;return!0}});n.NULLREF=s,n.SHEETREF=new l(new a(0,0),new a(1/0,1/0)),n.FIRSTREF=new a(0,0),n.Ref=r,n.NameRef=o,n.CellRef=a,n.RangeRef=l,n.UnionRef=d,n.SHEETREF.print=function(){return"#SHEET"}}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/autofillcalculator",["kendo.core"],function(){!function(e){if(!(e.support.browser.msie&&e.support.browser.version<9)){var t=e.spreadsheet.RangeRef,i=e.spreadsheet.CellRef,n=e.Class.extend({init:function(e){this._grid=e},rectIsVertical:function(e,t,i,n){var r=this._grid.rectangle(e.toRangeRef()),s=this._grid.rectangle(t.toRangeRef());return Math.abs(s[n]-r[n])>Math.abs(r[i]-s[i])},autoFillDest:function(e,n){var r,s,o,a,l=e.topLeft,d=e.bottomRight,c=n.row>=l.row,u=n.col>=l.col;if(4===(r=c?u?4:3:u?2:1))s=l,o=d,(n.row>o.row||n.col>o.col)&&(n=new i(Math.max(n.row,o.row),Math.max(n.col,o.col))),a=this.rectIsVertical(o,n,"right","bottom")?new i(n.row,o.col):new i(o.row,n.col);else if(3===r){var h=new i(l.col,d.row);n.row>d.row&&this.rectIsVertical(h,n,"left","bottom")?(s=l,a=new i(n.row,d.col)):(s=d,a=new i(l.row,n.col))}else if(2===r){var f=new i(l.row,d.col);n.col>d.col&&!this.rectIsVertical(f,n,"right","top")?(s=l,a=new i(d.row,n.col)):(s=d,a=new i(n.row,l.col))}else s=d,a=this.rectIsVertical(l,n,"left","top")?new i(n.row,l.col):new i(l.row,n.col);return this._grid.normalize(new t(s,a))}});e.spreadsheet.AutoFillCalculator=n}}(kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/navigator",["kendo.core","spreadsheet/autofillcalculator"],function(){!function(e){if(!(e.support.browser.msie&&e.support.browser.version<9)){var t=e.spreadsheet.RangeRef,i=e.spreadsheet.CellRef,n=e.Class.extend({init:function(e,t,i,n){this.rangeGetter=i,this.prevLeft=function(i){var r=n(this.range(i)),s=this.range(t.prevVisible(r.topLeft[e]));return n(s).topLeft[e]},this.nextRight=function(i){var r=n(this.range(i)),s=this.range(t.nextVisible(r.bottomRight[e]));return n(s).bottomRight[e]},this.nextLeft=function(i){var r=n(this.range(i));return t.nextVisible(r.bottomRight[e])},this.prevRight=function(i){var r=n(this.range(i));return t.prevVisible(r.topLeft[e])}},boundary:function(e,t){this.top=e,this.bottom=t},range:function(e){return this.rangeGetter(e,this.top,this.bottom)}}),r=e.Class.extend({init:function(t){this._sheet=t,this.columns=this._sheet._grid._columns,this.autoFillCalculator=new e.spreadsheet.AutoFillCalculator(t._grid),this.colEdge=new n("col",this._sheet._grid._columns,this.columnRange.bind(this),this.union.bind(this)),this.rowEdge=new n("row",this._sheet._grid._rows,this.rowRange.bind(this),this.union.bind(this))},height:function(e){this._viewPortHeight=e},union:function(e){return this._sheet.unionWithMerged(e)},columnRange:function(e,t,i){return this._sheet._ref(t,e,i-t,1)},rowRange:function(e,t,i){return this._sheet._ref(e,t,1,i-t)},selectionIncludesMergedCells:function(){return this._sheet.select().contains(this._sheet._mergedCells)},setSelectionValue:function(e){var t=this._sheet.selection();setTimeout(function(){t.value(e())})},selectAll:function(){this._sheet.select(this._sheet._sheetRef)},select:function(e,t,i){e=this.refForMode(e,t),i&&(e=this._sheet.select().concat(e)),this._sheet.select(e)},refForMode:function(e,t){var i=this._sheet._grid;switch(t){case"range":e=i.normalize(e);break;case"row":e=i.rowRef(e.row);break;case"column":e=i.colRef(e.col);break;case"sheet":e=this._sheet._sheetRef}return e},startSelection:function(e,t,i){"autofill"==t?this._sheet.startAutoFill():(this._sheet.startSelection(),this.select(e,t,i))},completeSelection:function(){this._sheet.completeSelection()},selectForContextMenu:function(e,t){var i=this._sheet;i.select().contains(this.refForMode(e,t))||this.select(e,t)},modifySelection:function(e){var i,n=this.determineDirection(e),r=this._sheet,s=this._viewPortHeight,o=r._grid._rows,a=r._grid._columns,l=r.currentOriginalSelectionRange(),d=r.select().toRangeRef(),c=r.activeCell(),u=l.topLeft.clone(),h=l.bottomRight.clone();switch(this.colEdge.boundary(d.topLeft.row,d.bottomRight.row),this.rowEdge.boundary(d.topLeft.col,d.bottomRight.col),n){case"expand-left":u.col=this.colEdge.prevLeft(u.col),i=u;break;case"shrink-right":u.col=this.colEdge.nextLeft(u.col),i=u;break;case"expand-right":h.col=this.colEdge.nextRight(h.col),i=h;break;case"shrink-left":h.col=this.colEdge.prevRight(h.col),i=h;break;case"expand-up":u.row=this.rowEdge.prevLeft(u.row),i=u;break;case"shrink-down":u.row=this.rowEdge.nextLeft(u.row),i=u;break;case"expand-down":h.row=this.rowEdge.nextRight(h.row),i=h;break;case"shrink-up":h.row=this.rowEdge.prevRight(h.row),i=h;break;case"expand-page-up":u.row=o.prevPage(u.row,s);break;case"shrink-page-up":h.row=o.prevPage(h.row,s);break;case"expand-page-down":h.row=o.nextPage(h.row,s);break;case"shrink-page-down":u.row=o.nextPage(u.row,s);break;case"first-col":u.col=a.firstVisible(),h.col=c.bottomRight.col,i=u;break;case"last-col":h.col=a.lastVisible(),u.col=c.topLeft.col,i=h;break;case"first-row":u.row=o.firstVisible(),h.row=c.bottomRight.row,i=u;break;case"last-row":h.row=o.lastVisible(),u.row=c.topLeft.row,i=h;break;case"last":h.row=o.lastVisible(),h.col=a.lastVisible(),u=c.topLeft,i=h;break;case"first":u.row=o.firstVisible(),u.col=a.firstVisible(),h=c.bottomRight,i=u}var f=new t(u,h);this.union(f).intersects(c)?(i&&r.focus(i),this.updateCurrentSelectionRange(f)):this.modifySelection(n.replace("shrink","expand"))},moveActiveCell:function(e){var t=this._sheet,n=t.activeCell(),r=n.topLeft,s=n.bottomRight,o=t.originalActiveCell(),a=t._grid._rows,l=t._grid._columns,d=o.row,c=o.col;switch(e){case"left":c=l.prevVisible(r.col);break;case"up":d=a.prevVisible(r.row);break;case"right":c=l.nextVisible(s.col);break;case"down":d=a.nextVisible(s.row);break;case"first-col":c=l.firstVisible();break;case"last-col":c=l.lastVisible();break;case"first-row":d=a.firstVisible();break;case"last-row":d=a.lastVisible();break;case"last":d=a.lastVisible(),c=l.lastVisible();break;case"first":d=a.firstVisible(),c=l.firstVisible();break;case"next-page":d=a.nextPage(s.row,this._viewPortHeight);break;case"prev-page":d=a.prevPage(s.row,this._viewPortHeight)}t.select(new i(d,c))},navigateInSelection:function(e){for(var t=this._sheet,n=t.activeCell(),r=n.topLeft,s=t.originalActiveCell(),o=t._grid._rows,a=t._grid._columns,l=s.row,d=s.col,c=t.currentNavigationRange(),u=c.topLeft,h=c.bottomRight,f=!1,p=r.col,m=r.row;!f;){var g=new i(l,d);switch(e){case"next":h.eq(g)?(c=t.nextNavigationRange(),l=c.topLeft.row,d=c.topLeft.col):(d=a.nextVisible(p,!0))>h.col&&(d=u.col,l=o.nextVisible(l,!0));break;case"previous":u.eq(g)?(c=t.previousNavigationRange(),l=c.bottomRight.row,d=c.bottomRight.col):(d=a.prevVisible(p,!0))<u.col&&(d=h.col,l=o.prevVisible(l,!0));break;case"lower":h.eq(g)?(c=t.nextNavigationRange(),l=c.topLeft.row,d=c.topLeft.col):(l=o.nextVisible(m,!0))>h.row&&(l=u.row,d=a.nextVisible(d,!0));break;case"upper":u.eq(g)?(c=t.previousNavigationRange(),l=c.bottomRight.row,d=c.bottomRight.col):(l=o.prevVisible(m,!0))<u.row&&(l=h.row,d=a.prevVisible(d,!0));break;default:throw new Error("Unknown entry navigation: "+e)}f=!this.shouldSkip(l,d),p=d,m=l}t.singleCellSelection()?t.select(new i(l,d)):t.activeCell(new i(l,d))},extendSelection:function(e,i){var n=this._sheet,r=n._grid;if("autofill"!==i){"range"===i?e=r.normalize(e):"row"===i?e=r.rowRef(e.row).bottomRight:"column"===i&&(e=r.colRef(e.col).bottomRight);var s=n.originalActiveCell().toRangeRef();this.updateCurrentSelectionRange(new t(s.topLeft,e))}else this.resizeAutoFill(e)},shouldSkip:function(e,t){var n=new i(e,t),r=!1;return this._sheet.forEachMergedCell(function(e){e.intersects(n)&&!e.collapse().eq(n)&&(r=!0)}),r},resizeAutoFill:function(e){var t,i,n,r=this._sheet,s=r.select(),o=r._autoFillOrigin,a=this.autoFillCalculator.autoFillDest(s,e),l=this.punch(s,a);if(!l){var d=r.range(a)._previewFillFrom(r.range(o));if(d){i=d.direction;var c=d.props;0===i||1==i?(n=c[c.length-1],t=n[n.length-1].value):2===i?(n=c[0],t=n[n.length-1].value):3===i&&(n=c[c.length-1],t=n[0].value)}}r.updateAutoFill(a,l,t,i)},determineDirection:function(e){var t=this._sheet.currentSelectionRange(),i=this._sheet.activeCell(),n=i.topLeft.col==t.topLeft.col,r=i.bottomRight.col==t.bottomRight.col,s=i.topLeft.row==t.topLeft.row,o=i.bottomRight.row==t.bottomRight.row;switch(e){case"left":e=r?"expand-left":"shrink-left";break;case"right":e=n?"expand-right":"shrink-right";break;case"up":e=o?"expand-up":"shrink-up";break;case"down":e=s?"expand-down":"shrink-down";break;case"prev-page":e=o?"expand-page-up":"shrink-page-up";break;case"next-page":e=s?"expand-page-down":"shrink-page-down"}return e},updateCurrentSelectionRange:function(e){var t=this._sheet;t.select(t.originalSelect().replaceAt(t.selectionRangeIndex(),e),!1)},punch:function(e,n){var r;if(n.topLeft.eq(e.topLeft))if(n.bottomRight.row<e.bottomRight.row){var s=this.rowEdge.nextRight(n.bottomRight.row);r=new t(new i(s,e.topLeft.col),e.bottomRight)}else if(n.bottomRight.col<e.bottomRight.col){var o=this.colEdge.nextRight(n.bottomRight.col);r=new t(new i(e.topLeft.row,o),e.bottomRight)}return r}});e.spreadsheet.SheetNavigator=r}}(kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/axismanager",["kendo.core"],function(){!function(e){if(!(e.support.browser.msie&&e.support.browser.version<9)){var t=e.Class.extend({init:function(e){this._sheet=e},forEachSelectedColumn:function(e){var t=this._sheet;t.batch(function(){t.select().forEachColumnIndex(function(i,n){e(t,i,n)})},{layout:!0,recalc:!0})},forEachSelectedRow:function(e){var t=this._sheet;t.batch(function(){t.select().forEachRowIndex(function(i,n){e(t,i,n)})},{layout:!0,recalc:!0})},includesHiddenColumns:function(e){return this._sheet._grid._columns.includesHidden(e.topLeft.col,e.bottomRight.col)},includesHiddenRows:function(e){return this._sheet._grid._rows.includesHidden(e.topLeft.row,e.bottomRight.row)},selectionIncludesHiddenColumns:function(){return this.includesHiddenColumns(this._sheet.select())},selectionIncludesHiddenRows:function(){return this.includesHiddenRows(this._sheet.select())},deleteSelectedColumns:function(){this.forEachSelectedColumn(function(e,t,i){e.deleteColumn(t-i)})},deleteSelectedRows:function(){this.forEachSelectedRow(function(e,t,i){e.deleteRow(t-i)})},hideSelectedColumns:function(){this.forEachSelectedColumn(function(e,t){e.hideColumn(t)})},hideSelectedRows:function(){this.forEachSelectedRow(function(e,t){e.hideRow(t)})},unhideSelectedColumns:function(){this.forEachSelectedColumn(function(e,t){e.unhideColumn(t)})},unhideSelectedRows:function(){this.forEachSelectedRow(function(e,t){e.unhideRow(t)})},addColumnLeft:function(){this.forEachSelectedColumn(function(e,t,i){e.insertColumn(t-i)})},addColumnRight:function(){this.forEachSelectedColumn(function(e,t,i){e.insertColumn(t+(i+1))})},canAddRow:function(){var e=this._sheet.select().toRangeRef(),t=e.height();return this._sheet.canInsertRow(0,t)},addRowAbove:function(){this.forEachSelectedRow(function(e,t,i){e.insertRow(t-i)})},addRowBelow:function(){this.forEachSelectedRow(function(e,t,i){e.insertRow(t+(i+1))})}});e.spreadsheet.AxisManager=t}}(kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/clipboard",["kendo.core"],function(){!function(e){function t(){var e=new l(0,0,0);return{ref:e,mergedCells:[],data:[],foreign:!0,origRef:e.toRangeRef()}}function i(e,t,i,n){var r=e.data||(e.data=[]);r[t]||(r[t]=[]),r[t][i]=n;var s=e.origRef.bottomRight;s.row=Math.max(s.row,t),s.col=Math.max(s.col,i)}function n(e){return e.origRef}function r(e){return e.replace(/^-(?:ms|moz|webkit)-/,"")}function s(e){var t=window.getComputedStyle(e[0]),i=e.text(),n=function(e){var t={};return["borderBottom","borderRight","borderLeft","borderTop"].forEach(function(i){t[i]="none"==e[i+"Style"]?null:{size:1,color:e[i+"Color"]}}),t}(t),s={value:""===i?null:i,borderBottom:n.borderBottom,borderRight:n.borderRight,borderLeft:n.borderLeft,borderTop:n.borderTop,fontSize:parseInt(t["font-size"],10)};return"rgb(0, 0, 0)"!==t["background-color"]&&"rgba(0, 0, 0, 0)"!==t["background-color"]&&(s.background=t["background-color"]),"rgb(0, 0, 0)"!==t.color&&"rgba(0, 0, 0, 0)"!==t.color&&(s.color=t.color),"underline"==t["text-decoration"]&&(s.underline=!0),"italic"==t["font-style"]&&(s.italic=!0),"bold"==t["font-weight"]&&(s.bold=!0),"right"!==r(t["text-align"])&&(s.textAlign=r(t["text-align"])),"middle"!==t["vertical-align"]&&(s.verticalAlign=t["vertical-align"]),"normal"!==t["word-wrap"]&&(s.wrap=!0),s}function o(e){var n=t();if(-1===e.indexOf("\t")&&-1==e.indexOf("\n"))i(n,0,0,{value:e});else for(var r=e.split("\n"),s=0;s<r.length;s++)for(var o=r[s].split("\t"),a=0;a<o.length;a++)i(n,s,a,{value:o[a]});return n}if(!(e.support.browser.msie&&e.support.browser.version<9)){var a=e.jQuery,l=e.spreadsheet.CellRef,d=e.Class.extend({init:function(t){this.workbook=t,this.origin=e.spreadsheet.NULLREF,this.iframe=document.createElement("iframe"),this.iframe.className="k-spreadsheet-clipboard-paste",this.menuInvoked=!0,this._external={},this._uid=e.guid(),document.body.appendChild(this.iframe)},canCopy:function(){var t={canCopy:!0},i=this.workbook.activeSheet().select();return i===e.spreadsheet.NULLREF&&(t.canCopy=!1),i instanceof e.spreadsheet.UnionRef&&(t.canCopy=!1,t.multiSelection=!0),this.menuInvoked&&(t.canCopy=!1,t.menuInvoked=!0),t},canPaste:function(){var t=this.workbook.activeSheet(),i=this.pasteRef(),n={canPaste:!0};if(i===e.spreadsheet.NULLREF){var r=this._external.hasOwnProperty("html")||this._external.hasOwnProperty("plain");return n.pasteOnMerged=this.intersectsMerged(),n.canPaste=!n.pasteOnMerged&&r,n}return i.eq(t.unionWithMerged(i))||(n.canPaste=!1,n.pasteOnMerged=!0),this.menuInvoked&&(n.canPaste=!1,n.menuInvoked=!0),(i.bottomRight.row>=t._rows._count||i.bottomRight.col>=t._columns._count)&&(n.canPaste=!1,n.overflow=!0),n},intersectsMerged:function(){var e=this.workbook.activeSheet(),t=this.parse(this._external);this.origin=n(t);var i=this.pasteRef();return!i.eq(e.unionWithMerged(i))},copy:function(){var e=this.workbook.activeSheet();this.origin=e.select(),this.contents=e.selection().getState()},cut:function(){var e=this.workbook.activeSheet();this.copy(),e.range(e.select()).clear()},pasteRef:function(){var e=this.workbook.activeSheet(),t=e.activeCell().first(),i=this.origin.first(),n=i.row-t.row,r=i.col-t.col;return this.origin.relative(n,r,3)},destroy:function(){document.body.removeChild(this.iframe)},paste:function(){var e={},t=this.workbook.activeSheet();this._isInternal()?e=this.contents:(e=this.parse(this._external),this.origin=n(e),t.range(this.pasteRef()).clear());var i=this.pasteRef();t.range(i).setState(e,!0),t.triggerChange({recalc:!0,ref:i})},external:function(e){if(!e.html&&!e.plain)return this._external;this._external=e},parse:function(e){var n=t();if(e.html){var r=this.iframe.contentWindow.document;r.open(),r.write(e.html),r.close();var l=a(r).find("table:first");if(l.length)n=function(e){var n=t();return e.find("tr").each(function(t,i){a(i).find("td").each(function(n,r){var s,o=parseInt(a(r).attr("rowspan"),10)-1||0,l=parseInt(a(r).attr("colspan"),10)-1||0,d="<td/>";if(o)for(var c=t+o,u=t;u<=c;u++){var h=e.find("tr").eq(u);if(u>t)if(d="<td class='rowspan'></td>",0===n)h.find("td").eq(n).after(d);else{var f=Math.min(h.find("td").length,n);h.find("td").eq(f-1).after(d)}if(l)for(s=n;s<l+n;s++)d="<td class='rowspan colspan'></td>",h.find("td").eq(s).after(d)}else if(l)for(s=n;s<l+n;s++)d="<td class='colspan'></td>",a(i).find("td").eq(s).after(d)})}),e.find("tr").each(function(e,t){a(t).find("td").each(function(t,r){var o=parseInt(a(r).attr("rowspan"),10)-1||0,l=parseInt(a(r).attr("colspan"),10)-1||0;if(i(n,e,t,s(a(r))),o||l){var d=String.fromCharCode(65+t),c=String.fromCharCode(65+t+l),u=d+(e+1)+":"+c+(e+1+o);n.mergedCells.push(u)}})}),n}(l.find("tbody:first"));else if(e.plain)n=o(e.plain);else{var d=a(r.body).find(":not(style)");i(n,0,0,s(d.text()))}}else n=o(e.plain);return n},_isInternal:function(){if(void 0===this._external.html)return!0;var e=!!a("<div/>").html(this._external.html).find("table.kendo-clipboard-"+this._uid).length,t=!!a("<div/>").html(this._external.plain).find("table.kendo-clipboard-"+this._uid).length;return!(!e&&!t)}});e.spreadsheet.Clipboard=d}}(kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/range",["kendo.core","util/text-metrics"],function(){!function(e){function t(e,i,n){for(;e<=i&&n(e);)e++;if(e>i)return[];for(var r=e+1;r<=i;++r)if(n(r))return[{begin:e,end:r-1}].concat(t(r+1,i,n));return[{begin:e,end:i}]}if(!(e.support.browser.msie&&e.support.browser.version<9)){var i=e.jQuery,n=e.spreadsheet.UnionRef,r=e.spreadsheet.CellRef,s=e.spreadsheet.RangeRef,o=["color","fontFamily","underline","italic","bold","textAlign","verticalAlign","background","format","link"],a={borderTop:{complement:"borderBottom",direction:{top:-1,bottom:-1}},borderLeft:{complement:"borderRight",direction:{left:-1,right:-1}},borderRight:{complement:"borderLeft",direction:{left:1,right:1}},borderBottom:{complement:"borderTop",direction:{top:1,bottom:1}}},l=e.Class.extend({init:function(e,t){this._sheet=t,this._ref=e},clone:function(){return new l(this._ref.clone(),this._sheet)},skipHiddenCells:function(){var e=[],i=this,o=i._sheet,a=o.isHiddenRow.bind(o),l=o.isHiddenColumn.bind(o);return i._ref.forEach(function o(d){if(d instanceof n)d.forEach(o);else for(var c=(d=i._normalize(d.toRangeRef())).topLeft,u=d.bottomRight,h=t(c.row,u.row,a),f=t(c.col,u.col,l),p=0;p<h.length;++p)for(var m=0;m<f.length;++m)e.push(new s(new r(h[p].begin,f[m].begin),new r(h[p].end,f[m].end)))}),o.range(e.length>1?new n(e):e[0])},_normalize:function(e){return this._sheet._grid.normalize(e)},_set:function(e,t,i){var n=this._sheet;return this._ref.forEach(function(i){n._set(i.toRangeRef(),e,t)}),i||n.triggerChange({recalc:"formula"==e||"value"==e||"validation"==e,value:t,ref:this._ref}),this},_get:function(e){return this._sheet._get(this._ref.toRangeRef(),e)},_property:function(e,t){return void 0===t?this._get(e):this._set(e,t)},value:function(e){return void 0!==e&&this._set("formula",null,!0),this._property("value",e)},resize:function(e){var t=this._resizedRef(e);return new l(t,this._sheet)},_resizedRef:function(e){return this._ref.map(function(t){return t.toRangeRef().resize(e)})},_border:function(t,i){var n,r=a[t].complement,s=a[t].direction,o=this._sheet;return o.batch(function(){n=this._property(t,i),void 0!==i&&this._resizedRef(s).forEach(function(t){t!==e.spreadsheet.NULLREF&&new l(t,o)._property(r,null)})}.bind(this),{}),n},_collapsedBorder:function(t){var i=this._property(t),n=a[t].complement,r=a[t].direction;return this._resizedRef(r).forEach(function(t){if(!i&&t!==e.spreadsheet.NULLREF){var r=new l(t,this._sheet);i=r._property(n)}}.bind(this)),i},borderTop:function(e){return this._border("borderTop",e)},borderRight:function(e){return this._border("borderRight",e)},borderBottom:function(e){return this._border("borderBottom",e)},borderLeft:function(e){return this._border("borderLeft",e)},collapsedBorderTop:function(){return this._collapsedBorder("borderTop")},collapsedBorderRight:function(){return this._collapsedBorder("borderRight")},collapsedBorderBottom:function(){return this._collapsedBorder("borderBottom")},collapsedBorderLeft:function(){return this._collapsedBorder("borderLeft")},input:function(t){var i,n=this._get("format");if(void 0!==t){var r=this._ref.toRangeRef().topLeft;return i=e.spreadsheet.calc.parse(this._sheet.name(),r.row,r.col,t),this._sheet.batch(function(){var t=null;"exp"==i.type?t=e.spreadsheet.calc.compile(i):"date"==i.type?this.format(i.format||function(e){return e.replace(/M/g,"m").replace(/'/g,'"').replace(/tt/,"am/pm")}(e.culture().calendar.patterns.d)):"percent"==i.type?this.format(100*i.value==(100*i.value|0)?"0%":"0.00%"):i.format&&!n&&this.format(i.format),this.formula(t),t||this.value(i.value)}.bind(this),{recalc:!0,value:t,ref:this._ref,editorChange:this._sheet.isInEditMode()}),this}t=this._get("value");var s=this._get("formula"),o=n&&!s&&e.spreadsheet.formatting.type(t,n);if(s)t="="+s;else e:{if(n&&"number"==typeof t){var a=e.spreadsheet.formatting.text(t,n);i=e.spreadsheet.calc.parse(null,null,null,a);var l=e.spreadsheet.formatting.text(i.value,n);if(a==l){t=a;break e}}"date"===o?t=e.toString(e.spreadsheet.numberToDate(t),e.culture().calendar.patterns.d):"percent"===o?t=100*t+"%":"string"==typeof t&&(/^[=']/.test(t)||/^(?:true|false)$/i.test(t)||function(t){return!/^=/.test(t)&&/number|percent/.test(e.spreadsheet.calc.parse(null,0,0,t).type)}(t))&&(t="'"+t)}return t},enable:function(e){if(void 0===e)return e=!0,this._sheet.forEach(this._ref.toRangeRef(),function(t,i,n){!1===n.enable&&(e=!1)}),e;this._property("enable",e)},formula:function(e){if(void 0===e){var t=this._get("formula");return t?""+t:null}return this._property("formula",e)},validation:function(e){if(void 0===e){var t=this._get("validation");return t?t.toJSON():null}return this._property("validation",e)},_getValidationState:function(){var e,t,i=this._ref.toRangeRef(),n=i.topLeft.row,r=i.topLeft.col,s=i.bottomRight.row,o=i.bottomRight.col;for(e=r;e<=o;e++)for(t=n;t<=s;t++){var a=this._sheet._validation(t,e);if(a&&"reject"===a.type&&!1===a.value)return a}return!1},merge:function(){return this._ref=this._sheet._merge(this._ref),this},unmerge:function(){var e=this._sheet._mergedCells;return this._ref.forEach(function(t){t.toRangeRef().intersecting(e).forEach(function(t){e.splice(e.indexOf(t),1)})}),this._sheet.triggerChange({}),this},select:function(){return this._sheet.select(this._ref),this},values:function(t){if(this._ref instanceof n)throw new Error("Unsupported for multiple ranges.");if(this._ref===e.spreadsheet.NULLREF){if(void 0!==t)throw new Error("Unsupported for NULLREF.");return[]}var i,r,s=this._ref.toRangeRef(),o=s.topLeft.row,a=s.topLeft.col,l=s.bottomRight.row,d=s.bottomRight.col;if(void 0===t){t=new Array(s.height());for(var c=0;c<t.length;c++)t[c]=new Array(s.width());for(i=a;i<=d;i++)for(r=o;r<=l;r++)t[r-o][i-a]=this._sheet._value(r,i);return t}for(i=a;i<=d;i++)for(r=o;r<=l;r++){var u=t[r-o];if(u){var h=u[i-a];void 0!==h&&this._sheet._value(r,i,h)}}return this._sheet.triggerChange({recalc:!0}),this},_properties:function(t){if(this._ref instanceof n)throw new Error("Unsupported for multiple ranges.");if(this._ref===e.spreadsheet.NULLREF){if(void 0!==t)throw new Error("Unsupported for NULLREF.");return[]}var i,r,s=this._ref.toRangeRef(),o=s.topLeft.row,a=s.topLeft.col,l=s.bottomRight.row,d=s.bottomRight.col,c=this._sheet;if(void 0===t)return t=new Array(s.height()),c.forEach(s,function(e,i,n){i-=a;var r=t[e-=o]||(t[e]=[]);r[i]=n}),t;var u;s=s.clone();var h=function(e){var t=u[e];s.topLeft.row=s.bottomRight.row=r,s.topLeft.col=s.bottomRight.col=i,c._set(s,e,t)};for(i=a;i<=d;i++)for(r=o;r<=l;r++){var f=t[r-o];f&&(u=f[i-a])&&Object.keys(u).forEach(h)}return c.triggerChange({recalc:!0,ref:this._ref}),this},clear:function(e){var t=!e||!Object.keys(e).length,i=this._sheet,n={recalc:t||e&&!0===e.contentsOnly,ref:this._ref};return i.batch(function(){n.recalc&&this.formula(null),t&&this.validation(null),(t||e&&!0===e.formatOnly)&&(o.forEach(function(e){this[e](null)}.bind(this)),this.unmerge())}.bind(this),n),this},clearContent:function(){return this.clear({contentsOnly:!0})},clearFormat:function(){return this.clear({formatOnly:!0})},isSortable:function(){return!(this._ref instanceof n||this._ref===e.spreadsheet.NULLREF)},sort:function(t){if(this._ref instanceof n)throw new Error("Unsupported for multiple ranges.");if(this._ref===e.spreadsheet.NULLREF)throw new Error("Unsupported for NULLREF.");return void 0===t&&(t={column:0}),t=t instanceof Array?t:[t],this._sheet._sortBy(this._ref.toRangeRef(),t.map(function(e,t){return"number"==typeof e&&(e={column:e}),{index:void 0===e.column?t:e.column,ascending:void 0===e.ascending||e.ascending}})),this},isFilterable:function(){return!(this._ref instanceof n)},filter:function(e){if(this._ref instanceof n)throw new Error("Unsupported for multiple ranges.");return!1===e?this.clearFilters():(e=!0===e?[]:e instanceof Array?e:[e],this._sheet._filterBy(this._ref.toRangeRef(),e.map(function(e,t){return{index:void 0===e.column?t:e.column,filter:e.filter}}))),this},clearFilter:function(e){this._sheet.clearFilter(e)},clearFilters:function(){var e=this._sheet.filter(),t=[];if(e){for(var i=0;i<e.columns.length;i++)t.push(i);this._sheet.batch(function(){this.clearFilter(t),this._filter=null},{layout:!0,filter:!0})}},hasFilter:function(){var e=this._sheet.filter();return!!e},leftColumn:function(){return new l(this._ref.leftColumn(),this._sheet)},rightColumn:function(){return new l(this._ref.rightColumn(),this._sheet)},topRow:function(){return new l(this._ref.topRow(),this._sheet)},bottomRow:function(){return new l(this._ref.bottomRow(),this._sheet)},column:function(e){return new l(this._ref.toColumn(e),this._sheet)},row:function(e){return new l(this._ref.toRow(e),this._sheet)},forEachRow:function(e){this._ref.forEachRow(function(t){e(new l(t,this._sheet))}.bind(this))},forEachColumn:function(e){this._ref.forEachColumn(function(t){e(new l(t,this._sheet))}.bind(this))},sheet:function(){return this._sheet},topLeft:function(){return this._ref.toRangeRef().topLeft},intersectingMerged:function(){var e=this._sheet,t=[];return e._mergedCells.forEach(function(e){e.intersects(this._ref)&&t.push(e.toString())}.bind(this)),t},getState:function(t){var i,n=this._ref.first(),r={ref:n,data:[],origRef:this._ref};t?i="input"===t?["value","formula"]:"border"===t?["borderLeft","borderTop","borderRight","borderBottom"]:[t]:(i=e.spreadsheet.ALL_PROPERTIES,r.mergedCells=this.intersectingMerged());var s=r.data;return this.forEachCell(function(e,t,r){var o={},a=e-n.row,l=t-n.col;s[a]||(s[a]=[]),s[a][l]=o,i.forEach(function(e){o[e]=r[e]||null})}),r},setState:function(e,t){var i=this._sheet,n=this._ref.first(),r=e.ref.row-n.row,s=e.ref.col-n.col;i.batch(function(){e.mergedCells&&this.unmerge();var o=n.row;e.data.forEach(function(r,s){if(!t||!i.isHiddenRow(e.ref.row+s)){var a=n.col;r.forEach(function(r,l){if(!t||!i.isHiddenColumn(e.ref.col+l)){var d=t?i.range(o,a):i.range(n.row+s,n.col+l);if(d.enable()){for(var c in r)"value"!=c&&d._set(c,r[c]);r.formula||d._set("value",r.value)}a++}}),o++}}),e.mergedCells&&e.mergedCells.forEach(function(e){e=i._ref(e).relative(r,s,3),i.range(e).merge()},this)}.bind(this),{recalc:!0})},_adjustRowHeight:function(){for(var t=this._sheet,i=this.getState(),n=[],r=0;r<i.mergedCells.length;r++)n.push(t.range(i.mergedCells[r]));this.forEachRow(function(i){if(!(i.topLeft().row>=i.sheet()._rows._count)){var r=i.sheet().rowHeight(i.topLeft().row);i.forEachCell(function(i,s,o){for(var a=t.range(i,s),l=0,d=0;d<n.length;d++)if(a._ref.intersects(n[d]._ref)){l+=o.width;break}var c=Math.max(t.columnWidth(s),l);r=Math.max(r,e.spreadsheet.util.getTextHeight(o.value,c,o.fontSize,o.wrap))}),t.rowHeight(i.topLeft().row,Math.max(t.rowHeight(i.topLeft().row),r))}})},forEachCell:function(e){this._ref.forEach(function(t){this._sheet.forEach(t.toRangeRef(),e.bind(this))}.bind(this))},hasValue:function(){var e=!1;return this.forEachCell(function(t,i,n){0!==Object.keys(n).length&&(e=!0)}),e},wrap:function(t){return void 0===t?!!this._property("wrap"):(this.forEachRow(function(t){var i=t.sheet().rowHeight(t.topLeft().row);t.forEachCell(function(t,n,r){var s=this._sheet.columnWidth(n);null!==r.value&&void 0!==r.value&&(i=Math.max(i,e.spreadsheet.util.getTextHeight(r.value,s,r.fontSize,!0)))}),t.sheet().rowHeight(t.topLeft().row,i)}.bind(this)),this._property("wrap",t),this)},fontSize:function(t){return void 0===t?this._property("fontSize"):(this.forEachRow(function(i){var n=i.sheet().rowHeight(i.topLeft().row);i.forEachCell(function(i,r,s){var o=this._sheet.columnWidth(r);null!==s.value&&void 0!==s.value&&(n=Math.max(n,e.spreadsheet.util.getTextHeight(s.value,o,t,s.wrap)))}),i.sheet().rowHeight(i.topLeft().row,n)}.bind(this)),this._property("fontSize",t),this)},draw:function(e,t){this._sheet.draw(this,e,t)}});i.each(o,function(e,t){l.prototype[t]=function(e){return this._property(t,e)}});var d=i('<div style="position: absolute !important; top: -4000px !important; height: auto !important;padding: 1px !important; margin: 0 !important; border: 1px solid black !important;line-height: normal !important; visibility: hidden !important;white-space: pre-wrap !important; word-break: break-all !important;" />')[0];e.spreadsheet.util={getTextHeight:function(t,i,n,r){var s={baselineMarkerSize:0,width:i+"px","font-size":(n||12)+"px","word-break":!0===r?"break-all":"normal","white-space":!0===r?"pre-wrap":"pre"};return e.util.measureText(t,s,d).height}},e.spreadsheet.Range=l}}(window.kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/runtime",["spreadsheet/references"],function(){"use strict";function e(t){if(t instanceof e)return t;this.code=t}function t(t,i){function n(e){o=e[0];var t="{ ";if(Array.isArray(o))l+="while (i < args.length) { ",d+="while (i < args.length) { ",t+="xargs.push(tmp = []); stack.push(xargs); xargs = tmp; ",t+="while (i < args.length) { ",t+=e.map(n).join(""),t+="} ",t+="xargs = stack.pop(); ",d+="} ",l+="} ";else if("+"==o)l+="while (i < args.length) { ",d+="while (i < args.length) { ",t+="xargs.push(tmp = []); stack.push(xargs); xargs = tmp; ",t+="do { ",t+=e.slice(1).map(n).join(""),t+="} while (i < args.length); ",t+="xargs = stack.pop(); ",d+="} ",l+="} ";else if("?"==o)t+="if (!("+s(e[1])+")) return new CalcError(err); ";else{var i=e[1];if(Array.isArray(i)&&/^#?collect/.test(i[0])){var c=i[2];r(),t+="try {var $"+o+" = this.cellValues(args.slice(i",c&&(t+=", i + "+c),t+=")).filter(function($"+o+"){ ","collect"==i[0]&&(t+="if ($"+o+" instanceof CalcError) throw $"+o+"; "),t+="return "+s(i[1])+"; }, this); ",t+=c?"i += "+c+"; ":"i = args.length; ",t+="xargs.push($"+o+")} catch(ex) { if (ex instanceof CalcError) return ex; throw ex; } ",d+="toResolve.push(args.slice(i)); "}else if("rest"==i)t+="xargs.push(args.slice(i)); i = args.length; ";else{(h=/^\*/.test(o))&&(f=!0,o=o.substr(1)),t+="var $"+o+" = args[i++]; ";var u=!1;/!$/.test(i)?(i=i.substr(0,i.length-1),u=!0):t+="if ($"+o+" instanceof CalcError) return $"+o+"; ",t+=function(e,t){a=!1;var i="if (!("+s(e)+")) { ";a&&!t&&(i+=" if ($"+o+" instanceof CalcError) return $"+o+"; ");i+="return new CalcError(err); } ",a||(d+="i++; ");l+=h?"var $"+o+" = this.asMatrix(args[i]); if ($"+o+") { xargs.push($"+o+"); width = Math.max(width, $"+o+".width); height = Math.max(height, $"+o+".height); arrays.push(true) } else { xargs.push(args[i]); arrays.push(false); } i++; ":"xargs.push(args[i++]); arrays.push(false); ";return i}(i,u)+"xargs.push($"+o+"); "}}return t+="} "}function r(){return a?"$"+o:(u=!0,a=!0,d+="toResolve.push(args[i++]); ","($"+o+" = this.force($"+o+"))")}function s(e){if(Array.isArray(e)){if("or"==e[0])return"("+e.slice(1).map(s).join(") || (")+")";if("and"==e[0])return"("+e.slice(1).map(s).join(") && (")+")";if("values"==e[0])return"("+e.slice(1).map(function(e){return r()+" === "+e}).join(") || (")+")";if("null"==e[0])return"("+s("null")+" ? (($"+o+" = "+e[1]+"), true) : false)";if("between"==e[0]||"[between]"==e[0])return"("+r()+" >= "+e[1]+" && $"+o+" <= "+e[2]+" ? true : ((err = 'NUM'), false))";if("(between)"==e[0])return"("+r()+" > "+e[1]+" && $"+o+" < "+e[2]+" ? true : ((err = 'NUM'), false))";if("(between]"==e[0])return"("+r()+" > "+e[1]+" && $"+o+" <= "+e[2]+" ? true : ((err = 'NUM'), false))";if("[between)"==e[0])return"("+r()+" >= "+e[1]+" && $"+o+" < "+e[2]+" ? true : ((err = 'NUM'), false))";if("assert"==e[0]){var t=e[2]||"N/A";return"(("+e[1]+") ? true : (err = "+JSON.stringify(t)+", false))"}if("not"==e[0])return"!("+s(e[1])+")";throw new Error("Unknown array type condition: "+e[0])}if("number"==e)return"(typeof "+r()+" == 'number' || typeof $"+o+" == 'boolean')";if("integer"==e)return"((typeof "+r()+" == 'number' || typeof $"+o+" == 'boolean') ? ($"+o+" |= 0, true) : false)";if("date"==e)return"((typeof "+r()+" == 'number') ? ($"+o+" |= 0, true) : false)";if("datetime"==e)return"(typeof "+r()+" == 'number')";if("divisor"==e)return"((typeof "+r()+" == 'number' || typeof $"+o+" == 'boolean') && ($"+o+" == 0 ? ((err = 'DIV/0'), false) : true))";if("number+"==e)return"((typeof "+r()+" == 'number' || typeof $"+o+" == 'boolean') && ($"+o+" >= 0 ? true : ((err = 'NUM'), false)))";if("integer+"==e)return"((typeof "+r()+" == 'number' || typeof $"+o+" == 'boolean') && (($"+o+" |= 0) >= 0 ? true : ((err = 'NUM'), false)))";if("number++"==e)return"((typeof "+r()+" == 'number' || typeof $"+o+" == 'boolean') && ($"+o+" > 0 ? true : ((err = 'NUM'), false)))";if("integer++"==e)return"((typeof "+r()+" == 'number' || typeof $"+o+" == 'boolean') && (($"+o+" |= 0 ) > 0) ? true : ((err = 'NUM'), false))";if("string"==e)return"((typeof "+r()+" == 'string' || typeof $"+o+" == 'boolean' || typeof $"+o+" == 'number') ? ($"+o+" += '', true) : false)";if("boolean"==e)return"(typeof "+r()+" == 'boolean')";if("logical"==e)return"(typeof "+r()+" == 'boolean' || (typeof $"+o+" == 'number' ? ($"+o+" = !!$"+o+", true) : false))";if("matrix"==e)return r(),"((m = this.asMatrix($"+o+")) ? ($"+o+" = m) : false)";if("#matrix"==e)return"((m = this.asMatrix($"+o+")) ? ($"+o+" = m) : false)";if("ref"==e)return"($"+o+" instanceof kendo.spreadsheet.Ref)";if("area"==e)return"($"+o+" instanceof kendo.spreadsheet.CellRef || $"+o+" instanceof kendo.spreadsheet.RangeRef)";if("cell"==e)return"($"+o+" instanceof kendo.spreadsheet.CellRef)";if("null"==e)return"("+r()+" == null)";if("anyvalue"==e)return"("+r()+" != null && i <= args.length)";if("forced"==e)return"("+r()+", i <= args.length)";if("anything"==e)return"(i <= args.length)";if("blank"==e)return"("+r()+" == null || $"+o+" === '')";throw new Error("Can't check for type: "+e)}var o,a,l="function arrayArgs(args) { var xargs = [], width = 0, height = 0, arrays = [], i = 0; ",d="function resolve(args, callback) { var toResolve = [], i = 0; ",c="'use strict'; function check(args) { var stack = [], tmp, xargs = [], i = 0, m, err = 'VALUE'; ",u=!1,h=!1,f=!1;c+=i.map(n).join(""),c+="if (i < args.length) return new CalcError('N/A'); ",c+="return xargs; } ",l+="return { args: xargs, width: width, height: height, arrays: arrays }; } ";var p;return u?(d+="this.resolveCells(toResolve, callback); } ",p=new Function("CalcError",c+d+l+" return { resolve: resolve, check: check, arrayArgs: arrayArgs };")):p=new Function("CalcError",c+" return { check: check };"),p=p(e),f||delete p.arrayArgs,p}function i(t,i,n){if(n instanceof e)return n;try{return i.apply(t,n)}catch(t){if(t instanceof e)return t;throw t}}function n(n,r){return n=n.toLowerCase(),S[n]=r,{args:function(e,s){var o=t(n,e);s&&(o.arrayArgs&&console.log(o.arrayArgs.toString()),o.resolve&&console.log(o.resolve.toString()),o.check&&console.log(o.check.toString()));var a=S[n]=function(e,t,n,r){return function(s,o){function a(){if(r){var t=r.call(this,o);if(o=t.args,t.width>0&&t.height>0){for(var a=new x(this),l=0;l<t.height;++l)for(var d=0;d<t.width;++d){for(var c=[],u=0;u<o.length;++u)if(t.arrays[u]){var h=o[u];c[u]=h.get(l%h.height,d%h.width)}else c[u]=o[u];c=n.call(this,c),a.set(l,d,i(this,e,c))}return s(a)}}var c=n.call(this,o);s(i(this,e,c))}t?t.call(this,o,a):a.call(this)}}(r,o.resolve,o.check,o.arrayArgs);return a.kendoSpreadsheetArgs=e,this},argsAsync:function(i,s){var o=t(n,i);s&&(o.arrayArgs&&console.log(o.arrayArgs.toString()),o.resolve&&console.log(o.resolve.toString()),o.check&&console.log(o.check.toString()));var a=S[n]=function(t,i,n,r){return function(s,o){function a(){if(r){var i=r.call(this,o);if(o=i.args,i.width>0&&i.height>0){for(var a=new x(this),l=i.width*i.height,d=function(e,t){return function(i){if(a.set(e,t,i),0===--l)return s(a)}},c=0;c<i.height&&l>0;++c)for(var u=0;u<i.width&&l>0;++u){for(var h=[],f=0;f<o.length;++f)if(i.arrays[f]){var p=o[f];h[f]=p.get(c%p.height,u%p.width)}else h[f]=o[f];if((h=n.call(this,h))instanceof e){if(a.set(c,u,h),0===--l)return s(a)}else h.unshift(d(c,u)),t.apply(this,h)}return}}var i=n.call(this,o);i instanceof e?s(i):(i.unshift(s),t.apply(this,i))}i?i.call(this,o,a):a.call(this)}}(r,o.resolve,o.check,o.arrayArgs);return a.kendoSpreadsheetArgs=i,this}}}function r(e,t,i){return t++,(1461*(e+4800+((t-14)/12|0))/4|0)+(367*(t-2-12*((t-14)/12|0))/12|0)-(3*((e+4900+((t-14)/12|0))/100|0)/4|0)+i-32075}function s(e){return e%4?0:e%100?1:e%400?0:1}function o(e){return function(e){var t,i,n,r,o,a,l;return t=e+68569,i=4*t/146097|0,t-=(146097*i+3)/4|0,r=4e3*(t+1)/1461001|0,t=t-(1461*r/4|0)+31,n=80*t/2447|0,a=t-(2447*n/80|0),t=n/11|0,o=n+2-12*t,l=100*(i-49)+r+t,o--,{year:l,month:o,date:a,day:(e+1)%7,ord:F[s(l)][o]+a}}((0|e)+T)}function a(e,t,i){return r(e,t,i)-T}function l(e){var t=e-(0|e);t<0&&t++;var i=Math.round(A*t),n=Math.floor(i/R);i-=n*R;var r=Math.floor(i/E);i-=r*E;var s=Math.floor(i/1e3);return i-=1e3*s,{hours:n,minutes:r,seconds:s,milliseconds:i}}function d(e){var t=o(e),i=l(e);return new Date(t.year,t.month,t.date,i.hours,i.minutes,i.seconds,i.milliseconds)}function c(e,t,i,n){return(e+(t+(i+n/1e3)/60)/60)/24}function u(e){var t=c(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());return(e=a(e.getFullYear(),e.getMonth(),e.getDate()))<0?e-1+t:e+t}function h(t){return function(i,n){return"string"==typeof i&&"string"!=typeof n&&(n=null==n?"":n+""),"string"!=typeof i&&"string"==typeof n&&(i=null==i?"":i+""),"number"==typeof i&&null==n&&(n=0),"number"==typeof n&&null==i&&(i=0),"string"==typeof i&&"string"==typeof n&&(i=i.toLowerCase(),n=n.toLowerCase()),typeof n==typeof i?t(i,n):new e("VALUE")}}if(kendo.support.browser.msie&&kendo.support.browser.version<9)return;var f={},p=kendo.spreadsheet;p.calc=f;var m=f.runtime={},g=kendo.Class,v=p.Ref,_=p.CellRef,b=p.RangeRef,k=p.UnionRef,w=p.NULLREF;e.prototype.toString=function(){return"#"+this.code+("NAME"==this.code?"?":"!")};var y=g.extend({init:function(e,t,i,n){this.callback=e,this.formula=t,this.ss=i,this.parent=n},resolve:function(e){var t=this;e instanceof v?t.resolveCells([e],function(){e=t.getRefData(e),Array.isArray(e)&&(e=e[0]),t._resolve(e)}):t._resolve(e)},_resolve:function(e){void 0===e&&(e=null);var t=this.formula;t.value=e,this.ss.onFormula(t)&&this.callback&&this.callback.call(t,e)},resolveCells:function(e,t){var i=this,n=[];if(function e(t){for(var r=0;r<t.length;++r){var s=t[r];s instanceof v&&function(e){for(var t=0;t<e.length;++t){var i=e[t];i.formula&&n.push(i)}}(i.getRefCells(s)),Array.isArray(s)&&e(s)}}(e),!n.length)return t.call(i);for(var r=n.length,s=0;s<n.length;++s)!function(e){e.formula.exec(i.ss,function(){--r||t.call(i)},i)}(n[s])},cellValues:function(e,t){for(var i=[],n=0;n<e.length;++n){var r=e[n];r instanceof v?(r=this.getRefData(r),i=i.concat(r)):Array.isArray(r)?i=i.concat(this.cellValues(r)):r instanceof x?i=i.concat(this.cellValues(r.data)):i.push(r)}return t?t.apply(this,i):i},force:function(e){return e instanceof v?this.getRefData(e):e},func:function(t,i,n){t=t.toLowerCase();var r=S[t];if(r)return r.call(this,i,n);i(new e("NAME"))},bool:function(e){return e instanceof v&&(e=this.getRefData(e)),"string"==typeof e?"true"==e.toLowerCase():"number"==typeof e?0!==e:"boolean"==typeof e?e:null!=e},asMatrix:function(e){if(e instanceof x)return e;var t=this;if(e instanceof b){var i=e.topLeft,n=i.row,r=i.col,s=t.getRefCells(e),o=new x(t);return isFinite(e.width())&&(o.width=e.width()),isFinite(e.height())&&(o.height=e.height()),isFinite(n)||(n=0),isFinite(r)||(r=0),s.forEach(function(e){o.set(e.row-n,e.col-r,e.value)}),o}if(Array.isArray(e)&&e.length>0){var o=new x(t),a=0;return e.forEach(function(e){var i=0,n=1;e.forEach(function(e){var r=e instanceof b;e instanceof v&&!r&&(e=t.getRefData(e)),(r||Array.isArray(e))&&(e=t.asMatrix(e)),e instanceof x?(e.each(function(e,t,n){o.set(a+t,i+n,e)}),n=Math.max(n,e.height),i+=e.width):o.set(a,i++,e)}),a+=n}),o}},getRefCells:function(e,t){return this.ss.getRefCells(e,t)},getRefData:function(e){return this.ss.getData(e)},workbook:function(){return this.ss.workbook}}),x=g.extend({init:function(e){this.context=e,this.height=0,this.width=0,this.data=[]},clone:function(){var e=new x(this.context);return e.height=this.height,e.width=this.width,e.data=this.data.map(function(e){return e.slice()}),e},get:function(e,t){var i=this.data[e],n=i?i[t]:null;return n instanceof v?this.context.getRefData(n):n},set:function(e,t,i){var n=this.data[e];null==n&&(n=this.data[e]=[]),n[t]=i,e>=this.height&&(this.height=e+1),t>=this.width&&(this.width=t+1)},each:function(e,t){for(var i=0;i<this.height;++i)for(var n=0;n<this.width;++n){var r=this.get(i,n);if((t||null!=r)&&void 0!==(r=e.call(this.context,r,i,n)))return r}},map:function(e,t){var i=new x(this.context);return this.each(function(t,n,r){i.set(n,r,e.call(this,t,n,r))},t),i},eachRow:function(e){for(var t=0;t<this.height;++t){var i=e.call(this.context,t);if(void 0!==i)return i}},eachCol:function(e){for(var t=0;t<this.width;++t){var i=e.call(this.context,t);if(void 0!==i)return i}},mapRow:function(e){var t=new x(this.context);return this.eachRow(function(i){t.set(i,0,e.call(this.context,i))}),t},mapCol:function(e){var t=new x(this.context);return this.eachCol(function(i){t.set(0,i,e.call(this.context,i))}),t},toString:function(){return JSON.stringify(this.data)},transpose:function(){var e=new x(this.context);return this.each(function(t,i,n){e.set(n,i,t)}),e},unit:function(e){this.width=this.height=e;for(var t=this.data=new Array(e),i=e;--i>=0;)for(var n=t[i]=new Array(e),r=e;--r>=0;)n[r]=i==r?1:0;return this},multiply:function(t){for(var i=new x(this.context),n=0;n<this.height;++n)for(var r=0;r<t.width;++r){for(var s=0,o=0;o<this.width;++o){var a=this.get(n,o),l=t.get(o,r);if("number"!=typeof a||"number"!=typeof l)throw new e("VALUE");s+=a*l}i.set(n,r,s)}return i},adds:function(e,t){for(var i=new x(this.context),n=t?-1:1,r=0;r<this.height;++r)for(var s=0;s<this.width;++s){var o=this.get(r,s),a=e.get(r,s);i.set(r,s,o+n*a)}return i},determinant:function(){var e,t,i,n,r=this.clone().data,s=r.length,o=1;for(e=0;e<s;e++){for(t=e;t<s&&!r[t][e];t++);if(t==s)return 0;if(t!=e)for(o=-o,n=e;n<s;n++){var a=r[e][n];r[e][n]=r[t][n],r[t][n]=a}for(i=e+1;i<s;i++)for(n=e+1;n<s;n++)r[i][n]-=r[e][n]*r[i][e]/r[e][e];o*=r[e][e]}return o},inverse:function(){for(var e,t=this.width,i=this.augment(new x(this.context).unit(t)),n=i.data,r=0;r<t;++r){var s=function(e,t,i){var n=i(e),r=e;for(;++e<t;){var s=i(e);s>n&&(n=s,r=e)}return r}(r,t,function(e){return n[e][r]});if(!n[s][r])return null;r!=s&&(e=n[r],n[r]=n[s],n[s]=e);for(var o=r+1;o<t;++o){for(var a=r+1;a<2*t;++a)n[o][a]-=n[r][a]*n[o][r]/n[r][r];n[o][r]=0}}for(var o=0;o<t;++o)for(var l=n[o][o],a=0;a<2*t;++a)n[o][a]/=l;for(var r=t;--r>=0;)for(var o=r;--o>=0;)if(n[o][r])for(var a=2*t;--a>=t;)n[o][a]-=n[r][a]*n[o][r];return i.slice(0,t,t,t)},augment:function(e){var t=this.clone(),i=t.width;return e.each(function(e,n,r){t.set(n,r+i,e)}),t},slice:function(e,t,i,n){for(var r=new x(this.context),s=0;s<i;++s)for(var o=0;o<n;++o)r.set(s,o,this.get(e+s,t+o));return r}});var C=g.extend({init:function(e,t,i,n,r,s){this.refs=e,this.handler=t,this.print=i,this.absrefs=null,this.sheet=n,this.row=r,this.col=s,this.onReady=[],this.pending=!1},clone:function(e,t,i){var n=e.toLowerCase(),r=this.refs;return n!=this.sheet.toLowerCase()&&(r=r.map(function(t){return t.hasSheet()||t.sheet.toLowerCase()==n||(t=t.clone().setSheet(e)),t})),new C(r,this.handler,this.print,e,t,i)},resolve:function(e){this.pending=!1,this.onReady.forEach(function(t){t(e)})},exec:function(t,i,n){if("value"in this)i&&i(this.value);else{i&&this.onReady.push(i);for(var r=new y(this.resolve,this,t,n);n;){if(n.formula===this)return this.pending=!1,void r.resolve(new e("CIRCULAR"));n=n.parent}if(this.pending)return;this.pending=!0,this.absrefs||(this.absrefs=this.refs.map(function(e){return e.absolute(this.row,this.col)},this)),this.handler.call(r)}},reset:function(){this.onReady=[],this.pending=!1,delete this.value},renameSheet:function(e,t){e=e.toLowerCase(),this.absrefs=null,this.sheet.toLowerCase()==e&&(this.sheet=t),this.refs.forEach(function(i){i.sheet.toLowerCase()==e&&(i.sheet=t)})},adjust:function(e,t,i,n){e=e.toLowerCase();var r=this.row,s=this.col,o=this.sheet.toLowerCase(),a=!1;o==e&&("row"==t&&r>=i&&(this.row+=n,a=!0),"col"==t&&s>=i&&(this.col+=n,a=!0));var l=this.row,d=this.col;this.absrefs=null,this.refs=this.refs.map(function(o){return o===w?o:o.sheet.toLowerCase()!=e?(a&&("row"==t&&r>=i&&(o=o.relative(n,0)),"col"==t&&s>=i&&(o=o.relative(0,n))),o):o.adjust(r,s,l,d,"row"==t,i,n)},this)},toString:function(){return this.print(this.row,this.col)}}),S=Object.create(null);S.if=function(t,i){var n=this,r=i[0],s=i[1],o=i[2];this.resolveCells([r],function(){var i=n.asMatrix(r);i?s(function(r){o(function(s){var o=n.asMatrix(r),a=n.asMatrix(s);t(i.map(function(t,i,l){return t instanceof e?t:n.bool(t)?o?o.get(i,l):r:a?a.get(i,l):s}))})}):(r=this.force(r))instanceof e?t(r):n.bool(r)?s(t):o(t)})},S[""]=function(e){e((1+Math.sqrt(5))/2)};var T=r(1900,0,-1),D=[31,28,31,30,31,30,31,31,30,31,30,31],F=[[0,31,59,90,120,151,181,212,243,273,304,334],[0,31,60,91,121,152,182,213,244,274,305,335]];var E=6e4,R=60*E,A=24*R;m.CalcError=e,m.Formula=C,m.Matrix=x,m.packDate=a,m.unpackDate=o,m.packTime=c,m.unpackTime=l,m.serialToDate=d,m.dateToSerial=u,m.daysInMonth=function(e,t){return s(e)&&1==t?29:D[t]},m.isLeapYear=s,m.daysInYear=function(e){return s(e)?366:365},m.parseDate=function(e){return kendo.parseDate(e,["MM/dd/yyyy","MM-dd-yyyy","MM/dd/yy","MM-dd-yy","MMMM dd yyyy","MMMM dd yy","MMM dd yyyy","MMM dd yy","dd MMMM yyyy","dd MMMM yy","dd MMM yyyy","dd MMM yy","MMMM dd, yyyy","MMMM dd, yy","MMM dd, yyyy","MMM dd, yy","MMMM dd","MMM dd","MMMM yyyy","MMM yyyy","dd MMMM","dd MMM","MM-dd","MM/dd"])||kendo.parseDate(e)},p.dateToNumber=u,p.numberToDate=d,p.defineFunction=n,p.CalcError=e,m.defineFunction=n,m.defineAlias=function(e,t){var i=S[t];if(!i)throw new Error("Function "+t+" is not yet defined");i.kendoSpreadsheetAliases||(i.kendoSpreadsheetAliases=[t]),i.kendoSpreadsheetAliases.push(e),S[e]=i},m.FUNCS=S;var I=["or","number",["null",0]],M=[["*a",I],["*b",I]],H=[["*a",["or","anyvalue",["null",0]]],["*b",["or","anyvalue",["null",0]]]];n("binary+",function(e,t){return e+t}).args(M),n("binary-",function(e,t){return e-t}).args(M),n("binary*",function(e,t){return e*t}).args(M),n("binary/",function(e,t){return e/t}).args([["*a",I],["*b","divisor"]]),n("binary^",function(e,t){return Math.pow(e,t)}).args(M),n("binary&",function(e,t){return null==e&&(e=""),null==t&&(t=""),""+e+t}).args([["*a",["or","number","string","boolean","null"]],["*b",["or","number","string","boolean","null"]]]),n("binary=",function(e,t){return e===t}).args(H),n("binary<>",function(e,t){return e!==t}).args(H),n("binary<",h(function(e,t){return e<t})).args(H),n("binary<=",h(function(e,t){return e<=t})).args(H),n("binary>",h(function(e,t){return e>t})).args(H),n("binary>=",h(function(e,t){return e>=t})).args(H),n("unary+",function(e){return e}).args([["*a",I]]),n("unary-",function(e){return-e}).args([["*a",I]]),n("unary%",function(e){return e/100}).args([["*a",I]]),n("binary:",function(e,t){return new b(e,t).setSheet(e.sheet||this.formula.sheet,e.hasSheet())}).args([["a","cell"],["b","cell"]]),n("binary,",function(e,t){return new k([e,t])}).args([["a","ref"],["b","ref"]]),n("binary ",function(e,t){return e.intersect(t)}).args([["a","ref"],["b","ref"]]),n("not",function(e){return!this.bool(e)}).args([["*a",["or","anyvalue",["null",0]]]]),n("isblank",function(e){return e instanceof _&&null==(e=this.getRefData(e))}).args([["*value","anything!"]]),n("iserror",function(t){return t instanceof e}).args([["*value","forced!"]]),n("iserr",function(t){return t instanceof e&&"N/A"!=t.code}).args([["*value","forced!"]]),n("isna",function(t){return t instanceof e&&"N/A"==t.code}).args([["*value","forced!"]]),n("islogical",function(e){return"boolean"==typeof e}).args([["*value","forced!"]]),n("isnontext",function(e){return"string"!=typeof e}).args([["*value","forced!"]]),n("istext",function(e){return"string"==typeof e}).args([["*value","forced!"]]),n("isnumber",function(e){return"number"==typeof e}).args([["*value","forced!"]]),n("isref",function(e){return e instanceof _||e instanceof b}).args([["*value","anything!"]])}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/validation",["spreadsheet/runtime"],function(){"use strict";var e=kendo.jQuery;if(kendo.support.browser.msie&&kendo.support.browser.version<9)return;var t=kendo.spreadsheet,i={};t.validation=i;var n=t.calc,r=kendo.Class,s="_matrix({0})",o='DATEVALUE("{0}")';n.runtime.defineFunction("_matrix",function(e){return e}).args([["m","matrix"]]);var a=r.extend({init:function(e){this.handler=e.handler,this.from=e.from,this.to=e.to,this.dataType=e.dataType,this.comparerType=e.comparerType,this.type=e.type?e.type:"warning",this.allowNulls=!!e.allowNulls,this.fromIsDateValue=!!e.fromIsDateValue,this.toIsDateValue=!!e.toIsDateValue,this.sheet=e.sheet,this.row=e.row,this.col=e.col,e.tooltipMessageTemplate&&(this.tooltipMessageTemplate=e.tooltipMessageTemplate),e.tooltipTitleTemplate&&(this.tooltipTitleTemplate=e.tooltipTitleTemplate),e.messageTemplate&&(this.messageTemplate=e.messageTemplate),e.titleTemplate&&(this.titleTemplate=e.titleTemplate)},_formatMessages:function(e){var t=this.from?this.from.value:"",i=this.to?this.to.value:"",n=this.from?this.from.toString():"",r=this.to?this.to.toString():"",s=this.dataType,o=this.type,a=this.comparerType;return kendo.format(e,t,i,n,r,s,o,a)},_setMessages:function(){this.title="",this.message="",this.tooltipTitleTemplate&&(this.tooltipTitle=this._formatMessages(this.tooltipTitleTemplate)),this.tooltipMessageTemplate&&(this.tooltipMessage=this._formatMessages(this.tooltipMessageTemplate)),this.titleTemplate&&(this.title=this._formatMessages(this.titleTemplate)),this.messageTemplate&&(this.message=this._formatMessages(this.messageTemplate))},_getListData:function(){if(!this.from.value||!this.from.value.data)return[];var e,t,i=this.from.value.data,n=[];for(e=0;e<i.length;e++){var r=i[e];if(r)for(t=0;t<r.length;t++)n.push(r[t])}return n},clone:function(t,i,n){var r=this._getOptions();return r.from&&(r.from=r.from.clone(t,i,n)),r.to&&(r.to=r.to.clone(t,i,n)),new a(e.extend(r,{handler:this.handler},{sheet:t,row:i,col:n}))},exec:function(e,t,i,n){var r=this,s=function(){r.value=r.handler.call(r,t,i),r._setMessages(),n&&n(r.value)};r.to?r.to.exec(e,function(){r.from.exec(e,s)}):r.from.exec(e,s)},reset:function(){this.from&&this.from.reset(),this.to&&this.to.reset(),delete this.value},adjust:function(e,t,i,n){if(this.from&&this.from.adjust(e,t,i,n),this.to&&this.to.adjust(e,t,i,n),this.sheet.toLowerCase()==e.toLowerCase()){var r=this.row,s=this.col;switch(t){case"row":r>=i&&(this.row+=n);break;case"col":s>=i&&(this.col+=n)}}},toJSON:function(){var e=this._getOptions();return e.from&&(e.from=e.from.toString(),"list"===e.dataType&&(e.from=e.from.replace(/^_matrix\((.*)\)$/i,"$1")),"date"===e.dataType&&this.fromIsDateValue&&(e.from=e.from.replace(/^DATEVALUE\("(.*)"\)$/i,"$1"))),e.to&&(e.to=e.to.toString(),"date"===e.dataType&&this.toIsDateValue&&(e.to=e.to.replace(/^DATEVALUE\("(.*)"\)$/i,"$1"))),e},_getOptions:function(){return{from:this.from,to:this.to,dataType:this.dataType,type:this.type,comparerType:this.comparerType,row:this.row,col:this.col,sheet:this.sheet,allowNulls:this.allowNulls,tooltipMessageTemplate:this.tooltipMessageTemplate,tooltipTitleTemplate:this.tooltipTitleTemplate,messageTemplate:this.messageTemplate,titleTemplate:this.titleTemplate}}});i.compile=function(t,r,a,l){var d,c;"string"==typeof l&&(l=JSON.parse(l));l.from&&("list"===l.dataType&&(l.from=kendo.format(s,l.from)),"date"===l.dataType&&n.runtime.parseDate(l.from)&&(l.from=kendo.format(o,l.from),l.fromIsDateValue=!0),l.from=n.compile(n.parseFormula(t,r,a,l.from)));l.to&&("date"===l.dataType&&n.runtime.parseDate(l.to)&&(l.to=kendo.format(o,l.to),l.toIsDateValue=!0),l.to=n.compile(n.parseFormula(t,r,a,l.to)));c="custom"==l.dataType?i.validationComparers.custom:"list"==l.dataType?i.validationComparers.list:i.validationComparers[l.comparerType];if(!c)throw kendo.format("'{0}' comparer is not implemented.",l.comparerType);return d=function(e){var t=this.to&&this.to.value?this.to.value:void 0;if(null===e||""===e)this.allowNulls?this.value=!0:this.value=!1;else if("custom"==this.dataType)this.value=c(e,this.from.value,t);else if("list"==this.dataType){var i=this._getListData();this.value=c(e,i,t)}else this.value=c(e,this.from.value,t);return this.value},new kendo.spreadsheet.validation.Validation(e.extend(l,{handler:d,sheet:t,row:r,col:a}))},i.validationComparers={greaterThan:function(e,t){return e>t},lessThan:function(e,t){return e<t},between:function(e,t,i){return e>t&&e<i},equalTo:function(e,t){return e==t},notEqualTo:function(e,t){return e!=t},greaterThanOrEqualTo:function(e,t){return e>=t},lessThanOrEqualTo:function(e,t){return e<=t},notBetween:function(e,t,i){return e<t||e>i},custom:function(e,t){return t},list:function(e,t){return t.indexOf(e)>-1}},i.Validation=a}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/sheet",["kendo.core","kendo.color","spreadsheet/runtime","spreadsheet/validation","spreadsheet/references"],function(){!function(e){if(!(e.support.browser.msie&&e.support.browser.version<9)){var t=e.spreadsheet.RangeRef,i=e.spreadsheet.CellRef,n=e.spreadsheet.Range,r=e.Class.extend({init:function(t){this._sheet=t,this.selection=e.spreadsheet.FIRSTREF.toRangeRef(),this.originalSelection=e.spreadsheet.FIRSTREF.toRangeRef(),this._activeCell=e.spreadsheet.FIRSTREF.toRangeRef(),this.originalActiveCell=e.spreadsheet.FIRSTREF},currentSelectionRange:function(){return this.selection.rangeAt(this.selectionRangeIndex).toRangeRef()},currentOriginalNavigationRange:function(){return this.originalSelection.rangeAt(this.selectionRangeIndex).toRangeRef()},currentNavigationRange:function(){return this.singleCellSelection()?this._sheet._sheetRef:this.selection.rangeAt(this.selectionRangeIndex).toRangeRef()},nextNavigationRange:function(){return this.singleCellSelection()||(this.selectionRangeIndex=this.selection.nextRangeIndex(this.selectionRangeIndex)),this.currentNavigationRange()},previousNavigationRange:function(){return this.singleCellSelection()||(this.selectionRangeIndex=this.selection.previousRangeIndex(this.selectionRangeIndex)),this.currentNavigationRange()},activeCell:function(e){return e&&(this.originalActiveCell=e.first(),this._activeCell=this._sheet.unionWithMerged(e.toRangeRef()),this._sheet.focus(e),this._sheet.triggerChange({activeCell:!0,selection:!0})),this._activeCell},select:function(e,t,i){if(e){if(e.eq(this.originalSelection))return;this.originalSelection=e,this.selection=t,!1!==i?(e.isCell()?this.activeCell(e):this.activeCell(this.selection.lastRange().first()),this.selectionRangeIndex=this.selection.size()-1):this._sheet.triggerChange({selection:!0})}return this.selection},singleCellSelection:function(){return this._activeCell.eq(this.selection)}}),s=e.Observable.extend({init:function(){e.Observable.prototype.init.call(this),this._reinit.apply(this,arguments)},_reinit:function(t,i,n,s,o,a){var l=t*i-1;this._rows=new e.spreadsheet.Axis(t,n),this._columns=new e.spreadsheet.Axis(i,s),this._mergedCells=[],this._frozenRows=0,this._frozenColumns=0,this._suspendChanges=!1,this._filter=null,this._showGridLines=!0,this._grid=new e.spreadsheet.Grid(this._rows,this._columns,t,i,o,a),this._sheetRef=this._grid.normalize(e.spreadsheet.SHEETREF),this._properties=new e.spreadsheet.PropertyBag(l),this._sorter=new e.spreadsheet.Sorter(this._grid,this._properties.sortable()),this._viewSelection=new r(this),this._editSelection=new r(this),this._formulaSelections=[]},_selectionState:function(){return this._inEdit?this._editSelection:this._viewSelection},navigator:function(){return this._navigator||(this._navigator=new e.spreadsheet.SheetNavigator(this)),this._navigator},axisManager:function(){return this._axisManager||(this._axisManager=new e.spreadsheet.AxisManager(this)),this._axisManager},_name:function(e){return e?(this._sheetName=e,this):this._sheetName},name:function(){return this._name()},_property:function(e,t,i){return void 0===t?e():(e(t),this.triggerChange(i))},_field:function(e,t,i){return void 0===t?this[e]:(this[e]=t,this.triggerChange(i))},suspendChanges:function(e){return void 0===e?this._suspendChanges:(this._suspendChanges=e,this)},triggerChange:function(e){return this._suspendChanges||this.trigger("change",e),this},setDataSource:function(t,i){this.dataSourceBinder&&this.dataSourceBinder.destroy(),this.dataSourceBinder=new e.spreadsheet.SheetDataSourceBinder({dataSource:t,sheet:this,columns:i}),this.dataSource=this.dataSourceBinder.dataSource},hideColumn:function(e){return this._property(this._columns.hide.bind(this._columns),e,{layout:!0})},unhideColumn:function(e){return this._property(this._columns.unhide.bind(this._columns),e,{layout:!0})},isHiddenColumn:function(e){return this._grid._columns.hidden(e)},_copyRange:function(e,t){var i=this._grid,n=i.rowCount,r=i.normalize(e.topLeft),s=i.normalize(e.bottomRight),o=r.col*n+r.row,a=s.col*n+s.row,l=t.col*n+t.row;this._properties.copy(o,a,l)},_adjustReferences:function(i,n,r,s){if(this._mergedCells=s.reduce(function(e,s){return(s=s.adjust(null,null,null,null,"row"==i,n,r))instanceof t&&e.push(s),e},[]),this._workbook){var o=this._name();this._workbook._sheets.forEach(function(e){e._forFormulas(function(e){e.adjust(o,i,n,r)}),e._forValidations(function(e){e.adjust(o,i,n,r)})}),this._workbook.adjustNames(o,"row"==i,n,r)}var a=this.select();(a=a.adjust(null,null,null,null,"row"==i,n,r))!==e.spreadsheet.NULLREF&&this.select(a)},_forFormulas:function(e){var t=this._properties,i=t.get("formula").values(),n=i.length;i.forEach(function(t,i){e.call(this,t.value,i,n)},this)},_forValidations:function(e){var t=this._properties;t.get("validation").values().forEach(function(t){e.call(this,t.value)},this)},canInsertRow:function(e,t){t=t||1;var i=this._grid,n=this.range(i.rowCount-t,0,t,i.columnCount);return!n.hasValue()},insertRow:function(e){if(!this.canInsertRow(e))throw new Error("Shifting nonblank cells off the worksheet is not supported!");return this.batch(function(){var r=this._grid,s=r.columnCount,o=r.rowCount,a=this.frozenRows();e<a&&this.frozenRows(a+1);for(var l=this._mergedCells.slice(),d=0;d<s;d++){var c=new t(new i(e,d),new i(e,d)),u=r.normalize(c.topLeft),h=r.normalize(c.bottomRight),f=new t(new i(u.row,u.col),new i(o-2,h.col));this._copyRange(f,new i(u.row+1,u.col)),new n(c,this).clear()}this._adjustReferences("row",e,1,l)},{recalc:!0,layout:!0}),this.trigger("insertRow",{index:e}),this},isEnabledRow:function(e){var r=new t(new i(e,0),new i(e,this._grid.columnCount));return new n(r,this).enable()},deleteRow:function(e){return this.isEnabledRow(e)?(this.batch(function(){var r=this._grid,s=r.columnCount,o=this.frozenRows();e<o&&this.frozenRows(o-1);for(var a=this._mergedCells.slice(),l=0;l<s;l++){var d=new t(new i(e,l),new i(e,l));new n(d,this).clear();var c=r.normalize(d.topLeft),u=r.normalize(d.bottomRight),h=new t(new i(c.row+1,c.col),new i(1/0,u.col));this._copyRange(h,c);var f=r.normalize(h.bottomRight);new n(new t(f,f),this).clear()}this._adjustReferences("row",e,-1,a)},{recalc:!0,layout:!0}),this.trigger("deleteRow",{index:e}),this):this},insertColumn:function(e){return this.batch(function(){var r=this._grid,s=r.columnCount,o=this.frozenColumns();e<o&&this.frozenColumns(o+1);for(var a=this._mergedCells.slice(),l=s;l>=e;l--){var d=new t(new i(0,l),new i(1/0,l));if(new n(d,this).clear(),l==e)break;var c=r.normalize(d.topLeft),u=r.normalize(d.bottomRight),h=new t(new i(c.row,c.col-1),new i(u.row,u.col-1));this._copyRange(h,c)}this._adjustReferences("col",e,1,a)},{recalc:!0,layout:!0}),this},isEnabledColumn:function(e){var r=new t(new i(0,e),new i(1/0,e));return new n(r,this).enable()},deleteColumn:function(e){return this.isEnabledColumn(e)?(this.batch(function(){var r=this._grid,s=r.columnCount,o=this.frozenColumns();e<o&&this.frozenColumns(o-1);for(var a=this._mergedCells.slice(),l=e;l<s;l++){var d=new t(new i(0,l),new i(1/0,l));if(new n(d,this).clear(),l==s-1)break;var c=r.normalize(d.topLeft),u=r.normalize(d.bottomRight),h=new t(new i(c.row,c.col+1),new i(u.row,u.col+1));this._copyRange(h,c)}this._adjustReferences("col",e,-1,a)},{recalc:!0,layout:!0}),this):this},hideRow:function(e){return this._property(this._rows.hide.bind(this._rows),e,{layout:!0})},unhideRow:function(e){return this._property(this._rows.unhide.bind(this._rows),e,{layout:!0})},isHiddenRow:function(e){return this._grid._rows.hidden(e)},columnWidth:function(e,t){return this._property(this._columns.value.bind(this._columns,e,e),t,{layout:!0})},rowHeight:function(e,t){return this._property(this._rows.value.bind(this._rows,e,e),t,{layout:!0})},frozenRows:function(e){return this._field("_frozenRows",e,{layout:!0})},frozenColumns:function(e){return this._field("_frozenColumns",e,{layout:!0})},showGridLines:function(e){return this._field("_showGridLines",e,{layout:!0})},_ref:function(n,r,s,o){var a=null;return n instanceof e.spreadsheet.Ref?n:n instanceof e.spreadsheet.Range?n._ref.toRangeRef():("string"==typeof n?a=e.spreadsheet.calc.parseReference(n):(s||(s=1),o||(o=1),a=new t(new i(n,r),new i(n+s-1,r+o-1))),a)},range:function(e,t,i,r){return new n(this._ref(e,t,i,r),this)},forEachMergedCell:function(e,t){var i=!1;void 0===t&&(t=e,i=!0),this._mergedCells.forEach(function(n){(i||n.intersects(e))&&t(n)})},forEachFilterHeader:function(e,t){var i=!1;if(void 0===t&&(t=e,i=!0),this._filter){var n=[];this._filter.ref.forEachColumn(function(t){(i||t.intersects(e))&&n.push(t.topLeft)}),this._mergedCells.forEach(function(e){n=n.map(function(t){return e.intersects(t)?e:t})}),n.reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]).forEach(t)}},forEach:function(e,i){e instanceof t||(e=this._ref(e));for(var n=this._grid.normalize(e.topLeft),r=this._grid.normalize(e.bottomRight),s=n.col;s<=r.col;s++){var o=n.row,a=this._grid.index(o,s),l=this._grid.index(r.row,s);this._properties.forEach(a,l,function(e){i(o++,s,e)})}},startResizing:function(e){this._initialPosition=e,this._resizeInProgress=!0},startAutoFill:function(){this._autoFillInProgress=!0;var e=this.select();this._autoFillOrigin=e,this._autoFillDest=e,this.triggerChange({selection:!0})},updateAutoFill:function(e,t,i,n){this._autoFillDest=e,this._autoFillPunch=t,this._autoFillHint=i,this._autoFillDirection=n,this.triggerChange({selection:!0})},autoFillRef:function(){return this._autoFillDest},autoFillPunch:function(){return this._autoFillPunch},autoFillInProgress:function(){return this._autoFillInProgress},resizingInProgress:function(){return this._resizeInProgress},completeResizing:function(){if(this._resizeInProgress){this._resizeInProgress=!1;var e=this.resizeHintPosition();if(this._initialPosition&&e){var t=this.resizeHandlePosition();t.col!==-1/0?this.columnWidth(t.col,this.columnWidth(t.col)-(this._initialPosition.x-e.x)):this.rowHeight(t.row,this.rowHeight(t.row)-(this._initialPosition.y-e.y))}else this.trigger("change",{resize:!0})}},resizeHandlePosition:function(){return this._resizeHandlePosition},resizeHintPosition:function(e){return void 0!==e&&(this._resizeHintPosition=e,this.trigger("change",{resize:!0})),this._resizeHintPosition},removeResizeHandle:function(){this._resizeHandlePosition&&(this._resizeHintPosition=void 0,this._resizeHandlePosition=void 0,this._initialPosition=void 0,this.trigger("change",{resize:!0}))},positionResizeHandle:function(e){this._resizeHandlePosition=e,this.trigger("change",{resize:!0})},startSelection:function(){this._selectionInProgress=!0},completeSelection:function(){if(this._selectionInProgress&&(this._selectionInProgress=!1,this._resizeHintPosition=void 0,this.trigger("change",{selection:!0})),this._autoFillInProgress){this._autoFillInProgress=!1;var e=this._autoFillDest,t=this._autoFillOrigin;this._autoFillPunch?this.trigger("commandRequest",{command:"ClearContentCommand",options:{operatingRange:this.range(this._autoFillPunch)}}):e.eq(t)?this.triggerChange({selection:!0}):this.trigger("commandRequest",{command:"AutoFillCommand",options:{operatingRange:this.range(e),origin:this.range(t)}}),this._autoFillDest=null,this._autoFillPunch=null,this._autoFillOrigin=null,this.select(e)}},selectionInProgress:function(){return this._selectionInProgress},select:function(e,t){var i,n=this._selectionState();return e&&(e=this._ref(e),i=this._grid.isAxis(e)?e:this.unionWithMerged(e)),n.select(e,i,t)},originalSelect:function(){return this._selectionState().originalSelection},currentSelectionRange:function(){return this._selectionState().currentSelectionRange()},currentOriginalSelectionRange:function(){return this._selectionState().currentOriginalNavigationRange()},currentNavigationRange:function(){return this._selectionState().currentNavigationRange()},nextNavigationRange:function(){return this._selectionState().nextNavigationRange()},previousNavigationRange:function(){return this._selectionState().previousNavigationRange()},selectionRangeIndex:function(){return this._selectionState().selectionRangeIndex},activeCell:function(e){return this._selectionState().activeCell(e)},originalActiveCell:function(){return this._selectionState().originalActiveCell},singleCellSelection:function(){return this._selectionState().singleCellSelection()},unionWithMerged:function(e){var t=this._mergedCells;return e.map(function(e){return e.toRangeRef().union(t)})},trim:function(e){var t=[],i=this._grid;return this._properties.forEachProperty(function(n){t.push(i.trim(e,n.list))}),this.unionWithMerged(e.topLeft.toRangeRef().union(t))},focus:function(e){if(!e){var t=this._focus;return this._focus=null,t}this._focus=e.toRangeRef()},activeCellSelection:function(){return new n(this._grid.normalize(this.activeCell()),this)},selection:function(){return new n(this._grid.normalize(this._selectionState().selection),this)},selectedHeaders:function(){var e=this.select(),t={},i={},n=!1,r=!1;return e.forEach(function(e){var s,o="partial",a="partial",l=(e=e.toRangeRef()).bottomRight,d=l.col===1/0,c=l.row===1/0;if(c&&(r=!0,a="full"),d&&(n=!0,o="full"),!c)for(s=e.topLeft.row;s<=l.row;s++)"full"!==t[s]&&(t[s]=o);if(!d)for(s=e.topLeft.col;s<=l.col;s++)"full"!==i[s]&&(i[s]=a)}),{rows:t,cols:i,allRows:r,allCols:n,all:r&&n}},isInEditMode:function(e){if(void 0===e)return this._inEdit;this._inEdit=e,e&&(this._editSelection.selection=this._viewSelection.selection.clone(),this._editSelection.originalSelection=this._viewSelection.originalSelection.clone(),this._editSelection._activeCell=this._viewSelection._activeCell.clone(),this._editSelection.originalActiveCell=this._viewSelection.originalActiveCell.clone())},_setFormulaSelections:function(e){this._formulaSelections=(e||[]).slice(),this.triggerChange({selection:!0})},_viewActiveCell:function(){return this._viewSelection._activeCell.toRangeRef()},toJSON:function(){var t={},i=this._rows.toJSON("height",t),n=this._columns.toJSON("width",{}),r=this._viewSelection,s=[];this.forEach(e.spreadsheet.SHEETREF,function(n,r,o){if(0!==Object.keys(o).length){o.link&&s.push({ref:e.spreadsheet.Ref.display(null,n,r),target:o.link});var a=t[n];void 0===a&&(a=i.length,i.push({index:n}),t[n]=a),n=i[a],o.index=r,void 0===n.cells&&(n.cells=[]),o.formula&&(o.formula=o.formula.toString()),o.validation&&(o.validation=o.validation.toJSON()),o.color&&(o.color=e.parseColor(o.color).toCss()),o.background&&(o.background=e.parseColor(o.background).toCss()),o.borderTop&&o.borderTop.color&&(o.borderTop.color=e.parseColor(o.borderTop.color).toCss()),o.borderBottom&&o.borderBottom.color&&(o.borderBottom.color=e.parseColor(o.borderBottom.color).toCss()),o.borderRight&&o.borderRight.color&&(o.borderRight.color=e.parseColor(o.borderRight.color).toCss()),o.borderLeft&&o.borderLeft.color&&(o.borderLeft.color=e.parseColor(o.borderLeft.color).toCss()),n.cells.push(o)}});var o={name:this._name(),rows:i,columns:n,selection:r.selection.toString(),activeCell:r.activeCell().toString(),frozenRows:this.frozenRows(),frozenColumns:this.frozenColumns(),showGridLines:this.showGridLines(),mergedCells:this._mergedCells.map(function(e){return e.toString()}),hyperlinks:s};return this._sort&&(o.sort={ref:this._sort.ref.toString(),columns:this._sort.columns.map(function(e){return{index:e.index,ascending:e.ascending}})}),this._filter&&(o.filter={ref:this._filter.ref.toString(),columns:this._filter.columns.map(function(e){var t=e.filter.toJSON();return t.index=e.index,t})}),o},fromJSON:function(t){this.batch(function(){if(void 0!==t.name&&this._name(t.name),void 0!==t.frozenColumns&&this.frozenColumns(t.frozenColumns),void 0!==t.frozenRows&&this.frozenRows(t.frozenRows),void 0!==t.columns&&this._columns.fromJSON("width",t.columns),void 0!==t.rows){this._rows.fromJSON("height",t.rows);for(var i=0;i<t.rows.length;i++){var n=t.rows[i],r=n.index;if(void 0===r&&(r=i),n.cells)for(var s=0;s<n.cells.length;s++){var o=n.cells[s],a=o.index;void 0===a&&(a=s),o.formula&&(o.formula=this._compileFormula(r,a,o.formula)),o.validation&&(o.validation=this._compileValidation(r,a,o.validation)),this._properties.fromJSON(this._grid.index(r,a),o)}}}if(t.selection&&(this._viewSelection.selection=this._viewSelection.originalSelection=this._ref(t.selection)),t.activeCell){var l=this._ref(t.activeCell);this._viewSelection._activeCell=l.toRangeRef(),this._viewSelection.originalActiveCell=l}if(t.mergedCells&&t.mergedCells.forEach(function(e){this.range(e).merge()},this),t.sort&&(this._sort={ref:this._ref(t.sort.ref),columns:t.sort.columns.slice(0)}),t.filter){var d=t.filter.ref,c=void 0===t.filter.columns?[]:t.filter.columns;d?(this._filter={ref:this._ref(d),columns:c.map(function(t){return{index:t.index,filter:e.spreadsheet.Filter.create(t)}})},this._refreshFilter()):e.logToConsole("Dropping filter for sheet '"+t.name+"' due to missing ref")}void 0!==t.showGridLines&&(this._showGridLines=t.showGridLines)}),this._rows._refresh(),this._columns._refresh()},formula:function(e){return this._properties.get("formula",this._grid.cellRefIndex(e))},validation:function(e){return this._properties.get("validation",this._grid.cellRefIndex(e))},resetFormulas:function(){this._forFormulas(function(e){e.reset()})},resetValidations:function(){this._forValidations(function(e){e.reset()})},recalc:function(e,t){function i(){s--,o!=r||s||t()}var n=this._properties.get("formula").values(),r=n.length,s=0,o=0;if(!r&&t)return t();for(;o<r;)s++,n[o++].value.exec(e,t?i:null)},revalidate:function(e){var n=this;this._forValidations(function(r){var s=new i(r.row,r.col),o=new t(s,s);r.exec(e,n._get(o,"value"),n._get(o,"format"))})},_value:function(e,t,i){var n=this._grid.index(e,t);if(void 0===i)return this._properties.get("value",n);this._properties.set("value",n,n,i)},_validation:function(e,t){var i=this._grid.index(e,t);return this._properties.get("validation",i)},_compileValidation:function(t,i,n){return null===n.from&&void 0===n.from||(n.from=(n.from+"").replace(/^=/,"")),null===n.to&&void 0===n.to||(n.to=(n.to+"").replace(/^=/,"")),e.spreadsheet.validation.compile(this._name(),t,i,n)},_compileFormula:function(t,i,n){return n=n.replace(/^=/,""),n=e.spreadsheet.calc.parseFormula(this._name(),t,i,n),e.spreadsheet.calc.compile(n)},_copyValuesInRange:function(e,t,i,n){var r,s,o;for(r=e.col;r<=t.col;r++){s=this._grid.index(e.row,r),o=this._grid.index(t.row,r);for(var a=s,l=e.row;a<=o;++a,++l)i=i.clone(this._name(),l,r),this._properties.set(n,a,a,i)}return i},_set:function(e,t,i){var n,r,s,o=this._grid.normalize(e.topLeft),a=this._grid.normalize(e.bottomRight);if(i&&"formula"==t)"string"==typeof i&&(i=this._compileFormula(o.row,o.col,i)),i=this._copyValuesInRange(o,a,i,"formula");else if(i&&"validation"==t)i=this._compileValidation(o.row,o.col,i),i=this._copyValuesInRange(o,a,i,"validation");else for(n=o.col;n<=a.col;n++)r=this._grid.index(o.row,n),s=this._grid.index(a.row,n),this._properties.set(t,r,s,i),"formula"==t&&this._properties.set("value",r,s,null)},_get:function(e,t){var i=this._grid.normalize(e.topLeft),n=this._grid.index(i.row,i.col);return this._properties.get(t,n)},batch:function(e,t){var i=this.suspendChanges();return this.suspendChanges(!0),e.call(this),this.suspendChanges(i).triggerChange(t)},_sortBy:function(e,t){var i=null;t.forEach(function(t){i=this._sorter.sortBy(e,t.index,this._properties.get("value"),t.ascending,i)},this),this._sort={ref:e,columns:t},this._refreshFilter(),this.triggerChange({recalc:!0})},_refreshFilter:function(){this._filter&&this._filterBy(this._filter.ref,this._filter.columns)},_filterBy:function(t,i){this.batch(function(){for(var n=t.topLeft.row;n<=t.bottomRight.row;n++)this._rows.hidden(n)&&this._rows.unhide(n);i.forEach(function(i){var n=t.resize({top:1}).toColumn(i.index),r=[];if(n!==e.spreadsheet.NULLREF){this.forEach(n,function(e,t,i){i.row=e,r.push(i)}),i.filter.prepare(r);for(var s=0;s<r.length;s++){var o=r[s],a=i.filter.value(o);!1===i.filter.matches(a)&&this.hideRow(o.row)}}},this),this._filter={ref:t,columns:i}},{layout:!0,filter:!0})},filterColumn:function(e){var t=this.filter().ref;return e.toRangeRef().topLeft.col-t.topLeft.col},filter:function(){return this._filter},clearFilter:function(e){this._clearFilter(e instanceof Array?e:[e])},_clearFilter:function(e){this._filter&&this.batch(function(){this._filter.columns=this._filter.columns.filter(function(t){return e.indexOf(t.index)<0}),this._refreshFilter()},{layout:!0,filter:!0})},getAxisState:function(){return{rows:this._rows.getState(),columns:this._columns.getState()}},setAxisState:function(e){this._rows.setState(e.rows),this._columns.setState(e.columns),this.triggerChange({layout:!0})},getState:function(){return{rows:this._rows.getState(),columns:this._columns.getState(),mergedCells:this._mergedCells.map(function(e){return e.clone()}),properties:this._properties.getState()}},setState:function(t){this._rows.setState(t.rows),this._columns.setState(t.columns),this._mergedCells=t.mergedCells,this._properties.setState(t.properties),this.triggerChange(e.spreadsheet.ALL_REASONS)},_merge:function(t){var i,r=this._mergedCells,s=this;return this.batch(function(){i=t.map(function(t){if(t instanceof e.spreadsheet.CellRef)return t;var i=t.toRangeRef().union(r,function(e){r.splice(r.indexOf(e),1)}),o=new n(i,s),a=o._get("formula"),l=o.value(),d=o.format(),c=o.background();o.value(null),o.format(null),o.background(null);var u=new n(i.collapse(),s);return a?u._set("formula",a):u.value(l),u.format(d),u.background(c),r.push(i),i});var o=s._viewSelection;o.selection=s.unionWithMerged(o.originalSelection),o._activeCell=s.unionWithMerged(o.originalActiveCell)},{activeCell:!0,selection:!0}),i}});e.spreadsheet.Sheet=s}}(kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/sheetsbar",["kendo.core","kendo.sortable"],function(){!function(e){if(!(e.support.browser.msie&&e.support.browser.version<9)){var t=e.jQuery,i=e.ui.Widget.extend({init:function(t,n){var r=i.classNames;e.ui.Widget.call(this,t,n),(t=this.element).addClass(r.sheetsBarWrapper),this._tree=new e.dom.Tree(t[0]),this._tree.render([this._addButton(),this._createSheetsWrapper([])]),this._toggleScrollEvents(!0),this._createSortable(),this._sortable.bind("start",this._onSheetReorderStart.bind(this)),this._sortable.bind("end",this._onSheetReorderEnd.bind(this)),t.on("click","."+r.sheetsBarRemove,this._onSheetRemove.bind(this)),t.on("click","li",this._onSheetSelect.bind(this)),t.on("dblclick","li."+r.sheetsBarActive,this._createEditor.bind(this)),t.on("click","."+r.sheetsBarAdd,this._onAddSelect.bind(this))},options:{name:"SheetsBar",scrollable:{distance:200}},events:["select","reorder","rename"],_createEditor:function(){this._editor||(this._renderSheets(this._sheets,this._selectedIndex,!0),this._editor=this.element.find(e.format("input{0}{1}",".",i.classNames.sheetsBarEditor)).focus().on("keydown",this._onEditorKeydown.bind(this)).on("blur",this._onEditorBlur.bind(this)))},_destroyEditor:function(){this._editor.off(),this._editor=null,this._renderSheets(this._sheets,this._selectedIndex,!1)},renderSheets:function(e,t){!e||t<0||this._renderSheets(e,t,!1)},_renderSheets:function(t,n,r){var s,o,a=i.classNames;if(this._isRtl=e.support.isRtl(this.element),this._sheets=t,this._selectedIndex=n,this._renderHtml(r,!0),this._scrollableAllowed()){var l=this._sheetsWrapper(),d=l.children("."+a.sheetsBarPrev),c=l.children("."+a.sheetsBarNext),u=this.element.find("."+a.sheetsBarAdd),h=u.outerWidth()+u.position().left+2,f=d.outerWidth()+2,p=this._sheetsGroup();if(d.css({left:h}),l.addClass(a.sheetsBarScrollable+" "+a.sheetsBarSheetsWrapper),p.css({marginLeft:h}),s=l[0].offsetWidth,(o=p[0].scrollWidth)+h>s){var m=Math.ceil(e.parseFloat(c.css("right")));this._scrollableModeActive||(this._nowScrollingSheets=!1,this._scrollableModeActive=!0),p.css({marginLeft:f+h,marginRight:c.outerWidth()+m+2})}else this._scrollableModeActive&&o<=s?(this._scrollableModeActive=!1,p.css({marginLeft:h,marginRight:""})):p.css({marginLeft:h});this._toggleScrollButtons()}},_toggleScrollButtons:function(e){var t=this._sheetsGroup(),n=this._sheetsWrapper(),r=t.scrollLeft(),s=n.find("."+i.classNames.sheetsBarPrev),o=n.find("."+i.classNames.sheetsBarNext);!1===e?(s.toggle(!1),o.toggle(!1)):(s.toggle(this._isRtl?r<t[0].scrollWidth-t[0].offsetWidth-1:0!==r),o.toggle(this._isRtl?0!==r:r<t[0].scrollWidth-t[0].offsetWidth-1))},_toggleScrollEvents:function(e){var t,n,r=this,s=i.classNames,o=r.options,a=r._sheetsWrapper();t=a.children("."+s.sheetsBarPrev),n=a.children("."+s.sheetsBarNext),e?(t.on("mousedown",function(){r._nowScrollingSheets=!0,r._scrollSheetsByDelta(o.scrollable.distance*(r._isRtl?1:-1))}),n.on("mousedown",function(){r._nowScrollingSheets=!0,r._scrollSheetsByDelta(o.scrollable.distance*(r._isRtl?-1:1))}),t.add(n).on("mouseup",function(){r._nowScrollingSheets=!1})):(t.off(),n.off())},_renderHtml:function(t,n){var r,s=[],o=e.dom,a=o.element,l=this._sheets,d=this._selectedIndex,c=i.classNames;for(r=0;r<l.length;r++){var u=l[r],h=r===d,f={className:c.sheetsBarKItem+" "},p=[];if(f.className+=h?c.sheetsBarKActive+" "+c.sheetsBarActive:c.sheetsBarInactive,h&&t)p.push(a("input",{type:"text",value:u.name(),className:c.sheetsBarKTextbox+" "+c.sheetsBarEditor,maxlength:50},[]));else{p.push(a("span",{className:c.sheetsBarKLink,title:u.name()},[o.text(u.name())]));var m=a("span",{className:c.sheetsBarKIcon+" "+c.sheetsBarKFontIcon+" "+c.sheetsBarKIconX},[]);p.push(a("span",{className:c.sheetsBarKLink+" "+c.sheetsBarRemove},[m]))}s.push(a("li",f,p))}this._tree.render([this._addButton(),this._createSheetsWrapper(s,n)])},_createSheetsWrapper:function(t,n){var r=e.dom.element,s=i.classNames,o=[r("ul",{className:s.sheetsBarKReset},t)];if(!0){var a=s.sheetsBarKButton+" "+s.sheetsBarKButtonBare+" ";o.push(r("span",{className:a+s.sheetsBarPrev},[r("span",{className:s.sheetsBarKIcon+" "+s.sheetsBarKArrowW},[])])),o.push(r("span",{className:a+s.sheetsBarNext},[r("span",{className:s.sheetsBarKIcon+" "+s.sheetsBarKArrowE},[])]))}return r("div",{className:s.sheetsBarItems},o)},_createSortable:function(){var n=i.classNames;this._sortable=new e.ui.Sortable(this.element,{filter:e.format("ul li.{0},ul li.{1}",n.sheetsBarActive,n.sheetsBarInactive),container:"."+n.sheetsBarItems,axis:"x",animation:!1,ignore:"input",end:function(){this.draggable.hint&&this.draggable.hint.remove()},hint:function(e){var i=t(e).clone();return i.wrap("<div class='"+n.sheetsBarHintWrapper+"'><ul class='"+n.sheetsBarKResetItems+"'></ul></div>").closest("div")}})},_onEditorKeydown:function(e){this._editor&&(13===e.which&&(this._destroyEditor(),this._onSheetRename(t(e.target).val())),27===e.which&&(this._destroyEditor(),this._onSheetRename()))},_onEditorBlur:function(e){this._editor&&(this._destroyEditor(),this._onSheetRename(t(e.target).val()))},_onSheetReorderEnd:function(e){e.preventDefault(),this.trigger("reorder",{oldIndex:e.oldIndex,newIndex:e.newIndex})},_onSheetReorderStart:function(e){this._editor&&e.preventDefault()},_onSheetRemove:function(e){var i=t(e.target).closest("li").text();this._editor&&(this._destroyEditor(),this._onSheetRename(this._editor.val())),this.trigger("remove",{name:i})},_onSheetSelect:function(e){var n=t(e.target).text();if(!t(e.target).is("."+i.classNames.sheetsBarEditor)&&n){if(this._editor){var r=this._editor.val();this._destroyEditor(),this._onSheetRename(r)}this._scrollSheetsToItem(t(e.target).closest("li")),this.trigger("select",{name:n,isAddButton:!1})}else e.preventDefault()},_onSheetRename:function(e){this.trigger("rename",{name:e,sheetIndex:this._selectedIndex})},_onAddSelect:function(){this.trigger("select",{isAddButton:!0})},_addButton:function(){var t=e.dom.element,n=i.classNames;return t("a",{className:n.sheetsBarAdd+" "+n.sheetsBarKButton},[t("span",{className:n.sheetsBarKSprite+" "+n.sheetsBarKIcon+" "+n.sheetsBarKFontIcon+" "+n.sheetsBarKIconPlus},[])])},destroy:function(){this._sortable.destroy()},_scrollableAllowed:function(){var e=this.options;return e.scrollable&&!isNaN(e.scrollable.distance)},_scrollSheetsToItem:function(e){var t=this;if(t._scrollableModeActive){var i,n=t._sheetsGroup(),r=n.scrollLeft(),s=e.outerWidth(),o=t._isRtl?e.position().left:e.position().left-n.children().first().position().left,a=n[0].offsetWidth,l=Math.ceil(parseFloat(n.css("padding-left")));t._isRtl?o<0?i=r+o-(a-r)-l:o+s>a&&(i=r+o-s+2*l):r+a<o+s?i=o+s-a+2*l:r>o&&(i=o-l),n.finish().animate({scrollLeft:i},"fast","linear",function(){t._toggleScrollButtons()})}},_sheetsGroup:function(){return this._sheetsWrapper().children("ul")},_sheetsWrapper:function(){return this.element.find("."+i.classNames.sheetsBarItems)},_scrollSheetsByDelta:function(e){var t=this,i=t._sheetsGroup(),n=i.scrollLeft();i.finish().animate({scrollLeft:n+e},"fast","linear",function(){t._nowScrollingSheets?t._scrollSheetsByDelta(e):t._toggleScrollButtons()})}});e.spreadsheet.SheetsBar=i,t.extend(!0,i,{classNames:{sheetsBarWrapper:"k-widget k-header",sheetsBarSheetsWrapper:"k-tabstrip k-floatwrap k-tabstrip-bottom",sheetsBarActive:"k-spreadsheet-sheets-bar-active",sheetsBarInactive:"k-spreadsheet-sheets-bar-inactive",sheetsBarAdd:"k-spreadsheet-sheets-bar-add",sheetsBarRemove:"k-spreadsheet-sheets-remove",sheetsBarItems:"k-spreadsheet-sheets-items",sheetsBarEditor:"k-spreadsheet-sheets-editor",sheetsBarScrollable:"k-tabstrip-scrollable",sheetsBarNext:"k-tabstrip-next",sheetsBarPrev:"k-tabstrip-prev",sheetsBarKItem:"k-item k-state-default",sheetsBarKActive:"k-state-active k-state-tab-on-top",sheetsBarKTextbox:"k-textbox",sheetsBarKLink:"k-link",sheetsBarKIcon:"k-icon",sheetsBarKFontIcon:"k-font-icon",sheetsBarKButton:"k-button k-button-icon",sheetsBarKButtonBare:"k-button-bare",sheetsBarKArrowW:"k-i-arrow-w",sheetsBarKArrowE:"k-i-arrow-e",sheetsBarKReset:"k-reset k-tabstrip-items",sheetsBarKIconX:"k-i-x",sheetsBarKSprite:"k-sprite",sheetsBarKIconPlus:"k-i-plus",sheetsBarHintWrapper:"k-widget k-tabstrip k-tabstrip-bottom k-spreadsheet-sheets-items-hint",sheetsBarKResetItems:"k-reset k-tabstrip-items"}})}}(window.kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/calc",["spreadsheet/runtime"],function(){"use strict";function e(e){e=e.toUpperCase();for(var t=0,i=0;i<e.length;++i)t=26*t+e.charCodeAt(i)-64;return t-1}function t(e){return parseInt(e,10)-1}function i(e,t,i,n){function r(e){return e.index=h.length,h.push(e),e}function o(e,t){if(p(e,t))return n.next();var i=n.peek();i?n.croak("Expected "+e+" "+t+" but found "+i.type+" "+i.value+""):n.croak("Expected "+e+" "+t+"")}function a(e){return u(function(e){return p("punc","(")||p("ref")||p("num")||p("func")?{type:"binary",op:" ",left:e,right:a(!1)}:e}(l(e)),0,e)}function l(t){var i;return p("ref")?i=function(t){t.hasSheet()||t.setSheet(e);return r(t)}(n.next()):p("func")?i=function(){var e=n.next();e=e.value,o("punc","(");var t=[];if(!p("punc",")"))for(;;)if(p("op",","))t.push({type:"null"}),n.next();else{if(t.push(a(!1)),n.eof()||p("punc",")"))break;o("op",",")}return o("punc",")"),{type:"func",func:e,args:t}}():p("punc","(")?(n.next(),i=a(!0),o("punc",")")):p("punc","{")?(n.next(),i=function(){var e=[],t=[e],i=!0;for(;!n.eof()&&!p("punc","}");)i?i=!1:p("punc",";")?(t.push(e=[]),n.next()):o("op",","),e.push(a(!1));return{type:"matrix",value:t}}(),o("punc","}")):p("num")||p("str")?i=n.next():p("sym")?i=function(e){if("TRUE"==e.upper||"FALSE"==e.upper)return"TRUE"==e.upper?m:g;return r(new c(e.value))}(n.next()):p("op","+")||p("op","-")?i={type:"prefix",op:n.next().value,exp:a(t)}:n.peek()?n.croak("Parse error"):n.croak("Incomplete expression"),d(i)}function d(e){return p("op","%")?(n.next(),d({type:"postfix",op:"%",exp:e})):e}function u(e,t,i){var r=p("op");if(r&&(i||","!=r.value)){var s=f[r.value];if(s>t){n.next();var o=u(l(i),s,i);return u({type:"binary",op:r.value,left:e,right:o},t,i)}}return e}var h=[],p=(n=s(n,{row:t,col:i})).is;return{type:"exp",ast:a(!0),refs:h,sheet:e,row:t,col:i}}function n(e,t){function i(e,t){switch(e.type){case"ref":case"num":case"str":case"null":case"bool":return n(e,t);case"prefix":case"postfix":return function(e,t){return i({type:"func",func:"unary"+e.op,args:[e.exp]},t)}(e,t);case"binary":return function(e,t){return i({type:"func",func:"binary"+e.op,args:[e.left,e.right]},t)}(e,t);case"func":return function(e,t){switch(e.func.toLowerCase()){case"if":return function(e,t,n,r){return i(e,function(e){var a=s(r),l=o("T"),d=o("E");return{type:"func",func:"if",args:[a,e,{type:"lambda",vars:[l],body:i(t||m,function(e){return{type:"call",func:{type:"var",name:l},args:[e]}})},{type:"lambda",vars:[d],body:i(n||g,function(e){return{type:"call",func:{type:"var",name:d},args:[e]}})}]}})}(e.args[0],e.args[1],e.args[2],t);case"and":return function(e,t){if(0===e.length)return n(m,t);return i({type:"func",func:"IF",args:[e[0],{type:"func",func:"AND",args:e.slice(1)},g]},t)}(e.args,t);case"or":return function(e,t){if(0===e.length)return n(g,t);return i({type:"func",func:"IF",args:[e[0],m,{type:"func",func:"OR",args:e.slice(1)}]},t)}(e.args,t);case"true":return t(m);case"false":return t(g)}return function t(n,r){return r==e.args.length?{type:"func",func:e.func,args:n}:i(e.args[r],function(e){return t(n.concat([e]),r+1)})}([s(t)],0)}(e,t);case"lambda":return function(e,t){var n=o("K"),r=i(e.body,function(e){return{type:"call",func:{type:"var",value:n},args:[e]}});return t({type:"lambda",vars:[n].concat(e.vars),body:r})}(e,t);case"matrix":return r(e.value,t,!0)}throw new Error("Cannot CPS "+e.type)}function n(e,t){return t(e)}function r(e,t,n){var s=[];return function o(a){return a==e.length?t({type:"matrix",value:s}):(n?r:i)(e[a],function(e){return s[a]=e,o(a+1)})}(0)}function s(e){var t=o("R");return{type:"lambda",vars:[t],body:e({type:"var",name:t})}}function o(e){return e||(e=""),(e="_"+e)+ ++a}var a=0;return i(e,t)}function r(e){return e}function s(i,n){function s(){return null==x&&(x=a()),x}function a(){var e,t=i.peek();return t&&("sym"!=t.type&&"rc"!=t.type&&"num"!=t.type||(e=w(8,h)||w(6,p)||w(6,m)||w(4,g)||w(4,v)||w(2,_)||w(2,k)),e||(e=i.next())),e}function u(r,s){if("rc"==r.type)return!r.rel||n.forEditor||null!=n.row&&null!=n.col||i.croak("Cannot read relative cell in RC notation"),new d(r.row,r.col,r.rel);if("num"==r.type)return r.value<=1048577?C(new d(t(r.value),s?-1/0:1/0,2)):null;var o=r.value,a=/^(\$)?([a-z]+)(\$)?(\d+)$/i.exec(o);if(a){var l=t(a[4]),c=e(a[2]);return l<=1048576&&c<=16383?C(new d(t(a[4]),e(a[2]),(a[1]?0:1)|(a[3]?0:2))):null}var u="$"==o.charAt(0);if(u&&(o=o.substr(1)),/^\d+$/.test(o)){var l=t(o);if(l<=1048576)return C(new d(t(o),s?-1/0:1/0,u?0:2))}else{var c=e(o);if(c<=16383)return C(new d(s?-1/0:1/0,e(o),u?0:1))}}function h(e,t,i,n,r,s,o,a){if("sym"==e.type&&"op"==t.type&&":"==t.value&&"sym"==i.type&&"punc"==n.type&&"!"==n.value&&("sym"==r.type||"rc"==r.type||"num"==r.type&&r.value==r.value|0)&&"op"==s.type&&":"==s.value&&("sym"==o.type||"rc"==o.type||"num"==o.type&&o.value==o.value|0)&&o.type==r.type&&("punc"!=a.type||"("!=a.value||o.space)){var d=u(r,!0),c=u(o,!1);if(d&&c)return y(7),S(new l(d.setSheet(e.value,!0),c.setSheet(i.value,!0)).setSheet(e.value,!0),e,o)}}function p(e,t,i,n,r,s){if("sym"==e.type&&"op"==t.type&&":"==t.value&&"sym"==i.type&&"punc"==n.type&&"!"==n.value&&("sym"==r.type||"rc"==r.type||"num"==r.type&&r.value==r.value|0)&&("punc"!=s.type||"("!=s.value||r.space)){var o=u(r);if(o){y(5);var a=o.clone();return S(new l(o.setSheet(e.value,!0),a.setSheet(i.value,!0)).setSheet(e.value,!0),e,r)}}}function m(e,t,i,n,r,s){if("sym"==e.type&&"punc"==t.type&&"!"==t.value&&("sym"==i.type||"rc"==i.type||"num"==i.type&&i.value==i.value|0)&&"op"==n.type&&":"==n.value&&("sym"==r.type||"rc"==r.type||"num"==r.type&&r.value==r.value|0)&&("punc"!=s.type||"("!=s.value||r.space)){var o=u(i,!0),a=u(r,!1);if(o&&a)return y(5),S(new l(o,a).setSheet(e.value,!0),e,r)}}function g(e,t,i,n){if("sym"==e.type&&"punc"==t.type&&"!"==t.value&&("sym"==i.type||"rc"==i.type||"num"==i.type&&i.value==i.value|0)&&("punc"!=n.type||"("!=n.value||i.space)){y(3);var r=u(i);return r||(r=new c(i.value)),S(r.setSheet(e.value,!0),e,i)}}function v(e,t,i,n){if(("sym"==e.type||"rc"==e.type||"num"==e.type&&e.value==e.value|0)&&"op"==t.type&&":"==t.value&&("sym"==i.type||"rc"==i.type||"num"==i.type&&i.value==i.value|0)&&("punc"!=n.type||"("!=n.value||i.space)){var r=u(e,!0),s=u(i,!1);if(r&&s)return y(3),S(new l(r,s),e,i)}}function _(e,t){if(("sym"==e.type||"rc"==e.type)&&("punc"!=t.type||"("!=t.value||e.space)){var i=u(e);if(i&&isFinite(i.row)&&isFinite(i.col))return y(1),S(i,e,e)}}function k(e,t){if("sym"==e.type&&"punc"==t.type&&"("==t.value&&!e.space)return e.type="func",y(1),e}var w=(i=function(e,t){function i(e){return/[0-9]/i.test(e)}function n(e){return/[a-z$_]/i.test(e)||e.toLowerCase()!=e.toUpperCase()}function r(e){return n(e)||i(e)||"."==e}function s(e){return" \t\n".indexOf(e)>=0}function o(t,i){return{type:"sym",value:t,upper:t.toUpperCase(),space:s(e.peek()),quote:i}}function a(e,t,i){if(!e&&!i||e&&i){var n=e&&/-$/.test(e),r=parseInt(t,10);return n&&(r=-r),e||r--,r}}function l(){if(e.eof())return null;var s,l=e.peek();return'"'==l?(e.next(),{type:"str",value:e.readEscaped('"')}):"'"==l?(e.next(),o(e.readEscaped("'"),!0)):i(l)?function(){var e=!1,t=p(function(t){return"."==t?!e&&(e=!0,!0):i(t)});return{type:"num",value:parseFloat(t)}}():n(l)?function(){var t=e.lookingAt(/^R(\[-?)?([0-9]+)(\])?C(\[-?)?([0-9]+)(\])?/i);if(t){var i=a(t[1],t[2],t[3]),n=a(t[4],t[5],t[6]);if(null!=i&&null!=n)return e.skip(t),{type:"rc",row:i,col:n,rel:(t[4]?1:0)|(t[1]?2:0)}}return o(p(r))}():function(e){return e in f}(l)?{type:"op",value:p(function(e,t){return t+e in f})}:function(e){return"!;(){}[]".indexOf(e)>=0}(l)?{type:"punc",value:e.next()}:(s=e.lookingAt(/^#([a-z\/]+)[?!]/i))?(e.skip(s),{type:"error",value:s[1]}):(t.forEditor||e.croak("Can't handle character: "+l),{type:"error",value:e.next()})}function d(){for(;u.length<=h;){p(s);var i=e.pos(),n=l();t.forEditor&&n&&(n.begin=i,n.end=e.pos()),u.push(n)}return u[h]}function c(){var e=d();return e&&h++,e}var u=[],h=0,p=e.readWhile;return{next:c,peek:d,eof:function(){return null==d()},croak:e.croak,ahead:function(e,t){var i=h,n=[];for(;e-- >0;)n.push(c()||b);return h=i,t.apply(n,n)},skip:function(e){h+=e}}}(o(i),n)).ahead,y=i.skip,x=null,C=null!=n.row&&null!=n.col?function(e){return 1&e.rel&&(e.col-=n.col),2&e.rel&&(e.row-=n.row),e}:r,S=n.forEditor?function(e,t,i){return e.begin=t.begin,e.end=i.end,e}:r;return{peek:s,next:function(){if(null!=x){var e=x;return x=null,e}return a()},croak:i.croak,eof:i.eof,is:function(e,t){var i=s();return null==i||null!=e&&i.type!==e||null!=t&&i.value!==t?null:i}}}function o(e){function t(){var t=e.charAt(o++);return"\n"==t?(0,0):0,t}function i(){return e.charAt(o)}function n(){return""===i()}function r(e){throw new p(e,o)}function s(e){for(;e-- >0;)t()}var o=0;return{next:t,peek:i,eof:n,croak:r,readWhile:function(e){var r="";for(;!n()&&e(i(),r);)r+=t();return r},readEscaped:function(e){var i=!1,r="";for(;!n();){var s=t();if(i)r+=s,i=!1;else if("\\"==s)i=!0;else{if(s==e)break;r+=s}}return r},lookingAt:function(t){return t.exec(e.substr(o))},skip:function(t){if("string"==typeof t)e.substr(o,t.length)!=t&&r("Expected "+t),s(t.length);else if(t instanceof RegExp){var i=t.exec(e.substr(o));if(i)return s(i[0].length),i}else s(t[0].length)},forward:s,pos:function(){return o}}}if(kendo.support.browser.msie&&kendo.support.browser.version<9)return;var a=kendo.spreadsheet,l=a.RangeRef,d=a.CellRef,c=a.NameRef,u=a.calc,h=u.runtime,f=Object.create(null),p=kendo.Class.extend({init:function(e,t){this.message=e,this.pos=t},toString:function(){return this.message}});!function(e){e.forEach(function(t,i){t.forEach(function(t){f[t]=e.length-i})})}([[":"],[" "],[","],["%"],["^"],["*","/"],["+","-"],["&"],["=","<",">","<=",">=","<>"]]);var m={type:"bool",value:!0},g={type:"bool",value:!1};var v=function(e){return function(t){var i=e[t];return i||(i=e[t]=new Function("'use strict';return("+t+")")()),i}}(Object.create(null)),_=Object.create(null);var b={type:"eof"};var k=[],w=u.registerFormatParser=function(e){k.push(e)};u.parse=function(e,t,n,r){if(r instanceof Date)return{type:"date",value:h.dateToSerial(r)};if("number"==typeof r)return{type:"number",value:r};if("boolean"==typeof r)return{type:"boolean",value:r};if(r+="",/^'/.test(r))return{type:"string",value:r.substr(1)};if(/^[0-9.]+%$/.test(r)){var s=r.substr(0,r.length-1),o=parseFloat(s);if(!isNaN(o)&&o==s)return{type:"percent",value:o/100}}if(/^=/.test(r))return r=r.substr(1),/\S/.test(r)?i(e,t,n,r):{type:"string",value:"="+r};for(var a=0;a<k.length;++a){var l=k[a](r);if(l)return l}if("true"==r.toLowerCase())return{type:"boolean",value:!0};if("false"==r.toLowerCase())return{type:"boolean",value:!1};var d=h.parseDate(r);if(d)return{type:"date",value:h.dateToSerial(d)};var o=parseFloat(r);return!isNaN(o)&&r.length>0&&o==r?{type:"number",value:o}:{type:"string",value:r}};u.parseFormula=i,u.parseReference=function(i,n){if("#sheet"==i.toLowerCase())return a.SHEETREF;e:{var r;{if(!(r=/^(\$)?([a-z]+)(\$)?(\d+)$/i.exec(i))){for(var o=s(i,{}),c=[];;){var u=o.next();if(u instanceof d)u.rel=0;else{if(!(u instanceof l))break e;u.topLeft.rel=0,u.bottomRight.rel=0}if(c.push(u),o.eof())break;if(!o.is("op",","))break e;o.next()}return 1==c.length?c[0]:new a.UnionRef(c)}var h=t(r[4]),f=e(r[2]);if(h<=1048576&&f<=16383)return new d(t(r[4]),e(r[2]))}}if(!n)throw new Error("Cannot parse reference: "+i)},u.compile=function(e){function t(e){var n=e.type;if("num"==n)return e.value+"";if("str"==n)return JSON.stringify(e.value);if("return"==n)return"context.resolve("+t(e.value)+")";if("func"==n)return"context.func("+JSON.stringify(e.func)+", "+t(e.args[0])+", "+i(e.args.slice(1))+")";if("call"==n)return t(e.func)+"("+e.args.map(t).join(", ")+")";if("ref"==n)return"refs["+e.index+"]";if("bool"==n)return""+e.value;if("if"==n)return"(context.bool("+t(e.co)+") ? "+t(e.th)+" : "+t(e.el)+")";if("lambda"==n)return"(function("+e.vars.join(", ")+"){ return("+t(e.body)+") })";if("var"==n)return e.name;if("matrix"==n)return i(e.value);if("null"==n)return"null";throw new Error("Cannot compile expression "+n)}function i(e){return"[ "+e.map(t).join(", ")+" ]"}var r=function(e){function t(e,n,r){function s(t){var s=e.op,o=f[s]<r||!r&&","==s||"binary"==n.type&&r==f[s]&&e===n.right;return i(t(),o)}switch(e.type){case"num":case"bool":return JSON.stringify(e.value);case"str":return JSON.stringify(JSON.stringify(e.value));case"ref":return"this.refs["+e.index+"].print(row, col)";case"prefix":return s(function(){return JSON.stringify(e.op)+" + "+t(e.exp,e,f[e.op])});case"postfix":return s(function(){return t(e.exp,e,f[e.op])+" + "+JSON.stringify(e.op)});case"binary":return s(function(){var n=i(t(e.left,e,f[e.op]),e.left instanceof c&&":"==e.op),r=i(t(e.right,e,f[e.op]),e.right instanceof c&&":"==e.op);return n+" + "+JSON.stringify(e.op)+" + "+r});case"func":return JSON.stringify(e.func+"(")+" + "+(e.args.length>0?e.args.map(function(i){return t(i,e,0)}).join(" + ', ' + "):"''")+" + ')'";case"matrix":return"'{ ' + "+e.value.map(function(i){return i.map(function(i){return t(i,e,0)}).join(" + ', ' + ")}).join(" + '; ' + ")+"+ ' }'";case"null":return"''"}throw new Error("Cannot make printer for node "+e.type)}function i(e,t){return t?"'(' + "+e+" + ')'":e}return v("function(row, col){return("+t(e.ast,e,0)+")}")}(e),s=r.call(e),o=_[s];if(o)return o.clone(e.sheet,e.row,e.col);var a=t(n(e.ast,function(e){return{type:"return",value:e}}));return a=["function(){","var context = this, refs = context.formula.absrefs",a,"}"].join(";\n"),o=new h.Formula(e.refs,v(a),r,e.sheet,e.row,e.col),_[s]=o,o},u.InputStream=o,u.ParseError=p,u.tokenize=function(e,t,i){var n=[];e=s(e,{forEditor:!0,row:t,col:i});for(;!e.eof();)n.push(function(){var n=e.next();"sym"==n.type?"TRUE"==n.upper?(n.type="bool",n.value=!0):"FALSE"==n.upper&&(n.type="bool",n.value=!1):"ref"==n.type&&(n={type:"ref",ref:null!=t&&null!=i?n.absolute(t,i):n,begin:n.begin,end:n.end});return n}());var r=n[0];"op"==r.type&&"="==r.value&&(r.type="startexp");return n},w(function(e){var t;if(t=/^(\d+):(\d+)$/.exec(e)){var i=parseInt(t[1],10),n=parseInt(t[2],10);return{type:"date",format:"hh:mm",value:h.packTime(i,n,0,0)}}if(t=/^(\d+):(\d+)(\.\d+)$/.exec(e)){var n=parseInt(t[1],10),r=parseInt(t[2],10),s=1e3*parseFloat(t[3]);return{type:"date",format:"mm:ss.00",value:h.packTime(0,n,r,s)}}if(t=/^(\d+):(\d+):(\d+)$/.exec(e)){var i=parseInt(t[1],10),n=parseInt(t[2],10),r=parseInt(t[3],10);return{type:"date",format:"hh:mm:ss",value:h.packTime(i,n,r,0)}}if(t=/^(\d+):(\d+):(\d+)(\.\d+)$/.exec(e)){var i=parseInt(t[1],10),n=parseInt(t[2],10),r=parseInt(t[3],10),s=1e3*parseFloat(t[4]);return{type:"date",format:"hh:mm:ss.00",value:h.packTime(i,n,r,s)}}}),w(function(e){var t,i=kendo.culture(),n=i.numberFormat[","],r=i.numberFormat["."],s=i.numberFormat.currency.symbol,o=new RegExp("^(\\"+s+"\\s*)?(\\d+(\\"+n+"\\d{3})*(\\"+r+"\\d+)?)(\\s*\\"+s+")?$");if(t=o.exec(e)){var a=t[2].replace(new RegExp("\\"+n,"g"),"").replace(r,"."),l="#";return(t[1]||t[3]||t[5])&&(l+=",#"),t[4]&&(l+="."+function(e,t){var i="";for(;t-- >0;)i+=e;return i}("0",t[1]||t[5]?2:t[4].length-1)),t[1]&&(l='"'+t[1]+'"'+l),t[5]&&(l=l+'"'+t[5]+'"'),{type:"number",format:"#"==l?null:l,value:parseFloat(a)}}})}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/excel-reader",["kendo.core","kendo.color","util/parse-xml","spreadsheet/calc"],function(){"use strict";function e(e,u,f){var m=s(e),g=o(e,"_rels/workbook.xml"),_=l(e,g.byType.theme[0]),b=a(e,_),k=[],y=0;r(e,"xl/workbook.xml",{enter:function(n,s){if(this.is(x)){var o=s["r:id"],a=g.byId[o],l=s.name,c=function(e,n){var s={rows:0,cols:0};return r(e,"xl/"+n,{enter:function(e,n){if("dimension"==e){var r=p(n.ref);r.bottomRight&&(s.cols=r.bottomRight.col+1,s.rows=r.bottomRight.row+1)}else"sheetFormatPr"===e?(n.defaultColWidth&&(s.columnWidth=t(parseFloat(n.defaultColWidth))),n.defaultRowHeight&&(s.rowHeight=i(parseFloat(n.defaultRowHeight)))):this.is(w)&&this.exit()}}),s}(e,a);k.push({workbook:u,zip:e,strings:m,styles:b,file:a,options:{name:l,rows:Math.max(u.options.rows||0,c.rows),columns:Math.max(u.options.columns||0,c.cols),columnWidth:c.columnWidth,rowHeight:c.rowHeight}})}else this.is(F)&&s.activeTab&&(y=d(s.activeTab))},text:function(e){var t=this.is(v);if(t&&!c(t.function)&&!c(t.vbProcedure)){var i=p(e,!0);u.defineName(t.name,i,c(t.hidden))}}});var C=new h.Deferred;C.progress(function(e){f&&f.notify(e)}).then(function(){var e=u.sheets();!function(e){for(var t=0;t<e.length;t++)e[t].suspendChanges(!1).triggerChange({recalc:!0})}(e),u.activeSheet(e[y]),f&&f.resolve()}),function(e,t,i){for(var r=(new h.Deferred).resolve(),s=0;s<e.length;s++)!function(s,o){r=r.then(function(){var r=t.insertSheet(s.options);r.suspendChanges(!0);var a=function(e,t){var i=new h.Deferred;return setTimeout(function(){n(t.zip,t.file,e,t.strings,t.styles),i.resolve()},0),i}(r,s),l={sheet:r,progress:o/(e.length-1)};return a.then(function(){i.notify(l)}),a})}(e[s],s);r.then(function(){i.resolve()})}(k,u,C)}function t(e){var t=(256*e+Math.floor(128/7))/256;return 7*Math.floor(t)}function i(e){return 1.5625*e}function n(e,n,s,a,l){var u,h,f,v,x,S=s._columns._count,T=null,F=n.replace(/worksheets\//,"worksheets/_rels/"),M=o(e,F);r(e,"xl/"+n,{enter:function(e,n){if(this.is(m)){f=null,v=null,x=null,null==(u=n.r)&&((u=p(T)).col++,u=u.toString()),T=u,h=n.t;var r=n.s;null!=r&&function(e,t,i,n){function r(e,t){var i=l[e];if(null!=i&&!i)return!1;if(o=l[t],s&&null==o){if(null!=(i=s[e])&&!i)return!1;o=s[t]}return null!=o}var s,o,a=e.range(t),l=i.inlineStyles[n];l.xfId&&(s=i.namedStyles[l.xfId]);r("applyBorder","borderId")&&function(e){function t(t,i){var n=e[t];if(n){var r=A[n.style];if(0!==r){var s=n.color;null==s&&(s="#000"),a._property(i,{size:r,color:s})}}}t("left","borderLeft"),t("top","borderTop"),t("right","borderRight"),t("bottom","borderBottom")}(i.borders[o]);r("applyFont","fontId")&&function(e){a.fontFamily(e.name),a._property("fontSize",e.size),e.bold&&a.bold(!0);e.italic&&a.italic(!0)}(i.fonts[o]);r("applyAlignment","textAlign")&&a.textAlign(o);r("applyAlignment","verticalAlign")&&a.verticalAlign(o);r("applyAlignment","wrapText")&&a._property("wrap",o);r("applyFill","fillId")&&function(e){"solid"==e.type&&a.background(e.color)}(i.fills[o]);r("applyNumberFormat","numFmtId")&&function(e){var t="string"==typeof e?e:e.formatCode;null==t||/^general$/i.test(t)||(t=t.replace(/^\[\$-[0-9]+\]/,""),a.format(t))}(i.numFmts[o]||I[o])}(s,u,l,r)}else if(this.is(b))s.range(n.ref).merge();else if(this.is(g)){var o=d(n.min)-1,a=Math.min(S,d(n.max))-1;if(n.width){var _=t(parseFloat(n.width));s._columns.values.value(o,a,_)}if("1"===n.hidden)for(var C=o;C<=a;C++)s.hideColumn(C)}else if(this.is(w)){var D=d(n.r)-1;if(n.ht){var F=i(parseFloat(n.ht));s._rows.values.value(D,D,F)}"1"===n.hidden&&s.hideRow(D)}else if(this.is(y)){if(n.activeCell){var H=p(n.activeCell);s.select(H,!0)}}else if(this.is(k))"frozen"==n.state&&(n.xSplit&&s.frozenColumns(d(n.xSplit)),n.ySplit&&s.frozenRows(d(n.ySplit)));else if(this.is(E))s.showGridLines(c(n.showGridLines,!0));else if(this.is(R)){var z=n["r:id"],N=M.byId[z];N&&s.range(n.ref).link(N)}},leave:function(e){if(this.is(m)){if(null!=v)try{s.range(x||u).formula(v)}catch(e){s.range(x||u).value(v).background("#ffaaaa")}else if(null!=f){var t=s.range(u);t._get("formula")||(h&&"n"!=h?"s"==h?f=a[d(f)]:"b"==h?f="1"===f:"d"==h&&(f=kendo.parseDate(f)):f=parseFloat(f),t.value(f))}}else"cols"==e?s._columns._refresh():"sheetData"==e&&s._rows._refresh()},text:function(e){var t;this.is(D)||this.is(C)?f=e:(t=this.is(_))&&(v=e,"shared"==t.t&&(x=t.ref))}})}function r(e,t,i){var n=e.files[t];n&&f(n.asUint8Array(),i)}function s(e){var t,i=[];return r(e,"xl/sharedStrings.xml",{enter:function(){this.is(T)&&(t="")},leave:function(){this.is(T)&&i.push(t)},text:function(e){this.is(S)&&(t+=e)}}),i}function o(e,t){var i={byId:{},byType:{theme:[]}};return r(e,"xl/"+t+".rels",{enter:function(e,t){if("Relationship"==e){i.byId[t.Id]=t.Target;var n=t.Type.match(/\w+$/)[0],r=i.byType[n]||[];r.push(t.Target),i.byType[n]=r}}}),i}function a(e,t){function i(e){function t(t){null!=e[t]&&(i[t]=c(e[t]))}var i={borderId:d(e.borderId),fillId:d(e.fillId),fontId:d(e.fontId),numFmtId:d(e.numFmtId),pivotButton:c(e.pivotButton),quotePrefix:c(e.quotePrefix),xfId:d(e.xfId)};return t("applyAlignment"),t("applyBorder"),t("applyFill"),t("applyFont"),t("applyNumberFormat"),t("applyProtection"),i}function n(e){if(e.rgb)return u(e.rgb);if(e.indexed)return B[d(e.indexed)];if(e.theme){var i=t.colorScheme[d(e.theme)],n=kendo.parseColor(i);if(e.tint){n=n.toHSL();var r=parseFloat(e.tint);n.l=r<0?n.l*(1+r):n.l*(1-r)+(100-100*(1-r))}return n.toCssRgba()}}var s={fonts:[],numFmts:{},fills:[],borders:[],namedStyles:[],inlineStyles:[]},o=null,a=null,l=null,h=null;return r(e,"xl/styles.xml",{enter:function(e,t,r){if(this.is(L))s.numFmts[t.numFmtId]=t;else if(this.is(z))s.fonts.push(o={});else if(o)"sz"==e?o.size=parseFloat(t.val):"name"==e?o.name=t.val:"b"==e?o.bold=c(t.val,!0):"i"==e&&(o.italic=c(t.val,!0));else if(this.is(H))s.fills.push(a={});else if(a)"patternFill"==e?a.type=t.patternType:"fgColor"==e&&"solid"===a.type?a.color=n(t):"bgColor"==e&&"solid"!==a.type&&(a.color=n(t));else if(this.is(M))s.borders.push(l={});else if(l){if(/^(?:left|top|right|bottom)$/.test(e)&&t.style&&(l[e]={style:t.style}),"color"==e){var d=this.stack[this.stack.length-2].$tag;l[d].color=n(t)}}else this.is(P)?(h=i(t),s.namedStyles.push(h),r&&(h=null)):this.is(N)?(h=i(t),s.inlineStyles.push(h),r&&(h=null)):h&&"alignment"==e&&(/^(?:left|center|right|justify)$/.test(t.horizontal)&&(h.textAlign=t.horizontal),/^(?:top|center|bottom)$/.test(t.vertical)&&(h.verticalAlign=t.vertical),null!=t.wrapText&&(h.wrapText=c(t.wrapText)))},leave:function(e){this.is(z)?o=null:this.is(H)?a=null:this.is(M)?l=null:"xf"==e&&(h=null)}}),s}function l(e,t){function i(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}var n=[],s={colorScheme:n},o="xl/"+t;return e.files[o]&&(r(e,o,{enter:function(e,t){this.is(V)?n.push(u("window"==t.val?"FFFFFFFF":"FF000000")):this.is(O)&&n.push(u("FF"+t.val))}}),n.length>3&&(i(n,0,1),i(n,2,3))),s}function d(e){return null==e?null:parseInt(e,10)}function c(e,t){return null==e?t:"true"==e||!0===e||1==e}function u(e){var t=/^([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(e);return"rgba("+parseInt(t[2],16)+", "+parseInt(t[3],16)+", "+parseInt(t[4],16)+", "+parseInt(t[1],16)/255+")"}if(kendo.support.browser.msie&&kendo.support.browser.version<9)return;var h=kendo.jQuery,f=kendo.util.parseXML,p=kendo.spreadsheet.calc.parseReference;var m=["sheetData","row","c"],g=["cols","col"],v=["definedNames","definedName"],_=["sheetData","row","c","f"],b=["mergeCells","mergeCell"],k=["sheetViews","sheetView","pane"],w=["sheetData","row"],y=["sheetViews","sheetView","selection"],x=["sheets","sheet"],C=["sheetData","row","c","is"],S=["t"],T=["si"],D=["sheetData","row","c","v"],F=["bookViews","workbookView"],E=["sheetViews","sheetView"],R=["hyperlinks","hyperlink"];var A={none:0,thin:1,medium:2,dashed:1,dotted:1,thick:3,double:3,hair:1,mediumDashed:2,dashDot:1,mediumDashDot:2,dashDotDot:1,mediumDashDotDot:2,slantDashDot:1},I={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"mm-dd-yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@"};var M=["borders","border"],H=["fills","fill"],z=["fonts","font"],N=["cellXfs","xf"],P=["cellStyleXfs","xf"],L=["numFmts","numFmt"],B=[u("FF000000"),u("FFFFFFFF"),u("FFFF0000"),u("FF00FF00"),u("FF0000FF"),u("FFFFFF00"),u("FFFF00FF"),u("FF00FFFF"),u("FF000000"),u("FFFFFFFF"),u("FFFF0000"),u("FF00FF00"),u("FF0000FF"),u("FFFFFF00"),u("FFFF00FF"),u("FF00FFFF"),u("FF800000"),u("FF008000"),u("FF000080"),u("FF808000"),u("FF800080"),u("FF008080"),u("FFC0C0C0"),u("FF808080"),u("FF9999FF"),u("FF993366"),u("FFFFFFCC"),u("FFCCFFFF"),u("FF660066"),u("FFFF8080"),u("FF0066CC"),u("FFCCCCFF"),u("FF000080"),u("FFFF00FF"),u("FFFFFF00"),u("FF00FFFF"),u("FF800080"),u("FF800000"),u("FF008080"),u("FF0000FF"),u("FF00CCFF"),u("FFCCFFFF"),u("FFCCFFCC"),u("FFFFFF99"),u("FF99CCFF"),u("FFFF99CC"),u("FFCC99FF"),u("FFFFCC99"),u("FF3366FF"),u("FF33CCCC"),u("FF99CC00"),u("FFFFCC00"),u("FFFF9900"),u("FFFF6600"),u("FF666699"),u("FF969696"),u("FF003366"),u("FF339966"),u("FF003300"),u("FF333300"),u("FF993300"),u("FF993366"),u("FF333399"),u("FF333333"),u("FF000000"),u("FFFFFFFF")];var O=["a:clrScheme","*","a:srgbClr"],V=["a:clrScheme","*","a:sysClr"];kendo.spreadsheet.readExcel=function(t,i,n){var r=new FileReader;r.onload=function(t){var r=new JSZip(t.target.result);e(r,i,n)},r.readAsArrayBuffer(t)},kendo.spreadsheet._readSheet=n,kendo.spreadsheet._readStrings=s,kendo.spreadsheet._readStyles=a,kendo.spreadsheet._readTheme=l,kendo.spreadsheet._readWorkbook=e}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/workbook",["kendo.core","spreadsheet/runtime","spreadsheet/references","spreadsheet/excel-reader"],function(){!function(e){if(!(e.support.browser.msie&&e.support.browser.version<9)){var t=e.jQuery,i=e.Observable.extend({init:function(t,i){e.Observable.fn.init.call(this),this.options=t,this._view=i,this._sheets=[],this._sheetsSearchCache={},this._sheet=this.insertSheet({rows:this.options.rows,columns:this.options.columns,rowHeight:this.options.rowHeight,columnWidth:this.options.columnWidth,headerHeight:this.options.headerHeight,headerWidth:this.options.headerWidth,dataSource:this.options.dataSource}),this.undoRedoStack=new e.util.UndoRedoStack,this.undoRedoStack.bind(["undo","redo"],this._onUndoRedo.bind(this)),this._context=new e.spreadsheet.FormulaContext(this),this._validationContext=new e.spreadsheet.ValidationFormulaContext(this),this._names=Object.create(null),this.fromJSON(this.options)},clipboard:function(){return this._clipboard||(this._clipboard=new e.spreadsheet.Clipboard(this)),this._clipboard},destroy:function(){this.unbind(),this._clipboard&&this._clipboard.destroy()},events:["change","excelImport","excelExport"],_sheetChange:function(e){this.trigger("change",e)},_sheetCommandRequest:function(e){this.trigger("commandRequest",e)},_inputForRef:function(t){return new e.spreadsheet.Range(t,this._sheet).input()},_onUndoRedo:function(e){e.command.range().select()},execute:function(i){var n=t.extend({workbook:this},i.options),r=new e.spreadsheet[i.command](n),s=this.activeSheet();n.origin&&r.origin(n.origin),n.operatingRange?r.range(n.operatingRange):n.editActiveCell?r.range(s.activeCellSelection()):r.range(s.selection());var o=r.exec();return o&&"error"===o.reason||this.undoRedoStack.push(r),o},resetFormulas:function(){this._sheets.forEach(function(e){e.resetFormulas()})},resetValidations:function(){this._sheets.forEach(function(e){e.resetValidations()})},refresh:function(e){e.recalc&&(this.resetFormulas(),this.resetValidations(),this._sheet.recalc(this._context),this._sheet.revalidate(this._validationContext))},activeSheet:function(t){if(void 0===t)return this._sheet;this.sheetByName(t.name())&&(this._sheet=t,t.triggerChange(e.spreadsheet.ALL_REASONS))},moveSheetToIndex:function(e,t){var i=this.sheetIndex(e),n=this._sheets;-1!==i&&(this._sheetsSearchCache={},n.splice(t,0,n.splice(i,1)[0]),this.trigger("change",{sheetSelection:!0}))},insertSheet:function(t){var i,n=this,r="number"==typeof(t=t||{}).index?t.index:n._sheets.length,s=n._sheets,o=function(e){var t="Sheet"+(e=e||1);return n.sheetByName(t)?o(e+1):t};if(!t.name||!n.sheetByName(t.name)){this._sheetsSearchCache={},i=t.name||o();var a=new e.spreadsheet.Sheet(t.rows||this.options.rows,t.columns||this.options.columns,t.rowHeight||this.options.rowHeight,t.columnWidth||this.options.columnWidth,t.headerHeight||this.options.headerHeight,t.headerWidth||this.options.headerWidth);return a._workbook=this,a._name(i),a.bind("change",this._sheetChange.bind(this)),a.bind("commandRequest",this._sheetCommandRequest.bind(this)),s.splice(r,0,a),t.data&&a.fromJSON(t.data),t.dataSource&&a.setDataSource(t.dataSource),this.trigger("change",{sheetSelection:!0}),a}},sheets:function(){return this._sheets.slice()},sheetByName:function(e){return this._sheets[this.sheetIndex(e)]},sheetByIndex:function(e){return this._sheets[e]},sheetIndex:function(e){var t=this._sheets,i=("string"==typeof e?e:e.name()).toLowerCase(),n=this._sheetsSearchCache[i];if(n>=0)return n;for(n=0;n<t.length;n++){var r=t[n].name().toLowerCase();if(this._sheetsSearchCache[r]=n,r===i)return n}return-1},renameSheet:function(e,t){var i=e.name();if(t&&i!==t&&(e=this.sheetByName(i)))return this._sheetsSearchCache={},this._sheets.forEach(function(e){e._forFormulas(function(e){e.renameSheet(i,t)})}),e._name(t),this.trigger("change",{sheetSelection:!0}),e},removeSheet:function(e){var t=this._sheets,i=e.name(),n=this.sheetIndex(e);if(1!==t.length&&(this._sheetsSearchCache={},n>-1))if(e.unbind(),t.splice(n,1),this.activeSheet().name()===i){var r=t[n===t.length?n-1:n];this.activeSheet(r)}else this.trigger("change",{recalc:!0,sheetSelection:!0})},_clearSheets:function(){for(var e=0;e<this._sheets.length;e++)this._sheets[e].unbind();this._sheets=[],this._sheetsSearchCache={}},fromJSON:function(e){if(e.sheets){this._clearSheets();for(var t=0;t<e.sheets.length;t++){var i=e.sheets[t],n=function(e){function t(e,t){return void 0!==e?e:t}var i=t(e.rowCount,200),n=t(e.columnCount,50),r=t(e.rowHeight,20),s=t(e.columnWidth,64),o=t(e.headerHeight,20),a=t(e.headerWidth,32);if(void 0!==e.rows)for(var l=0;l<e.rows.length;++l){var d=e.rows[l],c=t(d.index,l);if(c>=i&&(i=c+1),d.cells)for(var u=0;u<d.cells.length;++u){var h=d.cells[u],f=t(h.index,u);f>=n&&(n=f+1)}}return{rowCount:i,columnCount:n,rowHeight:r,columnWidth:s,headerHeight:o,headerWidth:a}}(i),r=this.insertSheet({rows:n.rowCount,columns:n.columnCount,rowHeight:n.rowHeight,columnWidth:n.columnWidth,headerHeight:n.headerHeight,headerWidth:n.headerWidth,data:i});i.dataSource&&r.setDataSource(i.dataSource)}}e.activeSheet?this.activeSheet(this.sheetByName(e.activeSheet)):this.activeSheet(this._sheets[0])},toJSON:function(){return this.resetFormulas(),this.resetValidations(),{activeSheet:this.activeSheet().name(),sheets:this._sheets.map(function(e){return e.recalc(this._context),e.toJSON()},this)}},fromFile:function(i){var n=new t.Deferred,r=n.promise(),s={file:i,promise:r};return i&&!this.trigger("excelImport",s)?(this._clearSheets(),e.spreadsheet.readExcel(i,this,n)):n.reject(),r},saveAsExcel:function(i){i=t.extend({},this.options.excel,i);var n=this.toJSON();if(!this.trigger("excelExport",{workbook:n})){var r=new e.ooxml.Workbook(n);e.saveAs({dataURI:r.toDataURL(),fileName:n.fileName||i.fileName,proxyURL:i.proxyURL,forceProxy:i.forceProxy})}},draw:function(t,i){"function"!=typeof t||i||(i=t,t={});var n=[],r=this._sheets;!function s(o){if(o<r.length)r[o].draw(e.spreadsheet.SHEETREF,t,function(e){n.push(e),s(o+1)});else{var a=n[0];for(o=1;o<n.length;++o)a.children=a.children.concat(n[o].children);i(a)}}(0)},defineName:function(e,t,i){this._names[e]={value:t,hidden:i}},undefineName:function(e){delete this._names[e]},nameValue:function(e){return e in this._names?this._names[e].value:null},adjustNames:function(t,i,n,r){t=t.toLowerCase(),Object.keys(this._names).forEach(function(s){var o=this.nameValue(s);o instanceof e.spreadsheet.Ref&&o.sheet.toLowerCase()==t&&(o=o.adjust(null,null,null,null,i,n,r),this.defineName(s,o))},this)},options:{}});e.spreadsheet.Workbook=i,e.PDFMixin&&(e.PDFMixin.extend(i.prototype),i.prototype.saveAsPDF=function(i){var n=new t.Deferred,r=n.promise(),s={promise:r};if(!this.trigger("pdfExport",s))return this._drawPDF(i,n).then(function(t){return e.drawing.exportPDF(t)}).done(function(t){e.saveAs({dataURI:t,fileName:i.fileName,proxyURL:i.proxyURL,forceProxy:i.forceProxy,proxyTarget:i.proxyTarget}),n.resolve()}).fail(function(e){n.reject(e)}),r},i.prototype._drawPDF=function(e){var i=new t.Deferred,n=function(e){i.resolve(e)};switch(e.area){case"workbook":e.workbook.draw(e,n);break;case"sheet":e.workbook.activeSheet().draw(e,n);break;case"selection":e.workbook.activeSheet().selection().draw(e,n)}return i.promise()})}}(kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/formulacontext",["kendo.core"],function(){if(kendo.support.browser.msie&&kendo.support.browser.version<9)return;var e=kendo.spreadsheet,t=e.CellRef,i=e.RangeRef,n=e.UnionRef,r=e.NameRef,s=e.Ref,o=kendo.Class.extend({init:function(e){this.workbook=e},getRefCells:function(e,o){var a,l,d,c;if(e instanceof t)return(a=this.workbook.sheetByName(e.sheet))&&e.valid()?(l=a.formula(e),d=a.range(e.row,e.col).value(),null!=l||null!=d?[{formula:l,value:d,row:e.row,col:e.col,sheet:e.sheet,hidden:!!o&&(0===a.columnWidth(e.col)||0===a.rowHeight(e.row))}]:[]):[{value:new kendo.spreadsheet.calc.runtime.CalcError("REF")}];if(e instanceof i){var u=[],h=c=this.workbook.sheetIndex(e.sheet);if(e.endSheet&&(h=this.workbook.sheetIndex(e.endSheet),c>h)){var f=c;c=h,h=f}if(c<0||h<0||!e.valid())return[{value:new kendo.spreadsheet.calc.runtime.CalcError("REF")}];for(;c<=h;)for(var p=(a=this.workbook.sheetByIndex(c++))._grid.normalize(e.topLeft),m=a._grid.normalize(e.bottomRight),g=a._grid.cellRefIndex(p),v=a._grid.cellRefIndex(m),_=a._properties.iterator("value",g,v),b=p.col;b<=m.col;++b)for(var k=p.row;k<=m.row;++k){var w=a._grid.index(k,b);l=a._properties.get("formula",w),d=_.at(w),null==l&&null==d||u.push({formula:l,value:d,row:k,col:b,sheet:a.name(),hidden:!!o&&(0===a.columnWidth(b)||0===a.rowHeight(k))})}return u}if(e instanceof n){var y=[];for(c=0;c<e.refs.length;++c)y=y.concat(this.getRefCells(e.refs[c],o));return y}if(e instanceof r){var x=this.workbook.nameValue(e.name);return x instanceof s?this.getRefCells(x,o):[{value:new kendo.spreadsheet.calc.runtime.CalcError("NAME")}]}return[]},getData:function(e){var i=e instanceof t;e instanceof r&&(i=this.workbook.nameValue(e)instanceof t);var n=this.getRefCells(e).map(function(e){return e.value});return i?n[0]:n},onFormula:function(e){var t=this.workbook.sheetByName(e.sheet),i=e.row,n=e.col,r=e.value,s=t.formula({row:i,col:n});return s===e&&(r instanceof kendo.spreadsheet.calc.runtime.Matrix?r.each(function(e,r,s){t._value(i+r,n+s,e)}):t._value(i,n,r),clearTimeout(t._formulaContextRefresh),t._formulaContextRefresh=setTimeout(function(){t.batch(function(){},{layout:!0})},50),!0)}}),a=o.extend({onFormula:function(){return!0}});e.FormulaContext=o,e.ValidationFormulaContext=a}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/controller",["kendo.core"],function(){!function(e){"use strict";function t(e){return e.map(function(e){return'[data-action="'+e+'"]'}).join(",")}if(!(e.support.browser.msie&&e.support.browser.version<9)){var i=e.jQuery,n=/:alphanum$/,r={up:"up",down:"down",left:"left",right:"right",home:"first-col","ctrl+left":"first-col",end:"last-col","ctrl+right":"last-col","ctrl+up":"first-row","ctrl+down":"last-row","ctrl+home":"first","ctrl+end":"last",pageup:"prev-page",pagedown:"next-page"},s={tab:"next","shift+tab":"previous",enter:"lower","shift+enter":"upper",delete:"clearContents",backspace:"clearContents","shift+:alphanum":"edit",":alphanum":"edit","ctrl+:alphanum":"ctrl",":edit":"edit"},o={wheel:"onWheel","*+mousedown":"onMouseDown",contextmenu:"onContextMenu","*+mousedrag":"onMouseDrag","*+mouseup":"onMouseUp","*+dblclick":"onDblClick",mousemove:"onMouseMove"},a={"*+pageup":"onPageUp","*+pagedown":"onPageDown",mouseup:"onMouseUp","*+cut":"onCut","*+paste":"onPaste","*+copy":"onCopy"},l={esc:"onEditorEsc",enter:"onEditorBlur","alt+enter":"insertNewline","shift+enter":"onEditorBlur",tab:"onEditorBlur","shift+tab":"onEditorBlur"},d=i.extend({focus:"onEditorBarFocus"},l),c=i.extend({focus:"onEditorCellFocus"},l),u={cell:"range",rowheader:"row",columnheader:"column",topcorner:"sheet",autofill:"autofill"},h=t(["cut","copy","paste","insert-left","insert-right","insert-above","insert-below"]),f=t(["unhide-row","unhide-column"]),p=[],m=[],g=[];for(var v in r)p.push(v),m.push("shift+"+v);for(v in s)g.push(v);a[p]="onAction",a[m]="onShiftAction",a[g]="onEntryAction",c[p]="onEditorAction",c[m]="onEditorShiftAction";var _=e.Class.extend({init:function(t,n){this.view=t,this.workbook(n),this.container=i(t.container),this.clipboardElement=i(t.clipboard),this.cellContextMenu=t.cellContextMenu,this.rowHeaderContextMenu=t.rowHeaderContextMenu,this.colHeaderContextMenu=t.colHeaderContextMenu,this.scroller=t.scroller,this.tabstrip=t.tabstrip,this.sheetsbar=t.sheetsbar,this.editor=t.editor,this.editor.bind("change",this.onEditorChange.bind(this)),this.editor.bind("activate",this.onEditorActivate.bind(this)),this.editor.bind("deactivate",this.onEditorDeactivate.bind(this)),this.editor.bind("update",this.onEditorUpdate.bind(this)),i(t.scroller).on("scroll",this.onScroll.bind(this)),this.listener=new e.spreadsheet.EventListener(this.container,this,o),this.keyListener=new e.spreadsheet.EventListener(this.clipboardElement,this,a),this.barKeyListener=new e.spreadsheet.EventListener(this.editor.barElement(),this,d),this.inputKeyListener=new e.spreadsheet.EventListener(this.editor.cellElement(),this,c),this.sheetsbar&&(this.sheetsbar.bind("select",this.onSheetBarSelect.bind(this)),this.sheetsbar.bind("reorder",this.onSheetBarReorder.bind(this)),this.sheetsbar.bind("rename",this.onSheetBarRename.bind(this)),this.sheetsbar.bind("remove",this.onSheetBarRemove.bind(this))),this.cellContextMenu.bind("select",this.onContextMenuSelect.bind(this)),this.rowHeaderContextMenu.bind("select",this.onContextMenuSelect.bind(this)),this.colHeaderContextMenu.bind("select",this.onContextMenuSelect.bind(this)),this.cellContextMenu.element.add(this.rowHeaderContextMenu.element).add(this.colHeaderContextMenu.element).on("contextmenu",!1),this.tabstrip&&(this.tabstrip.bind("action",this.onCommandRequest.bind(this)),this.tabstrip.bind("dialog",this.onDialogRequest.bind(this)))},_execute:function(e){var t=this._workbook.execute(e);return"EditCommand"!==e.command||t||this._workbook.trigger("change",{editorClose:!0}),t&&("error"===t.reason?this.view.showError(t):this.view.openDialog(t.reason)),t},_activeTooltip:function(){return this._workbook.activeSheet().activeCell().simplify().toString()},onContextMenuSelect:function(e){var t,n=i(e.item).data("action");switch(n){case"cut":t={command:"ToolbarCutCommand",options:{workbook:this._workbook}};break;case"copy":t={command:"ToolbarCopyCommand",options:{workbook:this._workbook}};break;case"paste":t={command:"ToolbarPasteCommand",options:{workbook:this._workbook}};break;case"unmerge":t={command:"MergeCellCommand",options:{value:"unmerge"}};break;case"merge":this.view.openDialog("merge");break;case"hide-row":t={command:"HideLineCommand",options:{axis:"row"}};break;case"hide-column":t={command:"HideLineCommand",options:{axis:"column"}};break;case"unhide-row":t={command:"UnHideLineCommand",options:{axis:"row"}};break;case"unhide-column":t={command:"UnHideLineCommand",options:{axis:"column"}};break;case"delete-row":t={command:"DeleteRowCommand"};break;case"delete-column":t={command:"DeleteColumnCommand"}}t&&this._execute(t)},onSheetBarRemove:function(e){var t=this._workbook.sheetByName(e.name);t&&this._workbook.removeSheet(t)},destroy:function(){this.listener.destroy(),this.keyListener.destroy(),this.inputKeyListener.destroy()},onSheetBarSelect:function(e){var t,i=this._workbook;t=e.isAddButton?i.insertSheet():i.sheetByName(e.name),i.activeSheet().name()!==t.name()&&i.activeSheet(t)},onSheetBarReorder:function(e){var t=this._workbook.sheetByIndex(e.oldIndex);this._workbook.moveSheetToIndex(t,e.newIndex),this._workbook.activeSheet(t)},onSheetBarRename:function(e){var t=this._workbook.sheetByIndex(e.sheetIndex);this._workbook.renameSheet(t,e.name),this.clipboardElement.focus()},sheet:function(e){this.navigator=e.navigator(),this.axisManager=e.axisManager()},workbook:function(e){this._workbook=e,this.clipboard=e.clipboard(),e.bind("commandRequest",this.onCommandRequest.bind(this))},refresh:function(){var e=this.editor,t=this._workbook,i=t.activeSheet();this._viewPortHeight=this.view.scroller.clientHeight,this.navigator.height(this._viewPortHeight),e.isActive()||(e.enable(!1!==i.selection().enable()),e.value(t._inputForRef(i.activeCell())))},onScroll:function(){this.view.render()},onWheel:function(e){var t=e.originalEvent.deltaX,i=e.originalEvent.deltaY;1===e.originalEvent.deltaMode&&(t*=10,i*=10),this.scrollWith(t,i),e.preventDefault()},onAction:function(e,t){this.navigator.moveActiveCell(r[t]),e.preventDefault()},onPageUp:function(){this.scrollDown(-this._viewPortHeight)},onPageDown:function(){this.scrollDown(this._viewPortHeight)},onEntryAction:function(e,t){if(e.mod){var i=!0,r=String.fromCharCode(e.keyCode);switch(r){case"A":this.navigator.selectAll();break;case"Y":this._workbook.undoRedoStack.redo();break;case"Z":this._workbook.undoRedoStack.undo();break;default:i=!1}i&&e.preventDefault()}else{var o=!1===this._workbook.activeSheet().selection().enable();if("delete"==t||"backspace"==t){if(o)return;this._execute({command:"ClearContentCommand"}),e.preventDefault()}else if(n.test(t)||":edit"===t){if(o)return;":edit"!==t&&this.editor.value(""),this.editor.activate({range:this._workbook.activeSheet()._viewActiveCell(),rect:this.view.activeCellRectangle(),tooltip:this._activeTooltip()}).focus()}else this.navigator.navigateInSelection(s[t]),e.preventDefault()}},onShiftAction:function(e,t){this.navigator.modifySelection(r[t.replace("shift+","")],this.appendSelection),e.preventDefault()},onMouseMove:function(e){var t=this._workbook.activeSheet();if(!t.resizingInProgress()&&!t.selectionInProgress()){var i=this.objectAt(e);"columnresizehandle"===i.type||"rowresizehandle"===i.type?t.positionResizeHandle(i.ref):t.removeResizeHandle()}},onMouseDown:function(e){var t=this.objectAt(e);if(t.pane&&(this.originFrame=t.pane),this.editor.canInsertRef(!1)&&t.ref)return this._workbook.activeSheet()._setFormulaSelections(this.editor.highlightedRefs()),this.navigator.startSelection(t.ref,this._selectionMode,this.appendSelection),void e.preventDefault();if(this.editor.deactivate(),this.editor.isActive())e.preventDefault();else{var i=this._workbook.activeSheet();if("columnresizehandle"===t.type||"rowresizehandle"===t.type)return i.startResizing({x:t.x,y:t.y}),void e.preventDefault();if("filtericon"===t.type)return this.openFilterMenu(e),void e.preventDefault();this._selectionMode=u[t.type],this.appendSelection=e.mod,this.navigator.startSelection(t.ref,this._selectionMode,this.appendSelection)}},onContextMenu:function(t){var i=this._workbook.activeSheet();if(!i.resizingInProgress()){t.preventDefault(),this.cellContextMenu.close(),this.colHeaderContextMenu.close(),this.rowHeaderContextMenu.close();var n,r={pageX:t.pageX,pageY:t.pageY},s=this.objectAt(r);if("columnresizehandle"!==s.type&&"rowresizehandle"!==s.type){this.navigator.selectForContextMenu(s.ref,u[s.type]);var o=this.navigator._sheet.select()instanceof e.spreadsheet.UnionRef,a=!1,l=!1;"columnheader"==s.type?(n=this.colHeaderContextMenu,a=!o&&this.axisManager.selectionIncludesHiddenColumns()):"rowheader"==s.type?(n=this.rowHeaderContextMenu,a=!o&&this.axisManager.selectionIncludesHiddenRows()):(n=this.cellContextMenu,l=this.navigator.selectionIncludesMergedCells()),n.element.find(h).toggle(!o),n.element.find(f).toggle(a),n.element.find("[data-action=unmerge]").toggle(l),setTimeout(function(){n.open(t.pageX,t.pageY)})}}},prevent:function(e){e.preventDefault()},constrainResize:function(e,t){var i=this._workbook.activeSheet(),n=i.resizeHandlePosition();return!n||"outside"===e||"topcorner"===e||t.col<n.col||t.row<n.row},onMouseDrag:function(e){if("sheet"!==this._selectionMode){var t={pageX:e.pageX,pageY:e.pageY},i=this.objectAt(t),n=this._workbook.activeSheet();if(n.resizingInProgress())this.constrainResize(i.type,i.ref)||n.resizeHintPosition({x:i.x,y:i.y});else if("outside"!==i.type){if(this.originFrame===i.pane)this.selectToLocation(t);else{var r=this.originFrame._grid;i.x>r.right&&this.scrollLeft(),i.y>r.bottom&&this.scrollTop(),i.y<r.top||i.x<r.left?this.startAutoScroll(i,t):this.selectToLocation(t)}e.preventDefault()}else this.startAutoScroll(i)}},onMouseUp:function(e){var t=this._workbook.activeSheet();t.completeResizing(),this.navigator.completeSelection(),this.stopAutoScroll();var i=this.editor.activeEditor();if(i){for(var n=e.target;n;){if(n===i.element[0])return;n=n.parentNode}var r=this.objectAt(e);r&&r.ref&&i.canInsertRef(!1)&&(i.refAtPoint(t.selection()._ref),t._setFormulaSelections(i.highlightedRefs()))}},onDblClick:function(e){var t=this.objectAt(e),i=!1===this._workbook.activeSheet().selection().enable();"cell"!==t.type||i||(this.editor.activate({range:this._workbook.activeSheet()._viewActiveCell(),rect:this.view.activeCellRectangle(),tooltip:this._activeTooltip()}).focus(),this.onEditorUpdate())},onCut:function(e){if(e){var t=this.clipboardElement.find("table.kendo-clipboard-"+this.clipboard._uid).detach();this.clipboardElement.append(t.clone(!1)),setTimeout(function(){this.clipboardElement.empty().append(t)}.bind(this))}this._execute({command:"CutCommand",options:{workbook:this.view._workbook}})},clipBoardValue:function(){return this.clipboardElement.html()},onPaste:function(t){var i="",n="";if(this.clipboard.menuInvoked=void 0===t,t){if(!t.originalEvent.clipboardData||!t.originalEvent.clipboardData.getData){var r=this.clipboardElement.find("table.kendo-clipboard-"+this.clipboard._uid).detach();return this.clipboardElement.empty(),void setTimeout(function(){var e=this.clipboardElement.html(),t=window.clipboardData.getData("Text").trim();(e||t)&&(this.clipboard.external({html:e,plain:t}),this.clipboardElement.empty().append(r),this._execute({command:"PasteCommand",options:{workbook:this.view._workbook}}),this.clipboard.menuInvoked=!0)}.bind(this))}t.preventDefault();var s=!1,o=!1;window.DOMStringList&&t.originalEvent.clipboardData.types instanceof window.DOMStringList?(s=t.originalEvent.clipboardData.types.contains("text/html"),o=t.originalEvent.clipboardData.types.contains("text/plain")):(s=/text\/html/.test(t.originalEvent.clipboardData.types),o=/text\/plain/.test(t.originalEvent.clipboardData.types)),s&&(i=t.originalEvent.clipboardData.getData("text/html")),o&&(n=t.originalEvent.clipboardData.getData("text/plain").trim())}else{if(e.support.browser.msie)return this.clipboardElement.focus().select(),void document.execCommand("paste");this.clipboard.menuInvoked=!0}(i||n)&&(this.clipboard.external({html:i,plain:n}),this._execute({command:"PasteCommand",options:{workbook:this.view._workbook}}))},onCopy:function(e){this.clipboard.menuInvoked=void 0===e,this._execute({command:"CopyCommand",options:{workbook:this.view._workbook}})},scrollTop:function(){this.scroller.scrollTop=0},scrollLeft:function(){this.scroller.scrollLeft=0},scrollDown:function(e){this.scroller.scrollTop+=e},scrollRight:function(e){this.scroller.scrollLeft+=e},scrollWith:function(e,t){this.scroller.scrollTop+=t,this.scroller.scrollLeft+=e},objectAt:function(e){var t=this.container.offset(),i={left:e.pageX-t.left,top:e.pageY-t.top};return this.view.objectAt(i.left,i.top)},selectToLocation:function(e){var t=this.objectAt(e);t.pane&&(this.extendSelection(t),this.lastKnownCellLocation=e,this.originFrame=t.pane),this.stopAutoScroll()},extendSelection:function(e){this.navigator.extendSelection(e.ref,this._selectionMode,this.appendSelection)},autoScroll:function(){var e=this._autoScrollTarget.x,t=this._autoScrollTarget.y,i=this.originFrame._grid,n=this.view.scroller,r=n.scrollLeft,s=n.scrollTop;e<i.left&&this.scrollRight(-8),e>i.right&&this.scrollRight(8),t<i.top&&this.scrollDown(-8),t>i.bottom&&this.scrollDown(8),s===n.scrollTop&&r===n.scrollLeft?this.selectToLocation(this.finalLocation):this.extendSelection(this.objectAt(this.lastKnownCellLocation))},startAutoScroll:function(e,t){this._scrollInterval||(this._scrollInterval=setInterval(this.autoScroll.bind(this),50)),this.finalLocation=t||this.lastKnownCellLocation,this._autoScrollTarget=e},stopAutoScroll:function(){clearInterval(this._scrollInterval),this._scrollInterval=null},openFilterMenu:function(e){var t=this.objectAt(e),i=this._workbook.activeSheet(),n=i.filterColumn(t.ref),r=this.view.createFilterMenu(n);r.bind("action",this.onCommandRequest.bind(this)),r.bind("action",r.close.bind(r)),r.openFor(e.target)},onEditorChange:function(e){this._workbook.activeSheet().isInEditMode(!1);var t=this._execute({command:"EditCommand",options:{editActiveCell:!0,value:e.value}});t&&"error"===t.reason&&e.preventDefault()},onEditorActivate:function(){var e=this._workbook,t=e.activeSheet();t._setFormulaSelections(this.editor.highlightedRefs()),t.isInEditMode(!0)},onEditorDeactivate:function(){var e=this._workbook.activeSheet();e.isInEditMode(!1),e._setFormulaSelections([])},onEditorUpdate:function(){this._workbook.activeSheet()._setFormulaSelections(this.editor.highlightedRefs())},onEditorBarFocus:function(){var e=!1===this._workbook.activeSheet().selection().enable();e||this.editor.activate({range:this._workbook.activeSheet()._viewActiveCell(),rect:this.view.activeCellRectangle(),tooltip:this._activeTooltip()})},onEditorCellFocus:function(){this.editor.scale()},onEditorEsc:function(){this.editor.value(this._workbook._inputForRef(this._workbook.activeSheet()._viewActiveCell())),this.editor.deactivate(),this.clipboardElement.focus()},insertNewline:function(e){e.preventDefault(),this.editor.insertNewline()},onEditorBlur:function(e,t){this.editor.isFiltered()||(this.editor.deactivate(),this.editor.isActive()||(this.clipboardElement.focus(),this.navigator.navigateInSelection(s[t])))},onEditorAction:function(e,t){var i=this.editor,n=this._workbook.activeSheet();i.canInsertRef(!0)&&(this.navigator.moveActiveCell(r[t]),i.activeEditor().refAtPoint(n.selection()._ref),n._setFormulaSelections(i.highlightedRefs()),e.preventDefault())},onEditorShiftAction:function(e,t){var i=this.editor,n=this._workbook.activeSheet();i.canInsertRef(!0)&&(this.navigator.modifySelection(r[t.replace("shift+","")],this.appendSelection),i.activeEditor().refAtPoint(n.selection()._ref),n._setFormulaSelections(i.highlightedRefs()),e.preventDefault())},onCommandRequest:function(e){e.command?this._execute(e):this._workbook.undoRedoStack[e.action]()},onDialogRequest:function(e){var t={pdfExport:this._workbook.options.pdf,excelExport:this._workbook.options.excel};e.options?i.extend(!0,e.options,t):e.options=t,this.view.openDialog(e.name,e.options)}});e.spreadsheet.Controller=_}}(window.kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/view",["kendo.core","kendo.menu","spreadsheet/sheetsbar"],function(){!function(e){function t(e){return["solid",(e.size||1)+"px",e.color||"#000"].join(" ")}function i(i,n,r,s,o,a){function l(t){var i=n.link;if(i||"object"==typeof n.value&&(i=n.value.link),i){var r={textDecoration:"none"};return n.color&&(r.color=n.color),n.underline&&(r.textDecoration="underline"),e.dom.element("a",{href:function(e){/:\/\//.test(e)||(e="http://"+e);return e}(i),style:r,target:"_blank"},[t])}return t}if(r||e.spreadsheet.draw.shouldDrawCell(n)){var d=n.left,u=n.top,h=n.width+1,f=n.height+1,p={},m=n.background,g=null;m&&(g=m,a&&((g=e.parseColor(g).toHSV()).v*=.9,g=g.toCssRgba()),g=t({color:g})),m&&(p.backgroundColor=m),n.color&&(p.color=n.color),n.fontFamily&&(p.fontFamily=n.fontFamily),n.underline&&(p.textDecoration="underline"),n.italic&&(p.fontStyle="italic"),n.textAlign&&(p.textAlign=n.textAlign),n.bold&&(p.fontWeight="bold"),n.fontSize&&(p.fontSize=n.fontSize+"px"),!0===n.wrap&&(p.whiteSpace="pre-wrap",p.wordBreak="break-all"),n.borderLeft?(p.borderLeft=t(n.borderLeft),o&&(o[n.left]=!0)):g&&o&&!o[n.left]?p.borderLeft=g:(d++,h--),n.borderTop?(p.borderTop=t(n.borderTop),s&&(s[n.top]=!0)):g&&s&&!s[n.top]?p.borderTop=g:(u++,f--),n.borderRight?(p.borderRight=t(n.borderRight),o&&(o[n.right]=!0)):g&&o&&!o[n.right]?p.borderRight=g:h--,n.borderBottom?(p.borderBottom=t(n.borderBottom),s&&(s[n.bottom]=!0)):g&&s&&!s[n.bottom]?p.borderBottom=g:f--,p.left=d+"px",p.top=u+"px",p.width=h+"px",p.height=f+"px";var v=n.value,_=typeof v;if(n.format&&null!==v?(v=e.spreadsheet.formatting.format(v,n.format)).__dataType&&(_=v.__dataType):null!==v&&void 0!==v&&(v=e.dom.text(v)),!p.textAlign)switch(_){case"number":case"date":case"percent":p.textAlign="right";break;case"boolean":p.textAlign="center"}var b=[c.cell];r&&b.push(r),!1===n.enable&&b.push("k-state-disabled"),n.merged&&b.push("k-spreadsheet-merged-cell");var k=n.verticalAlign||"bottom",w=(v=k&&v?e.dom.element("div",{className:"k-vertical-align-"+k},[l(v)]):l(v))?[v]:[],y={style:p},x=n.validation;x&&!x.value&&(w.push(e.dom.element("span",{className:"k-dirty"})),b.push("k-dirty-cell"),y.title=x._getOptions().messageTemplate),y.className=b.join(" ");var C=e.dom.element("div",y,w);return i.push(C),C}}function n(e,t,i){return e>=t&&e<=i}if(!(e.support.browser.msie&&e.support.browser.version<9)){var r=e.jQuery,s=e.spreadsheet.CellRef,o=e.spreadsheet.messages.view={errors:{openUnsupported:"Unsupported format. Please select an .xlsx file.",shiftingNonblankCells:"Cannot insert cells due to data loss possibility. Select another insert location or delete the data from the end of your worksheet.",filterRangeContainingMerges:"Cannot create a filter within a range containing merges",sortRangeContainingMerges:"Cannot sort a range containing merges",validationError:"The value that you entered violates the validation rules set on the cell."},tabs:{home:"Home",insert:"Insert",data:"Data"}},a=e.Class.extend({init:function(){this.cols=[],this.trs=[],this._height=0,this._width=0},addColumn:function(t){this._width+=t;var i=e.dom.element("col",{style:{width:t+"px"}});i.visible=t>0,this.cols.push(i)},addRow:function(t){var i=null;i={style:{height:t+"px"}},this._height+=t;var n=e.dom.element("tr",i);n.visible=t>0,this.trs.push(n)},addCell:function(t,i,n,r,s){null!==i&&void 0!==i||(i=""),i instanceof e.dom.Node||(i=e.dom.text(i));var o=[i],a={style:n};s&&!s.value&&(o.push(e.dom.element("span",{className:"k-dirty"})),r=(r||"")+(r?" ":"")+"k-dirty-cell",a.title=s._getOptions().messageTemplate),r&&(a.className=r);var l=e.dom.element("td",a,o);return this.trs[t].children.push(l),l},toDomTree:function(t,i,n){this.trs=this.trs.filter(function(e){return e.visible});var r=0;return this.cols=this.cols.filter(function(e,t){return e.visible||(this.trs.forEach(function(e){e.children.splice(t-r,1)}),r++),e.visible},this),e.dom.element("table",{style:{left:t+"px",top:i+"px",height:this._height+"px",width:this._width+"px"},className:n},[e.dom.element("colgroup",null,this.cols),e.dom.element("tbody",null,this.trs)])}});e.spreadsheet.ContextMenu=e.ui.ContextMenu;var l=e.template('<div class="#=classNames.view#"><div class="#=classNames.fixedContainer#"></div><div class="#=classNames.scroller#"><div class="#=classNames.viewSize#"></div></div><div tabindex="0" class="#=classNames.clipboard#" contenteditable=true></div><div class="#=classNames.cellEditor#"></div></div><div class="#=classNames.sheetsBar#"></div><ul class="#=classNames.cellContextMenu#"><li data-action=cut>Cut</li><li data-action=copy>Copy</li><li data-action=paste>Paste</li><li class="k-separator"></li><li data-action=merge>Merge</li><li data-action=unmerge>Unmerge</li></ul><ul class="#=classNames.rowHeaderContextMenu#"><li data-action=cut>Cut</li><li data-action=copy>Copy</li><li data-action=paste>Paste</li><li class="k-separator"></li><li data-action="delete-row">Delete</li><li data-action="hide-row">Hide</li><li data-action="unhide-row">Unhide</li></ul><ul class="#=classNames.colHeaderContextMenu#"><li data-action=cut>Cut</li><li data-action=copy>Copy</li><li data-action=paste>Paste</li><li class="k-separator"></li><li data-action="delete-column">Delete</li><li data-action="hide-column">Hide</li><li data-action="unhide-column">Unhide</li></ul>'),d=e.Class.extend({init:function(t,i){var n=d.classNames;this.element=t,this.options=r.extend(!0,{},this.options,i),this._chrome(),this._dialogs=[],t.append(l({classNames:n})),this._formulaInput(),this.wrapper=t.find("."+n.view),this.container=t.find("."+n.fixedContainer)[0],this.scroller=t.find("."+n.scroller)[0],this.clipboard=t.find("."+n.clipboard),this.viewSize=r(this.scroller.firstChild),this.tree=new e.dom.Tree(this.container),this.clipboardContents=new e.dom.Tree(this.clipboard[0]),this.editor=new e.spreadsheet.SheetEditor(this),this._sheetsbar();var s={target:t,animation:!1,showOn:"never"};this.cellContextMenu=new e.spreadsheet.ContextMenu(t.find("."+n.cellContextMenu),s),this.colHeaderContextMenu=new e.spreadsheet.ContextMenu(t.find("."+n.colHeaderContextMenu),s),this.rowHeaderContextMenu=new e.spreadsheet.ContextMenu(t.find("."+n.rowHeaderContextMenu),s);var o=e.support.scrollbar();r(this.container).css({width:this.wrapper[0].clientWidth-o,height:this.wrapper[0].clientHeight-o})},_resize:function(){var e=this.tabstrip?this.tabstrip.element.outerHeight():0,t=this.formulaBar?this.formulaBar.element.outerHeight():0,i=this.sheetsbar?this.sheetsbar.element.outerHeight():0;this.wrapper.height(this.element.height()-(e+t+i)),this.tabstrip&&this.tabstrip.quickAccessAdjust()},_chrome:function(){var t=r("<div />").prependTo(this.element);this.formulaBar=new e.spreadsheet.FormulaBar(t),this.options.toolbar&&this._tabstrip()},_formulaInput:function(){var t=this.element.find("."+d.classNames.cellEditor);this.formulaInput=new e.spreadsheet.FormulaInput(t,{autoScale:!0})},_sheetsbar:function(){this.options.sheetsbar&&(this.sheetsbar=new e.spreadsheet.SheetsBar(this.element.find("."+d.classNames.sheetsBar),r.extend(!0,{},this.options.sheetsbar)))},_tabstrip:function(){var t=o.tabs,i=r.extend(!0,{home:!0,insert:!0,data:!0},this.options.toolbar),n=[];this.tabstrip&&(this.tabstrip.destroy(),this.element.children(".k-tabstrip").remove());for(var s in i)(!0===i[s]||i[s]instanceof Array)&&n.push({id:s,text:t[s],content:""});this.tabstrip=new e.spreadsheet.TabStrip(r("<div />").prependTo(this.element),{animation:!1,dataTextField:"text",dataContentField:"content",dataSource:n,toolbarOptions:i,view:this}),this.tabstrip.select(0)},_executeCommand:function(e){this._workbook.execute(e)},workbook:function(e){this._workbook=e},sheet:function(e){this._sheet=e},activeCellRectangle:function(){return this.cellRectangle(this._sheet._viewActiveCell())},_rectangle:function(e,t){return e._grid.boundingRectangle(t.toRangeRef())},isColumnResizer:function(e,t,i){var n=this._rectangle(t,i);e-=this._sheet._grid._headerWidth;var r=n.right-this.scroller.scrollLeft;return r-3.5<=e&&e<=r+3.5},isRowResizer:function(e,t,i){var n=this._rectangle(t,i);e-=this._sheet._grid._headerHeight;var r=n.bottom-this.scroller.scrollTop;return r-3.5<=e&&e<=r+3.5},isFilterIcon:function(e,t,i,n){var r=!1;return e-=this._sheet._grid._headerWidth-this.scroller.scrollLeft,t-=this._sheet._grid._headerHeight-this.scroller.scrollTop,this._sheet.forEachFilterHeader(n,function(n){var s=this._rectangle(i,n);r=r||i.filterIconRect(s).intersects(e,t)}.bind(this)),r},isAutoFill:function(e,t,i){var n=this._sheet.select();if(n.size>1)return!1;e-=this._sheet._grid._headerWidth,t-=this._sheet._grid._headerHeight,i._grid.columns.frozen||(e+=this.scroller.scrollLeft),i._grid.rows.frozen||(t+=this.scroller.scrollTop);var r=this._rectangle(i,n);return Math.abs(r.right-e)<8&&Math.abs(r.bottom-t)<8},objectAt:function(e,t){var i,n,r=this._sheet._grid;if(e<0||t<0||e>this.scroller.clientWidth||t>this.scroller.clientHeight)i={type:"outside"};else if(e<r._headerWidth&&t<r._headerHeight)i={type:"topcorner"};else{var o=(n=this.paneAt(e,t))._grid.rows.index(t,this.scroller.scrollTop),a=n._grid.columns.index(e,this.scroller.scrollLeft),l="cell",d=new s(o,a);this.isAutoFill(e,t,n)?l="autofill":this.isFilterIcon(e,t,n,d)?l="filtericon":e<r._headerWidth?(d=new s(o,-1/0),l=this.isRowResizer(t,n,d)?"rowresizehandle":"rowheader"):t<r._headerHeight&&(d=new s(-1/0,a),l=this.isColumnResizer(e,n,d)?"columnresizehandle":"columnheader"),i={type:l,ref:d}}return i.pane=n,i.x=e,i.y=t,i},paneAt:function(e,t){return this.panes.filter(function(i){var r=i._grid;return n(t,r.top,r.bottom)&&n(e,r.left,r.right)})[0]},containingPane:function(e){return this.panes.filter(function(t){return!!t._grid.contains(e)})[0]},cellRectangle:function(e){var t=this.containingPane(e)._grid,i=this._sheet._grid.rectangle(e);return i.offset(t.headerWidth-this.scroller.scrollLeft,t.headerHeight-this.scroller.scrollTop)},refresh:function(e){var t=this._sheet;if(this.tabstrip&&this.tabstrip.refreshTools(t.range(t.activeCell())),e.sheetSelection&&this.sheetsbar&&this.sheetsbar.renderSheets(this._workbook.sheets(),this._workbook.sheetIndex(this._sheet)),this._resize(),this.viewSize[0].style.height=t._grid.totalHeight()+"px",this.viewSize[0].style.width=t._grid.totalWidth()+"px",e.layout){var i=t.frozenColumns(),n=t.frozenRows();this.panes=[this._pane(n,i)],i>0&&this.panes.push(this._pane(n,0,null,i)),n>0&&this.panes.push(this._pane(0,i,n,null)),n>0&&i>0&&this.panes.push(this._pane(0,0,n,i))}e.filter&&this._destroyFilterMenu(),e.activeCell&&(this._focus=t.activeCell().toRangeRef())},createFilterMenu:function(t){if(this._filterMenu&&this._filterMenu.options.column==t)return this._filterMenu;this._destroyFilterMenu();var i=this._sheet,n=i.filter().ref,s=new e.spreadsheet.Range(n,i),o=r("<div />").appendTo(this.element),a={column:t,range:s},l=new e.spreadsheet.FilterMenu(o,a);return this._filterMenu=l,l},selectClipBoardContents:function(){this.clipboard.focus(),function(e){var t=window.getSelection();t.removeAllRanges();var i=document.createRange();i.selectNodeContents(e),t.addRange(i)}(this.clipboard[0])},scrollIntoView:function(e){var t=!1,i=this.containingPane(e)._grid,n=i.scrollBoundaries(e),r=this.scroller,s=i.rows.frozen?0:r.scrollTop,o=i.columns.frozen?0:r.scrollLeft;return n.top<s&&(t=!0,r.scrollTop=n.scrollTop),n.bottom>s&&(t=!0,r.scrollTop=n.scrollBottom),n.left<o&&(t=!0,r.scrollLeft=n.scrollLeft),n.right>o&&(t=!0,r.scrollLeft=n.scrollRight),t},_destroyDialog:function(){this._dialogs.pop()},openDialog:function(t,i){var n=this._sheet,r=n.activeCell(),s=new e.spreadsheet.Range(r,n),o=e.spreadsheet.dialogs.create(t,i);if(o)return o.bind("action",this._executeCommand.bind(this)),o.bind("deactivate",this._destroyDialog.bind(this)),this._dialogs.push(o),o.open(s),o},showError:function(t){var i=o.errors;e.spreadsheet.dialogs.registered(t.type)?this.openDialog(t.type):this.openDialog("message",{title:t.title||"Error",text:t.body?t.body:i[t.type],activate:function(){this.dialog().element.find(".k-button").focus()},close:function(){this.editor.focusLastActive()}.bind(this)})},destroy:function(){this._dialogs.forEach(function(e){e.destroy()}),this.cellContextMenu.destroy(),this.rowHeaderContextMenu.destroy(),this.colHeaderContextMenu.destroy(),this.tabstrip&&this.tabstrip.destroy(),this._destroyFilterMenu()},_destroyFilterMenu:function(){this._filterMenu&&(this._filterMenu.destroy(),this._filterMenu=void 0,this._filterMenuColumn=void 0)},render:function(){if(this.element.is(":visible")){var t=this._sheet,i=t.focus();if(!i||!this.scrollIntoView(i)){var n=t._grid,r=this.scroller.scrollTop,s=this.scroller.scrollLeft;r<0&&(r=0),s<0&&(s=0);var o=this.panes.map(function(e){return e.render(s,r)},this),a=[];a=Array.prototype.concat.apply(a,o);var l=e.dom.element("div",{style:{width:n._headerWidth+"px",height:n._headerHeight+"px"},className:d.classNames.topCorner});a.push(l),t.resizeHandlePosition()&&t.resizeHintPosition()&&a.push(this.renderResizeHint()),this.tree.render(a),this.editor.isActive()?this.editor.toggleTooltip(this.activeCellRectangle()):t.selectionInProgress()||t.resizingInProgress()||t.isInEditMode()||this.renderClipboardContents()}}},renderResizeHint:function(){var t,i=this._sheet,n=i.resizeHandlePosition(),r=n.col!==-1/0;t=r?{height:this.scroller.clientHeight+"px",width:"7px",left:i.resizeHintPosition().x+"px",top:"0px"}:{height:"7px",width:this.scroller.clientWidth+"px",top:i.resizeHintPosition().y+"px",left:"0px"};var s=u.classNames;return e.dom.element("div",{className:s.resizeHint+(r?"":" "+s.resizeHintVertical),style:t},[e.dom.element("div",{className:s.resizeHintHandle}),e.dom.element("div",{className:s.resizeHintMarker})])},renderClipboardContents:function(){var i=this._sheet,n=i._grid,r=i.select().toRangeRef(),o=this._workbook.clipboard().canCopy();if(!1===o.canCopy&&o.multiSelection)return this.clipboardContents.render([]),void this.selectClipBoardContents();r=i.trim(r);var l=new a,d=n.rangeDimensions(r);d.rows.forEach(function(e){l.addRow(e)}),d.columns.forEach(function(e){l.addColumn(e)});var c={},u={};i.forEachMergedCell(r,function(e){var t=e.topLeft;n.forEach(e,function(i){t.eq(i)?c[i.print()]=e:u[i.print()]=!0})}),i.forEach(r,function(i,n,o){var a=new s(i,n).print();if(!u[a]){var d=function(i,n,r){var s={};r.background&&(s.backgroundColor=r.background);r.color&&(s.color=r.color);r.fontFamily&&(s.fontFamily=r.fontFamily);r.underline&&(s.textDecoration="underline");r.italic&&(s.fontStyle="italic");r.textAlign&&(s.textAlign=r.textAlign);r.verticalAlign&&(s.verticalAlign="center"===r.verticalAlign?"middle":r.verticalAlign);r.bold&&(s.fontWeight="bold");r.fontSize&&(s.fontSize=r.fontSize+"px");!0===r.wrap&&(s.whiteSpace="pre-wrap",s.wordBreak="break-all");r.borderRight?s.borderRight=t(r.borderRight):r.background&&(s.borderRightColor=r.background);r.borderBottom?s.borderBottom=t(r.borderBottom):r.background&&(s.borderBottomColor=r.background);var o=r.value,a=typeof o;r.format&&null!==o&&(o=e.spreadsheet.formatting.format(o,r.format)).__dataType&&(a=o.__dataType);if(!s.textAlign)switch(a){case"number":case"date":case"percent":s.textAlign="right";break;case"boolean":s.textAlign="center"}var l=null;!1===r.enable&&(l="k-state-disabled");var d,c,u=i.addCell(n,o,s,l,r.validation);r.borderLeft?(c=function(e,t){var i=e.trs[t].children;return i[i.length-2]}(i,n),d=t(r.borderLeft),c&&d&&(c.attr.style.borderRight=d)):r.background&&(s.borderLeftColor=r.background);r.borderTop?(c=function(e,t){var i=e.trs[t-1],n=e.trs[t].children.length-1;if(i&&n>=0)return i.children[n]}(i,n),d=t(r.borderTop),c&&d&&(c.attr.style.borderBottom=d)):r.background&&(s.borderTopColor=r.background);return u}(l,i-r.topLeft.row,o),h=c[a];h&&(d.attr.colspan=h.width(),d.attr.rowspan=h.height())}}),this.clipboardContents.render([l.toDomTree(0,0,"kendo-clipboard-"+this._workbook.clipboard()._uid)]),this.selectClipBoardContents()},_pane:function(e,t,i,n){var r=new u(this._sheet,this._sheet._grid.pane({row:e,column:t,rowCount:i,columnCount:n}));return r.refresh(this.scroller.clientWidth,this.scroller.clientHeight),r}}),c={cell:"k-spreadsheet-cell",vaxis:"k-spreadsheet-vaxis",haxis:"k-spreadsheet-haxis",rowHeader:"k-spreadsheet-row-header",columnHeader:"k-spreadsheet-column-header",pane:"k-spreadsheet-pane",data:"k-spreadsheet-data",mergedCell:"k-spreadsheet-merged-cell",mergedCellsWrapper:"k-merged-cells-wrapper",activeCell:"k-spreadsheet-active-cell",selection:"k-spreadsheet-selection",selectionWrapper:"k-selection-wrapper",autoFillWrapper:"k-auto-fill-wrapper",single:"k-single",top:"k-top",right:"k-right",bottom:"k-bottom",left:"k-left",resizeHandle:"k-resize-handle",resizeHint:"k-resize-hint",resizeHintHandle:"k-resize-hint-handle",resizeHintMarker:"k-resize-hint-marker",resizeHintVertical:"k-resize-hint-vertical",selectionHighlight:"k-spreadsheet-selection-highlight",series:["k-series-a","k-series-b","k-series-c","k-series-d","k-series-e","k-series-f"]},u=e.Class.extend({init:function(e,t){this._sheet=e,this._grid=t},refresh:function(e,t){this._grid.refresh(e,t)},isVisible:function(e,t,i){return this._grid.view(e,t).ref.intersects(i)},render:function(t,i){var n=u.classNames,r=this._sheet,s=this._grid,o=s.view(t,i);this._currentView=o,this._currentRect=this._rectangle(o.ref),this._selectedHeaders=r.selectedHeaders();var a=[];if(a.push(this.renderData()),a.push(this.renderSelection()),a.push(this.renderAutoFill()),a.push(this.renderEditorSelection()),a.push(this.renderFilterHeaders()),s.hasRowHeader){var l=e.dom.element("div",{className:n.rowHeader,style:{width:s.headerWidth+"px",top:o.rowOffset+"px"}});a.push(l),r.forEach(o.ref.leftColumn(),function(t){if(!r.isHiddenRow(t)){var i=t+1,n=r.rowHeight(t);l.children.push(e.dom.element("div",{className:this.headerClassName(t,"row"),style:{width:s.headerWidth+"px",height:n+"px"}},[e.dom.element("div",{className:"k-vertical-align-center"},[e.dom.text(i+"")])]))}}.bind(this))}if(s.hasColumnHeader){var d=e.dom.element("div",{className:n.columnHeader,style:{top:"0px",left:o.columnOffset+"px",width:this._currentRect.width+"px",height:s.headerHeight+"px"}});a.push(d);var c=0;r.forEach(o.ref.topRow(),function(t,i){if(!r.isHiddenColumn(i)){var n=e.spreadsheet.Ref.display(null,1/0,i),o=r.columnWidth(i);d.children.push(e.dom.element("div",{className:this.headerClassName(i,"col"),style:{position:"absolute",left:c+"px",width:o+"px",height:s.headerHeight+"px"}},[e.dom.element("div",{className:"k-vertical-align-center"},[e.dom.text(n+"")])])),c+=o}}.bind(this))}if(r.resizeHandlePosition()&&(s.hasColumnHeader||s.hasRowHeader)){var h=r._grid.normalize(r.resizeHandlePosition());o.ref.intersects(h)&&(r.resizeHintPosition()||a.push(this.renderResizeHandler()))}var f=[n.pane];return s.hasColumnHeader&&f.push(n.top),s.hasRowHeader&&f.push(n.left),e.dom.element("div",{style:s.style,className:f.join(" ")},a)},headerClassName:function(e,t){var i,n,r=this._selectedHeaders;"row"===t?(i=r.rows[e],n=r.allRows):(i=r.cols[e],n=r.allCols);var s=i||(r.all?"full":n?"partial":"none");return s&&(s="k-selection-"+s),s},renderData:function(){var t,n=this._currentView,r=e.dom.element("div",{className:u.classNames.data,style:{position:"relative",left:n.columnOffset+"px",top:n.rowOffset+"px"}}),s=this._currentRect,o=e.spreadsheet.draw.doLayout(this._sheet,n.ref,{forScreen:!0}),a=this._sheet._showGridLines;a&&(t=null,o.xCoords.forEach(function(i){i!==t&&(t=i,r.children.push(e.dom.element("div",{className:c.vaxis,style:{left:i+"px",height:s.height+"px"}})))}),t=null,o.yCoords.forEach(function(i){i!==t&&(t=i,r.children.push(e.dom.element("div",{className:c.haxis,style:{top:i+"px",width:s.width+"px"}})))}));var l={},d={};return o.cells.forEach(function(e){var t=d[e.col]||(d[e.col]={}),n=l[e.row]||(l[e.row]={});i(r.children,e,null,t,n,a)}),r},renderResizeHandler:function(){var t,i=this._sheet,n=i.resizeHandlePosition(),r=this._rectangle(n);return t=n.col!==-1/0?{height:this._grid.headerHeight+"px",width:"7px",left:r.right-3.5+"px",top:"0px"}:{height:"7px",width:this._grid.headerWidth+"px",top:r.bottom-3.5+"px",left:"0px"},e.dom.element("div",{className:u.classNames.resizeHandle,style:t})},filterIconRect:function(t){return new e.spreadsheet.Rectangle(t.right-16-3,t.top+3,16,16)},renderFilterHeaders:function(){function t(t,i,n){var o={left:i.left+"px",top:i.top+"px"},a=s&&s.columns.some(function(e){return e.index===n}),l=t.filterButton;a&&(l+=" "+t.filterButtonActive);var d=e.dom.element("span",{className:l,style:o},[function(t){return e.dom.element("span",{className:r.icon+" "+t})}(t.iconFilterDefault)]);return d}var i=this._sheet,n=[],r=d.classNames,s=i.filter();return s&&this._addDiv(n,s.ref,r.filterRange),i.forEachFilterHeader(this._currentView.ref,function(e){var i=this._rectangle(e),s=this.filterIconRect(i),o=this._sheet.filterColumn(e),a=t(r,s,o);n.push(a)}.bind(this)),e.dom.element("div",{className:r.filterHeadersWrapper},n)},renderEditorSelection:function(){var t=u.classNames,i=this._sheet,n=[];return i._formulaSelections.forEach(function(i){var r=i.ref;r!==e.spreadsheet.NULLREF&&this._addDiv(n,r,t.selectionHighlight+" "+i.colorClass)}.bind(this)),e.dom.element("div",{className:t.selectionWrapper},n)},renderSelection:function(){var t=u.classNames,i=[],n=[t.activeCell],r=[t.selection],s=this._sheet,o=s.activeCell().toRangeRef(),a=this._activeFormulaColor(),l=s.select();return n=n.concat(a,this._directionClasses(o)),r=r.concat(a),s.singleCellSelection()&&n.push(t.single),1===l.size()&&r.push("k-single-selection"),this._sheet.autoFillPunch()&&r.push("k-dim-auto-fill-handle"),l.forEach(function(t){t!==e.spreadsheet.NULLREF&&this._addDiv(i,t,r.join(" "))}.bind(this)),this._addTable(i,o,n.join(" ")),e.dom.element("div",{className:t.selectionWrapper},i)},renderAutoFill:function(){var t=[];if(this._sheet.autoFillInProgress()){var i=this._sheet.autoFillRef(),n=this._sheet.autoFillPunch(),r=this._sheet._autoFillDirection;if(this._addDiv(t,i,"k-auto-fill"),n)this._addDiv(t,n,"k-auto-fill-punch");else if(void 0!==r){var o,a;switch(r){case 0:case 1:o=i.bottomRight,a="k-auto-fill-br-hint";break;case 2:o=new s(i.topLeft.row,i.bottomRight.col),a="k-auto-fill-tr-hint";break;case 3:o=new s(i.bottomRight.row,i.topLeft.col),a="k-auto-fill-bl-hint"}var l=e.dom.element("span",{className:"k-tooltip"},[e.dom.text(this._sheet._autoFillHint)]),d=this._addDiv(t,o,a);d&&d.children.push(l)}}return e.dom.element("div",{className:u.classNames.autoFillWrapper},t)},_addDiv:function(e,t,i){var n,r=this._currentView;return r.ref.intersects(t)&&(n=this._rectangle(t).resize(1,1).toDiv(i),e.push(n)),n},_addTable:function(e,t,n){var r=this._sheet,s=this._currentView;s.ref.intersects(t)&&r.forEach(t.collapse(),function(r,s,o){var a=this._rectangle(t);o.left=a.left,o.top=a.top,o.width=a.width,o.height=a.height,i(e,o,n,null,null,!0)}.bind(this))},_activeFormulaColor:function(){var e,t=[];return this._sheet.isInEditMode()&&(e=this._sheet._formulaSelections.filter(function(e){return e.active&&"ref"==e.type})[0])&&t.push(e.colorClass),t},_directionClasses:function(e){var t=[],i=u.classNames,n=this._currentView.ref;return e.move(0,-1).intersects(n)||t.push(i.left),e.move(-1,0).intersects(n)||t.push(i.top),e.move(0,1).intersects(n)||t.push(i.right),e.move(1,0).intersects(n)||t.push(i.bottom),t},_rectangle:function(e){return this._grid.boundingRectangle(e.toRangeRef()).offset(-this._currentView.mergedCellLeft,-this._currentView.mergedCellTop)}});e.spreadsheet.View=d,e.spreadsheet.Pane=u,e.spreadsheet.drawCell=i,r.extend(!0,d,{classNames:{view:"k-spreadsheet-view",fixedContainer:"k-spreadsheet-fixed-container",scroller:"k-spreadsheet-scroller",viewSize:"k-spreadsheet-view-size",clipboard:"k-spreadsheet-clipboard",cellEditor:"k-spreadsheet-cell-editor",barEditor:"k-spreadsheet-editor",topCorner:"k-spreadsheet-top-corner",filterHeadersWrapper:"k-filter-wrapper",filterRange:"k-filter-range",filterButton:"k-spreadsheet-filter",filterButtonActive:"k-state-active",icon:"k-icon k-font-icon",iconFilterDefault:"k-i-arrow-s",sheetsBar:"k-spreadsheet-sheets-bar",sheetsBarActive:"k-spreadsheet-sheets-bar-active",sheetsBarInactive:"k-spreadsheet-sheets-bar-inactive",cellContextMenu:"k-spreadsheet-cell-context-menu",rowHeaderContextMenu:"k-spreadsheet-row-header-context-menu",colHeaderContextMenu:"k-spreadsheet-col-header-context-menu"}}),r.extend(!0,u,{classNames:c})}}(window.kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/grid",["kendo.core","spreadsheet/references"],function(){!function(e){if(!(e.support.browser.msie&&e.support.browser.version<9)){var t=e.spreadsheet.CellRef,i=e.spreadsheet.RangeRef,n=e.spreadsheet.UnionRef,r=e.Class.extend({init:function(e,t,i,n){this.left=e,this.width=i,this.right=e+i,this.top=t,this.height=n,this.bottom=t+n},offset:function(e,t){return new r(this.left+e,this.top+t,this.width,this.height)},resize:function(e,t){return new r(this.left,this.top,this.width+e,this.height+t)},intersects:function(e,t){return this.left<e&&e<this.left+this.width&&this.top<t&&t<this.top+this.height},toDiv:function(t){return e.dom.element("div",{className:t,style:{width:this.width+"px",height:this.height+"px",top:this.top+"px",left:this.left+"px"}})}}),s=e.Class.extend({init:function(e,t,i,n,r,s){this.rowCount=i,this.columnCount=n,this._columns=t,this._rows=e,this._headerHeight=r,this._headerWidth=s},isAxis:function(e){var t=(e=e.toRangeRef()).topLeft,i=e.bottomRight;return 0===t.row&&i.row===this.rowCount-1||0===t.col&&i.col===this.columnCount-1},width:function(e,t){return this._columns.sum(e,t)},height:function(e,t){return this._rows.sum(e,t)},totalHeight:function(){return this._rows.total+this._headerHeight},totalWidth:function(){return this._columns.total+this._headerWidth},index:function(e,t){return t*this.rowCount+e},cellRef:function(e){return new t(e%this.rowCount,e/this.rowCount>>0)},rowRef:function(e){return new i(new t(e,0),new t(e,this.columnCount-1))},colRef:function(e){return new i(new t(0,e),new t(this.rowCount-1,e))},cellRefIndex:function(e){return this.index(e.row,e.col)},normalize:function(e){if(e instanceof i)return new i(this.normalize(e.topLeft),this.normalize(e.bottomRight)).setSheet(e.sheet,e.hasSheet());if(e instanceof n)return e.map(function(e){return this.normalize(e)},this);var t=e.clone();return t.col=Math.max(0,Math.min(this.columnCount-1,e.col)),t.row=Math.max(0,Math.min(this.rowCount-1,e.row)),t},rectangle:function(e){var t=this.normalize(e.topLeft),i=this.normalize(e.bottomRight);return new r(this.width(0,t.col-1),this.height(0,t.row-1),this.width(t.col,i.col),this.height(t.row,i.row))},pane:function(t){return new o(new e.spreadsheet.PaneAxis(this._rows,t.row,t.rowCount,this._headerHeight),new e.spreadsheet.PaneAxis(this._columns,t.column,t.columnCount,this._headerWidth),this)},rangeDimensions:function(e){return{rows:this._rows.values.iterator(e.topLeft.row,e.bottomRight.row),columns:this._columns.values.iterator(e.topLeft.col,e.bottomRight.col)}},forEach:function(e,i){for(var n=this.normalize(e.topLeft),r=this.normalize(e.bottomRight),s=n.col;s<=r.col;s++)for(var o=n.row;o<=r.row;o++)i(new t(o,s))},trim:function(e,n){for(var r=e.topLeft,s=e.bottomRight,o=r.row,a=r.col,l=r.col;l<=s.col;l++){var d=this.index(r.row,l),c=this.index(s.row,l),u=n.tree.intersecting(d,c);if(u.length){var h=this.cellRef(u[u.length-1].end);o=Math.max(o,h.row),a=l}}return new i(e.topLeft,new t(Math.min(o,e.bottomRight.row),a))}}),o=e.Class.extend({init:function(e,t,i){this.rows=e,this.columns=t,this._grid=i,this.headerHeight=e.headerSize,this.headerWidth=t.headerSize,this.hasRowHeader=t.hasHeader,this.hasColumnHeader=e.hasHeader},refresh:function(e,t){this.columns.viewSize(e),this.rows.viewSize(t);var i=this.columns.paneSegment(),n=this.rows.paneSegment();this.left=i.offset,this.top=n.offset,this.right=i.offset+i.length,this.bottom=n.offset+n.length,this.style={top:n.offset+"px",left:i.offset+"px",height:n.length+"px",width:i.length+"px"}},view:function(e,n){var r=this.rows.visible(n),s=this.columns.visible(e);return{rows:r,columns:s,rowOffset:r.offset,columnOffset:s.offset,mergedCellLeft:s.start,mergedCellTop:r.start,ref:new i(new t(r.values.start,s.values.start),new t(r.values.end,s.values.end))}},contains:function(e){return this.rows.contains(e.topLeft.row,e.bottomRight.row)&&this.columns.contains(e.topLeft.col,e.bottomRight.col)},index:function(e,t){return this._grid.index(e,t)},boundingRectangle:function(e){return this._grid.rectangle(e)},cellRefIndex:function(e){return this._grid.cellRefIndex(e)},scrollBoundaries:function(e){var t=this.boundingRectangle(e),i={top:Math.max(0,t.top-this.top+(this.hasColumnHeader?0:this.headerHeight)),left:Math.max(0,t.left-this.left+(this.hasRowHeader?0:this.headerWidth)),right:t.right-this.columns._viewSize+this.headerWidth,bottom:t.bottom-this.rows._viewSize+this.headerHeight},n=this.columns.defaultValue/2,r=this.rows.defaultValue/2;return i.scrollTop=i.top-r,i.scrollBottom=i.bottom+r,i.scrollLeft=i.left-n,i.scrollRight=i.right+n,i}});e.spreadsheet.Grid=s,e.spreadsheet.PaneGrid=o,e.spreadsheet.Rectangle=r}}(kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/axis",["kendo.core"],function(){!function(e){if(!(e.support.browser.msie&&e.support.browser.version<9)){var t=e.Class.extend({init:function(t,i){this._value=i,this._count=t,this.values=new e.spreadsheet.RangeList(0,t-1,i),this._hidden=new e.spreadsheet.RangeList(0,t-1,0),this.scrollBarSize=e.support.scrollbar(),this._refresh()},toJSON:function(e,t){for(var i=[],n=this.values.iterator(0,this._count-1),r=0;r<this._count;r++){var s=n.at(r);if(s!==this._value){var o=t[r];if(void 0===o){o=i.length;var a={index:r};a[e]=s,i.push(a),t[r]=o}}}return i},fromJSON:function(e,t){for(var i=0;i<t.length;i++){var n=t[i][e],r=t[i].index;void 0===r&&(r=i),this.value(r,r,n)}},hide:function(e){if(!this.hidden(e)){var t=this.value(e,e);this._hidden.value(e,e,t),this.value(e,e,0)}},hidden:function(e){return 0!==this._hidden.value(e,e)},includesHidden:function(e,t){return this._hidden.intersecting(e,t).length>1},nextVisible:function(e,t){var i=this._count-1;if(e===i)return t?e+1:e;e+=1;var n=this._hidden.intersecting(e,e)[0];return 0!==n.value?n.end===i?e-1:n.end+1:e},nextPage:function(e,t){return this.index(this.sum(0,e-1)+t)},prevPage:function(e,t){return this.index(this.sum(0,e)-t)},firstVisible:function(){var e=this._hidden.first();return 0===e.value?0:e.end+1},lastVisible:function(){var e=this._hidden.last();return 0===e.value?this._count-1:e.start-1},prevVisible:function(e,t){if(0===e)return t?-1:0;e-=1;var i=this._hidden.intersecting(e,e)[0];return 0!==i.value?0===i.start?e+1:i.start-1:e},unhide:function(e){if(this.hidden(e)){var t=this._hidden.value(e,e);this._hidden.value(e,e,0),this.value(e,e,t)}},value:function(e,t,i){if(void 0===i)return this.values.iterator(e,t).at(0);this.values.value(e,t,i),this._refresh()},sum:function(e,t){for(var i=this.values.iterator(e,t),n=0,r=e;r<=t;r++)n+=i.at(r);return n},visible:function(e,t){var i=null,n=null,r=!1;t>=this.total+this.scrollBarSize&&(r=!0);var s=this._pixelValues.intersecting(e,t);if(i=s[0],n=s[s.length-1],!i)return{values:this.values.iterator(0,0),offset:0};var o=e-i.start,a=(o/i.value.value>>0)+i.value.start,l=o-(a-i.value.start)*i.value.value,d=t-n.start,c=(d/n.value.value>>0)+n.value.start;return c>n.value.end&&(c=n.value.end),r&&(l+=n.value.value-(d-(c-n.value.start)*n.value.value)),l=Math.min(-l,0),{values:this.values.iterator(a,c),offset:l}},index:function(e){for(var t=0,i=this.values.iterator(0,this._count-1),n=i.at(0);n<e&&t<this._count-1;)n+=i.at(++t);return t},_refresh:function(){var t=0;this._pixelValues=this.values.map(function(i){var n=t,r=(t+=(i.end-i.start+1)*i.value)-1;return new e.spreadsheet.ValueRange(n,r,i)}),this.total=t},getState:function(){return{values:this.values.getState(),hidden:this._hidden.getState()}},setState:function(e){this.values.setState(e.values),this._hidden.setState(e.hidden),this._refresh()}}),i=e.Class.extend({init:function(e,t,i,n){this._axis=e,this._start=t,this._count=i,this.hasHeader=0===t,this.headerSize=n,this.defaultValue=e._value,this.frozen=i>0},viewSize:function(e){this._viewSize=e},sum:function(e,t){return this._axis.sum(e,t-1)},start:function(){return this.sum(0,this._start)},size:function(){return this.sum(this._start,this._start+this._count)},index:function(e,t){return this._axis.index(e+(this.frozen?0:t)-this.headerSize)},paneSegment:function(){var e,t=this.start();return this.hasHeader||(t+=this.headerSize),this.frozen?(e=this.size(),this.hasHeader?e+=this.headerSize:e-=this.headerSize):e=this._viewSize-t,{offset:t,length:e}},visible:function(e){var t,i=this.start();this.frozen?(t=this.size(),this.hasHeader||(t-=this.headerSize)):(t=this._viewSize-i-this.headerSize,i+=e);var n=this._axis.visible(i,i+t-1);return this.frozen&&(n.offset=0),n.start=i,this.hasHeader&&(n.offset+=this.headerSize,n.start-=this.headerSize),n},contains:function(e,t){return this.frozen?!(e>this._start+this._count)&&!(t<this._start):t>=this._start}});e.spreadsheet.Axis=t,e.spreadsheet.PaneAxis=i}}(kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/filter",["kendo.core","kendo.data"],function(){!function(e){function t(e){var t=e.getMonth()+1;return t>=1&&t<=3?1:t>=4&&t<=6?2:t>=7&&t<=9?3:4}function i(t,i){if(t instanceof Date){var n=e.date.today();return n.setFullYear(n.getFullYear()+i),n.getFullYear()===t.getFullYear()}return!1}function n(t,i){if(t instanceof Date){var n=e.date.firstDayOfMonth(e.date.today());return n.setMonth(n.getMonth()+i,1),n.getTime()===e.date.firstDayOfMonth(t).getTime()}return!1}function r(t,i){if(i instanceof Date){var n=e.date.dayOfWeek(e.date.getDate(t),1),r=e.date.dayOfWeek(e.date.getDate(i),1);return n.getTime()===r.getTime()}return!1}if(!(e.support.browser.msie&&e.support.browser.version<9)){var s=e.spreadsheet.Filter=e.Class.extend({prepare:function(){},value:function(e){return e.value},matches:function(){throw new Error("The 'matches' method is not implemented.")},toJSON:function(){throw new Error("The 'toJSON' method is not implemented.")}});s.create=function(t){var i=t.filter;if(!i)throw new Error("Filter type not specified.");var n=e.spreadsheet[i.charAt(0).toUpperCase()+i.substring(1)+"Filter"];if(!n)throw new Error("Filter type not recognized.");return new n(t)},e.spreadsheet.ValueFilter=s.extend({_values:[],_dates:[],_blanks:!1,init:function(e){void 0!==e.values&&(this._values=e.values),void 0!==e.blanks&&(this._blanks=e.blanks),void 0!==e.dates&&(this._dates=e.dates)},value:function(t){var i=t.value;if(this._dates.length>0&&t.format&&"number"==typeof i){var n=e.spreadsheet.formatting.type(i,t.format);"date"===n&&(i=e.spreadsheet.numberToDate(i))}return i},matches:function(e){return null===e||void 0===e?this._blanks:e instanceof Date?this._dates.some(function(t){return!(t.year!==e.getFullYear()||void 0!==t.month&&t.month!==e.getMonth()||void 0!==t.day&&t.day!==e.getDate()||void 0!==t.hours&&t.hours!==e.getHours()||void 0!==t.minutes&&t.minutes!==e.getMinutes()||void 0!==t.seconds&&t.seconds!==e.getSeconds())}):this._values.indexOf(e)>=0},toJSON:function(){return{filter:"value",values:this._values.slice(0)}}}),e.spreadsheet.CustomFilter=s.extend({_logic:"and",init:function(t){if(void 0!==t.logic&&(this._logic=t.logic),void 0===t.criteria)throw new Error("Must specify criteria.");this._criteria=t.criteria;var i=e.data.Query.filterExpr({logic:this._logic,filters:this._criteria}).expression;this._matches=new Function("d","return "+i)},matches:function(e){return null!==e&&this._matches(e)},value:function(t){var i=t.value,n=this._criteria[0].value,r=n instanceof Date?"date":typeof n,s=typeof i;return t.format&&(s=e.spreadsheet.formatting.type(i,t.format)),s!=r?"string"==r&&(t.format&&(i=e.spreadsheet.formatting.text(i,t.format)),i+=""):"date"==s&&(i=e.spreadsheet.numberToDate(i)),i},toJSON:function(){return{filter:"custom",logic:this._logic,criteria:this._criteria}}}),e.spreadsheet.TopFilter=s.extend({init:function(e){this._type=e.type,this._value=e.value,this._values=[]},prepare:function(e){var t=e.map(this.value).sort().filter(function(e,t,i){return 0===t||e!==i[t-1]});"topNumber"===this._type||"topPercent"==this._type?t.sort(function(e,t){return t-e}):t.sort(function(e,t){return e-t});var i=this._value;"topPercent"!==this._type&&"bottomPercent"!==this._type||(i=t.length*i/100>>0),this._values=t.slice(0,i)},matches:function(e){return this._values.indexOf(e)>=0},toJSON:function(){return{filter:"top",type:this._type,value:this._value}}}),e.spreadsheet.DynamicFilter=s.extend({init:function(e){if(this._type=e.type,this._predicate=this[e.type],"function"!=typeof this._predicate)throw new Error("DynamicFilter type '"+e.type+"' not recognized.")},value:function(t){var i=t.value;if(t.format){var n=e.spreadsheet.formatting.type(i,t.format);"date"===n&&(i=e.spreadsheet.numberToDate(i))}return i},prepare:function(e){for(var t=0,i=0,n=0;n<e.length;n++){var r=this.value(e[n]);"number"==typeof r&&(t+=r,i++)}this._average=i>0?t/i:0},matches:function(e){return this._predicate(e)},aboveAverage:function(t){return t instanceof Date&&(t=e.spreadsheet.dateToNumber(t)),"number"==typeof t&&t>this._average},belowAverage:function(t){return t instanceof Date&&(t=e.spreadsheet.dateToNumber(t)),"number"==typeof t&&t<this._average},tomorrow:function(t){if(t instanceof Date){var i=e.date.addDays(e.date.today(),1);return e.date.getDate(t).getTime()===i.getTime()}return!1},today:function(t){return t instanceof Date&&e.date.isToday(t)},yesterday:function(t){if(t instanceof Date){var i=e.date.addDays(e.date.today(),-1);return e.date.getDate(t).getTime()===i.getTime()}return!1},nextWeek:function(t){return r(e.date.addDays(e.date.today(),7),t)},thisWeek:function(t){return r(e.date.today(),t)},lastWeek:function(t){return r(e.date.addDays(e.date.today(),-7),t)},nextMonth:function(e){return n(e,1)},thisMonth:function(e){return n(e,0)},lastMonth:function(e){return n(e,-1)},nextQuarter:function(i){if(i instanceof Date){var n=e.date.today(),r=t(i)-t(n);return 1===r&&n.getFullYear()===i.getFullYear()||-3==r&&n.getFullYear()+1===i.getFullYear()}return!1},thisQuarter:function(i){if(i instanceof Date){var n=e.date.today(),r=t(i)-t(n);return 0===r&&n.getFullYear()===i.getFullYear()}return!1},lastQuarter:function(i){if(i instanceof Date){var n=e.date.today(),r=t(n)-t(i);return 1===r&&n.getFullYear()===i.getFullYear()||-3==r&&n.getFullYear()-1===i.getFullYear()}return!1},nextYear:function(e){return i(e,1)},thisYear:function(e){return i(e,0)},lastYear:function(e){return i(e,-1)},yearToDate:function(t){if(t instanceof Date){var i=e.date.today();return t.getFullYear()===i.getFullYear()&&t<=i}return!1},toJSON:function(){return{filter:"dynamic",type:this._type}}}),[1,2,3,4].forEach(function(i){e.spreadsheet.DynamicFilter.prototype["quarter"+i]=function(e){return e instanceof Date&&t(e)===i}}),e.cultures["en-US"].calendar.months.names.forEach(function(t,i){e.spreadsheet.DynamicFilter.prototype[t.toLowerCase()]=function(e){return e instanceof Date&&e.getMonth()===i}})}}(kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/sorter",["kendo.core"],function(){!function(e){if(!(e.support.browser.msie&&e.support.browser.version<9)){var t=e.Class.extend({init:function(e,t){this._grid=e,this._lists=t},indices:function(e,i,n,r){var s=t.ascendingComparer;return!1===n&&(s=t.descendingComparer),i.sortedIndices(this._grid.cellRefIndex(e.topLeft),this._grid.cellRefIndex(e.bottomRight),s,r)},sortBy:function(e,t,i,n,r){for(var s=this.indices(e.toColumn(t),i,n,r),o=e.topLeft.col;o<=e.bottomRight.col;o++)for(var a=this._grid.index(e.topLeft.row,o),l=this._grid.index(e.bottomRight.row,o),d=0;d<this._lists.length;d++)a<this._lists[d].lastRangeStart()&&this._lists[d].sort(a,l,s);return s}});t.ascendingComparer=function(t,i){if(null===t&&null===i)return 0;if(null===t)return 1;if(null===i)return-1;var n=typeof t,r=typeof i;if("number"===n)return"number"===r?t-i:-1;if("string"===n)switch(r){case"number":return 1;case"string":return t.localeCompare(i);default:return-1}if("boolean"===n)switch(r){case"number":case"string":return 1;case"boolean":return t-i;default:return-1}if(t instanceof e.spreadsheet.calc.runtime.CalcError)return i instanceof e.spreadsheet.calc.runtime.CalcError?0:1;throw new Error("Cannot compare "+t+" and "+i)},t.descendingComparer=function(e,i){return null===e&&null===i?0:null===e?1:null===i?-1:t.ascendingComparer(i,e)},e.spreadsheet.Sorter=t}}(kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/numformat",["spreadsheet/calc","kendo.dom"],function(){"use strict";function e(e){function t(){d.push({cond:"text",body:[{type:"text"}]})}function i(){var t=e.skip(a);if(t)return t[1].toLowerCase()}function n(){for(var t,i=[],n=null;!e.eof()&&(t=function(){var t,i;if(i=e.skip(/^([#0?]+),([#0?]+)/))return{type:"digit",sep:!0,format:i[1]+i[2],decimal:o};if(i=e.skip(/^[#0?]+/))return{type:"digit",sep:!1,format:i[0],decimal:o};if(i=e.skip(/^(e)([+-])/i))return{type:"exp",ch:i[1],sign:i[2]};if(i=e.skip(/^(d{1,4}|m{1,5}|yyyy|yy)/i))return i=i[1].toLowerCase(),r({type:"date",part:i.charAt(0),format:i.length});if(i=e.skip(/^(hh?|ss?)/i))return i=i[1].toLowerCase(),r({type:"time",part:i.charAt(0),format:i.length});if(i=e.skip(/^\[(hh?|mm?|ss?)\]/i))return i=i[1].toLowerCase(),r({type:"eltime",part:i.charAt(0),format:i.length});if(i=e.skip(/^(am\/pm|a\/p)/i))return i=i[1].split("/"),{type:"ampm",am:i[0],pm:i[1]};switch(t=e.next()){case";":return null;case"\\":return{type:"str",value:e.next()};case'"':return{type:"str",value:e.readEscaped(t)};case"@":return{type:"text"};case"_":return{type:"space",value:e.next()};case"*":return{type:"fill",value:e.next()};case".":return e.lookingAt(/^\s*[#0?]/)?(o=!0,{type:"dec"}):{type:"str",value:"."};case"%":return{type:"percent"};case",":return{type:"comma"}}return{type:"str",value:t}}());)"date"==t.type?n&&/^(el)?time$/.test(n.type)&&"h"==n.part&&"m"==t.part&&t.format<3&&(t.type="time"):/^(el)?time$/.test(t.type)&&"s"==t.part&&n&&"date"==n.type&&"m"==n.part&&n.format<3&&(n.type="time"),/^(?:str|space|fill)$/.test(t.type)||(n=t),i.push(t);return i}function r(t){if("date"!=t.type||"m"==t.part&&t.format<3){var i=e.skip(/^\.(0+)/);i&&(t.fraction=i[1].length,"date"==t.type&&(t.type="time"))}return t}e=s.InputStream(e);for(var o,d=[],c=!1;!e.eof();){var u=function(){o=!1;var t=i(),r=function(){var t=e.skip(l);if(t){var i=parseFloat(t[2]);if(!isNaN(i))return{op:t[1],value:i}}}();!t&&r&&(t=i());return{color:t,cond:r,body:n()}}();d.push(u),u.cond&&(c=!0)}return c?t():1==d.length?(d[0].cond="num",t()):2==d.length?(d[0].cond={op:">=",value:0},d[1].cond={op:"<",value:0},t()):d.length>=3&&(d[0].cond={op:">",value:0},d[1].cond={op:"<",value:0},d[2].cond={op:"=",value:0},t(),d.length>3&&(d[3].cond="text",d=d.slice(0,4))),d}function t(e){function t(e,t){("digit"==e.type&&"comma"==t.type||"comma"==e.type&&e.hidden&&"comma"==t.type)&&(t.hidden=!0,a++)}var i=function(e){var t=0;return{next:function(){return e[t++]},eof:function(){return t>=e.length},ahead:function(i,n){if(t+i<=e.length){var r=n.apply(null,e.slice(t,t+i));return r&&(t+=i),r}},restart:function(){t=0}}}(e.body),n=!1,r=!1,s=!1,o=0,a=0,l="",d=!1,c=0,u=[],h=[],f=e.cond,p="";if("text"==f)p="if (typeof value == 'string' || value instanceof kendo.spreadsheet.CalcError) { ";else if("num"==f)p="if (typeof value == 'number') { ";else if(f){var m="="==f.op?"==":f.op;p="if (typeof value == 'number' && value "+m+" "+f.value+") { ",l+="value = Math.abs(value); "}for(e.color&&(l+="result.color = "+JSON.stringify(e.color)+"; ");!i.eof();){i.ahead(2,t);var g=i.next();"percent"==g.type?o++:"digit"==g.type?g.decimal?(c+=g.format.length,h.push(g.format)):(u.push(g.format),g.sep&&(d=!0)):"time"==g.type?r=!0:"date"==g.type?n=!0:"ampm"==g.type&&(s=r=!0)}for(o>0&&(l+="value *= "+Math.pow(100,o)+"; "),a>0&&(l+="value /= "+Math.pow(1e3,a)+"; "),u.length&&(l+="var intPart = runtime.formatInt(culture, value, "+JSON.stringify(u)+", "+c+", "+d+"); "),h.length&&(l+="var decPart = runtime.formatDec(value, "+JSON.stringify(h)+", "+c+"); "),(u.length||h.length)&&(l+="type = 'number'; "),n&&(l+="var date = runtime.unpackDate(value); "),r&&(l+="var time = runtime.unpackTime(value); "),(n||r)&&(l+="type = 'date'; "),(o>0||a>0||u.length||h.length||n||r)&&(p||(p="if (typeof value == 'number') { ")),i.restart();!i.eof();){var g=i.next();"dec"==g.type?l+="output += culture.numberFormat['.']; ":"comma"!=g.type||g.hidden?"percent"==g.type?(l+="type = 'percent'; ",l+="output += culture.numberFormat.percent.symbol; "):"str"==g.type?l+="output += "+JSON.stringify(g.value)+"; ":"text"==g.type?(l+="type = 'text'; ",l+="output += value; "):"space"==g.type?(l+="if (output) result.body.push(output); ",l+="output = ''; ",l+="result.body.push({ type: 'space', value: "+JSON.stringify(g.value)+" }); "):"fill"==g.type?l+="output += runtime.fill("+JSON.stringify(g.value)+"); ":"digit"==g.type?l+="output += "+(g.decimal?"decPart":"intPart")+".shift(); ":"date"==g.type?l+="output += runtime.date(culture, date, "+JSON.stringify(g.part)+", "+g.format+"); ":"time"==g.type?l+="output += runtime.time(time, "+JSON.stringify(g.part)+", "+g.format+", "+s+", "+g.fraction+"); ":"eltime"==g.type?l+="output += runtime.eltime(value, "+JSON.stringify(g.part)+", "+g.format+", "+g.fraction+"); ":"ampm"==g.type&&(l+="output += time.hours < 12 ? "+JSON.stringify(g.am)+" : "+JSON.stringify(g.pm)+"; "):l+="output += ','; "}return l+="if (output) result.body.push(output); ",l+="result.type = type; ",l+="return result; ",p&&(l=p+l+"}"),l}function i(i){var n=d[i];if(!n){var r=e(i),s=r.map(t).join("\n");s="'use strict'; return function(value, culture){ if (!culture) culture = kendo.culture(); var output = '', type = null, result = { body: [] }; "+s+"; return result; };",n=d[i]=new Function("runtime",s)(c)}return n}function n(e,t,i){for(e+="";e.length<t;)e=i+e;return e}function r(e){for(var t=e.body,i="",n=0;n<t.length;++n){var r=t[n];"string"==typeof r?i+=r:"space"==r.type&&(i+=" ")}return i}if(kendo.support.browser.msie&&kendo.support.browser.version<9)return;var s=kendo.spreadsheet.calc,o=kendo.dom,a=/^\[(black|green|white|blue|magenta|yellow|cyan|red)\]/i,l=/^\[(<=|>=|<>|<|>|=)(-?[0-9.]+)\]/;var d=Object.create(null);var c={unpackDate:s.runtime.unpackDate,unpackTime:s.runtime.unpackTime,date:function(e,t,i,r){switch(i){case"d":switch(r){case 1:return t.date;case 2:return n(t.date,2,"0");case 3:return e.calendars.standard.days.namesAbbr[t.day];case 4:return e.calendars.standard.days.names[t.day]}break;case"m":switch(r){case 1:return t.month+1;case 2:return n(t.month+1,2,"0");case 3:return e.calendars.standard.months.namesAbbr[t.month];case 4:return e.calendars.standard.months.names[t.month];case 5:return e.calendars.standard.months.names[t.month].charAt(0)}break;case"y":switch(r){case 2:return t.year%100;case 4:return t.year}}return"##"},time:function(e,t,i,r,s){var o,a;switch(t){case"h":o=n(r?e.hours%12||12:e.hours,i,"0"),s&&(a=(e.minutes+(e.seconds+e.milliseconds/1e3)/60)/60);break;case"m":o=n(e.minutes,i,"0"),s&&(a=(e.seconds+e.milliseconds/1e3)/60);break;case"s":o=n(e.seconds,i,"0"),s&&(a=e.milliseconds/1e3)}return a&&(o+=a.toFixed(s).replace(/^0+/,"")),o},eltime:function(e,t,i,r){var s,o;switch(t){case"h":s=24*e;break;case"m":s=24*e*60;break;case"s":s=24*e*60*60}return r&&(o=s-(0|s)),s=n(0|s,i,"0"),o&&(s+=o.toFixed(r).replace(/^0+/,"")),s},fill:function(e){return e},formatInt:function(e,t,i,n,r){function s(t){r&&d&&d%3==0&&" "!=t&&(o=e.numberFormat[","]+o),o=t+o,d++}t=t.toFixed(n).replace(/\..*$/,""),n>0&&("0"===t?t="":"-0"===t&&(t="-"));for(var o,a=t.length-1,l=[],d=0,c=i.length;--c>=0;){var u=i[c];o="";for(var h=u.length;--h>=0;){var f=u.charAt(h);a<0?"0"==f?s("0"):"?"==f&&s(" "):s(t.charAt(a--))}if(0===c)for(;a>=0;)s(t.charAt(a--));l.unshift(o)}return l},formatDec:function(e,t,i){var n=(e=e.toFixed(i)).indexOf(".");e=n>=0?e.substr(n+1).replace(/0+$/,""):"";for(var r=0,s=[],o=0;o<t.length;++o){for(var a=t[o],l="",d=0;d<a.length;++d){var c=a.charAt(d);r<e.length?l+=e.charAt(r++):"0"==c?l+="0":"?"==c&&(l+=" ")}s.push(l)}return s}};kendo.spreadsheet.formatting={compile:i,parse:e,format:function(e,t,n){var r=i(t)(e,n),s=o.element("span");s.__dataType=r.type;var a=r.body;r.color&&(s.attr.style={color:r.color});for(var l=0;l<a.length;++l){var d=a[l];"string"==typeof d?s.children.push(o.text(d)):"space"==d.type&&s.children.push(o.element("span",{style:{visibility:"hidden"}},[o.text(d.value)]))}return s},text:function(e,t,n){var s=i(t)(e,n);return r(s)},textAndColor:function(e,t,n){var s=i(t)(e,n);return{text:r(s),color:s.color,type:s.type}},type:function(e,t){return i(t)(e).type},adjustDecimals:function(t,i){var r=e(t);return function(e,t){e.forEach(function(e){var i=t;if("text"!=e.cond){for(var r=e.body,s=!1,o=r.length;0!==i&&--o>=0;){var a=r[o];if("digit"==a.type){if(a.decimal){if(s=!0,i>0)a.format+=n("",i,"0");else if(i<0){var l=a.format.length;a.format=a.format.substr(0,l+i),i+=l-a.format.length}if(0===a.format.length)for(r.splice(o,1);--o>=0;){if("digit"==(a=r[o]).type&&a.decimal){++o;break}if("dec"==a.type){r.splice(o,1);break}}}if(i>0)break}}!s&&i>0&&r.splice(o+1,0,{type:"dec"},{type:"digit",sep:!1,decimal:!0,format:n("",i,"0")})}})}(r,i),function(e){function t(e,t){return t.fraction&&(e+="."+n("",t.fraction,"0")),e}function i(e){return"digit"==e.type?e.sep?e.format.charAt(0)+","+e.format.substr(1):e.format:"exp"==e.type?e.ch+e.sign:"date"==e.type||"time"==e.type?t(n("",e.format,e.part),e):"eltime"==e.type?t("["+n("",e.format,e.part)+"]",e):"ampm"==e.type?e.am+"/"+e.pm:"str"==e.type?JSON.stringify(e.value):"text"==e.type?"@":"space"==e.type?"_"+e.value:"fill"==e.type?"*"+e.value:"dec"==e.type?".":"percent"==e.type?"%":"comma"==e.type?",":void 0}return e.map(function(e){var t="";e.color&&(t+="["+e.color+"]");e.cond&&"text"!=e.cond&&"num"!=e.cond&&(t+="["+e.cond.op+e.cond.value+"]");return t+=e.body.map(i).join("")}).join(";")}(r)}}}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/runtime.functions",["spreadsheet/runtime","util/main"],function(){"use strict";function e(e){return(Math.exp(e)+Math.exp(-e))/2}function t(e){return(Math.exp(e)-Math.exp(-e))/2}function i(i){return t(i)/e(i)}function n(e,t){for(;t;){var i=e%t;e=t,t=i}return e}function r(e,t){return Math.abs(e*t)/n(e,t)}function s(e,t){for(var i=[],n=0,r=e[0];n<e.length;)i.push({matrix:e[n++],pred:j(e[n++])});for(var s=0;s<r.height;++s)e:for(var o=0;o<r.width;++o){for(n=0;n<i.length;++n){var a=i[n].matrix.get(s,o);if(!i[n].pred(null==a||""===a?0:a))continue e}t(s,o)}}function o(e){return e.reduce(function(e,t){return e+t},0)/e.length}function a(e,t,i){return null==i&&(i=o(e)),e.reduce(function(e,t){return e+Math.pow(t-i,2)},0)/t}function l(e,t){return Math.sqrt(a(e,t))}function d(e,t,i){var n=0,r=0,s=null,o=null,a=!1;return e.forEach(function(e){e<t?(n++,s=null==s?e:Math.max(s,e)):e>t?(r++,o=null==o?e:Math.min(o,e)):a=!0}),n||r?a?i?(n+1)/(e.length+1):n/(n+r):((o-t)*d(e,s,i)+(t-s)*d(e,o,i))/(o-s):new F("N/A")}function c(e,t,i){for(var n=0,r=o(e),s=o(t),a=e.length,l=0;l<a;++l)n+=(e[l]-r)*(t[l]-s);return n/i}function u(e,t){e.sort(k);var i=e.length,n=0|t,r=t-n;return 0===n?e[0]:n>=i?e[i-1]:(--n,e[n]+r*(e[n+1]-e[n]))}function h(e,t){var i=t*(e.length-1)+1;return u(e,i)}function f(e,t){var i=t*(e.length+1);return u(e,i)}function p(e,t,i){var n=[];return function t(r){if(r instanceof M)e.getRefCells(r,!0).forEach(function(e){var t=e.value;if(!(1&i&&e.hidden)){if(e.formula){var r=e.formula.print(e.row,e.col);if(/^\s*(?:aggregate|subtotal)\s*\(/i.test(r)&&!(4&i))return;"value"in e.formula&&(t=e.formula.value)}2&i&&t instanceof F||("number"==typeof t||t instanceof F)&&n.push(t)}});else if(Array.isArray(r))for(var s=0;s<r.length;++s)t(r[s]);else r instanceof I?r.each(t):"number"==typeof r?n.push(r):r instanceof F&&!(2&i)&&n.push(r)}(t),n}function m(e,t,i,n){if(n){for(var r=0,s=0;s<=e;++s)r+=U(t,s)*Math.pow(i,s)*Math.pow(1-i,t-s);return r}return U(t,e)*Math.pow(i,e)*Math.pow(1-i,t-e)}function g(e){var t=N(z(e,0,1));return 4==t.day||3==t.day&&S.isLeapYear(e)?53:52}function v(e,t,i){var n=N(e),r=N(t);return i?(31==n.date&&(n.date=30),31==r.date&&(r.date=30)):(1==n.month&&1==r.month&&n.date==H(n.year,1)&&r.date==H(r.year,1)&&(r.date=30),n.date==H(n.year,n.month)?(n.date=30,31==r.date&&(r.date=30)):30==n.date&&31==r.date&&(r.date=30)),360*(r.year-n.year)+30*(r.month-n.month)+(r.date-n.date)}function _(e,t){this.link=e,this.text=t}function b(e){return"number"==typeof e||"boolean"==typeof e||null==e||""===e}function k(e,t){return e===t?0:e<t?-1:1}function w(e,t){return e===t?0:e<t?1:-1}if(kendo.support.browser.msie&&kendo.support.browser.version<9)return;var y=kendo.util,x=kendo.spreadsheet,C=x.calc,S=C.runtime,T=S.defineFunction,D=S.defineAlias,F=S.CalcError,E=x.RangeRef,R=x.CellRef,A=x.UnionRef,I=S.Matrix,M=x.Ref,H=S.daysInMonth,z=S.packDate,N=S.unpackDate,P=S.daysInYear;["abs","cos","sin","acos","asin","tan","atan","exp","sqrt"].forEach(function(e){T(e,Math[e]).args([["*n","number"]])}),T("ln",Math.log).args([["*n","number"]]),T("log",function(e,t){return Math.log(e)/Math.log(t)}).args([["*num","number++"],["*base",["or","number++",["null",10]]],["?",["assert","$base != 1","DIV/0"]]]),T("log10",function(e){return Math.log(e)/Math.log(10)}).args([["*num","number++"]]),T("pi",function(){return Math.PI}).args([]),T("sqrtpi",function(e){return Math.sqrt(e*Math.PI)}).args([["*num","number+"]]),T("degrees",function(e){return 180*e/Math.PI%360}).args([["*radians","number"]]),T("radians",function(e){return Math.PI*e/180}).args([["*degrees","number"]]);T("cosh",e).args([["*num","number"]]),T("acosh",function(e){return Math.log(e+Math.sqrt(e-1)*Math.sqrt(e+1))}).args([["*num","number"],["?",["assert","$num >= 1"]]]);T("sinh",t).args([["*num","number"]]),T("asinh",function(e){return Math.log(e+Math.sqrt(e*e+1))}).args([["*num","number"]]),T("sec",function(e){return 1/Math.cos(e)}).args([["*num","number"]]),T("sech",function(t){return 1/e(t)}).args([["*num","number"]]),T("csc",function(e){return 1/Math.sin(e)}).args([["*num","number"]]),T("csch",function(e){return 1/t(e)}).args([["*num","number"]]),T("atan2",function(e,t){return Math.atan(t/e)}).args([["*x","divisor"],["*y","number"]]);T("tanh",i).args([["*num","number"]]),T("atanh",function(e){return Math.log(Math.sqrt(1-e*e)/(1-e))}).args([["*num",["and","number",["(between)",-1,1]]]]),T("cot",function(e){return 1/Math.tan(e)}).args([["*num","divisor"]]),T("coth",function(e){return 1/i(e)}).args([["*num","divisor"]]),T("acot",function(e){return Math.PI/2-Math.atan(e)}).args([["*num","number"]]),T("acoth",function(e){return Math.log((e+1)/(e-1))/2}).args([["*num","number"],["?",["or",["assert","$num < -1"],["assert","$num > 1"]]]]),T("power",function(e,t){return Math.pow(e,t)}).args([["*a","number"],["*b","number"]]),T("mod",function(e,t){return e%t}).args([["*a","number"],["*b","divisor"]]),T("quotient",function(e,t){return Math.floor(e/t)}).args([["*a","number"],["*b","divisor"]]),T("ceiling",function(e,t){return t?t*Math.ceil(e/t):0}).args([["*number","number"],["*significance","number"],["?",["assert","$significance >= 0 || $number < 0"]]]),T("ceiling.precise",function(e,t){return(t=Math.abs(t))?t*Math.ceil(e/t):0}).args([["*number","number"],["*significance",["or","number",["null",1]]]]),D("iso.ceiling","ceiling.precise"),T("ceiling.math",function(e,t,i){return t&&e?(e<0&&(!i&&t<0||i&&t>0)&&(t=-t),t?t*Math.ceil(e/t):0):0}).args([["*number","number"],["*significance",["or","number",["null","$number < 0 ? -1 : 1"]]],["*mode",["or","logical",["null",0]]]]),T("floor",function(e,t){return t?t*Math.floor(e/t):0}).args([["*number","number"],["*significance","number"],["?",["assert","$significance >= 0 || $number < 0"]]]),T("floor.precise",function(e,t){return(t=Math.abs(t))?t*Math.floor(e/t):0}).args([["*number","number"],["*significance",["or","number",["null",1]]]]),T("floor.math",function(e,t,i){return t&&e?(e<0&&(!i&&t<0||i&&t>0)&&(t=-t),t?t*Math.floor(e/t):0):0}).args([["*number","number"],["*significance",["or","number",["null","$number < 0 ? -1 : 1"]]],["*mode",["or","logical",["null",0]]]]),T("int",Math.floor).args([["*number","number"]]),T("mround",function(e,t){return t?t*Math.round(e/t):0}).args([["*number","number"],["*multiple","number"]]),T("round",function(e,t){var i=e<0?-1:1;return i<0&&(e=-e),t=Math.pow(10,t),e*=t,e=Math.round(e),i*e/t}).args([["*number","number"],["*digits","number"]]),T("roundup",function(e,t){return t=Math.pow(10,t),e*=t,(e=e<0?Math.floor(e):Math.ceil(e))/t}).args([["*number","number"],["*digits","number"]]),T("rounddown",function(e,t){return t=Math.pow(10,t),e*=t,(e=e<0?Math.ceil(e):Math.floor(e))/t}).args([["*number","number"],["*digits","number"]]),T("even",function(e){var t=e<0?Math.floor(e):Math.ceil(e);return t%2?t+(t<0?-1:1):t}).args([["*number","number"]]),T("odd",function(e){var t=e<0?Math.floor(e):Math.ceil(e);return t%2?t:t+(t<0?-1:1)}).args([["*number","number"]]),T("sign",function(e){return e<0?-1:e>0?1:0}).args([["*number","number"]]);T("gcd",function(e){for(var t=e[0],i=1;i<e.length;++i)t=n(t,e[i]);return t}).args([["numbers",["collect","number"]]]),T("lcm",function(e){for(var t=e[0],i=1;i<e.length;++i)t=r(t,e[i]);return t}).args([["numbers",["collect","number"]]]),T("sum",function(e){return e.reduce(function(e,t){return e+t},0)}).args([["numbers",["collect","number"]]]),T("product",function(e){return e.reduce(function(e,t){return e*t},1)}).args([["numbers",["collect","number"]]]),T("sumproduct",function(e,t){var i=0;return e.each(function(e,n,r){if("number"==typeof e){for(var s=0;s<t.length;++s){var o=t[s].get(n,r);if("number"!=typeof o)return;e*=o}i+=e}}),i}).args([["a1","matrix"],["+",["a2",["and","matrix",["assert","$a2.width == $a1.width"],["assert","$a2.height == $a1.height"]]]]]),T("sumsq",function(e){return e.reduce(function(e,t){return e+t*t},0)}).args([["numbers",["collect","number"]]]),T("sumx2my2",function(e,t){var i=0;return e.each(function(e,n,r){var s=t.get(n,r);"number"==typeof e&&"number"==typeof s&&(i+=e*e-s*s)}),i}).args([["a","matrix"],["b",["and","matrix",["assert","$b.width == $a.width"],["assert","$b.height == $a.height"]]]]),T("sumx2py2",function(e,t){var i=0;return e.each(function(e,n,r){var s=t.get(n,r);"number"==typeof e&&"number"==typeof s&&(i+=e*e+s*s)}),i}).args([["a","matrix"],["b",["and","matrix",["assert","$b.width == $a.width"],["assert","$b.height == $a.height"]]]]),T("sumxmy2",function(e,t){var i=0;return e.each(function(e,n,r){var s=t.get(n,r);"number"==typeof e&&"number"==typeof s&&(i+=(e-s)*(e-s))}),i}).args([["a","matrix"],["b",["and","matrix",["assert","$b.width == $a.width"],["assert","$b.height == $a.height"]]]]),T("seriessum",function(e,t,i,n){var r=0;return n.each(function(n){if("number"!=typeof n)throw new F("VALUE");r+=n*Math.pow(e,t),t+=i}),r}).args([["x","number"],["y","number"],["m","number"],["a","matrix"]]),T("min",function(e){return Math.min.apply(Math,e)}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length > 0","N/A"]]]),T("max",function(e){return Math.max.apply(Math,e)}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length > 0","N/A"]]]),T("counta",function(e){return e.length}).args([["values",["#collect","anyvalue"]]]),T("count",function(e){return e.length}).args([["numbers",["#collect","number"]]]),T("countunique",function(e){var t=0,i=[];return e.forEach(function(e){i.indexOf(e)<0&&(t++,i.push(e))}),t}).args([["values",["#collect","anyvalue"]]]),T("countblank",function(e){function t(e){null!=e&&""!==e||i++}var i=0;return function(e){for(var i=0;i<e.length;++i){var n=e[i];n instanceof I?n.each(t,!0):t(n)}}(e),i}).args([["+",["args",["or","matrix","anyvalue"]]]]),T("iseven",function(e){return e%2==0}).args([["*number","number"]]),T("isodd",function(e){return e%2!=0}).args([["*number","number"]]),T("n",function(e){return"boolean"==typeof e?e?1:0:"number"==typeof e?e:0}).args([["*value","anyvalue"]]),T("na",function(){return new F("N/A")}).args([]);var L=[["m1","matrix"],["c1","anyvalue"],[["m2",["and","matrix",["assert","$m1.width == $m2.width"],["assert","$m1.height == $m2.height"]]],["c2","anyvalue"]]];T("countifs",function(e,t,i){var n=0;return i.unshift(e,t),s(i,function(){n++}),n}).args(L);var B=[["range","matrix"]].concat(L);T("sumifs",function(e,t,i,n){n.unshift(e,b,t,i);var r=0;return s(n,function(t,i){var n=e.get(t,i);n&&(r+=n)}),r}).args(B),T("averageifs",function(e,t,i,n){n.unshift(e,b,t,i);var r=0,o=0;return s(n,function(t,i){var n=e.get(t,i);null!=n&&""!==n||(n=0),r+=n,o++}),o?r/o:new F("DIV/0")}).args(B),T("countif",function(e,t){t=j(t);var i=0;return e.each(function(e){t(e)&&i++}),i}).args([["range","matrix"],["*criteria","anyvalue"]]);var O=[["range","matrix"],["*criteria","anyvalue"],["sumRange",["or",["and","matrix",["assert","$sumRange.width == $range.width"],["assert","$sumRange.height == $range.height"]],["null","$range"]]]];T("sumif",function(e,t,i){var n=0;return t=j(t),e.each(function(e,r,s){if(t(e)){var o=i.get(r,s);b(o)&&(n+=o||0)}}),n}).args(O),T("averageif",function(e,t,i){var n=0,r=0;return t=j(t),e.each(function(e,s,o){if(t(e)){var a=i.get(s,o);b(a)&&(n+=a||0,r++)}}),r?n/r:new F("DIV/0")}).args(O),function(e){e("large",function(e,t){return e.sort(w)[t]}),e("small",function(e,t){return e.sort(k)[t]})}(function(e,t){T(e,function(e,i){var n=[],r=e.each(function(e){if(e instanceof F)return e;"number"==typeof e&&n.push(e)});return r||(i>n.length?new F("NUM"):t(n,i-1))}).args([["array","matrix"],["*nth","number++"]])});T("stdev.s",function(e){return l(e,e.length-1)}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length >= 2","NUM"]]]),T("stdev.p",function(e){return l(e,e.length)}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length >= 2","NUM"]]]),T("var.s",function(e){return a(e,e.length-1)}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length >= 2","NUM"]]]),T("var.p",function(e){return a(e,e.length)}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length >= 2","NUM"]]]),T("median",function(e){var t=e.length;return e.sort(k),t%2?e[t>>1]:(e[t>>1]+e[t>>2])/2}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length > 0","N/A"]]]),T("mode.sngl",function(e){e.sort(k);for(var t=null,i=0,n=1,r=null,s=0;s<e.length;++s){var o=e[s];o!=t?(i=1,t=o):i++,i>n&&(n=i,r=o)}return null==r?new F("N/A"):r}).args([["numbers",["collect","number"]]]),T("mode.mult",function(e){var t=Object.create(null),i=2,n=[];e.forEach(function(e){var r=t[e]||0;t[e]=++r,r==i?n.push(e):r>i&&(i=r,n=[e])});var r=new I(this);return n.forEach(function(e,t){r.set(t,0,e)}),r}).args([["numbers",["collect","number"]]]),T("geomean",function(e){var t=e.length,i=e.reduce(function(e,t){if(t<0)throw new F("NUM");return e*t},1);return Math.pow(i,1/t)}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length > 0","NUM"]]]),T("harmean",function(e){var t=e.length,i=e.reduce(function(e,t){if(!t)throw new F("DIV/0");return e+1/t},0);return t/i}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length > 0","NUM"]]]),T("trimmean",function(e,t){var i=e.length;e.sort(k);var n=Math.floor(i*t);n%2&&--n;for(var r=0,s=n/=2;s<i-n;++s)r+=e[s];return r/(i-2*n)}).args([["numbers",["collect","number",1]],["percent",["and","number",["[between)",0,1]]],["?",["assert","$numbers.length > 0","NUM"]]]),T("frequency",function(e,t){e.sort(k),t.sort(k);var i=-1/0,n=0,r=new I(this);return t.forEach(function(t,s){var o=function(t){var r=0;for(;n<e.length&&e[n]>i&&e[n]<=t;)++r,++n;return r}(t);i=t,r.set(s,0,o)}),r.set(r.height,0,e.length-n),r}).args([["data",["collect","number",1]],["bins",["collect","number",1]]]),T("rank.eq",function(e,t,i){t.sort(i?k:w);var n=t.indexOf(e);return n<0?new F("N/A"):n+1}).args([["value","number"],["numbers",["collect","number"]],["order",["or","logical",["null",!1]]]]),D("rank","rank.eq"),T("rank.avg",function(e,t,i){t.sort(i?k:w);var n=t.indexOf(e);if(n<0)return new F("N/A");for(var r=n;t[r]==e;++r);return(n+r+1)/2}).args([["value","number"],["numbers",["collect","number"]],["order",["or","logical",["null",!1]]]]),T("kurt",function(e){var t=e.length,i=o(e),n=a(e,t-1,i),r=Math.sqrt(n),s=e.reduce(function(e,t){return e+Math.pow((t-i)/r,4)},0);return t*(t+1)/((t-1)*(t-2)*(t-3))*s-3*Math.pow(t-1,2)/((t-2)*(t-3))}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length >= 4","NUM"]]]);var V=[["array",["collect","number",1]],["x","number"],["significance",["or",["null",3],"integer++"]],["?",["assert","$array.length > 0","NUM"]]];T("percentrank.inc",function(e,t,i){var n=d(e,t,0);return n=n.toFixed(i+1),parseFloat(n.substr(0,n.length-1))}).args(V),T("percentrank.exc",function(e,t,i){var n=d(e,t,1);return n=n.toFixed(i+1),parseFloat(n.substr(0,n.length-1))}).args(V),D("percentrank","percentrank.inc");T("covariance.p",function(e,t){return c(e,t,e.length)}).args([["array1",["collect","number",1]],["array2",["collect","number",1]],["?",["assert","$array1.length == $array2.length","N/A"]],["?",["assert","$array1.length > 0","DIV/0"]]]),T("covariance.s",function(e,t){return c(e,t,e.length-1)}).args([["array1",["collect","number",1]],["array2",["collect","number",1]],["?",["assert","$array1.length == $array2.length","N/A"]],["?",["assert","$array1.length > 1","DIV/0"]]]),D("covar","covariance.p");var W=y.memoize(function(e){for(var t=2,i=1;t<=e;++t)i*=t;return i});T("fact",W).args([["*n","integer+"]]),T("factdouble",function(e){for(var t=2+(1&e),i=1;t<=e;t+=2)i*=t;return i}).args([["*n","integer+"]]),T("multinomial",function(e){var t=1,i=0;return e.forEach(function(e){if(e<0)throw new F("NUM");i+=e,t*=W(e)}),W(i)/t}).args([["numbers",["collect","number"]]]);var U=y.memoize(function(e,t){for(var i=t+1,n=1,r=1,s=1;n<=e-t;++i,++n)r*=i,s*=n;return r/s});T("combin",U).args([["*n","integer++"],["*k",["and","integer",["[between]",0,"$n"]]]]),T("combina",function(e,t){return U(e+t-1,e-1)}).args([["*n","integer++"],["*k",["and","integer",["[between]",1,"$n"]]]]),T("average",function(e){var t=e.reduce(function(e,t){return e+t},0);return t/e.length}).args([["numbers",["collect",["and","number",["not","boolean"]]]],["?",["assert","$numbers.length > 0","DIV/0"]]]),T("averagea",function(e){var t=0,i=0;return e.forEach(function(e){"string"!=typeof e&&(t+=e),++i}),i?t/i:new F("DIV/0")}).args([["values",["collect","anyvalue"]]]);T("percentile.inc",h).args([["numbers",["collect","number",1]],["p",["and","number",["[between]",0,1]]]]),T("percentile.exc",f).args([["numbers",["collect","number",1]],["p",["and","number",["(between)",0,1]]]]),T("quartile.inc",function(e,t){return h(e,t/4)}).args([["numbers",["collect","number",1]],["quarter",["values",0,1,2,3,4]]]),T("quartile.exc",function(e,t){return f(e,t/4)}).args([["numbers",["collect","number",1]],["quarter",["values",0,1,2,3,4]]]),D("quartile","quartile.inc"),D("percentile","percentile.inc");var q=["AVERAGE","COUNT","COUNTA","MAX","MIN","PRODUCT","STDEV.S","STDEV.P","SUM","VAR.S","VAR.P","MEDIAN","MODE.SNGL","LARGE","SMALL","PERCENTILE.INC","QUARTILE.INC","PERCENTILE.EXC","QUARTILE.EXC"];T("aggregate",function(e,t,i,n){var r=this;r.resolveCells(n,function(){var s;if(t>12){s=p(r,n[0],i);var o=n[1];if(o instanceof R&&(o=r.getRefData(o)),"number"!=typeof o)return e(new F("VALUE"))}else s=p(r,n,i);r.func(q[t-1],e,s)})}).argsAsync([["funcId",["values",1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]],["options",["or",["null",0],["values",0,1,2,3,4,5,6,7]]],["args","rest"]]),T("subtotal",function(e,t){var i=this,n=t>100;n&&(t-=100);for(var r=[],s=2;s<arguments.length;++s)r.push(arguments[s]);i.resolveCells(r,function(){var s=p(i,r,n?1:0);i.func(q[t-1],e,s)})}).argsAsync([["funcId",["values",1,2,3,4,5,6,7,8,9,10,11,101,102,103,104,105,106,107,108,109,110,111]],["+",["ref",["or","ref","#matrix"]]]]),T("avedev",function(e){var t=e.reduce(function(e,t){return e+t},0)/e.length;return e.reduce(function(e,i){return e+Math.abs(i-t)},0)/e.length}).args([["numbers",["collect","number"]],["?",["assert","$numbers.length >= 2","NUM"]]]);T("binom.dist",m).args([["successes","integer+"],["trials",["and","integer",["assert","$trials >= $successes"]]],["probability",["and","number",["[between]",0,1]]],["cumulative","logical"]]),D("binomdist","binom.dist"),T("binom.inv",function(e,t,i){for(var n=0;n<=e;++n)if(m(n,e,t,!0)>=i)return n;return new F("N/A")}).args([["trials","integer+"],["probability",["and","number",["[between]",0,1]]],["alpha",["and","number",["[between]",0,1]]]]),D("critbinom","binom.inv"),T("binom.dist.range",function(e,t,i,n){for(var r=0,s=i;s<=n;++s)r+=U(e,s)*Math.pow(t,s)*Math.pow(1-t,e-s);return r}).args([["trials","integer+"],["probability",["and","number",["[between]",0,1]]],["successes_min",["and","integer",["[between]",0,"$trials"]]],["successes_max",["or",["and","integer",["[between]","$successes_min","$trials"]],["null","$successes_min"]]]]),T("negbinom.dist",function(e,t,i,n){if(n){for(var r=0;e>=0;)r+=U(e+t-1,e)*Math.pow(i,t)*Math.pow(1-i,e),e--;return r}return U(e+t-1,e)*Math.pow(i,t)*Math.pow(1-i,e)}).args([["number_f","integer+"],["number_s","integer+"],["probability_s",["and","number",["[between]",0,1]]],["cumulative","logical"]]),D("negbinomdist","negbinom.dist"),T("address",function(e,t,i,n,r){var s=new R(e-1,t-1,i-1);return r&&s.setSheet(r,!0),n?s.print(0,0):s.print()}).args([["row","integer++"],["col","integer++"],["abs",["or",["null",1],["values",1,2,3,4]]],["a1",["or",["null",!0],"logical"]],["sheet",["or","null","string"]]]),T("areas",function(e){var t=0;return function e(i){i instanceof R||i instanceof E?t++:i instanceof A&&i.refs.forEach(e)}(e),t}).args([["ref","ref"]]),T("choose",function(e,t){return e>t.length?new F("N/A"):t[e-1]}).args([["*index","integer"],["+",["value","anything"]]]),T("column",function(e){return e?e instanceof R?e.col+1:this.asMatrix(e).mapCol(function(t){return t+e.topLeft.col+1}):this.formula.col+1}).args([["ref",["or","area","null"]]]),T("columns",function(e){return e instanceof M?e.width():e.width}).args([["ref",["or","area","#matrix"]]]),T("formulatext",function(e){var t=this.getRefCells(e)[0];return t.formula?t.formula.print(t.row,t.col):new F("N/A")}).args([["ref","ref"]]),T("hlookup",function(e,t,i,n){var r=null;return t.eachCol(function(i){var s=t.get(0,i);if(n){if(s>e)return!0;r=i}else if(s===e)return r=i,!0}),null==r?new F("N/A"):t.get(i-1,r)}).args([["value","anyvalue"],["range","matrix"],["row","integer++"],["approx",["or","logical",["null",!0]]]]),T("index",function(e,t,i,n){var r=e instanceof A?e.refs[n-1]:e;if(!t&&!i||!r)return new F("N/A");if((r=this.asMatrix(r)).width>1&&r.height>1){if(t&&i)return r.get(t-1,i-1);if(!t)return r.mapRow(function(e){return r.get(e,i-1)});if(!i)return r.mapCol(function(e){return r.get(t-1,e)})}return 1==r.width?r.get(t-1,0):1==r.height?r.get(0,i-1):new F("REF")}).args([["range",["or","matrix","ref"]],["row",["or","integer+","null"]],["col",["or","integer+","null"]],["areanum",["or","integer++",["null",1]]]]),T("indirect",function(e){try{var t=this.formula,i=C.parseFormula(t.sheet,t.row,t.col,e);if(!(i.ast instanceof M))throw 1;return i.ast.absolute(t.row,t.col)}catch(e){return new F("REF")}}).args([["thing","string"]]),T("match",function(e,t,i){var n,r=1;return 0===i?n=j(e):-1===i?n=j("<="+e):1===i&&(n=j(">="+e)),t.each(function(t){if(null!=t&&n(t))return 0!==i&&e!=t&&--r,!0;r++},!0)&&r>0?r:new F("N/A")}).args([["value","anyvalue"],["range","matrix"],["type",["or",["values",-1,0,1],["null",1]]]]),T("offset",function(e,t,i,n,r){var s=(e instanceof R?e:e.topLeft).clone();return s.row+=t,s.col+=i,s.row<0||s.col<0?new F("VALUE"):n>1||r>1?new E(s,new R(s.row+n-1,s.col+r-1)).setSheet(e.sheet,e.hasSheet()):s}).args([["ref","area"],["*rows","integer"],["*cols","integer"],["*height",["or","integer++",["null","$ref.height()"]]],["*width",["or","integer++",["null","$ref.width()"]]]]),T("row",function(e){return e?e instanceof R?e.row+1:this.asMatrix(e).mapRow(function(t){return t+e.topLeft.row+1}):this.formula.row+1}).args([["ref",["or","area","null"]]]),T("rows",function(e){return e instanceof M?e.height():e.height}).args([["ref",["or","area","#matrix"]]]),T("vlookup",function(e,t,i,n){var r=null;return t.eachRow(function(i){var s=t.get(i,0);if(n){if(s>e)return!0;r=i}else if(s===e)return r=i,!0}),null==r?new F("N/A"):t.get(r,i-1)}).args([["value","anyvalue"],["range","matrix"],["col","integer++"],["approx",["or","logical",["null",!0]]]]),T("date",function(e,t,i){return z(e,t-1,i)}).args([["*year","integer"],["*month","integer"],["*date","integer"]]),T("day",function(e){return N(e).date}).args([["*date","date"]]),T("month",function(e){return N(e).month+1}).args([["*date","date"]]),T("year",function(e){return N(e).year}).args([["*date","date"]]),T("weekday",function(e){return N(e).day+1}).args([["*date","date"]]),T("weeknum",function(e,t){var i,n=z(N(e).year,0,1),r=N(n);return 21==t?((i=3-(r.day+6)%7)<0&&(i+=7),n+=i,r.date+=i,r.day=4,t=1):t=1==t?0:2==t?1:(t-10)%7,(i=r.day-t)<0&&(i+=7),n-=i,Math.ceil((e+1-n)/7)}).args([["*date","date"],["*type",["or",["null",1],["values",1,2,11,12,13,14,15,16,17,21]]]]);T("isoweeknum",function(e){var t=N(e),i=t.day||7,n=Math.floor((t.ord-i+10)/7);return n<1?g(t.year-1):53==n&&n>g(t.year)?1:n}).args([["*date","date"]]),T("now",function(){return S.dateToSerial(new Date)}).args([]),T("today",function(){return 0|S.dateToSerial(new Date)}).args([]),T("time",function(e,t,i){return S.packTime(e,t,i,0)}).args([["*hours","integer"],["*minutes","integer"],["*seconds","integer"]]),T("hour",function(e){return S.unpackTime(e).hours}).args([["*time","datetime"]]),T("minute",function(e){return S.unpackTime(e).minutes}).args([["*time","datetime"]]),T("second",function(e){return S.unpackTime(e).seconds}).args([["*time","datetime"]]),T("edate",function(e,t){var i=N(e),n=i.month+t,r=i.year+Math.floor(n/12);return(n%=12)<0&&(n+=12),i=Math.min(i.date,H(r,n)),z(r,n,i)}).args([["*start_date","date"],["*months","integer"]]),T("eomonth",function(e,t){var i=N(e),n=i.month+t,r=i.year+Math.floor(n/12);return(n%=12)<0&&(n+=12),i=H(r,n),z(r,n,i)}).args([["*start_date","date"],["*months","integer"]]),T("workday",function(e,t,i){var n=t>0?1:-1;t=Math.abs(t);for(var r=N(e).day;t>0;)e+=n,(r=(r+n)%7)>0&&r<6&&i.indexOf(e)<0&&--t;return e}).args([["start_date","date"],["days","integer"],["holidays",["collect","date"]]]),T("networkdays",function(e,t,i){if(e>t){var n=e;e=t,t=n}for(var r=0,s=N(e).day;e<=t;)s>0&&s<6&&i.indexOf(e)<0&&r++,e++,s=(s+1)%7;return r}).args([["start_date","date"],["end_date","date"],["holidays",["collect","date"]]]),T("days",function(e,t){return t-e}).args([["*start_date","date"],["*end_date","date"]]);S._days_360=v,T("days360",v).args([["*start_date","date"],["*end_date","date"],["*method",["or","logical",["null",!1]]]]),T("yearfrac",function(e,t,i){switch(i){case 0:return v(e,t,!1)/360;case 1:return(t-e)/P(N(e).year);case 2:return(t-e)/360;case 3:return(t-e)/365;case 4:return v(e,t,!0)/360}}).args([["*start_date","date"],["*end_date","date"],["*method",["or",["null",0],["values",0,1,2,3,4]]]]),T("datevalue",function(e){var t=S.parseDate(e);return t?S.dateToSerial(t):new F("VALUE")}).args([["*text","string"]]),T("timevalue",function(e){var t=e.toLowerCase().match(/(\d+):(\d+)(:(\d+)(\.(\d+))?)?\s*(am?|pm?)?/);if(t){var i=parseFloat(t[1]),n=parseFloat(t[2]),r=t[3]?parseFloat(t[4]):0,s=t[7];return s&&(i>12||i<1)?new F("VALUE"):(/^p/.test(s)&&(i+=12),S.packTime(i,n,r,0))}return new F("VALUE")}).args([["*text","string"]]),T("mdeterm",function(e){var t=e.each(function(e){if("number"!=typeof e)return new F("VALUE")},!0);return t||e.determinant()}).args([["m",["and","matrix",["assert","$m.width == $m.height"]]]]),T("transpose",function(e){return e.transpose()}).args([["range","matrix"]]),T("mmult",function(e,t){return e.multiply(t)}).args([["a","matrix"],["b",["and","matrix",["assert","$b.height == $a.width"]]]]),T("munit",function(e){return new I(this).unit(e)}).args([["n","integer+"]]),T("minverse",function(e){var t=e.each(function(e){if("number"!=typeof e)return new F("VALUE")},!0);return t||e.inverse()||new F("VALUE")}).args([["m",["and","matrix",["assert","$m.width == $m.height"]]]]),T("rand",function(){return Math.random()}).args([]),T("randbetween",function(e,t){return e+Math.floor((t-e+1)*Math.random())}).args([["min","integer"],["max",["and","integer",["assert","$max >= $min"]]]]),T("true",function(){return!0}).args([]),T("false",function(){return!0}).args([]),T("roman",function(e){return y.arabicToRoman(e).toUpperCase()}).args([["*number","integer"]]),T("arabic",function(e){var t=y.romanToArabic(e);return null==t?new F("VALUE"):t}).args([["*roman","string"]]),T("base",function(e,t,i){for(var n=e.toString(t).toUpperCase();n.length<i;)n="0"+n;return n}).args([["*number","integer"],["*radix",["and","integer",["[between]",2,36]]],["*minLen",["or","integer+",["null",0]]]]),T("decimal",function(e,t){e=e.toUpperCase();for(var i=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);if(r>=48&&r<=57)r-=48;else{if(!(r>=65&&r<55+t))return new F("VALUE");r-=55}i=i*t+r}return i}).args([["*text","string"],["*radix",["and","integer",["[between]",2,36]]]]),T("char",function(e){return String.fromCharCode(e)}).args([["*code","integer+"]]);var $=/[\0-\x1F\x7F-\x9F\xAD\u0378\u0379\u037F-\u0383\u038B\u038D\u03A2\u0528-\u0530\u0557\u0558\u0560\u0588\u058B-\u058E\u0590\u05C8-\u05CF\u05EB-\u05EF\u05F5-\u0605\u061C\u061D\u06DD\u070E\u070F\u074B\u074C\u07B2-\u07BF\u07FB-\u07FF\u082E\u082F\u083F\u085C\u085D\u085F-\u089F\u08A1\u08AD-\u08E3\u08FF\u0978\u0980\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09FC-\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF2-\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B55\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B78-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BFB-\u0C00\u0C04\u0C0D\u0C11\u0C29\u0C34\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5A-\u0C5F\u0C64\u0C65\u0C70-\u0C77\u0C80\u0C81\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0D01\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D45\u0D49\u0D4F-\u0D56\u0D58-\u0D5F\u0D64\u0D65\u0D76-\u0D78\u0D80\u0D81\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DF1\u0DF5-\u0E00\u0E3B-\u0E3E\u0E5C-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EBA\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F48\u0F6D-\u0F70\u0F98\u0FBD\u0FCD\u0FDB-\u0FFF\u10C6\u10C8-\u10CC\u10CE\u10CF\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u137D-\u137F\u139A-\u139F\u13F5-\u13FF\u169D-\u169F\u16F1-\u16FF\u170D\u1715-\u171F\u1737-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17DE\u17DF\u17EA-\u17EF\u17FA-\u17FF\u180F\u181A-\u181F\u1878-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191D-\u191F\u192C-\u192F\u193C-\u193F\u1941-\u1943\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19DD\u1A1C\u1A1D\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1A9F\u1AAE-\u1AFF\u1B4C-\u1B4F\u1B7D-\u1B7F\u1BF4-\u1BFB\u1C38-\u1C3A\u1C4A-\u1C4C\u1C80-\u1CBF\u1CC8-\u1CCF\u1CF7-\u1CFF\u1DE7-\u1DFB\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FC5\u1FD4\u1FD5\u1FDC\u1FF0\u1FF1\u1FF5\u1FFF\u200B-\u200F\u202A-\u202E\u2060-\u206F\u2072\u2073\u208F\u209D-\u209F\u20BB-\u20CF\u20F1-\u20FF\u218A-\u218F\u23F4-\u23FF\u2427-\u243F\u244B-\u245F\u2700\u2B4D-\u2B4F\u2B5A-\u2BFF\u2C2F\u2C5F\u2CF4-\u2CF8\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D71-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E3C-\u2E7F\u2E9A\u2EF4-\u2EFF\u2FD6-\u2FEF\u2FFC-\u2FFF\u3040\u3097\u3098\u3100-\u3104\u312E-\u3130\u318F\u31BB-\u31BF\u31E4-\u31EF\u321F\u32FF\u4DB6-\u4DBF\u9FCD-\u9FFF\uA48D-\uA48F\uA4C7-\uA4CF\uA62C-\uA63F\uA698-\uA69E\uA6F8-\uA6FF\uA78F\uA794-\uA79F\uA7AB-\uA7F7\uA82C-\uA82F\uA83A-\uA83F\uA878-\uA87F\uA8C5-\uA8CD\uA8DA-\uA8DF\uA8FC-\uA8FF\uA954-\uA95E\uA97D-\uA97F\uA9CE\uA9DA-\uA9DD\uA9E0-\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A\uAA5B\uAA7C-\uAA7F\uAAC3-\uAADA\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F-\uABBF\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBC2-\uFBD2\uFD40-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFE\uFDFF\uFE1A-\uFE1F\uFE27-\uFE2F\uFE53\uFE67\uFE6C-\uFE6F\uFE75\uFEFD-\uFF00\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFDF\uFFE7\uFFEF-\uFFFB\uFFFE\uFFFF]/g;T("clean",function(e){return e.replace($,"")}).args([["*text","string"]]),T("code",function(e){return e.charAt(0)}).args([["*text","string"]]),D("unichar","char"),D("unicode","code"),T("concatenate",function(){for(var e="",t=0;t<arguments.length;++t)e+=arguments[t];return e}).args([["+",["*text","string"]]]),T("dollar",function(e,t){for(var i="$#,##0.DECIMALS;($#,##0.DECIMALS)",n="";t-- >0;)n+="0";return i=i.replace(/DECIMALS/g,n),x.formatting.text(e,i)}).args([["*number","number"],["*decimals",["or","integer++",["null",2]]]]),T("exact",function(e,t){return e===t}).args([["*text1","string"],["*text2","string"]]),T("find",function(e,t,i){var n=t.indexOf(e,i-1);return n<0?new F("VALUE"):n+1}).args([["*substring","string"],["*string","string"],["*start",["or","integer++",["null",1]]]]),T("fixed",function(e,t,i){for(var n=i?"0.DECIMALS":"#,##0.DECIMALS",r="";t-- >0;)r+="0";return n=n.replace(/DECIMALS/g,r),x.formatting.text(e,n)}).args([["*number","number"],["*decimals",["or","integer++",["null",2]]],["*noCommas",["or","boolean",["null",!1]]]]),T("left",function(e,t){return e.substr(0,t)}).args([["*text","string"],["*length",["or","integer+",["null",1]]]]),T("right",function(e,t){return e.substr(-t)}).args([["*text","string"],["*length",["or","integer+",["null",1]]]]),T("len",function(e){return e.length}).args([["*text","string"]]),T("lower",function(e){return e.toLowerCase()}).args([["*text","string"]]),T("upper",function(e){return e.toUpperCase()}).args([["*text","string"]]),T("ltrim",function(e){return e.replace(/^\s+/,"")}).args([["*text","string"]]),T("rtrim",function(e){return e.replace(/\s+$/,"")}).args([["*text","string"]]),T("trim",function(e){return e.replace(/^\s+|\s+$/,"")}).args([["*text","string"]]),T("mid",function(e,t,i){return e.substr(t-1,i)}).args([["*text","string"],["*start","integer++"],["*length","integer+"]]),T("proper",function(e){return e.toLowerCase().replace(/\b./g,function(e){return e.toUpperCase()})}).args([["*text","string"]]),T("replace",function(e,t,i,n){return e.substr(0,--t)+n+e.substr(t+i)}).args([["*text","string"],["*start","integer++"],["*length","integer+"],["*newText","string"]]),T("rept",function(e,t){for(var i="";t-- >0;)i+=e;return i}).args([["*text","string"],["*number","integer+"]]),T("search",function(e,t,i){var n=t.toLowerCase().indexOf(e.toLowerCase(),i-1);return n<0?new F("VALUE"):n+1}).args([["*substring","string"],["*string","string"],["*start",["or","integer++",["null",1]]]]),T("substitute",function(e,t,i,n){function r(){e=e.substring(0,s)+i+e.substring(s+t.length)}if(t===i)return e;for(var s=-1;(s=e.indexOf(t,s+1))>=0;)if(null==n)r();else if(0==--n){r();break}return e}).args([["*text","string"],["*oldText","string"],["*newText","string"],["*nth",["or","integer++","null"]]]),T("t",function(e){return"string"==typeof e?e:""}).args([["*value","anyvalue"]]),T("text",function(e,t){return x.formatting.text(e,t)}).args([["*value","anyvalue"],["*format","string"]]),T("value",function(e){return"number"==typeof e?e:"boolean"==typeof e?+e:(e=(e+"").replace(/[$,]/g,""),e=parseFloat(e),isNaN(e)?new F("VALUE"):e)}).args([["*value","anyvalue"]]);_.prototype.toString=function(){return this.text},T("hyperlink",function(e,t){return new _(e,t)}).args([["*link","string"],["*text",["or","string",["null","$link"]]]]),T("iferror",function(e,t){return e instanceof F?t:e}).args([["*value","forced!"],["*value_if_error","anyvalue"]]);var j=function(){function e(e,t){if("string"==typeof t){var i=parseFloat(t);isNaN(i)||i!=t||(t=i)}return function(i){var n=t;return"string"==typeof i&&"string"==typeof n&&(i=i.toLowerCase(),n=n.toLowerCase()),e(i,n)}}function t(e){return"string"==typeof e?e.toLowerCase():e}function i(e,i){return t(e)<t(i)}function n(e,i){return t(e)<=t(i)}function r(e,i){return t(e)>t(i)}function s(e,i){return t(e)>=t(i)}function o(e,i){return t(e)!=t(i)}function a(e,i){return i instanceof RegExp?i.test(e):t(e)==t(i)}var l=Object.create(null);return function(t){if("function"==typeof t)return t;var d;if(d=/^=(.*)$/.exec(t))return e(a,d[1]);if(d=/^<>(.*)$/.exec(t))return e(o,d[1]);if(d=/^<=(.*)$/.exec(t))return e(n,d[1]);if(d=/^<(.*)$/.exec(t))return e(i,d[1]);if(d=/^>=(.*)$/.exec(t))return e(s,d[1]);if(d=/^>(.*)$/.exec(t))return e(r,d[1]);if(/[?*]/.exec(t)){var c=l[t];return c||(c=t.replace(/(~\?|~\*|[\]({\+\.\|\^\$\\})\[]|[?*])/g,function(e){switch(e){case"~?":return"\\?";case"~*":return"\\*";case"?":return".";case"*":return".*";default:return"\\"+e}}),c=l[t]=new RegExp("^"+c+"$","i")),e(a,c)}return e(a,t)}}()}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/runtime.functions.2",["spreadsheet/runtime"],function(){"use strict";function e(e){if(J(e)>=3.3)return 1-t(e);var i=e>0?1:-1;-1==i&&(e=-e);for(var n=0,r=1,s=1;s<100;s++)n+=r,r*=2*e*e/(2*s+1);return 2*i/Math.sqrt(Math.PI)*e*Math.exp(-e*e)*n}function t(t){if(J(t)<3.3)return 1-e(t);var i=1;t<0&&(i=-1,t=-t);for(var n=t,r=8;r>=1;r-=.5)n=t+r/n;return n=1/(t+n),1==i?Math.exp(-t*t)/Math.sqrt(Math.PI)*n:2-Math.exp(-t*t)/Math.sqrt(Math.PI)*n}function i(e){var t=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],i=e,n=e+5.5,r=t[0];n-=(e+.5)*Math.log(n);for(var s=1;s<=6;s++)r+=t[s]/(i+=1);return-n+Math.log(Math.sqrt(2*Math.PI)*r/e)}function n(e){if(e>0)return Math.exp(i(e));var t=Math.PI,r=-e;return-t/(r*n(r)*Math.sin(t*r))}function r(e,t){return i(e)+i(t)-i(e+t)}function s(e,t){return Math.exp(r(e,t))}function o(e,t){return t<e+1?function(e,t){var n,r=1/e,s=r,o=e,a=i(e);for(n=1;n<=Y&&(o++,s*=t/o,r+=s,!(J(s)<J(r)*K));n++);return r*Math.exp(-t+e*Math.log(t)-a)}(e,t):1-function(e,t){for(var n=Q,r=n,s=0,o=1,a=t+1-e,l=i(e),d=1;d<=Y;d++){J(s=a+o*s)<Q&&(s=Q),J(r=a+o/r)<Q&&(r=Q);var c=r*(s=1/s);if(n*=c,J(c-1)<K)break;a+=2,o=-d*(d-e)}return n*Math.exp(-t-l+e*Math.log(t))}(e,t)}function a(e,t,i,r){return r?o(t,e/i):Math.pow(e/i,t-1)*Math.exp(-e/i)/(i*n(t))}function l(e,t,i){if(0===e)return 0;if(1==e)return 1/0;var n=0,r=10,s=0,o=t*i;o>1&&(r*=o);for(var l=0;l<Y;l++){var d=a(s=.5*(n+r),t,i,!0);if(J(e-d)<1e-16)break;d>e?r=s:n=s}return s}function d(t,i){return i?.5+.5*e(t/Math.sqrt(2)):Math.exp(-t*t/2)/Math.sqrt(2*Math.PI)}function c(e){var t,i,n=[-39.69683028665376,220.9460984245205,-275.9285104469687,138.357751867269,-30.66479806614716,2.506628277459239],r=[-54.47609879822406,161.5858368580409,-155.6989798598866,66.80131188771972,-13.28068155288572],s=[-.007784894002430293,-.3223964580411365,-2.400758277161838,-2.549732539343734,4.374664141464968,2.938163982698783],o=[.007784695709041462,.3224671290700398,2.445134137142996,3.754408661907416];return e<.02425?(t=Math.sqrt(-2*Math.log(e)),(((((s[0]*t+s[1])*t+s[2])*t+s[3])*t+s[4])*t+s[5])/((((o[0]*t+o[1])*t+o[2])*t+o[3])*t+1)):.97575<e?(t=Math.sqrt(-2*Math.log(1-e)),-(((((s[0]*t+s[1])*t+s[2])*t+s[3])*t+s[4])*t+s[5])/((((o[0]*t+o[1])*t+o[2])*t+o[3])*t+1)):(t=e-.5,i=t*t,(((((n[0]*i+n[1])*i+n[2])*i+n[3])*i+n[4])*i+n[5])*t/(((((r[0]*i+r[1])*i+r[2])*i+r[3])*i+r[4])*i+1))}function u(e,t,i){return t+i*c(e)}function h(e,t,i){var n=Math.exp(t*Math.log(e)+i*Math.log(1-e)-r(t,i));return e<(t+1)/(t+i+2)?n*f(t,i,e)/t:1-n*f(i,t,1-e)/i}function f(e,t,i){var n,r,s,o,a,l,d,c,u,h;for(u=e-1,o=1,J(a=1-(c=e+t)*i/(h=e+1))<Q&&(a=Q),d=a=1/a,n=1;n<=Y&&(r=2*n,s=n*(t-n)*i/((u+r)*(e+r)),a=1+s*a,J(a)<Q&&(a=Q),o=1+s/o,J(o)<Q&&(o=Q),a=1/a,d*=a*o,s=-(e+n)*(c+n)*i/((e+r)*(h+r)),a=1+s*a,J(a)<Q&&(a=Q),o=1+s/o,J(o)<Q&&(o=Q),a=1/a,l=a*o,d*=l,!(J(l-1)<K));n++);return d}function p(e,t,i){for(var n=0,r=1,s=0,o=0;o<Y;o++){var a=h(s=.5*(n+r),t,i);if(J(e-a)<K)break;a>e?r=s:n=s}return s}function m(e,t,i,n,r){return n+(r-n)*p(e,t,i)}function g(e,t,i){return a(e,t/2,2,i)}function v(e,t){return 1-g(e,t,!0)}function _(e,t){return l(e,t/2,2)}function b(e,t,i,n){if(n)return h(t*e/(i+t*e),t/2,i/2);var r=t/i;return t/=2,i/=2,r/s(t,i)*Math.pow(r*e,t-1)/Math.pow(1+r*e,t+i)}function k(e){for(var t=0,i=e.length,n=0;n<i;n++)t+=e[n];return t/i}function w(e,t){for(var i=0,n=e.length,r=0;r<n;r++){var s=e[r]-t;i+=s*s}return i/(n-1)}function y(e,t,i){return i?1-.5*h(t/(e*e+t),t/2,.5):1/(Math.sqrt(t)*s(.5,t/2))*Math.pow(1+e*e/t,-(t+1)/2)}function x(e,t){return 1-y(e,t,!0)}function C(e,t){return e<0&&(e=-e),2*x(e,t)}function S(e,t){var i=p(2*Math.min(e,1-e),t/2,.5);return i=Math.sqrt(t*(1-i)/i),e>.5?i:-i}function T(e,t){for(var i=k(e),n=k(t),r=0,s=0,o=0,a=0,l=e.length;a<l;a++){var d=e[a]-i,c=t[a]-n;r+=d*c,s+=d*d,o+=c*c}return r/Math.sqrt(s*o)}function D(e){for(var t=e.height,i=0,n=0;n<t;n++)i+=e.data[n][0];return i/t}function F(e,t){for(var i=e.height,n=0,r=0;r<i;r++){var s=e.data[r][0]-t;n+=s*s}return n}function E(e,t,i,n){var r=0;t||(t=e.map(function(){return++r})),i&&((t=t.clone()).eachRow(function(e){t.data[e].unshift(1)}),++t.width);var s=t.transpose(),o=s.multiply(t).inverse().multiply(s).multiply(e),a=[];for(r=o.height-1;r>=0;r--)a.push(o.data[r][0]);if(i||a.push(0),!n)return this.asMatrix([a]);var l=t.multiply(o),d=e.adds(l,!0),c=i?D(l):0,u=F(l,c),h=i?D(d):0,f=F(d,h),p=[];p.push(u,f);var m=u/(u+f),g=e.height-t.width,v=Math.sqrt(f/g),_=[];_.push(m,v);var b=i?u/(t.width-1)/(f/g):m/t.width/((1-m)/g),k=[];k.push(b,g);var w=s.multiply(t).inverse(),y=[];for(r=w.height-1;r>=0;r--)y.push(Math.sqrt(w.data[r][r]*f/g));return this.asMatrix([a,y,_,k,p])}function R(e,t,i,n){var r=0;t||(t=e.map(function(){return++r})),n&&((t=t.clone()).eachRow(function(e){t.data[e].unshift(1)}),++t.width);var s=t.transpose(),o=s.multiply(t).inverse().multiply(s).multiply(e);return i?n&&((i=i.clone()).eachRow(function(e){i.data[e].unshift(1)}),++i.width):i=t,i.multiply(o)}function A(e,t,i,n){for(var r=i||20,s=n||1e-7,o=t,a=1;a<=r;a++){var l=e(o),d=l[0],c=l[1],u=d/c;if(o-=u,Math.abs(u)<s)return o}return new V("NUM")}function I(e,t,i,n,r){var s=Math.pow(1+e,t),o=e?(s-1)/e:t;return-(n*s+i*o*(1+e*r))}function M(e,t,i,n,r){if(!e)return-(n+i)/t;var s=Math.pow(1+e,t);return-e*(n+i*s)/((1+e*r)*(s-1))}function H(e,t,i,n,r,s){if(1==s&&1==t)return 0;var o=M(e,i,n,r,s),a=I(e,t-1,o,n,s)*e;return s?a/(1+e):a}function z(e,t){var i=U(e),n=i.month+t,r=i.year+Math.floor(n/12);return(n%=12)<0&&(n+=12),i=Math.min(i.date,$(r,n)),W(r,n,i)}function N(e,t,i){return 1==i||2==i||3==i?t-e:j(e,t,i)}function P(e,t,i){var n=U(e),r=U(t),s=r.year-n.year;s>0&&(s=(s-1)*i);var o,a,l=12/i;do{o=z(t,-++s*l)}while(e<o);return s--,a=z(t,-s*l),[o,a]}function L(e,t){return 3==t?365:1==t?q(e)?366:365:360}if(kendo.support.browser.msie&&kendo.support.browser.version<9)return;var B=kendo.spreadsheet.calc.runtime,O=B.defineFunction,V=B.CalcError,W=B.packDate,U=B.unpackDate,q=B.isLeapYear,$=B.daysInMonth,j=B._days_360;O("ERF",function(t,i){return null==i?e(t):e(i)-e(t)}).args([["lower_limit","number"],["upper_limit",["or","number","null"]]]),O("ERFC",t).args([["x","number"]]),O("GAMMALN",i).args([["x","number++"]]),O("GAMMA",n).args([["x","number"]]),O("GAMMA.DIST",a).args([["x","number+"],["alpha","number++"],["beta","number++"],["cumulative","logical"]]),O("GAMMA.INV",l).args([["p",["and","number",["[between]",0,1]]],["alpha","number++"],["beta","number++"]]),O("NORM.S.DIST",d).args([["z","number"],["cumulative","logical"]]),O("NORM.S.INV",c).args([["p",["and","number",["[between]",0,1]]]]),O("NORM.DIST",function(e,t,i,n){if(!n)return Math.exp(-(e-t)*(e-t)/(2*i*i))/(i*Math.sqrt(2*Math.PI));return d((e-t)/i,!0)}).args([["x","number"],["mean","number"],["stddev","number++"],["cumulative","logical"]]),O("NORM.INV",u).args([["p",["and","number",["[between]",0,1]]],["mean","number"],["stddev","number++"]]),O("BETADIST",function(e,t,i,n,r){return h((e-n)/(r-n),t,i)}).args([["x","number"],["alpha","number++"],["beta","number++"],["A",["or","number",["null",0]]],["B",["or","number",["null",1]]],["?",["assert","$x >= $A","NUM"]],["?",["assert","$x <= $B","NUM"]],["?",["assert","$A < $B","NUM"]]]),O("BETA.DIST",function(e,t,i,n,s,o){if(n)return h((e-s)/(o-s),t,i);return function(e,t,i){return Math.exp((t-1)*Math.log(e)+(i-1)*Math.log(1-e)-r(t,i))}((e-s)/(o-s),t,i)/(o-s)}).args([["x","number"],["alpha","number++"],["beta","number++"],["cumulative","logical"],["A",["or","number",["null",0]]],["B",["or","number",["null",1]]],["?",["assert","$x >= $A","NUM"]],["?",["assert","$x <= $B","NUM"]],["?",["assert","$A < $B","NUM"]]]),O("BETA.INV",m).args([["p",["and","number",["[between]",0,1]]],["alpha","number++"],["beta","number++"],["A",["or","number",["null",0]]],["B",["or","number",["null",1]]]]),O("CHISQ.DIST",g).args([["x","number+"],["deg_freedom","integer++"],["cumulative","logical"]]),O("CHISQ.DIST.RT",v).args([["x","number+"],["deg_freedom","integer++"]]),O("CHISQ.INV",_).args([["p",["and","number",["[between]",0,1]]],["deg_freedom","integer++"]]),O("CHISQ.INV.RT",function(e,t){return _(1-e,t)}).args([["p",["and","number",["[between]",0,1]]],["deg_freedom","integer++"]]),O("CHISQ.TEST",function(e,t){return function(e,t){var i,n,r=e.length,s=e[0].length,o=0;for(i=0;i<r;i++)for(n=0;n<s;n++){var a=t[i][n],l=e[i][n]-a;o+=(l*=l)/a}return v(o,(r-1)*(s-1))}(e.data,t.data)}).args([["actual_range","matrix"],["expected_range","matrix"],["?",["assert","$actual_range.width == $expected_range.width"]],["?",["assert","$actual_range.height == $expected_range.height"]]]),O("EXPON.DIST",function(e,t,i){if(i)return 1-Math.exp(-t*e);return t*Math.exp(-t*e)}).args([["x","number+"],["lambda","number++"],["cumulative","logical"]]),O("POISSON.DIST",function(e,t,i){if(i)return 1-g(2*t,2*(e+1),!0);for(var n=0,r=2;r<=e;r++)n+=Math.log(r);return Math.exp(e*Math.log(t)-t-n)}).args([["x","integer+"],["mean","number+"],["cumulative","logical"]]),O("F.DIST",b).args([["x","number+"],["deg_freedom1","integer++"],["deg_freedom2","integer++"],["cumulative","logical"]]),O("F.DIST.RT",function(e,t,i){return 1-b(e,t,i,!0)}).args([["x","number+"],["deg_freedom1","integer++"],["deg_freedom2","integer++"]]),O("F.INV",function(e,t,i){return i/t*(1/m(1-e,i/2,t/2,0,1)-1)}).args([["p",["and","number",["[between]",0,1]]],["deg_freedom1","integer++"],["deg_freedom2","integer++"]]),O("F.INV.RT",function(e,t,i){return i/t*(1/m(e,i/2,t/2,0,1)-1)}).args([["p",["and","number",["[between]",0,1]]],["deg_freedom1","integer++"],["deg_freedom2","integer++"]]),O("F.TEST",function(e,t){var i=e.length-1,n=t.length-1,r=w(e,k(e)),s=w(t,k(t));if(!r||!s)throw new V("DIV/0");return 2*b(r/s,i,n,!0)}).args([["array1",["collect","number",1]],["array2",["collect","number",1]],["?",["assert","$array1.length >= 2","DIV/0"]],["?",["assert","$array2.length >= 2","DIV/0"]]]),O("FISHER",function(e){return.5*Math.log((1+e)/(1-e))}).args([["x",["and","number",["(between)",-1,1]]]]),O("FISHERINV",function(e){var t=Math.exp(2*e);return(t-1)/(t+1)}).args([["y","number"]]),O("T.DIST",y).args([["x","number"],["deg_freedom","integer++"],["cumulative","logical"]]),O("T.DIST.RT",x).args([["x","number"],["deg_freedom","integer++"]]),O("T.DIST.2T",C).args([["x","number+"],["deg_freedom","integer++"]]),O("T.INV",S).args([["p",["and","number",["(between]",0,1]]],["deg_freedom","integer++"]]),O("T.INV.2T",function(e,t){return S(1-e/2,t)}).args([["p",["and","number",["(between]",0,1]]],["deg_freedom","integer++"]]),O("T.TEST",function(e,t,i,n){var r,s,o=e.length,a=t.length;if(1==n){for(var l=0,d=0,c=0;c<o;c++){var u=e[c]-t[c];l+=u,d+=u*u}var h=l/o;return r=h/Math.sqrt((d-l*h)/(o*(o-1))),1==i?x(r,o-1):C(r,o-1)}var f=k(e),p=k(t),m=w(e,f),g=w(t,p);{if(3==n){var v=m/o,_=g/a,b=v+_,y=v/b,S=_/b;return s=1/(y*y/(o-1)+S*S/(a-1)),r=J(f-p)/Math.sqrt(b),1==i?x(r,s):C(r,s)}return s=o+a-2,r=J(f-p)*Math.sqrt(s*o*a/((o+a)*((o-1)*m+(a-1)*g))),1==i?x(r,s):C(r,s)}}).args([["array1",["collect","number",1]],["array2",["collect","number",1]],["tails",["and","integer",["values",1,2]]],["type",["and","integer",["values",1,2,3]]],["?",["assert","$type != 1 || $array1.length == $array2.length","N/A"]],["?",["assert","$array1.length >= 2","DIV/0"]],["?",["assert","$array2.length >= 2","DIV/0"]]]),O("CONFIDENCE.T",function(e,t,i){return-S(e/2,i-1)*t/Math.sqrt(i)}).args([["alpha",["and","number",["(between)",0,1]]],["standard_dev","number++"],["size",["and","integer++",["assert","$size != 1","DIV/0"]]]]),O("CONFIDENCE.NORM",function(e,t,i){return-c(e/2)*t/Math.sqrt(i)}).args([["alpha",["and","number",["(between)",0,1]]],["standard_dev","number++"],["size",["and","integer++"]]]),O("GAUSS",function(e){return d(e,!0)-.5}).args([["z","number"]]),O("PHI",function(e){return d(e)}).args([["x","number"]]),O("LOGNORM.DIST",function(t,i,n,r){if(r)return.5+.5*e((Math.log(t)-i)/(n*Math.sqrt(2)));var s=Math.log(t)-i;return Math.exp(-s*s/(2*n*n))/(t*n*Math.sqrt(2*Math.PI))}).args([["x","number++"],["mean","number"],["standard_dev","number++"],["cumulative","logical"]]),O("LOGNORM.INV",function(e,t,i){return Math.exp(u(e,t,i))}).args([["probability",["and","number",["(between)",0,1]]],["mean","number"],["standard_dev","number++"]]),O("PROB",function(e,t,i,n){var r,s=e.length,o=0;for(r=0;r<s;r++){if(t[r]<=0||t[r]>1)throw new V("NUM");o+=t[r]}if(1!=o)throw new V("NUM");var a=0;for(r=0;r<s;r++){var l=e[r];l>=i&&l<=n&&(a+=t[r])}return a}).args([["x_range",["collect","number",1]],["prob_range",["collect","number",1]],["lower_limit","number"],["upper_limit",["or","number",["null","$lower_limit"]]],["?",["assert","$prob_range.length == $x_range.length","N/A"]]]),O("SLOPE",function(e,t){for(var i=k(t),n=k(e),r=0,s=0,o=0,a=e.length;o<a;o++){var l=t[o]-i;r+=l*(e[o]-n),s+=l*l}return r/s}).args([["known_y",["collect","number",1]],["known_x",["collect","number",1]],["?",["assert","$known_x.length == $known_y.length","N/A"]],["?",["assert","$known_x.length > 0 && $known_y.length > 0","N/A"]]]),O("INTERCEPT",function(e,t){for(var i=k(t),n=k(e),r=0,s=0,o=0,a=e.length;o<a;o++){var l=t[o]-i;r+=l*(e[o]-n),s+=l*l}return n-r*i/s}).args([["known_y",["collect","number",1]],["known_x",["collect","number",1]],["?",["assert","$known_x.length == $known_y.length","N/A"]],["?",["assert","$known_x.length > 0 && $known_y.length > 0","N/A"]]]),O("PEARSON",T).args([["array1",["collect","number",1]],["array2",["collect","number",1]],["?",["assert","$array2.length == $array1.length","N/A"]],["?",["assert","$array2.length > 0 && $array1.length > 0","N/A"]]]),O("RSQ",function(e,t){var i=T(e,t);return i*i}).args([["known_y",["collect","number",1]],["known_x",["collect","number",1]],["?",["assert","$known_x.length == $known_y.length","N/A"]],["?",["assert","$known_x.length > 0 && $known_y.length > 0","N/A"]],["?",["assert","$known_x.length != 1 && $known_y.length != 1","N/A"]]]),O("STEYX",function(e,t){for(var i=t.length,n=k(t),r=k(e),s=0,o=0,a=0,l=0;l<i;l++){var d=t[l]-n,c=e[l]-r;s+=c*c,o+=d*c,a+=d*d}return Math.sqrt((s-o*o/a)/(i-2))}).args([["known_y",["collect","number",1]],["known_x",["collect","number",1]],["?",["assert","$known_x.length == $known_y.length","N/A"]],["?",["assert","$known_x.length >= 3 && $known_y.length >= 3","DIV/0"]]]),O("FORECAST",function(e,t,i){for(var n=k(i),r=k(t),s=0,o=0,a=0,l=i.length;a<l;a++){var d=i[a]-n,c=t[a]-r;s+=d*c,o+=d*d}if(0===o)throw new V("N/A");var u=s/o;return r-u*n+u*e}).args([["x","number"],["known_y",["collect","number",1]],["known_x",["collect","number",1]],["?",["assert","$known_x.length == $known_y.length","N/A"]],["?",["assert","$known_x.length > 0 && $known_y.length > 0","N/A"]]]),O("LINEST",E).args([["known_y","matrix"],["known_x",["or","matrix","null"]],["const",["or","logical",["null",!0]]],["stats",["or","logical",["null",!1]]]]),O("LOGEST",function(e,t,i,n){return E.call(this,e.map(Math.log),t,i,n).map(Math.exp)}).args([["known_y","matrix"],["known_x",["or","matrix","null"]],["const",["or","logical",["null",!0]]],["stats",["or","logical",["null",!1]]]]),O("TREND",R).args([["known_y","matrix"],["known_x",["or","matrix","null"]],["new_x",["or","matrix","null"]],["const",["or","logical",["null",!0]]]]),O("GROWTH",function(e,t,i,n){return R.call(this,e.map(Math.log),t,i,n).map(Math.exp)}).args([["known_y","matrix"],["known_x",["or","matrix","null"]],["new_x",["or","matrix","null"]],["const",["or","logical",["null",!0]]]]),O("FV",I).args([["rate","number"],["nper","number"],["pmt",["or","number",["null",0]]],["pv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]],["?",["assert","$pmt || $pv"]]]),O("PV",function(e,t,i,n,r){if(!e)return-n-i*t;var s=Math.pow(1+e,t);return-(n+i*(s-1)/e*(1+e*r))/s}).args([["rate","number"],["nper","number"],["pmt",["or","number",["null",0]]],["fv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]],["?",["assert","$pmt || $fv"]]]),O("PMT",M).args([["rate","number"],["nper","number"],["pmt","number"],["fv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]]]),O("NPER",function(e,t,i,n,r){if(!e)return-(n+i)/t;var s=t*(1+e*r);return Math.log((s-n*e)/(s+i*e))/Math.log(1+e)}).args([["rate","number"],["pmt","number"],["pv","number"],["fv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]]]),O("RATE",function(e,t,i,n,r,s){return A(function(s){var o=Math.pow(1+s,e-1),a=o*(1+s);return[i*a+t*(1/s+r)*(a-1)+n,e*i*o+t*(-(a-1)/(s*s)+(1/s+r)*e*o)]},s)}).args([["nper","number"],["pmt",["or","number",["null",0]]],["pv","number"],["fv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]],["guess",["or","number++",["null",.01]]],["?",["assert","$pmt || $fv"]]]),O("IPMT",H).args([["rate","number"],["per","number++"],["nper","number++"],["pv","number"],["fv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]],["?",["assert","$per >= 1 && $per <= $nper"]]]),O("PPMT",function(e,t,i,n,r,s){return M(e,i,n,r,s)-H(e,t,i,n,r,s)}).args([["rate","number"],["per","number++"],["nper","number++"],["pv","number"],["fv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]],["?",["assert","$per >= 1 && $per <= $nper"]]]),O("CUMPRINC",function(e,t,i,n,r,s){1==s&&(n--,r--);var o=Math.pow(1+e,t),a=Math.pow(1+e,n-1),l=Math.pow(1+e,r),d=e*i*o/(o-1);return l*i-(l-1)/e*d-(a*i-(a-1)/e*d)}).args([["rate","number++"],["nper","number++"],["pv","number++"],["start_period","number++"],["end_period","number++"],["type",["or",["values",0,1],["null",0]]],["?",["assert","$end_period >= $start_period","NUM"]]]),O("CUMIPMT",function(e,t,i,n,r,s){for(var o=0,a=n;a<=r;a++)o+=H(e,a,t,i,0,s);return o}).args([["rate","number++"],["nper","number++"],["pv","number++"],["start_period","number++"],["end_period","number++"],["type",["or",["values",0,1],["null",0]]],["?",["assert","$end_period >= $start_period","NUM"]]]),O("NPV",function(e,t){for(var i=0,n=0,r=t.length;n<r;n++)i+=t[n]*Math.pow(1+e,-n-1);return i}).args([["rate","number"],["values",["collect","number"]],["?",["assert","$values.length > 0","N/A"]]]),O("IRR",function(e,t){return A(function(t){for(var i=0,n=0,r=0,s=e.length;r<s;r++)i+=e[r]*Math.pow(1+t,-r-1),n+=-r*e[r]*Math.pow(1+t,-r-2);return[i,n]},t)}).args([["values",["collect","number",1]],["guess",["or","number",["null",.1]]]]),O("EFFECT",function(e,t){return Math.pow(1+e/t,t)-1}).args([["nominal_rate","number++"],["npery","integer++"]]),O("NOMINAL",function(e,t){return t*(Math.pow(e+1,1/t)-1)}).args([["effect_rate","number++"],["npery","integer++"]]),O("XNPV",function(e,t,i){for(var n=0,r=0,s=t.length;r<s;r++)n+=t[r]*Math.pow(1+e,(i[0]-i[r])/365);return n}).args([["rate","number"],["values",["collect","number",1]],["dates",["collect","date",1]],["?",["assert","$values.length == $dates.length","NUM"]]]),O("XIRR",function(e,t,i){return A(function(i){for(var n=e[0],r=0,s=1,o=e.length;s<o;s++){var a=(t[0]-t[s])/365;n+=e[s]*Math.pow(1+i,a),r+=a*e[s]*Math.pow(1+i,a-1)}return[n,r]},i)}).args([["values",["collect","number",1]],["dates",["collect","date",1]],["guess",["or","number",["null",.1]]],["?",["assert","$values.length == $dates.length","NUM"]]]),O("ISPMT",function(e,t,i,n){return-n*e*(1-t/i)}).args([["rate","number"],["per","number++"],["nper","number++"],["pv","number"],["?",["assert","$per >= 1 && $per <= $nper"]]]),O("DB",function(e,t,i,n,r){var s=1-Math.pow(t/e,1/i);s=Math.floor(1e3*s+.5)/1e3;var o=e*s*r/12;if(1==n)return o;for(var a=1;a<i;a++){if(a==n-1)return(e-o)*s;o+=(e-o)*s}return(e-o)*s*(12-r)/12}).args([["cost","number"],["salvage","number"],["life","number++"],["period","number++"],["month",["or","number",["null",12]]]]),O("DDB",function(e,t,i,n,r){var s=r/i,o=-e*(Math.pow(1-s,n-1)-1),a=(e-o)*s;return a=Math.min(a,Math.max(0,e-o-t))}).args([["cost","number"],["salvage","number"],["life","number++"],["period","number++"],["factor",["or","number",["null",2]]]]),O("SLN",function(e,t,i){return(e-t)/i}).args([["cost","number"],["salvage","number"],["life","number++"]]),O("SYD",function(e,t,i,n){return(e-t)*(i-n+1)*2/(i*(i+1))}).args([["cost","number"],["salvage","number"],["life","number++"],["per","number++"]]),O("VDB",function(e,t,i,n,r,s,o){function a(e,i){var n,r,s;return r=1==d?1==i?e:0:e*Math.pow(1-d,i-1),s=e*Math.pow(1-d,i),(n=s<t?r-t:r-s)<0?0:n}function l(e,i,n){for(var r,s=e-t,o=Math.ceil(n),l=0,d=0,c=!1,u=1;u<=o;u++){if(c)r=l;else{var h=a(e,u);(l=s/(i-u+1))>h?(r=l,c=!0):(r=h,s-=h)}u==o&&(r*=n+1-o),d+=r}return d}var d=s>=i?1:s/i;var c=Math.floor(n),u=Math.ceil(r),h=0;if(o)for(var f=c+1;f<=u;f++){var p=a(e,f);f==c+1?p*=Math.min(r,c+1)-n:f==u&&(p*=r+1-u),h+=p}else{var m=i;if(n!=Math.floor(n)&&s>1&&n>=i/2){var g=n-i/2;n=i/2,r-=g,m+=1}e-=l(e,m,n),h=l(e,i-n,r-n)}return h}).args([["cost","number+"],["salvage","number+"],["life","number++"],["start_period","number+"],["end_period","number+"],["factor",["or","number+",["null",2]]],["no_switch",["or","logical",["null",!1]]],["?",["assert","$end_period >= $start_period","NUM"]]]);var G=[["settlement","date"],["maturity","date"],["frequency",["and","integer",["values",1,2,4]]],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$settlement < $maturity","NUM"]]];O("COUPDAYBS",function(e,t,i,n){return N(P(e,t,i)[0],e,n)}).args(G),O("COUPDAYS",function(e,t,i,n){if(1==n){var r=P(e,t,i);return N(r[0],r[1],1)}if(3==n)return 365/i;return 360/i}).args(G),O("COUPDAYSNC",function(e,t,i,n){var r=P(e,t,i)[1];return N(e,r,n)}).args(G),O("COUPPCD",function(e,t,i){return P(e,t,i)[0]}).args(G),O("COUPNCD",function(e,t,i){return P(e,t,i)[1]}).args(G),O("COUPNUM",function(e,t,i){var n=U(e),r=U(t);return 1+((12*(r.year-n.year)+r.month-n.month)*i/12|0)}).args(G),O("ACCRINTM",function(e,t,i,n,r){var s=L(U(t).year,r);return i*n*N(e,t,r)/s}).args([["issue","date"],["settlement","date"],["rate","number++"],["par",["or",["null",1e3],"number++"]],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$issue < $settlement","NUM"]]]),O("ACCRINT",function(e,t,i,n,r,s,o,a){function l(e,t){return(t-e)*s/v|0}var d,c,u,h,f,p,m=0,g=r*n/s,v=o%2==0?360:365;return i<=t?(d=P(i,t,s),c=d[0],u=d[1],c<=e?g*N(e,i,o)/N(c,u,o):(d=P(e,c,s),h=d[0],f=d[1],p=l(f,i),g*(p+N(e,f,o)/N(h,f,o)+(i<u?N(c,i,o)/N(c,u,o):0)))):(d=function(e,t,i){var n=U(t),r=U(e),s=n.year-r.year;s>0&&(s=(s-1)*i);var o,a=e,l=12/i;for(;t>a;)o=a,a=z(e,++s*l);return[o,a]}(t,i,s),c=d[0],u=d[1],p=l(t,i),m=u==i?g*p:g*(p+N(c,i,o)/N(c,u,o)),a?(d=P(e,t,s),c=d[0],u=d[1],p=l(e,t),m+=g*(p+N(e,u,o)/N(c,u,o))):m)}).args([["issue","date"],["first_interest","date"],["settlement","date"],["rate","number++"],["par",["or",["null",1e3],"number++"]],["frequency",["and","integer",["values",1,2,4]]],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["calc_method",["or","logical",["null",!0]]],["?",["assert","$issue < $settlement","NUM"]]]),O("DISC",function(e,t,i,n,r){var s=r%2==0?360:q(U(e).year)?366:365;return(n-i)/n*s/N(e,t,r)}).args([["settlement","date"],["maturity","date"],["pr","number++"],["redemption","number++"],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$settlement < $maturity","NUM"]]]),O("INTRATE",function(e,t,i,n,r){var s=r%2==0?360:q(U(e).year)?366:365;return(n-i)/i*s/N(e,t,r)}).args([["settlement","date"],["maturity","date"],["investment","number++"],["redemption","number++"],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$settlement < $maturity","NUM"]]]),O("RECEIVED",function(e,t,i,n,r){var s=r%2==0?360:q(U(e).year)?366:365;return i/(1-n*N(e,t,r)/s)}).args([["settlement","date"],["maturity","date"],["investment","number++"],["discount","number++"],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$settlement < $maturity","NUM"]]]),O("PRICE",function(e,t,i,n,r,s,o){var a=1+((t-e)*s/(o%2==0?360:365)|0),l=P(e,t,s),d=l[0],c=l[1],u=N(d,e,o),h=N(e,c,o),f=N(d,c,o),p=100*i/s,m=n/s,g=h/f;if(1==a)return(r+p)/(1+g*m)-u/f*p;return r/Math.pow(1+m,a-1+g)+p*Math.pow(1+m,1-a-g)*(Math.pow(1+m,a)-1)/m-u/f*p}).args([["settlement","date"],["maturity","date"],["rate","number++"],["yld","number++"],["redemption","number++"],["frequency",["and","integer",["values",1,2,4]]],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$settlement < $maturity","NUM"]]]),O("PRICEDISC",function(e,t,i,n,r){var s=N(e,t,r),o=L(U(t).year,r);return n-i*n*s/o}).args([["settlement","date"],["maturity","date"],["discount","number++"],["redemption","number++"],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$settlement < $maturity","NUM"]]]);var Y=300,K=2.2204e-16,Q=1e-30,J=Math.abs}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/borderpalette",["kendo.core","kendo.colorpicker","kendo.popup"],function(){!function(e){if(!(e.support.browser.msie&&e.support.browser.version<9)){var t=e.jQuery,i=["allBorders","insideBorders","insideHorizontalBorders","insideVerticalBorders","outsideBorders","leftBorder","topBorder","rightBorder","bottomBorder","noBorders"],n=e.spreadsheet.messages.borderPalette={allBorders:"All borders",insideBorders:"Inside borders",insideHorizontalBorders:"Inside horizontal borders",insideVerticalBorders:"Inside vertical borders",outsideBorders:"Outside borders",leftBorder:"Left border",topBorder:"Top border",rightBorder:"Right border",bottomBorder:"Bottom border",noBorders:"No border",reset:"Reset color",customColor:"Custom color...",apply:"Apply",cancel:"Cancel"},r=e.ui.Widget.extend({init:function(t,i){e.ui.Widget.call(this,t,i),this.element=t,this.color=i.color,this._resetButton(),this._colorPalette(),this._customColorPalette(),this._customColorButton(),this.resetButton.on("click",this.resetColor.bind(this)),this.customColorButton.on("click",this.customColor.bind(this))},options:{name:"ColorChooser"},events:["change"],destroy:function(){e.unbind(this.dialog.element.find(".k-action-buttons")),this.dialog.destroy(),this.colorPalette.destroy(),this.resetButton.off("click"),this.customColorButton.off("click")},value:function(e){if(void 0===e)return this.color;this.color=e,this.customColorButton.find(".k-icon").css("background-color",this.color),this.colorPalette.value(null),this.flatColorPicker.value(this.color)},_change:function(e){this.color=e,this.trigger("change",{value:e})},_colorPalette:function(){var e=t("<div />",{class:"k-spreadsheet-color-palette"}),i=this.colorPalette=t("<div />").kendoColorPalette({palette:["#ffffff","#000000","#d6ecff","#4e5b6f","#7fd13b","#ea157a","#feb80a","#00addc","#738ac8","#1ab39f","#f2f2f2","#7f7f7f","#a7d6ff","#d9dde4","#e5f5d7","#fad0e4","#fef0cd","#c5f2ff","#e2e7f4","#c9f7f1","#d8d8d8","#595959","#60b5ff","#b3bcca","#cbecb0","#f6a1c9","#fee29c","#8be6ff","#c7d0e9","#94efe3","#bfbfbf","#3f3f3f","#007dea","#8d9baf","#b2e389","#f272af","#fed46b","#51d9ff","#aab8de","#5fe7d5","#a5a5a5","#262626","#003e75","#3a4453","#5ea226","#af0f5b","#c58c00","#0081a5","#425ea9","#138677","#7f7f7f","#0c0c0c","#00192e","#272d37","#3f6c19","#750a3d","#835d00","#00566e","#2c3f71","#0c594f"],value:this.color,change:function(e){this.customColorButton.find(".k-icon").css("background-color","transparent"),this.flatColorPicker.value(null),this._change(e.value)}.bind(this)}).data("kendoColorPalette");e.append(i.wrapper).appendTo(this.element)},_customColorPalette:function(){var i=t("<div />",{class:"k-spreadsheet-window",html:"<div></div><div class='k-action-buttons'><button class='k-button k-primary' data-bind='click: apply'>"+n.apply+"</button><button class='k-button' data-bind='click: close'>"+n.cancel+"</button></div>"}),r=this.dialog=i.appendTo(document.body).kendoWindow({animation:!1,scrollable:!1,resizable:!1,maximizable:!1,modal:!0,visible:!1,width:268,open:function(){this.center()}}).data("kendoWindow");r.one("activate",function(){this.element.find("[data-role=flatcolorpicker]").data("kendoFlatColorPicker")._hueSlider.resize()});var s=this.flatColorPicker=r.element.children().first().kendoFlatColorPicker().data("kendoFlatColorPicker"),o=e.observable({apply:function(){this.customColorButton.find(".k-icon").css("background-color",s.value()),this.colorPalette.value(null),this._change(s.value()),r.close()}.bind(this),close:function(){s.value(null),r.close()}});e.bind(r.element.find(".k-action-buttons"),o)},_resetButton:function(){this.resetButton=t("<a class='k-button k-reset-color' href='#'><span class='k-icon k-font-icon k-i-reset-color'></span>"+n.reset+"</a>").appendTo(this.element)},_customColorButton:function(){this.customColorButton=t("<a class='k-button k-custom-color' href='#'><span class='k-icon'></span>"+n.customColor+"</a>").appendTo(this.element)},resetColor:function(){this.colorPalette.value(null),this.flatColorPicker.value(null),this._change(null)},customColor:function(){this.dialog.open()}}),s=e.ui.Widget.extend({init:function(t,i){e.ui.Widget.call(this,t,i),this.element=t,this.color="#000",this.element.addClass("k-spreadsheet-border-palette"),this._borderTypePalette(),this._borderColorPalette(),this.element.on("click",".k-spreadsheet-border-type-palette .k-button",this._click.bind(this))},options:{name:"BorderPalette"},events:["change"],destroy:function(){this.colorChooser.destroy(),this.element.off("click")},_borderTypePalette:function(){var r=n,s=i.map(function(t){return'<a title="'+r[t]+'" href="#" data-border-type="'+t+'" class="k-button k-button-icon"><span class="k-sprite k-font-icon k-icon k-i-'+e.toHyphens(t)+'"></span></a>'}).join(""),o=t("<div />",{class:"k-spreadsheet-border-type-palette",html:s});o.appendTo(this.element)},_borderColorPalette:function(){var e=t("<div />",{class:"k-spreadsheet-border-color-palette"});e.appendTo(this.element),this.colorChooser=new r(e,{color:this.color,change:this._colorChange.bind(this)})},_click:function(e){this.type=t(e.currentTarget).data("borderType"),this.trigger("change",{type:this.type,color:this.color})},_colorChange:function(e){this.color=e.value,this.type&&this.trigger("change",{type:this.type,color:this.color})}});e.spreadsheet.ColorChooser=r,e.spreadsheet.BorderPalette=s}}(window.kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/toolbar",["kendo.toolbar","kendo.colorpicker","kendo.combobox","kendo.dropdownlist","kendo.popup","spreadsheet/borderpalette"],function(){!function(e){if(!(e.support.browser.msie&&e.support.browser.version<9)){var t=e.jQuery,i=e.ui.ToolBar,n=e.spreadsheet.messages.toolbar={addColumnLeft:"Add column left",addColumnRight:"Add column right",addRowAbove:"Add row above",addRowBelow:"Add row below",alignment:"Alignment",alignmentButtons:{justtifyLeft:"Align left",justifyCenter:"Center",justifyRight:"Align right",justifyFull:"Justify",alignTop:"Align top",alignMiddle:"Align middle",alignBottom:"Align bottom"},backgroundColor:"Background",bold:"Bold",borders:"Borders",colorPicker:{reset:"Reset color",customColor:"Custom color..."},copy:"Copy",cut:"Cut",deleteColumn:"Delete column",deleteRow:"Delete row",filter:"Filter",fontFamily:"Font",fontSize:"Font size",format:"Custom format...",formatTypes:{automatic:"Automatic",number:"Number",percent:"Percent",financial:"Financial",currency:"Currency",date:"Date",time:"Time",dateTime:"Date time",duration:"Duration",moreFormats:"More formats..."},formatDecreaseDecimal:"Decrease decimal",formatIncreaseDecimal:"Increase decimal",freeze:"Freeze panes",freezeButtons:{freezePanes:"Freeze panes",freezeRows:"Freeze rows",freezeColumns:"Freeze columns",unfreeze:"Unfreeze panes"},italic:"Italic",merge:"Merge cells",mergeButtons:{mergeCells:"Merge all",mergeHorizontally:"Merge horizontally",mergeVertically:"Merge vertically",unmerge:"Unmerge"},open:"Open...",paste:"Paste",quickAccess:{redo:"Redo",undo:"Undo"},exportAs:"Export...",sortAsc:"Sort ascending",sortDesc:"Sort descending",sortButtons:{sortSheetAsc:"Sort sheet A to Z",sortSheetDesc:"Sort sheet Z to A",sortRangeAsc:"Sort range A to Z",sortRangeDesc:"Sort range Z to A"},textColor:"Text Color",textWrap:"Wrap text",underline:"Underline",validation:"Data validation...",hyperlink:"Link"},r={open:{type:"open",overflow:"never",iconClass:"xlsa"},exportAs:{type:"exportAsDialog",dialogName:"exportAs",overflow:"never",text:"",iconClass:"xlsa"},bold:{type:"button",command:"PropertyChangeCommand",property:"bold",value:!0,iconClass:"bold",togglable:!0},italic:{type:"button",command:"PropertyChangeCommand",property:"italic",value:!0,iconClass:"italic",togglable:!0},underline:{type:"button",command:"PropertyChangeCommand",property:"underline",value:!0,iconClass:"underline",togglable:!0},formatDecreaseDecimal:{type:"button",command:"AdjustDecimalsCommand",value:-1,iconClass:"decrease-decimal"},formatIncreaseDecimal:{type:"button",command:"AdjustDecimalsCommand",value:1,iconClass:"increase-decimal"},textWrap:{type:"button",command:"TextWrapCommand",property:"wrap",value:!0,iconClass:"text-wrap",togglable:!0},cut:{type:"button",command:"ToolbarCutCommand",iconClass:"cut"},copy:{type:"button",command:"ToolbarCopyCommand",iconClass:"copy"},paste:{type:"button",command:"ToolbarPasteCommand",iconClass:"paste"},separator:{type:"separator"},alignment:{type:"alignment",iconClass:"justify-left"},backgroundColor:{type:"colorPicker",property:"background",iconClass:"background"},textColor:{type:"colorPicker",property:"color",iconClass:"text"},fontFamily:{type:"fontFamily",property:"fontFamily",iconClass:"text"},fontSize:{type:"fontSize",property:"fontSize",iconClass:"font-size"},format:{type:"format",property:"format",iconClass:"format-number"},filter:{type:"filter",property:"hasFilter",iconClass:"filter"},merge:{type:"merge",iconClass:"merge-cells"},freeze:{type:"freeze",iconClass:"freeze-panes"},borders:{type:"borders",iconClass:"all-borders"},formatCells:{type:"dialog",dialogName:"formatCells",overflow:"never"},hyperlink:{type:"dialog",dialogName:"hyperlink",iconClass:"hyperlink",overflow:"never",text:""},addColumnLeft:{type:"button",command:"AddColumnCommand",value:"left",iconClass:"add-column-left"},addColumnRight:{type:"button",command:"AddColumnCommand",value:"right",iconClass:"add-column-right"},addRowBelow:{type:"button",command:"AddRowCommand",value:"below",iconClass:"add-row-below"},addRowAbove:{type:"button",command:"AddRowCommand",value:"above",iconClass:"add-row-above"},deleteColumn:{type:"button",command:"DeleteColumnCommand",iconClass:"delete-column"},deleteRow:{type:"button",command:"DeleteRowCommand",iconClass:"delete-row"},sort:{type:"sort",iconClass:"sort-desc"},validation:{type:"dialog",dialogName:"validation",iconClass:"exception",overflow:"never"}},s=i.extend({init:function(e,t){t.items=this._expandTools(t.tools||s.prototype.options.tools[t.toolbarName]),i.fn.init.call(this,e,t);var n=this._click.bind(this);this.element.addClass("k-spreadsheet-toolbar"),this._addSeparators(this.element),this.bind({click:n,toggle:n})},_addSeparators:function(e){var t=e.children(".k-widget, a.k-button, .k-button-group");t.before("<span class='k-separator' />")},_expandTools:function(e){function i(e){var s=t.isPlainObject(e)?e:r[e]||{},o="k-icon k-font-icon k-i-"+s.iconClass,a=s.type,l={splitButton:{spriteCssClass:o},button:{showText:"overflow"},colorPicker:{toolIcon:o}},d=t.extend({name:s.name||e,text:n[s.name||e],spriteCssClass:o,attributes:{title:n[s.name||e]}},l[a],s);return"splitButton"==a&&(d.menuButtons=d.menuButtons.map(i)),d.attributes["data-tool"]=e,s.property&&(d.attributes["data-property"]=s.property),d}return e.reduce(function(e,n){return t.isArray(n)?e.push({type:"buttonGroup",buttons:n.map(i)}):e.push(i.call(this,n)),e},[])},_click:function(e){var t=e.target.attr("data-tool"),i=r[t]||{},n=i.command;if(n){var s={command:n,options:{property:i.property||null,value:i.value||null}};"boolean"==typeof s.options.value&&(s.options.value=!!e.checked||null),this.action(s)}},events:["click","toggle","open","close","overflowOpen","overflowClose","action","dialog"],options:{name:"SpreadsheetToolBar",resizable:!0,tools:{home:["open","exportAs",["cut","copy","paste"],["bold","italic","underline"],"hyperlink","backgroundColor","textColor","borders","fontSize","fontFamily","alignment","textWrap",["formatDecreaseDecimal","formatIncreaseDecimal"],"format","merge","freeze","filter"],insert:[["addColumnLeft","addColumnRight","addRowBelow","addRowAbove"],["deleteColumn","deleteRow"]],data:["sort","filter","validation"]}},action:function(e){this.trigger("action",e)},dialog:function(e){this.trigger("dialog",e)},refresh:function(t){function i(e,t){var i=e.toolbar,n=e.overflow,r=i&&i.options.togglable||n&&n.options.togglable;if(r){var s=!1;"boolean"==typeof t?s=t:"string"==typeof t&&(s=i.options.value===t),i.toggle(s),n&&n.toggle(s)}}function n(e,t){var i=e.toolbar,n=e.overflow;i&&i.update&&i.update(t),n&&n.update&&n.update(t)}for(var r=t,s=this._tools(),o=0;o<s.length;o++){var a=s[o].property,l=s[o].tool,d=e.isFunction(r[a])?r[a]():r;"button"===l.type?i(l,d):n(l,d)}},_tools:function(){return this.element.find("[data-property]").toArray().reduce(function(e,i){var n=(i=t(i)).attr("data-property");return e.push({property:n,tool:this._getItem(i)}),e}.bind(this),[])},destroy:function(){this.element.find("[data-command],.k-button").each(function(){var e=t(this),i=e.data("instance");i&&i.destroy&&i.destroy()}),i.fn.destroy.call(this)}});e.spreadsheet.ToolBar=s;var o=e.toolbar.Item.extend({init:function(e,i){var n=t("<select />").kendoDropDownList({height:"auto"}).data("kendoDropDownList");this.dropDownList=n,this.element=n.wrapper,this.options=e,this.toolbar=i,this.attributes(),this.addUidAttr(),this.addOverflowAttr(),n.bind("open",this._open.bind(this)),n.bind("change",this._change.bind(this)),this.element.width(e.width).attr({"data-command":"PropertyChangeCommand","data-property":e.property})},_open:function(){var t,i=this.dropDownList,n=i.list;n.css({whiteSpace:"nowrap",width:"auto"}),(t=n.width())?t+=20:t=i._listWidth,n.css("width",t+e.support.scrollbar()),i._listWidth=t},_change:function(e){var t=e.sender,i=t.value(),n=t.dataItem(),r=n?n.popup:void 0;r?this.toolbar.dialog({name:r}):this.toolbar.action({command:"PropertyChangeCommand",options:{property:this.options.property,value:"null"==i?null:i}})},value:function(e){if(void 0===e)return this.dropDownList.value();this.dropDownList.value(e)}}),a=e.toolbar.Item.extend({init:function(e,i){this.element=t("<a href='#' class='k-button k-button-icon'><span class='"+e.spriteCssClass+"'></span><span class='k-icon k-i-arrow-s'></span></a>"),this.element.on("click",this.open.bind(this)).attr("data-command",e.command),this.options=e,this.toolbar=i,this.attributes(),this.addUidAttr(),this.addOverflowAttr(),this._popup()},destroy:function(){this.popup.destroy()},open:function(){this.popup.toggle()},_popup:function(){var e=this.element;this.popup=t("<div class='k-spreadsheet-popup' />").appendTo(e).kendoPopup({anchor:e}).data("kendoPopup")}});e.toolbar.registerComponent("dialog",e.toolbar.ToolBarButton.extend({init:function(t,i){e.toolbar.ToolBarButton.fn.init.call(this,t,i),this._dialogName=t.dialogName,this.element.bind("click",this.open.bind(this)).data("instance",this)},open:function(){this.toolbar.dialog({name:this._dialogName})}})),e.toolbar.registerComponent("exportAsDialog",e.toolbar.Item.extend({init:function(e,i){this._dialogName=e.dialogName,this.toolbar=i,this.element=t("<button class='k-button k-button-icon' title='"+e.attributes.title+"'><span class='k-icon k-font-icon k-i-xls' /></button>").data("instance",this),this.element.bind("click",this.open.bind(this)).data("instance",this)},open:function(){this.toolbar.dialog({name:this._dialogName})}}));var l=e.toolbar.OverflowButton.extend({init:function(t,i){e.toolbar.OverflowButton.fn.init.call(this,t,i),this.element.on("click",this._click.bind(this)),this.message=this.options.text;var n=this.element.data("button");this.element.data(this.options.type,n)},_click:t.noop}),d=a.extend({init:function(t,i){a.fn.init.call(this,t,i),this.popup.element.addClass("k-spreadsheet-colorpicker"),this.colorChooser=new e.spreadsheet.ColorChooser(this.popup.element,{change:this._colorChange.bind(this)}),this.element.attr({"data-property":t.property}),this.element.data({type:"colorPicker",colorPicker:this,instance:this})},destroy:function(){this.colorChooser.destroy(),a.fn.destroy.call(this)},update:function(e){this.value(e)},value:function(e){this.colorChooser.value(e)},_colorChange:function(e){this.toolbar.action({command:"PropertyChangeCommand",options:{property:this.options.property,value:e.sender.value()}}),this.popup.close()}}),c=l.extend({init:function(e,t){e.iconName="text",l.fn.init.call(this,e,t)},_click:function(){this.toolbar.dialog({name:"colorPicker",options:{title:this.options.property,property:this.options.property}})}});e.toolbar.registerComponent("colorPicker",d,c);var u=[8,9,10,11,12,13,14,16,18,20,22,24,26,28,36,48,72],h=e.toolbar.Item.extend({init:function(e,i){var n=t("<input />").kendoComboBox({change:this._valueChange.bind(this),dataSource:e.fontSizes||u,value:12}).data("kendoComboBox");this.comboBox=n,this.element=n.wrapper,this.options=e,this.toolbar=i,this.attributes(),this.addUidAttr(),this.addOverflowAttr(),this.element.width(e.width).attr({"data-command":"PropertyChangeCommand","data-property":e.property}),this.element.data({type:"fontSize",fontSize:this})},_valueChange:function(t){this.toolbar.action({command:"PropertyChangeCommand",options:{property:this.options.property,value:e.parseInt(t.sender.value())}})},update:function(t){this.value(e.parseInt(t)||12)},value:function(e){if(void 0===e)return this.comboBox.value();this.comboBox.value(e)}}),f=l.extend({_click:function(){this.toolbar.dialog({name:"fontSize",options:{sizes:u,defaultSize:12}})},update:function(e){this._value=e||12,this.element.find(".k-text").text(this.message+" ("+this._value+") ...")}});e.toolbar.registerComponent("fontSize",h,f);var p=["Arial","Courier New","Georgia","Times New Roman","Trebuchet MS","Verdana"],m=o.extend({init:function(e,t){o.fn.init.call(this,e,t);var i=this.dropDownList;i.setDataSource(e.fontFamilies||p),i.value("Arial"),this.element.data({type:"fontFamily",fontFamily:this})},update:function(e){this.value(e||"Arial")}}),g=l.extend({_click:function(){this.toolbar.dialog({name:"fontFamily",options:{fonts:p,defaultFont:"Arial"}})},update:function(e){this._value=e||"Arial",this.element.find(".k-text").text(this.message+" ("+this._value+") ...")}});e.toolbar.registerComponent("fontFamily",m,g);var v=e.spreadsheet.formats={automatic:null,number:"#,0.00",percent:"0.00%",financial:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',currency:"$#,##0.00;[Red]$#,##0.00",date:"m/d/yyyy",time:"h:mm:ss AM/PM",dateTime:"m/d/yyyy h:mm",duration:"[h]:mm:ss"},_=o.extend({_revertTitle:function(e){e.sender.value(""),e.sender.wrapper.width("auto")},init:function(e,t){o.fn.init.call(this,e,t);var i=this.dropDownList,r="<span class='k-icon k-font-icon k-i-"+e.iconClass+"' style='line-height: 1em; width: 1.35em;'></span>";i.bind("change",this._revertTitle.bind(this)),i.bind("dataBound",this._revertTitle.bind(this)),i.setOptions({dataValueField:"format",dataTextField:"name",dataValuePrimitive:!0,valueTemplate:r,template:"# if (data.sample) { #<span class='k-spreadsheet-sample'>#: data.sample #</span># } ##: data.name #"}),i.text(r),i.setDataSource([{format:v.automatic,name:n.formatTypes.automatic},{format:v.number,name:n.formatTypes.number,sample:"1,499.99"},{format:v.percent,name:n.formatTypes.percent,sample:"14.50%"},{format:v.financial,name:n.formatTypes.financial,sample:"(1,000.12)"},{format:v.currency,name:n.formatTypes.currency,sample:"$1,499.99"},{format:v.date,name:n.formatTypes.date,sample:"4/21/2012"},{format:v.time,name:n.formatTypes.time,sample:"5:49:00 PM"},{format:v.dateTime,name:n.formatTypes.dateTime,sample:"4/21/2012 5:49:00"},{format:v.duration,name:n.formatTypes.duration,sample:"168:05:00"},{popup:"formatCells",name:n.formatTypes.moreFormats}]),this.element.data({type:"format",format:this})}}),b=l.extend({_click:function(){this.toolbar.dialog({name:"formatCells"})}});e.toolbar.registerComponent("format",_,b);var k=a.extend({init:function(e,t){a.fn.init.call(this,e,t),this._borderPalette(),this.element.data({type:"borders",instance:this})},destroy:function(){this.borderPalette.destroy(),a.fn.destroy.call(this)},_borderPalette:function(){var i=t("<div />").appendTo(this.popup.element);this.borderPalette=new e.spreadsheet.BorderPalette(i,{change:this._action.bind(this)})},_action:function(e){this.toolbar.action({command:"BorderChangeCommand",options:{border:e.type,style:{size:1,color:e.color}}})}}),w=l.extend({_click:function(){this.toolbar.dialog({name:"borders"})}});e.toolbar.registerComponent("borders",k,w);var y=a.extend({init:function(e,i){a.fn.init.call(this,e,i),this.element.attr({"data-property":"alignment"}),this._commandPalette(),this.popup.element.on("click",".k-button",function(e){this._action(t(e.currentTarget))}.bind(this)),this.element.data({type:"alignment",alignment:this,instance:this})},buttons:[{property:"textAlign",value:"left",iconClass:"justify-left",text:n.alignmentButtons.justtifyLeft},{property:"textAlign",value:"center",iconClass:"justify-center",text:n.alignmentButtons.justifyCenter},{property:"textAlign",value:"right",iconClass:"justify-right",text:n.alignmentButtons.justifyRight},{property:"textAlign",value:"justify",iconClass:"justify-full",text:n.alignmentButtons.justifyFull},{property:"verticalAlign",value:"top",iconClass:"align-top",text:n.alignmentButtons.alignTop},{property:"verticalAlign",value:"center",iconClass:"align-middle",text:n.alignmentButtons.alignMiddle},{property:"verticalAlign",value:"bottom",iconClass:"align-bottom",text:n.alignmentButtons.alignBottom}],destroy:function(){this.popup.element.off(),a.fn.destroy.call(this)},update:function(e){var t=e.textAlign(),i=e.verticalAlign();this.popup.element.find(".k-button").removeClass("k-state-active"),t&&this.popup.element.find(".k-button[data-value="+t+"]").addClass("k-state-active"),i&&this.popup.element.find(".k-button[data-value="+i+"]").addClass("k-state-active")},_commandPalette:function(){var e=this.buttons,i=t("<div />").appendTo(this.popup.element);e.forEach(function(n,r){var s="<a title='"+n.text+"' data-property='"+n.property+"' data-value='"+n.value+"' class='k-button k-button-icon'><span class='k-icon k-font-icon k-i-"+n.iconClass+"'></span></a>";0!==r&&e[r-1].property!==n.property&&i.append(t("<span class='k-separator' />")),i.append(s)})},_action:function(e){var t=e.attr("data-property"),i=e.attr("data-value");this.toolbar.action({command:"PropertyChangeCommand",options:{property:t,value:i}})}}),x=l.extend({_click:function(){this.toolbar.dialog({name:"alignment"})}});e.toolbar.registerComponent("alignment",y,x);var C=a.extend({init:function(e,i){a.fn.init.call(this,e,i),this._commandPalette(),this.popup.element.on("click",".k-button",function(e){this._action(t(e.currentTarget))}.bind(this)),this.element.data({type:"merge",merge:this,instance:this})},buttons:[{value:"cells",iconClass:"merge-cells",text:n.mergeButtons.mergeCells},{value:"horizontally",iconClass:"merge-horizontally",text:n.mergeButtons.mergeHorizontally},{value:"vertically",iconClass:"merge-vertically",text:n.mergeButtons.mergeVertically},{value:"unmerge",iconClass:"normal-layout",text:n.mergeButtons.unmerge}],destroy:function(){this.popup.element.off(),a.fn.destroy.call(this)},_commandPalette:function(){var e=t("<div />").appendTo(this.popup.element);this.buttons.forEach(function(t){var i="<a title='"+t.text+"' data-value='"+t.value+"' class='k-button k-button-icontext'><span class='k-icon k-font-icon k-i-"+t.iconClass+"'></span>"+t.text+"</a>";e.append(i)})},_action:function(e){var t=e.attr("data-value");this.toolbar.action({command:"MergeCellCommand",options:{value:t}})}}),S=l.extend({_click:function(){this.toolbar.dialog({name:"merge"})}});e.toolbar.registerComponent("merge",C,S);var T=a.extend({init:function(e,i){a.fn.init.call(this,e,i),this._commandPalette(),this.popup.element.on("click",".k-button",function(e){this._action(t(e.currentTarget))}.bind(this)),this.element.data({type:"freeze",freeze:this,instance:this})},buttons:[{value:"panes",iconClass:"freeze-panes",text:n.freezeButtons.freezePanes},{value:"rows",iconClass:"freeze-row",text:n.freezeButtons.freezeRows},{value:"columns",iconClass:"freeze-col",text:n.freezeButtons.freezeColumns},{value:"unfreeze",iconClass:"normal-layout",text:n.freezeButtons.unfreeze}],destroy:function(){this.popup.element.off(),a.fn.destroy.call(this)},_commandPalette:function(){var e=t("<div />").appendTo(this.popup.element);this.buttons.forEach(function(t){var i="<a title='"+t.text+"' data-value='"+t.value+"' class='k-button k-button-icontext'><span class='k-icon k-font-icon k-i-"+t.iconClass+"'></span>"+t.text+"</a>";e.append(i)})},_action:function(e){var t=e.attr("data-value");this.toolbar.action({command:"FreezePanesCommand",options:{value:t}})}}),D=l.extend({_click:function(){this.toolbar.dialog({name:"freeze"})}});e.toolbar.registerComponent("freeze",T,D);var F=o.extend({_revertTitle:function(e){e.sender.value(""),e.sender.wrapper.width("auto")},init:function(e,t){o.fn.init.call(this,e,t);var i=this.dropDownList;i.bind("change",this._revertTitle.bind(this)),i.bind("dataBound",this._revertTitle.bind(this)),i.setOptions({valueTemplate:"<span class='k-icon k-font-icon k-i-"+e.iconClass+"' style='line-height: 1em; width: 1.35em;'></span>",template:"<span class='k-icon k-font-icon k-i-#= iconClass #' style='line-height: 1em; width: 1.35em;'></span>#=text#",dataTextField:"text",dataValueField:"value"}),i.setDataSource([{value:"asc",sheet:!1,text:n.sortButtons.sortRangeAsc,iconClass:"sort-asc"},{value:"desc",sheet:!1,text:n.sortButtons.sortRangeDesc,iconClass:"sort-desc"}]),i.select(0),this.element.data({type:"sort",sort:this})},_change:function(e){var t=e.sender,i=t.dataItem();i&&this.toolbar.action({command:"SortCommand",options:{value:i.value,sheet:i.sheet}})},value:t.noop}),E=l.extend({_click:function(){this.toolbar.dialog({name:"sort"})}});e.toolbar.registerComponent("sort",F,E);var R=e.toolbar.ToolBarButton.extend({init:function(t,i){t.showText="overflow",e.toolbar.ToolBarButton.fn.init.call(this,t,i),this.element.on("click",this._click.bind(this)),this.element.data({type:"filter",filter:this})},_click:function(){this.toolbar.action({command:"FilterCommand"})},update:function(e){this.toggle(e)}}),A=l.extend({init:function(e,t){l.fn.init.call(this,e,t),this.element.data({type:"filter",filter:this})},_click:function(){this.toolbar.action({command:"FilterCommand"})},update:function(e){this.toggle(e)}});e.toolbar.registerComponent("filter",R,A);var I=e.toolbar.Item.extend({init:function(e,i){this.toolbar=i,this.element=t("<div class='k-button k-upload-button k-button-icon'><span class='k-icon k-font-icon k-i-folder-open' /></div>").data("instance",this),this._title=e.attributes.title,this._reset()},_reset:function(){this.element.remove("input"),t("<input type='file' autocomplete='off' accept='.xlsx'/>").attr("title",this._title).one("change",this._change.bind(this)).appendTo(this.element)},_change:function(e){this.toolbar.action({command:"OpenCommand",options:{file:e.target.files[0]}}),this._reset()}});e.toolbar.registerComponent("open",I),e.spreadsheet.TabStrip=e.ui.TabStrip.extend({init:function(i,n){e.ui.TabStrip.fn.init.call(this,i,n),i.addClass("k-spreadsheet-tabstrip"),this._quickAccessButtons(),this.quickAccessToolBar.on("click",".k-button",function(e){var i=t(e.currentTarget).attr("title").toLowerCase();this.trigger("action",{action:i})}.bind(this)),this.toolbars={};var r=n.dataSource;this.contentElements.each(function(e,i){this._toolbar(t(i),r[e].id,n.toolbarOptions[r[e].id])}.bind(this)),this.one("activate",function(){this.toolbars[this.options.dataSource[0].id].resize()})},events:e.ui.TabStrip.fn.events.concat(["action","dialog"]),destroy:function(){this.quickAccessToolBar.off("click"),e.ui.TabStrip.fn.destroy.call(this);for(var t in this.toolbars)this.toolbars[t].destroy()},action:function(e){this.trigger("action",e)},dialog:function(e){this.trigger("dialog",e)},refreshTools:function(e){var t=this.toolbars;for(var i in t)t.hasOwnProperty(i)&&t[i].refresh(e)},_quickAccessButtons:function(){var i=[{title:n.quickAccess.undo,iconClass:"undo-large",action:"undo"},{title:n.quickAccess.redo,iconClass:"redo-large",action:"redo"}],r=e.template("<a href='\\#' title='#= title #' data-action='#= action #' class='k-button k-button-icon'><span class='k-icon k-font-icon k-i-#=iconClass#'></span></a>");this.quickAccessToolBar=t("<div />",{class:"k-spreadsheet-quick-access-toolbar",html:e.render(r,i)}).insertBefore(this.wrapper),this.quickAccessToolBar.on("click",".k-button",function(e){e.preventDefault();var i=t(e.currentTarget).attr("title").toLowerCase();this.action({action:i})}.bind(this)),this.quickAccessAdjust()},quickAccessAdjust:function(){this.tabGroup.css("padding-left",this.quickAccessToolBar.outerWidth())},_toolbar:function(t,i,n){var r,s;this.toolbars[i]&&(this.toolbars[i].destroy(),t.children(".k-toolbar").remove()),n&&(r=t.html("<div />").children("div"),s={tools:"boolean"==typeof n?void 0:n,toolbarName:i,action:this.action.bind(this),dialog:this.dialog.bind(this)},this.toolbars[i]=new e.spreadsheet.ToolBar(r,s))}})}}(window.kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/dialogs",["kendo.core","kendo.binder","kendo.validator"],function(){!function(e){function t(t,i){return e.spreadsheet.formatting.text(t,i)}function i(e,t){for(var i=[],r=[],s=0;s<t.length;s++)-1==n.inArray(t[s][e],r)&&(i.push(t[s]),r.push(t[s][e]));return i}if(!(e.support.browser.msie&&e.support.browser.version<9)){var n=e.jQuery,r=e.data.ObservableObject,s=e.spreadsheet.messages.dialogs={apply:"Apply",save:"Save",cancel:"Cancel",remove:"Remove",okText:"OK",formatCellsDialog:{title:"Format",categories:{number:"Number",currency:"Currency",date:"Date"}},fontFamilyDialog:{title:"Font"},fontSizeDialog:{title:"Font size"},bordersDialog:{title:"Borders"},alignmentDialog:{title:"Alignment",buttons:{justtifyLeft:"Align left",justifyCenter:"Center",justifyRight:"Align right",justifyFull:"Justify",alignTop:"Align top",alignMiddle:"Align middle",alignBottom:"Align bottom"}},mergeDialog:{title:"Merge cells",buttons:{mergeCells:"Merge all",mergeHorizontally:"Merge horizontally",mergeVertically:"Merge vertically",unmerge:"Unmerge"}},freezeDialog:{title:"Freeze panes",buttons:{freezePanes:"Freeze panes",freezeRows:"Freeze rows",freezeColumns:"Freeze columns",unfreeze:"Unfreeze panes"}},validationDialog:{title:"Data Validation",hintMessage:"Please enter a valid {0} value {1}.",hintTitle:"Validation {0}",criteria:{any:"Any value",number:"Number",text:"Text",date:"Date",custom:"Custom Formula",list:"List"},comparers:{greaterThan:"greater than",lessThan:"less than",between:"between",notBetween:"not between",equalTo:"equal to",notEqualTo:"not equal to",greaterThanOrEqualTo:"greater than or equal to",lessThanOrEqualTo:"less than or equal to"},comparerMessages:{greaterThan:"greater than {0}",lessThan:"less than {0}",between:"between {0} and {1}",notBetween:"not between {0} and {1}",equalTo:"equal to {0}",notEqualTo:"not equal to {0}",greaterThanOrEqualTo:"greater than or equal to {0}",lessThanOrEqualTo:"less than or equal to {0}",custom:"that satisfies the formula: {0}"},labels:{criteria:"Criteria",comparer:"Comparer",min:"Min",max:"Max",value:"Value",start:"Start",end:"End",onInvalidData:"On invalid data",rejectInput:"Reject input",showWarning:"Show warning",showHint:"Show hint",hintTitle:"Hint title",hintMessage:"Hint message",ignoreBlank:"Ignore blank"},placeholders:{typeTitle:"Type title",typeMessage:"Type message"}},exportAsDialog:{title:"Export...",labels:{scale:"Scale",fit:"Fit to page",fileName:"File name",saveAsType:"Save as type",exportArea:"Export",paperSize:"Paper size",margins:"Margins",orientation:"Orientation",print:"Print",guidelines:"Guidelines",center:"Center",horizontally:"Horizontally",vertically:"Vertically"}},modifyMergedDialog:{errorMessage:"Cannot change part of a merged cell."},overflowDialog:{errorMessage:"Cannot paste, because the copy area and the paste area are not the same size and shape."},useKeyboardDialog:{title:"Copying and pasting",errorMessage:"These actions cannot be invoked through the menu. Please use the keyboard shortcuts instead:",labels:{forCopy:"for copy",forCut:"for cut",forPaste:"for paste"}},unsupportedSelectionDialog:{errorMessage:"That action cannot be performed on multiple selection."},linkDialog:{title:"Hyperlink",labels:{text:"Text",url:"Address",removeLink:"Remove link"}}},o={};e.spreadsheet.dialogs={register:function(e,t){o[e]=t},registered:function(e){return!!o[e]},create:function(e,t){var i=o[e];if(i)return new i(t)}};var a=e.spreadsheet.SpreadsheetDialog=e.Observable.extend({init:function(t){e.Observable.fn.init.call(this,t),this.options=n.extend(!0,{},this.options,t),this.bind(this.events,t)},events:["close","activate"],dialog:function(){return this._dialog||(this._dialog=n("<div class='k-spreadsheet-window k-action-window' />").addClass(this.options.className||"").append(e.template(this.options.template)({messages:e.spreadsheet.messages.dialogs||s})).appendTo(document.body).kendoWindow({scrollable:!1,resizable:!1,modal:!0,visible:!1,width:this.options.width||320,title:this.options.title,open:function(){this.center()},close:this._onDialogClose.bind(this),activate:this._onDialogActivate.bind(this),deactivate:this._onDialogDeactivate.bind(this)}).data("kendoWindow")),this._dialog},_onDialogClose:function(){this.trigger("close")},_onDialogActivate:function(){this.trigger("activate")},_onDialogDeactivate:function(){this.trigger("deactivate"),this.destroy()},destroy:function(){this._dialog&&(this._dialog.destroy(),this._dialog=null)},open:function(){this.dialog().open()},apply:function(){this.close()},close:function(){this.dialog().close()}}),l=e.spreadsheet.FormatCellsViewModel=r.extend({init:function(e){r.fn.init.call(this,e),this.useCategory(this.category)},useCategory:function(e){var t=e&&e.type||"number",i="currency"==t;this.category=e,this.set("showCurrencyFilter",i&&this.currencies.length>1),i?this.currency(this.currencies[0]):this.set("formats",this.allFormats[t+"Formats"]),this.useFirstFormat()},useFirstFormat:function(){this.formats.length&&this.set("format",this.formats[0].value)},currency:function(e){if(void 0!==e){this._currency=e;var i=e.value,n=[{currency:i,decimals:!0},{currency:i,decimals:!0,iso:!0},{currency:i,decimals:!1}];n=n.map(function(e){return e=l.convert.currency(e),{value:e,name:t(1e3,e)}}),this.set("formats",n),this.useFirstFormat()}return this._currency||this.currencies[0]},categoryFilter:function(e){return void 0!==e&&this.useCategory(e),this.category},preview:function(){var e=this.get("format"),i=this.value||0;return e&&e.length?t(i,e):i}});l.convert={currency:function(e){var t=e.currency,i=t.pattern[1];return e.decimals&&(i=i.replace(/n/g,"n"+t["."]+function(e,t){return new Array(t+1).join(e)}("0",t.decimals))),i=e.iso?'"'+t.abbr+'" '+i.replace(/\s*\$\s*/g,""):i.replace(/\$/g,t.symbol),i=i.replace(/n/g,"?")},date:function(e){return/T|Z/.test(e)?"":e.toLowerCase().replace(/tt/g,"AM/PM").replace(/'/g,'"')}};var d=a.extend({init:function(t){var i=e.spreadsheet.messages.dialogs.formatCellsDialog||s,r={title:i.title,categories:[{type:"number",name:i.categories.number},{type:"currency",name:i.categories.currency},{type:"date",name:i.categories.date}]};a.fn.init.call(this,n.extend(r,t)),this._generateFormats()},options:{className:"k-spreadsheet-format-cells",template:"<div class='k-root-tabs' data-role='tabstrip' data-text-field='name' data-bind='source: categories, value: categoryFilter' data-animation='false' /><div class='k-spreadsheet-preview' data-bind='text: preview' /><script type='text/x-kendo-template' id='format-item-template'>\\#: data.name \\#<\/script><select data-role='dropdownlist' class='k-format-filter' data-text-field='description' data-value-field='value.name' data-bind='visible: showCurrencyFilter, value: currency, source: currencies' /><ul data-role='staticlist' tabindex='0' class='k-list k-reset' data-template='format-item-template' data-value-primitive='true' data-value-field='value' data-bind='source: formats, value: format' /><div class='k-action-buttons'><button class='k-button k-primary' data-bind='click: apply'>#: messages.apply #</button><button class='k-button' data-bind='click: close'>#: messages.cancel #</button></div>"},_generateFormats:function(){var r=this.options;if(r.currencies||(r.currencies=d.currenciesFrom(e.cultures)),r.numberFormats||(r.numberFormats=[{value:"#.00%",name:"100.00%"},{value:"#%",name:"100%"},{value:"#.00",name:"1024.00"},{value:"#,###.00",name:"1,024.00"}]),!r.dateFormats){var s=e.cultures.current.calendars.standard.patterns;r.dateFormats=i("value",n.map(s,function(e){if(e=l.convert.date(e))return{value:e,name:t(34567.7678,e)}}))}},open:function(t){var i,n=this.options,r=t.value(),s=n.categories.slice(0);this.viewModel=new l({currencies:n.currencies.slice(0),allFormats:{numberFormats:n.numberFormats.slice(0),dateFormats:n.dateFormats.slice(0)},categories:s,format:t.format(),category:r instanceof Date?s[2]:s[0],apply:this.apply.bind(this),close:this.close.bind(this),value:r}),a.fn.open.call(this),i=this.dialog().element,e.bind(i,this.viewModel);var o=i.find("select.k-format-filter").data("kendoDropDownList");n.currencies.length>10&&o.setOptions({filter:"contains"}),i.find(e.roleSelector("staticlist")).parent().addClass("k-list-wrapper")},apply:function(){var e=this.viewModel.format;a.fn.apply.call(this),this.trigger("action",{command:"PropertyChangeCommand",options:{property:"format",value:e}})}});d.currenciesFrom=function(t){return i("description",n.map(t,function(t,i){if(/-/.test(i)){var n=t.numberFormat.currency,r=e.format("{0} ({1}, {2})",n.name,n.abbr,n.symbol);return{description:r,value:n}}}))},e.spreadsheet.dialogs.register("formatCells",d),e.spreadsheet.dialogs.FormatCellsDialog=d;var c=a.extend({options:{className:"k-spreadsheet-message",title:"",messageId:"",text:"",template:"<div class='k-spreadsheet-message-content' data-bind='text: text' /><div class='k-action-buttons'><button class='k-button k-primary' data-bind='click: close'>#= messages.okText #</button></div>"},open:function(){a.fn.open.call(this);var t=this.options,i=t.text;t.messageId&&(i=e.getter(t.messageId,!0)(e.spreadsheet.messages.dialogs)),e.bind(this.dialog().element,{text:i,close:this.close.bind(this)})}});e.spreadsheet.dialogs.register("message",c);var u=a.extend({init:function(t){var i=e.spreadsheet.messages.dialogs.fontFamilyDialog||s;a.fn.init.call(this,n.extend({title:i.title},t)),this._list()},options:{template:"<ul class='k-list k-reset'></ul>"},_list:function(){var t=this.dialog().element.find("ul"),i=this.options.fonts,n=this.options.defaultFont;this.list=new e.ui.StaticList(t,{dataSource:new e.data.DataSource({data:i}),template:"#: data #",value:n,change:this.apply.bind(this)}),this.list.dataSource.fetch()},apply:function(e){a.fn.apply.call(this),this.trigger("action",{command:"PropertyChangeCommand",options:{property:"fontFamily",value:e.sender.value()[0]}})}});e.spreadsheet.dialogs.register("fontFamily",u);var h=a.extend({init:function(t){var i=e.spreadsheet.messages.dialogs.fontSizeDialog||s;a.fn.init.call(this,n.extend({title:i.title},t)),this._list()},options:{template:"<ul class='k-list k-reset'></ul>"},_list:function(){var t=this.dialog().element.find("ul"),i=this.options.sizes,n=this.options.defaultSize;this.list=new e.ui.StaticList(t,{dataSource:new e.data.DataSource({data:i}),template:"#: data #",value:n,change:this.apply.bind(this)}),this.list.dataSource.fetch()},apply:function(t){a.fn.apply.call(this),this.trigger("action",{command:"PropertyChangeCommand",options:{property:"fontSize",value:e.parseInt(t.sender.value()[0])}})}});e.spreadsheet.dialogs.register("fontSize",h);var f=a.extend({init:function(t){var i=e.spreadsheet.messages.dialogs.bordersDialog||s;a.fn.init.call(this,n.extend({title:i.title},t)),this.element=this.dialog().element,this._borderPalette(),this.viewModel=e.observable({apply:this.apply.bind(this),close:this.close.bind(this)}),e.bind(this.element.find(".k-action-buttons"),this.viewModel)},options:{width:177,template:"<div></div><div class='k-action-buttons'><button class='k-button k-primary' data-bind='click: apply'>#: messages.apply #</button><button class='k-button' data-bind='click: close'>#: messages.cancel #</button></div>"},apply:function(){a.fn.apply.call(this);var e=this.value();this.trigger("action",{command:"BorderChangeCommand",options:{border:e.type,style:{size:1,color:e.color}}})},_borderPalette:function(){var t=this.dialog().element.find("div:first");this.borderPalette=new e.spreadsheet.BorderPalette(t,{change:this.value.bind(this)})},value:function(e){if(void 0===e)return this._state;this._state=e}});e.spreadsheet.dialogs.register("borders",f);var p=a.extend({init:function(t){a.fn.init.call(this,t),this.element=this.dialog().element,this.property=t.property,this.options.title=t.title,this.viewModel=e.observable({apply:this.apply.bind(this),close:this.close.bind(this)}),e.bind(this.element.find(".k-action-buttons"),this.viewModel)},options:{template:"<div></div><div class='k-action-buttons'><button class='k-button k-primary' data-bind='click: apply'>#: messages.apply #</button><button class='k-button' data-bind='click: close'>#: messages.cancel #</button></div>"},apply:function(){a.fn.apply.call(this),this.trigger("action",{command:"PropertyChangeCommand",options:{property:this.property,value:this.value()}})},value:function(e){if(void 0===e)return this._value;this._value=e.value}}),m=p.extend({init:function(e){e.width=177,p.fn.init.call(this,e),this._colorPalette()},_colorPalette:function(){var e=this.dialog().element.find("div:first");this.colorPalette=e.kendoColorPalette({palette:["#ffffff","#000000","#d6ecff","#4e5b6f","#7fd13b","#ea157a","#feb80a","#00addc","#738ac8","#1ab39f","#f2f2f2","#7f7f7f","#a7d6ff","#d9dde4","#e5f5d7","#fad0e4","#fef0cd","#c5f2ff","#e2e7f4","#c9f7f1","#d8d8d8","#595959","#60b5ff","#b3bcca","#cbecb0","#f6a1c9","#fee29c","#8be6ff","#c7d0e9","#94efe3","#bfbfbf","#3f3f3f","#007dea","#8d9baf","#b2e389","#f272af","#fed46b","#51d9ff","#aab8de","#5fe7d5","#a5a5a5","#262626","#003e75","#3a4453","#5ea226","#af0f5b","#c58c00","#0081a5","#425ea9","#138677","#7f7f7f","#0c0c0c","#00192e","#272d37","#3f6c19","#750a3d","#835d00","#00566e","#2c3f71","#0c594f"],change:this.value.bind(this)}).data("kendoColorPalette")}});e.spreadsheet.dialogs.register("colorPicker",m);var g=p.extend({init:function(e){e.width=268,p.fn.init.call(this,e),this.dialog().setOptions({animation:!1}),this.dialog().one("activate",this._colorPicker.bind(this))},_colorPicker:function(){var e=this.dialog().element.find("div:first");this.colorPicker=e.kendoFlatColorPicker({change:this.value.bind(this)}).data("kendoFlatColorPicker")}});e.spreadsheet.dialogs.register("customColor",g);var v=a.extend({init:function(t){var i=e.spreadsheet.messages.dialogs.alignmentDialog||s,r={title:i.title,buttons:[{property:"textAlign",value:"left",iconClass:"justify-left",text:i.buttons.justtifyLeft},{property:"textAlign",value:"center",iconClass:"justify-center",text:i.buttons.justifyCenter},{property:"textAlign",value:"right",iconClass:"justify-right",text:i.buttons.justifyRight},{property:"textAlign",value:"justify",iconClass:"justify-full",text:i.buttons.justifyFull},{property:"verticalAlign",value:"top",iconClass:"align-top",text:i.buttons.alignTop},{property:"verticalAlign",value:"center",iconClass:"align-middle",text:i.buttons.alignMiddle},{property:"verticalAlign",value:"bottom",iconClass:"align-bottom",text:i.buttons.alignBottom}]};a.fn.init.call(this,n.extend(r,t)),this._list()},options:{template:"<ul class='k-list k-reset'></ul>"},_list:function(){var t=this.dialog().element.find("ul");this.list=new e.ui.StaticList(t,{dataSource:new e.data.DataSource({data:this.options.buttons}),template:"<a title='#=text#' data-property='#=property#' data-value='#=value#'><span class='k-icon k-font-icon k-i-#=iconClass#'></span>#=text#</a>",change:this.apply.bind(this)}),this.list.dataSource.fetch()},apply:function(e){var t=e.sender.value()[0];a.fn.apply.call(this),this.trigger("action",{command:"PropertyChangeCommand",options:{property:t.property,value:t.value}})}});e.spreadsheet.dialogs.register("alignment",v);var _=a.extend({init:function(t){var i=e.spreadsheet.messages.dialogs.mergeDialog||s,r={title:i.title,buttons:[{value:"cells",iconClass:"merge-cells",text:i.buttons.mergeCells},{value:"horizontally",iconClass:"merge-horizontally",text:i.buttons.mergeHorizontally},{value:"vertically",iconClass:"merge-vertically",text:i.buttons.mergeVertically},{value:"unmerge",iconClass:"normal-layout",text:i.buttons.unmerge}]};a.fn.init.call(this,n.extend(r,t)),this._list()},options:{template:"<ul class='k-list k-reset'></ul>"},_list:function(){var t=this.dialog().element.find("ul");this.list=new e.ui.StaticList(t,{dataSource:new e.data.DataSource({data:this.options.buttons}),template:"<a title='#=text#' data-value='#=value#'><span class='k-icon k-font-icon k-i-#=iconClass#'></span>#=text#</a>",change:this.apply.bind(this)}),this.list.dataSource.fetch()},apply:function(e){var t=e.sender.value()[0];a.fn.apply.call(this),this.trigger("action",{command:"MergeCellCommand",options:{value:t.value}})}});e.spreadsheet.dialogs.register("merge",_);var b=a.extend({init:function(t){var i=e.spreadsheet.messages.dialogs.freezeDialog||s,r={title:i.title,buttons:[{value:"panes",iconClass:"freeze-panes",text:i.buttons.freezePanes},{value:"rows",iconClass:"freeze-row",text:i.buttons.freezeRows},{value:"columns",iconClass:"freeze-col",text:i.buttons.freezeColumns},{value:"unfreeze",iconClass:"normal-layout",text:i.buttons.unfreeze}]};a.fn.init.call(this,n.extend(r,t)),this._list()},options:{template:"<ul class='k-list k-reset'></ul>"},_list:function(){var t=this.dialog().element.find("ul");this.list=new e.ui.StaticList(t,{dataSource:new e.data.DataSource({data:this.options.buttons}),template:"<a title='#=text#' data-value='#=value#'><span class='k-icon k-font-icon k-i-#=iconClass#'></span>#=text#</a>",change:this.apply.bind(this)}),this.list.dataSource.fetch()},apply:function(e){var t=e.sender.value()[0];a.fn.apply.call(this),this.trigger("action",{command:"FreezePanesCommand",options:{value:t.value}})}});e.spreadsheet.dialogs.register("freeze",b);var k=e.spreadsheet.ValidationCellsViewModel=r.extend({init:function(e){r.fn.init.call(this,e),this.bind("change",function(e){"criterion"===e.field&&(this.reset(),"custom"!==this.criterion&&"list"!==this.criterion||this.setHintMessageTemplate()),"comparer"===e.field&&this.setHintMessageTemplate(),"hintMessage"!=e.field&&"hintTitle"!=e.field||this._mute||(this.shouldBuild=!1),"from"!=e.field&&"to"!=e.field&&"hintMessageTemplate"!=e.field&&"type"!=e.field||!this.shouldBuild||this.buildMessages()}.bind(this)),this.reset()},buildMessages:function(){this._mute=!0,this.set("hintTitle",this.hintTitleTemplate?e.format(this.hintTitleTemplate,this.type):""),this.set("hintMessage",this.hintMessageTemplate?e.format(this.hintMessageTemplate,this.from,this.to):""),this._mute=!1},reset:function(){this.setComparers(),this.set("comparer",this.comparers[0].type),this.set("from",null),this.set("to",null),this.set("useCustomMessages",!1),this.shouldBuild=!0,this.hintTitleTemplate=this.defaultHintTitle,this.buildMessages()},setComparers:function(){var e=this.defaultComparers,t=[];if("text"===this.criterion)for(var i=["equalTo","notEqualTo"],n=0;n<e.length;n++)i[0]==e[n].type&&(t.push(e[n]),i.shift());else t=e.slice();this.set("comparers",t)},setHintMessageTemplate:function(){"custom"!==this.criterion&&"list"!==this.criterion?this.set("hintMessageTemplate",e.format(this.defaultHintMessage,this.criterion,this.comparerMessages[this.comparer])):(this.set("hintMessageTemplate",""),this.set("hintMessage",""))},isAny:function(){return"any"===this.get("criterion")},isNumber:function(){return"number"===this.get("criterion")},showToForNumber:function(){return this.showTo()&&this.isNumber()},showToForDate:function(){return this.showTo()&&this.isDate()},isText:function(){return"text"===this.get("criterion")},isDate:function(){return"date"===this.get("criterion")},isList:function(){return"list"===this.get("criterion")},isCustom:function(){return"custom"===this.get("criterion")},showRemove:function(){return this.get("hasValidation")},showTo:function(){return"between"==this.get("comparer")||"notBetween"==this.get("comparer")},update:function(e){this.set("hasValidation",!!e),e&&this.fromValidationObject(e)},fromValidationObject:function(e){this.set("criterion",e.dataType),this.set("comparer",e.comparerType),this.set("from",e.from),this.set("to",e.to),this.set("type",e.type),this.set("ignoreBlank",e.allowNulls),e.messageTemplate||e.titleTemplate?(this.hintMessageTemplate=e.messageTemplate,this.hintMessage=e.messageTemplate,this.hintTitleTemplate=e.titleTemplate,this.hintTitle=e.titleTemplate,this.useCustomMessages=!0,this.buildMessages()):this.useCustomMessages=!1},toValidationObject:function(){if("any"===this.criterion)return null;var e={type:this.type,dataType:this.criterion,comparerType:this.comparer,from:this.from,to:this.to,allowNulls:this.ignoreBlank};return this.useCustomMessages&&(e.messageTemplate=this.shouldBuild?this.hintMessageTemplate:this.hintMessage,e.titleTemplate=this.hintTitle),e}}),w=a.extend({init:function(t){var i=e.spreadsheet.messages.dialogs.validationDialog||s,r={title:i.title,hintMessage:i.hintMessage,hintTitle:i.hintTitle,criteria:[{type:"any",name:i.criteria.any},{type:"number",name:i.criteria.number},{type:"text",name:i.criteria.text},{type:"date",name:i.criteria.date},{type:"custom",name:i.criteria.custom},{type:"list",name:i.criteria.list}],comparers:[{type:"greaterThan",name:i.comparers.greaterThan},{type:"lessThan",name:i.comparers.lessThan},{type:"between",name:i.comparers.between},{type:"notBetween",name:i.comparers.notBetween},{type:"equalTo",name:i.comparers.equalTo},{type:"notEqualTo",name:i.comparers.notEqualTo},{type:"greaterThanOrEqualTo",name:i.comparers.greaterThanOrEqualTo},{type:"lessThanOrEqualTo",name:i.comparers.lessThanOrEqualTo}],comparerMessages:i.comparerMessages};a.fn.init.call(this,n.extend(r,t))},options:{width:420,criterion:"any",type:"reject",ignoreBlank:!0,useCustomMessages:!1,errorTemplate:'<div class="k-widget k-tooltip k-tooltip-validation" style="margin:0.5em"><span class="k-icon k-warning"> </span>#= message #<div class="k-callout k-callout-n"></div></div>',template:'<div class="k-edit-form-container"><div class="k-edit-label"><label>#: messages.validationDialog.labels.criteria #:</label></div><div class="k-edit-field"><select data-role="dropdownlist" data-text-field="name" data-value-field="type" data-bind="value: criterion, source: criteria" /></div><div data-bind="visible: isNumber"><div class="k-edit-label"><label>#: messages.validationDialog.labels.comparer #:</label></div><div class="k-edit-field"><select data-role="dropdownlist" data-text-field="name" data-value-field="type" data-bind="value: comparer, source: comparers" /></div><div class="k-edit-label"><label>#: messages.validationDialog.labels.min #:</label></div><div class="k-edit-field"><input name="#: messages.validationDialog.labels.min #" placeholder="e.g. 10" class="k-textbox" data-bind="value: from, enabled: isNumber" required="required" /></div><div data-bind="visible: showTo"><div class="k-edit-label"><label>#: messages.validationDialog.labels.max #:</label></div><div class="k-edit-field"><input name="#: messages.validationDialog.labels.max #" placeholder="e.g. 100" class="k-textbox" data-bind="value: to, enabled: showToForNumber" required="required" /></div></div></div><div data-bind="visible: isText"><div class="k-edit-label"><label>#: messages.validationDialog.labels.comparer #:</label></div><div class="k-edit-field"><select data-role="dropdownlist" data-text-field="name" data-value-field="type" data-bind="value: comparer, source: comparers" /></div><div class="k-edit-label"><label>#: messages.validationDialog.labels.value #:</label></div><div class="k-edit-field"><input name="#: messages.validationDialog.labels.value #" class="k-textbox" data-bind="value: from, enabled: isText" required="required" /></div></div><div data-bind="visible: isDate"><div class="k-edit-label"><label>#: messages.validationDialog.labels.comparer #:</label></div><div class="k-edit-field"><select data-role="dropdownlist" data-text-field="name" data-value-field="type" data-bind="value: comparer, source: comparers" /></div><div class="k-edit-label"><label>#: messages.validationDialog.labels.start #:</label></div><div class="k-edit-field"><input name="#: messages.validationDialog.labels.start #" class="k-textbox" data-bind="value: from, enabled: isDate" required="required" /></div><div data-bind="visible: showTo"><div class="k-edit-label"><label>#: messages.validationDialog.labels.end #:</label></div><div class="k-edit-field"><input name="#: messages.validationDialog.labels.end #" class="k-textbox" data-bind="value: to, enabled: showToForDate" required="required" /></div></div></div><div data-bind="visible: isCustom"><div class="k-edit-label"><label>#: messages.validationDialog.labels.value #:</label></div><div class="k-edit-field"><input name="#: messages.validationDialog.labels.value #" class="k-textbox" data-bind="value: from, enabled: isCustom" required="required" /></div></div><div data-bind="visible: isList"><div class="k-edit-label"><label>#: messages.validationDialog.labels.value #:</label></div><div class="k-edit-field"><input name="#: messages.validationDialog.labels.value #" class="k-textbox" data-bind="value: from, enabled: isList" required="required" /></div></div><div data-bind="invisible: isAny"><div class="k-edit-label"><label>#: messages.validationDialog.labels.ignoreBlank #:</label></div><div class="k-edit-field"><input type="checkbox" name="ignoreBlank" id="ignoreBlank" class="k-checkbox" data-bind="checked: ignoreBlank"/><label class="k-checkbox-label" for="ignoreBlank"></label></div></div><div data-bind="invisible: isAny"><div class="k-action-buttons"></div><div class="k-edit-label"><label>#: messages.validationDialog.labels.onInvalidData #:</label></div><div class="k-edit-field"><input type="radio" id="validationTypeReject" name="validationType" value="reject" data-bind="checked: type" class="k-radio" /><label for="validationTypeReject" class="k-radio-label">#: messages.validationDialog.labels.rejectInput #</label> <input type="radio" id="validationTypeWarning" name="validationType" value="warning" data-bind="checked: type" class="k-radio" /><label for="validationTypeWarning" class="k-radio-label">#: messages.validationDialog.labels.showWarning #</label></div></div><div data-bind="invisible: isAny"><div class="k-edit-label"><label>#: messages.validationDialog.labels.showHint #:</label></div><div class="k-edit-field"><input type="checkbox" name="useCustomMessages" id="useCustomMessages" class="k-checkbox" data-bind="checked: useCustomMessages" /><label class="k-checkbox-label" for="useCustomMessages"></label></div><div data-bind="visible: useCustomMessages"><div class="k-edit-label"><label>#: messages.validationDialog.labels.hintTitle #:</label></div><div class="k-edit-field"><input class="k-textbox" placeholder="#: messages.validationDialog.placeholders.typeTitle #" data-bind="value: hintTitle" /></div><div class="k-edit-label"><label>#: messages.validationDialog.labels.hintMessage #:</label></div><div class="k-edit-field"><input class="k-textbox" placeholder="#: messages.validationDialog.placeholders.typeMessage #" data-bind="value: hintMessage" /></div></div></div><div class="k-action-buttons"><button class="k-button" data-bind="visible: showRemove, click: remove">#: messages.remove #</button><button class="k-button k-primary" data-bind="click: apply">#: messages.apply #</button><button class="k-button" data-bind="click: close">#: messages.cancel #</button></div></div>'},open:function(t){var i,n=this.options;this.viewModel=new k({type:n.type,defaultHintMessage:n.hintMessage,defaultHintTitle:n.hintTitle,defaultComparers:n.comparers.slice(0),comparerMessages:n.comparerMessages,criteria:n.criteria.slice(0),criterion:n.criterion,ignoreBlank:n.ignoreBlank,apply:this.apply.bind(this),close:this.close.bind(this),remove:this.remove.bind(this)}),this.viewModel.update(t.validation()),a.fn.open.call(this),i=this.dialog().element,this.validatable&&this.validatable.destroy(),e.bind(i,this.viewModel),this.validatable=new e.ui.Validator(i.find(".k-edit-form-container"),{validateOnBlur:!1,errorTemplate:this.options.errorTemplate||void 0})},apply:function(){this.validatable.validate()&&(a.fn.apply.call(this),this.trigger("action",{command:"EditValidationCommand",options:{value:this.viewModel.toValidationObject()}}))},remove:function(){this.viewModel.set("criterion","any"),this.apply()}});e.spreadsheet.dialogs.register("validation",w),e.spreadsheet.dialogs.ValidationDialog=w;var y=a.extend({init:function(t){var i=e.spreadsheet.messages.dialogs.exportAsDialog||s;a.fn.init.call(this,n.extend({title:i.title},t)),this.viewModel=e.observable({title:this.options.title,name:this.options.name,extension:this.options.extension,fileFormats:this.options.fileFormats,excel:t.excelExport,pdf:{proxyURL:t.pdfExport.proxyURL,forceProxy:t.pdfExport.forceProxy,title:t.pdfExport.title,author:t.pdfExport.author,subject:t.pdfExport.subject,keywords:t.pdfExport.keywords,creator:t.pdfExport.creator,date:t.pdfExport.date,fitWidth:this.options.pdf.fitWidth,area:this.options.pdf.area,areas:this.options.pdf.areas,paperSize:this.options.pdf.paperSize,paperSizes:this.options.pdf.paperSizes,margin:this.options.pdf.margin,margins:this.options.pdf.margins,landscape:this.options.pdf.landscape,guidelines:this.options.pdf.guidelines,hCenter:this.options.pdf.hCenter,vCenter:this.options.pdf.vCenter},apply:this.apply.bind(this),close:this.close.bind(this)}),this.viewModel.bind("change",function(e){"extension"===e.field&&this.set("showPdfOptions",".pdf"===this.extension)}),e.bind(this.dialog().element,this.viewModel)},options:{name:"Workbook",extension:".xlsx",fileFormats:[{description:"Excel Workbook (.xlsx)",extension:".xlsx"},{description:"Portable Document Format(.pdf)",extension:".pdf"}],pdf:{fitWidth:!0,area:"workbook",areas:[{area:"workbook",text:"Entire Workbook"},{area:"sheet",text:"Active Sheet"},{area:"selection",text:"Selection"}],paperSize:"a4",paperSizes:[{value:"a2",text:"A2 (420 mm  594 mm)     "},{value:"a3",text:"A3 (297 mm x 420 mm)     "},{value:"a4",text:"A4 (210 mm x 297 mm)     "},{value:"a5",text:"A5 (148 mm x 210 mm)     "},{value:"b3",text:"B3 (353 mm  500 mm)     "},{value:"b4",text:"B4 (250 mm x 353 mm)     "},{value:"b5",text:"B5 (176 mm x 250 mm)     "},{value:"folio",text:'Folio (8.5" x 13")       '},{value:"legal",text:'Legal (8.5" x 14")       '},{value:"letter",text:'Letter (8.5" x 11")      '},{value:"tabloid",text:'Tabloid (11" x 17")      '},{value:"executive",text:'Executive (7.25" x 10.5")'}],margin:{bottom:"0.75in",left:"0.7in",right:"0.7in",top:"0.75in"},margins:[{value:{bottom:"0.75in",left:"0.7in",right:"0.7in",top:"0.75in"},text:"Normal"},{value:{bottom:"0.75in",left:"0.25in",right:"0.25in",top:"0.75in"},text:"Narrow"},{value:{bottom:"1in",left:"1in",right:"1in",top:"1in"},text:"Wide"}],landscape:!0,guidelines:!0,hCenter:!0,vCenter:!0},width:520,template:"<div class='k-edit-label'><label>#: messages.exportAsDialog.labels.fileName #:</label></div><div class='k-edit-field'><input class='k-textbox' data-bind='value: name' /></div><div ><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.saveAsType #:</label></div><div class='k-edit-field'><select data-role='dropdownlist' class='k-file-format' data-text-field='description' data-value-field='extension' data-bind='value: extension, source: fileFormats' /></div></div><div class='export-config' data-bind='visible: showPdfOptions'><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.exportArea #:</label></div><div class='k-edit-field'><select data-role='dropdownlist' class='k-file-format' data-text-field='text' data-value-field='area' data-bind='value: pdf.area, source: pdf.areas' /></div><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.paperSize#:</label></div><div class='k-edit-field'><select data-role='dropdownlist' class='k-file-format' data-text-field='text' data-value-field='value' data-bind='value: pdf.paperSize, source: pdf.paperSizes' /></div><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.margins #:</label></div><div class='k-edit-field'><select data-role='dropdownlist' class='k-file-format' data-value-primitive='true'data-text-field='text' data-value-field='value' data-bind='value: pdf.margin, source: pdf.margins' /></div><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.orientation #:</label></div><div class='k-edit-field'><input type='radio' id='k-orientation-portrait' name='orientation' data-type='boolean' data-bind='checked: pdf.landscape' value='false' /><label class='k-orientation-label k-orientation-portrait-label' for='k-orientation-portrait'></label><input type='radio' id='k-orientation-landscape' name='orientation' data-type='boolean' data-bind='checked: pdf.landscape' value='true' /><label class='k-orientation-label k-orientation-landscape-label' for='k-orientation-landscape'></label></div><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.print #:</label></div><div class='k-edit-field'><input class='k-checkbox' id='guidelines' type='checkbox' data-bind='checked: pdf.guidelines'/><label class='k-checkbox-label' for='guidelines'>#: messages.exportAsDialog.labels.guidelines#</label></div><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.scale #:</label></div><div class='k-edit-field'><input class='k-checkbox' id='fitWidth' type='checkbox' data-bind='checked: pdf.fitWidth'/><label class='k-checkbox-label' for='fitWidth'>#: messages.exportAsDialog.labels.fit #</label></div><div class='k-edit-label'><label>#: messages.exportAsDialog.labels.center #:</label></div><div class='k-edit-field'><input class='k-checkbox' id='hCenter' type='checkbox' data-bind='checked: pdf.hCenter'/><label class='k-checkbox-label' for='hCenter'>#: messages.exportAsDialog.labels.horizontally #</label><input class='k-checkbox' id='vCenter' type='checkbox' data-bind='checked: pdf.vCenter'/><label class='k-checkbox-label' for='vCenter'>#: messages.exportAsDialog.labels.vertically #</label></div><div class='k-page-orientation' data-bind='css: {k-page-landscape: pdf.landscape}'><div class='k-margins-horizontal'></div><div class='k-margins-vertical'></div></div></div><div class='k-action-buttons'><button class='k-button k-primary' data-bind='click: apply'>#: messages.save #</button><button class='k-button' data-bind='click: close'>#: messages.cancel #</button></div>"},apply:function(){a.fn.apply.call(this),this.trigger("action",{command:"SaveAsCommand",options:this.viewModel})}});e.spreadsheet.dialogs.register("exportAs",y);var x=c.extend({options:{messageId:"modifyMergedDialog.errorMessage"}});e.spreadsheet.dialogs.register("modifyMerged",x);var C=c.extend({options:{messageId:"overflowDialog.errorMessage"}});e.spreadsheet.dialogs.register("overflow",C);var S=c.extend({init:function(t){var i=e.spreadsheet.messages.dialogs.useKeyboardDialog||s;a.fn.init.call(this,n.extend({title:i.title},t))},options:{template:"#: messages.useKeyboardDialog.errorMessage #<div>Ctrl+C #: messages.useKeyboardDialog.labels.forCopy #</div><div>Ctrl+X #: messages.useKeyboardDialog.labels.forCut #</div><div>Ctrl+V #: messages.useKeyboardDialog.labels.forPaste #</div><div class=\"k-action-buttons\"><button class='k-button k-primary' data-bind='click: close'>#= messages.okText #</button></div>"}});e.spreadsheet.dialogs.register("useKeyboard",S);var T=c.extend({options:{messageId:"unsupportedSelectionDialog.errorMessage"}});e.spreadsheet.dialogs.register("unsupportedSelection",T);var D=a.extend({options:{template:"<div class='k-edit-label'><label>#: messages.linkDialog.labels.url #:</label></div><div class='k-edit-field'><input class='k-textbox' data-bind='value: url' /></div><div class='k-action-buttons'><button style='float: left' class='k-button' data-bind='click: remove'>#= messages.linkDialog.labels.removeLink #</button><button class='k-button k-primary' data-bind='click: apply'>#= messages.okText #</button><button class='k-button' data-bind='click: cancel'>#= messages.cancel #</button></div>",title:s.linkDialog.title},open:function(t){var i=this;a.fn.open.apply(i,arguments);var n=i.dialog().element,r=e.observable({url:t.link(),apply:function(){/\S/.test(r.url)||(r.url=null),i.trigger("action",{command:"PropertyChangeCommand",options:{property:"link",value:r.url}}),i.close()},remove:function(){r.url=null,r.apply()},cancel:i.close.bind(i)});e.bind(n,r)}});e.spreadsheet.dialogs.register("hyperlink",D)}}(window.kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/sheetbinder",["kendo.core","kendo.data","spreadsheet/sheet"],function(){!function(e){if(!(e.support.browser.msie&&e.support.browser.version<9)){var t=e.Class.extend({init:function(e){this.options=$.extend({},this.options,e),this.columns=this._normalizeColumns(this.options.columns),this._sheet(),this._dataSource(),this._header(),this._boundRowsCount=0,this.dataSource.fetch()},_sheet:function(){this.sheet=this.options.sheet,this._sheetChangeHandler=this._sheetChange.bind(this),this._sheetDeleteRowHandler=this._sheetDeleteRow.bind(this),this._sheetInsertRowHandler=this._sheetInsertRow.bind(this),this.sheet.bind("change",this._sheetChangeHandler).bind("deleteRow",this._sheetDeleteRowHandler).bind("insertRow",this._sheetInsertRowHandler)},_sheetInsertRow:function(e){void 0!==e.index&&this.dataSource.insert(Math.max(e.index-1,0),{})},_sheetDeleteRow:function(e){if(void 0!==e.index){var t=this.dataSource,i=t.view()[e.index-1];i&&t.remove(i)}},_header:function(){this.sheet.batch(function(){this.columns.forEach(function(e,t){this.sheet.range(0,t).value(e.title)}.bind(this))}.bind(this))},_sheetChange:function(e){if(e.recalc&&e.ref){var t=this.dataSource,i=t.view(),n=this.columns;!n.length&&i.length&&(n=Object.keys(i[0].toJSON())),this._skipRebind=!0;var r=this.sheet.range(e.ref).values();e.ref.forEach(function(e){for(var s,o=0,a=(e=e.toRangeRef()).topLeft.row;a<=e.bottomRight.row;a++){(s=i[a-1])||(s=t.insert(a-1,{}),i=t.view());for(var l=0,d=e.topLeft.col;d<=e.bottomRight.col&&d<n.length;d++)s.set(n[d].field,r[o][l++]);o++}}),this._boundRowsCount=t.view().length,this._skipRebind=!1}},_normalizeColumns:function(e){return e.map(function(e){var t=e.field||e;return{field:t,title:e.title||t}})},_dataSource:function(){var t=this.options,i=t.dataSource;i=Array.isArray(i)?{data:i}:i,this.dataSource&&this._changeHandler?this.dataSource.unbind("change",this._changeHandler):this._changeHandler=this._change.bind(this),this.dataSource=e.data.DataSource.create(i).bind("change",this._changeHandler)},_change:function(){if(!this._skipRebind){var t=this.dataSource.view(),i=this.columns;!i.length&&t.length&&(this.columns=i=this._normalizeColumns(Object.keys(t[0].toJSON())),this._header());var n=i.map(function(t){return e.getter(t.field)});this.sheet.batch(function(){for(var e=Math.max(t.length,this._boundRowsCount),i=0;i<e;i++)for(var r=0;r<n.length;r++){var s=t[i]?n[r](t[i]):null;this.sheet.range(i+1,r).value(s)}}.bind(this)),this._boundRowsCount=t.length}},destroy:function(){this.dataSource.unbind("change",this._changeHandler),this.sheet.unbind("change",this._sheetChangeHandler).unbind("deleteRow",this._sheetDeleteRowHandler).unbind("insertRow",this._sheetInsertRowHandler)},options:{columns:[]}});e.spreadsheet.SheetDataSourceBinder=t}}(kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/filtermenu",["kendo.core","kendo.popup","kendo.treeview","kendo.numerictextbox","kendo.datepicker","kendo.datetimepicker"],function(){!function(e){function t(i,n){for(var r=!1,s=i instanceof e.data.HierarchicalDataSource&&i.data(),o=0;o<s.length;o++){var a=s[o],l=a.text.toString().toLowerCase(),d=!0===n||""===n||l.indexOf(n)>=0,c=t(a.children,d||n);r=r||c||d,a.hidden=!d&&!c,a.checked=!a.hidden}return s&&i.filter({field:"hidden",operator:"neq",value:!0}),r}function i(t){for(var n=t instanceof e.data.HierarchicalDataSource&&t.data(),r=0;r<n.length;r++){var s=n[r];s.checked=!1,s.hasChildren&&i(s.children)}}if(!(e.support.browser.msie&&e.support.browser.version<9)){var n=e.jQuery,r=e.ui.Widget,s={details:"k-details",button:"k-button",detailsSummary:"k-details-summary",detailsContent:"k-details-content",icon:"k-icon k-font-icon",iconCollapse:"k-i-collapse-se",iconExpand:"k-i-expand-e",iconSearch:"k-i-search",textbox:"k-textbox",wrapper:"k-spreadsheet-filter-menu",filterByCondition:"k-spreadsheet-condition-filter",filterByValue:"k-spreadsheet-value-filter",valuesTreeViewWrapper:"k-spreadsheet-value-treeview-wrapper",actionButtons:"k-action-buttons"},o=r.extend({init:function(t,i){r.fn.init.call(this,t,i),this.element.addClass(u.classNames.details),this._summary=this.element.find("."+u.classNames.detailsSummary).on("click",this._toggle.bind(this));var s=i.expanded?u.classNames.iconCollapse:u.classNames.iconExpand;this._icon=n("<span />",{class:u.classNames.icon+" "+s}).prependTo(this._summary),this._container=e.wrap(this._summary.next(),!0),i.expanded||this._container.hide()},options:{name:"Details"},events:["toggle"],visible:function(){return this.options.expanded},toggle:function(t){var i=e.fx(this._container).expand("vertical");i.stop()[t?"reverse":"play"](),this._icon.toggleClass(u.classNames.iconExpand,t).toggleClass(u.classNames.iconCollapse,!t),this.options.expanded=!t},_toggle:function(){var e=this.visible();this.toggle(e),this.trigger("toggle",{show:e})}}),a=e.spreadsheet.messages.filterMenu={sortAscending:"Sort range A to Z",sortDescending:"Sort range Z to A",filterByValue:"Filter by value",filterByCondition:"Filter by condition",apply:"Apply",search:"Search",addToCurrent:"Add to current selection",clear:"Clear",blanks:"(Blanks)",operatorNone:"None",and:"AND",or:"OR",operators:{string:{contains:"Text contains",doesnotcontain:"Text does not contain",startswith:"Text starts with",endswith:"Text ends with"},date:{eq:"Date is",neq:"Date is not",lt:"Date is before",gt:"Date is after"},number:{eq:"Is equal to",neq:"Is not equal to",gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than"}}};e.data.binders.spreadsheetFilterValue=e.data.Binder.extend({init:function(t,i,r){e.data.Binder.fn.init.call(this,t,i,r),this._change=n.proxy(this.change,this),n(this.element).on("change",this._change)},refresh:function(){var e=this.bindings.spreadsheetFilterValue.get();n(this.element).val(e instanceof Date?"":e)},change:function(){var e=this.element.value;this.bindings.spreadsheetFilterValue.set(e)}}),e.data.binders.widget.spreadsheetFilterValue=e.data.Binder.extend({init:function(t,i,r){e.data.Binder.fn.init.call(this,t.element[0],i,r),this.widget=t,this._change=n.proxy(this.change,this),this.widget.first("change",this._change)},refresh:function(){var e=this.bindings.spreadsheetFilterValue,t=e.get(),i=n(this.widget.element).data("filterType");"date"===i&&t instanceof Date||"number"===i&&!isNaN(t)?this.widget.value(t):this.widget.value(null)},change:function(){var e=this.widget.value(),t=this.bindings.spreadsheetFilterValue;t.set(e)}});var l={filterByValue:"<div class='"+s.detailsSummary+"'>#= messages.filterByValue #</div><div class='"+s.detailsContent+"'><div class='k-textbox k-space-right'><input placeholder='#= messages.search #' data-#=ns#bind='events: { input: filterValues }' /><span class='k-icon k-font-icon k-i-search' /></div><div data-#=ns#bind='visible: hasActiveSearch'><input class='k-checkbox' type='checkbox' data-#=ns#bind='checked: appendToSearch' id='_#=guid#' /><label class='k-checkbox-label' for='_#=guid#'>#= messages.addToCurrent #</label></div><div class='"+s.valuesTreeViewWrapper+"'><div data-#=ns#role='treeview' data-#=ns#checkboxes='{ checkChildren: true }' data-#=ns#bind='source: valuesDataSource, events: { check: valuesChange, select: valueSelect }' /></div></div>",filterByCondition:"<div class='"+s.detailsSummary+"'>#= messages.filterByCondition #</div><div class='"+s.detailsContent+'\'><div><select data-#=ns#role="dropdownlist"data-#=ns#bind="value: operator, source: operators, events: { change: operatorChange } "data-value-primitive="false"data-option-label="#=messages.operatorNone#"data-height="auto"data-text-field="text"data-value-field="unique"></select></div><div data-#=ns#bind="visible: isString"><input data-filter-type="string" data-#=ns#bind="spreadsheetFilterValue: customFilter.criteria[0].value" class="k-textbox" /></div><div data-#=ns#bind="visible: isNumber"><input data-filter-type="number" data-#=ns#role="numerictextbox" data-#=ns#bind="spreadsheetFilterValue: customFilter.criteria[0].value" /></div><div data-#=ns#bind="visible: isDate"><input data-filter-type="date" data-#=ns#role="datepicker" data-#=ns#bind="spreadsheetFilterValue: customFilter.criteria[0].value" /></div></div>',menuItem:"<li data-command='#=command#' data-dir='#=dir#'><span class='k-icon k-font-icon k-i-#=iconClass#'></span>#=text#</li>",actionButtons:"<button data-#=ns#bind='click: apply' class='k-button k-primary'>#=messages.apply#</button><button data-#=ns#bind='click: clear' class='k-button'>#=messages.clear#</button>"},d=e.spreadsheet.FilterMenuViewModel=e.data.ObservableObject.extend({valuesChange:function(t){var i=t?t.sender.dataSource:this.valuesDataSource,n=i.data(),r=n[0].children.data().toJSON(),s=r.filter(function(e){return"blank"===e.dataType});s=!!s.length&&s[0].checked,r=r.filter(function(e){return e.checked&&e.value}).map(function(t){return"date"===t.dataType?e.spreadsheet.dateToNumber(t.value):t.value}),this.appendToSearch&&this.valueFilter&&this.valueFilter.values.length&&(r=r.concat(this.valueFilter.values.toJSON()).sort().filter(function(e,t,i){return i.lastIndexOf(e)===t})),this.set("valueFilter",{values:r,blanks:s})},valueSelect:function(e){e.preventDefault();var t=e.sender.dataItem(e.node);t.set("checked",!t.checked)},hasActiveSearch:!1,appendToSearch:!1,filterValues:function(e){var r="string"==typeof e?e:n(e.target).val().toLowerCase(),s=this.valuesDataSource;this.set("hasActiveSearch",!!r),i(s),t(s,r)},reset:function(){this.set("customFilter",{logic:"and",criteria:[{operator:null,value:null}]}),this.set("valueFilter",{values:[]})},operatorChange:function(e){var t=e.sender.dataItem();this.set("operatorType",t.type),this.set("customFilter.criteria[0].operator",t.value)},isNone:function(){return void 0===this.get("operatorType")},isString:function(){return"string"===this.get("operatorType")},isNumber:function(){return"number"===this.get("operatorType")},isDate:function(){return"date"===this.get("operatorType")}}),c=e.spreadsheet.FilterMenuController={valuesTree:function(e,t){return[{text:"All",expanded:!0,checked:!0,items:this.values(e.resize({top:1}),t)}]},values:function(t,i){var n=[],r=a,s=t.column(i),o=t.sheet();return s.forEachCell(function(t,i,s){void 0===s.value?s.dataType="blank":s.format?s.dataType=e.spreadsheet.formatting.type(s.value,s.format):s.dataType=typeof s.value,null!==s.value&&s.format?s.text=e.spreadsheet.formatting.text(s.value,s.format):s.text=s.value?s.value:r.blanks,"percent"===s.dataType&&(s.dataType="number"),"date"===s.dataType&&(s.value=e.spreadsheet.numberToDate(s.value)),s.hasOwnProperty("wrap")&&delete s.wrap,s.checked=!o.isHiddenRow(t),n.push(s)}),(n=function(e){for(var t={},i=[],n=0;n<e.length;n++)t[e[n].value]?!t[e[n].value].checked&&e[n].checked&&(t[e[n].value].checked=!0):(t[e[n].value]=e[n],i.push(e[n]));return i}(n)).sort(function(e,t){return e.dataType===t.dataType?0:"blank"===e.dataType||"blank"===t.dataType?"blank"===e.dataType?-1:1:"number"===e.dataType||"number"===t.dataType?"number"===e.dataType?-1:1:"date"===e.dataType||"date"===t.dataType?"date"===e.dataType?-1:1:0}),n},filterType:function(e,t){var i,n=e.sheet(),r=this.filterForColumn(t,n);if((r=r&&r.filter.toJSON())&&"custom"==r.filter){var s=r.criteria[0].value;s instanceof Date?i="date":"string"==typeof s?i="string":"number"==typeof s&&(i="number")}if(!i){var o=this.values(e.row(1),t)[0];"blank"==(i=o&&o.dataType)&&(i=null)}return i},filterForColumn:function(e,t){var i,n=t.filter();return n&&(i=n.columns.filter(function(t){return t.index===e})[0]),i},filter:function(e,t){var i=this.filterForColumn(e,t);if(i){var n=i.filter.toJSON(),r=n.filter;delete n.filter;var s={type:r,options:n},o=n.criteria;return o&&o.length&&(s.operator=o[0].operator),s}}},u=r.extend({init:function(e,t){r.call(this,e,t),this.element.addClass(u.classNames.wrapper),this.viewModel=new d({active:"value",operator:null,operators:function(e){var t=a.operators,i=[];for(var n in e)if(e.hasOwnProperty(n))for(var r in e[n])e[n].hasOwnProperty(r)&&i.push({text:t[n][r],value:r,unique:n+"_"+r,type:n});return i}(this.options.operators),clear:this.clear.bind(this),apply:this.apply.bind(this)}),this._filterInit(),this._popup(),this._sort(),this._filterByCondition(),this._filterByValue(),this._actionButtons()},options:{name:"FilterMenu",column:0,range:null,operators:{string:{contains:"Text contains",doesnotcontain:"Text does not contain",startswith:"Text starts with",endswith:"Text ends with"},date:{eq:"Date is",neq:"Date is not",lt:"Date is before",gt:"Date is after"},number:{eq:"Is equal to",neq:"Is not equal to",gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than"}}},events:["action"],destroy:function(){r.fn.destroy.call(this),this.menu.destroy(),this.valuesTreeView.destroy(),this.popup.destroy()},openFor:function(e){this.popup.setOptions({anchor:e}),this.popup.open()},close:function(){this.popup.close()},clear:function(){this.action({command:"ClearFilterCommand",options:{column:this.options.column}}),this.viewModel.reset(),this.close()},apply:function(){this._active();var e,t,i={operatingRange:this.options.range,column:this.options.column};"value"===this.viewModel.active?(this.viewModel.valuesChange({sender:this.valuesTreeView}),(e=this.viewModel.valueFilter.toJSON()).values&&e.values.length&&(i.valueFilter=e)):"custom"===this.viewModel.active&&(t=this.viewModel.customFilter.toJSON()).criteria.length&&null!==t.criteria[0].value&&(i.customFilter=t),(i.valueFilter||i.customFilter)&&this.action({command:"ApplyFilterCommand",options:i})},action:function(e){this.trigger("action",n.extend({},e))},_filterInit:function(){var e=this.options.column,t=this.options.range,i=t.sheet(),n=c.filter(e,i);if(n){var r=c.filterType(t,e);this.viewModel.set("active",n.type),this.viewModel.set(n.type+"Filter",n.options),"custom"==n.type&&(this.viewModel.set("operator",r+"_"+n.operator),this.viewModel.set("operatorType",r))}else this.viewModel.reset()},_popup:function(){this.popup=this.element.kendoPopup({copyAnchorStyles:!1}).data("kendoPopup")},_sort:function(){var t=e.template(u.templates.menuItem),i=a,r=[{command:"sort",dir:"asc",text:i.sortAscending,iconClass:"sort-asc"},{command:"sort",dir:"desc",text:i.sortDescending,iconClass:"sort-desc"}],s=n("<ul />",{html:e.render(t,r)}).appendTo(this.element);this.menu=s.kendoMenu({orientation:"vertical",select:function(e){var t=n(e.item).data("dir"),i=this.options.range.resize({top:1}),r={value:t,sheet:!1,operatingRange:i,column:this.options.column};i.isSortable()?this.action({command:"SortCommand",options:r}):this.close()}.bind(this)}).data("kendoMenu")},_appendTemplate:function(t,i,r,s){var l=e.template(t),d=n("<div class='"+i+"'/>").html(l({messages:a,guid:e.guid(),ns:e.ns}));return this.element.append(d),r&&(r=new o(d,{expanded:s,toggle:this._detailToggle.bind(this)})),e.bind(d,this.viewModel),d},_detailToggle:function(e){this.element.find("[data-role=details]").not(e.sender.element).data("kendoDetails").toggle(!e.show)},_filterByCondition:function(){var e="custom"===this.viewModel.active;this._appendTemplate(u.templates.filterByCondition,u.classNames.filterByCondition,!0,e)},_filterByValue:function(){var t="value"===this.viewModel.active,i=this._appendTemplate(u.templates.filterByValue,u.classNames.filterByValue,!0,t);this.valuesTreeView=i.find("[data-role=treeview]").data("kendoTreeView");var n=c.valuesTree(this.options.range,this.options.column);this.viewModel.set("valuesDataSource",new e.data.HierarchicalDataSource({data:n}))},_actionButtons:function(){this._appendTemplate(u.templates.actionButtons,u.classNames.actionButtons,!1)},_active:function(){var e=this.element.find("[data-role=details]").filter(function(e,t){return n(t).data("kendoDetails").visible()});e.hasClass(u.classNames.filterByValue)?this.viewModel.set("active","value"):e.hasClass(u.classNames.filterByCondition)&&this.viewModel.set("active","custom")}});e.spreadsheet.FilterMenu=u,n.extend(!0,u,{classNames:s,templates:l})}}(window.kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/editor",["kendo.core"],function(){!function(e){if(!(e.support.browser.msie&&e.support.browser.version<9)){var t=e.Observable.extend({init:function(t){e.Observable.fn.init.call(this),this.view=t,this.formulaBar=t.formulaBar,this.barInput=t.formulaBar.formulaInput,this.cellInput=t.formulaInput,this.barInput.syncWith(this.cellInput),this.cellInput.syncWith(this.barInput),this.barInput.bind("keyup",this._triggerUpdate.bind(this)),this.cellInput.bind("keyup",this._triggerUpdate.bind(this)),this.barInput.bind("focus",this._focus.bind(this)),this.cellInput.bind("focus",this._focus.bind(this))},events:["activate","deactivate","change","update"],_focus:function(e){this.lastActive=e.sender==this.barInput?"bar":"cell"},_triggerUpdate:function(){this.trigger("update",{value:this.value()})},activeEditor:function(){var t=null,i=e._activeElement();return this.barElement()[0]===i?t=this.barInput:this.cellElement()[0]===i&&(t=this.cellInput),t},activate:function(e){return this._active=!0,this._rect=e.rect,this.cellInput.position(e.rect),this.cellInput.resize(e.rect),this.cellInput.tooltip(e.tooltip),this.cellInput.activeCell=this.barInput.activeCell=e.range.topLeft,this.trigger("activate"),this},deactivate:function(){var e=this.cellInput;this._active&&(e.value()!=this._value&&this.trigger("change",{value:e.value()})||(this._active=!1,this._rect=null,e.hide(),this.trigger("deactivate")))},enable:function(e){this.barInput.enable(e)},barElement:function(){return this.barInput.element},cellElement:function(){return this.cellInput.element},focusLastActive:function(){this.focus(this.lastActive)},focus:function(e){"cell"===(e=e||"cell")?(this.cellInput.element.focus(),this.cellInput.end()):this.barInput.element.focus()},isActive:function(){return this._active},isFiltered:function(){return this.barInput.popup.visible()||this.cellInput.popup.visible()},canInsertRef:function(e){var t=this.activeEditor();return t&&t.canInsertRef(e)},highlightedRefs:function(){var e=this.activeEditor(),t=[];return e&&(t=e.highlightedRefs()),t},scale:function(){this.cellInput.scale()},toggleTooltip:function(e){this.cellInput.toggleTooltip(function(e,t){return e&&(e.top!==t.top||e.left!==t.left)}(this._rect,e))},value:function(e){if(void 0===e)return this.barInput.value();null===e&&(e=""),this._value=e,this.barInput.value(e),this.cellInput.value(e)},insertNewline:function(){this.activeEditor().insertNewline(),this.scale()}});e.spreadsheet.SheetEditor=t}}(kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/autofill",["spreadsheet/runtime","spreadsheet/range"],function(){"use strict";function e(e){for(var t=e.length,i=(t+1)/2,n=e.reduce(function(e,t){return e+t},0)/t,r=0,s=0,o=0;o<t;o++){var a=o+1-i,l=e[o]-n;r+=a*l,s+=a*a}if(!s)return function(t){return e[t%e.length]};var d=r/s,c=n-d*i;return function(e){return c+d*(e+1)}}function t(t){function i(e){return e.map(function(e){return e.number})}var r=[],o=t.map(function(e){return e.formula||e.value});return function(e,t){for(var i,n=null,r=0,o=[],a=0;a<e.length;++a)i=function(e){if("number"==typeof e)return{type:"number",number:e};if("string"==typeof e){var t=function(e){for(var t=e.toLowerCase(),i=function(){var e=kendo.culture();return[e.calendars.standard.days.namesAbbr,e.calendars.standard.days.names,e.calendars.standard.months.namesAbbr,e.calendars.standard.months.names]}(),n=0;n<i.length;++n)for(var r=i[n],s=r.length;--s>=0;){var o=r[s].toLowerCase();if(o==t)return{type:r,number:s,value:e}}}(e);if(t)return t;var i=/^(.*\D)(\d+)/.exec(e);return i?(e=e.replace(/^(.*\D)\d+/,"$1-######"),{type:e,match:i,number:parseFloat(i[2])}):{type:"string"}}if("boolean"==typeof e)return{type:"boolean"};if(null==e)return{type:"null"};if(e instanceof s)return{type:"formula"};throw window.console.error(e),new Error("Cannot fill data")}(e[a]),o.push(i),null!=n&&i.type!==n.type&&(t(r,a,n.type,o.slice(r,a)),r=a),n=i;t(r,a,n.type,o.slice(r,a))}(o,function(s,a,l,d){var c,u;if("number"==l)1==(u=i(d)).length&&(s>0||a<o.length||"date"==function(e,t){if(null!=t)return n.formatting.type(e,t)}(u[0],t[s].format))&&u.push(u[0]+1),c=e(u);else if("string"==l||"formula"==l||"boolean"==l)c=function(e,t){return o[t]};else if(Array.isArray(l))if(1==d.length)c=function(e){return l[(d[0].number+e)%l.length]};else{var h=function(e){for(var t=e[1]-e[0],i=2;i<e.length;++i)if(e[i]-e[i-1]!=t)return null;return t}(i(d));c=null==h?function(e){return d[e%d.length].value}:function(e){var t=d[0].number+h*e;return l[t%l.length]}}else"null"!=l?(1==(u=i(d)).length&&u.push(u[0]+1),u=e(u),c=function(e,t){return o[t].replace(/^(.*\D)\d+/,"$1"+u(e,t))}):c=function(){return null};for(var f={f:c,begin:s,end:a,len:a-s},p=s;p<a;++p)r[p]=f}),function(e,i){var n=r[i],a=e/o.length|0,l=e%o.length,d=a*n.len+l-n.begin,c=n.f(d,i),u=function(e){var t={};return Object.keys(e||{}).forEach(function(i){t[i]=e[i]}),t}(t[i]);return c instanceof s?u.formula=c:u.value=c,u}}function i(e){for(var t=e.length,i=e[0].length,n=[],r=0;r<i;++r){n[r]=[];for(var s=0;s<t;++s)n[r][s]=e[s][r]}return n}if(kendo.support.browser.msie&&kendo.support.browser.version<9)return;var n=kendo.spreadsheet,r=n.Range,s=n.calc.runtime.Formula,o="Incompatible ranges in fillFrom",a=r.FillError=function(e){this.msg=e};a.prototype.toString=function(){return this.msg},r.prototype._previewFillFrom=function(e,n){var r=this._sheet;"string"==typeof e&&(e=r.range(e));var s=e._ref.toRangeRef(),l=this._ref.toRangeRef();if(s.intersects(l)){if(s.eq(l))return null;if(l=l.clone(),s.topLeft.eq(l.topLeft))if(s.width()==l.width())l.topLeft.row+=s.height(),n=0;else{if(s.height()!=l.height())throw new a(o);l.topLeft.col+=s.width(),n=1}else{if(!s.bottomRight.eq(l.bottomRight))throw new a(o);if(s.width()==l.width())l.bottomRight.row-=s.height(),n=2;else{if(s.height()!=l.height())throw new a(o);l.bottomRight.col-=s.width(),n=3}}return r.range(l)._previewFillFrom(e,n)}if(null==n)if(s.topLeft.col==l.topLeft.col)n=s.topLeft.row<l.topLeft.row?0:2;else{if(s.topLeft.row!=l.topLeft.row)throw new a("Cannot determine fill direction");n=s.topLeft.col<l.topLeft.col?1:3}var d=1&n,c=2&n;if(d&&s.height()!=l.height()||!d&&s.width()!=l.width())throw new a(o);var u,h=e._properties();d?u=l.width():(h=i(h),u=l.height());for(var f=new Array(h.length),p=0;p<h.length;++p)for(var m=h[p],g=t(m),v=f[p]=new Array(u),_=0;_<u;++_){var b=c?-_-1:m.length+_,k=c?m.length-_%m.length-1:_%m.length;v[c?u-_-1:_]=g(b,k)}return d||(f=i(f)),{props:f,direction:n,dest:this}},r.prototype.fillFrom=function(e,t){var i=this._previewFillFrom(e,t);if(!i.dest.enable())throw new a("Destination range contains disabled cells");return i.dest._properties(i.props),i.dest}}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("spreadsheet/print",["kendo.pdf","spreadsheet/sheet","spreadsheet/range","spreadsheet/references","spreadsheet/numformat","util/text-metrics"],function(){"use strict";function e(e,t){var i=0,n=[],r=.2*t,s=t;return e.forEach(function(e){t&&i+e>s&&(s-i<r&&(i=t*Math.ceil(i/t)),s+=t*Math.ceil(e/t)),n.push(i),i+=e}),n.push(i),n}function t(t,o,a){var l=[],c=[],u=[],h=function(e,t){var i=e._grid,n={},r={};return e.forEachMergedCell(t,function(e){var s=e.topLeft;i.forEach(e,function(i){s.eq(i)?n[i.print()]=e:t.contains(i)&&(r[i.print()]=s)})}),{primary:n,secondary:r}}(t,o),f=-1,p=-1;t.forEach(o,function(e,i,n){var s=e-o.topLeft.row,m=i-o.topLeft.col;if(m||c.push(t.rowHeight(e)),s||u.push(t.columnWidth(i)),!t.isHiddenColumn(i)&&!t.isHiddenRow(e)){var g=a.forScreen||r(n);if(a.emptyCells||g){var v=new d(e,i).print();if(!h.secondary[v]){g?(f=Math.max(f,s),p=Math.max(p,m)):n.empty=!0;var _=h.primary[v];_?(delete h.primary[v],n.merged=!0,n.rowspan=_.height(),n.colspan=_.width(),a.forScreen&&(n.width=t._columns.sum(_.topLeft.col,_.bottomRight.col),n.height=t._rows.sum(_.topLeft.row,_.bottomRight.row))):(n.rowspan=1,n.colspan=1),n.row=s,n.col=m,l.push(n)}}}}),c=c.slice(0,f+1),u=u.slice(0,p+1);var m=a.pageWidth,g=a.pageHeight,v=1;if(a.fitWidth){var _=u.reduce(i,0);_>m&&(m/=v=m/_,g/=v)}var b=e(c,g||0),k=e(u,m||0),w=0,y=0;return l=l.filter(function(e){return(!e.empty||!(e.row>f||e.col>p))&&(e.left=k[e.col],e.top=b[e.row],e.merged?a.forScreen?(e.right=e.left+e.width,e.bottom=e.top+e.height):(e.right=n(k,e.col+e.colspan),e.bottom=n(b,e.row+e.rowspan),e.width=e.right-e.left,e.height=e.bottom-e.top):(e.width=u[e.col],e.height=c[e.row],e.bottom=e.top+e.height,e.right=e.left+e.width),w=Math.max(w,e.right),y=Math.max(y,e.bottom),!0)}),Object.keys(h.primary).forEach(function(e){var i=h.primary[e];t.forEach(i.topLeft.toRangeRef(),function(e,n,r){var s=e-o.topLeft.row,a=n-o.topLeft.col;r.merged=!0,r.colspan=i.height(),r.rowspan=i.width(),r.top=s<0?-t._rows.sum(e,e-s-1):b[s],r.left=a<0?-t._columns.sum(n,n-a-1):k[a],r.height=t._rows.sum(i.topLeft.row,i.bottomRight.row),r.width=t._columns.sum(i.topLeft.col,i.bottomRight.col),r.right=r.left+r.width,r.bottom=r.top+r.height,l.push(r)})}),{width:w,height:y,cells:l.sort(s),scale:v,xCoords:k,yCoords:b}}function i(e,t){return e+t}function n(e,t){return t<e.length?e[t]:e[e.length-1]}function r(e){return null!=e.value||e.merged||null!=e.background||null!=e.borderTop||null!=e.borderRight||null!=e.borderBottom||null!=e.borderLeft}function s(e,t){return e.top<t.top?-1:e.top==t.top?e.left<t.left?-1:e.left==t.left?0:1:1}function o(e,t,i){for(var n=Math.ceil(e.width/i.pageWidth),r=Math.ceil(e.height/i.pageHeight),s=i.pageWidth/e.scale,o=i.pageHeight/e.scale,a=0;a<n;++a)for(var l=0;l<r;++l)!function(n,r){var a=r*s,l=a+s,d=n*o,p=d+o,m=0,g=0,v=e.cells.filter(function(e){return!(e.right<=a||e.left>=l||e.bottom<=d||e.top>=p)&&(m=Math.max(e.bottom,m),g=Math.max(e.right,g),!0)});if(v.length>0){var _=new c.Group;t.append(_),_.clip(c.Path.fromRect(new h.Rect([0,0],[i.pageWidth,i.pageHeight])));var b=new c.Group;_.append(b);var k=h.Matrix.scale(e.scale,e.scale).multiplyCopy(h.Matrix.translate(-a,-d));if((i.hCenter||i.vCenter)&&(k=k.multiplyCopy(h.Matrix.translate(i.hCenter?(l-g)/2:0,i.vCenter?(p-m)/2:0))),b.transform(k),i.guidelines){var w=null;e.xCoords.forEach(function(e){(e=Math.min(e,g))!==w&&e>=a&&e<=l&&(w=e,b.append((new c.Path).moveTo(e,d).lineTo(e,m).close().stroke("#999",f)))});var w=null;e.yCoords.forEach(function(e){(e=Math.min(e,m))!==w&&e>=d&&e<=p&&(w=e,b.append((new c.Path).moveTo(a,e).lineTo(g,e).close().stroke("#999",f)))})}var y=new c.Group;v.forEach(function(e){!function(e,t,i,n){var r=new c.Group;t.append(r);var s=new h.Rect([e.left,e.top],[e.width,e.height]);if(e.background||e.merged){var o=s;n.guidelines&&((o=s.clone()).origin.x+=f/2,o.origin.y+=f/2,o.size.width-=f,o.size.height-=f),r.append(new c.Rect(o).fill(e.background||"#fff").stroke(null))}e.borderLeft&&i.append((new c.Path).moveTo(e.left,e.top).lineTo(e.left,e.bottom).close().stroke(e.borderLeft.color,e.borderLeft.size));e.borderTop&&i.append((new c.Path).moveTo(e.left,e.top).lineTo(e.right,e.top).close().stroke(e.borderTop.color,e.borderTop.size));e.borderRight&&i.append((new c.Path).moveTo(e.right,e.top).lineTo(e.right,e.bottom).close().stroke(e.borderRight.color,e.borderRight.size));e.borderBottom&&i.append((new c.Path).moveTo(e.left,e.bottom).lineTo(e.right,e.bottom).close().stroke(e.borderBottom.color,e.borderBottom.size));var a=e.value;if(null!=a){var l="number"==typeof a?"number":null,d=new c.Group;d.clip(c.Path.fromRect(s)),r.append(d);var p;if(e.format?(p=u.textAndColor(a,e.format),a=p.text,p.type&&(l=p.type)):a+="",!e.textAlign)switch(l){case"number":case"date":case"percent":e.textAlign="right";break;case"boolean":e.textAlign="center"}!function(e,t,i,n){var r=i.left+2,s=i.top+2,o=i.width-4,a=i.height-4,l=function(e){var t=[];e.italic&&t.push("italic");e.bold&&t.push("bold");return t.push((e.fontSize||12)+"px"),t.push(e.fontFamily||"Arial"),t.join(" ")}(i),d={font:l},u={font:l,fill:{color:t}},f=[],p=0,m=s;if(i.wrap)(function(e,t,i){function n(s,a,l){var d=e.substring(o,a).trim(),c=kendo.util.measureText(d,t);c.width<=i?a<l-1?n(a,a+l>>1,l):(r.push({text:d,box:c}),o=a):s<a&&n(s,s+a>>1,a)}var r=[],s=e.length,o=0;for(;o<s;)n(o,s,s);return r})(e,d,o).forEach(function(e){var t=new c.Text(e.text,[r,m],u);m+=e.box.height,f.push({el:t,box:e.box})}),p=m-s;else{var g=new c.Text(e,[r,m],u),v=kendo.util.measureText(e,d);f.push({el:g,box:v}),p=v.height}var _=new c.Group;n.append(_);var b=0;switch(i.verticalAlign){case"center":b=a-p>>1;break;case void 0:case null:case"bottom":b=a-p}b<0&&(b=0);f.forEach(function(e){_.append(e.el);var t=0;switch(i.textAlign){case"center":t=o-e.box.width>>1;break;case"right":t=o-e.box.width}t<0&&(t=0),(t||b)&&e.el.transform(h.Matrix.translate(t,b))})}(a,p&&p.color||e.color||"#000",e,d)}}(e,b,y,i)}),b.append(y)}}(l,a)}function a(e,i,n,r){null==n&&null==r&&(r=i,n={},i=l.SHEETREF),null==r&&(r=n,i instanceof l.Range||i instanceof l.Ref||"string"==typeof i?n={}:(n=i,i=l.SHEETREF)),n=kendo.jQuery.extend({paperSize:"A4",landscape:!0,margin:"1cm",guidelines:!0,emptyCells:!0,fitWidth:!1,center:!1},n);var s=new c.Group,a=kendo.pdf.getPaperOptions(n);s.options.set("pdf",{author:n.author,creator:n.creator,date:n.date,keywords:n.keywords,margin:a.margin,multiPage:!0,paperSize:a.paperSize,subject:n.subject,title:n.title});var d=a.paperSize[0],u=a.paperSize[1];a.margin&&(d-=a.margin.left+a.margin.right,u-=a.margin.top+a.margin.bottom),n.pageWidth=d,n.pageHeight=u;var h=t(e,e._ref(i),n);o(h,s,n),r(s)}if(kendo.support.browser.msie&&kendo.support.browser.version<9)return;var l=kendo.spreadsheet,d=l.CellRef,c=kendo.drawing,u=l.formatting,h=kendo.geometry,f=.8;l.Sheet.prototype.draw=function(e,t,i){var n=this;n._workbook?n.recalc(n._workbook._context,function(){a(n,e,t,i)}):a(n,e,t,i)},l.draw={doLayout:t,drawLayout:o,shouldDrawCell:r}}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.spreadsheet",["util/undoredostack","util/text-metrics","util/parse-xml","kendo.excel","kendo.progressbar","kendo.pdf","spreadsheet/commands","spreadsheet/formulabar","spreadsheet/formulainput","spreadsheet/eventlistener","spreadsheet/rangelist","spreadsheet/propertybag","spreadsheet/references","spreadsheet/navigator","spreadsheet/axismanager","spreadsheet/clipboard","spreadsheet/range","spreadsheet/sheet","spreadsheet/sheetsbar","spreadsheet/excel-reader","spreadsheet/workbook","spreadsheet/formulacontext","spreadsheet/controller","spreadsheet/view","spreadsheet/grid","spreadsheet/axis","spreadsheet/filter","spreadsheet/sorter","spreadsheet/runtime","spreadsheet/calc","spreadsheet/numformat","spreadsheet/runtime.functions","spreadsheet/runtime.functions.2","spreadsheet/toolbar","spreadsheet/dialogs","spreadsheet/sheetbinder","spreadsheet/filtermenu","spreadsheet/editor","spreadsheet/autofill","spreadsheet/print"],function(){!function(e,t){if(!(e.support.browser.msie&&e.support.browser.version<9)){var i=e.jQuery,n=e.ui.Widget,r=e.spreadsheet.Workbook,s=e.spreadsheet.Controller,o=e.spreadsheet.View,a={recalc:!0,selection:!0,activeCell:!0,layout:!0,sheetSelection:!0,resize:!0,editorChange:!1,editorClose:!1},l=e.ui.Widget.extend({init:function(e,t){n.fn.init.call(this,e,t),this.element.addClass(l.classNames.wrapper),this._view=new o(this.element,{toolbar:this.options.toolbar,sheetsbar:this.options.sheetsbar}),this._workbook=new r(this.options,this._view),this._controller=new s(this._view,this._workbook),this._autoRefresh=!0,this._bindWorkbookEvents(),this._view.workbook(this._workbook),this.refresh(),this._resizeHandler=function(){this.resize()}.bind(this),i(window).on("resize.kendoSpreadsheet",this._resizeHandler)},_resize:function(){this.refresh({layout:!0})},_workbookChange:function(t){if(this._autoRefresh&&this.refresh(t),t.recalc&&t.ref){var i=new e.spreadsheet.Range(t.ref,this.activeSheet());this.trigger("change",{range:i})}},activeSheet:function(e){return this._workbook.activeSheet(e)},moveSheetToIndex:function(e,t){return this._workbook.moveSheetToIndex(e,t)},insertSheet:function(e){return this._workbook.insertSheet(e)},sheets:function(){return this._workbook.sheets()},removeSheet:function(e){return this._workbook.removeSheet(e)},sheetByName:function(e){return this._workbook.sheetByName(e)},sheetIndex:function(e){return this._workbook.sheetIndex(e)},sheetByIndex:function(e){return this._workbook.sheetByIndex(e)},renameSheet:function(e,t){return this._workbook.renameSheet(e,t)},refresh:function(e){return e||(e=a),e.editorClose||(this._view.sheet(this._workbook.activeSheet()),this._controller.sheet(this._workbook.activeSheet()),this._workbook.refresh(e)),e.editorChange||(this._view.refresh(e),this._controller.refresh(),this._view.render(),this.trigger("render")),this},openDialog:function(e,t){return this._view.openDialog(e,t)},autoRefresh:function(e){return void 0!==e?(this._autoRefresh=e,!0===e&&this.refresh(),this):this._autoRefresh},toJSON:function(){return this._workbook.toJSON()},fromJSON:function(e){e.sheets?(this._workbook.destroy(),this._workbook=new r(i.extend({},this.options,e)),this._bindWorkbookEvents(),this._view.workbook(this._workbook),this._controller.workbook(this._workbook),this.activeSheet(this.activeSheet())):this.refresh()},fromFile:function(e,t){return this._workbook.fromFile(e,t)},saveAsPDF:function(e){this._workbook.saveAsPDF(i.extend({},this.options.pdf,e,{workbook:this._workbook}))},saveAsExcel:function(e){this._workbook.saveAsExcel(e)},draw:function(e,t){this._workbook.draw(e,t)},_workbookExcelExport:function(e){this.trigger("excelExport",e)&&e.preventDefault()},_workbookExcelImport:function(e){this.trigger("excelImport",e)?e.preventDefault():this._initProgress(e.promise)},_initProgress:function(t){var n=i("<div class='k-loading-mask' style='width: 100%; height: 100%; top: 0;'><div class='k-loading-color'/></div>").appendTo(this.element),r=i("<div class='k-loading-progress'>").appendTo(n).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar");t.progress(function(e){r.value(e.progress)}).always(function(){e.destroy(n),n.remove()})},_workbookPdfExport:function(e){this.trigger("pdfExport",e)&&e.preventDefault()},_bindWorkbookEvents:function(){this._workbook.bind("change",this._workbookChange.bind(this)),this._workbook.bind("excelExport",this._workbookExcelExport.bind(this)),this._workbook.bind("excelImport",this._workbookExcelImport.bind(this)),this._workbook.bind("pdfExport",this._workbookPdfExport.bind(this))},destroy:function(){e.ui.Widget.fn.destroy.call(this),this._workbook.destroy(),this._controller.destroy(),this._view.destroy(),this._resizeHandler&&i(window).off("resize.kendoSpreadsheet",this._resizeHandler)},options:{name:"Spreadsheet",toolbar:!0,sheetsbar:!0,rows:200,columns:50,rowHeight:20,columnWidth:64,headerHeight:20,headerWidth:32,excel:{proxyURL:"",fileName:"Workbook.xlsx"},pdf:{area:"workbook",fileName:"Workbook.pdf",proxyURL:"",paperSize:"a4",landscape:!0,margin:null,title:null,author:null,subject:null,keywords:null,creator:"Kendo UI PDF Generator v."+e.version,date:null}},events:["pdfExport","excelExport","excelImport","change","render"]});e.spreadsheet.ALL_REASONS=a,e.ui.plugin(l),i.extend(!0,l,{classNames:{wrapper:"k-widget k-spreadsheet"}})}}(window.kendo)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.pivot.configurator",["kendo.dom"],function(){return function(e,t){function i(e){return{name:e.uniqueName,type:e.type}}function n(t){var i=e(t).closest(".k-pivot-setting");return i.length?i.data("kendoPivotSettingTarget"):null}function r(e,t,i){return{hierarchyUniqueName:e,uniqueName:t,caption:t,measure:t,name:t,type:i,kpi:!0}}function s(e){var t=e.name;return[r(t,e.value,"value"),r(t,e.goal,"goal"),r(t,e.status,"status"),r(t,e.trend,"trend")]}var o=window.kendo,a=o.ui,l=a.Widget,d=".kendoPivotConfigurator",c=o.template('<p class="k-reset"><span class="k-icon #=icon#"></span>${name}</p><div class="k-list-container k-reset"/>'),u=l.extend({init:function(e,t){l.fn.init.call(this,e,t),this.element.addClass("k-widget k-fieldselector k-alt k-edit-form-container"),this._dataSource(),this._layout(),this.refresh(),o.notify(this)},events:[],options:{name:"PivotConfigurator",filterable:!1,sortable:!1,messages:{measures:"Drop Data Fields Here",columns:"Drop Column Fields Here",rows:"Drop Rows Fields Here",measuresLabel:"Measures",columnsLabel:"Columns",rowsLabel:"Rows",fieldsLabel:"Fields"}},_dataSource:function(){this.dataSource&&this._refreshHandler?this.dataSource.unbind("change",this._refreshHandler).unbind("error",this._errorHandler).unbind("progress",this._progressHandler):(this._errorHandler=e.proxy(this._error,this),this._refreshHandler=e.proxy(this.refresh,this),this._progressHandler=e.proxy(this._requestStart,this)),this.dataSource=o.data.PivotDataSource.create(this.options.dataSource),this.dataSource.bind("change",this._refreshHandler).bind("error",this._errorHandler).bind("progress",this._progressHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.measures&&this.measures.setDataSource(e),this.rows&&this.rows.setDataSource(e),this.columns&&this.columns.setDataSource(e),this.refresh()},_treeViewDataSource:function(){var t=this;return o.data.HierarchicalDataSource.create({schema:{model:{id:"uniqueName",hasChildren:function(e){return!("hierarchyUniqueName"in e||"aggregator"in e)}}},transport:{read:function(i){var n,r;e.isEmptyObject(i.data)?t.dataSource.schemaDimensions().done(function(e){t.dataSource.cubeBuilder||function(e){for(var t,i=0,n=e.length;i<n;i++)if(2==e[i].type){t=!0;break}t&&e.splice(i+1,0,{caption:"KPIs",defaultHierarchy:"[KPIs]",name:"KPIs",uniqueName:"[KPIs]"})}(e),i.success(e)}).fail(i.error):("[KPIs]"===(n=t.treeView.dataSource.get(i.data.uniqueName)).uniqueName?(r=!0,t.dataSource.schemaKPIs().done(function(e){i.success(function(e){for(var t=0,i=e.length;t<i;t++)e[t].uniqueName=e[t].name,e[t].type="kpi";return e}(e))}).fail(i.error)):"kpi"==n.type&&(r=!0,i.success(s(n))),r||(2==n.type?t.dataSource.schemaMeasures():n.dimensionUniqueName?t.dataSource.schemaLevels(i.data.uniqueName):t.dataSource.schemaHierarchies(i.data.uniqueName)).done(i.success).fail(i.error))}}})},_progress:function(e){o.ui.progress(this.element,e)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_layout:function(){this.form=e('<div class="k-columns k-state-default k-floatwrap"/>').appendTo(this.element),this._fields(),this._targets()},_fields:function(){var t=e('<div class="k-state-default"><p class="k-reset"><span class="k-icon k-i-group"></span>'+this.options.messages.fieldsLabel+"</p></div>").appendTo(this.form);this.treeView=e("<div/>").appendTo(t).kendoTreeView({template:'# if (item.type == 2 || item.uniqueName == "[KPIs]") { #<span class="k-icon k-i-#= (item.type == 2 ? "sum" : "kpi") #"></span># } else if (item.type && item.type !== "kpi") { #<span class="k-icon k-i-dimension"></span># } ##: item.caption || item.name #',dataTextField:"caption",dragAndDrop:!0,autoBind:!1,dataSource:this._treeViewDataSource(),dragstart:function(e){var t=this.dataItem(e.sourceNode);(t.hasChildren||t.aggregator||t.measure)&&2!=t.type&&"[KPIs]"!==t.uniqueName||e.preventDefault()},drag:function(e){var t="k-denied",i=n(e.dropTarget);i&&i.validate(this.dataItem(e.sourceNode))&&(t="k-add"),e.setStatusClass(t)},drop:function(e){e.preventDefault();var t,r,o,a,l=n(e.dropTarget),d=this.dataItem(e.sourceNode);if(l&&l.validate(d)){if(a=d.defaultHierarchy||d.uniqueName,"kpi"===d.type)for(r=(o=s(d)).length,a=[],t=0;t<r;t++)a.push(i(o[t]));else d.kpi&&(a=[i(d)]);l.add(a)}}}).data("kendoTreeView")},_createTarget:function(t,i){var n='<li class="k-item k-header" data-'+o.ns+'name="${data.name}">${data.name}',r=i.sortable,s="";return r&&(s+="#if (data.sortIcon) {#",s+='<span class="k-icon ${data.sortIcon} k-setting-sort"></span>',s+="#}#"),(i.filterable||r)&&(s+='<span class="k-icon k-i-arrowhead-s k-setting-fieldmenu"></span>'),s+='<span class="k-icon k-si-close k-setting-delete"></span>',n+='<span class="k-field-actions">'+s+"</span></li>",new o.ui.PivotSettingTarget(t,e.extend({dataSource:this.dataSource,hint:function(t){var i=e('<div class="k-fieldselector"><ul class="k-list k-reset"></ul></div>');return i.find(".k-list").append(t.clone()),i},template:n,emptyTemplate:'<li class="k-item k-empty">${data}</li>'},i))},_targets:function(){var t=e('<div class="k-state-default"/>').appendTo(this.form),i=e(c({name:this.options.messages.columnsLabel,icon:"k-i-vbars"})).appendTo(t),n=e('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(i.last()),r=e(c({name:this.options.messages.rowsLabel,icon:"k-i-hbars"})).appendTo(t),s=e('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(r.last()),o=e(c({name:this.options.messages.measuresLabel,icon:"k-i-sum"})).appendTo(t),a=e('<ul class="k-pivot-configurator-settings k-list k-reset" />').appendTo(o.last()),l=this.options;this.columns=this._createTarget(n,{filterable:l.filterable,sortable:l.sortable,connectWith:s,messages:{empty:l.messages.columns,fieldMenu:l.messages.fieldMenu}}),this.rows=this._createTarget(s,{filterable:l.filterable,setting:"rows",connectWith:n,messages:{empty:this.options.messages.rows,fieldMenu:this.options.messages.fieldMenu}}),this.measures=this._createTarget(a,{setting:"measures",messages:{empty:l.messages.measures}}),n.add(s).add(a).on("mouseenter.kendoPivotConfigurator mouseleave.kendoPivotConfigurator",".k-item:not(.k-empty)",this._toggleHover)},_toggleHover:function(t){e(t.currentTarget).toggleClass("k-state-hover","mouseenter"===t.type)},_resize:function(){var e,t,i=this.element,n=this.options.height;n&&(i.height(n),i.is(":visible")&&(t=i.children(".k-columns").children("div.k-state-default"),n=i.innerHeight(),e=(i.outerHeight()-n)/2,n=n-(t.outerHeight(!0)-t.height())-e,t.height(n)))},refresh:function(){var e=this.dataSource;(e.cubeBuilder||this._cube!==e.cube()||this._catalog!==e.catalog())&&this.treeView.dataSource.fetch(),this._catalog=this.dataSource.catalog(),this._cube=this.dataSource.cube(),this._resize(),this._progress(!1)},destroy:function(){l.fn.destroy.call(this),this.dataSource.unbind("change",this._refreshHandler),this.form.find(".k-list").off(d),this.rows.destroy(),this.columns.destroy(),this.measures.destroy(),this.treeView.destroy(),this.element=null,this._refreshHandler=null}});a.plugin(u)}(window.kendo.jQuery),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.angular",["kendo.core"],function(){return function(e,t,i){"use strict";function n(t,n,o,a,d,c){function h(){var c;o.kRebind&&(c=e(e(n)[0].cloneNode(!0))),y=r(t,n,o,a,k).options,n.is("select")&&function(t){if(t.length>0){var i=e(t[0]);!/\S/.test(i.text())&&/^\?/.test(i.val())&&i.remove()}}(n[0].options);var h=k.call(n,u=y).data(a);!function(e,t,i,n,r){if(i[r]){var s=p(i[r]).assign;if(!s)throw new Error(r+" attribute used but expression in it is not assignable: "+i[n]);s(t,e)}}(h,t,o,a,d),t.$emit("kendoWidgetCreated",h);var f=function(e,t){var i=e.$on("$destroy",function(){i(),t&&(kendo.destroy(t.element),t=null)});return i}(t,h);if(o.kRebind&&function(t,i,n,r,s,o,a){var d=i.$watch(s,function(s,l){if(!t._muteRebind&&s!==l){d(),a._cleanUp&&a._cleanUp();var c=S[t.options.name];c&&c.forEach(function(t){var n=i.$eval(a["k"+t]);n&&r.append(e(n).attr(kendo.toHyphens("k"+t),""))});var u=e(t.wrapper)[0],h=e(t.element)[0],f="Upload"===t.options.name;f&&(n=e(h));var p=n.injector().get("$compile");t._destroy(),o&&o(),t=null,h&&(u&&u.parentNode.replaceChild(h,u),e(n).replaceWith(r)),p(r)(i)}},!0);l(i)}(h,t,n,c,o.kRebind,f,o),o.kNgDisabled){var m=o.kNgDisabled,v=t.$eval(m);v&&h.enable(!v),function(e,t,i,n){kendo.ui.PanelBar&&e instanceof kendo.ui.PanelBar||kendo.ui.Menu&&e instanceof kendo.ui.Menu?g.warn("k-ng-disabled specified on a widget that does not have the enable() method: "+e.options.name):t.$watch(n,function(t,i){t!=i&&e.enable(!t)})}(h,t,0,m)}if(o.kNgReadonly){var w=o.kNgReadonly,x=t.$eval(w);x&&h.readonly(x),function(e,t,i,n){"function"==typeof e.readonly?t.$watch(n,function(t,i){t!=i&&e.readonly(t)}):g.warn("k-ng-readonly specified on a widget that does not have the readonly() method: "+e.options.name)}(h,t,0,w)}return o.kNgModel&&function(t,n,r){if("function"==typeof t.value){var s=e(t.element).parents("form"),o=n[s.attr("name")],a=p(r),d=a.assign,c=!1,u=kendo.ui.MultiSelect&&t instanceof kendo.ui.MultiSelect,h=function(e){return u?e.length:0},f=h(a(n));t.$angular_setLogicValue(a(n));var m=function(e,n){e===i&&(e=null),c||e==n&&h(e)==f||(f=h(e),t.$angular_setLogicValue(e))};u?n.$watchCollection(r,m):n.$watch(r,m),t.first("change",function(){c=!0,o&&o.$pristine&&o.$setDirty(),l(n,function(){d(n,t.$angular_getLogicValue()),f=h(a(n))}),c=!1})}else g.warn("k-ng-model specified on a widget that does not have the value() method: "+t.options.name)}(h,t,o.kNgModel),_&&function(e,t,n,r,o){if(e.value){var a,d=!1;a=s(n)?function(){return function(e){return/checkbox|radio/i.test(e.attr("type"))?e.prop("checked"):e.val()}(n)}:function(){return e.value()},r.$render=function(){var n=r.$viewValue;n===i&&(n=r.$modelValue),n===i&&(n=null),d=!0,setTimeout(function(){if(d=!1,e){var i=t[e.element.attr("k-ng-model")];i&&(n=i),!1!==e.options.autoBind||e.listView.bound()?e.value(n):n&&e.value(n)}},0)},s(n)&&n.on("change",function(){d=!0});var c=function(e){return function(){var i;d||(e&&o&&(i=o.$pristine),r.$setViewValue(a()),e&&(r.$setPristine(),i&&o.$setPristine()),l(t))}};e.first("change",c(!1)),kendo.ui.AutoComplete&&e instanceof kendo.ui.AutoComplete||e.first("dataBound",c(!0));var u=a();isNaN(r.$viewValue)||u==r.$viewValue||(r.$isEmpty(r.$viewValue)?null!=u&&""!==u&&u!=r.$viewValue&&r.$setViewValue(u):e.value(r.$viewValue)),r.$setPristine()}}(h,t,n,_,b),h&&function(t,i){function n(){o.disconnect()}function r(){o.observe(e(i)[0],{attributes:!0})}if(window.MutationObserver&&t.wrapper){var s=[].slice.call(e(i)[0].classList),o=new MutationObserver(function(i){n(),t&&(i.forEach(function(i){var n=e(t.wrapper)[0];switch(i.attributeName){case"class":var r=[].slice.call(i.target.classList);r.forEach(function(e){s.indexOf(e)<0&&(n.classList.add(e),kendo.ui.ComboBox&&t instanceof kendo.ui.ComboBox&&t.input[0].classList.add(e))}),s.forEach(function(e){r.indexOf(e)<0&&(n.classList.remove(e),kendo.ui.ComboBox&&t instanceof kendo.ui.ComboBox&&t.input[0].classList.remove(e))}),s=r;break;case"disabled":"function"!=typeof t.enable||t.element.attr("readonly")||t.enable(!e(i.target).attr("disabled"));break;case"readonly":"function"!=typeof t.readonly||t.element.attr("disabled")||t.readonly(!!e(i.target).attr("readonly"))}}),r())});r(),t.first("destroy",n)}}(h,n),h}if(!(n instanceof jQuery))throw new Error("The Kendo UI directives require jQuery to be available before AngularJS. Please include jquery before angular in the document.");var f=o.kNgDelay,v=t.$eval(f),_=(c=c||[])[0],b=c[1],k=e(n)[a];if(!k)return window.console.error("Could not find: "+a),null;var w=r(t,n,o,a,k),y=w.options;if(w.unresolved.length){for(var x=[],C=0,T=w.unresolved.length;C<T;C++){var D=w.unresolved[C],F=e.Deferred(function(e){var n=t.$watch(D.path,function(t){t!==i&&(n(),e.resolve())})}).promise();x.push(F)}e.when.apply(null,x).then(h)}else{if(!f||v)return h();var E=t.$root||t,R=function(){var e=t.$watch(f,function(t){t!==i&&(e(),n.removeAttr(o.$attr.kNgDelay),f=null,m(h))})};/^\$(digest|apply)$/.test(E.$$phase)?R():t.$apply(R)}}function r(n,r,s,o,a){function l(e,r){var s=t.copy(n.$eval(r));s===i?c.push({option:e,path:r}):f[e]=s}var d=o.replace(/^kendo/,""),c=[],u=s.kOptions||s.options,h=n.$eval(u);u&&h===i&&c.push({option:"options",path:u});var f=t.extend({},s.defaultOptions,h),p=a.widget.prototype.options,m=a.widget.prototype.events;e.each(s,function(e,t){if("source"!==e&&"kDataSource"!==e&&"kScopeField"!==e&&"scopeField"!==e){var i="data"+e.charAt(0).toUpperCase()+e.slice(1);if(0===e.indexOf("on")){var n=e.replace(/^on./,function(e){return e.charAt(2).toLowerCase()});m.indexOf(n)>-1&&(f[n]=t)}if(p.hasOwnProperty(i))l(i,t);else if(p.hasOwnProperty(e)&&!b[e])l(e,t);else if(!_[e]){var r=e.match(/^k(On)?([A-Z].*)/);if(r){var s=r[2].charAt(0).toLowerCase()+r[2].slice(1);r[1]&&"kOnLabel"!=e?f[s]=t:("kOnLabel"==e&&(s="onLabel"),l(s,t))}}}});var g=s.kDataSource||s.source;return g&&(f.dataSource=v(n,r,d,g)),f.$angular=[n],{options:f,unresolved:c}}function s(e){return k.test(e[0].tagName)}function o(e,t){return function(i,n){return e.call(t,i,n)}}function a(e,t){this[e]=kendo.stringify(t)}function l(e,t){var i=e.$root||e,n=/^\$(digest|apply)$/.test(i.$$phase);t?n?t():i.$apply(t):n||i.$digest()}function d(i,n,r){if(e.isArray(i))return t.forEach(i,function(e){d(e,n,r)});if("string"==typeof i){for(var s=i.split("."),o=kendo;o&&s.length>0;)o=o[s.shift()];if(!o)return C.push([i,n,r]),!1;i=o.prototype}var a=i[n];return i[n]=function(){var e=this,t=arguments;return r.apply({self:e,next:function(){return a.apply(e,arguments.length>0?arguments:t)}},t)},!0}if(t&&t.injector){var c,u,h=t.module("kendo.directives",[]),f=t.injector(["ng"]),p=f.get("$parse"),m=f.get("$timeout"),g=f.get("$log"),v=function(){var t={TreeList:"TreeListDataSource",TreeView:"HierarchicalDataSource",Scheduler:"SchedulerDataSource",PanelBar:"$PLAIN",Menu:"$PLAIN",ContextMenu:"$PLAIN"},i=function(e,t){return"$PLAIN"==t?e:kendo.data[t].create(e)};return function(n,r,s,o){var a=t[s]||"DataSource",l=n.$eval(o),d=i(l,a);return n.$watch(o,function(t){var n=function(t){return t=e(t),kendo.widgetInstance(t,kendo.ui)||kendo.widgetInstance(t,kendo.mobile.ui)||kendo.widgetInstance(t,kendo.dataviz.ui)}(r);if(n&&"function"==typeof n.setDataSource&&t!==l){var s=i(t,a);n.setDataSource(s),l=t}}),d}}(),_={kDataSource:!0,kOptions:!0,kRebind:!0,kNgModel:!0,kNgDelay:!0},b={name:!0,title:!0,style:!0},k=/^(input|select|textarea)$/i;h.factory("directiveFactory",["$compile",function(t){var i,r=!1;return c=t,{create:function(t,s){return{restrict:"AC",require:["?ngModel","^?form"],scope:!1,controller:["$scope","$attrs","$element",function(e,t){this.template=o(a,t),t._cleanUp=o(function(){this.template=null,t._cleanUp=null},this)}],link:function(o,a,l,d){var c=e(a),u=t.replace(/([A-Z])/g,"-$1");c.attr(u,c.attr("data-"+u)),c[0].removeAttribute("data-"+u),n(o,a,l,t,s,d)&&(i&&clearTimeout(i),i=setTimeout(function(){o.$emit("kendoRendered"),r||(r=!0,e("form").each(function(){var t=e(this).controller("form");t&&t.$setPristine()}))}))}}}}}]);var w={Editor:"textarea",NumericTextBox:"input",DatePicker:"input",DateTimePicker:"input",TimePicker:"input",AutoComplete:"input",ColorPicker:"input",MaskedTextBox:"input",MultiSelect:"input",Upload:"input",Validator:"form",Button:"button",MobileButton:"a",MobileBackButton:"a",MobileDetailButton:"a",ListView:"ul",MobileListView:"ul",TreeView:"ul",Menu:"ul",ContextMenu:"ul",ActionSheet:"ul"},y=["MobileView","MobileDrawer","MobileLayout","MobileSplitView","MobilePane","MobileModalView"],x=["MobileApplication","MobileView","MobileModalView","MobileLayout","MobileActionSheet","MobileDrawer","MobileSplitView","MobilePane","MobileScrollView","MobilePopOver"];t.forEach(["MobileNavBar","MobileButton","MobileBackButton","MobileDetailButton","MobileTabStrip","MobileScrollView","MobileScroller"],function(e){x.push(e),e="kendo"+e,h.directive(e,function(){return{restrict:"A",link:function(t,i,r){n(t,i,r,e,e)}}})});var C=[];kendo.onWidgetRegistered(function(i){C=e.grep(C,function(e){return!d.apply(null,e)}),function(e,i){function n(e,t){h.directive(e,["directiveFactory",function(i){return i.create(t,e)}])}var r=i?"Mobile":"",s=r+=e.fn.options.name,o="kendo"+r.charAt(0)+r.substr(1).toLowerCase(),a=(r="kendo"+r).replace(/([A-Z])/g,"-$1");if(-1==y.indexOf(r.replace("kendo",""))){var l=r===o?[r]:[r,o];t.forEach(l,function(e){h.directive(e,function(){return{restrict:"E",replace:!0,template:function(e,t){var i=w[s]||"div",n=t.kScopeField||t.scopeField;return"<"+i+" "+a+(n?'="'+n+'"':"")+">"+e.html()+"</"+i+">"}}})})}x.indexOf(r.replace("kendo",""))>-1||(n(r,r),o!=r&&n(o,r))}(i.widget,"Mobile"==i.prefix)}),d(["ui.Widget","mobile.ui.Widget"],"angular",function(n,r){var s=this.self;if("init"==n)return!r&&u&&(r=u),u=null,void(r&&r.$angular&&(s.$angular_scope=r.$angular[0],s.$angular_init(s.element,r)));var o=s.$angular_scope;o&&function(e){var t=m;try{m=function(e){return e()},e()}finally{m=t}}(function(){var a=r(),d=a.elements,u=a.data;if(d.length>0)switch(n){case"cleanup":t.forEach(d,function(t){var i=e(t).data("$$kendoScope");i&&i!==o&&i.$$kendoScope&&function(t,i){t.$destroy(),i&&e(i).removeData("$scope").removeData("$$kendoScope").removeData("$isolateScope").removeData("$isolateScopeNoTemplate").removeClass("ng-scope")}(i,t)});break;case"compile":var h=s.element.injector(),f=h?h.get("$compile"):c;t.forEach(d,function(t,n){var r;if(a.scopeFrom)r=a.scopeFrom;else{var s=u&&u[n];s!==i?(r=e.extend(o.$new(),s)).$$kendoScope=!0:r=o}e(t).data("$$kendoScope",r),f(t)(r)}),l(o)}})}),d("ui.Widget","$angular_getLogicValue",function(){return this.self.value()}),d("ui.Widget","$angular_setLogicValue",function(e){this.self.value(e)}),d("ui.Select","$angular_getLogicValue",function(){var e=this.self.dataItem(),t=this.self.options.dataValueField;return e?this.self.options.valuePrimitive?t?e[t]:e:e.toJSON():null}),d("ui.Select","$angular_setLogicValue",function(e){var t=this.self,n=t.options,r=n.dataValueField,s=n.text||"";e===i&&(e=""),r&&!n.valuePrimitive&&e&&(s=e[n.dataTextField]||"",e=e[r||n.dataTextField]),!1!==t.options.autoBind||t.listView.bound()?t.value(e):!s&&e&&n.valuePrimitive?t.value(e):t._preselect(e,s)}),d("ui.MultiSelect","$angular_getLogicValue",function(){var t=this.self.dataItems().slice(0),i=this.self.options.dataValueField;return i&&this.self.options.valuePrimitive&&(t=e.map(t,function(e){return e[i]})),t}),d("ui.MultiSelect","$angular_setLogicValue",function(t){null==t&&(t=[]);var i=this.self,n=i.options,r=n.dataValueField,s=t;r&&!n.valuePrimitive&&(t=e.map(t,function(e){return e[r]})),!1!==n.autoBind||n.valuePrimitive||i.listView.bound()?i.value(t):i._preselect(s,t)}),d("ui.AutoComplete","$angular_getLogicValue",function(){for(var e=this.self.options,t=this.self.value().split(e.separator),i=e.valuePrimitive,n=this.self.dataSource.data(),r=[],s=0,o=n.length;s<o;s++)for(var a=n[s],l=e.dataTextField?a[e.dataTextField]:a,d=0;d<t.length;d++)if(l===t[d]){i?r.push(l):r.push(a.toJSON());break}return r}),d("ui.AutoComplete","$angular_setLogicValue",function(t){null==t&&(t=[]);var n=this.self,r=n.options.dataTextField;r&&!n.options.valuePrimitive&&(t=t.length!==i?e.map(t,function(e){return e[r]}):t[r]),n.value(t)}),d("ui.Widget","$angular_init",function(t,i){var n=this.self;if(i&&!e.isArray(i))for(var r=n.$angular_scope,s=n.events.length;--s>=0;){var o=n.events[s],a=i[o];a&&"string"==typeof a&&(i[o]=n.$angular_makeEventHandler(o,r,a))}}),d("ui.Widget","$angular_makeEventHandler",function(e,t,i){return i=p(i),function(e){l(t,function(){i(t,{kendoEvent:e})})}}),d(["ui.Grid","ui.ListView","ui.TreeView"],"$angular_makeEventHandler",function(e,i,n){return"change"!=e?this.next():(n=p(n),function(e){var r,s,o,a,d,c,u=e.sender,h=u.options,f={kendoEvent:e};t.isString(h.selectable)&&(r=-1!==h.selectable.indexOf("cell"),s=-1!==h.selectable.indexOf("multiple")),o=f.selected=this.select(),a=f.data=[],d=f.columns=[];for(var p=0;p<o.length;p++){var m=r?o[p].parentNode:o[p],g=u.dataItem(m);r?(t.element.inArray(g,a)<0&&a.push(g),c=t.element(o[p]).index(),t.element.inArray(c,d)<0&&d.push(c)):a.push(g)}s||(f.dataItem=f.data=a[0],f.angularDataItem=kendo.proxyModelSetters(f.dataItem),f.selected=o[0]),l(i,function(){n(i,f)})})}),d("ui.Grid","$angular_init",function(n,r){if(this.next(),r.columns){var s=e.extend({},kendo.Template,r.templateSettings);t.forEach(r.columns,function(e){!e.field||e.template||e.format||e.values||e.encoded!==i&&!e.encoded||(e.template="<span ng-bind='"+kendo.expr(e.field,"dataItem")+"'>#: "+kendo.expr(e.field,s.paramName)+"#</span>")})}}),d("mobile.ui.ButtonGroup","value",function(e){var t=this.self;return null!=e&&(t.select(t.element.children("li.km-button").eq(e)),t.trigger("change"),t.trigger("select",{index:t.selectedIndex})),t.selectedIndex}),d("mobile.ui.ButtonGroup","_select",function(){this.next(),this.self.trigger("change")}),h.directive("kendoMobileApplication",function(){return{terminal:!0,link:function(e,t,i){n(e,t,i,"kendoMobileApplication","kendoMobileApplication")}}}).directive("kendoMobileView",function(){return{scope:!0,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions,i._instance=n(e,t,i,"kendoMobileView","kendoMobileView")},post:function(e,t,i){i._instance._layout(),i._instance._scroller()}}}}).directive("kendoMobileDrawer",function(){return{scope:!0,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions,i._instance=n(e,t,i,"kendoMobileDrawer","kendoMobileDrawer")},post:function(e,t,i){i._instance._layout(),i._instance._scroller()}}}}).directive("kendoMobileModalView",function(){return{scope:!0,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions,i._instance=n(e,t,i,"kendoMobileModalView","kendoMobileModalView")},post:function(e,t,i){i._instance._layout(),i._instance._scroller()}}}}).directive("kendoMobileSplitView",function(){return{terminal:!0,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions,i._instance=n(e,t,i,"kendoMobileSplitView","kendoMobileSplitView")},post:function(e,t,i){i._instance._layout()}}}}).directive("kendoMobilePane",function(){return{terminal:!0,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions,n(e,t,i,"kendoMobilePane","kendoMobilePane")}}}}).directive("kendoMobileLayout",function(){return{link:{pre:function(e,t,i){n(e,t,i,"kendoMobileLayout","kendoMobileLayout")}}}}).directive("kendoMobileActionSheet",function(){return{restrict:"A",link:function(t,i,r){i.find("a[k-action]").each(function(){e(this).attr("data-"+kendo.ns+"action",e(this).attr("k-action"))}),n(t,i,r,"kendoMobileActionSheet","kendoMobileActionSheet")}}}).directive("kendoMobilePopOver",function(){return{terminal:!0,link:{pre:function(e,t,i){i.defaultOptions=e.viewOptions,n(e,t,i,"kendoMobilePopOver","kendoMobilePopOver")}}}}).directive("kendoViewTitle",function(){return{restrict:"E",replace:!0,template:function(e){return"<span data-"+kendo.ns+"role='view-title'>"+e.html()+"</span>"}}}).directive("kendoMobileHeader",function(){return{restrict:"E",link:function(e,t){t.addClass("km-header").attr("data-role","header")}}}).directive("kendoMobileFooter",function(){return{restrict:"E",link:function(e,t){t.addClass("km-footer").attr("data-role","footer")}}}).directive("kendoMobileScrollViewPage",function(){return{restrict:"E",replace:!0,template:function(e){return"<div data-"+kendo.ns+"role='page'>"+e.html()+"</div>"}}}),t.forEach(["align","icon","rel","transition","actionsheetContext"],function(e){var t="k"+e.slice(0,1).toUpperCase()+e.slice(1);h.directive(t,function(){return{restrict:"A",priority:2,link:function(i,n,r){n.attr(kendo.attr(kendo.toHyphens(e)),i.$eval(r[t]))}}})});var S={TreeMap:["Template"],MobileListView:["HeaderTemplate","Template"],MobileScrollView:["EmptyTemplate","Template"],Grid:["AltRowTemplate","DetailTemplate","RowTemplate"],ListView:["EditTemplate","Template","AltTemplate"],Pager:["SelectTemplate","LinkTemplate"],PivotGrid:["ColumnHeaderTemplate","DataCellTemplate","RowHeaderTemplate"],Scheduler:["AllDayEventTemplate","DateHeaderTemplate","EventTemplate","MajorTimeHeaderTemplate","MinorTimeHeaderTemplate"],TreeView:["Template"],Validator:["ErrorTemplate"]};!function(){var e={};t.forEach(S,function(i,n){t.forEach(i,function(t){e[t]||(e[t]=[]),e[t].push("?^^kendo"+n)})}),t.forEach(e,function(e,t){var i="k"+t,n=kendo.toHyphens(i);h.directive(i,function(){return{restrict:"A",require:e,terminal:!0,compile:function(t,r){if(""===r[i]){t.removeAttr(n);var s=t[0].outerHTML;return function(t,r,o,a){for(var l;!l&&a.length;)l=a.shift();l?(l.template(i,s),r.remove()):g.warn(n+" without a matching parent widget found. It can be one of the following: "+e.join(", "))}}}}})})}()}}(window.kendo.jQuery,window.angular),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.webcomponents",["kendo.core"],function(){return function(e,t,i){function n(e,t){var n={};return Object.keys(t).concat("dataSource").forEach(function(t){e.hasAttribute(kendo.toHyphens(t))&&(n[t]=function(e,t){var n=e.getAttribute(t);return null===n?n=i:"null"===n?n=null:"true"===n?n=!0:"false"===n?n=!1:u.test(n)?n=parseFloat(n):d.test(n)&&!c.test(n)&&(n=new Function("return ("+n+")")()),n}(e,kendo.toHyphens(t)))}),n}function r(e,t){var i=document.createEvent("CustomEvent");i.initCustomEvent(e,!1,!0,function(e){var t={};return Object.keys(e).forEach(function(i){"_"!=i[0]&&(t[i]=e[i])}),t}(t)),this.dispatchEvent(i),i.defaultPrevented&&t.preventDefault()}function s(e,t){for(var i=Object.keys(t),n=0;n<=i.length;n++)if("function"==typeof t[i[n]])e[i[n]]||(e[i[n]]=t[i[n]].bind(e.widget));else{if("options"===i[n])continue;e[i[n]]=e[i[n]]||t[i[n]]}}if(kendo.support.customElements&&!kendo.webComponents.length&&(!t||1!=t.version.major&&!t.injector)){var o={editor:"textarea",numerictextbox:"input",datepicker:"input",datetimepicker:"input",timepicker:"input",autocomplete:"input",colorpicker:"input",maskedtextbox:"input",dropdownlist:"select",multiselect:"select",upload:"input",validator:"form",button:"button",mobilebutton:"a",mobilebackbutton:"a",mobiledetailbutton:"a",listview:"ul",mobilelistview:"ul",treeview:"ul",menu:"ul",contextmenu:"ul",actionsheet:"ul"},a="on-",l=[];kendo.onWidgetRegistered(function(t){var i=t.prefix+t.widget.prototype.options.name.toLowerCase();-1===l.indexOf(i)&&(l.push(i),function(t,i){var l=i.prototype.options,d=Object.create(HTMLElement.prototype);Object.defineProperty(d,"options",{get:function(){return this.widget.options},set:function(i){var n=this.widget;i=e.extend(!0,{},n.options,i);var r=e(n.wrapper)[0],s=e(n.element)[0];n._destroy();var a=document.createElement(o[t]||"div");r&&s&&(r.parentNode.replaceChild(s,r),e(s).replaceWith(a)),n.value&&(i.value=n.value()),n.init(a,i),this.bindEvents()}}),d.bindEvents=function(){i.prototype.events.forEach(function(e){this.widget.bind(e,r.bind(this,e)),this.hasAttribute(a+e)&&this.bind(e,function(t){window[this.getAttribute(a+e)].call(this,t)}.bind(this))}.bind(this))},d.attachedCallback=function(){var r=document.createElement(o[t]||"div");e(r).append(this.childNodes),e(r).attr("class",e(this).attr("class")),e(r).attr("style",e(this).attr("style")),this.appendChild(r),this.widget=new i(r,n(this,l));var a=this.widget;do{s(this,a)}while(a=Object.getPrototypeOf(a));this.bindEvents()},d.detachedCallback=function(){kendo.destroy(this.element)},kendo.webComponents.push("kendo-"+t),document.registerElement("kendo-"+t,{prototype:d})}(i,t.widget))});var d=/^\s*(?:\{(?:.|\r\n|\n)*\}|\[(?:.|\r\n|\n)*\])\s*$/,c=/^\{(\d+)(:[^\}]+)?\}|^\[[A-Za-z_]*\]$/,u=/^(\+|-?)\d+(\.?)\d*$/}}(window.kendo.jQuery,window.angular),window.kendo}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.angular2",["kendo.core","kendo.webcomponents"],function(){!function(e,t){if(t&&t.register){var i=this&&this.__decorate||function(e,t,i,n){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,i,n);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,n){n&&n(t,i)},void 0);case 4:return e.reduceRight(function(e,n){return n&&n(t,i,e)||e},n)}},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};t.register("kendo/angular2",["angular2/angular2"],function(t){var r,s;return{setters:[function(e){r=e}],execute:function(){s=function(){function t(e,t){var i=this;this.elementRef=t,this.onChange=function(e){},this.onTouched=function(){},this.element=t.nativeElement,this.element.addEventListener("change",function(){i.onChange(i.element.value())}),this.element.addEventListener("spin",function(){i.onChange(i.element.value())}),e.valueAccessor=this,this.cd=e,e.valueAccessor=this}return t.prototype.writeValue=function(e){this.element.value(e)},t.prototype.registerOnChange=function(e){this.onChange=e},t.prototype.registerOnTouched=function(e){this.onTouched=e},t=i([r.Directive({selector:e.webComponents.join(",")}),n("design:paramtypes",[r.NgControl,r.ElementRef])],t)}(),t("KendoValueAccessor",s)}}})}}(window.kendo,window.System)}),(typeof define=="function"&&define.amd?define:function(e,t,i){(i||t)()})("kendo.web",["kendo.core","kendo.router","kendo.view","kendo.fx","kendo.dom","kendo.data.odata","kendo.data.xml","kendo.data","kendo.ooxml","kendo.excel","kendo.data.signalr","kendo.binder","kendo.drawing","kendo.validator","kendo.userevents","kendo.draganddrop","kendo.mobile.scroller","kendo.groupable","kendo.reorderable","kendo.resizable","kendo.sortable","kendo.selectable","kendo.button","kendo.pager","kendo.popup","kendo.notification","kendo.tooltip","kendo.list","kendo.calendar","kendo.datepicker","kendo.autocomplete","kendo.dropdownlist","kendo.combobox","kendo.multiselect","kendo.colorpicker","kendo.columnmenu","kendo.columnsorter","kendo.grid","kendo.listview","kendo.filebrowser","kendo.imagebrowser","kendo.editor","kendo.numerictextbox","kendo.maskedtextbox","kendo.menu","kendo.editable","kendo.pivot.fieldmenu","kendo.filtercell","kendo.panelbar","kendo.progressbar","kendo.responsivepanel","kendo.tabstrip","kendo.timepicker","kendo.toolbar","kendo.datetimepicker","kendo.treeview.draganddrop","kendo.treeview","kendo.slider","kendo.splitter","kendo.upload","kendo.window","kendo.virtuallist","kendo.scheduler.view","kendo.scheduler.dayview","kendo.scheduler.agendaview","kendo.scheduler.monthview","kendo.scheduler.recurrence","kendo.scheduler","kendo.gantt.list","kendo.gantt.timeline","kendo.gantt","kendo.treelist","kendo.pivotgrid","kendo.spreadsheet","kendo.pivot.configurator","kendo.angular","kendo.webcomponents","kendo.angular2"],function(){"bundle all";return window.kendo});